const _0x28f57a=_0x26c6;(function(_0xc72086,_0xfe1025){const _0x46d5a7=_0x26c6,_0x21b6d8=_0xc72086();while(!![]){try{const _0x34ccf2=parseInt(_0x46d5a7(0x14f))/0x1+parseInt(_0x46d5a7(0xf9))/0x2+-parseInt(_0x46d5a7(0xce))/0x3*(-parseInt(_0x46d5a7(0x18d))/0x4)+-parseInt(_0x46d5a7(0xfb))/0x5*(-parseInt(_0x46d5a7(0x12a))/0x6)+parseInt(_0x46d5a7(0x182))/0x7+parseInt(_0x46d5a7(0x172))/0x8*(parseInt(_0x46d5a7(0x1a3))/0x9)+-parseInt(_0x46d5a7(0x150))/0xa;if(_0x34ccf2===_0xfe1025)break;else _0x21b6d8['push'](_0x21b6d8['shift']());}catch(_0x4d5b93){_0x21b6d8['push'](_0x21b6d8['shift']());}}}(_0x3283,0x33861));function generateAttackPathInternal(_0x38af52){const _0x105d50=_0x26c6;try{if(!_0x38af52||!gameCanvas)return[];const _0x107c6c=_0x38af52[_0x105d50(0x113)]===ENEMY3_TYPE?BOSS_WIDTH:_0x38af52[_0x105d50(0x113)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x5dec5d=_0x38af52['type']===ENEMY3_TYPE?BOSS_HEIGHT:_0x38af52[_0x105d50(0x113)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x52f2a8=_0x107c6c*0.5,_0x267862=gameCanvas[_0x105d50(0x1c2)],_0x1028a8=gameCanvas[_0x105d50(0x16a)];let _0x4e1b1c=[];const _0x5c28d8={'x':_0x38af52['x'],'y':_0x38af52['y']},_0x4427e1=Math['min'](_0x1028a8*0.06,_0x5dec5d*1.8),_0x503bfb=Math['min'](_0x267862*0.04,_0x107c6c*1.2),_0x27cbaa=_0x38af52['x']+_0x107c6c/0x2<_0x267862/0x2?0x1:-0x1,_0x5cf4a3={'x':_0x5c28d8['x']-_0x27cbaa*_0x503bfb*0.6,'y':_0x5c28d8['y']-_0x4427e1};_0x5cf4a3['x']=Math[_0x105d50(0x1e0)](_0x52f2a8,Math[_0x105d50(0xdb)](_0x267862-_0x52f2a8-_0x107c6c,_0x5cf4a3['x'])),_0x5cf4a3['y']=Math[_0x105d50(0x1e0)](_0x52f2a8,_0x5cf4a3['y']);const _0x1c619b={'x':_0x5c28d8['x']+_0x27cbaa*_0x503bfb*0.1,'y':_0x5c28d8['y']-_0x4427e1*1.4},_0x15f190={'x':_0x5cf4a3['x']+_0x27cbaa*_0x503bfb*0.3,'y':_0x5c28d8['y']-_0x4427e1*1.5},_0x2a65b1={'p0':_0x5c28d8,'p1':_0x1c619b,'p2':_0x15f190,'p3':_0x5cf4a3};_0x4e1b1c[_0x105d50(0x157)](_0x2a65b1);const _0x3c5a68=_0x5cf4a3,_0x5c3f8c=_0x1028a8*0.45,_0x1706b4=_0x267862*0.22,_0x4e4319=_0x1028a8*0.28,_0x18bf0e=0.5,_0x17bb8b=0.6,_0x1d2fb9=_0x1028a8*0.85,_0x39f69c=Math[_0x105d50(0x190)](Math[_0x105d50(0x132)]()*0x3);let _0x3f8609=[];if(_0x39f69c===0x0){const _0x3c256a=_0x5c3f8c+Math['random']()*_0x1028a8*0.1,_0x56e7eb=_0x1706b4+Math[_0x105d50(0x132)]()*_0x267862*0.08,_0x419af9=_0x4e4319+Math[_0x105d50(0x132)]()*_0x1028a8*0.08,_0x11c850=_0x3c5a68['x']+_0x27cbaa*_0x56e7eb*0.5,_0x423e17=Math[_0x105d50(0xdb)](_0x1d2fb9,_0x3c5a68['y']+_0x3c256a),_0x3adcfa=_0x11c850+_0x27cbaa*_0x56e7eb*0.5,_0x1aa6a8=Math[_0x105d50(0x1e0)](_0x3c5a68['y']+0x14,_0x423e17-_0x419af9),_0x6a5631=_0x3adcfa-_0x27cbaa*_0x56e7eb*0.9,_0x4fa1b4=Math[_0x105d50(0x1e0)](_0x3c5a68['y']+0x28,_0x1aa6a8+_0x419af9*0.6),_0x144085=_0x6a5631-_0x27cbaa*_0x56e7eb*0.3,_0x2ff6fe=_0x1028a8+_0x5dec5d*0x2,_0x4bdcec=Math[_0x105d50(0x1e0)](_0x52f2a8,Math[_0x105d50(0xdb)](_0x267862-_0x52f2a8-_0x107c6c,_0x11c850)),_0x5364d1=Math['max'](_0x52f2a8,Math[_0x105d50(0xdb)](_0x267862-_0x52f2a8-_0x107c6c,_0x3adcfa)),_0x1cfb3d=Math[_0x105d50(0x1e0)](_0x52f2a8,Math[_0x105d50(0xdb)](_0x267862-_0x52f2a8-_0x107c6c,_0x6a5631)),_0x2255de={'x':_0x3c5a68['x'],'y':_0x3c5a68['y']+_0x3c256a*_0x17bb8b*0.5},_0x16cd06={'x':_0x4bdcec-_0x27cbaa*_0x56e7eb*_0x18bf0e,'y':_0x423e17},_0x1d00ab={'x':_0x4bdcec,'y':_0x423e17},_0x4bae91={'x':_0x4bdcec+_0x27cbaa*_0x56e7eb*_0x18bf0e,'y':_0x423e17},_0x142bc7={'x':_0x5364d1,'y':_0x1aa6a8+_0x419af9*_0x17bb8b},_0xff6e78={'x':_0x5364d1,'y':_0x1aa6a8},_0x1c532c={'x':_0x5364d1,'y':_0x1aa6a8-_0x419af9*_0x17bb8b*0.5},_0x521946={'x':_0x1cfb3d+_0x27cbaa*_0x56e7eb*_0x18bf0e,'y':_0x4fa1b4},_0x1324d1={'x':_0x1cfb3d,'y':_0x4fa1b4},_0x188033={'x':_0x1324d1['x'],'y':_0x1324d1['y']+_0x1028a8*0.1},_0xd7bc7={'x':_0x144085,'y':_0x2ff6fe-_0x1028a8*0.2},_0x2b7d8c={'x':_0x144085,'y':_0x2ff6fe};_0x3f8609=[{'p0':_0x3c5a68,'p1':_0x2255de,'p2':_0x16cd06,'p3':_0x1d00ab},{'p0':_0x1d00ab,'p1':_0x4bae91,'p2':_0x142bc7,'p3':_0xff6e78},{'p0':_0xff6e78,'p1':_0x1c532c,'p2':_0x521946,'p3':_0x1324d1},{'p0':_0x1324d1,'p1':_0x188033,'p2':_0xd7bc7,'p3':_0x2b7d8c}];}else{if(_0x39f69c===0x1){const _0x13a0c7=_0x5c3f8c*0.8+Math['random']()*_0x1028a8*0.1,_0x222c41=_0x1706b4*1.2+Math[_0x105d50(0x132)]()*_0x267862*0.1,_0x4891e6=_0x4e4319*0.7+Math[_0x105d50(0x132)]()*_0x1028a8*0.1,_0x242311=_0x3c5a68['x']+_0x27cbaa*_0x222c41*0.4,_0x12e89a=Math['min'](_0x1d2fb9-_0x4891e6*0.5,_0x3c5a68['y']+_0x13a0c7*0.6),_0x245ea3=_0x242311+_0x27cbaa*_0x222c41*0.6,_0x4f8648=Math['min'](_0x1d2fb9,_0x12e89a+_0x4891e6),_0x25487f=_0x245ea3-_0x27cbaa*_0x222c41*0.5,_0x44baf5=_0x1028a8+_0x5dec5d*0x2,_0x1fdd7c=Math[_0x105d50(0x1e0)](_0x52f2a8,Math[_0x105d50(0xdb)](_0x267862-_0x52f2a8-_0x107c6c,_0x242311)),_0x2262b4=Math['max'](_0x52f2a8,Math['min'](_0x267862-_0x52f2a8-_0x107c6c,_0x245ea3)),_0x2c4770={'x':_0x3c5a68['x']-_0x27cbaa*_0x222c41*0.1,'y':_0x3c5a68['y']+_0x13a0c7*0.3},_0x3be099={'x':_0x1fdd7c-_0x27cbaa*_0x222c41*_0x18bf0e*0.8,'y':_0x12e89a+_0x4891e6*_0x17bb8b*0.4},_0x337c6a={'x':_0x1fdd7c,'y':_0x12e89a},_0x4fc668={'x':_0x1fdd7c+_0x27cbaa*_0x222c41*_0x18bf0e*0.8,'y':_0x12e89a-_0x4891e6*_0x17bb8b*0.4},_0x3307f1={'x':_0x2262b4+_0x27cbaa*_0x222c41*_0x18bf0e*0.6,'y':_0x4f8648+_0x4891e6*_0x17bb8b*0.5},_0x3c1c7d={'x':_0x2262b4,'y':_0x4f8648},_0x40c5e6={'x':_0x2262b4-_0x27cbaa*_0x222c41*0.2,'y':_0x4f8648+_0x1028a8*0.1},_0x582fa7={'x':_0x25487f,'y':_0x44baf5-_0x1028a8*0.3},_0x3aea66={'x':_0x25487f,'y':_0x44baf5};_0x3f8609=[{'p0':_0x3c5a68,'p1':_0x2c4770,'p2':_0x3be099,'p3':_0x337c6a},{'p0':_0x337c6a,'p1':_0x4fc668,'p2':_0x3307f1,'p3':_0x3c1c7d},{'p0':_0x3c1c7d,'p1':_0x40c5e6,'p2':_0x582fa7,'p3':_0x3aea66}];}else{const _0x1232ca=_0x5c3f8c*0.6+Math[_0x105d50(0x132)]()*_0x1028a8*0.05,_0xec9252=_0x1706b4*0.7+Math['random']()*_0x267862*0.05,_0x429fa0=_0x4e4319*0.6+Math[_0x105d50(0x132)]()*_0x1028a8*0.05,_0x23ca92=_0x429fa0*1.5,_0x137bac=_0x3c5a68['x']+_0x27cbaa*_0xec9252*0.5,_0x4f822a=Math[_0x105d50(0xdb)](_0x1d2fb9-_0x23ca92,_0x3c5a68['y']+_0x1232ca),_0x561544=_0x137bac+_0x27cbaa*_0xec9252*0.5,_0x2c17d1=_0x4f822a+_0x429fa0,_0x4b5521=_0x561544-_0x27cbaa*_0xec9252*0.8,_0x2435d2=Math[_0x105d50(0xdb)](_0x1d2fb9,_0x2c17d1+_0x23ca92*0.7),_0x1cc954=_0x4b5521+_0x27cbaa*_0xec9252*0.4,_0xa44440=_0x2435d2+_0x429fa0*0.8,_0x26009a=_0x1cc954,_0x4afa07=_0x1028a8+_0x5dec5d*0x2,_0xe41a6c=Math[_0x105d50(0x1e0)](_0x52f2a8,Math['min'](_0x267862-_0x52f2a8-_0x107c6c,_0x137bac)),_0x51e847=Math[_0x105d50(0x1e0)](_0x52f2a8,Math['min'](_0x267862-_0x52f2a8-_0x107c6c,_0x561544)),_0x6f4e5c=Math[_0x105d50(0x1e0)](_0x52f2a8,Math['min'](_0x267862-_0x52f2a8-_0x107c6c,_0x4b5521)),_0x3f0379=Math[_0x105d50(0x1e0)](_0x52f2a8,Math[_0x105d50(0xdb)](_0x267862-_0x52f2a8-_0x107c6c,_0x1cc954)),_0x2a94f8={'x':_0x3c5a68['x'],'y':_0x3c5a68['y']+_0x1232ca*0.5},_0x149bca={'x':_0xe41a6c-_0x27cbaa*_0xec9252*_0x18bf0e,'y':_0x4f822a+_0x429fa0*_0x17bb8b*0.3},_0x17d67c={'x':_0xe41a6c,'y':_0x4f822a},_0x3e61b8={'x':_0xe41a6c+_0x27cbaa*_0xec9252*_0x18bf0e,'y':_0x4f822a-_0x429fa0*_0x17bb8b*0.3},_0x44e67d={'x':_0x51e847+_0x27cbaa*_0xec9252*_0x18bf0e,'y':_0x2c17d1+_0x429fa0*_0x17bb8b*0.5},_0x4a418d={'x':_0x51e847,'y':_0x2c17d1},_0x24d9c8={'x':_0x51e847-_0x27cbaa*_0xec9252*_0x18bf0e,'y':_0x2c17d1-_0x429fa0*_0x17bb8b*0.5},_0x5243d5={'x':_0x6f4e5c-_0x27cbaa*_0xec9252*_0x18bf0e,'y':_0x2435d2+_0x429fa0*_0x17bb8b*0.4},_0x548c19={'x':_0x6f4e5c,'y':_0x2435d2},_0x4619ae={'x':_0x6f4e5c+_0x27cbaa*_0xec9252*_0x18bf0e,'y':_0x2435d2-_0x429fa0*_0x17bb8b*0.4},_0x4c1d86={'x':_0x3f0379+_0x27cbaa*_0xec9252*_0x18bf0e,'y':_0xa44440+_0x429fa0*_0x17bb8b*0.6},_0x2ecde4={'x':_0x3f0379,'y':_0xa44440},_0x5d6379={'x':_0x3f0379-_0x27cbaa*_0xec9252*0.1,'y':_0xa44440+_0x1028a8*0.05},_0x2073b4={'x':_0x26009a,'y':_0x4afa07-_0x1028a8*0.2},_0xfde76b={'x':_0x26009a,'y':_0x4afa07};_0x3f8609=[{'p0':_0x3c5a68,'p1':_0x2a94f8,'p2':_0x149bca,'p3':_0x17d67c},{'p0':_0x17d67c,'p1':_0x3e61b8,'p2':_0x44e67d,'p3':_0x4a418d},{'p0':_0x4a418d,'p1':_0x24d9c8,'p2':_0x5243d5,'p3':_0x548c19},{'p0':_0x548c19,'p1':_0x4619ae,'p2':_0x4c1d86,'p3':_0x2ecde4},{'p0':_0x2ecde4,'p1':_0x5d6379,'p2':_0x2073b4,'p3':_0xfde76b}];}}return _0x4e1b1c[_0x105d50(0x157)](..._0x3f8609),_0x4e1b1c;}catch(_0x1505b){return console[_0x105d50(0x1c5)]('[DEBUG]\x20Error\x20generating\x20attack\x20path\x20for\x20enemy\x20'+_0x38af52?.['id']+':',_0x1505b),[];}}window[_0x28f57a(0x1a0)]=generateAttackPathInternal;function resetAllMessagesInternal(){showReadyMessage=![],isShowingIntro=![],showCsHitsMessage=![],showPerfectMessage=![],showCsBonusScoreMessage=![],showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showExtraLifeMessage=![],isShowingCaptureMessage=![],isShowingPlayerGameOverMessage=![],isShowingCoopPlayersReady=![],csHitsMessageStartTime=0x0,perfectMessageStartTime=0x0,csBonusScoreMessageStartTime=0x0,csClearMessageStartTime=0x0,extraLifeMessageStartTime=0x0,readyMessageStartTime=0x0,captureMessageStartTime=0x0,playerGameOverMessageStartTime=0x0,csCompletionDelayStartTime=0x0,introDisplayStartTime=0x0,coopPlayersReadyStartTime=0x0;}window[_0x28f57a(0x1a2)]=resetAllMessagesInternal;function stopAllGameSoundsInternal(){const _0x5c43a3=_0x28f57a,_0x53a7b2=[playerShootSound,explosionSound,gameOverSound,lostLifeSound,entranceSound,bossGalagaDiveSound,levelUpSound,enemyShootSound,butterflyDiveSound,startSound,coinSound,beeHitSound,butterflyHitSound,bossHit1Sound,bossHit2Sound,gridBackgroundSound,extraLifeSound,csPerfectSound,csClearSound,waveUpSound,menuMusicSound,readySound,tripleAttackSound,captureSound,shipCapturedSound,dualShipSound,resultsMusicSound,hiScoreSound];_0x53a7b2[_0x5c43a3(0x1a7)](_0x4723fc=>{const _0x405998=_0x5c43a3;if(_0x4723fc&&typeof _0x4723fc['pause']==='function')try{_0x4723fc['pause'](),typeof _0x4723fc[_0x405998(0x13a)]==='number'&&(_0x4723fc['currentTime']=0x0);}catch(_0x142ecc){}}),isGridSoundPlaying=![];}window[_0x28f57a(0xc9)]=stopAllGameSoundsInternal;function resetGameInternal(){const _0xd2dac1=_0x28f57a;score=0x0,level=0x1,playerLives=0x3;if(isTwoPlayerMode){player1Lives=0x3,player2Lives=0x3,player1Score=0x0,player2Score=0x0,currentPlayer=0x1,player1CompletedLevel=-0x1,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet[_0xd2dac1(0x1c8)]();else player1LifeThresholdsMet=new Set();if(player2LifeThresholdsMet instanceof Set)player2LifeThresholdsMet['clear']();else player2LifeThresholdsMet=new Set();player1IsDualShipActive=![],player2IsDualShipActive=![],isPlayer1ShipCaptured=![],isPlayer2ShipCaptured=![],isPlayer1WaitingForRespawn=![],isPlayer2WaitingForRespawn=![],isPlayer1Invincible=![],isPlayer2Invincible=![],player1RespawnTime=0x0,player2RespawnTime=0x0,player1InvincibilityEndTime=0x0,player2InvincibilityEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![];if(selectedGameMode===_0xd2dac1(0x109)){playerLives=0x0;if(gameCanvas&&gameCanvas[_0xd2dac1(0x1c2)]>0x0&&gameCanvas['height']>0x0){const _0x35dfbd=gameCanvas[_0xd2dac1(0x1c2)]/0x2-gameCanvas[_0xd2dac1(0x1c2)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x475291=gameCanvas['width']/0x2+gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x4debdc=gameCanvas[_0xd2dac1(0x16a)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;ship1={'x':_0x35dfbd,'y':_0x4debdc,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x35dfbd,'id':'p1'},ship2={'x':_0x475291,'y':_0x4debdc,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x475291,'id':'p2'},(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xd2dac1(0x17e))&&(smoothedShip1X=_0x35dfbd,smoothedShip2X=_0x475291,aiShip1TargetEnemy=null,aiShip2TargetEnemy=null,aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0,aiShip1LastShotTime=0x0,aiShip2LastShotTime=0x0,aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0);}ship=null;}else{if(!ship&&gameCanvas&&gameCanvas[_0xd2dac1(0x1c2)]>0x0&&gameCanvas[_0xd2dac1(0x16a)]>0x0)ship={'x':Math['round'](gameCanvas[_0xd2dac1(0x1c2)]/0x2-SHIP_WIDTH/0x2),'y':gameCanvas[_0xd2dac1(0x16a)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':_0xd2dac1(0x122)},ship[_0xd2dac1(0x127)]=ship['x'];else ship&&gameCanvas&&gameCanvas[_0xd2dac1(0x1c2)]>0x0&&gameCanvas[_0xd2dac1(0x16a)]>0x0&&(ship['x']=Math[_0xd2dac1(0x167)](gameCanvas[_0xd2dac1(0x1c2)]/0x2-SHIP_WIDTH/0x2),ship[_0xd2dac1(0x127)]=ship['x'],ship['y']=gameCanvas[_0xd2dac1(0x16a)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}}else{player1Lives=0x3,player1Score=0x0,player1MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet['clear']();else player1LifeThresholdsMet=new Set();if(!ship&&gameCanvas&&gameCanvas[_0xd2dac1(0x1c2)]>0x0&&gameCanvas[_0xd2dac1(0x16a)]>0x0)ship={'x':Math['round'](gameCanvas[_0xd2dac1(0x1c2)]/0x2-SHIP_WIDTH/0x2),'y':gameCanvas[_0xd2dac1(0x16a)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':'main'},ship['targetX']=ship['x'];else ship&&gameCanvas&&gameCanvas[_0xd2dac1(0x1c2)]>0x0&&gameCanvas['height']>0x0&&(ship['x']=Math[_0xd2dac1(0x167)](gameCanvas[_0xd2dac1(0x1c2)]/0x2-SHIP_WIDTH/0x2),ship[_0xd2dac1(0x127)]=ship['x'],ship['y']=gameCanvas[_0xd2dac1(0x16a)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,isDualShipActive=![];if(!isTwoPlayerMode)player1IsDualShipActive=![];fallingShips=[],visualOffsetX=-0x14,gameOverSequenceStartTime=0x0,isShowingResultsScreen=![],gameStartTime=Date[_0xd2dac1(0x19f)](),gameJustStarted=!![],gameJustStartedAndWaveLaunched=![],currentGridOffsetX=0x0,gridMoveDirection=0x1,gridJustCompleted=![],isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,lastGridFireCheckTime=0x0,player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,scoreEarnedThisCS=0x0,challengingStageEnemiesHit=0x0,aiNeedsStabilization=!![],aiStabilizationEndTime=0x0,smoothedShipX=undefined,aiCanShootTime=0x0,aiLastShotTime=0x0,!(selectedGameMode===_0xd2dac1(0x109)&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'))&&(aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0),playerLastShotTime=0x0,player1LastShotTime=0x0,player2LastShotTime=0x0,p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],isShowingCoopPlayersReady=![],coopPlayersReadyStartTime=0x0,resetWaveInternal();}window[_0x28f57a(0x174)]=resetGameInternal;function _0x3283(){const _0x30813c=['Invalid\x20next\x20Normal\x20Bezier\x20segment\x20','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20','now','generateAttackPath','Error\x20updating\x20floating\x20scores:','resetAllMessages','704331zlyTKg','hasOwnProperty','Invalid\x20Normal\x20Bezier\x20segment\x20','hasFiredPostLanding','forEach','\x20(state:\x20','totalRotation','cos','CS_LoopAttack_BL','CRITICAL:\x20Failed\x20to\x20define\x20CS\x20paths!','Entrance\x20Wave:\x20Assigned\x20entrance\x20path\x20\x22','isArray','canFireThisDive','enemy-entr-','attackGroupId','capturePrepareTimeout','\x20off\x20screen:','Entrance\x20Wave:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','[scheduleEntranceFlightWave]\x20Called\x20inappropriately\x20or\x20with\x20no\x20definition.\x20Level\x20','normal','\x20(Path\x20','squadronId','playerId',',\x20isFullGrid:\x20','Entrance\x20Wave:\x20No\x20squadrons\x20or\x20enemies\x20scheduled\x20for\x20level\x20','object','rotation','CS3_DiveLoopR_Sharp','\x20after\x20bad\x20segment','generateWaveDefinition','num','width','\x20attacking,\x20invalid\x20NEXT\x20segment\x20','NORMAL','error','\x20in\x20returning','substring','clear','add','string','challenging_stage','Error\x20handling\x20player\x20input:','showing_capture_message','initialCaptureAnimationY','Error\x20getting\x20grid\x20pos\x20after\x20invalid\x20NEXT\x20attack\x20segment\x20for\x20',',\x20isCS:\x20','sqrt','completed','Boss\x20','[scheduleSingleEntranceSquadron]\x20Firing\x20status\x20for\x20squadron\x20','FATAL\x20Error\x20in\x20moveEntities\x20(Restored\x20Conditions):','gridRow','\x20for\x20squadron\x20','attack-','pathT','getWaveType',',\x20Path\x20','Error\x20calculating\x20final\x20bezier\x20point\x20for\x20','gridCol','1UP','Error\x20calculating\x20bezier\x20point\x20during\x20attack\x20for\x20','max','\x20(invalid\x20attack\x20index):','targetPlayerId','\x20invalid!\x20Skipping.','moving_to_grid','map','every','2UP','Error\x20in\x20triggerImmediateCaptureDive:','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!','2\x20PLAYER','warn','attacking','naturalHeight','Error\x20getting\x20grid\x20pos\x20for\x20','CS_HorizontalFlyByR','Error\x20calculating\x20Normal\x20Bezier\x20point\x20for\x20enemy\x20','\x20attacking,\x20index\x20','full_grid','stopAllGameSounds','Error\x20in\x20aiControl:','left','Error\x20getting\x20target\x20grid\x20pos\x20for\x20new\x20enemy\x20','creationTime','264shzVwF','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20','velocityY','sin','Error\x20creating\x20player\x20bullet(s):','pathSpeedMultiplier','\x20attacking\x20without\x20path!\x20Returning.','20px\x20\x27Press\x20Start\x202P\x27','Invalid\x20start\x20segment\x20for\x20path\x20','!\x20Returning.','30px\x20Arial','\x20after\x20attack:','NaN\x20detected\x20in\x20CS\x20path\x20calculation\x20for\x20enemy\x20','min','filter','length','undefined','shipObj','diving_to_capture_position',')\x20during\x20shift:','START\x20GAME','splice','parse','preparing_attack','CS:\x20No\x20squadrons\x20generated.\x20Skipping\x20CS\x20sequence.','attackPathSegmentIndex','\x20(invalid\x20attack\x20segment):','in_grid','indexOf','getGamepads','capturedShipLastFiredTime','Failed\x20to\x20return\x20to\x20menu\x20after\x20critical\x20error:','entrancePathId','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','Error\x20in\x20findAndDetachEnemy:','\x20diving\x20to\x20capture\x20without\x20targetX/Y!\x20Aborting.','rotationDirection',').\x20Skipping.','returning',',\x20Idx\x20','Full\x20Grid:\x20Error\x20getting\x20target\x20grid\x20pos\x20for\x20enemy\x20','currentScore','capturing','772672imkLUw','Full\x20Grid:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','90EWPpIz','function','abs','Error\x20starting\x20attack\x20for\x20','Error\x20creating\x20CO-OP\x20AI\x20bullet\x20for\x20','CS:\x20Path\x20','slice','findIndex','attackPathSegments','isPreparingForImmediateCapture','has','attackPathT','Entrance\x20Wave:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','squadronEnemyIndex','coop','switch_player','NaN\x20detected\x20in\x20Normal\x20path\x20calculation\x20for\x20enemy\x20','boss_loop_right','grey','Entrance\x20Wave:\x20Squadron\x20','drawImage','state','right','1\x20PLAYER','type','following_bezier_path','CS_HorizontalFlyByL','CS:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','naturalWidth','duration','playerNum','1P_VS_AI_NORMAL','newButtonStates','\x20in\x20moving_to_grid','capturedShipY','CS3_DiveLoopL_Sharp','rotationCompleted','\x20has\x20invalid\x20enemy\x20data.','clearRect','main','show_results','CS_LoopAttack_TR','targetY','Error\x20in\x20renderGame:','targetX','Error\x20getting\x20grid\x20pos\x20after\x20FINAL\x20bezier\x20error\x20for\x20','back','45114TYQWKd','Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.','player2','\x20invalid!\x20Skipping\x20squadron.','attackType','hasFired','.\x20Switching\x20to\x20moving_to_grid.','health','random','captureAnimationRotation','keys','A\x20critical\x20error\x20occurred\x20in\x20the\x20game\x20loop.\x20Please\x20refresh.','stringify','returnLogDone','\x20is\x20empty\x20or\x20invalid.','preparing_capture','currentTime','pathSegmentIndex','white','total','sign','attackFormationOffsetX',',\x20index\x20','Entrance\x20Wave:\x20Path\x20','capturedShipDimensions','particles','pause','destroyed','CO-OP\x20GAME','.\x20Transitioning.','pathId','includes','restore','toString','Error\x20updating\x20target\x20grid\x20pos\x20for\x20enemy\x20','GAME\x20EXIT','save','209154cFISir','14582480TZnxay','red','\x20out\x20of\x20bounds\x20(','velocityX','HIGH\x20SCORE','isDamaged','thresholdsMet','push','complete','EASY','tintProgress','some','Error\x20during\x20FIXED\x20enemy\x20burst\x20firing\x20(bullet\x20','unknown','targetGridX','justReturned','\x20for\x20SHARED\x20path\x20','.\x20Skipping.','ai_p2','Enemy\x20','Invalid\x20start\x20segment\x20for\x20squadron\x20path\x20','green','CS:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','round','center','!!!\x20CRITICAL\x20ERROR\x20IN\x20runSingleGameUpdate\x20!!!','height','sort','\x20for\x20path\x20','[Capture\x20Message\x20End]\x20Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','single','[Destroyed\x20Boss\x20Score\x20-\x20Attack]\x20Boss\x20destroyed\x20on\x20first\x20hit?\x20Awarding\x20','size','\x20not\x20found.\x20Enemy\x20will\x20follow\x20squadron\x20path\x20\x22','40peyflN','Invalid\x20CS\x20Bezier\x20segment\x20','resetGame','landed','shoot','\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!\x20Resetting\x20state\x20anyway.','number','player1','dual','fillRect','captureStartTime','\x20at\x20[','1P_VS_AI_COOP','currentLives','),\x20index\x20','Error\x20calculating\x20FINAL\x20bezier\x20point\x20for\x20attack\x20','2598134CxrgJp','following_entrance_path','speed','stack','enemies','blue','boss_loop_left','NORMAL\x20GAME','\x22\x20for\x20enemy\x20in\x20squadron\x20','Full\x20Grid:\x20Squadron\x20','Error\x20checking/awarding\x20extra\x20life:','8000JJCqQp','find','lastFiredTime','floor','capturedShipX','hasCapturedShip','landedTime',',\x20def\x20length:\x20','alpha','enemy-grid-','Error\x20getting\x20grid\x20pos\x20after\x20bezier\x20error\x20for\x20','.\x20Enemy\x20','\x20returning\x20without\x20target\x20coords.\x20Recalculating.','targetGridY','entrance_flight_2','scheduledStartTime'];_0x3283=function(){return _0x30813c;};return _0x3283();}function resetWaveInternal(){const _0x2f0edd=_0x28f57a;isWaveTransitioning=![],readyForNextWave=![],readyForNextWaveReset=![],isEntrancePhaseActive=!![],firstEnemyLanded=![],captureAttemptMadeThisLevel=![],gameJustStartedAndWaveLaunched=![],aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![],enemies=[],bullets=[],enemyBullets=[],explosions=[],floatingScores=[],hitSparks=[];Array['isArray'](enemySpawnTimeouts)&&enemySpawnTimeouts[_0x2f0edd(0x1a7)](clearTimeout);enemySpawnTimeouts=[],squadronCompletionStatus={},squadronEntranceFiringStatus={},totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;const _0x47c04c=getWaveTypeInternal(level);isChallengingStage=_0x47c04c==='challenging_stage',isFullGridWave=_0x47c04c===_0x2f0edd(0xc8),challengingStageEnemiesHit=0x0,scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null;(isFullGridWave||isChallengingStage)&&(isEntrancePhaseActive=![]);const _0x143e0a=isShowingDemoText;resetAllMessagesInternal();_0x143e0a&&(isShowingDemoText=!![]);if(selectedGameMode==='coop'&&level===0x1)isShowingIntro=![],introStep=0x2;else{if(isTwoPlayerMode&&selectedGameMode===_0x2f0edd(0x1b6)||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2f0edd(0x11a)){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(isChallengingStage){introStep=0x3,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(level===0x1&&!isTwoPlayerMode){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{introStep=0x2,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}}}}isShowingIntro&&!(selectedGameMode===_0x2f0edd(0x109)&&level===0x1)&&(introDisplayStartTime=Date['now']());playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],currentWaveDefinition=generateWaveDefinitionInternal(level);if(selectedGameMode===_0x2f0edd(0x109)){if(gameCanvas&&gameCanvas[_0x2f0edd(0x1c2)]>0x0&&gameCanvas[_0x2f0edd(0x16a)]>0x0){const _0x323d0f=ship1&&player1Lives>0x0,_0x396478=ship2&&player2Lives>0x0,_0xaec582=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2f0edd(0x17e)){if(_0x323d0f&&_0x396478){const _0x3a1f67=gameCanvas[_0x2f0edd(0x1c2)]/0x2-gameCanvas[_0x2f0edd(0x1c2)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1&&(ship1[_0x2f0edd(0x127)]=_0x3a1f67,ship1['x']=_0x3a1f67,smoothedShip1X=_0x3a1f67,ship1['y']=_0xaec582);const _0x29b139=gameCanvas['width']/0x2+gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2['targetX']=_0x29b139,ship2['x']=_0x29b139,smoothedShip2X=_0x29b139,ship2['y']=_0xaec582);}else{if(_0x323d0f&&ship1){const _0x48e223=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x4500cd=Math['round'](gameCanvas['width']/0x2-_0x48e223/0x2);ship1[_0x2f0edd(0x127)]=_0x4500cd,ship1['x']=_0x4500cd,smoothedShip1X=_0x4500cd,ship1['y']=_0xaec582;}else{if(_0x396478&&ship2){const _0x436fc5=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x2b97d3=Math['round'](gameCanvas[_0x2f0edd(0x1c2)]/0x2-_0x436fc5/0x2);ship2[_0x2f0edd(0x127)]=_0x2b97d3,ship2['x']=_0x2b97d3,smoothedShip2X=_0x2b97d3,ship2['y']=_0xaec582;}}}}else{if(_0x323d0f&&ship1)ship1['y']=_0xaec582;if(_0x396478&&ship2)ship2['y']=_0xaec582;}}}else{if(ship&&gameCanvas&&gameCanvas[_0x2f0edd(0x1c2)]>0x0&&gameCanvas[_0x2f0edd(0x16a)]>0x0&&(forceCenterShipNextReset||!isManualControl||isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)){let _0xca41d8=ship[_0x2f0edd(0x1c2)];if(isDualShipActive)_0xca41d8=DUAL_SHIP_OFFSET_X+SHIP_WIDTH;ship['x']=Math[_0x2f0edd(0x167)](gameCanvas['width']/0x2-_0xca41d8/0x2),ship[_0x2f0edd(0x127)]=ship['x'],ship['y']=gameCanvas[_0x2f0edd(0x16a)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(isPlayerTwoAI&&selectedGameMode===_0x2f0edd(0x1b6)&&currentPlayer===0x2)smoothedShipX=ship['x'];}else ship&&gameCanvas&&gameCanvas[_0x2f0edd(0x16a)]>0x0&&(ship['y']=gameCanvas[_0x2f0edd(0x16a)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);}forceCenterShipNextReset=![];if(!isManualControl&&aiNeedsStabilization&&selectedGameMode!==_0x2f0edd(0x109)&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)){aiStabilizationEndTime=Date['now']()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}else{if(isPlayerTwoAI&&selectedGameMode===_0x2f0edd(0x1b6)&&currentPlayer===0x2&&aiNeedsStabilization){aiStabilizationEndTime=Date['now']()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}}}window['resetWave']=resetWaveInternal;function getWaveTypeInternal(_0x5a39f8){const _0x178b72=_0x28f57a,_0x191493=(_0x5a39f8-0x1)%0x4;switch(_0x191493){case 0x0:return _0x178b72(0xc8);case 0x1:return'entrance_flight_1';case 0x2:return _0x178b72(0x1cb);case 0x3:return'entrance_flight_2';default:return _0x178b72(0x15d);}}window[_0x28f57a(0x1da)]=getWaveTypeInternal;function generateWaveDefinitionInternal(_0x226a12){const _0x3742b7=_0x28f57a;let _0x14afc0=[];currentWavePatternIndex=-0x1;const _0x45669d=getWaveTypeInternal(_0x226a12);if(typeof waveEntrancePatterns==='undefined'||!Array[_0x3742b7(0x1ae)](waveEntrancePatterns)||waveEntrancePatterns['length']<0x2)return[];if(_0x45669d===_0x3742b7(0x1cb))_0x14afc0=[];else{if(_0x45669d===_0x3742b7(0xc8)){currentWavePatternIndex=0x0;const _0x19c1a3=waveEntrancePatterns[0x0];if(!_0x19c1a3||_0x19c1a3['length']===0x0)_0x14afc0=[];else try{_0x14afc0=JSON[_0x3742b7(0xe4)](JSON[_0x3742b7(0x136)](_0x19c1a3),(_0x2e6ab1,_0x4212c6)=>{const _0x12626e=_0x3742b7;return _0x4212c6&&typeof _0x4212c6===_0x12626e(0x1bc)&&_0x4212c6[_0x12626e(0x113)]===ENEMY3_TYPE&&typeof _0x4212c6[_0x12626e(0x192)]===_0x12626e(0xde)&&(_0x4212c6[_0x12626e(0x192)]=![]),_0x4212c6;});}catch(_0x4464d3){_0x14afc0=[];}}else{if(_0x45669d==='entrance_flight_1'){currentWavePatternIndex=0x0;const _0x294640=waveEntrancePatterns[0x0];if(!_0x294640||_0x294640[_0x3742b7(0xdd)]===0x0)_0x14afc0=[];else try{_0x14afc0=JSON[_0x3742b7(0xe4)](JSON[_0x3742b7(0x136)](_0x294640),(_0x25c9a2,_0x301e95)=>{const _0x1f16b3=_0x3742b7;return _0x301e95&&typeof _0x301e95===_0x1f16b3(0x1bc)&&_0x301e95[_0x1f16b3(0x113)]===ENEMY3_TYPE&&typeof _0x301e95['hasCapturedShip']==='undefined'&&(_0x301e95[_0x1f16b3(0x192)]=![]),_0x301e95;});}catch(_0x441e95){_0x14afc0=[];}}else{if(_0x45669d===_0x3742b7(0x19b)){currentWavePatternIndex=0x1;const _0x10b53c=waveEntrancePatterns[0x1];if(!_0x10b53c||_0x10b53c['length']===0x0)_0x14afc0=[];else try{_0x14afc0=JSON[_0x3742b7(0xe4)](JSON[_0x3742b7(0x136)](_0x10b53c),(_0x994d82,_0x417c5b)=>{const _0x30960b=_0x3742b7;return _0x417c5b&&typeof _0x417c5b===_0x30960b(0x1bc)&&_0x417c5b[_0x30960b(0x113)]===ENEMY3_TYPE&&typeof _0x417c5b['hasCapturedShip']==='undefined'&&(_0x417c5b[_0x30960b(0x192)]=![]),_0x417c5b;});}catch(_0x45f945){_0x14afc0=[];}}else _0x14afc0=[];}}}if(_0x45669d!==_0x3742b7(0x1cb)){if(typeof normalWaveEntrancePaths===_0x3742b7(0xde)||Object[_0x3742b7(0x134)](normalWaveEntrancePaths)['length']===0x0)return _0x14afc0;for(let _0x5c537a=_0x14afc0[_0x3742b7(0xdd)]-0x1;_0x5c537a>=0x0;_0x5c537a--){const _0x28acfe=_0x14afc0[_0x5c537a];if(!normalWaveEntrancePaths?.[_0x28acfe[_0x3742b7(0x148)]]){_0x14afc0['splice'](_0x5c537a,0x1);continue;}if(_0x28acfe[_0x3742b7(0x186)]&&Array['isArray'](_0x28acfe[_0x3742b7(0x186)])){for(let _0x363a48=_0x28acfe[_0x3742b7(0x186)][_0x3742b7(0xdd)]-0x1;_0x363a48>=0x0;_0x363a48--){const _0x5abdf0=_0x28acfe[_0x3742b7(0x186)][_0x363a48];(!_0x5abdf0||!normalWaveEntrancePaths?.[_0x5abdf0[_0x3742b7(0xee)]])&&_0x28acfe['enemies']['splice'](_0x363a48,0x1),_0x5abdf0&&_0x5abdf0[_0x3742b7(0x113)]===ENEMY3_TYPE&&typeof _0x5abdf0['hasCapturedShip']===_0x3742b7(0xde)&&(_0x5abdf0[_0x3742b7(0x192)]=![]);}_0x28acfe[_0x3742b7(0x186)][_0x3742b7(0xdd)]===0x0&&_0x14afc0[_0x3742b7(0xe3)](_0x5c537a,0x1);}else _0x14afc0[_0x3742b7(0xe3)](_0x5c537a,0x1);}}return _0x14afc0;}window[_0x28f57a(0x1c0)]=generateWaveDefinitionInternal;const createBulletSimple=(_0x93e7fe,_0x4910e6=null)=>{const _0x3cc264=_0x28f57a;let _0x8b0418=null,_0x31a52b=![];if(isTwoPlayerMode&&selectedGameMode===_0x3cc264(0x109)){const _0x3a51a8=ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured,_0x9c85a5=ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured;if(_0x3a51a8&&_0x9c85a5)_0x8b0418=Math[_0x3cc264(0x132)]()<0.5?ship1:ship2,_0x31a52b=!![];else{if(_0x3a51a8)_0x8b0418=ship1,_0x31a52b=!![];else _0x9c85a5&&(_0x8b0418=ship2,_0x31a52b=!![]);}}else ship&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn&&(_0x8b0418=ship,_0x31a52b=!![]);if(!_0x93e7fe||!isInGameState||!_0x31a52b||!_0x8b0418)return![];const _0x14ae04=scaleValue(level,BASE_ENEMY_BULLET_SPEED,MAX_ENEMY_BULLET_SPEED),_0x469032=_0x4910e6?_0x4910e6['x']:_0x93e7fe['x']+_0x93e7fe['width']/0x2,_0x294030=_0x4910e6?_0x4910e6['y']:_0x93e7fe['y']+_0x93e7fe['height']/0x2;let _0x298b7c=0x0,_0x30cc3a=_0x14ae04;const _0x330f1c=_0x8b0418['x']+_0x8b0418['width']/0x2-_0x469032,_0x1e1ad9=_0x8b0418['y']+_0x8b0418[_0x3cc264(0x16a)]/0x2-_0x294030,_0x5667c4=Math[_0x3cc264(0x1d1)](_0x330f1c*_0x330f1c+_0x1e1ad9*_0x1e1ad9);if(_0x5667c4>0x0){let _0x3b9383=0x0;!isChallengingStage&&(_0x3b9383=scaleValue(level,BASE_ENEMY_AIM_FACTOR,MAX_ENEMY_AIM_FACTOR));let _0x1e3067=Math['atan2'](_0x1e1ad9,_0x330f1c);_0x298b7c=Math[_0x3cc264(0x1aa)](_0x1e3067)*_0x14ae04*_0x3b9383,_0x30cc3a=Math[_0x3cc264(0x1d1)](_0x14ae04**0x2-_0x298b7c**0x2),_0x30cc3a=Math[_0x3cc264(0x1e0)](_0x14ae04*(0x1-_0x3b9383)*0.5,_0x30cc3a);if(_0x1e1ad9<0x0&&_0x30cc3a>0x0){}if(_0x1e1ad9<0x0)_0x30cc3a=Math[_0x3cc264(0xfd)](_0x30cc3a);return enemyBullets[_0x3cc264(0x157)]({'x':_0x469032-ENEMY_BULLET_WIDTH/0x2,'y':_0x294030,'width':ENEMY_BULLET_WIDTH,'height':ENEMY_BULLET_HEIGHT,'vx':_0x298b7c,'vy':_0x30cc3a,'type':_0x93e7fe['type']}),!![];}return![];};function scheduleSingleEntranceSquadron(_0x3ec797,_0x3e107b,_0x21a5a1){const _0x9103b5=_0x28f57a;if(isFullGridWave||isChallengingStage)return console['warn']('[scheduleSingleEntranceSquadron]\x20Called\x20inappropriately\x20for\x20non-entrance\x20wave\x20type\x20(Level\x20'+level+_0x9103b5(0x1ba)+isFullGridWave+_0x9103b5(0x1d0)+isChallengingStage+_0x9103b5(0xf3)),_0x3ec797?.[_0x9103b5(0x186)]?.[_0x9103b5(0xdd)]>0x0&&(enemiesSpawnedThisWave+=_0x3ec797[_0x9103b5(0x186)][_0x9103b5(0xdd)],squadronCompletionStatus[_0x3e107b]&&(squadronCompletionStatus[_0x3e107b][_0x9103b5(0x1d2)]=squadronCompletionStatus[_0x3e107b][_0x9103b5(0x13d)])),![];const _0xbe188=normalWaveEntrancePaths,_0x459a4d=_0x3ec797[_0x9103b5(0x148)],_0xa962df=_0xbe188[_0x459a4d];if(!_0xa962df||_0xa962df[_0x9103b5(0xdd)]===0x0)return console[_0x9103b5(0x1c5)](_0x9103b5(0x141)+_0x459a4d+'\x20for\x20squadron\x20'+_0x3e107b+_0x9103b5(0x12d)),_0x3ec797?.[_0x9103b5(0x186)]?.[_0x9103b5(0xdd)]>0x0&&(enemiesSpawnedThisWave+=_0x3ec797['enemies']['length'],squadronCompletionStatus[_0x3e107b]&&(squadronCompletionStatus[_0x3e107b][_0x9103b5(0x1d2)]=squadronCompletionStatus[_0x3e107b][_0x9103b5(0x13d)])),![];const _0x47cbcb=setTimeout(()=>{const _0x2b92fd=_0x9103b5,_0x1428d0=enemySpawnTimeouts[_0x2b92fd(0xea)](_0x47cbcb);if(_0x1428d0>-0x1)enemySpawnTimeouts[_0x2b92fd(0xe3)](_0x1428d0,0x1);let _0x3f2d5f=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x3f2d5f=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x3f2d5f=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0x3f2d5f||isFullGridWave){_0x3ec797?.['enemies']?.[_0x2b92fd(0xdd)]>0x0&&(enemiesSpawnedThisWave+=_0x3ec797[_0x2b92fd(0x186)][_0x2b92fd(0xdd)],squadronCompletionStatus[_0x3e107b]&&(squadronCompletionStatus[_0x3e107b][_0x2b92fd(0x1d2)]=squadronCompletionStatus[_0x3e107b]['total']));return;}try{squadronEntranceFiringStatus[_0x3e107b]?(squadronEntranceFiringStatus[_0x3e107b][_0x2b92fd(0x19c)]=Date['now']()+_0x21a5a1,squadronEntranceFiringStatus[_0x3e107b][_0x2b92fd(0x12f)]=![]):(console[_0x2b92fd(0xc1)](_0x2b92fd(0x1d4)+_0x3e107b+'\x20not\x20found.'),squadronEntranceFiringStatus[_0x3e107b]={'hasFired':![],'scheduledStartTime':Date[_0x2b92fd(0x19f)]()+_0x21a5a1});const _0x3a5df0=ENEMY_SPAWN_DELAY_IN_SQUADRON,_0x2b0a15=_0x3a5df0*0x2,_0x3d5513=0x1;_0x3ec797[_0x2b92fd(0x186)][_0x2b92fd(0x1a7)]((_0x223f31,_0x194444)=>{const _0x50a128=_0x2b92fd;if(!_0x223f31||!_0x223f31[_0x50a128(0x113)]||typeof _0x223f31[_0x50a128(0x1d6)]==='undefined'||typeof _0x223f31[_0x50a128(0x1dd)]===_0x50a128(0xde)||!_0x223f31['entrancePathId']){console[_0x50a128(0x1c5)](_0x50a128(0x107)+_0x3e107b+_0x50a128(0x1b7)+_0x459a4d+_0x50a128(0x180)+_0x194444+_0x50a128(0x161)),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x3e107b]&&squadronCompletionStatus[_0x3e107b][_0x50a128(0x1d2)]++;return;}const _0x32a56e=_0xbe188[_0x223f31[_0x50a128(0xee)]];(!_0x32a56e||_0x32a56e[_0x50a128(0xdd)]===0x0)&&console[_0x50a128(0xc1)](_0x50a128(0x1ad)+_0x223f31['entrancePathId']+_0x50a128(0x18a)+_0x3e107b+',\x20index\x20'+_0x194444+_0x50a128(0x171)+_0x459a4d+'\x22.');let _0x5e3c83=0x0;const _0x5b3d81=getWaveType(level),_0x57c0d0=_0x5b3d81===_0x50a128(0x19b)&&(_0x3e107b===0x2||_0x3e107b===0x3);if(_0x57c0d0){const _0xfb6093=Math[_0x50a128(0x190)](_0x194444/0x2);_0x194444%0x2===0x0?_0x5e3c83=_0xfb6093*_0x2b0a15:_0x5e3c83=_0xfb6093*_0x2b0a15+_0x3d5513;}else _0x5e3c83=_0x194444*ENEMY_SPAWN_DELAY_IN_SQUADRON;const _0x410d0c=setTimeout(()=>{const _0x509f91=_0x50a128,_0x36626c=enemySpawnTimeouts[_0x509f91(0xea)](_0x410d0c);if(_0x36626c>-0x1)enemySpawnTimeouts[_0x509f91(0xe3)](_0x36626c,0x1);let _0x6c84fe=![];isTwoPlayerMode&&selectedGameMode===_0x509f91(0x109)?_0x6c84fe=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x6c84fe=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0x6c84fe||isFullGridWave){enemiesSpawnedThisWave++;squadronCompletionStatus[_0x3e107b]&&squadronCompletionStatus[_0x3e107b][_0x509f91(0x1d2)]++;return;}try{let _0x2bf1d8=_0x223f31[_0x509f91(0x113)],_0x1669fc=_0x2bf1d8===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0xc50a2f,_0x32272a;if(_0x2bf1d8===ENEMY1_TYPE)_0xc50a2f=ENEMY1_WIDTH,_0x32272a=ENEMY1_HEIGHT;else _0x2bf1d8===ENEMY3_TYPE?(_0xc50a2f=BOSS_WIDTH,_0x32272a=BOSS_HEIGHT):(_0xc50a2f=ENEMY_WIDTH,_0x32272a=ENEMY_HEIGHT);let _0x92b7e1=0x0,_0xff9072=0x0;if(_0xa962df&&_0xa962df[0x0]?.['p0'])_0x92b7e1=_0xa962df[0x0]['p0']['x'],_0xff9072=_0xa962df[0x0]['p0']['y'];else throw new Error(_0x509f91(0x164)+_0x459a4d);let _0x128115,_0x410c23;try{const {x:_0x41446b,y:_0x83b3b4}=getCurrentGridSlotPosition(_0x223f31['gridRow'],_0x223f31['gridCol'],_0xc50a2f);_0x128115=_0x41446b,_0x410c23=_0x83b3b4;}catch(_0x27e15e){console[_0x509f91(0x1c5)](_0x509f91(0xcc)+_0x223f31[_0x509f91(0x113)]+'\x20at\x20['+_0x223f31['gridRow']+','+_0x223f31[_0x509f91(0x1dd)]+']',_0x27e15e),_0x128115=gameCanvas?.[_0x509f91(0x1c2)]/0x2||0xc8,_0x410c23=ENEMY_TOP_MARGIN+_0x223f31[_0x509f91(0x1d6)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}let _0x481bf7=0x0;const _0x4f05f1=_0x57c0d0,_0xf6c7c6=_0x4f05f1&&_0x194444%0x2!==0x0;_0xf6c7c6?_0x481bf7=-ENTRANCE_PAIR_PATH_T_OFFSET:_0x481bf7=-_0x194444*PATH_T_OFFSET_PER_ENEMY;const _0x2ace72={'x':_0x92b7e1,'y':_0xff9072,'width':_0xc50a2f,'height':_0x32272a,'targetGridX':_0x128115,'targetGridY':_0x410c23,'speed':0x0,'state':_0x509f91(0x183),'gridRow':_0x223f31[_0x509f91(0x1d6)],'gridCol':_0x223f31['gridCol'],'type':_0x2bf1d8,'health':_0x1669fc,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x459a4d,'pathSegmentIndex':0x0,'pathT':_0x481bf7,'squadronId':_0x3e107b,'squadronEnemyIndex':_0x194444,'id':_0x509f91(0x1b0)+_0x3e107b+'-'+_0x194444+'-'+Date[_0x509f91(0x19f)]()+'-'+Math[_0x509f91(0x132)]()['toString'](0x24)['substring'](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x509f91(0x1b6),'hasCapturedShip':_0x2bf1d8===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x2bf1d8===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies[_0x509f91(0x157)](_0x2ace72),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x3e107b]&&squadronCompletionStatus[_0x3e107b][_0x509f91(0x1d2)]++;if(_0x194444===0x0){let _0x479c23=0x5dc;(_0x3e107b===0x0||_0x3e107b===0x1)&&(_0x479c23=0xfa);const _0x2e51e4=_0x2ace72['id'],_0x4f7d80=setTimeout(()=>{const _0x22fe95=_0x509f91,_0x289e2d=enemySpawnTimeouts[_0x22fe95(0xea)](_0x4f7d80);if(_0x289e2d>-0x1)enemySpawnTimeouts['splice'](_0x289e2d,0x1);let _0xf0e413=![];isTwoPlayerMode&&selectedGameMode===_0x22fe95(0x109)?_0xf0e413=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0xf0e413=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0xf0e413||isChallengingStage||isWaveTransitioning||isFullGridWave)return;fireFixedEnemyBurst(_0x2e51e4,null,0x0,0x3);},_0x479c23);enemySpawnTimeouts['push'](_0x4f7d80);}}catch(_0x9f9eed){console[_0x509f91(0x1c5)](_0x509f91(0x1b4)+_0x3e107b+_0x509f91(0xf5)+_0x194444+_0x509f91(0x1db)+_0x459a4d+'):',_0x9f9eed),enemiesSpawnedThisWave++,squadronCompletionStatus[_0x3e107b]&&squadronCompletionStatus[_0x3e107b][_0x509f91(0x1d2)]++;}},_0x5e3c83);enemySpawnTimeouts[_0x50a128(0x157)](_0x410d0c);});}catch(_0x357ee7){console[_0x2b92fd(0x1c5)]('Entrance\x20Wave:\x20Error\x20processing\x20enemies\x20for\x20squadron\x20'+_0x3e107b+_0x2b92fd(0x1b7)+_0x459a4d+'):',_0x357ee7),_0x3ec797?.[_0x2b92fd(0x186)]?.[_0x2b92fd(0xdd)]>0x0&&(enemiesSpawnedThisWave+=_0x3ec797['enemies']['length'],squadronCompletionStatus[_0x3e107b]&&(squadronCompletionStatus[_0x3e107b][_0x2b92fd(0x1d2)]=squadronCompletionStatus[_0x3e107b]['total']));}},_0x21a5a1);return enemySpawnTimeouts[_0x9103b5(0x157)](_0x47cbcb),!![];};function scheduleEntranceFlightWave(){const _0x36afae=_0x28f57a;if(isFullGridWave||isChallengingStage||!currentWaveDefinition||currentWaveDefinition[_0x36afae(0xdd)]===0x0){console[_0x36afae(0xc1)](_0x36afae(0x1b5)+level+_0x36afae(0x1ba)+isFullGridWave+',\x20isCS:\x20'+isChallengingStage+_0x36afae(0x194)+currentWaveDefinition?.['length']),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}enemySpawnTimeouts[_0x36afae(0x1a7)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0xb13961=0x0,_0x5bf806=0x0;currentWaveDefinition['forEach']((_0x20bc69,_0x404bc7)=>{const _0x1cf5b4=_0x36afae;_0x20bc69&&_0x20bc69[_0x1cf5b4(0x186)]&&Array[_0x1cf5b4(0x1ae)](_0x20bc69[_0x1cf5b4(0x186)])&&_0x20bc69[_0x1cf5b4(0x186)][_0x1cf5b4(0xdd)]>0x0?(totalEnemiesScheduledForWave+=_0x20bc69[_0x1cf5b4(0x186)]['length'],squadronCompletionStatus[_0x404bc7]={'completed':0x0,'total':_0x20bc69[_0x1cf5b4(0x186)][_0x1cf5b4(0xdd)],'hasFiredPostLanding':![]},squadronEntranceFiringStatus[_0x404bc7]={'hasFired':![],'scheduledStartTime':0x0},scheduleSingleEntranceSquadron(_0x20bc69,_0x404bc7,_0xb13961)&&_0x5bf806++,_0xb13961+=NORMAL_WAVE_SQUADRON_INTERVAL):console['warn'](_0x1cf5b4(0x10e)+_0x404bc7+_0x1cf5b4(0x138));}),_0x5bf806===0x0&&totalEnemiesScheduledForWave===0x0?(console[_0x36afae(0xc1)](_0x36afae(0x1bb)+level+_0x36afae(0x147)),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![]):isEntrancePhaseActive=!![];}function startChallengingStageSequence(){const _0x32fa0e=_0x28f57a;currentWaveDefinition=[],isEntrancePhaseActive=![],enemySpawnTimeouts[_0x32fa0e(0x1a7)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronEntranceFiringStatus={};Object['keys'](challengingStagePaths)[_0x32fa0e(0xdd)]===0x0&&defineChallengingStagePaths();if(Object[_0x32fa0e(0x134)](challengingStagePaths)['length']===0x0){console['error'](_0x32fa0e(0x1ac)),isWaveTransitioning=!![],setTimeout(()=>{const _0x338bd9=_0x32fa0e;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x338bd9(0x109)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave==='function'&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}const _0x148092=[_0x32fa0e(0x11e),_0x32fa0e(0x1be),_0x32fa0e(0x115),_0x32fa0e(0xc5)],_0x5b11c1=['CS_LoopAttack_TL',_0x32fa0e(0x124),_0x32fa0e(0x1ab),'CS_LoopAttack_BR'],_0x18c4a5=[..._0x148092,..._0x5b11c1];for(const _0x39b6fe of _0x18c4a5){if(!challengingStagePaths[_0x32fa0e(0x1a4)](_0x39b6fe)){console['error']('CRITICAL:\x20Required\x20CS\x20path\x20\x22'+_0x39b6fe+'\x22\x20not\x20found!\x20Aborting\x20CS.'),isWaveTransitioning=!![],setTimeout(()=>{const _0x1f3d68=_0x32fa0e;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x1f3d68(0x109)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x1f3d68(0xfc)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}}let _0x4563a4=[..._0x148092],_0x15e243=[..._0x5b11c1][_0x32fa0e(0x16b)](()=>Math[_0x32fa0e(0x132)]()-0.5);_0x4563a4['push'](..._0x15e243),currentWaveDefinition=[];for(let _0x3efe4=0x0;_0x3efe4<CHALLENGING_STAGE_SQUADRON_COUNT;_0x3efe4++){const _0x35b983=_0x4563a4[_0x3efe4],_0x4d3d4a={'pathId':_0x35b983,'enemies':[]};for(let _0x54936b=0x0;_0x54936b<CHALLENGING_STAGE_SQUADRON_SIZE;_0x54936b++){let _0x43286c=_0x54936b<Math['floor'](CHALLENGING_STAGE_SQUADRON_SIZE/0x2)?ENEMY1_TYPE:ENEMY2_TYPE;_0x4d3d4a['enemies'][_0x32fa0e(0x157)]({'type':_0x43286c,'entrancePathId':_0x35b983});}currentWaveDefinition[_0x32fa0e(0x157)](_0x4d3d4a);}challengingStageTotalEnemies=CHALLENGING_STAGE_ENEMY_COUNT,totalEnemiesScheduledForWave=challengingStageTotalEnemies,enemiesSpawnedThisWave=0x0;if(currentWaveDefinition[_0x32fa0e(0xdd)]>0x0){isEntrancePhaseActive=!![],enemySpawnTimeouts=[];let _0x1c5e4b=0x0;const _0x2805ed=-0x1c,_0x4abce2=Math[_0x32fa0e(0x190)](Math[_0x32fa0e(0x1e0)](0x0,level-0x3)/0x4)+0x1,_0x5556d2=scaleValue(_0x4abce2,BASE_CS_SPEED_MULTIPLIER,MAX_CS_SPEED_MULTIPLIER);currentWaveDefinition[_0x32fa0e(0x1a7)]((_0x1e0458,_0x50c2bf)=>{const _0x4134b7=_0x32fa0e;let _0x3b2b1d=0x0;if(_0x50c2bf<=0x1)_0x3b2b1d=0x0;else _0x50c2bf<=0x3?_0x3b2b1d=CHALLENGING_STAGE_SQUADRON_INTERVAL:_0x3b2b1d=(_0x50c2bf-0x2)*CHALLENGING_STAGE_SQUADRON_INTERVAL;let _0x4f18ec=_0x5556d2;(_0x50c2bf===0x2||_0x50c2bf===0x3)&&(_0x4f18ec*=CS_HORIZONTAL_FLYBY_SPEED_FACTOR);const _0xf63725=setTimeout(()=>{const _0x3b6a26=_0x26c6,_0x96c551=enemySpawnTimeouts[_0x3b6a26(0xea)](_0xf63725);if(_0x96c551>-0x1)enemySpawnTimeouts['splice'](_0x96c551,0x1);let _0x7946dd=![];isTwoPlayerMode&&selectedGameMode===_0x3b6a26(0x109)?_0x7946dd=player1Lives>0x0||player2Lives>0x0:_0x7946dd=playerLives>0x0;if(!isPaused&&isInGameState&&isEntrancePhaseActive&&isChallengingStage&&!isWaveTransitioning&&_0x7946dd)try{const _0x3458fc=_0x1e0458[_0x3b6a26(0x148)],_0x119d96=challengingStagePaths,_0x418a30=_0x119d96[_0x3458fc];if(!_0x418a30||_0x418a30[_0x3b6a26(0xdd)]===0x0){console[_0x3b6a26(0x1c5)](_0x3b6a26(0x100)+_0x3458fc+_0x3b6a26(0x1d7)+_0x50c2bf+_0x3b6a26(0xb9)),enemiesSpawnedThisWave+=_0x1e0458[_0x3b6a26(0x186)][_0x3b6a26(0xdd)];return;}let _0x1b9ab4=CS_ENEMY_SPAWN_DELAY_IN_SQUADRON;if(_0x50c2bf>=0x2&&_0x50c2bf<=0x3)_0x1b9ab4=CS_HORIZONTAL_FLYBY_SPAWN_DELAY;else _0x50c2bf>=0x4&&(_0x1b9ab4=CS_LOOP_ATTACK_SPAWN_DELAY);_0x1e0458[_0x3b6a26(0x186)]['forEach']((_0x57736c,_0x3fd7a3)=>{const _0x366cac=_0x3b6a26;if(!_0x57736c||!_0x57736c[_0x366cac(0x113)]){console[_0x366cac(0x1c5)](_0x366cac(0x166)+_0x50c2bf+',\x20index\x20'+_0x3fd7a3+_0x366cac(0x161)),enemiesSpawnedThisWave++;return;}const _0x263b78=_0x3fd7a3*_0x1b9ab4,_0x53ef53=setTimeout(()=>{const _0x278b53=_0x366cac,_0x924404=enemySpawnTimeouts[_0x278b53(0xea)](_0x53ef53);if(_0x924404>-0x1)enemySpawnTimeouts[_0x278b53(0xe3)](_0x924404,0x1);let _0x376b69=![];isTwoPlayerMode&&selectedGameMode===_0x278b53(0x109)?_0x376b69=player1Lives>0x0||player2Lives>0x0:_0x376b69=playerLives>0x0;if(isPaused||!isInGameState||!isEntrancePhaseActive||!isChallengingStage||isWaveTransitioning||!_0x376b69){enemiesSpawnedThisWave++;return;}try{let _0x1cfd1e=_0x57736c[_0x278b53(0x113)],_0x4fbd99=_0x1cfd1e===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0xc6c04a,_0xc35066;if(_0x1cfd1e===ENEMY1_TYPE)_0xc6c04a=ENEMY1_WIDTH,_0xc35066=ENEMY1_HEIGHT;else _0x1cfd1e===ENEMY3_TYPE?(_0xc6c04a=BOSS_WIDTH,_0xc35066=BOSS_HEIGHT):(_0xc6c04a=ENEMY_WIDTH,_0xc35066=ENEMY_HEIGHT);let _0x5d1a5e=0x0,_0x4d44e3=0x0;if(_0x418a30[0x0]?.['p0'])_0x5d1a5e=_0x418a30[0x0]['p0']['x'],_0x4d44e3=_0x418a30[0x0]['p0']['y'];else throw new Error(_0x278b53(0xd6)+_0x3458fc);(_0x50c2bf===0x0||_0x50c2bf===0x1)&&(_0x5d1a5e+=_0x2805ed);const _0x2ac4ee=-_0x3fd7a3*PATH_T_OFFSET_PER_ENEMY,_0x2ad6aa={'x':_0x5d1a5e,'y':_0x4d44e3,'width':_0xc6c04a,'height':_0xc35066,'targetGridX':0x0,'targetGridY':0x0,'speed':0x0,'state':_0x278b53(0x114),'gridRow':-0x1,'gridCol':-0x1,'type':_0x1cfd1e,'health':_0x4fbd99,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x3458fc,'pathSegmentIndex':0x0,'pathT':_0x2ac4ee,'squadronId':_0x50c2bf,'id':'enemy-cs-'+_0x50c2bf+'-'+_0x3fd7a3+'-'+Date[_0x278b53(0x19f)]()+'-'+Math[_0x278b53(0x132)]()[_0x278b53(0x14b)](0x24)[_0x278b53(0x1c7)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x278b53(0x1b6),'hasCapturedShip':_0x1cfd1e===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x1cfd1e===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':_0x4f18ec};enemies['push'](_0x2ad6aa),enemiesSpawnedThisWave++;}catch(_0x5bcfb3){console[_0x278b53(0x1c5)](_0x278b53(0x116)+_0x50c2bf+_0x278b53(0xf5)+_0x3fd7a3+_0x278b53(0x1db)+_0x3458fc+'):',_0x5bcfb3),enemiesSpawnedThisWave++;}},_0x263b78);enemySpawnTimeouts[_0x366cac(0x157)](_0x53ef53),_0x1c5e4b++;});}catch(_0x2ebc01){console[_0x3b6a26(0x1c5)]('CS:\x20Error\x20setting\x20up\x20spawns\x20for\x20squadron\x20'+_0x50c2bf+':',_0x2ebc01),enemiesSpawnedThisWave+=_0x1e0458[_0x3b6a26(0x186)]['length'];}else _0x1e0458?.[_0x3b6a26(0x186)]?.[_0x3b6a26(0xdd)]>0x0&&(enemiesSpawnedThisWave+=_0x1e0458[_0x3b6a26(0x186)][_0x3b6a26(0xdd)]);},_0x3b2b1d);enemySpawnTimeouts[_0x4134b7(0x157)](_0xf63725);});}else console['warn'](_0x32fa0e(0xe6)),isWaveTransitioning=!![],setTimeout(()=>{const _0x1a40a3=_0x32fa0e;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x1a40a3(0x109)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x1a40a3(0xfc)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);}function fireEnemyBurst(_0x8d8b67,_0x562941,_0x8bff4){const _0x2d9fa6=_0x28f57a;let _0x42a46a=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x42a46a=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x42a46a=playerLives>0x0&&!isShipCaptured;if(!_0x8d8b67||isPaused||!isInGameState||!_0x42a46a||isChallengingStage||isWaveTransitioning)return;const _0x105d2e=Math[_0x2d9fa6(0x167)](scaleValue(level,BASE_ENEMY_BULLET_BURST_COUNT,MAX_ENEMY_BULLET_BURST_COUNT));for(let _0x4a01fa=0x0;_0x4a01fa<_0x105d2e;_0x4a01fa++){const _0x2cf351=_0x8bff4+_0x4a01fa*ENTRANCE_FIRE_BURST_DELAY_MS,_0x44f2c1=setTimeout(()=>{const _0x26b696=_0x2d9fa6;try{const _0x3d78c9=enemySpawnTimeouts['indexOf'](_0x44f2c1);_0x3d78c9>-0x1&&enemySpawnTimeouts[_0x26b696(0xe3)](_0x3d78c9,0x1);let _0x2bc85c=![];isTwoPlayerMode&&selectedGameMode===_0x26b696(0x109)?_0x2bc85c=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x2bc85c=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x2bc85c||isChallengingStage||isWaveTransitioning)return;const _0x26b808=enemies[_0x26b696(0x18e)](_0x3590ed=>_0x3590ed&&_0x3590ed['id']===_0x8d8b67);_0x26b808&&_0x26b808[_0x26b696(0x110)]===_0x562941&&(createBulletSimple(_0x26b808)&&(_0x4a01fa===0x0&&playSound(enemyShootSound),_0x26b808[_0x26b696(0x18f)]=Date[_0x26b696(0x19f)]()));}catch(_0xf7e70){console['error']('Error\x20during\x20enemy\x20burst\x20firing\x20(bullet\x20'+(_0x4a01fa+0x1)+'/'+_0x105d2e+')\x20for\x20'+_0x8d8b67+':',_0xf7e70);}},_0x2cf351);enemySpawnTimeouts[_0x2d9fa6(0x157)](_0x44f2c1);}}function fireFixedEnemyBurst(_0x5b79f7,_0x327eb1,_0x5533c1,_0x2c685c){const _0x3a7fc4=_0x28f57a;let _0x1acfb8=![];isTwoPlayerMode&&selectedGameMode===_0x3a7fc4(0x109)?_0x1acfb8=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x1acfb8=playerLives>0x0&&!isShipCaptured;if(!_0x5b79f7||isPaused||!isInGameState||!_0x1acfb8||isChallengingStage||isWaveTransitioning||_0x2c685c<=0x0)return;for(let _0x9709f=0x0;_0x9709f<_0x2c685c;_0x9709f++){const _0x1ec47=_0x5533c1+_0x9709f*ENTRANCE_FIRE_BURST_DELAY_MS,_0x237e60=setTimeout(()=>{const _0xd2eccb=_0x3a7fc4;try{const _0x7b5643=enemySpawnTimeouts[_0xd2eccb(0xea)](_0x237e60);_0x7b5643>-0x1&&enemySpawnTimeouts[_0xd2eccb(0xe3)](_0x7b5643,0x1);let _0x5d09a9=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x5d09a9=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x5d09a9=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x5d09a9||isChallengingStage||isWaveTransitioning)return;const _0xb7e3f=enemies['find'](_0x3879c8=>_0x3879c8&&_0x3879c8['id']===_0x5b79f7);if(_0xb7e3f)createBulletSimple(_0xb7e3f)&&(_0x9709f===0x0&&playSound(enemyShootSound),_0xb7e3f[_0xd2eccb(0x18f)]=Date[_0xd2eccb(0x19f)]());else{}}catch(_0x55d1eb){console['error'](_0xd2eccb(0x15c)+(_0x9709f+0x1)+'/'+_0x2c685c+')\x20for\x20'+_0x5b79f7+':',_0x55d1eb);}},_0x1ec47);enemySpawnTimeouts['push'](_0x237e60);}}function startFullGridWave(){const _0x5af042=_0x28f57a;if(!currentWaveDefinition||currentWaveDefinition['length']===0x0||!isFullGridWave){console[_0x5af042(0x1c5)]('Attempted\x20to\x20start\x20Full\x20Grid\x20wave\x20without\x20valid\x20definition\x20or\x20when\x20not\x20in\x20Full\x20Grid\x20mode.'),isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}playSound(entranceSound),enemySpawnTimeouts[_0x5af042(0x1a7)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x1c5002=0x0;currentWaveDefinition[_0x5af042(0x1a7)]((_0x249b7e,_0x227c7c)=>{const _0xb06cd0=_0x5af042;let _0x44f06d=0x0;_0x249b7e&&_0x249b7e[_0xb06cd0(0x186)]&&Array[_0xb06cd0(0x1ae)](_0x249b7e['enemies'])?(_0x44f06d=_0x249b7e[_0xb06cd0(0x186)]['length'],_0x249b7e[_0xb06cd0(0x186)][_0xb06cd0(0x1a7)]((_0x435740,_0x21c687)=>{const _0x3acde0=_0xb06cd0;try{if(!_0x435740||!_0x435740['type']||typeof _0x435740['gridRow']===_0x3acde0(0xde)||typeof _0x435740[_0x3acde0(0x1dd)]===_0x3acde0(0xde)){console['error'](_0x3acde0(0xfa)+_0x227c7c+_0x3acde0(0x140)+_0x21c687+_0x3acde0(0x161));return;}let _0x21ab24=_0x435740[_0x3acde0(0x113)],_0x3b5351=_0x21ab24===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x2b5c60,_0x380d05;if(_0x21ab24===ENEMY1_TYPE)_0x2b5c60=ENEMY1_WIDTH,_0x380d05=ENEMY1_HEIGHT;else _0x21ab24===ENEMY3_TYPE?(_0x2b5c60=BOSS_WIDTH,_0x380d05=BOSS_HEIGHT):(_0x2b5c60=ENEMY_WIDTH,_0x380d05=ENEMY_HEIGHT);let _0x4f056d,_0x391e8a;try{const {x:_0x325657,y:_0x5bcd9f}=getCurrentGridSlotPosition(_0x435740[_0x3acde0(0x1d6)],_0x435740['gridCol'],_0x2b5c60);_0x4f056d=_0x325657,_0x391e8a=_0x5bcd9f;}catch(_0x45988f){console[_0x3acde0(0x1c5)](_0x3acde0(0xf6)+_0x435740[_0x3acde0(0x113)]+_0x3acde0(0x17d)+_0x435740[_0x3acde0(0x1d6)]+','+_0x435740[_0x3acde0(0x1dd)]+']',_0x45988f),_0x4f056d=gameCanvas?.[_0x3acde0(0x1c2)]/0x2||0xc8,_0x391e8a=ENEMY_TOP_MARGIN+_0x435740[_0x3acde0(0x1d6)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x5ea2b1={'x':_0x4f056d,'y':_0x391e8a,'width':_0x2b5c60,'height':_0x380d05,'targetGridX':_0x4f056d,'targetGridY':_0x391e8a,'speed':0x0,'state':_0x3acde0(0xe9),'gridRow':_0x435740[_0x3acde0(0x1d6)],'gridCol':_0x435740['gridCol'],'type':_0x21ab24,'health':_0x3b5351,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':null,'pathSegmentIndex':0x0,'pathT':0x0,'squadronId':_0x227c7c,'squadronEnemyIndex':_0x21c687,'id':_0x3acde0(0x196)+_0x227c7c+'-'+_0x21c687+'-'+Date[_0x3acde0(0x19f)]()+'-'+Math[_0x3acde0(0x132)]()[_0x3acde0(0x14b)](0x24)['substring'](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x3acde0(0x1b6),'hasCapturedShip':_0x21ab24===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x21ab24===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies['push'](_0x5ea2b1),_0x1c5002++;}catch(_0x27b04b){console[_0x3acde0(0x1c5)]('Full\x20Grid:\x20Error\x20placing\x20enemy\x20(Sq\x20'+_0x227c7c+',\x20Idx\x20'+_0x21c687+'):',_0x27b04b);}})):console[_0xb06cd0(0xc1)](_0xb06cd0(0x18b)+_0x227c7c+_0xb06cd0(0x120)),squadronCompletionStatus[_0x227c7c]={'completed':_0x44f06d,'total':_0x44f06d};}),totalEnemiesScheduledForWave=_0x1c5002,enemiesSpawnedThisWave=_0x1c5002,isEntrancePhaseActive=![],gridJustCompleted=!![],!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound)),GRID_BREATH_ENABLED&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=Date[_0x5af042(0x19f)](),currentGridBreathFactor=0x0),lastGridFireCheckTime=Date['now'](),firstEnemyLanded=!![];}function renderGame(){const _0x29957a=_0x28f57a;try{if(!gameCtx||!gameCanvas){if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null;return;}gameCtx[_0x29957a(0x121)](0x0,0x0,gameCanvas[_0x29957a(0x1c2)],gameCanvas[_0x29957a(0x16a)]);const _0x24b4b1=Date[_0x29957a(0x19f)]();gameCtx['save']();const _0x2fcc86=_0x29957a(0xd5),_0x5e504c=_0x29957a(0x151),_0xe11036=_0x29957a(0x13c);let _0x3d45e1,_0x3e5eaf,_0x344c4a,_0x46cdb6,_0x52f99a=![],_0x43fd8e=![],_0x32688a=![];if(isShowingResultsScreen){}else{if(gameOverSequenceStartTime>0x0&&!isShowingPlayerGameOverMessage){}else{if(isShowingPlayerGameOverMessage){}else{if(!isInGameState){}else{_0x344c4a=highScore||0x0;if(!isManualControl){}else{if(isTwoPlayerMode&&selectedGameMode===_0x29957a(0x109)){_0x3d45e1=player1Score,_0x3e5eaf=player2Score,_0x344c4a=Math[_0x29957a(0x1e0)](highScore,player1Score,player2Score),_0x46cdb6='1UP',_0x52f99a=!isShowingIntro&&!isPaused&&player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn,_0x43fd8e=!isShowingIntro&&!isPaused&&player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn;if(player1Score>=_0x344c4a&&player1Score>0x0)_0x32688a=_0x52f99a;if(player2Score>=_0x344c4a&&player2Score>0x0&&player2Score>player1Score)_0x32688a=_0x43fd8e;}else isTwoPlayerMode&&selectedGameMode===_0x29957a(0x1b6)?(_0x3d45e1=currentPlayer===0x1?score:player1Score,_0x3e5eaf=currentPlayer===0x2?score:player2Score,_0x344c4a=Math[_0x29957a(0x1e0)](highScore,player1Score,player2Score,score),_0x46cdb6=_0x29957a(0x1de),_0x52f99a=!isShowingIntro&&!isPaused&&currentPlayer===0x1&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x43fd8e=!isShowingIntro&&!isPaused&&currentPlayer===0x2&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x32688a=!isPaused&&!isShowingIntro&&score>0x0&&_0x344c4a>0x0&&score>=_0x344c4a):(_0x3d45e1=score,_0x3e5eaf=0x0,_0x46cdb6=_0x29957a(0x1de));}}}}}let _0x2ab729=![];if(_0x32688a){}typeof MARGIN_SIDE!==_0x29957a(0xde)&&typeof MARGIN_TOP!==_0x29957a(0xde)&&typeof SCORE_OFFSET_Y!=='undefined'&&(drawTopUiElement(_0x46cdb6,_0x3d45e1,_0x29957a(0xcb),MARGIN_SIDE,_0x52f99a),drawTopUiElement(_0x29957a(0x154),_0x344c4a,'center',gameCanvas[_0x29957a(0x1c2)]/0x2,_0x2ab729),drawTopUiElement(_0x29957a(0xbd),_0x3e5eaf,'right',gameCanvas[_0x29957a(0x1c2)]-MARGIN_SIDE,_0x43fd8e));if(typeof shipImage!==_0x29957a(0xde)&&typeof LIFE_ICON_MARGIN_BOTTOM!==_0x29957a(0xde)&&typeof LIFE_ICON_SIZE!==_0x29957a(0xde)&&typeof LIFE_ICON_MARGIN_LEFT!==_0x29957a(0xde)&&typeof LIFE_ICON_SPACING!==_0x29957a(0xde)){if(shipImage['complete']&&shipImage[_0x29957a(0xc3)]!==0x0){const _0xfd9b04=gameCanvas[_0x29957a(0x16a)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE;let _0x30925f=0x0,_0x369fe9=0x0;if(isTwoPlayerMode&&selectedGameMode==='coop'){if(player1Lives>0x0)_0x30925f=Math[_0x29957a(0x1e0)](0x0,player1Lives-0x1);if(player2Lives>0x0)_0x369fe9=Math[_0x29957a(0x1e0)](0x0,player2Lives-0x1);}else{if(playerLives>0x0)_0x30925f=Math['max'](0x0,playerLives-0x1);}const _0x54ddab=0x5;for(let _0x428cae=0x0;_0x428cae<Math[_0x29957a(0xdb)](_0x30925f,_0x54ddab);_0x428cae++){const _0x5e8226=LIFE_ICON_MARGIN_LEFT+_0x428cae*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx['drawImage'](shipImage,Math['round'](_0x5e8226),Math[_0x29957a(0x167)](_0xfd9b04),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}if(isTwoPlayerMode&&selectedGameMode===_0x29957a(0x109)){const _0x14d893=gameCanvas[_0x29957a(0x1c2)]-LIFE_ICON_MARGIN_RIGHT-Math[_0x29957a(0xdb)](_0x369fe9,_0x54ddab)*(LIFE_ICON_SIZE+LIFE_ICON_SPACING)+LIFE_ICON_SPACING;for(let _0x14a068=0x0;_0x14a068<Math[_0x29957a(0xdb)](_0x369fe9,_0x54ddab);_0x14a068++){const _0x29d808=_0x14d893+_0x14a068*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx['drawImage'](shipImage,Math[_0x29957a(0x167)](_0x29d808),Math['round'](_0xfd9b04),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}}}}gameCtx[_0x29957a(0x14a)](),gameCtx['save']();if(isTwoPlayerMode&&selectedGameMode==='coop'){if(ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured){let _0x181bfe=!![];if(isPlayer1Invincible){const _0x3d6a51=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x24b4b1%_0x3d6a51>=INVINCIBILITY_BLINK_ON_MS)_0x181bfe=![];}if(_0x181bfe){const _0x5d9bb3=ship1['x'],_0x17a153=ship1['y'];typeof shipImage!==_0x29957a(0xde)&&shipImage[_0x29957a(0x158)]?(gameCtx[_0x29957a(0x10f)](shipImage,Math['round'](_0x5d9bb3),Math[_0x29957a(0x167)](_0x17a153),ship1[_0x29957a(0x1c2)],ship1[_0x29957a(0x16a)]),player1IsDualShipActive&&gameCtx['drawImage'](shipImage,Math[_0x29957a(0x167)](_0x5d9bb3+DUAL_SHIP_OFFSET_X),Math[_0x29957a(0x167)](_0x17a153),ship1[_0x29957a(0x1c2)],ship1['height'])):(gameCtx['fillStyle']=_0x29957a(0x187),gameCtx[_0x29957a(0x17b)](Math['round'](_0x5d9bb3),Math['round'](_0x17a153),ship1[_0x29957a(0x1c2)],ship1[_0x29957a(0x16a)]));}}if(ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured){let _0x505031=!![];if(isPlayer2Invincible){const _0x3f09a8=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x24b4b1%_0x3f09a8>=INVINCIBILITY_BLINK_ON_MS)_0x505031=![];}if(_0x505031){const _0x5da5d6=ship2['x'],_0x2cb252=ship2['y'];typeof shipImage!==_0x29957a(0xde)&&shipImage[_0x29957a(0x158)]?(gameCtx['drawImage'](shipImage,Math[_0x29957a(0x167)](_0x5da5d6),Math[_0x29957a(0x167)](_0x2cb252),ship2[_0x29957a(0x1c2)],ship2['height']),player2IsDualShipActive&&gameCtx[_0x29957a(0x10f)](shipImage,Math[_0x29957a(0x167)](_0x5da5d6+DUAL_SHIP_OFFSET_X),Math['round'](_0x2cb252),ship2['width'],ship2[_0x29957a(0x16a)])):(gameCtx['fillStyle']=_0x29957a(0x165),gameCtx[_0x29957a(0x17b)](Math['round'](_0x5da5d6),Math['round'](_0x2cb252),ship2[_0x29957a(0x1c2)],ship2['height']));}}}else{if(ship&&!isShowingCaptureMessage){let _0x29051a=!![];if(isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isInvincible){const _0x294690=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x24b4b1%_0x294690>=INVINCIBILITY_BLINK_ON_MS)_0x29051a=![];}if(_0x29051a){let _0x59751a=ship['x'],_0xec1793=(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0||!isInGameState||isShowingScoreScreen||isInGameState&&isShowingIntro&&!isManualControl&&(introStep===0x1||introStep===0x2||introStep===0x3))&&!isDualShipActive;_0xec1793&&(_0x59751a=Math[_0x29957a(0x167)](gameCanvas[_0x29957a(0x1c2)]/0x2-ship['width']/0x2));const _0x1d1344=ship['y'];typeof shipImage!=='undefined'&&shipImage[_0x29957a(0x158)]?(gameCtx[_0x29957a(0x10f)](shipImage,Math['round'](_0x59751a),Math['round'](_0x1d1344),ship['width'],ship['height']),isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isDualShipActive&&!isShipCaptured&&gameCtx[_0x29957a(0x10f)](shipImage,Math[_0x29957a(0x167)](_0x59751a+DUAL_SHIP_OFFSET_X),Math[_0x29957a(0x167)](_0x1d1344),ship[_0x29957a(0x1c2)],ship[_0x29957a(0x16a)])):(gameCtx['fillStyle']=_0x29957a(0x187),gameCtx['fillRect'](Math['round'](_0x59751a),Math[_0x29957a(0x167)](_0x1d1344),ship[_0x29957a(0x1c2)],ship['height']));}}}if(fallingShips['length']>0x0&&typeof shipImage!==_0x29957a(0xde)&&shipImage['complete']){}gameCtx['restore']();if(!isInGameState){if(isShowingScoreScreen){}else{gameCtx[_0x29957a(0x14e)]();const _0x3af76b=gameCanvas['width'],_0x1e6c7b=gameCanvas[_0x29957a(0x16a)],_0x342db7=_0x3af76b/0x2;selectedButtonIndex===-0x1&&(isPlayerSelectMode||isFiringModeSelectMode||isGameModeSelectMode||!isPlayerSelectMode&&!isFiringModeSelectMode&&!isGameModeSelectMode)&&(selectedButtonIndex=0x0);let _0x115db6=MENU_LOGO_APPROX_HEIGHT,_0x28f7a5=_0x115db6*(logoImage[_0x29957a(0x117)]/logoImage[_0x29957a(0xc3)]||0x1);typeof logoImage!==_0x29957a(0xde)&&logoImage[_0x29957a(0x158)]&&logoImage['naturalHeight']!==0x0&&(_0x115db6=logoImage[_0x29957a(0xc3)]*LOGO_SCALE_FACTOR,_0x28f7a5=logoImage['naturalWidth']*LOGO_SCALE_FACTOR);const _0x270460=getSubtitleApproxHeight(MENU_SUBTITLE_FONT),_0x329737=_0x115db6+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0x270460;let _0x40d24c=(_0x1e6c7b-_0x329737)/0x2-0x46;_0x40d24c+=MENU_GENERAL_Y_OFFSET;const _0x3b4f6d=_0x342db7-_0x28f7a5/0x2,_0x3585d3=_0x40d24c+MENU_LOGO_EXTRA_Y_OFFSET;typeof logoImage!==_0x29957a(0xde)&&logoImage[_0x29957a(0x158)]&&logoImage[_0x29957a(0xc3)]!==0x0?gameCtx[_0x29957a(0x10f)](logoImage,Math[_0x29957a(0x167)](_0x3b4f6d),Math['round'](_0x3585d3),_0x28f7a5,_0x115db6):drawCanvasText('LOGO',_0x342db7,_0x3585d3+_0x115db6/0x2,_0x29957a(0xd8),_0x29957a(0x10d));if(isGameModeSelectMode)drawCanvasButton(_0x29957a(0x189),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x29957a(0x146),0x1,selectedButtonIndex===0x1);else{if(isFiringModeSelectMode)drawCanvasButton(_0x29957a(0x159),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x29957a(0x1c4),0x1,selectedButtonIndex===0x1);else isPlayerSelectMode?(drawCanvasButton(_0x29957a(0x112),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x29957a(0xc0),0x1,selectedButtonIndex===0x1)):(drawCanvasButton(_0x29957a(0xe2),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x29957a(0x14d),0x1,selectedButtonIndex===0x1));}const _0x17b81e=getMenuButtonRect(0x1);let _0x2da704;_0x17b81e?_0x2da704=_0x17b81e['y']+_0x17b81e['height']+MENU_BUTTON_SUBTITLE_V_GAP+_0x270460/0x2:_0x2da704=_0x40d24c+_0x115db6+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0x270460/0x2,drawCanvasText(MENU_SUBTITLE_TEXT,_0x342db7-0x1,Math[_0x29957a(0x167)](_0x2da704),MENU_SUBTITLE_FONT,MENU_SUBTITLE_COLOR,_0x29957a(0x168),'middle',!![]),gameCtx['restore']();}}else{if(gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){gameCtx[_0x29957a(0x14e)]();let _0x1c4b59=!showReadyMessage&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!isCsCompletionDelayActive&&!isShowingIntro&&!isShowingCaptureMessage;_0x1c4b59&&(bullets['forEach'](_0x20599b=>{}),enemyBullets[_0x29957a(0x1a7)](_0x31680c=>{}));enemies[_0x29957a(0x1a7)](_0xbecb10=>{});if(captureBeamActive&&capturingBossId&&captureBeamProgress>0x0){}renderExplosions(),renderFloatingScores(),renderHitSparks();let _0x150e9d=![];const _0xc3998f=gameCanvas[_0x29957a(0x16a)]/0x2;if(isPaused){}else{if(isShowingCaptureMessage){}}gameCtx['restore']();}else{if(isShowingPlayerGameOverMessage){}else{if(gameOverSequenceStartTime>0x0){}}}}}catch(_0x56c172){console[_0x29957a(0x1c5)](_0x29957a(0x126),_0x56c172,_0x56c172[_0x29957a(0x185)]);}}function handleEnemyHit(_0x52d390,_0x5c71f3=null){const _0x590137=_0x28f57a;if(!_0x52d390)return{'destroyed':![],'pointsAwarded':0x0};const _0x2b1e34=Date[_0x590137(0x19f)]();let _0x47dcfe=0x0,_0x3e425d=![],_0x19716e=_0x52d390[_0x590137(0x155)],_0x2a04f8=null;const _0x1ad07f=_0x52d390[_0x590137(0x113)]===ENEMY3_TYPE?BOSS_WIDTH:_0x52d390[_0x590137(0x113)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x4893fc=_0x52d390['type']===ENEMY3_TYPE?BOSS_HEIGHT:_0x52d390['type']===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0xe2c610=_0x52d390[_0x590137(0x113)]===ENEMY3_TYPE&&_0x52d390[_0x590137(0x192)],_0x4ffe96=_0x52d390['type']===ENEMY3_TYPE&&_0x52d390[_0x590137(0x142)];let _0x5e9df3=![],_0x460f08=null;if(_0xe2c610){if(isTwoPlayerMode&&selectedGameMode===_0x590137(0x109)){if(isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x52d390['id'])_0x5e9df3=!![],_0x460f08=_0x590137(0x179);else isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x52d390['id']&&(_0x5e9df3=!![],_0x460f08=_0x590137(0x12c));}else!isTwoPlayerMode&&isShipCaptured&&capturedBossIdWithMessage===_0x52d390['id']&&(_0x5e9df3=!![]);}const _0x4a0cb3=_0x52d390['x']+_0x1ad07f/0x2,_0x486612=_0x52d390['y']+_0x4893fc*0.2;createHitSparks(_0x4a0cb3,_0x486612),_0x52d390['health']--;_0x52d390[_0x590137(0x113)]===ENEMY3_TYPE&&(_0x52d390[_0x590137(0x155)]=_0x52d390[_0x590137(0x131)]<ENEMY3_MAX_HITS);if(_0x52d390['health']<=0x0){_0x3e425d=!![];isChallengingStage&&challengingStageEnemiesHit++;let _0x1c4000=null;if(_0xe2c610&&_0x4ffe96){if(isCoopAIDemoActive)_0x5e9df3&&_0x460f08?_0x1c4000=_0x460f08:_0x1c4000=_0x5c71f3;else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x590137(0x17e))_0x5e9df3&&_0x460f08?_0x1c4000=_0x460f08:_0x1c4000=_0x5c71f3;else{if(isTwoPlayerMode&&selectedGameMode===_0x590137(0x109)){if(_0x5e9df3){if(isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x52d390['id'])_0x1c4000=_0x590137(0x179);else{if(isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x52d390['id'])_0x1c4000=_0x590137(0x12c);else _0x1c4000=_0x5c71f3;}}else _0x1c4000=_0x5c71f3;}else _0x1c4000=_0x5c71f3;}}if(_0x52d390[_0x590137(0x142)]){const _0x3b0937=_0x52d390['capturedShipDimensions'][_0x590137(0x1c2)],_0xfe023f=_0x52d390[_0x590137(0x142)][_0x590137(0x16a)],_0x5f50d2=_0x52d390['x']+(_0x1ad07f-_0x3b0937)/0x2+CAPTURED_SHIP_OFFSET_X,_0xdfda1b=_0x52d390['y']+CAPTURED_SHIP_OFFSET_Y,_0x264220=fallingShips['some'](_0xd0fe42=>Math[_0x590137(0xfd)](_0xd0fe42['x']-_0x5f50d2)<0x1&&Math['abs'](_0xd0fe42['y']-_0xdfda1b)<0x1);!_0x264220&&fallingShips[_0x590137(0x157)]({'x':_0x5f50d2,'y':_0xdfda1b,'width':_0x3b0937,'height':_0xfe023f,'creationTime':_0x2b1e34,'tintProgress':0x1,'rotation':0x0,'rotationDirection':Math[_0x590137(0x132)]()<0.5?-0x1:0x1,'totalRotation':0x0,'rotationCompleted':![],'targetPlayerId':_0x1c4000});}else console[_0x590137(0x1c5)](_0x590137(0xbf));_0x52d390['hasCapturedShip']=![],_0x52d390[_0x590137(0x142)]=null;}else _0xe2c610&&!_0x4ffe96&&(console[_0x590137(0x1c5)](_0x590137(0x19e)+_0x52d390['id']+_0x590137(0x177)),_0x52d390[_0x590137(0x192)]=![],_0x52d390['capturedShipDimensions']=null);if(isChallengingStage){let _0x22441f=0x64;const _0x4ffd6d=csLastHitTime;csLastHitTime=_0x2b1e34,csLastChainHitPosition={'x':_0x52d390['x'],'y':_0x52d390['y']},csCurrentChainHits>0x0&&_0x2b1e34-_0x4ffd6d<CS_CHAIN_BREAK_TIME_MS?csCurrentChainHits++:(csCurrentChainHits=0x1,csCurrentChainScore=0x0),csCurrentChainHits>=CS_CHAIN_SCORE_THRESHOLD&&(_0x22441f*=0x2),_0x47dcfe=_0x22441f,csCurrentChainScore+=_0x47dcfe,scoreEarnedThisCS+=_0x47dcfe,_0x2a04f8=explosionSound;}else{if(_0x52d390[_0x590137(0x110)]===_0x590137(0xe9))_0x47dcfe=_0x52d390[_0x590137(0x113)]===ENEMY1_TYPE?0x32:_0x52d390[_0x590137(0x113)]===ENEMY2_TYPE?0x50:0x0,_0x52d390[_0x590137(0x113)]===ENEMY3_TYPE&&(_0x47dcfe=0x96),_0x2a04f8=explosionSound;else{_0x47dcfe=_0x52d390['type']===ENEMY1_TYPE?0x64:_0x52d390[_0x590137(0x113)]===ENEMY2_TYPE?0xa0:0x0;if(_0x52d390[_0x590137(0x113)]===ENEMY3_TYPE){if(_0xe2c610){const _0x449521=[0x3e8,0x5dc,0x7d0,0xbb8];_0x47dcfe=_0x449521[Math['floor'](Math[_0x590137(0x132)]()*_0x449521[_0x590137(0xdd)])],_0x2a04f8=bossHit2Sound;}else _0x19716e?(_0x47dcfe=0x190,_0x2a04f8=bossHit2Sound):(_0x47dcfe=0x0,console['warn'](_0x590137(0x16f)+_0x47dcfe+'\x20points.\x20Health\x20was:\x20'+(_0x52d390[_0x590137(0x131)]+0x1)),_0x2a04f8=explosionSound);}else _0x2a04f8=explosionSound;if(_0x3e425d&&_0x47dcfe>0x0){const _0x4539f8=normalWaveLastHitTime;normalWaveLastHitTime=_0x2b1e34,normalWaveLastChainHitPosition={'x':_0x52d390['x'],'y':_0x52d390['y']};normalWaveLastChainHitPosition&&_0x2b1e34-_0x4539f8<NORMAL_WAVE_CHAIN_BREAK_TIME_MS?normalWaveCurrentChainHits++:(normalWaveCurrentChainHits=0x1,normalWaveCurrentChainScore=0x0);if(NORMAL_WAVE_CHAIN_BONUS_ENABLED&&normalWaveCurrentChainHits>=NORMAL_WAVE_CHAIN_SCORE_THRESHOLD){const _0x4df678=[0x12c,0x258,0x3e8,0x5dc,0x7d0,0xbb8],_0x4e9c3b=Math[_0x590137(0xdb)](_0x4df678[_0x590137(0xdd)]-0x1,normalWaveCurrentChainHits-NORMAL_WAVE_CHAIN_SCORE_THRESHOLD),_0x3b9ff1=_0x4df678[_0x4e9c3b];_0x47dcfe+=_0x3b9ff1,normalWaveCurrentChainScore+=_0x3b9ff1;}}}}if(_0x47dcfe>0x0){let _0x16042a=null;if(isCoopAIDemoActive){if(_0x5c71f3===_0x590137(0x179))player1Score+=_0x47dcfe,_0x16042a=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(hiScoreSound))),checkAndAwardExtraLife(0x1);else{if(_0x5c71f3===_0x590137(0x12c))player2Score+=_0x47dcfe,_0x16042a=()=>player2EnemiesHit++,player2Score>highScore&&(highScore=player2Score,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound(hiScoreSound))),checkAndAwardExtraLife(0x2);else{player1Score+=_0x47dcfe,_0x16042a=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score;checkAndAwardExtraLife(0x1);}}}else{if(!isManualControl)score+=_0x47dcfe,player1Score=score,_0x16042a=()=>player1EnemiesHit++,score>highScore&&(highScore=score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(hiScoreSound))),checkAndAwardExtraLife(0x1);else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(_0x5c71f3===_0x590137(0x179))player1Score+=_0x47dcfe,_0x16042a=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(hiScoreSound))),checkAndAwardExtraLife(0x1);else{if(_0x5c71f3===_0x590137(0x162))player2Score+=_0x47dcfe,_0x16042a=()=>player2EnemiesHit++,player2Score>highScore&&(highScore=player2Score,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound(hiScoreSound))),checkAndAwardExtraLife(0x2);else{player1Score+=_0x47dcfe,_0x16042a=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score;checkAndAwardExtraLife(0x1);}}}else{if(isTwoPlayerMode&&selectedGameMode===_0x590137(0x109)){if(_0x5c71f3===_0x590137(0x179))player1Score+=_0x47dcfe,_0x16042a=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(hiScoreSound))),checkAndAwardExtraLife(0x1);else _0x5c71f3===_0x590137(0x12c)?(player2Score+=_0x47dcfe,_0x16042a=()=>player2EnemiesHit++,player2Score>highScore&&(highScore=player2Score,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound(hiScoreSound))),checkAndAwardExtraLife(0x2)):(player1Score+=_0x47dcfe,_0x16042a=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(hiScoreSound))),checkAndAwardExtraLife(0x1));}else{score+=_0x47dcfe;let _0x4ffcb1=score,_0x5ee433=null,_0x32a5b9=currentPlayer;currentPlayer===0x1||!isTwoPlayerMode?(player1Score=score,_0x16042a=()=>player1EnemiesHit++,_0x5ee433=()=>{player1TriggeredHighScoreSound=!![];}):(player2Score=score,_0x16042a=()=>player2EnemiesHit++,_0x5ee433=()=>{player2TriggeredHighScoreSound=!![];});if(_0x4ffcb1>highScore){highScore=_0x4ffcb1;const _0x15f848=currentPlayer===0x1||!isTwoPlayerMode?player1TriggeredHighScoreSound:player2TriggeredHighScoreSound;!_0x15f848&&_0x5ee433&&(_0x5ee433(),playSound(hiScoreSound));}checkAndAwardExtraLife(_0x32a5b9);}}}}_0x16042a&&!isChallengingStage&&_0x16042a();const _0x2b4081=_0x52d390[_0x590137(0x110)]===_0x590137(0xe9)||isChallengingStage?FLOATING_SCORE_COLOR_GRID:FLOATING_SCORE_COLOR_ACTIVE;floatingScores[_0x590137(0x157)]({'text':_0x47dcfe[_0x590137(0x14b)](),'x':_0x52d390['x']+_0x1ad07f/0x2,'y':_0x52d390['y'],'color':_0x2b4081,'creationTime':_0x2b1e34,'displayStartTime':_0x2b1e34+FLOATING_SCORE_APPEAR_DELAY});}createExplosion(_0x52d390['x']+_0x1ad07f/0x2,_0x52d390['y']+_0x4893fc/0x2);_0x52d390['id']===capturingBossId&&stopSound(captureSound);if(_0x52d390['state']==='attacking'||_0x52d390[_0x590137(0x110)]===_0x590137(0x183)||_0x52d390['state']===_0x590137(0xe0)||_0x52d390['state']===_0x590137(0x114)||_0x52d390[_0x590137(0x110)]===_0x590137(0xf4)||_0x52d390[_0x590137(0x110)]===_0x590137(0x1cd)){if(_0x52d390[_0x590137(0x113)]===ENEMY3_TYPE)stopSound(bossGalagaDiveSound);else stopSound(butterflyDiveSound);}}else _0x3e425d=![],_0x52d390[_0x590137(0x113)]===ENEMY3_TYPE?(_0x2a04f8=bossHit1Sound,_0x47dcfe=0x0):_0x47dcfe=0x0;return _0x2a04f8&&playSound(_0x2a04f8),{'destroyed':_0x3e425d,'pointsAwarded':_0x47dcfe};}function createHitSparks(_0x1371c1,_0x15b403){const _0x17ee98=_0x28f57a;if(!gameCtx)return;const _0x261ff6=Date['now']();for(let _0x4bf41a=0x0;_0x4bf41a<HIT_SPARK_COUNT;_0x4bf41a++){const _0xd94ee6=Math[_0x17ee98(0x132)]()*Math['PI']*0x2,_0x36dc05=HIT_SPARK_SPEED*(0.7+Math[_0x17ee98(0x132)]()*0.6),_0x3a2d36=HIT_SPARK_LIFETIME*(0.8+Math[_0x17ee98(0x132)]()*0.4);hitSparks[_0x17ee98(0x157)]({'x':_0x1371c1,'y':_0x15b403,'vx':Math[_0x17ee98(0x1aa)](_0xd94ee6)*_0x36dc05,'vy':Math[_0x17ee98(0xd1)](_0xd94ee6)*_0x36dc05,'creationTime':_0x261ff6,'lifetime':_0x3a2d36,'size':HIT_SPARK_SIZE,'color':HIT_SPARK_COLOR});}}function updateHitSparks(){const _0x41c4f8=_0x28f57a,_0x158ddc=Date['now']();for(let _0x51a502=hitSparks[_0x41c4f8(0xdd)]-0x1;_0x51a502>=0x0;_0x51a502--){const _0x44b7aa=hitSparks[_0x51a502],_0x493a1a=_0x158ddc-_0x44b7aa['creationTime'];_0x493a1a>=_0x44b7aa['lifetime']?hitSparks['splice'](_0x51a502,0x1):(_0x44b7aa['vy']+=HIT_SPARK_GRAVITY,_0x44b7aa['x']+=_0x44b7aa['vx'],_0x44b7aa['y']+=_0x44b7aa['vy'],_0x44b7aa[_0x41c4f8(0x195)]=Math[_0x41c4f8(0x1e0)](0x0,0x1-_0x493a1a*HIT_SPARK_FADE_SPEED));}}function moveEntities(){const _0x195dca=_0x28f57a;try{if(isPaused)return;const _0x5d350c=Date[_0x195dca(0x19f)]();}catch(_0x3e64b4){console[_0x195dca(0x1c5)](_0x195dca(0x1d5),_0x3e64b4,_0x3e64b4[_0x195dca(0x185)]),isGridSoundPlaying=![],stopSound(gridBackgroundSound),isEntrancePhaseActive=![],stopSound(entranceSound),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(captureSound),stopSound(shipCapturedSound),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState==='function')showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x195dca(0x12b));}}function switchPlayerTurn(){const _0x4df581=_0x28f57a;if(!isTwoPlayerMode||selectedGameMode===_0x4df581(0x109))return![];stopSound(hiScoreSound);if(currentPlayer===0x1){player1Score=score,player1IsDualShipActive=isDualShipActive;if(player1Score>highScore)highScore=player1Score;}else{player2Score=score,player2IsDualShipActive=isDualShipActive;if(player2Score>highScore)highScore=player2Score;}const _0x3d335e=currentPlayer===0x1?0x2:0x1,_0x2698fa=_0x3d335e===0x1?player1Lives:player2Lives;if(_0x2698fa<=0x0){const _0x23a16e=currentPlayer===0x1?player1Lives:player2Lives;return _0x23a16e<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x3d335e,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function firePlayerBullet(_0x59ede0=null){const _0x1b2c38=_0x28f57a,_0x1adb9=Date[_0x1b2c38(0x19f)](),_0x5d99df=isTwoPlayerMode&&selectedGameMode===_0x1b2c38(0x109)&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x1adb9<coopPlayersReadyStartTime+0x1f40;if(_0x5d99df)return![];let _0x1fff42=![],_0x5e0bfa=null,_0x5a8f93=![],_0x38548e=0x0,_0x3812f8=_0x31147b=>{},_0xc91b2=_0x3cef96=>{},_0x4d5942=![],_0x95fca5=()=>![],_0x188d8f=_0xe865d3=>{},_0x437bab=_0x59ede0;const _0x1ca4ef=!isPaused&&isInGameState&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!showReadyMessage&&!isCsCompletionDelayActive&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x1b2c38(0x109)&&(_0x59ede0==='player1'&&isPlayer1ShowingGameOverMessage||_0x59ede0==='player2'&&isPlayer2ShowingGameOverMessage));if(!_0x1ca4ef)return![];if(isTwoPlayerMode&&selectedGameMode===_0x1b2c38(0x109)){if(_0x59ede0==='player1'&&ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!player1NeedsRespawnAfterCapture)(!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer1ShipCaptured)&&(_0x5e0bfa=ship1,_0x5a8f93=player1IsDualShipActive,_0x38548e=player1LastShotTime,_0x3812f8=_0x169685=>{player1LastShotTime=_0x169685;},_0xc91b2=_0x1cfd41=>{player1ShotsFired+=_0x1cfd41;},_0x4d5942=selectedFiringMode===_0x1b2c38(0x16e),_0x95fca5=()=>p1JustFiredSingle,_0x188d8f=_0x2150fc=>{p1JustFiredSingle=_0x2150fc;},_0x1fff42=!![]);else _0x59ede0===_0x1b2c38(0x12c)&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!player2NeedsRespawnAfterCapture&&((!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer2ShipCaptured)&&(_0x5e0bfa=ship2,_0x5a8f93=player2IsDualShipActive,_0x38548e=player2LastShotTime,_0x3812f8=_0x34d3f1=>{player2LastShotTime=_0x34d3f1;},_0xc91b2=_0x14ab56=>{player2ShotsFired+=_0x14ab56;},isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x1b2c38(0x17e)?_0x4d5942=![]:(_0x4d5942=selectedFiringMode===_0x1b2c38(0x16e),_0x95fca5=()=>p2JustFiredSingle,_0x188d8f=_0x1e7bd9=>{p2JustFiredSingle=_0x1e7bd9;}),_0x1fff42=!![]));}else{if(ship&&playerLives>0x0&&!isShipCaptured){_0x5e0bfa=ship,_0x5a8f93=isDualShipActive;if(isTwoPlayerMode&&selectedGameMode===_0x1b2c38(0x1b6)){if(currentPlayer===0x1){_0x38548e=player1LastShotTime,_0x3812f8=_0x1b2f9c=>{player1LastShotTime=_0x1b2f9c;},_0xc91b2=_0xfcd653=>{player1ShotsFired+=_0xfcd653;},_0x4d5942=selectedFiringMode===_0x1b2c38(0x16e),_0x95fca5=()=>p1JustFiredSingle,_0x188d8f=_0x3069ea=>{p1JustFiredSingle=_0x3069ea;};if(!_0x437bab)_0x437bab=_0x1b2c38(0x179);}else{_0x38548e=player2LastShotTime,_0x3812f8=_0x556f3=>{player2LastShotTime=_0x556f3;},_0xc91b2=_0x1b89ea=>{player2ShotsFired+=_0x1b89ea;};if(isPlayerTwoAI){_0x4d5942=![];if(!_0x437bab)_0x437bab=_0x1b2c38(0x162);}else{_0x4d5942=selectedFiringMode===_0x1b2c38(0x16e),_0x95fca5=()=>p2JustFiredSingle,_0x188d8f=_0x1fbe23=>{p2JustFiredSingle=_0x1fbe23;};if(!_0x437bab)_0x437bab=_0x1b2c38(0x12c);}}}else{_0x38548e=player1LastShotTime,_0x3812f8=_0x193113=>{player1LastShotTime=_0x193113;},_0xc91b2=_0xcfbfaf=>{player1ShotsFired+=_0xcfbfaf;},_0x4d5942=selectedFiringMode===_0x1b2c38(0x16e),_0x95fca5=()=>p1JustFiredSingle,_0x188d8f=_0x521ac5=>{p1JustFiredSingle=_0x521ac5;};if(!_0x437bab)_0x437bab='player1';}_0x1fff42=!![];}}_0x59ede0===null&&!isManualControl&&!isCoopAIDemoActive&&ship&&playerLives>0x0&&!isShipCaptured&&!isShowingCaptureMessage&&(_0x5e0bfa=ship,_0x5a8f93=isDualShipActive,_0x38548e=aiLastShotTime,_0x3812f8=_0x2334f3=>{aiLastShotTime=_0x2334f3;},_0xc91b2=_0x395da2=>{player1ShotsFired+=_0x395da2;},_0x4d5942=![],_0x1fff42=!![],_0x437bab='ai');if(!_0x1fff42||!_0x5e0bfa)return![];if(isManualControl||isPlayerTwoAI&&selectedGameMode===_0x1b2c38(0x1b6)&&currentPlayer===0x2||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x1b2c38(0x17e)&&_0x59ede0==='player1'){if(_0x4d5942){let _0x2544ad=![];if(isManualControl&&(!isPlayerTwoAI||isPlayerTwoAI&&selectedGameMode===_0x1b2c38(0x109)||isPlayerTwoAI&&selectedGameMode===_0x1b2c38(0x1b6)&&currentPlayer===0x1)){if(_0x437bab===_0x1b2c38(0x179)||!isTwoPlayerMode&&_0x437bab===_0x1b2c38(0x179))_0x2544ad=p1FireInputWasDown;else{if(_0x437bab===_0x1b2c38(0x12c))_0x2544ad=p2FireInputWasDown;}}if(_0x95fca5()){if(_0x2544ad&&isManualControl&&(_0x437bab===_0x1b2c38(0x179)&&(!isPlayerTwoAI||selectedOnePlayerGameVariant!==_0x1b2c38(0x11a)||currentPlayer===0x1)||_0x437bab===_0x1b2c38(0x12c)&&!isPlayerTwoAI))return![];else _0x188d8f(![]);}}else{if(_0x1adb9-_0x38548e<SHOOT_COOLDOWN)return![];}}else{if(!isManualControl&&_0x59ede0==='ai'){if(_0x1adb9-_0x38548e<SHOOT_COOLDOWN)return![];}else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'&&_0x59ede0===_0x1b2c38(0x162)){if(_0x1adb9-_0x38548e<SHOOT_COOLDOWN)return![];}}}try{const _0x21d739=_0x5e0bfa['y'];let _0x587b4e=0x0;if(_0x5a8f93){const _0x35c07c=_0x5e0bfa['x']+_0x5e0bfa['width']/0x2,_0x57a73e=_0x5e0bfa['x']+DUAL_SHIP_OFFSET_X+_0x5e0bfa[_0x1b2c38(0x1c2)]/0x2,_0xb00562=_0x35c07c-PLAYER_BULLET_WIDTH/0x2,_0x38adfc=_0x57a73e-PLAYER_BULLET_WIDTH/0x2;bullets[_0x1b2c38(0x157)]({'x':_0xb00562,'y':_0x21d739,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x437bab}),bullets[_0x1b2c38(0x157)]({'x':_0x38adfc,'y':_0x21d739,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x437bab}),_0x587b4e=0x2;}else{const _0x291ce5=_0x5e0bfa['x']+_0x5e0bfa[_0x1b2c38(0x1c2)]/0x2-PLAYER_BULLET_WIDTH/0x2;bullets[_0x1b2c38(0x157)]({'x':_0x291ce5,'y':_0x21d739,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x437bab}),_0x587b4e=0x1;}if(_0x4d5942)_0x188d8f(!![]);return playSound(playerShootSound),_0xc91b2(_0x587b4e),_0x3812f8(_0x1adb9),!![];}catch(_0x386fe5){return console['error'](_0x1b2c38(0xd2),_0x386fe5),![];}}function handlePlayerInput(){const _0x690343=_0x28f57a;try{const _0x50270a=Date[_0x690343(0x19f)](),_0x26d301=isTwoPlayerMode&&selectedGameMode===_0x690343(0x109)&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x50270a<coopPlayersReadyStartTime+0x1f40;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedGameMode===_0x690343(0x1b6)&&currentPlayer===0x2&&!isManualControl){isCoopAIDemoActive&&(leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![]);return;}let _0x21038c=isPaused||!isManualControl||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isTwoPlayerMode&&selectedGameMode===_0x690343(0x109)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage);if(_0x21038c){keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![];return;}let _0x5f52d6=![],_0x41d7bd=![],_0x11a225=![],_0x492372=![],_0xe6a345=![],_0x4848f8=![];if(connectedGamepadIndex!==null){const _0x3e3c84=navigator[_0x690343(0xeb)]();if(_0x3e3c84?.[connectedGamepadIndex]){const _0x35f891=_0x3e3c84[connectedGamepadIndex],_0x586023=processSingleController(_0x35f891,previousGameButtonStates);_0x5f52d6=_0x586023[_0x690343(0xcb)],_0x41d7bd=_0x586023[_0x690343(0x111)],_0x11a225=_0x586023['shoot'],previousGameButtonStates=_0x586023['newButtonStates'][_0x690343(0x101)]();if(_0x586023[_0x690343(0x144)]&&!isShowingCaptureMessage){togglePause();return;}if(_0x586023[_0x690343(0x129)]&&!isShowingCaptureMessage){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates[_0x690343(0xdd)]>0x0)previousGameButtonStates=[];}}else{if(previousGameButtonStates[_0x690343(0xdd)]>0x0)previousGameButtonStates=[];}if(!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x690343(0x17e))){if(isTwoPlayerMode&&connectedGamepadIndexP2!==null&&connectedGamepadIndexP2!==connectedGamepadIndex){const _0x2c95e7=navigator[_0x690343(0xeb)]();if(_0x2c95e7?.[connectedGamepadIndexP2]){const _0x15b25b=_0x2c95e7[connectedGamepadIndexP2],_0x3c87d8=processSingleController(_0x15b25b,previousGameButtonStatesP2);_0x492372=_0x3c87d8[_0x690343(0xcb)],_0xe6a345=_0x3c87d8[_0x690343(0x111)],_0x4848f8=_0x3c87d8[_0x690343(0x176)],previousGameButtonStatesP2=_0x3c87d8[_0x690343(0x11b)]['slice']();}else{if(previousGameButtonStatesP2[_0x690343(0xdd)]>0x0)previousGameButtonStatesP2=[];}}else{if(previousGameButtonStatesP2[_0x690343(0xdd)]>0x0)previousGameButtonStatesP2=[];}}const _0x446fd5=p1FireInputWasDown;p1FireInputWasDown=keyboardP1ShootDown||_0x11a225;let _0x45db8c=![];!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x690343(0x17e))?(_0x45db8c=p2FireInputWasDown,p2FireInputWasDown=keyboardP2ShootDown||_0x4848f8):p2FireInputWasDown=![];if(selectedFiringMode===_0x690343(0x16e)){if(isTwoPlayerMode&&selectedGameMode===_0x690343(0x109)){if(_0x446fd5&&!p1FireInputWasDown)p1JustFiredSingle=![];if(!isPlayerTwoAI&&_0x45db8c&&!p2FireInputWasDown)p2JustFiredSingle=![];}else{if(isTwoPlayerMode&&selectedGameMode===_0x690343(0x1b6)){if(currentPlayer===0x1&&_0x446fd5&&!p1FireInputWasDown)p1JustFiredSingle=![];else{if(currentPlayer===0x2&&!isPlayerTwoAI&&_0x45db8c&&!p2FireInputWasDown)p2JustFiredSingle=![];}}else{if(_0x446fd5&&!p1FireInputWasDown)p1JustFiredSingle=![];}}}leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![];if(isTwoPlayerMode&&selectedGameMode===_0x690343(0x109)){const _0x377f80=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture;if(_0x377f80){leftPressed=keyboardP1LeftDown||_0x5f52d6,rightPressed=keyboardP1RightDown||_0x41d7bd,shootPressed=!_0x26d301&&p1FireInputWasDown;if(isShowingCaptureMessage&&isPlayer1ShipCaptured)shootPressed=![];}if(!(isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')){const _0x306ca1=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture;if(_0x306ca1){connectedGamepadIndexP2!==null&&connectedGamepadIndexP2!==connectedGamepadIndex?(p2LeftPressed=keyboardP2LeftDown||_0x492372,p2RightPressed=keyboardP2RightDown||_0xe6a345):(p2LeftPressed=keyboardP2LeftDown,p2RightPressed=keyboardP2RightDown);p2ShootPressed=!_0x26d301&&p2FireInputWasDown;if(isShowingCaptureMessage&&isPlayer2ShipCaptured)p2ShootPressed=![];}}}else{if(isTwoPlayerMode&&selectedGameMode===_0x690343(0x1b6)){const _0x3efef5=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;if(_0x3efef5){if(currentPlayer===0x1)leftPressed=keyboardP1LeftDown||_0x5f52d6,rightPressed=keyboardP1RightDown||_0x41d7bd,shootPressed=!isShowingIntro&&p1FireInputWasDown;else{if(isPlayerTwoAI)leftPressed=![],rightPressed=![],shootPressed=![];else{let _0x45a477=![],_0x2ec34e=![];if(connectedGamepadIndexP2!==null&&connectedGamepadIndexP2!==connectedGamepadIndex)_0x45a477=_0x492372,_0x2ec34e=_0xe6a345;else connectedGamepadIndex!==null&&(_0x45a477=_0x5f52d6,_0x2ec34e=_0x41d7bd);leftPressed=keyboardP2LeftDown||_0x45a477,rightPressed=keyboardP2RightDown||_0x2ec34e,shootPressed=!isShowingIntro&&p2FireInputWasDown;}}if(isShowingCaptureMessage&&isShipCaptured)shootPressed=![];}}else{const _0x407deb=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;if(_0x407deb){leftPressed=keyboardP1LeftDown||_0x5f52d6,rightPressed=keyboardP1RightDown||_0x41d7bd,shootPressed=!isShowingIntro&&p1FireInputWasDown;if(isShowingCaptureMessage&&isShipCaptured)shootPressed=![];}}}if(isManualControl){if(isTwoPlayerMode&&selectedGameMode===_0x690343(0x109))ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture&&shootPressed&&firePlayerBullet(_0x690343(0x179)),!isPlayerTwoAI&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture&&p2ShootPressed&&firePlayerBullet('player2');else{const _0x1f504e=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;if(_0x1f504e&&shootPressed){if(isPlayerTwoAI&&selectedGameMode===_0x690343(0x1b6)&&currentPlayer===0x2){}else firePlayerBullet(currentPlayer===0x1||!isTwoPlayerMode?'player1':_0x690343(0x12c));}}}}catch(_0x5579d6){console[_0x690343(0x1c5)](_0x690343(0x1cc),_0x5579d6),leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![];}}function aiControl(){const _0x486b3b=_0x28f57a;try{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x486b3b(0x17e))return;let _0x27c1d9=null,_0x21d45c=null,_0x24fb09=![],_0x1f300b=![],_0x3e8088=![],_0x2ac9f0=0x0,_0x3fe226='ai',_0x5e4f84=![];if(isPlayerTwoAI&&selectedGameMode===_0x486b3b(0x1b6)&&currentPlayer===0x2){if(!ship||playerLives<=0x0||isShipCaptured||isShowingPlayerGameOverMessage){if(ship)ship[_0x486b3b(0x127)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x486b3b(0x1c2)]/0x2:0x0;return;}_0x27c1d9=ship,_0x21d45c=smoothedShipX,_0x24fb09=isDualShipActive,_0x1f300b=isShipCaptured,_0x3e8088=isInvincible,_0x2ac9f0=playerLives,_0x3fe226=_0x486b3b(0x162),_0x5e4f84=!![];}else{if(!isManualControl&&!isPlayerTwoAI){if(playerLives<=0x0||!ship||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isShipCaptured||isShowingCaptureMessage){if(ship)ship['targetX']=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x486b3b(0x1c2)]/0x2:0x0;return;}_0x27c1d9=ship,_0x21d45c=smoothedShipX,_0x24fb09=isDualShipActive,_0x1f300b=isShipCaptured,_0x3e8088=isInvincible,_0x2ac9f0=playerLives;}else return;}if(_0x21d45c===undefined&&_0x27c1d9)_0x21d45c=_0x27c1d9['x'],(_0x5e4f84||!isManualControl&&!isPlayerTwoAI)&&(smoothedShipX=_0x21d45c);else{if(_0x21d45c===undefined&&!_0x27c1d9){_0x21d45c=gameCanvas?gameCanvas[_0x486b3b(0x1c2)]/0x2:0x0;(_0x5e4f84||!isManualControl&&!isPlayerTwoAI)&&(smoothedShipX=_0x21d45c);return;}}const _0x1e56bf=Date['now'](),_0x27213b=gameCanvas[_0x486b3b(0x1c2)],_0x3e2dca=gameCanvas[_0x486b3b(0x16a)];let _0x1eff5d=_0x27c1d9[_0x486b3b(0x1c2)];_0x24fb09&&(_0x1eff5d=DUAL_SHIP_OFFSET_X+_0x27c1d9[_0x486b3b(0x1c2)]);const _0x58ece8=_0x27c1d9['x']+_0x1eff5d/0x2,_0x4f5be4=_0x27c1d9['y'],_0x2e33af=_0x27213b/0x2,_0x37a363=_0x2e33af-_0x1eff5d/0x2,_0x1b1518=showReadyMessage||showCSClearMessage||showCsHitsMessage||showPerfectMessage||showCsBonusScoreMessage||showExtraLifeMessage||isCsCompletionDelayActive||isShowingCaptureMessage||isShowingIntro;let _0x1a5ae9=_0x21d45c,_0x37f1ca=![],_0x35505f=![],_0x241fc2=_0x21d45c,_0x10b339=null,_0x5899d6=![];const _0x46d1de=_0x24fb09;aiNeedsStabilization&&!_0x1b1518&&(aiStabilizationEndTime=_0x1e56bf+AI_STABILIZATION_DURATION,aiNeedsStabilization=![],_0x21d45c=_0x27c1d9['x'],(_0x5e4f84||!isManualControl&&!isPlayerTwoAI)&&(smoothedShipX=_0x21d45c));if(_0x1e56bf<aiStabilizationEndTime&&!_0x1b1518)_0x1a5ae9=_0x37a363;else{if(!_0x1b1518){_0x35505f=![],_0x241fc2=_0x21d45c;if(!_0x3e8088){let _0x4e75ce=[];const _0x15b0ad=isChallengingStage?FINAL_DODGE_LOOKAHEAD*0.9:isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_LOOKAHEAD*1.1:FINAL_DODGE_LOOKAHEAD*1.2,_0x176715=isChallengingStage?FINAL_DODGE_BUFFER_BASE*0.9:isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_BUFFER*1.1:FINAL_DODGE_BUFFER_BASE*1.2,_0x1fd1bd={'x':_0x27c1d9['x']-_0x176715,'y':_0x27c1d9['y']-_0x15b0ad,'width':_0x1eff5d+_0x176715*0x2,'height':_0x15b0ad+_0x27c1d9[_0x486b3b(0x16a)]};for(const _0x38075b of enemyBullets){if(_0x38075b&&_0x38075b['y']+_0x38075b['height']>_0x27c1d9['y']-_0x27c1d9['height']*0x2&&_0x38075b['y']<_0x3e2dca){const _0x571462={'x':_0x38075b['x'],'y':_0x38075b['y'],'width':_0x38075b[_0x486b3b(0x1c2)],'height':_0x38075b[_0x486b3b(0x16a)]};checkCollision(_0x1fd1bd,_0x571462)&&_0x4e75ce[_0x486b3b(0x157)](_0x38075b);}}if(_0x4e75ce[_0x486b3b(0xdd)]>0x0){_0x35505f=!![];let _0x201ca3=_0x21d45c,_0x32631a=-Infinity;for(let _0x5a2c2f=-0x1;_0x5a2c2f<=0x1;_0x5a2c2f+=0x2){const _0x4cbe56=_0x1eff5d*(0x2+Math['random']()*0.5)+(_0x4e75ce[_0x486b3b(0xdd)]>0x1?_0x1eff5d*0.5:0x0);let _0x4b5899=_0x21d45c+_0x5a2c2f*_0x4cbe56;_0x4b5899=Math[_0x486b3b(0x1e0)](AI_ANTI_CORNER_BUFFER,Math[_0x486b3b(0xdb)](_0x27213b-_0x1eff5d-AI_ANTI_CORNER_BUFFER,_0x4b5899));let _0x55e5c6=0x0;const _0x434139={'x':_0x4b5899-_0x176715/0x2,'y':_0x27c1d9['y']-_0x15b0ad,'width':_0x1eff5d+_0x176715,'height':_0x15b0ad+_0x27c1d9[_0x486b3b(0x16a)]};for(const _0x222253 of _0x4e75ce){checkCollision(_0x434139,{'x':_0x222253['x'],'y':_0x222253['y'],'width':_0x222253['width'],'height':_0x222253[_0x486b3b(0x16a)]})&&_0x55e5c6++;}let _0x3990ae=-_0x55e5c6;if(Math[_0x486b3b(0xfd)](_0x4b5899-_0x21d45c)<_0x1eff5d*0.5)_0x3990ae-=0xa;_0x3990ae>_0x32631a&&(_0x32631a=_0x3990ae,_0x201ca3=_0x4b5899);}_0x241fc2=_0x201ca3;}if(!_0x35505f){const _0x52b291=AI_COLLISION_LOOKAHEAD*1.5,_0x2262e8=FINAL_DODGE_BUFFER_BASE*1.5;for(const _0x2ffcab of enemies){if(_0x2ffcab&&(_0x2ffcab[_0x486b3b(0x110)]===_0x486b3b(0xc2)||_0x2ffcab['state']===_0x486b3b(0xe0)||_0x2ffcab[_0x486b3b(0x110)]==='following_entrance_path'||_0x2ffcab[_0x486b3b(0x110)]===_0x486b3b(0x114))&&_0x2ffcab['y']+_0x2ffcab['height']>_0x27c1d9['y']-_0x52b291/0x2&&_0x2ffcab['y']<_0x27c1d9['y']+_0x27c1d9[_0x486b3b(0x16a)]){const _0x40a7c9={'x':_0x27c1d9['x']-_0x2262e8,'y':_0x27c1d9['y']-_0x52b291,'width':_0x1eff5d+_0x2262e8*0x2,'height':_0x52b291+_0x27c1d9[_0x486b3b(0x16a)]},_0x24b710={'x':_0x2ffcab['x'],'y':_0x2ffcab['y'],'width':_0x2ffcab[_0x486b3b(0x1c2)],'height':_0x2ffcab['height']};if(checkCollision(_0x40a7c9,_0x24b710)){_0x35505f=!![];const _0x18e0d4=_0x2ffcab['x']+_0x2ffcab[_0x486b3b(0x1c2)]/0x2,_0xf881a9=_0x58ece8<_0x18e0d4?-0x1:0x1,_0x41bfc6=_0x1eff5d*(2.2+Math['random']()*0.6);_0x241fc2=_0x21d45c+_0xf881a9*_0x41bfc6;break;}}}}}if(_0x35505f)_0x1a5ae9=Math[_0x486b3b(0x1e0)](AI_ANTI_CORNER_BUFFER,Math[_0x486b3b(0xdb)](_0x27213b-_0x1eff5d-AI_ANTI_CORNER_BUFFER,_0x241fc2)),_0x10b339=null,_0x37f1ca=![];else{if(fallingShips[_0x486b3b(0xdd)]>0x0&&!_0x1f300b&&!isWaitingForRespawn&&!_0x24fb09){}else{let _0x5e51b5=![],_0x51bc99=null;_0x5899d6=![];if(!_0x46d1de&&(!isManualControl||_0x5e4f84)&&captureBeamActive&&capturingBossId&&_0x2ac9f0>0x1&&!_0x1f300b&&!isWaitingForRespawn){}if(!_0x5899d6){_0x10b339=null;let _0x5c5f8e=-Infinity;for(const _0x3ecd50 of enemies){if(!_0x3ecd50)continue;const _0x261f6e=_0x2ac9f0>0x1&&!_0x24fb09;if(_0x3ecd50[_0x486b3b(0x113)]===ENEMY3_TYPE&&!_0x3ecd50[_0x486b3b(0x192)]&&!captureAttemptMadeThisLevel&&!isFullGridWave&&(_0x3ecd50[_0x486b3b(0x110)]===_0x486b3b(0x139)||_0x3ecd50['state']===_0x486b3b(0xe0)||_0x3ecd50[_0x486b3b(0x110)]==='capturing'||_0x3ecd50['id']===capturingBossId&&captureBeamActive)&&_0x261f6e)continue;let _0x5d9cf2=0x0;const _0x397e5c=_0x3ecd50['x']+_0x3ecd50[_0x486b3b(0x1c2)]/0x2,_0x5a858=_0x397e5c-_0x58ece8,_0x30d4de=_0x4f5be4-(_0x3ecd50['y']+_0x3ecd50[_0x486b3b(0x16a)]);if(_0x30d4de<0x0&&_0x3ecd50[_0x486b3b(0x110)]!==_0x486b3b(0xc2)&&_0x3ecd50[_0x486b3b(0x110)]!==_0x486b3b(0xe0)&&_0x3ecd50[_0x486b3b(0x110)]!==_0x486b3b(0x114))continue;_0x5d9cf2=(_0x3e2dca-_0x3ecd50['y'])*0x2-Math['abs'](_0x5a858)*0x3-_0x30d4de;if(_0x3ecd50[_0x486b3b(0x110)]===_0x486b3b(0xc2)||_0x3ecd50[_0x486b3b(0x110)]===_0x486b3b(0xe0))_0x5d9cf2+=0xbb8;if(_0x3ecd50['type']===ENEMY3_TYPE&&!_0x3ecd50['isDamaged'])_0x5d9cf2+=0x7d0;if(_0x3ecd50[_0x486b3b(0x113)]===ENEMY3_TYPE&&_0x3ecd50[_0x486b3b(0x155)])_0x5d9cf2+=0xfa0;if(_0x3ecd50['type']===ENEMY3_TYPE&&_0x3ecd50[_0x486b3b(0x192)])_0x5d9cf2+=0x1388;_0x5d9cf2>_0x5c5f8e&&(_0x5c5f8e=_0x5d9cf2,_0x10b339=_0x3ecd50);}if(_0x10b339){const _0x2d20f9=_0x10b339['x']+_0x10b339['width']/0x2;_0x1a5ae9=_0x2d20f9-_0x1eff5d/0x2;const _0x16b372=1.8;let _0x2394a0;if(isChallengingStage)_0x2394a0=_0x1eff5d*2.5;else _0x10b339[_0x486b3b(0x110)]===_0x486b3b(0xe9)||_0x10b339[_0x486b3b(0x110)]==='preparing_capture'?_0x2394a0=_0x1eff5d*(GRID_SHOOT_ALIGNMENT_FACTOR*_0x16b372):_0x2394a0=_0x1eff5d*(FINAL_SHOOT_ALIGNMENT_THRESHOLD*_0x16b372);const _0xfe6e=Math[_0x486b3b(0xfd)](_0x58ece8-_0x2d20f9);if(_0xfe6e<_0x2394a0){let _0x33c59f=![];_0x10b339[_0x486b3b(0x113)]===ENEMY3_TYPE&&(_0x10b339[_0x486b3b(0x110)]===_0x486b3b(0x139)||_0x10b339['state']==='diving_to_capture_position'||_0x10b339['state']==='capturing')&&!_0x24fb09&&_0x2ac9f0>0x1&&!captureAttemptMadeThisLevel&&(_0x33c59f=!![]),!_0x33c59f&&(_0x37f1ca=!![]);}}else _0x1a5ae9=_0x37a363,_0x37f1ca=![];}}}}}if(_0x27c1d9){_0x21d45c+=(_0x1a5ae9-_0x21d45c)*AI_SMOOTHING_FACTOR_MOVE,_0x27c1d9[_0x486b3b(0x127)]=_0x21d45c;if(_0x5e4f84)smoothedShipX=_0x21d45c;else!isManualControl&&!isPlayerTwoAI&&(smoothedShipX=_0x21d45c);}if(_0x37f1ca&&!_0x35505f&&!_0x5899d6&&!_0x1b1518){let _0x48962c=![];_0x5e4f84?_0x48962c=!![]:_0x1e56bf>=aiCanShootTime&&(_0x48962c=!![]),_0x48962c&&!isShowingIntro&&(firePlayerBullet(_0x3fe226)&&(!_0x5e4f84&&(aiCanShootTime=_0x1e56bf+SHOOT_COOLDOWN)));}}catch(_0x30be77){console['error'](_0x486b3b(0xca),_0x30be77,_0x30be77[_0x486b3b(0x185)]),ship&&(ship[_0x486b3b(0x127)]=ship['x']),aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas['width']/0x2:0x0;}}function aiControlCoop(){const _0x249463=_0x28f57a;if(!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x249463(0x17e))||isPaused||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0){if(ship1)ship1['targetX']=ship1['x'];if(ship2)ship2[_0x249463(0x127)]=ship2['x'];return;}const _0x96b8fe=Date['now'](),_0x2e382d=gameCanvas['width'],_0xd1388b=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x249463(0x17e),_0x37cfe4=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture,_0x5bd1a1=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture,_0x4172b0=_0x31a551=>{const _0x1bfc0b=_0x249463,_0x2ab03d=_0x31a551==='p1'&&isPlayer1ShowingGameOverMessage||_0x31a551==='p2'&&isPlayer2ShowingGameOverMessage;return _0x2ab03d||showReadyMessage||isCsCompletionDelayActive||isShowingIntro&&!(level===0x1&&coopPlayersReadyStartTime>0x0&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x1bfc0b(0x17e)));};let _0x840f02=!![],_0x53ced1=!![];if(coopAICaptureDiveAnticipationActive&&_0x96b8fe<coopAICaptureDiveAnticipationEndTime){if(!_0xd1388b)_0x840f02=![];_0x53ced1=![];}else coopAICaptureDiveAnticipationActive&&(coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0);if(_0x37cfe4&&ship1&&!_0xd1388b){if(smoothedShip1X===undefined)smoothedShip1X=ship1['x'];const _0x2fa889=_0x4172b0('p1');let {desiredTargetX:_0x17fd8e,shouldTryShoot:_0x20ac27,targetEnemyForAI:_0xc9e990}=calculateAIDesiredState(ship1,smoothedShip1X,player1IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer1Invincible,isPlayer1ShipCaptured,isPlayer1WaitingForRespawn,_0x96b8fe,_0x2e382d,_0x2fa889,'p1');aiShip1TargetEnemy=_0xc9e990,smoothedShip1X+=(_0x17fd8e-smoothedShip1X)*AI_SMOOTHING_FACTOR_MOVE,ship1['targetX']=smoothedShip1X;const _0x1bc496=_0xc9e990&&_0xc9e990[_0x249463(0x113)]===ENEMY3_TYPE&&_0xc9e990[_0x249463(0x192)]&&_0xc9e990['id']===capturedBossIdWithMessage&&isPlayer2ShipCaptured;if(_0x20ac27&&_0x840f02&&!(isShowingCaptureMessage&&isPlayer1ShipCaptured)){if(_0x1bc496||_0x96b8fe>=aiShip1CanShootTime){fireCoopAIBullet(ship1,player1IsDualShipActive,_0x249463(0x179));if(!_0x1bc496)aiShip1CanShootTime=_0x96b8fe+SHOOT_COOLDOWN;else aiShip1CanShootTime=_0x96b8fe+SHOOT_COOLDOWN/0x2;}}}if(_0x5bd1a1&&ship2){if(smoothedShip2X===undefined)smoothedShip2X=ship2['x'];const _0x16a11d=_0x4172b0('p2');let {desiredTargetX:_0x40bafa,shouldTryShoot:_0x3f5b46,targetEnemyForAI:_0x30bcb8}=calculateAIDesiredState(ship2,smoothedShip2X,player2IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer2Invincible,isPlayer2ShipCaptured,isPlayer2WaitingForRespawn,_0x96b8fe,_0x2e382d,_0x16a11d,'p2');aiShip2TargetEnemy=_0x30bcb8,smoothedShip2X+=(_0x40bafa-smoothedShip2X)*AI_SMOOTHING_FACTOR_MOVE,ship2['targetX']=smoothedShip2X;const _0x2e9aee=_0x30bcb8&&_0x30bcb8[_0x249463(0x113)]===ENEMY3_TYPE&&_0x30bcb8[_0x249463(0x192)]&&_0x30bcb8['id']===capturedBossIdWithMessage&&isPlayer1ShipCaptured;if(_0x3f5b46&&_0x53ced1&&!(isShowingCaptureMessage&&isPlayer2ShipCaptured)){if(_0x2e9aee||_0x96b8fe>=aiShip2CanShootTime){fireCoopAIBullet(ship2,player2IsDualShipActive,isCoopAIDemoActive?_0x249463(0x12c):'ai_p2');if(!_0x2e9aee)aiShip2CanShootTime=_0x96b8fe+SHOOT_COOLDOWN;else aiShip2CanShootTime=_0x96b8fe+SHOOT_COOLDOWN/0x2;}}}}function fireCoopAIBullet(_0x177a22,_0xb39a88,_0xfcb75){const _0xcfe89=_0x28f57a;if(!_0x177a22)return![];const _0x1ec1ac=Date[_0xcfe89(0x19f)]();let _0x4a8b7a=![];if(_0xfcb75==='player1'&&isPlayer1ShowingGameOverMessage)_0x4a8b7a=!![];if((_0xfcb75===_0xcfe89(0x12c)||_0xfcb75===_0xcfe89(0x162))&&isPlayer2ShowingGameOverMessage)_0x4a8b7a=!![];let _0x4145ff=isPaused||!isInGameState||gameOverSequenceStartTime>0x0||_0x4a8b7a;if(_0x4145ff)return![];if(_0xfcb75===_0xcfe89(0x179)&&isPlayer1ShipCaptured)return![];if((_0xfcb75===_0xcfe89(0x12c)||_0xfcb75===_0xcfe89(0x162))&&isPlayer2ShipCaptured)return![];try{const _0x1afff2=_0x177a22['y'];let _0x203246=0x0;const _0x41fb24=_0xfcb75;if(_0xb39a88){const _0x17b50d=_0x177a22['x']+_0x177a22[_0xcfe89(0x1c2)]/0x2,_0x1c588e=_0x177a22['x']+DUAL_SHIP_OFFSET_X+_0x177a22[_0xcfe89(0x1c2)]/0x2,_0x3c695d=_0x17b50d-PLAYER_BULLET_WIDTH/0x2,_0xacbef3=_0x1c588e-PLAYER_BULLET_WIDTH/0x2;bullets[_0xcfe89(0x157)]({'x':_0x3c695d,'y':_0x1afff2,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x41fb24}),bullets[_0xcfe89(0x157)]({'x':_0xacbef3,'y':_0x1afff2,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x41fb24}),_0x203246=0x2;}else{const _0x3ff3b9=_0x177a22['x']+_0x177a22['width']/0x2-PLAYER_BULLET_WIDTH/0x2;bullets[_0xcfe89(0x157)]({'x':_0x3ff3b9,'y':_0x1afff2,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x41fb24}),_0x203246=0x1;}playSound(playerShootSound);if(_0xfcb75==='player1')player1ShotsFired+=_0x203246,player1LastShotTime=_0x1ec1ac,aiShip1LastShotTime=_0x1ec1ac;else(_0xfcb75===_0xcfe89(0x12c)||_0xfcb75===_0xcfe89(0x162))&&(player2ShotsFired+=_0x203246,player2LastShotTime=_0x1ec1ac,aiShip2LastShotTime=_0x1ec1ac);return!![];}catch(_0x4b13a4){return console[_0xcfe89(0x1c5)](_0xcfe89(0xff)+_0xfcb75+':',_0x4b13a4),![];}}function calculateAIDesiredState(_0x50a38e,_0x548c41,_0x42438d,_0x2bdf18,_0x4e5ad3,_0x24ebc2,_0x6d8fff,_0x5755aa,_0x423caa,_0x2cd112,_0x42594e,_0x3cc5c0,_0x1de0bb){const _0x251756=_0x28f57a;let _0x9c877e=_0x548c41,_0x54d80e=![],_0x3bccd7=null,_0x36fb24=![],_0x574fe9=![],_0x2752f5=![],_0x3921e2=![];const _0x1e9bf3=gameCanvas[_0x251756(0x16a)],_0x808f57=_0x50a38e[_0x251756(0x1c2)]+(_0x42438d?DUAL_SHIP_OFFSET_X:0x0),_0x1e80d3=_0x50a38e['x']+_0x808f57/0x2,_0x583cfe=_0x50a38e['y'],_0xd07b78=_0x1de0bb==='p1'?player1Lives:_0x1de0bb===_0x251756(0x162)||_0x1de0bb==='p2'?player2Lives:0x0;let _0x459cc4=_0x42594e/0x2;if(_0x1de0bb==='p1')_0x459cc4=_0x42594e*0.25+Math[_0x251756(0xd1)](_0x2cd112/(AI_WIGGLE_PERIOD*1.1))*(AI_WIGGLE_AMPLITUDE*0.8);else(_0x1de0bb==='p2'||_0x1de0bb===_0x251756(0x162))&&(_0x459cc4=_0x42594e*0.75+Math['cos'](_0x2cd112/(AI_WIGGLE_PERIOD*0.9))*(AI_WIGGLE_AMPLITUDE*0.8));let _0x2b912a=_0x459cc4-_0x808f57/0x2;if(_0x3cc5c0||_0x5755aa||_0x423caa||_0x1de0bb==='p1'&&player1NeedsRespawnAfterCapture||(_0x1de0bb==='p2'||_0x1de0bb===_0x251756(0x162))&&player2NeedsRespawnAfterCapture)return _0x9c877e=_0x2b912a,(_0x5755aa||_0x423caa||_0x1de0bb==='p1'&&player1NeedsRespawnAfterCapture||(_0x1de0bb==='p2'||_0x1de0bb===_0x251756(0x162))&&player2NeedsRespawnAfterCapture)&&(_0x9c877e=_0x50a38e['x']),{'desiredTargetX':_0x9c877e,'shouldTryShoot':![],'targetEnemyForAI':null};const _0x203a1f=_0x1de0bb==='p1'?'p2':'p1',_0x38ed30=_0x203a1f==='p1'&&isPlayer1ShipCaptured||_0x203a1f==='p2'&&isPlayer2ShipCaptured,_0x50d052=_0x203a1f==='p1'&&isPlayer1ShowingGameOverMessage||_0x203a1f==='p2'&&isPlayer2ShowingGameOverMessage;let _0x5229e1=null,_0x2173d2=!![];if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x251756(0x17e)){if(_0x38ed30&&!_0x50d052&&capturedBossIdWithMessage){const _0x5a85bb=_0x203a1f==='p1'?coopPartner1CapturedTime:coopPartner2CapturedTime;_0x5a85bb>0x0&&_0x2cd112-_0x5a85bb<COOP_AI_SAVE_PARTNER_DELAY_MS&&(_0x2173d2=![]),_0x5229e1=_0x2bdf18[_0x251756(0x18e)](_0xeac828=>_0xeac828['id']===capturedBossIdWithMessage&&_0xeac828[_0x251756(0x113)]===ENEMY3_TYPE&&_0xeac828[_0x251756(0x192)]);}}if(_0x5229e1&&!_0x42438d&&_0x2173d2){_0x2752f5=!![],_0x3bccd7=_0x5229e1;const _0x430323=_0x5229e1['x']+_0x5229e1[_0x251756(0x1c2)]/0x2;_0x9c877e=_0x430323-_0x808f57/0x2,_0x54d80e=!![],_0x36fb24=![];if(!_0x6d8fff){let _0x3f9203=[];const _0x9678eb=FINAL_DODGE_LOOKAHEAD*0.4,_0x38f987=FINAL_DODGE_BUFFER_BASE*0.3,_0x3d0e1f={'x':Math[_0x251756(0xdb)](_0x1e80d3,_0x430323)-_0x38f987,'y':_0x50a38e['y']-_0x9678eb,'width':Math[_0x251756(0xfd)](_0x1e80d3-_0x430323)+_0x808f57+_0x38f987*0x2,'height':_0x9678eb+_0x50a38e['height']};for(const _0x4d9f29 of _0x4e5ad3){if(_0x4d9f29&&_0x4d9f29['y']+_0x4d9f29['height']>_0x50a38e['y']-_0x50a38e['height']&&_0x4d9f29['y']<_0x1e9bf3){const _0x3e71c9={'x':_0x4d9f29['x'],'y':_0x4d9f29['y'],'width':_0x4d9f29[_0x251756(0x1c2)],'height':_0x4d9f29[_0x251756(0x16a)]};checkCollision(_0x3d0e1f,_0x3e71c9)&&_0x3f9203[_0x251756(0x157)](_0x4d9f29);}}if(_0x3f9203[_0x251756(0xdd)]>0x0){_0x36fb24=!![];const _0x23cff1=_0x548c41<_0x42594e/0x2?-0x1:0x1;_0x9c877e=_0x548c41+_0x23cff1*(_0x808f57*0.6),_0x54d80e=![];}}return _0x9c877e=Math[_0x251756(0x1e0)](AI_EDGE_BUFFER,Math['min'](_0x42594e-_0x808f57-AI_EDGE_BUFFER,_0x9c877e)),{'desiredTargetX':_0x9c877e,'shouldTryShoot':_0x54d80e,'targetEnemyForAI':_0x3bccd7};}if(!_0x6d8fff){let _0x4bbf9c=[];const _0x570e33=FINAL_DODGE_LOOKAHEAD*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x251756(0x17e)?1.6:0.8),_0x133fbc=FINAL_DODGE_BUFFER_BASE*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x251756(0x17e)?1.7:0.8),_0x2efb03={'x':_0x50a38e['x']-_0x133fbc,'y':_0x50a38e['y']-_0x570e33,'width':_0x808f57+_0x133fbc*0x2,'height':_0x570e33+_0x50a38e[_0x251756(0x16a)]};for(const _0x39437f of _0x4e5ad3){if(_0x39437f&&_0x39437f['y']+_0x39437f[_0x251756(0x16a)]>_0x50a38e['y']-_0x50a38e[_0x251756(0x16a)]*1.5&&_0x39437f['y']<_0x1e9bf3){const _0x2cfd53={'x':_0x39437f['x'],'y':_0x39437f['y'],'width':_0x39437f[_0x251756(0x1c2)],'height':_0x39437f[_0x251756(0x16a)]};checkCollision(_0x2efb03,_0x2cfd53)&&_0x4bbf9c[_0x251756(0x157)](_0x39437f);}}if(_0x4bbf9c[_0x251756(0xdd)]>0x0){_0x36fb24=!![];let _0x160017=_0x548c41;const _0x3fa5cb=_0x808f57*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'?0x3:0x2);let _0x384ef5=0x0,_0x35a445=0x0,_0x2c6a75=0x0;const _0x55546b=_0x50a38e['x']+_0x808f57/0x2;for(const _0x3c77c5 of _0x4bbf9c){if(_0x3c77c5['x']<_0x55546b-_0x808f57*0.5)_0x35a445++;else{if(_0x3c77c5['x']>_0x55546b+_0x808f57*0.5)_0x2c6a75++;else _0x384ef5++;}}if(_0x35a445<=_0x2c6a75&&_0x35a445<=_0x384ef5)_0x160017=_0x548c41-_0x3fa5cb-Math[_0x251756(0x132)]()*_0x808f57*0.4;else{if(_0x2c6a75<=_0x35a445&&_0x2c6a75<=_0x384ef5)_0x160017=_0x548c41+_0x3fa5cb+Math[_0x251756(0x132)]()*_0x808f57*0.4;else{if(_0x548c41<_0x459cc4)_0x160017=_0x459cc4+_0x3fa5cb+Math[_0x251756(0x132)]()*_0x808f57*0.7;else _0x160017=_0x459cc4-_0x3fa5cb-Math[_0x251756(0x132)]()*_0x808f57*0.7;}}_0x9c877e=_0x160017;}if(!_0x36fb24){const _0x3ff762=AI_COLLISION_LOOKAHEAD*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'?0x1:0.75),_0x1afd97=AI_COLLISION_BUFFER*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x251756(0x17e)?0x1:0.8);for(const _0x304d96 of _0x2bdf18){if(!_0x304d96)continue;if(!_0x2173d2&&_0x5229e1&&_0x304d96['id']===_0x5229e1['id'])continue;if((_0x304d96[_0x251756(0x110)]===_0x251756(0xc2)||_0x304d96['state']===_0x251756(0xe0))&&_0x304d96['y']+_0x304d96['height']>_0x583cfe-_0x3ff762&&_0x304d96['y']<_0x583cfe+_0x50a38e[_0x251756(0x16a)]*1.5){const _0x476af8={'x':_0x50a38e['x']-_0x1afd97,'y':_0x50a38e['y']-_0x3ff762,'width':_0x808f57+_0x1afd97*0x2,'height':_0x3ff762+_0x50a38e[_0x251756(0x16a)]},_0x1185ae={'x':_0x304d96['x'],'y':_0x304d96['y'],'width':_0x304d96[_0x251756(0x1c2)],'height':_0x304d96['height']};if(checkCollision(_0x476af8,_0x1185ae)){_0x36fb24=!![],_0x3bccd7=null,_0x54d80e=![];const _0x575e02=_0x304d96['x']+_0x304d96[_0x251756(0x1c2)]/0x2;_0x9c877e=_0x548c41+(_0x1e80d3<_0x575e02?-0x1:0x1)*(_0x808f57*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x251756(0x17e)?2.2:1.9));break;}}}}}if(!_0x36fb24&&!_0x42438d&&captureBeamActive&&capturingBossId&&!_0x5755aa){if(aiPlayerActivelySeekingCaptureById===null||aiPlayerActivelySeekingCaptureById===_0x1de0bb){const _0x1b85e6=_0x2bdf18[_0x251756(0x18e)](_0x5352af=>_0x5352af['id']===capturingBossId);if(_0x1b85e6&&_0x1b85e6[_0x251756(0x110)]===_0x251756(0xf8)){aiPlayerActivelySeekingCaptureById===null&&(aiPlayerActivelySeekingCaptureById=_0x1de0bb);if(aiPlayerActivelySeekingCaptureById===_0x1de0bb){if(_0x2cd112-(_0x1b85e6[_0x251756(0x17c)]||0x0)>=AI_CAPTURE_BEAM_APPROACH_DELAY_MS&&_0xd07b78>0x1){_0x3921e2=!![];const _0x2ab152=_0x1b85e6['x']+(_0x1b85e6[_0x251756(0x113)]===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH)/0x2;_0x9c877e=_0x2ab152-_0x808f57/0x2,_0x54d80e=![],_0x3bccd7=null;}else _0x9c877e=_0x2b912a,_0x54d80e=![],_0x3bccd7=null;}}else aiPlayerActivelySeekingCaptureById===_0x1de0bb&&(aiPlayerActivelySeekingCaptureById=null);}}else aiPlayerActivelySeekingCaptureById===_0x1de0bb&&!(captureBeamActive&&capturingBossId&&!_0x5755aa)&&(aiPlayerActivelySeekingCaptureById=null);if(!_0x36fb24&&!_0x3921e2&&!_0x42438d){const _0x3f8a1f=_0x24ebc2['find'](_0x3daf02=>_0x3daf02[_0x251756(0xb8)]===_0x1de0bb&&!_0x3daf02[_0x251756(0x175)]);_0x3f8a1f&&(_0x574fe9=!![],_0x9c877e=_0x3f8a1f['x']+_0x3f8a1f[_0x251756(0x1c2)]/0x2-_0x808f57/0x2,_0x54d80e=![],_0x3bccd7=null);}if(!_0x36fb24&&!_0x3921e2&&!_0x574fe9&&!_0x2752f5){let _0xe87a45=-Infinity,_0x5e7eb6=![],_0x1ad86d=null;for(const _0x26a7dc of _0x2bdf18){if(!_0x26a7dc)continue;if(!_0x2173d2&&_0x5229e1&&_0x26a7dc['id']===_0x5229e1['id'])continue;const _0xdfc191=_0xd07b78>0x1&&!_0x42438d;if(_0x26a7dc[_0x251756(0x113)]===ENEMY3_TYPE&&!_0x26a7dc['hasCapturedShip']&&!captureAttemptMadeThisLevel&&!isFullGridWave&&(_0x26a7dc[_0x251756(0x110)]===_0x251756(0x139)||_0x26a7dc['state']==='diving_to_capture_position'||_0x26a7dc['state']===_0x251756(0xf8)||_0x26a7dc['id']===capturingBossId&&captureBeamActive)&&_0xdfc191)continue;let _0x455093=![];if(_0x26a7dc[_0x251756(0x113)]===ENEMY3_TYPE&&_0x26a7dc[_0x251756(0x192)]&&_0xd07b78<=0x1){const _0xc78541=(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x251756(0x17e))&&_0x26a7dc['id']===capturedBossIdWithMessage&&_0x38ed30;!_0xc78541&&(_0x455093=!![]);}let _0x510b22=0x0;const _0x4a9377=_0x26a7dc['x']+_0x26a7dc[_0x251756(0x1c2)]/0x2,_0x4cbb4b=_0x4a9377-_0x1e80d3,_0x4ff434=_0x583cfe-(_0x26a7dc['y']+_0x26a7dc['height']);if(_0x4ff434<0x0&&_0x26a7dc[_0x251756(0x110)]!==_0x251756(0xc2)&&_0x26a7dc[_0x251756(0x110)]!==_0x251756(0xe0)&&_0x26a7dc[_0x251756(0x110)]!=='following_bezier_path')continue;let _0x7980d2=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(_0x1de0bb==='p1'&&_0x4a9377<_0x42594e/0x2)_0x7980d2=0x1388;else{if((_0x1de0bb==='p2'||_0x1de0bb===_0x251756(0x162))&&_0x4a9377>=_0x42594e/0x2)_0x7980d2=0x1388;}}_0x510b22=_0x7980d2+(_0x1e9bf3-_0x26a7dc['y'])*0x2-Math[_0x251756(0xfd)](_0x4cbb4b)*0x3-_0x4ff434;if(_0x26a7dc[_0x251756(0x110)]==='attacking'||_0x26a7dc['state']===_0x251756(0xe0))_0x510b22+=0xbb8;if(_0x26a7dc[_0x251756(0x113)]===ENEMY3_TYPE&&!_0x26a7dc[_0x251756(0x155)])_0x510b22+=0x7d0;if(_0x26a7dc['type']===ENEMY3_TYPE&&_0x26a7dc[_0x251756(0x155)])_0x510b22+=0xfa0;_0x26a7dc[_0x251756(0x113)]===ENEMY3_TYPE&&_0x26a7dc[_0x251756(0x192)]&&(!_0x455093?_0x510b22+=0x1388:_0x510b22-=0x2710);if(_0x510b22>_0xe87a45){_0xe87a45=_0x510b22,_0x1ad86d=_0x26a7dc;let _0x5d01b6=![];_0x1ad86d[_0x251756(0x113)]===ENEMY3_TYPE&&!_0x1ad86d[_0x251756(0x192)]&&!captureAttemptMadeThisLevel&&!isFullGridWave&&_0xdfc191&&(_0x5d01b6=!![]);if(_0x455093&&_0x1ad86d===_0x26a7dc)Math[_0x251756(0xfd)](_0x1e80d3-(_0x1ad86d['x']+_0x1ad86d[_0x251756(0x1c2)]/0x2))<_0x808f57*1.1?_0x5e7eb6=!![]:_0x5e7eb6=![];else{if(_0x5d01b6)_0x5e7eb6=![];else Math['abs'](_0x1e80d3-(_0x1ad86d['x']+_0x1ad86d[_0x251756(0x1c2)]/0x2))<_0x808f57*0.9?_0x5e7eb6=!![]:_0x5e7eb6=![];}}}_0x3bccd7=_0x1ad86d,_0x54d80e=_0x5e7eb6;if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x251756(0x17e))&&_0x42438d&&_0x3bccd7){const _0x49340a=_0x1de0bb==='p1'?'p2':'p1';let _0x33a396=![];_0x49340a==='p1'?_0x33a396=ship1&&player1Lives>0x0&&!player1IsDualShipActive&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture:_0x33a396=ship2&&player2Lives>0x0&&!player2IsDualShipActive&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture;if(_0x33a396){const _0x428123=_0x3bccd7[_0x251756(0x113)]===ENEMY3_TYPE&&_0x3bccd7[_0x251756(0x192)]&&_0x3bccd7['id']===capturedBossIdWithMessage&&(_0x49340a==='p1'&&isPlayer1ShipCaptured||_0x49340a==='p2'&&isPlayer2ShipCaptured);if(!_0x428123){const _0x4ba534=_0x3bccd7[_0x251756(0x113)]===ENEMY3_TYPE&&!_0x3bccd7[_0x251756(0x192)]&&!isFullGridWave;if(_0x4ba534){let _0x36d4e6=![];(captureBeamActive&&capturingBossId===_0x3bccd7['id']&&aiPlayerActivelySeekingCaptureById===_0x1de0bb||(_0x3bccd7[_0x251756(0x110)]===_0x251756(0xe0)||_0x3bccd7[_0x251756(0x110)]===_0x251756(0x139))&&_0x3bccd7['id']===capturingBossId&&aiPlayerActivelySeekingCaptureById===_0x1de0bb)&&(_0x36d4e6=!![]),!_0x36d4e6&&(_0x54d80e=![]);}}}}if(_0x3bccd7){let _0x55716b=![];if(_0x3bccd7[_0x251756(0x113)]===ENEMY3_TYPE&&_0x3bccd7[_0x251756(0x192)]&&_0xd07b78<=0x1){const _0x225e15=(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x251756(0x17e))&&_0x3bccd7['id']===capturedBossIdWithMessage&&_0x38ed30;!_0x225e15&&(_0x55716b=!![]);}if(_0x55716b)_0x9c877e=_0x2b912a;else{const _0x4d9712=_0x3bccd7['x']+_0x3bccd7['width']/0x2;_0x9c877e=_0x4d9712-_0x808f57/0x2;}}else _0x9c877e=_0x2b912a,_0x54d80e=![];}return _0x9c877e=Math[_0x251756(0x1e0)](AI_EDGE_BUFFER,Math[_0x251756(0xdb)](_0x42594e-_0x808f57-AI_EDGE_BUFFER,_0x9c877e)),{'desiredTargetX':_0x9c877e,'shouldTryShoot':_0x54d80e,'targetEnemyForAI':_0x3bccd7};}function findAndDetachEnemy(){const _0x585489=_0x28f57a;try{let _0x1041ca=![];isTwoPlayerMode&&selectedGameMode===_0x585489(0x109)?_0x1041ca=isPlayer1ShipCaptured||isPlayer2ShipCaptured:_0x1041ca=isShipCaptured;if(!isFullGridWave&&_0x1041ca){const _0x502612=enemies[_0x585489(0x18e)](_0x4fc3d8=>_0x4fc3d8&&_0x4fc3d8['type']===ENEMY3_TYPE&&_0x4fc3d8['hasCapturedShip']&&_0x4fc3d8['state']===_0x585489(0xe9));if(_0x502612){_0x502612[_0x585489(0x15f)]=!![],_0x502612[_0x585489(0x12e)]=_0x585489(0x1b6);const _0x24e040=new Set([_0x502612['id']]);return resetJustReturnedFlags(_0x24e040),[_0x502612];}}if(isEntrancePhaseActive)return null;let _0x14b462=enemies[_0x585489(0xdc)](_0x3e675d=>_0x3e675d&&_0x3e675d[_0x585489(0x110)]===_0x585489(0xe9)&&!_0x3e675d[_0x585489(0x15f)]);if(_0x14b462[_0x585489(0xdd)]===0x0){_0x14b462=enemies['filter'](_0x1f1044=>_0x1f1044&&_0x1f1044['state']===_0x585489(0xe9));if(_0x14b462['length']===0x0)return null;}if(_0x14b462[_0x585489(0xdd)]===0x0)return null;_0x14b462[_0x585489(0x16b)]((_0x262510,_0x204dfa)=>(_0x204dfa['gridRow']||0x0)-(_0x262510[_0x585489(0x1d6)]||0x0));const _0x2773fa=_0x14b462[_0x585489(0xdd)]<=0x3;let _0xda9782=[];const _0x378b54=_0x585489(0x1b6);gridJustCompleted&&(gridJustCompleted=![]);let _0xc9e2cb=![];if(level>0x1&&!_0x2773fa&&_0x14b462[_0x585489(0xdd)]>=0x3){const _0x14344c=_0x14b462[_0x585489(0xdc)](_0x5258cc=>_0x5258cc[_0x585489(0x113)]===ENEMY3_TYPE&&!_0x5258cc[_0x585489(0x192)]);for(const _0x14c78e of _0x14344c){const _0x4f2b93=_0x14b462['find'](_0x57782f=>_0x57782f[_0x585489(0x113)]===ENEMY2_TYPE&&_0x57782f[_0x585489(0x1d6)]===_0x14c78e[_0x585489(0x1d6)]&&_0x57782f[_0x585489(0x1dd)]===_0x14c78e['gridCol']-0x1),_0x15e115=_0x14b462[_0x585489(0x18e)](_0x40f2dc=>_0x40f2dc[_0x585489(0x113)]===ENEMY2_TYPE&&_0x40f2dc[_0x585489(0x1d6)]===_0x14c78e[_0x585489(0x1d6)]&&_0x40f2dc[_0x585489(0x1dd)]===_0x14c78e[_0x585489(0x1dd)]+0x1);if(_0x4f2b93&&_0x15e115){_0xda9782=[_0x14c78e,_0x4f2b93,_0x15e115],_0xc9e2cb=!![];break;}}}if(!_0xc9e2cb&&!_0x2773fa){const _0x1ba0b9=_0x14b462[_0x585489(0xdc)](_0x1d3a14=>_0x1d3a14[_0x585489(0x113)]===ENEMY1_TYPE),_0x44f36a=scaleValue(level,BASE_BEE_GROUP_ATTACK_PROBABILITY,MAX_BEE_GROUP_ATTACK_PROBABILITY)*1.2;if(_0x1ba0b9[_0x585489(0xdd)]>=0x2&&Math[_0x585489(0x132)]()<_0x44f36a){const _0x1f7c84=scaleValue(level,BASE_BEE_TRIPLE_ATTACK_PROBABILITY,MAX_BEE_TRIPLE_ATTACK_PROBABILITY)*1.1,_0x2b67be=_0x1ba0b9[_0x585489(0xdd)]>=0x3&&Math[_0x585489(0x132)]()<_0x1f7c84?0x3:0x2;let _0x5bf6f2=![];_0x1ba0b9[_0x585489(0x16b)](()=>Math[_0x585489(0x132)]()-0.5);for(let _0xe7a7fa=0x0;_0xe7a7fa<_0x1ba0b9[_0x585489(0xdd)];_0xe7a7fa++){const _0x2613af=_0x1ba0b9[_0xe7a7fa];let _0x23aed2=[_0x2613af];const _0x4c545c=_0x1ba0b9[_0x585489(0xdc)](_0x129a61=>_0x129a61['id']!==_0x2613af['id']&&_0x129a61[_0x585489(0x1d6)]===_0x2613af['gridRow']);_0x4c545c['sort']((_0x183e26,_0x26696c)=>Math[_0x585489(0xfd)](_0x183e26[_0x585489(0x1dd)]-_0x2613af[_0x585489(0x1dd)])-Math[_0x585489(0xfd)](_0x26696c[_0x585489(0x1dd)]-_0x2613af[_0x585489(0x1dd)]));for(let _0x468dd8=0x0;_0x468dd8<_0x4c545c[_0x585489(0xdd)]&&_0x23aed2[_0x585489(0xdd)]<_0x2b67be;_0x468dd8++){_0x23aed2[_0x585489(0x157)](_0x4c545c[_0x468dd8]);}if(_0x23aed2[_0x585489(0xdd)]===_0x2b67be){_0xda9782=_0x23aed2,_0xc9e2cb=!![],_0x5bf6f2=!![];break;}}!_0x5bf6f2&&_0x1ba0b9[_0x585489(0xdd)]>=_0x2b67be&&(_0xda9782=_0x1ba0b9[_0x585489(0x101)](0x0,_0x2b67be),_0xc9e2cb=!![]);}}if(!_0xc9e2cb&&!_0x2773fa){const _0x3854f7=_0x14b462[_0x585489(0xdc)](_0x4eb81e=>_0x4eb81e['type']===ENEMY2_TYPE),_0xef4ce1=0.2;if(_0x3854f7['length']>=0x2&&Math[_0x585489(0x132)]()<_0xef4ce1){const _0x2e7997=0x2;let _0x49b562=![];_0x3854f7['sort'](()=>Math[_0x585489(0x132)]()-0.5);for(let _0x361c4c=0x0;_0x361c4c<_0x3854f7[_0x585489(0xdd)];_0x361c4c++){const _0x1d9106=_0x3854f7[_0x361c4c];let _0x494465=[_0x1d9106];const _0x20dfba=_0x3854f7[_0x585489(0xdc)](_0x4115d3=>_0x4115d3['id']!==_0x1d9106['id']&&_0x4115d3['gridRow']===_0x1d9106[_0x585489(0x1d6)]);_0x20dfba['sort']((_0x9e2c,_0x4c80f5)=>Math['abs'](_0x9e2c[_0x585489(0x1dd)]-_0x1d9106[_0x585489(0x1dd)])-Math['abs'](_0x4c80f5[_0x585489(0x1dd)]-_0x1d9106['gridCol']));for(let _0x2f590c=0x0;_0x2f590c<_0x20dfba[_0x585489(0xdd)]&&_0x494465['length']<_0x2e7997;_0x2f590c++){_0x494465[_0x585489(0x157)](_0x20dfba[_0x2f590c]);}if(_0x494465[_0x585489(0xdd)]===_0x2e7997){_0xda9782=_0x494465,_0xc9e2cb=!![],_0x49b562=!![];break;}}!_0x49b562&&_0x3854f7[_0x585489(0xdd)]>=_0x2e7997&&(_0xda9782=_0x3854f7['slice'](0x0,_0x2e7997),_0xc9e2cb=!![]);}}if(!_0xc9e2cb&&_0x14b462['length']>0x0){const _0x2a3336=_0x14b462[0x0];_0xda9782[_0x585489(0x157)](_0x2a3336);if(_0x14b462['length']>0x1&&!_0x2773fa&&Math['random']()<0.2){const _0x43a8f1=_0x14b462[_0x585489(0x18e)](_0x3b9f04=>_0x3b9f04['id']!==_0x2a3336['id']&&_0x3b9f04[_0x585489(0x1d6)]===_0x2a3336['gridRow']&&_0x3b9f04['gridCol']===_0x2a3336[_0x585489(0x1dd)]-0x1),_0x203d7d=_0x14b462[_0x585489(0x18e)](_0x24334b=>_0x24334b['id']!==_0x2a3336['id']&&_0x24334b[_0x585489(0x1d6)]===_0x2a3336['gridRow']&&_0x24334b[_0x585489(0x1dd)]===_0x2a3336[_0x585489(0x1dd)]+0x1),_0x1d3b19=_0x43a8f1||_0x203d7d;if(_0x1d3b19){const _0x599e46=_0x2a3336[_0x585489(0x113)]===ENEMY3_TYPE&&_0x1d3b19[_0x585489(0x113)]===ENEMY3_TYPE;!_0x599e46&&_0xda9782[_0x585489(0x157)](_0x1d3b19);}}_0xc9e2cb=!![];}if(_0xda9782[_0x585489(0xdd)]>0x0){_0xda9782=_0xda9782[_0x585489(0xdc)](_0x4d4377=>_0x4d4377);if(_0xda9782[_0x585489(0xdd)]===0x0)return null;_0xda9782[_0x585489(0x1a7)](_0x29424b=>{const _0x5f05d2=_0x585489;_0x29424b&&(_0x29424b['justReturned']=!![],_0x29424b[_0x5f05d2(0x12e)]=_0x378b54);});const _0x5c30b6=new Set(_0xda9782[_0x585489(0xbb)](_0x2c40c8=>_0x2c40c8['id']));return resetJustReturnedFlags(_0x5c30b6),_0xda9782;}return null;}catch(_0x317e39){return console['error'](_0x585489(0xf0),_0x317e39),null;}}function triggerImmediateCaptureDive(){const _0x285634=_0x28f57a;try{let _0x4cc398=![],_0x3eb989=null;if(isTwoPlayerMode&&selectedGameMode===_0x285634(0x109)){const _0x5d2800=ship1&&player1Lives>0x1&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn,_0x383ea9=ship2&&player2Lives>0x1&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn;if((_0x5d2800||_0x383ea9)&&!captureAttemptMadeThisLevel){_0x4cc398=!![];if(_0x5d2800&&_0x383ea9)_0x3eb989=Math[_0x285634(0x132)]()<0.5?ship1:ship2;else{if(_0x5d2800)_0x3eb989=ship1;else _0x383ea9&&(_0x3eb989=ship2);}}}else playerLives>0x1&&ship&&!isShipCaptured&&!isWaitingForRespawn&&!captureAttemptMadeThisLevel&&(_0x4cc398=!![],_0x3eb989=ship);if(isChallengingStage||!_0x4cc398||!_0x3eb989)return;const _0x5754be=enemies['filter'](_0x4def88=>_0x4def88&&_0x4def88[_0x285634(0x110)]===_0x285634(0xe9)&&_0x4def88[_0x285634(0x113)]===ENEMY3_TYPE&&!_0x4def88[_0x285634(0x192)]&&!_0x4def88[_0x285634(0x104)]);if(_0x5754be[_0x285634(0xdd)]>0x0){const _0x67f551=_0x5754be[Math['floor'](Math[_0x285634(0x132)]()*_0x5754be[_0x285634(0xdd)])],_0x13aaa1=Date['now']();_0x67f551[_0x285634(0x104)]=!![],_0x67f551[_0x285634(0x15f)]=!![];const _0x4b7e77=new Set([_0x67f551['id']]);resetJustReturnedFlags(_0x4b7e77);const _0x142658=_0x3eb989['x']+_0x3eb989[_0x285634(0x1c2)]/0x2,_0x157eb5=_0x142658<gameCanvas[_0x285634(0x1c2)]/0x2?_0x285634(0x111):_0x285634(0xcb),_0x517830=_0x157eb5===_0x285634(0xcb)?gameCanvas[_0x285634(0x1c2)]*CAPTURE_DIVE_SIDE_MARGIN_FACTOR:gameCanvas[_0x285634(0x1c2)]*(0x1-CAPTURE_DIVE_SIDE_MARGIN_FACTOR)-BOSS_WIDTH,_0x384caa=gameCanvas[_0x285634(0x16a)]*CAPTURE_DIVE_BOTTOM_HOVER_Y_FACTOR;_0x67f551['state']=_0x285634(0x139),_0x67f551[_0x285634(0x127)]=_0x517830,_0x67f551['targetY']=_0x384caa,_0x67f551['diveStartTime']=_0x13aaa1,playSound(bossGalagaDiveSound);const _0x135fff=_0x67f551['id'];_0x67f551['capturePrepareTimeout']=setTimeout(()=>{const _0x30075a=_0x285634,_0x53419a=enemies[_0x30075a(0x18e)](_0x5d42a0=>_0x5d42a0?.['id']===_0x135fff);_0x53419a&&_0x53419a[_0x30075a(0x110)]===_0x30075a(0x139)&&(_0x53419a[_0x30075a(0x110)]='diving_to_capture_position');if(_0x53419a)_0x53419a['capturePrepareTimeout']=null;const _0x43ac35=enemySpawnTimeouts[_0x30075a(0x102)](_0x52137a=>_0x52137a===_0x67f551[_0x30075a(0x1b2)]);if(_0x43ac35>-0x1)enemySpawnTimeouts[_0x30075a(0xe3)](_0x43ac35,0x1);},0x12c),enemySpawnTimeouts[_0x285634(0x157)](_0x67f551['capturePrepareTimeout']);}}catch(_0x186424){console[_0x285634(0x1c5)](_0x285634(0xbe),_0x186424);}}function resetJustReturnedFlags(_0x2b370b){enemies['forEach'](_0x5c41ce=>{const _0x56e780=_0x26c6;let _0xf6b3b2=![];if(_0x2b370b instanceof Set)_0xf6b3b2=_0x2b370b['has'](_0x5c41ce['id']);else typeof _0x2b370b===_0x56e780(0x1ca)&&(_0xf6b3b2=_0x5c41ce['id']===_0x2b370b);_0x5c41ce&&_0x5c41ce[_0x56e780(0x110)]===_0x56e780(0xe9)&&_0x5c41ce[_0x56e780(0x15f)]&&!_0xf6b3b2&&(_0x5c41ce[_0x56e780(0x15f)]=![]);});}function updateFloatingScores(){const _0x15c054=_0x28f57a;if(isPaused)return;try{const _0x1670fd=Date[_0x15c054(0x19f)]();floatingScores=floatingScores['filter'](_0x3a50ef=>_0x1670fd-_0x3a50ef[_0x15c054(0xcd)]<FLOATING_SCORE_DURATION+FLOATING_SCORE_APPEAR_DELAY);}catch(_0x579288){console['error'](_0x15c054(0x1a1),_0x579288),floatingScores=[];}}function _0x26c6(_0x2b622d,_0x1ae84d){const _0x328319=_0x3283();return _0x26c6=function(_0x26c63a,_0x40fd2d){_0x26c63a=_0x26c63a-0xb8;let _0x25899a=_0x328319[_0x26c63a];return _0x25899a;},_0x26c6(_0x2b622d,_0x1ae84d);}function updateExplosions(){const _0x268733=_0x28f57a;if(isPaused)return;try{const _0x144a7e=Date[_0x268733(0x19f)]();for(let _0x4af580=explosions[_0x268733(0xdd)]-0x1;_0x4af580>=0x0;_0x4af580--){const _0xda595=explosions[_0x4af580],_0x25f589=_0x144a7e-_0xda595[_0x268733(0xcd)];if(_0x25f589>_0xda595['duration']){explosions[_0x268733(0xe3)](_0x4af580,0x1);continue;}_0xda595[_0x268733(0x143)][_0x268733(0x1a7)](_0x2716ea=>{const _0x294ad0=_0x268733;_0x2716ea['x']+=_0x2716ea['vx'],_0x2716ea['y']+=_0x2716ea['vy'],_0x2716ea[_0x294ad0(0x195)]=Math[_0x294ad0(0x1e0)](0x0,0x1-_0x25f589/_0xda595[_0x294ad0(0x118)]*EXPLOSION_FADE_SPEED);});}}catch(_0x42d2b7){console['error']('Error\x20updating\x20explosions:',_0x42d2b7),explosions=[];}}function moveEntities(_0x245f65=null,_0x4f218c=null){const _0x63c38=_0x28f57a;if(isPaused)return;try{const _0x4e22cd=Date['now'](),_0x151820=gameCanvas?gameCanvas[_0x63c38(0x16a)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;if(gameCanvas){if(isManualControl){if(isTwoPlayerMode&&selectedGameMode===_0x63c38(0x109)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x420914=ship1[_0x63c38(0x1c2)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(leftPressed&&ship1['x']>0x0)ship1['x']-=ship1[_0x63c38(0x184)];else{if(rightPressed&&ship1['x']<gameCanvas[_0x63c38(0x1c2)]-_0x420914)ship1['x']+=ship1[_0x63c38(0x184)];}ship1[_0x63c38(0x127)]=ship1['x'];}if(!isPlayerTwoAI&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x4d488e=ship2['width']+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(p2LeftPressed&&ship2['x']>0x0)ship2['x']-=ship2['speed'];else{if(p2RightPressed&&ship2['x']<gameCanvas[_0x63c38(0x1c2)]-_0x4d488e)ship2['x']+=ship2[_0x63c38(0x184)];}ship2[_0x63c38(0x127)]=ship2['x'];}if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x63c38(0x17e)&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x41d3a9=ship2[_0x63c38(0x127)]-ship2['x'];let _0x4669c7=ship2['speed']*AI_POSITION_MOVE_SPEED_FACTOR;if(Math['abs'](_0x41d3a9)>AI_MOVEMENT_DEADZONE)ship2['x']+=Math[_0x63c38(0x13e)](_0x41d3a9)*Math['min'](Math['abs'](_0x41d3a9),_0x4669c7);const _0x12d5dd=ship2['width']+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship2['x']=Math['max'](0x0,Math[_0x63c38(0xdb)](gameCanvas[_0x63c38(0x1c2)]-_0x12d5dd,ship2['x']));}}else{if(ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1)){const _0x2ebf26=ship[_0x63c38(0x1c2)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x553bf8=leftPressed,_0x1c2dfd=rightPressed;if(isShowingIntro&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x63c38(0x11a)&&currentPlayer===0x1){if(_0x245f65!==null)_0x553bf8=_0x245f65;if(_0x4f218c!==null)_0x1c2dfd=_0x4f218c;}if(_0x553bf8&&ship['x']>0x0)ship['x']-=ship[_0x63c38(0x184)];else{if(_0x1c2dfd&&ship['x']<gameCanvas[_0x63c38(0x1c2)]-_0x2ebf26)ship['x']+=ship['speed'];}ship['targetX']=ship['x'];}}}if(!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x63c38(0x1b6)&&currentPlayer===0x2){if(isCoopAIDemoActive){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x2e6e8b=ship1[_0x63c38(0x127)]-ship1['x'];let _0x27e254=ship1[_0x63c38(0x184)]*AI_POSITION_MOVE_SPEED_FACTOR;if(Math[_0x63c38(0xfd)](_0x2e6e8b)>AI_MOVEMENT_DEADZONE)ship1['x']+=Math['sign'](_0x2e6e8b)*Math[_0x63c38(0xdb)](Math[_0x63c38(0xfd)](_0x2e6e8b),_0x27e254);const _0x3b04e=ship1[_0x63c38(0x1c2)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship1['x']=Math[_0x63c38(0x1e0)](0x0,Math[_0x63c38(0xdb)](gameCanvas[_0x63c38(0x1c2)]-_0x3b04e,ship1['x']));}if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x2fc257=ship2[_0x63c38(0x127)]-ship2['x'];let _0x1efbd8=ship2['speed']*AI_POSITION_MOVE_SPEED_FACTOR;if(Math[_0x63c38(0xfd)](_0x2fc257)>AI_MOVEMENT_DEADZONE)ship2['x']+=Math[_0x63c38(0x13e)](_0x2fc257)*Math[_0x63c38(0xdb)](Math[_0x63c38(0xfd)](_0x2fc257),_0x1efbd8);const _0x70a536=ship2[_0x63c38(0x1c2)]+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship2['x']=Math[_0x63c38(0x1e0)](0x0,Math[_0x63c38(0xdb)](gameCanvas[_0x63c38(0x1c2)]-_0x70a536,ship2['x']));}}else{if(ship){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){const _0x67b5c8=ship[_0x63c38(0x127)]-ship['x'];let _0x2f1820=ship[_0x63c38(0x184)]*AI_POSITION_MOVE_SPEED_FACTOR;isPlayerTwoAI&&selectedGameMode===_0x63c38(0x1b6)&&currentPlayer===0x2&&(_0x2f1820=ship[_0x63c38(0x184)]*(AI_POSITION_MOVE_SPEED_FACTOR*1.15));Math[_0x63c38(0xfd)](_0x67b5c8)>AI_MOVEMENT_DEADZONE&&(ship['x']+=Math[_0x63c38(0x13e)](_0x67b5c8)*Math[_0x63c38(0xdb)](Math[_0x63c38(0xfd)](_0x67b5c8),_0x2f1820));const _0x49e800=ship[_0x63c38(0x1c2)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship['x']=Math[_0x63c38(0x1e0)](0x0,Math[_0x63c38(0xdb)](gameCanvas[_0x63c38(0x1c2)]-_0x49e800,ship['x']));}}}}}if(isTwoPlayerMode&&selectedGameMode===_0x63c38(0x109)){if(isPlayer1WaitingForRespawn&&_0x4e22cd>=player1RespawnTime)isPlayer1WaitingForRespawn=![];if(isPlayer1Invincible&&_0x4e22cd>=player1InvincibilityEndTime)isPlayer1Invincible=![];if(isPlayer2WaitingForRespawn&&_0x4e22cd>=player2RespawnTime)isPlayer2WaitingForRespawn=![];if(isPlayer2Invincible&&_0x4e22cd>=player2InvincibilityEndTime)isPlayer2Invincible=![];}else{if(isWaitingForRespawn&&_0x4e22cd>=respawnTime)isWaitingForRespawn=![];if(isInvincible&&_0x4e22cd>=invincibilityEndTime)isInvincible=![];}for(let _0x42c9e8=bullets[_0x63c38(0xdd)]-0x1;_0x42c9e8>=0x0;_0x42c9e8--){const _0x11d3e0=bullets[_0x42c9e8];if(!_0x11d3e0){bullets[_0x63c38(0xe3)](_0x42c9e8,0x1);continue;}_0x11d3e0['y']-=_0x11d3e0[_0x63c38(0x184)];if(_0x11d3e0['y']+PLAYER_BULLET_HEIGHT<0x0){bullets[_0x63c38(0xe3)](_0x42c9e8,0x1);continue;}for(let _0x193056=enemies['length']-0x1;_0x193056>=0x0;_0x193056--){const _0x9477c6=enemies[_0x193056];if(!_0x9477c6){enemies[_0x63c38(0xe3)](_0x193056,0x1);continue;}const _0x2c846b={'x':_0x9477c6['x'],'y':_0x9477c6['y'],'width':_0x9477c6['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x9477c6[_0x63c38(0x113)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,'height':_0x9477c6['type']===ENEMY3_TYPE?BOSS_HEIGHT:_0x9477c6['type']===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT},_0x50f7e9={'x':_0x11d3e0['x'],'y':_0x11d3e0['y'],'width':_0x11d3e0['width'],'height':_0x11d3e0[_0x63c38(0x16a)]};if(checkCollision(_0x50f7e9,_0x2c846b)){bullets[_0x63c38(0xe3)](_0x42c9e8,0x1);const _0x96c314=handleEnemyHit(_0x9477c6,_0x11d3e0[_0x63c38(0x1b9)]);if(_0x96c314[_0x63c38(0x145)])enemies[_0x63c38(0xe3)](_0x193056,0x1);break;}}}for(let _0x4eee44=enemyBullets[_0x63c38(0xdd)]-0x1;_0x4eee44>=0x0;_0x4eee44--){const _0x5a5b8b=enemyBullets[_0x4eee44];if(!_0x5a5b8b){enemyBullets['splice'](_0x4eee44,0x1);continue;}_0x5a5b8b['x']+=_0x5a5b8b['vx'],_0x5a5b8b['y']+=_0x5a5b8b['vy'],(_0x5a5b8b['y']>gameCanvas[_0x63c38(0x16a)]||_0x5a5b8b['y']<-ENEMY_BULLET_HEIGHT||_0x5a5b8b['x']<-ENEMY_BULLET_WIDTH||_0x5a5b8b['x']>gameCanvas[_0x63c38(0x1c2)])&&enemyBullets[_0x63c38(0xe3)](_0x4eee44,0x1);}const _0x13f05d=gameCanvas?gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4,_0xad430b=0x2;for(let _0x857ebd=fallingShips[_0x63c38(0xdd)]-0x1;_0x857ebd>=0x0;_0x857ebd--){const _0x565b5f=fallingShips[_0x857ebd];if(!_0x565b5f){fallingShips[_0x63c38(0xe3)](_0x857ebd,0x1);continue;}let _0x5c44f2=![];if(!_0x565b5f[_0x63c38(0x175)]){_0x565b5f['y']+=FALLING_SHIP_SPEED;if(_0x565b5f['y']>=_0x13f05d){_0x565b5f['y']=_0x13f05d,_0x565b5f[_0x63c38(0x175)]=!![],_0x565b5f[_0x63c38(0x193)]=_0x4e22cd;!_0x565b5f['rotationCompleted']&&(_0x565b5f[_0x63c38(0x1bd)]=0x0,_0x565b5f[_0x63c38(0x11f)]=!![]);let _0x33cae0=null,_0x574538=()=>{},_0x5b87a0=![],_0x4415a4=![],_0x3fb270=![],_0x12e2a6=null;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(_0x565b5f[_0x63c38(0xb8)]===_0x63c38(0x179)&&ship1&&player1Lives>0x0)_0x33cae0=ship1,_0x5b87a0=player1IsDualShipActive,_0x574538=()=>{player1IsDualShipActive=!![];},_0x3fb270=!![],_0x12e2a6='player1';else(_0x565b5f[_0x63c38(0xb8)]===_0x63c38(0x12c)||_0x565b5f[_0x63c38(0xb8)]==='ai_p2')&&ship2&&player2Lives>0x0&&(_0x33cae0=ship2,_0x5b87a0=player2IsDualShipActive,_0x574538=()=>{player2IsDualShipActive=!![];},_0x3fb270=!![],_0x12e2a6=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x63c38(0x17e)?'ai_p2':_0x63c38(0x12c));}else{if(isTwoPlayerMode&&selectedGameMode===_0x63c38(0x109)){if(_0x565b5f[_0x63c38(0xb8)]===_0x63c38(0x179)&&ship1&&player1Lives>0x0)_0x33cae0=ship1,_0x5b87a0=player1IsDualShipActive,_0x4415a4=isPlayer1ShipCaptured,_0x574538=()=>{player1IsDualShipActive=!![],isPlayer1ShipCaptured=![];},_0x3fb270=!![],_0x12e2a6=_0x63c38(0x179);else _0x565b5f['targetPlayerId']==='player2'&&ship2&&player2Lives>0x0&&(_0x33cae0=ship2,_0x5b87a0=player2IsDualShipActive,_0x4415a4=isPlayer2ShipCaptured,_0x574538=()=>{player2IsDualShipActive=!![],isPlayer2ShipCaptured=![];},_0x3fb270=!![],_0x12e2a6=_0x63c38(0x12c));}else ship&&playerLives>0x0&&(_0x33cae0=ship,_0x5b87a0=isDualShipActive,_0x4415a4=isShipCaptured,_0x574538=()=>{isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode==='normal'){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}isShipCaptured=![];},_0x3fb270=!![],_0x12e2a6=isTwoPlayerMode&&selectedGameMode===_0x63c38(0x1b6)?String(currentPlayer):'player1');}if(_0x3fb270&&!_0x5b87a0){_0x574538(),playSound(dualShipSound);if(_0x4415a4&&!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')){if(_0x12e2a6===_0x63c38(0x179)&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x4e22cd+INVINCIBILITY_DURATION_MS;else{if(_0x12e2a6==='player2'&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x4e22cd+INVINCIBILITY_DURATION_MS;else ship&&(isInvincible=!![],invincibilityEndTime=_0x4e22cd+INVINCIBILITY_DURATION_MS);}}fallingShips[_0x63c38(0xe3)](_0x857ebd,0x1),_0x5c44f2=!![];continue;}else{if(_0x3fb270&&_0x5b87a0){fallingShips[_0x63c38(0xe3)](_0x857ebd,0x1),_0x5c44f2=!![];continue;}else{fallingShips[_0x63c38(0xe3)](_0x857ebd,0x1),_0x5c44f2=!![];continue;}}}}if(_0x5c44f2)continue;const _0x5e5899=_0x4e22cd-_0x565b5f[_0x63c38(0xcd)];if(_0x5e5899<FALLING_SHIP_FADE_DURATION_MS)_0x565b5f[_0x63c38(0x15a)]=Math[_0x63c38(0x1e0)](0x0,0x1-_0x5e5899/FALLING_SHIP_FADE_DURATION_MS);else _0x565b5f['tintProgress']=0x0;if(_0x565b5f[_0x63c38(0x11f)])_0x565b5f[_0x63c38(0x1bd)]=0x0;else{if(!_0x565b5f['landed']&&typeof _0x565b5f[_0x63c38(0xf2)]===_0x63c38(0x178)&&typeof FALLING_SHIP_ROTATION_SPEED===_0x63c38(0x178)&&FALLING_SHIP_ROTATION_SPEED>0x0){const _0x2c26a9=FALLING_SHIP_ROTATION_SPEED*_0x565b5f[_0x63c38(0xf2)];_0x565b5f[_0x63c38(0x1bd)]+=_0x2c26a9,_0x565b5f[_0x63c38(0x1a9)]+=Math[_0x63c38(0xfd)](_0x2c26a9);if(_0x565b5f[_0x63c38(0x1a9)]>=_0xad430b*0x2*Math['PI'])_0x565b5f[_0x63c38(0x1bd)]=0x0,_0x565b5f[_0x63c38(0x11f)]=!![];else{if(_0x565b5f['rotation']>Math['PI']*0x2)_0x565b5f[_0x63c38(0x1bd)]-=Math['PI']*0x2;if(_0x565b5f['rotation']<0x0)_0x565b5f[_0x63c38(0x1bd)]+=Math['PI']*0x2;}}else _0x565b5f[_0x63c38(0x1bd)]=_0x565b5f[_0x63c38(0x1bd)]||0x0;}if(!_0x565b5f['landed']){let _0x1114a0=null,_0x3b7196=()=>{},_0x357360=0x0,_0x58a038=![],_0x1454cd=![];if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x63c38(0x17e)){if(_0x565b5f[_0x63c38(0xb8)]===_0x63c38(0x179)&&ship1&&player1Lives>0x0)_0x1114a0=ship1,_0x1454cd=player1IsDualShipActive,_0x3b7196=()=>{if(!_0x1454cd)player1IsDualShipActive=!![];},_0x357360=0x1;else(_0x565b5f[_0x63c38(0xb8)]===_0x63c38(0x12c)||_0x565b5f[_0x63c38(0xb8)]===_0x63c38(0x162))&&ship2&&player2Lives>0x0&&(_0x1114a0=ship2,_0x1454cd=player2IsDualShipActive,_0x3b7196=()=>{if(!_0x1454cd)player2IsDualShipActive=!![];},_0x357360=0x2);}else{if(isTwoPlayerMode&&selectedGameMode===_0x63c38(0x109)){if(_0x565b5f['targetPlayerId']==='player1'&&ship1&&player1Lives>0x0)_0x1114a0=ship1,_0x58a038=isPlayer1ShipCaptured,_0x1454cd=player1IsDualShipActive,_0x3b7196=()=>{if(!_0x1454cd)player1IsDualShipActive=!![];isPlayer1ShipCaptured=![];},_0x357360=0x1;else _0x565b5f[_0x63c38(0xb8)]===_0x63c38(0x12c)&&ship2&&player2Lives>0x0&&(_0x1114a0=ship2,_0x58a038=isPlayer2ShipCaptured,_0x1454cd=player2IsDualShipActive,_0x3b7196=()=>{if(!_0x1454cd)player2IsDualShipActive=!![];isPlayer2ShipCaptured=![];},_0x357360=0x2);}else ship&&playerLives>0x0&&(_0x1114a0=ship,_0x58a038=isShipCaptured,_0x1454cd=isDualShipActive,_0x3b7196=()=>{const _0x5e4365=_0x63c38;if(!_0x1454cd){isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode===_0x5e4365(0x1b6)){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}}isShipCaptured=![];},_0x357360=isTwoPlayerMode&&selectedGameMode===_0x63c38(0x1b6)?currentPlayer:0x1);}if(_0x1114a0&&!_0x1454cd){const _0xe06fe6={'x':_0x565b5f['x'],'y':_0x565b5f['y'],'width':_0x565b5f[_0x63c38(0x1c2)],'height':_0x565b5f[_0x63c38(0x16a)]},_0x362211={'x':_0x1114a0['x'],'y':_0x1114a0['y'],'width':_0x1114a0[_0x63c38(0x1c2)],'height':_0x1114a0[_0x63c38(0x16a)]};if(checkCollision(_0xe06fe6,_0x362211)){_0x3b7196();if(_0x58a038&&!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')){playSound(dualShipSound);if(_0x357360===0x1&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x4e22cd+INVINCIBILITY_DURATION_MS;else{if(_0x357360===0x2&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x4e22cd+INVINCIBILITY_DURATION_MS;else _0x357360!==0x0&&ship&&(isInvincible=!![],invincibilityEndTime=_0x4e22cd+INVINCIBILITY_DURATION_MS);}}else playSound(dualShipSound);fallingShips[_0x63c38(0xe3)](_0x857ebd,0x1);continue;}}}if(!_0x565b5f['landed']&&_0x565b5f['y']>=gameCanvas[_0x63c38(0x16a)])fallingShips[_0x63c38(0xe3)](_0x857ebd,0x1);}let _0x47c8a7=0x0;const _0x2b0ee8=enemies[_0x63c38(0x15b)](_0x2f7846=>_0x2f7846?.[_0x63c38(0x110)]===_0x63c38(0xe9)),_0x3b9f1e=!isChallengingStage&&!isWaveTransitioning&&_0x2b0ee8&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x63c38(0x109)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage));if(_0x3b9f1e){!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound));const _0x38d06b=enemies[_0x63c38(0xdc)](_0x4e4b37=>_0x4e4b37?.[_0x63c38(0x110)]===_0x63c38(0xe9));if(_0x38d06b[_0x63c38(0xdd)]>0x0){let _0xd62cb5=gameCanvas[_0x63c38(0x1c2)],_0xe779ab=0x0;_0x38d06b[_0x63c38(0x1a7)](_0x33efa3=>{const _0x5e9b9c=_0x63c38;_0x33efa3&&(_0xd62cb5=Math['min'](_0xd62cb5,_0x33efa3['x']),_0xe779ab=Math[_0x5e9b9c(0x1e0)](_0xe779ab,_0x33efa3['x']+_0x33efa3[_0x5e9b9c(0x1c2)]));});const _0x53821c=gameCanvas[_0x63c38(0x1c2)]*GRID_HORIZONTAL_MARGIN_PERCENT,_0x463dd2=gameCanvas[_0x63c38(0x1c2)]*(0x1-GRID_HORIZONTAL_MARGIN_PERCENT);if(gridMoveDirection===0x1&&_0xe779ab>=_0x463dd2)gridMoveDirection=-0x1;else{if(gridMoveDirection===-0x1&&_0xd62cb5<=_0x53821c)gridMoveDirection=0x1;}const _0x2b6d32=scaleValue(level,BASE_GRID_MOVE_SPEED,MAX_GRID_MOVE_SPEED);_0x47c8a7=_0x2b6d32*gridMoveDirection,currentGridOffsetX+=_0x47c8a7,enemies[_0x63c38(0x1a7)](_0x31138d=>{const _0x25f079=_0x63c38;if(_0x31138d&&(_0x31138d['state']==='returning'||_0x31138d[_0x25f079(0x110)]===_0x25f079(0xe9)||_0x31138d[_0x25f079(0x110)]===_0x25f079(0xba)))try{const _0x33193e=_0x31138d[_0x25f079(0x113)]===ENEMY3_TYPE?BOSS_WIDTH:_0x31138d[_0x25f079(0x113)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x365db4,y:_0x275d50}=getCurrentGridSlotPosition(_0x31138d[_0x25f079(0x1d6)],_0x31138d[_0x25f079(0x1dd)],_0x33193e);_0x31138d[_0x25f079(0x15e)]=_0x365db4,_0x31138d[_0x25f079(0x19a)]=_0x275d50;}catch(_0x50f403){console[_0x25f079(0x1c5)](_0x25f079(0x14c)+_0x31138d?.['id']+_0x25f079(0x1a8)+_0x31138d?.[_0x25f079(0x110)]+_0x25f079(0xe1),_0x50f403);}});}}else isGridSoundPlaying&&(stopSound(gridBackgroundSound),isGridSoundPlaying=![]),_0x47c8a7=0x0;for(let _0x1d8bdb=enemies[_0x63c38(0xdd)]-0x1;_0x1d8bdb>=0x0;_0x1d8bdb--){let _0x4545b0=enemies[_0x1d8bdb];if(!_0x4545b0){enemies[_0x63c38(0xe3)](_0x1d8bdb,0x1);continue;}const _0x202cd2=_0x4545b0['id'];if(_0x4545b0['capturePrepareTimeout']&&_0x4545b0[_0x63c38(0x110)]!==_0x63c38(0x139)){clearTimeout(_0x4545b0[_0x63c38(0x1b2)]);const _0x646949=enemySpawnTimeouts[_0x63c38(0xea)](_0x4545b0[_0x63c38(0x1b2)]);if(_0x646949>-0x1)enemySpawnTimeouts[_0x63c38(0xe3)](_0x646949,0x1);_0x4545b0[_0x63c38(0x1b2)]=null;}const _0x553499=_0x4545b0[_0x63c38(0x113)]===ENEMY3_TYPE?BOSS_WIDTH:_0x4545b0[_0x63c38(0x113)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x4fd46b=_0x4545b0[_0x63c38(0x113)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x4545b0[_0x63c38(0x113)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT;switch(_0x4545b0[_0x63c38(0x110)]){case'following_bezier_path':{let _0x1a7ba7=CS_ENTRANCE_PATH_SPEED;const _0x4abb34=_0x4545b0[_0x63c38(0xd3)]||0x1;_0x1a7ba7*=_0x4abb34;if(!isChallengingStage){enemies[_0x63c38(0xe3)](_0x1d8bdb,0x1),_0x4545b0=null;break;}let _0x1da3a3=challengingStagePaths,_0x9565c4=_0x1da3a3[_0x4545b0[_0x63c38(0xee)]];if(!_0x9565c4||_0x4545b0[_0x63c38(0x13b)]>=_0x9565c4[_0x63c38(0xdd)]){enemies[_0x63c38(0xe3)](_0x1d8bdb,0x1),_0x4545b0=null;break;}const _0x569e50=_0x9565c4[_0x4545b0[_0x63c38(0x13b)]];if(!_0x569e50||!_0x569e50['p0']||!_0x569e50['p1']||!_0x569e50['p2']||!_0x569e50['p3']){console[_0x63c38(0x1c5)](_0x63c38(0x173)+_0x4545b0[_0x63c38(0x13b)]+_0x63c38(0x16c)+_0x4545b0[_0x63c38(0xee)]+_0x63c38(0x198)+_0x4545b0['id']),enemies[_0x63c38(0xe3)](_0x1d8bdb,0x1),_0x4545b0=null;break;}_0x4545b0[_0x63c38(0x1d9)]+=_0x1a7ba7;let _0x57e2d5,_0x14bcc9,_0x28e485=_0x4545b0['x'],_0x2862ea=_0x4545b0['y'];if(_0x4545b0['pathT']>=0x1){_0x4545b0[_0x63c38(0x1d9)]=0x0,_0x4545b0[_0x63c38(0x13b)]++;if(_0x4545b0[_0x63c38(0x13b)]>=_0x9565c4[_0x63c38(0xdd)])enemies[_0x63c38(0xe3)](_0x1d8bdb,0x1),_0x4545b0=null;else{const _0x3b163d=_0x9565c4[_0x4545b0[_0x63c38(0x13b)]];_0x3b163d?.['p0']?(_0x57e2d5=_0x3b163d['p0']['x'],_0x14bcc9=_0x3b163d['p0']['y']):(console[_0x63c38(0x1c5)]('Invalid\x20next\x20CS\x20Bezier\x20segment\x20'+_0x4545b0[_0x63c38(0x13b)]+_0x63c38(0x16c)+_0x4545b0[_0x63c38(0xee)]+_0x63c38(0x198)+_0x202cd2),enemies[_0x63c38(0xe3)](_0x1d8bdb,0x1),_0x4545b0=null);}}else try{_0x57e2d5=calculateBezierPoint(_0x4545b0[_0x63c38(0x1d9)],_0x569e50['p0']['x'],_0x569e50['p1']['x'],_0x569e50['p2']['x'],_0x569e50['p3']['x']),_0x14bcc9=calculateBezierPoint(_0x4545b0[_0x63c38(0x1d9)],_0x569e50['p0']['y'],_0x569e50['p1']['y'],_0x569e50['p2']['y'],_0x569e50['p3']['y']);}catch(_0x45e8b3){console[_0x63c38(0x1c5)]('Error\x20calculating\x20CS\x20Bezier\x20point\x20for\x20enemy\x20'+_0x202cd2+':',_0x45e8b3),enemies['splice'](_0x1d8bdb,0x1),_0x4545b0=null;}_0x4545b0&&(isNaN(_0x57e2d5)||isNaN(_0x14bcc9)?(console[_0x63c38(0x1c5)](_0x63c38(0xda)+_0x202cd2+'.\x20Removing.'),enemies[_0x63c38(0xe3)](_0x1d8bdb,0x1),_0x4545b0=null):(_0x4545b0['velocityX']=_0x57e2d5-_0x28e485,_0x4545b0[_0x63c38(0xd0)]=_0x14bcc9-_0x2862ea,_0x4545b0['x']=_0x57e2d5,_0x4545b0['y']=_0x14bcc9));break;}case'following_entrance_path':{if(isChallengingStage){enemies['splice'](_0x1d8bdb,0x1),_0x4545b0=null;break;}let _0x3fe9e7=normalWaveEntrancePaths,_0x40db66=_0x3fe9e7[_0x4545b0[_0x63c38(0xee)]],_0x57a4e0;_0x4545b0[_0x63c38(0xee)]===_0x63c38(0x188)||_0x4545b0[_0x63c38(0xee)]===_0x63c38(0x10c)?_0x57a4e0=BOSS_LOOP_ENTRANCE_PATH_SPEED:_0x57a4e0=NORMAL_ENTRANCE_PATH_SPEED;if(!_0x40db66){console[_0x63c38(0xc1)](_0x63c38(0x163)+_0x202cd2+'\x20missing\x20SHARED\x20path\x20'+_0x4545b0['entrancePathId']+_0x63c38(0x130));try{_0x4545b0[_0x63c38(0x15e)]=_0x4545b0[_0x63c38(0x15e)]??gameCanvas[_0x63c38(0x1c2)]/0x2,_0x4545b0[_0x63c38(0x19a)]=_0x4545b0['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x5e2859){console[_0x63c38(0x1c5)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x202cd2+'\x20after\x20missing\x20path',_0x5e2859),_0x4545b0[_0x63c38(0x15e)]=gameCanvas['width']/0x2,_0x4545b0[_0x63c38(0x19a)]=ENEMY_TOP_MARGIN;}_0x4545b0[_0x63c38(0x110)]=_0x63c38(0xba),_0x4545b0['pathT']=0x0,_0x4545b0[_0x63c38(0x13b)]=0x0,_0x4545b0[_0x63c38(0x153)]=0x0,_0x4545b0['velocityY']=0x0;_0x4545b0[_0x63c38(0x1b8)]!==undefined&&squadronCompletionStatus[_0x4545b0[_0x63c38(0x1b8)]]&&squadronCompletionStatus[_0x4545b0[_0x63c38(0x1b8)]]['completed']++;break;}if(_0x4545b0[_0x63c38(0x13b)]>=_0x40db66[_0x63c38(0xdd)]){console[_0x63c38(0xc1)](_0x63c38(0x163)+_0x202cd2+'\x20path\x20index\x20'+_0x4545b0['pathSegmentIndex']+'\x20out\x20of\x20bounds\x20for\x20SHARED\x20path\x20'+_0x4545b0['entrancePathId']+'.\x20Switching\x20to\x20moving_to_grid.');try{_0x4545b0['targetGridX']=_0x4545b0[_0x63c38(0x15e)]??gameCanvas['width']/0x2,_0x4545b0['targetGridY']=_0x4545b0[_0x63c38(0x19a)]??ENEMY_TOP_MARGIN;}catch(_0x29eceb){console[_0x63c38(0x1c5)](_0x63c38(0xc4)+_0x202cd2+'\x20after\x20invalid\x20path\x20index',_0x29eceb),_0x4545b0[_0x63c38(0x15e)]=gameCanvas[_0x63c38(0x1c2)]/0x2,_0x4545b0[_0x63c38(0x19a)]=ENEMY_TOP_MARGIN;}_0x4545b0[_0x63c38(0x110)]='moving_to_grid',_0x4545b0[_0x63c38(0x1d9)]=0x0,_0x4545b0[_0x63c38(0x13b)]=0x0,_0x4545b0[_0x63c38(0x153)]=0x0,_0x4545b0[_0x63c38(0xd0)]=0x0;_0x4545b0[_0x63c38(0x1b8)]!==undefined&&squadronCompletionStatus[_0x4545b0[_0x63c38(0x1b8)]]&&squadronCompletionStatus[_0x4545b0[_0x63c38(0x1b8)]][_0x63c38(0x1d2)]++;break;}const _0x5dced4=_0x40db66[_0x4545b0['pathSegmentIndex']];if(!_0x5dced4||!_0x5dced4['p0']||!_0x5dced4['p1']||!_0x5dced4['p2']||!_0x5dced4['p3']){console[_0x63c38(0x1c5)](_0x63c38(0x1a5)+_0x4545b0['pathSegmentIndex']+'\x20for\x20SHARED\x20path\x20'+_0x4545b0[_0x63c38(0xee)]+'.\x20Enemy\x20'+_0x202cd2+_0x63c38(0x130));try{_0x4545b0[_0x63c38(0x15e)]=_0x4545b0[_0x63c38(0x15e)]??gameCanvas['width']/0x2,_0x4545b0[_0x63c38(0x19a)]=_0x4545b0[_0x63c38(0x19a)]??ENEMY_TOP_MARGIN+_0x4545b0[_0x63c38(0x1d6)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}catch(_0x21ecc6){console[_0x63c38(0x1c5)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x202cd2+_0x63c38(0x1bf),_0x21ecc6),_0x4545b0['targetGridX']=gameCanvas[_0x63c38(0x1c2)]/0x2,_0x4545b0[_0x63c38(0x19a)]=ENEMY_TOP_MARGIN;}_0x4545b0[_0x63c38(0x110)]=_0x63c38(0xba),_0x4545b0[_0x63c38(0x1d9)]=0x0,_0x4545b0[_0x63c38(0x13b)]=0x0,_0x4545b0[_0x63c38(0x153)]=0x0,_0x4545b0[_0x63c38(0xd0)]=0x0;_0x4545b0['squadronId']!==undefined&&squadronCompletionStatus[_0x4545b0[_0x63c38(0x1b8)]]&&squadronCompletionStatus[_0x4545b0[_0x63c38(0x1b8)]][_0x63c38(0x1d2)]++;break;}_0x4545b0['pathT']+=_0x57a4e0;let _0x4d39d3,_0x16dfba,_0x5355a8=_0x4545b0['x'],_0x4f3c3b=_0x4545b0['y'];if(_0x4545b0[_0x63c38(0x1d9)]>=0x1){_0x4545b0[_0x63c38(0x1d9)]=0x0,_0x4545b0[_0x63c38(0x13b)]++;if(_0x4545b0[_0x63c38(0x13b)]>=_0x40db66['length']){let _0x12abef,_0x49ad76;try{_0x12abef=calculateBezierPoint(0x1,_0x5dced4['p0']['x'],_0x5dced4['p1']['x'],_0x5dced4['p2']['x'],_0x5dced4['p3']['x']),_0x49ad76=calculateBezierPoint(0x1,_0x5dced4['p0']['y'],_0x5dced4['p1']['y'],_0x5dced4['p2']['y'],_0x5dced4['p3']['y']);}catch(_0x47aef5){console[_0x63c38(0x1c5)](_0x63c38(0x1dc)+_0x202cd2+'\x20at\x20end\x20of\x20normal\x20path\x20'+_0x4545b0['entrancePathId'],_0x47aef5),_0x12abef=_0x5dced4['p3']['x'],_0x49ad76=_0x5dced4['p3']['y'];}_0x4545b0['x']=_0x12abef,_0x4545b0['y']=_0x49ad76;try{_0x4545b0[_0x63c38(0x15e)]=_0x4545b0[_0x63c38(0x15e)]??gameCanvas[_0x63c38(0x1c2)]/0x2,_0x4545b0['targetGridY']=_0x4545b0['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x5be628){console['error']('Error\x20getting\x20target\x20grid\x20pos\x20for\x20'+_0x202cd2+'\x20at\x20end\x20of\x20normal\x20path\x20'+_0x4545b0['entrancePathId'],_0x5be628),_0x4545b0[_0x63c38(0x15e)]=_0x4545b0['x'],_0x4545b0[_0x63c38(0x19a)]=ENEMY_TOP_MARGIN+_0x4545b0[_0x63c38(0x1d6)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x3cf61b=_0x4545b0[_0x63c38(0x110)];_0x4545b0[_0x63c38(0x110)]=_0x63c38(0xba),_0x4545b0[_0x63c38(0x153)]=0x0,_0x4545b0[_0x63c38(0xd0)]=0x0,_0x4545b0[_0x63c38(0x13b)]=0x0;_0x3cf61b===_0x63c38(0x183)&&_0x4545b0['squadronId']!==undefined&&squadronCompletionStatus[_0x4545b0[_0x63c38(0x1b8)]]&&squadronCompletionStatus[_0x4545b0[_0x63c38(0x1b8)]]['completed']++;break;}else{const _0x39f517=_0x40db66[_0x4545b0['pathSegmentIndex']];if(_0x39f517?.['p0'])_0x4d39d3=_0x39f517['p0']['x'],_0x16dfba=_0x39f517['p0']['y'];else{console[_0x63c38(0x1c5)](_0x63c38(0x19d)+_0x4545b0[_0x63c38(0x13b)]+_0x63c38(0x160)+_0x4545b0[_0x63c38(0xee)]+_0x63c38(0x198)+_0x202cd2+'.\x20Switching\x20to\x20moving_to_grid.');try{_0x4545b0[_0x63c38(0x15e)]=_0x4545b0[_0x63c38(0x15e)]??gameCanvas[_0x63c38(0x1c2)]/0x2,_0x4545b0['targetGridY']=_0x4545b0[_0x63c38(0x19a)]??ENEMY_TOP_MARGIN;}catch(_0x59fe3e){console[_0x63c38(0x1c5)](_0x63c38(0xc4)+_0x202cd2+'\x20after\x20bad\x20next\x20segment',_0x59fe3e),_0x4545b0[_0x63c38(0x15e)]=gameCanvas[_0x63c38(0x1c2)]/0x2,_0x4545b0[_0x63c38(0x19a)]=ENEMY_TOP_MARGIN;}_0x4545b0[_0x63c38(0x110)]=_0x63c38(0xba),_0x4545b0[_0x63c38(0x1d9)]=0x0,_0x4545b0['pathSegmentIndex']=0x0,_0x4545b0[_0x63c38(0x153)]=0x0,_0x4545b0[_0x63c38(0xd0)]=0x0;_0x4545b0[_0x63c38(0x1b8)]!==undefined&&squadronCompletionStatus[_0x4545b0[_0x63c38(0x1b8)]]&&squadronCompletionStatus[_0x4545b0['squadronId']][_0x63c38(0x1d2)]++;break;}}}else try{_0x4d39d3=calculateBezierPoint(_0x4545b0[_0x63c38(0x1d9)],_0x5dced4['p0']['x'],_0x5dced4['p1']['x'],_0x5dced4['p2']['x'],_0x5dced4['p3']['x']),_0x16dfba=calculateBezierPoint(_0x4545b0[_0x63c38(0x1d9)],_0x5dced4['p0']['y'],_0x5dced4['p1']['y'],_0x5dced4['p2']['y'],_0x5dced4['p3']['y']);}catch(_0x4e103d){console[_0x63c38(0x1c5)](_0x63c38(0xc6)+_0x202cd2+':',_0x4e103d);try{_0x4545b0[_0x63c38(0x15e)]=_0x4545b0[_0x63c38(0x15e)]??gameCanvas[_0x63c38(0x1c2)]/0x2,_0x4545b0['targetGridY']=_0x4545b0[_0x63c38(0x19a)]??ENEMY_TOP_MARGIN;}catch(_0x37e36e){console[_0x63c38(0x1c5)](_0x63c38(0xc4)+_0x202cd2+'\x20after\x20bezier\x20error',_0x37e36e),_0x4545b0[_0x63c38(0x15e)]=gameCanvas['width']/0x2,_0x4545b0[_0x63c38(0x19a)]=ENEMY_TOP_MARGIN;}_0x4545b0[_0x63c38(0x110)]=_0x63c38(0xba),_0x4545b0[_0x63c38(0x1d9)]=0x0,_0x4545b0[_0x63c38(0x13b)]=0x0,_0x4545b0[_0x63c38(0x153)]=0x0,_0x4545b0['velocityY']=0x0;_0x4545b0[_0x63c38(0x1b8)]!==undefined&&squadronCompletionStatus[_0x4545b0[_0x63c38(0x1b8)]]&&squadronCompletionStatus[_0x4545b0['squadronId']][_0x63c38(0x1d2)]++;break;}if(_0x4545b0&&_0x4545b0[_0x63c38(0x110)]===_0x63c38(0x183)){if(isNaN(_0x4d39d3)||isNaN(_0x16dfba)){console[_0x63c38(0x1c5)](_0x63c38(0x10b)+_0x202cd2+_0x63c38(0x130));try{_0x4545b0[_0x63c38(0x15e)]=_0x4545b0['targetGridX']??gameCanvas['width']/0x2,_0x4545b0[_0x63c38(0x19a)]=_0x4545b0[_0x63c38(0x19a)]??ENEMY_TOP_MARGIN;}catch(_0x24dd53){console[_0x63c38(0x1c5)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x202cd2+'\x20after\x20NaN',_0x24dd53),_0x4545b0[_0x63c38(0x15e)]=gameCanvas[_0x63c38(0x1c2)]/0x2,_0x4545b0[_0x63c38(0x19a)]=ENEMY_TOP_MARGIN;}_0x4545b0[_0x63c38(0x110)]=_0x63c38(0xba),_0x4545b0[_0x63c38(0x1d9)]=0x0,_0x4545b0[_0x63c38(0x13b)]=0x0,_0x4545b0['velocityX']=0x0,_0x4545b0[_0x63c38(0xd0)]=0x0,_0x4545b0[_0x63c38(0x1b8)]!==undefined&&squadronCompletionStatus[_0x4545b0[_0x63c38(0x1b8)]]&&squadronCompletionStatus[_0x4545b0[_0x63c38(0x1b8)]][_0x63c38(0x1d2)]++;}else{let _0x325955=_0x4d39d3;const _0x5c4d1e=currentWavePatternIndex===0x1&&(_0x4545b0[_0x63c38(0x1b8)]===0x2||_0x4545b0[_0x63c38(0x1b8)]===0x3),_0x57d9b8=typeof _0x4545b0[_0x63c38(0x108)]===_0x63c38(0x178)&&_0x4545b0[_0x63c38(0x108)]%0x2!==0x0;if(_0x5c4d1e&&_0x57d9b8){const _0x2785df=_0x553499+ENTRANCE_PAIR_HORIZONTAL_GAP;_0x325955=_0x4d39d3+_0x2785df;}_0x4545b0[_0x63c38(0x153)]=_0x325955-_0x5355a8,_0x4545b0[_0x63c38(0xd0)]=_0x16dfba-_0x4f3c3b,_0x4545b0['x']=_0x325955,_0x4545b0['y']=_0x16dfba;}}break;}case _0x63c38(0xba):{if(_0x4545b0[_0x63c38(0x15e)]==null||_0x4545b0[_0x63c38(0x19a)]==null){console[_0x63c38(0xc1)]('Enemy\x20'+_0x202cd2+'\x20in\x20moving_to_grid\x20state\x20without\x20target.\x20Recalculating.');try{const {x:_0x269f0f,y:_0x256fe5}=getCurrentGridSlotPosition(_0x4545b0['gridRow'],_0x4545b0[_0x63c38(0x1dd)],_0x553499);_0x4545b0[_0x63c38(0x15e)]=_0x269f0f,_0x4545b0[_0x63c38(0x19a)]=_0x256fe5;}catch(_0x393b40){console[_0x63c38(0x1c5)](_0x63c38(0xc4)+_0x202cd2+_0x63c38(0x11c),_0x393b40),_0x4545b0[_0x63c38(0x110)]=_0x63c38(0xe9),_0x4545b0['x']=gameCanvas[_0x63c38(0x1c2)]/0x2,_0x4545b0['y']=ENEMY_TOP_MARGIN;break;}}const _0x27edce=_0x4545b0[_0x63c38(0x15e)],_0x47cc65=_0x4545b0[_0x63c38(0x19a)],_0xc38479=_0x27edce-_0x4545b0['x'],_0x1a0d21=_0x47cc65-_0x4545b0['y'],_0x2a4323=Math['sqrt'](_0xc38479*_0xc38479+_0x1a0d21*_0x1a0d21),_0x56ac6e=ENTRANCE_SPEED*1.2,_0x2aa653=_0x56ac6e*0.5;if(_0x2a4323>_0x2aa653)_0x4545b0[_0x63c38(0x153)]=_0xc38479/_0x2a4323*_0x56ac6e,_0x4545b0[_0x63c38(0xd0)]=_0x1a0d21/_0x2a4323*_0x56ac6e,_0x4545b0['x']+=_0x4545b0['velocityX'],_0x4545b0['y']+=_0x4545b0[_0x63c38(0xd0)];else{_0x4545b0['x']=_0x27edce,_0x4545b0['y']=_0x47cc65,_0x4545b0[_0x63c38(0x153)]=0x0,_0x4545b0[_0x63c38(0xd0)]=0x0;const _0x48e3b1=_0x4545b0[_0x63c38(0x110)];_0x4545b0['state']=_0x63c38(0xe9),_0x4545b0['justReturned']=![];!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound));GRID_BREATH_ENABLED&&!isGridBreathingActive&&!isChallengingStage&&(isGridBreathingActive=!![],gridBreathStartTime=_0x4e22cd,currentGridBreathFactor=0x0);!firstEnemyLanded&&!isFullGridWave&&!isChallengingStage&&(lastGridFireCheckTime=Date['now'](),firstEnemyLanded=!![]);if(_0x48e3b1===_0x63c38(0xba)&&!isChallengingStage&&!isFullGridWave&&_0x4545b0[_0x63c38(0x1b8)]!==undefined){const _0x54fa21=_0x4545b0[_0x63c38(0x1b8)],_0xa70ab6=squadronCompletionStatus[_0x54fa21];if(_0xa70ab6&&!_0xa70ab6['hasFiredPostLanding']){const _0x328349=enemies[_0x63c38(0xbc)](_0x4a4c12=>{const _0x3f3d95=_0x63c38;if(_0x4a4c12&&_0x4a4c12[_0x3f3d95(0x1b8)]===_0x54fa21)return _0x4a4c12[_0x3f3d95(0x110)]===_0x3f3d95(0xe9)||!enemies[_0x3f3d95(0x15b)](_0x3214d7=>_0x3214d7['id']===_0x4a4c12['id']);return!![];});if(_0x328349){_0xa70ab6[_0x63c38(0x1a6)]=!![];const _0x56708e=enemies['filter'](_0xf7852e=>_0xf7852e&&_0xf7852e['squadronId']===_0x54fa21&&_0xf7852e[_0x63c38(0x110)]==='in_grid'&&(_0xf7852e[_0x63c38(0x113)]===ENEMY2_TYPE||_0xf7852e[_0x63c38(0x113)]===ENEMY3_TYPE)&&!(_0xf7852e[_0x63c38(0x113)]===ENEMY3_TYPE&&_0xf7852e[_0x63c38(0x192)]));if(_0x56708e[_0x63c38(0xdd)]>0x0){const _0x1f48be=_0x56708e[Math[_0x63c38(0x190)](Math[_0x63c38(0x132)]()*_0x56708e[_0x63c38(0xdd)])],_0xa6ad0b=_0x1f48be['id'],_0x1717f6=0xc8+Math[_0x63c38(0x132)]()*0x190,_0x35a8d=setTimeout(()=>{const _0x5cc6c7=_0x63c38;try{const _0x32247f=enemySpawnTimeouts['indexOf'](_0x35a8d);if(_0x32247f>-0x1)enemySpawnTimeouts['splice'](_0x32247f,0x1);if(isPaused||!isInGameState||playerLives<=0x0&&(!isTwoPlayerMode||player1Lives<=0x0&&player2Lives<=0x0)||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x1d6177=enemies[_0x5cc6c7(0x18e)](_0x1634c0=>_0x1634c0&&_0x1634c0['id']===_0xa6ad0b);_0x1d6177&&_0x1d6177[_0x5cc6c7(0x110)]===_0x5cc6c7(0xe9)&&(createBulletSimple(_0x1d6177)&&(playSound(enemyShootSound),_0x1d6177['lastFiredTime']=Date['now']()));}catch(_0x4703ce){console[_0x5cc6c7(0x1c5)]('Error\x20during\x20post-landing\x20fire\x20for\x20'+_0xa6ad0b+':',_0x4703ce);}},_0x1717f6);enemySpawnTimeouts[_0x63c38(0x157)](_0x35a8d);}}}}}break;}case _0x63c38(0xe9):{try{const _0x121a0c=_0x4545b0[_0x63c38(0x113)]===ENEMY3_TYPE?BOSS_WIDTH:_0x4545b0[_0x63c38(0x113)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x438b18,y:_0x375e94}=getCurrentGridSlotPosition(_0x4545b0[_0x63c38(0x1d6)],_0x4545b0['gridCol'],_0x121a0c);typeof _0x438b18==='number'&&!isNaN(_0x438b18)&&(_0x4545b0['x']=_0x438b18),typeof _0x375e94==='number'&&!isNaN(_0x375e94)&&(_0x4545b0['y']=_0x375e94),_0x4545b0[_0x63c38(0x15e)]=_0x438b18,_0x4545b0['targetGridY']=_0x375e94;}catch(_0x587f6d){console[_0x63c38(0x1c5)]('Error\x20getting\x20grid\x20pos\x20within\x20\x27in_grid\x27\x20for\x20'+_0x4545b0['id']+':',_0x587f6d);}_0x4545b0[_0x63c38(0x153)]=_0x3b9f1e?_0x47c8a7:0x0,_0x4545b0[_0x63c38(0xd0)]=0x0;_0x4545b0[_0x63c38(0x113)]===ENEMY3_TYPE&&_0x4545b0['hasCapturedShip']&&_0x4545b0['capturedShipDimensions']&&(_0x4545b0[_0x63c38(0x191)]=_0x4545b0['x']+CAPTURED_SHIP_OFFSET_X,_0x4545b0[_0x63c38(0x11d)]=_0x4545b0['y']+CAPTURED_SHIP_OFFSET_Y);break;}case _0x63c38(0xe5):{_0x4545b0[_0x63c38(0x153)]=0x0,_0x4545b0[_0x63c38(0xd0)]=0x0;break;}case _0x63c38(0x139):{_0x4545b0[_0x63c38(0x153)]=0x0,_0x4545b0[_0x63c38(0xd0)]=0x0;break;}case _0x63c38(0xe0):{let _0xb8e6de=isTwoPlayerMode&&selectedGameMode===_0x63c38(0x109)?isPlayer1ShipCaptured||isPlayer2ShipCaptured:isShipCaptured;if(_0xb8e6de){_0x4545b0['state']=_0x63c38(0xf4);try{const {x:_0x4ff67e,y:_0x583955}=getCurrentGridSlotPosition(_0x4545b0[_0x63c38(0x1d6)],_0x4545b0[_0x63c38(0x1dd)],_0x553499);_0x4545b0[_0x63c38(0x15e)]=_0x4ff67e,_0x4545b0[_0x63c38(0x19a)]=_0x583955;}catch(_0xeb651f){console['error'](_0x63c38(0xef)+_0x4545b0['id']+':',_0xeb651f),_0x4545b0[_0x63c38(0x15e)]=gameCanvas[_0x63c38(0x1c2)]/0x2,_0x4545b0['targetGridY']=ENEMY_TOP_MARGIN;}break;}const _0x256d64=_0x4545b0[_0x63c38(0x127)],_0x5edc03=_0x4545b0[_0x63c38(0x125)];if(_0x256d64==null||_0x5edc03==null){console[_0x63c38(0x1c5)](_0x63c38(0x1d3)+_0x4545b0['id']+_0x63c38(0xf1)),_0x4545b0['state']=_0x63c38(0xf4);try{const {x:_0x2e6292,y:_0x45afbe}=getCurrentGridSlotPosition(_0x4545b0[_0x63c38(0x1d6)],_0x4545b0[_0x63c38(0x1dd)],_0x553499);_0x4545b0[_0x63c38(0x15e)]=_0x2e6292,_0x4545b0[_0x63c38(0x19a)]=_0x45afbe;}catch(_0x58674b){console[_0x63c38(0x1c5)](_0x63c38(0xef)+_0x4545b0['id']+':',_0x58674b),_0x4545b0['targetGridX']=gameCanvas[_0x63c38(0x1c2)]/0x2,_0x4545b0[_0x63c38(0x19a)]=ENEMY_TOP_MARGIN;}break;}const _0x5a2629=_0x256d64-_0x4545b0['x'],_0xb81c34=_0x5edc03-_0x4545b0['y'],_0x144557=Math[_0x63c38(0x1d1)](_0x5a2629*_0x5a2629+_0xb81c34*_0xb81c34),_0x2123cf=BOSS_CAPTURE_DIVE_SPEED_FACTOR*BASE_ENEMY_ATTACK_SPEED,_0x3a1d2b=_0x2123cf*0.6;_0x144557>_0x3a1d2b?(_0x4545b0[_0x63c38(0x153)]=_0x5a2629/_0x144557*_0x2123cf,_0x4545b0[_0x63c38(0xd0)]=_0xb81c34/_0x144557*_0x2123cf,_0x4545b0['x']+=_0x4545b0[_0x63c38(0x153)],_0x4545b0['y']+=_0x4545b0[_0x63c38(0xd0)]):(_0x4545b0['x']=_0x256d64,_0x4545b0['y']=_0x5edc03,_0x4545b0[_0x63c38(0x153)]=0x0,_0x4545b0[_0x63c38(0xd0)]=0x0,_0x4545b0['state']=_0x63c38(0xf8),_0x4545b0[_0x63c38(0x17c)]=_0x4e22cd,capturingBossId=_0x4545b0['id'],captureBeamActive=!![],captureBeamSource={'x':_0x4545b0['x']+_0x553499/0x2,'y':_0x4545b0['y']+_0x4fd46b},captureBeamTargetY=_0x4545b0['y'],captureBeamProgress=0x0,playSound(captureSound),_0x4545b0[_0x63c38(0x104)]&&(captureAttemptMadeThisLevel=!![],delete _0x4545b0[_0x63c38(0x104)]));break;}case'capturing':{_0x4545b0[_0x63c38(0x153)]=0x0,_0x4545b0[_0x63c38(0xd0)]=0x0;_0x4545b0[_0x63c38(0x104)]&&!captureAttemptMadeThisLevel&&(captureAttemptMadeThisLevel=!![],delete _0x4545b0[_0x63c38(0x104)]);let _0x544d30=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x544d30=isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x4545b0['id']||isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x4545b0['id']:_0x544d30=isShipCaptured&&capturedBossIdWithMessage===_0x4545b0['id'];if(_0x544d30){captureBeamActive=![];if(capturingBossId===_0x4545b0['id'])capturingBossId=null;_0x4545b0[_0x63c38(0x110)]=_0x63c38(0xf4),stopSound(captureSound);break;}const _0x1a637d=_0x4e22cd-_0x4545b0[_0x63c38(0x17c)],_0x1063c7=CAPTURE_BEAM_ANIMATION_DURATION_MS/0x2,_0xdbee62=CAPTURE_BEAM_DURATION_MS;if(_0x1a637d<_0x1063c7)captureBeamProgress=_0x1a637d/_0x1063c7;else{if(_0x1a637d<_0xdbee62-_0x1063c7)captureBeamProgress=0x1;else{if(_0x1a637d<_0xdbee62)captureBeamProgress=0x1-(_0x1a637d-(_0xdbee62-_0x1063c7))/_0x1063c7;else{captureBeamProgress=0x0,captureBeamActive=![],capturingBossId=null,stopSound(captureSound),_0x4545b0[_0x63c38(0x110)]=_0x63c38(0xc2),_0x4545b0[_0x63c38(0x103)]=generateAttackPathInternal(_0x4545b0),_0x4545b0[_0x63c38(0xe7)]=0x0,_0x4545b0[_0x63c38(0x106)]=0x0,_0x4545b0[_0x63c38(0x184)]=BASE_ENEMY_ATTACK_SPEED*ENEMY3_ATTACK_SPEED_FACTOR,_0x4545b0[_0x63c38(0x18f)]=0x0,_0x4545b0[_0x63c38(0x1af)]=!![],_0x4545b0[_0x63c38(0x13f)]=0x0,_0x4545b0['attackGroupId']=null;break;}}}captureBeamProgress=Math['max'](0x0,Math['min'](0x1,captureBeamProgress));if(captureBeamActive&&captureBeamProgress>=0.95){const _0x559bda=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0xc2e894=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR,_0x558ffa=_0x4545b0['x']+_0x553499/0x2,_0x367862=_0x4545b0['y']+_0x4fd46b,_0x4059a3=gameCanvas[_0x63c38(0x16a)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x3bcc27=Math['max'](_0x559bda,_0xc2e894),_0x5685a5=_0x558ffa-_0x3bcc27/0x2,_0x12b644=_0x367862,_0x4dd3fe=_0x4059a3-_0x367862;if(_0x4dd3fe>0x0){const _0x4c9f1f={'x':_0x5685a5,'y':_0x12b644,'width':_0x3bcc27,'height':_0x4dd3fe};let _0x1d4d91=null,_0x36e7aa=0x0;if(isTwoPlayerMode&&selectedGameMode==='coop'){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&checkCollision(ship1,_0x4c9f1f))_0x1d4d91=ship1,_0x36e7aa=0x1;else ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&checkCollision(ship2,_0x4c9f1f)&&(_0x1d4d91=ship2,_0x36e7aa=0x2);}else ship&&playerLives>0x0&&!isShipCaptured&&checkCollision(ship,_0x4c9f1f)&&(_0x1d4d91=ship,_0x36e7aa=currentPlayer);if(_0x1d4d91){_0x4545b0[_0x63c38(0x142)]={'width':_0x1d4d91[_0x63c38(0x1c2)],'height':_0x1d4d91['height']},_0x4545b0[_0x63c38(0x192)]=!![],stopSound(captureSound),_0x4545b0['state']=_0x63c38(0x1cd),_0x4545b0[_0x63c38(0x15e)]=null,_0x4545b0[_0x63c38(0x19a)]=null,_0x4545b0[_0x63c38(0x1ce)]=_0x1d4d91['y'],_0x4545b0[_0x63c38(0x133)]=0x0,isShowingCaptureMessage=!![],captureMessageStartTime=_0x4e22cd,capturedBossIdWithMessage=_0x4545b0['id'],playSound(shipCapturedSound),csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,handlePlayerShipCollision(_0x36e7aa,![],_0x4e22cd,!![]);if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&aiPlayerActivelySeekingCaptureById)aiPlayerActivelySeekingCaptureById=null;break;}}}break;}case _0x63c38(0x1cd):{_0x4545b0[_0x63c38(0x153)]=0x0,_0x4545b0[_0x63c38(0xd0)]=0x0;if(_0x4545b0['hasCapturedShip']&&_0x4545b0[_0x63c38(0x142)]&&typeof _0x4545b0[_0x63c38(0x1ce)]===_0x63c38(0x178)){const _0x489e28=_0x4e22cd-captureMessageStartTime,_0xe4581d=Math['min'](0x1,_0x489e28/CAPTURE_MESSAGE_DURATION),_0x5dbfb4=_0x4545b0['y']+CAPTURED_SHIP_OFFSET_Y,_0x21edd8=_0x4545b0[_0x63c38(0x1ce)];_0x4545b0[_0x63c38(0x11d)]=_0x21edd8+(_0x5dbfb4-_0x21edd8)*_0xe4581d,_0x4545b0['capturedShipX']=_0x4545b0['x']+CAPTURED_SHIP_OFFSET_X;}else _0x4545b0[_0x63c38(0x191)]=_0x4545b0['x']+CAPTURED_SHIP_OFFSET_X,_0x4545b0['capturedShipY']=_0x4545b0['y']+CAPTURED_SHIP_OFFSET_Y;break;}case'attacking':{if(isEntrancePhaseActive)break;const _0x2aad24=_0x4545b0['attackPathSegments'],_0x66cc76=3.8;if(!_0x2aad24||_0x2aad24[_0x63c38(0xdd)]===0x0){console['error'](_0x63c38(0x163)+_0x202cd2+_0x63c38(0xd4)),_0x4545b0[_0x63c38(0x110)]=_0x63c38(0xf4);try{const {x:_0x3755bb,y:_0x3d8b52}=getCurrentGridSlotPosition(_0x4545b0[_0x63c38(0x1d6)],_0x4545b0[_0x63c38(0x1dd)],_0x553499);_0x4545b0['targetGridX']=_0x3755bb,_0x4545b0['targetGridY']=_0x3d8b52;}catch(_0x40a3c0){console[_0x63c38(0x1c5)](_0x63c38(0xcf)+_0x202cd2+'\x20(no\x20attack\x20path):',_0x40a3c0),_0x4545b0[_0x63c38(0x15e)]=gameCanvas[_0x63c38(0x1c2)]/0x2,_0x4545b0[_0x63c38(0x19a)]=ENEMY_TOP_MARGIN;}break;}if(_0x4545b0[_0x63c38(0xe7)]>=_0x2aad24[_0x63c38(0xdd)]){console['warn']('Enemy\x20'+_0x202cd2+_0x63c38(0xc7)+_0x4545b0[_0x63c38(0xe7)]+_0x63c38(0x152)+_0x2aad24[_0x63c38(0xdd)]+')!\x20Returning.'),_0x4545b0[_0x63c38(0x110)]='returning';try{const {x:_0x49d84c,y:_0x2261d9}=getCurrentGridSlotPosition(_0x4545b0[_0x63c38(0x1d6)],_0x4545b0['gridCol'],_0x553499);_0x4545b0[_0x63c38(0x15e)]=_0x49d84c,_0x4545b0[_0x63c38(0x19a)]=_0x2261d9;}catch(_0x5f3437){console['error']('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x202cd2+_0x63c38(0x1e1),_0x5f3437),_0x4545b0[_0x63c38(0x15e)]=gameCanvas[_0x63c38(0x1c2)]/0x2,_0x4545b0[_0x63c38(0x19a)]=ENEMY_TOP_MARGIN;}break;}const _0x3a4d07=_0x2aad24[_0x4545b0[_0x63c38(0xe7)]];if(!_0x3a4d07||!_0x3a4d07['p0']||!_0x3a4d07['p1']||!_0x3a4d07['p2']||!_0x3a4d07['p3']){console[_0x63c38(0x1c5)](_0x63c38(0x163)+_0x202cd2+'\x20attacking,\x20invalid\x20segment\x20'+_0x4545b0[_0x63c38(0xe7)]+_0x63c38(0xd7)),_0x4545b0[_0x63c38(0x110)]='returning';try{const {x:_0x2b73d7,y:_0xe9139f}=getCurrentGridSlotPosition(_0x4545b0['gridRow'],_0x4545b0['gridCol'],_0x553499);_0x4545b0[_0x63c38(0x15e)]=_0x2b73d7,_0x4545b0['targetGridY']=_0xe9139f;}catch(_0x278134){console[_0x63c38(0x1c5)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x202cd2+_0x63c38(0xe8),_0x278134),_0x4545b0[_0x63c38(0x15e)]=gameCanvas[_0x63c38(0x1c2)]/0x2,_0x4545b0[_0x63c38(0x19a)]=ENEMY_TOP_MARGIN;}break;}const _0x44edbc=_0x4545b0[_0x63c38(0x184)]/0x3e8*_0x66cc76;_0x4545b0[_0x63c38(0x106)]+=_0x44edbc;let _0x14fb55,_0x1614d7;const _0x68f5b0=_0x4545b0['x'],_0x51efb6=_0x4545b0['y'];if(_0x4545b0[_0x63c38(0x106)]>=0x1){try{_0x14fb55=calculateBezierPoint(0x1,_0x3a4d07['p0']['x'],_0x3a4d07['p1']['x'],_0x3a4d07['p2']['x'],_0x3a4d07['p3']['x']),_0x1614d7=calculateBezierPoint(0x1,_0x3a4d07['p0']['y'],_0x3a4d07['p1']['y'],_0x3a4d07['p2']['y'],_0x3a4d07['p3']['y']);}catch(_0x22e980){console[_0x63c38(0x1c5)](_0x63c38(0x181)+_0x4545b0['id']+':',_0x22e980),_0x14fb55=_0x4545b0['x'],_0x1614d7=_0x4545b0['y'],_0x4545b0[_0x63c38(0x110)]=_0x63c38(0xf4);try{const {x:_0x384945,y:_0x2291ae}=getCurrentGridSlotPosition(_0x4545b0[_0x63c38(0x1d6)],_0x4545b0[_0x63c38(0x1dd)],_0x553499);_0x4545b0[_0x63c38(0x15e)]=_0x384945,_0x4545b0['targetGridY']=_0x2291ae;}catch(_0x273007){console[_0x63c38(0x1c5)](_0x63c38(0x128)+_0x4545b0['id']+':',_0x273007),_0x4545b0[_0x63c38(0x15e)]=gameCanvas[_0x63c38(0x1c2)]/0x2,_0x4545b0[_0x63c38(0x19a)]=ENEMY_TOP_MARGIN;}break;}_0x4545b0[_0x63c38(0x106)]=0x0,_0x4545b0[_0x63c38(0xe7)]++;if(_0x4545b0['attackPathSegmentIndex']>=_0x2aad24[_0x63c38(0xdd)]){_0x4545b0[_0x63c38(0x110)]=_0x63c38(0xf4),_0x4545b0[_0x63c38(0x18f)]=0x0,_0x4545b0[_0x63c38(0x13f)]=0x0,_0x4545b0[_0x63c38(0x1b1)]=null;try{const {x:_0x3f74e0,y:_0x2f2ce7}=getCurrentGridSlotPosition(_0x4545b0[_0x63c38(0x1d6)],_0x4545b0[_0x63c38(0x1dd)],_0x553499);_0x4545b0[_0x63c38(0x15e)]=_0x3f74e0,_0x4545b0[_0x63c38(0x19a)]=_0x2f2ce7;}catch(_0xdc9347){console[_0x63c38(0x1c5)](_0x63c38(0xcf)+_0x202cd2+_0x63c38(0xd9),_0xdc9347),_0x4545b0[_0x63c38(0x15e)]=gameCanvas[_0x63c38(0x1c2)]/0x2,_0x4545b0['targetGridY']=ENEMY_TOP_MARGIN;}}else{const _0x258b28=_0x2aad24[_0x4545b0[_0x63c38(0xe7)]];if(!_0x258b28?.['p0']){console[_0x63c38(0x1c5)](_0x63c38(0x163)+_0x202cd2+_0x63c38(0x1c3)+_0x4545b0[_0x63c38(0xe7)]+_0x63c38(0xd7)),_0x14fb55=_0x4545b0['x'],_0x1614d7=_0x4545b0['y'],_0x4545b0[_0x63c38(0x110)]=_0x63c38(0xf4);try{const {x:_0x528ef3,y:_0x1c33b4}=getCurrentGridSlotPosition(_0x4545b0['gridRow'],_0x4545b0[_0x63c38(0x1dd)],_0x553499);_0x4545b0[_0x63c38(0x15e)]=_0x528ef3,_0x4545b0['targetGridY']=_0x1c33b4;}catch(_0x57952f){console[_0x63c38(0x1c5)](_0x63c38(0x1cf)+_0x4545b0['id']+':',_0x57952f),_0x4545b0[_0x63c38(0x15e)]=gameCanvas[_0x63c38(0x1c2)]/0x2,_0x4545b0[_0x63c38(0x19a)]=ENEMY_TOP_MARGIN;}break;}}}else try{_0x14fb55=calculateBezierPoint(_0x4545b0['attackPathT'],_0x3a4d07['p0']['x'],_0x3a4d07['p1']['x'],_0x3a4d07['p2']['x'],_0x3a4d07['p3']['x']),_0x1614d7=calculateBezierPoint(_0x4545b0[_0x63c38(0x106)],_0x3a4d07['p0']['y'],_0x3a4d07['p1']['y'],_0x3a4d07['p2']['y'],_0x3a4d07['p3']['y']);}catch(_0x4b6acb){console[_0x63c38(0x1c5)](_0x63c38(0x1df)+_0x4545b0['id']+':',_0x4b6acb),_0x14fb55=_0x4545b0['x'],_0x1614d7=_0x4545b0['y'],_0x4545b0[_0x63c38(0x110)]=_0x63c38(0xf4);try{const {x:_0x1512f9,y:_0x228694}=getCurrentGridSlotPosition(_0x4545b0[_0x63c38(0x1d6)],_0x4545b0['gridCol'],_0x553499);_0x4545b0['targetGridX']=_0x1512f9,_0x4545b0[_0x63c38(0x19a)]=_0x228694;}catch(_0x5c096c){console[_0x63c38(0x1c5)](_0x63c38(0x197)+_0x4545b0['id']+':',_0x5c096c),_0x4545b0['targetGridX']=gameCanvas[_0x63c38(0x1c2)]/0x2,_0x4545b0[_0x63c38(0x19a)]=ENEMY_TOP_MARGIN;}break;}if(_0x4545b0&&_0x4545b0[_0x63c38(0x110)]===_0x63c38(0xc2)){const _0x3d8145=_0x4545b0[_0x63c38(0x13f)]||0x0,_0x4a4e8a=_0x14fb55+_0x3d8145,_0xe09f85=_0x1614d7;_0x4545b0[_0x63c38(0x153)]=_0x4a4e8a-_0x68f5b0,_0x4545b0['velocityY']=_0xe09f85-_0x51efb6,_0x4545b0['x']=_0x4a4e8a,_0x4545b0['y']=_0xe09f85;if(_0x4545b0['y']>gameCanvas[_0x63c38(0x16a)]+_0x4fd46b*1.5){_0x4545b0[_0x63c38(0x110)]=_0x63c38(0xf4),_0x4545b0[_0x63c38(0xe7)]=0x0,_0x4545b0[_0x63c38(0x106)]=0x0,_0x4545b0['lastFiredTime']=0x0,_0x4545b0[_0x63c38(0x13f)]=0x0,_0x4545b0[_0x63c38(0x1b1)]=null,_0x4545b0['y']=-_0x4fd46b*(1.1+Math[_0x63c38(0x132)]()*0.4),_0x4545b0['x']=Math[_0x63c38(0x132)]()*(gameCanvas[_0x63c38(0x1c2)]-_0x553499),_0x4545b0['velocityX']=0x0,_0x4545b0['velocityY']=0x0;try{const {x:_0x2f94e2,y:_0x54ae5e}=getCurrentGridSlotPosition(_0x4545b0['gridRow'],_0x4545b0[_0x63c38(0x1dd)],_0x553499);_0x4545b0[_0x63c38(0x15e)]=_0x2f94e2,_0x4545b0['targetGridY']=_0x54ae5e;}catch(_0x2cb34a){console['error']('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x202cd2+_0x63c38(0x1b3),_0x2cb34a),_0x4545b0[_0x63c38(0x15e)]=gameCanvas['width']/0x2,_0x4545b0[_0x63c38(0x19a)]=ENEMY_TOP_MARGIN;}}}break;}case _0x63c38(0xf4):{if(isEntrancePhaseActive)break;if(_0x4545b0[_0x63c38(0x15e)]==null||_0x4545b0[_0x63c38(0x19a)]==null){console[_0x63c38(0xc1)](_0x63c38(0x163)+_0x202cd2+_0x63c38(0x199));try{const {x:_0x3ed1e4,y:_0x3ca66c}=getCurrentGridSlotPosition(_0x4545b0['gridRow'],_0x4545b0[_0x63c38(0x1dd)],_0x553499);_0x4545b0[_0x63c38(0x15e)]=_0x3ed1e4,_0x4545b0['targetGridY']=_0x3ca66c;}catch(_0x55f064){console[_0x63c38(0x1c5)](_0x63c38(0xc4)+_0x202cd2+_0x63c38(0x1c6),_0x55f064),_0x4545b0[_0x63c38(0x110)]=_0x63c38(0xe9),_0x4545b0['x']=gameCanvas[_0x63c38(0x1c2)]/0x2,_0x4545b0['y']=ENEMY_TOP_MARGIN;break;}}const _0x342424=_0x4545b0[_0x63c38(0x15e)],_0x5c5c11=_0x4545b0[_0x63c38(0x19a)],_0x206bb6=_0x342424-_0x4545b0['x'],_0x43b1f0=_0x5c5c11-_0x4545b0['y'],_0x276d3b=Math[_0x63c38(0x1d1)](_0x206bb6*_0x206bb6+_0x43b1f0*_0x43b1f0),_0x5a3d9d=scaleValue(level,BASE_RETURN_SPEED_FACTOR,MAX_RETURN_SPEED_FACTOR),_0x29c2c8=BASE_RETURN_SPEED*_0x5a3d9d,_0xc10fd0=_0x29c2c8*0.5;_0x276d3b>_0xc10fd0?(_0x4545b0[_0x63c38(0x153)]=_0x206bb6/_0x276d3b*_0x29c2c8,_0x4545b0[_0x63c38(0xd0)]=_0x43b1f0/_0x276d3b*_0x29c2c8,_0x4545b0['x']+=_0x4545b0[_0x63c38(0x153)],_0x4545b0['y']+=_0x4545b0[_0x63c38(0xd0)]):(_0x4545b0['x']=_0x342424,_0x4545b0['y']=_0x5c5c11,_0x4545b0[_0x63c38(0x153)]=0x0,_0x4545b0['velocityY']=0x0,_0x4545b0[_0x63c38(0x110)]=_0x63c38(0xe9),_0x4545b0[_0x63c38(0x15f)]=!![],_0x4545b0[_0x63c38(0x13f)]=0x0,_0x4545b0[_0x63c38(0x1b1)]=null,_0x4545b0[_0x63c38(0x1a4)](_0x63c38(0x137))&&delete _0x4545b0[_0x63c38(0x137)],!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound)));break;}}if(_0x4545b0&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode==='coop'&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){const _0x416530=[_0x63c38(0xc2),_0x63c38(0x183),_0x63c38(0x114),_0x63c38(0xe0)];if(_0x416530[_0x63c38(0x149)](_0x4545b0[_0x63c38(0x110)])){let _0x486dbb=[];if(isTwoPlayerMode&&selectedGameMode==='coop'){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x486dbb['push']({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x486dbb[_0x63c38(0x157)]({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isInvincible&&_0x486dbb[_0x63c38(0x157)]({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(const _0x3d7f1f of _0x486dbb){const _0x13eb07=_0x3d7f1f[_0x63c38(0xdf)],_0x23b709={'x':_0x4545b0['x'],'y':_0x4545b0['y'],'width':_0x553499,'height':_0x4fd46b},_0x50c094={'x':_0x13eb07['x'],'y':_0x13eb07['y'],'width':_0x13eb07['width'],'height':_0x13eb07[_0x63c38(0x16a)]},_0x1f785b=_0x3d7f1f[_0x63c38(0x17a)]?{'x':_0x13eb07['x']+DUAL_SHIP_OFFSET_X,'y':_0x13eb07['y'],'width':_0x13eb07[_0x63c38(0x1c2)],'height':_0x13eb07[_0x63c38(0x16a)]}:null;let _0x1ae086=![],_0x8958de=![];if(checkCollision(_0x23b709,_0x50c094))_0x1ae086=!![];else _0x3d7f1f['dual']&&_0x1f785b&&checkCollision(_0x23b709,_0x1f785b)&&(_0x1ae086=!![],_0x8958de=!![]);if(_0x1ae086){createExplosion(_0x4545b0['x']+_0x553499/0x2,_0x4545b0['y']+_0x4fd46b/0x2),playSound(lostLifeSound),enemies[_0x63c38(0xe3)](_0x1d8bdb,0x1),_0x4545b0=null,handlePlayerShipCollision(_0x3d7f1f[_0x63c38(0x119)],_0x8958de,_0x4e22cd,![]);if(_0x4545b0===null)break;}}}}if(!_0x4545b0)continue;}if(!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode==='coop'&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){let _0x432bed=[];if(isTwoPlayerMode&&selectedGameMode===_0x63c38(0x109)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x432bed[_0x63c38(0x157)]({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x432bed['push']({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isInvincible&&_0x432bed[_0x63c38(0x157)]({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(let _0x14b73e=enemyBullets['length']-0x1;_0x14b73e>=0x0;_0x14b73e--){const _0x2f813b=enemyBullets[_0x14b73e];if(!_0x2f813b){enemyBullets[_0x63c38(0xe3)](_0x14b73e,0x1);continue;}const _0x38a046={'x':_0x2f813b['x'],'y':_0x2f813b['y'],'width':_0x2f813b[_0x63c38(0x1c2)],'height':_0x2f813b[_0x63c38(0x16a)]};let _0x289f83=![];for(const _0x3defd of _0x432bed){const _0x1eb6ce=_0x3defd[_0x63c38(0xdf)],_0x10aa1d={'x':_0x1eb6ce['x'],'y':_0x1eb6ce['y'],'width':_0x1eb6ce[_0x63c38(0x1c2)],'height':_0x1eb6ce[_0x63c38(0x16a)]},_0x168331=_0x3defd[_0x63c38(0x17a)]?{'x':_0x1eb6ce['x']+DUAL_SHIP_OFFSET_X,'y':_0x1eb6ce['y'],'width':_0x1eb6ce[_0x63c38(0x1c2)],'height':_0x1eb6ce[_0x63c38(0x16a)]}:null;let _0x29223b=![],_0x5a35eb=![];if(checkCollision(_0x38a046,_0x10aa1d))_0x29223b=!![];else _0x3defd[_0x63c38(0x17a)]&&_0x168331&&checkCollision(_0x38a046,_0x168331)&&(_0x29223b=!![],_0x5a35eb=!![]);if(_0x29223b){playSound(lostLifeSound),handlePlayerShipCollision(_0x3defd['playerNum'],_0x5a35eb,_0x4e22cd,![]),enemyBullets[_0x63c38(0xe3)](_0x14b73e,0x1),_0x289f83=!![];break;}}if(_0x289f83)continue;}}updateHitSparks();}catch(_0x3cea35){console[_0x63c38(0x1c5)]('FATAL\x20Error\x20in\x20moveEntities:',_0x3cea35,_0x3cea35[_0x63c38(0x185)]),isGridSoundPlaying=![],stopSound(gridBackgroundSound),isEntrancePhaseActive=![],stopSound(entranceSound),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(captureSound),stopSound(shipCapturedSound),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState==='function')showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert('Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.');}}function handlePlayerShipCollision(_0x1d2dcb,_0x36b108,_0x5bcf29,_0x5cab52=![]){const _0x299a8d=_0x28f57a,_0x136f43=_0x5bcf29,_0x56042d=gameCanvas?gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;let _0x167981=0x0,_0x36eaeb=null;if(isTwoPlayerMode&&selectedGameMode===_0x299a8d(0x109)){_0x36eaeb=_0x1d2dcb===0x1?ship1:ship2;if(_0x36eaeb){_0x167981=_0x36eaeb['x'];if(_0x5cab52){if(_0x1d2dcb===0x1)player1CaptureRespawnX=_0x36eaeb['x'];else{if(_0x1d2dcb===0x2)player2CaptureRespawnX=_0x36eaeb['x'];}}}else{if(_0x1d2dcb===0x1&&typeof player1CaptureRespawnX===_0x299a8d(0x178)&&player1CaptureRespawnX!==0x0)_0x167981=player1CaptureRespawnX;else{if(_0x1d2dcb===0x2&&typeof player2CaptureRespawnX==='number'&&player2CaptureRespawnX!==0x0)_0x167981=player2CaptureRespawnX;else{if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&gameCanvas)_0x167981=_0x1d2dcb===0x1?gameCanvas[_0x299a8d(0x1c2)]/0x2-gameCanvas[_0x299a8d(0x1c2)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2:gameCanvas[_0x299a8d(0x1c2)]/0x2+gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;else gameCanvas?_0x167981=gameCanvas['width']/0x2-SHIP_WIDTH/0x2:_0x167981=0xc8;}}}}else{_0x36eaeb=ship;if(_0x36eaeb)_0x167981=_0x36eaeb['x'],_0x5cab52&&(capturedShipRespawnX_NormalMode=ship['x']);else _0x5cab52&&capturedShipRespawnX_NormalMode!==0x0?_0x167981=capturedShipRespawnX_NormalMode:_0x167981=gameCanvas?gameCanvas[_0x299a8d(0x1c2)]/0x2-SHIP_WIDTH/0x2:0xc8;}if(isTwoPlayerMode&&selectedGameMode===_0x299a8d(0x109)){if(_0x1d2dcb===0x1){if(_0x5cab52){isPlayer1ShipCaptured=!![],player1IsDualShipActive=![],player1Lives--;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x299a8d(0x17e))coopPartner1CapturedTime=_0x136f43;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0x136f43,playSound(gameOverSound),ship1=null,player1NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;if(capturedBossIdWithMessage&&enemies[_0x299a8d(0x18e)](_0x4000fd=>_0x4000fd['id']===capturedBossIdWithMessage)){const _0x5c0155=enemies[_0x299a8d(0x18e)](_0x39aec2=>_0x39aec2['id']===capturedBossIdWithMessage);_0x5c0155&&(_0x5c0155[_0x299a8d(0x192)]=![],_0x5c0155[_0x299a8d(0x142)]=null);}}else player1NeedsRespawnAfterCapture=!![],ship1=null;}else{if(player1IsDualShipActive&&ship1){player1IsDualShipActive=![];const _0x5dd796=_0x36b108?ship1['x']+DUAL_SHIP_OFFSET_X+ship1[_0x299a8d(0x1c2)]/0x2:ship1['x']+ship1[_0x299a8d(0x1c2)]/0x2;createExplosion(_0x5dd796,ship1['y']+ship1[_0x299a8d(0x16a)]/0x2),ship1['x']=_0x167981,ship1['y']=_0x56042d,ship1[_0x299a8d(0x127)]=ship1['x'],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x136f43+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0x136f43+RESPAWN_DELAY_MS;}else{if(ship1)createExplosion(ship1['x']+ship1[_0x299a8d(0x1c2)]/0x2,ship1['y']+ship1[_0x299a8d(0x16a)]/0x2);player1Lives--;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0x136f43,playSound(gameOverSound),ship1=null;if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;}else isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x136f43+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0x136f43+RESPAWN_DELAY_MS,ship1?(ship1['x']=_0x167981,ship1['y']=_0x56042d,ship1[_0x299a8d(0x127)]=ship1['x']):ship1={'x':_0x167981,'y':_0x56042d,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x167981,'id':'p1'};}}}else{if(_0x1d2dcb===0x2){if(_0x5cab52){isPlayer2ShipCaptured=!![],player2IsDualShipActive=![],player2Lives--;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x299a8d(0x17e))coopPartner2CapturedTime=_0x136f43;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0x136f43,playSound(gameOverSound),ship2=null,player2NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p2'||aiPlayerActivelySeekingCaptureById===_0x299a8d(0x162))aiPlayerActivelySeekingCaptureById=null;if(capturedBossIdWithMessage&&enemies['find'](_0x203431=>_0x203431['id']===capturedBossIdWithMessage)){const _0x1ed5d3=enemies['find'](_0x563b60=>_0x563b60['id']===capturedBossIdWithMessage);_0x1ed5d3&&(_0x1ed5d3['hasCapturedShip']=![],_0x1ed5d3[_0x299a8d(0x142)]=null);}}else player2NeedsRespawnAfterCapture=!![],ship2=null;}else{if(player2IsDualShipActive&&ship2){player2IsDualShipActive=![];const _0x4da59d=_0x36b108?ship2['x']+DUAL_SHIP_OFFSET_X+ship2[_0x299a8d(0x1c2)]/0x2:ship2['x']+ship2['width']/0x2;createExplosion(_0x4da59d,ship2['y']+ship2[_0x299a8d(0x16a)]/0x2),ship2['x']=_0x167981,ship2['y']=_0x56042d,ship2[_0x299a8d(0x127)]=ship2['x'],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x136f43+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0x136f43+RESPAWN_DELAY_MS;}else{if(ship2)createExplosion(ship2['x']+ship2[_0x299a8d(0x1c2)]/0x2,ship2['y']+ship2[_0x299a8d(0x16a)]/0x2);player2Lives--;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0x136f43,playSound(gameOverSound),ship2=null;if(aiPlayerActivelySeekingCaptureById==='p2'||aiPlayerActivelySeekingCaptureById===_0x299a8d(0x162))aiPlayerActivelySeekingCaptureById=null;}else isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x136f43+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0x136f43+RESPAWN_DELAY_MS,ship2?(ship2['x']=_0x167981,ship2['y']=_0x56042d,ship2[_0x299a8d(0x127)]=_0x167981):ship2={'x':_0x167981,'y':_0x56042d,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x167981,'id':'p2'};}}}}player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isDualShipActive&&!_0x5cab52&&_0x36eaeb){isDualShipActive=![];if(isTwoPlayerMode&&selectedGameMode===_0x299a8d(0x1b6)){if(_0x1d2dcb===0x1)player1IsDualShipActive=![];else{if(_0x1d2dcb===0x2)player2IsDualShipActive=![];}}else{if(!isTwoPlayerMode)player1IsDualShipActive=![];}const _0x319ed9=_0x36b108?_0x167981+DUAL_SHIP_OFFSET_X+SHIP_WIDTH/0x2:_0x167981+SHIP_WIDTH/0x2;createExplosion(_0x319ed9,_0x56042d+SHIP_HEIGHT/0x2);ship&&(ship['x']=_0x167981,ship['y']=_0x56042d,ship[_0x299a8d(0x127)]=ship['x']);isInvincible=!![],invincibilityEndTime=_0x136f43+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x136f43+RESPAWN_DELAY_MS;if(!isManualControl&&!isPlayerTwoAI)aiNeedsStabilization=!![];else{if(isPlayerTwoAI&&selectedGameMode===_0x299a8d(0x1b6)&&currentPlayer===0x2)aiNeedsStabilization=!![];}}else{if(!_0x5cab52&&_0x36eaeb)createExplosion(_0x167981+SHIP_WIDTH/0x2,_0x56042d+SHIP_HEIGHT/0x2);if(_0x5cab52){isShipCaptured=!![];if(ship)ship=null;}playerLives--;if(playerLives<=0x0){playerLives=0x0;if(isTwoPlayerMode&&selectedGameMode==='normal'){if(_0x1d2dcb===0x1)player1Lives=0x0;else{if(_0x1d2dcb===0x2)player2Lives=0x0;}isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x136f43,playerWhoIsGameOver=_0x1d2dcb,playSound(gameOverSound);const _0x3a5b72=_0x1d2dcb===0x1?0x2:0x1,_0x5b2628=_0x3a5b72===0x1?player1Lives:player2Lives;_0x5b2628>0x0?nextActionAfterPlayerGameOver=_0x299a8d(0x10a):nextActionAfterPlayerGameOver='show_results';bullets=[],enemyBullets=[],explosions=[];if(!(_0x5b2628>0x0))ship=null;}else player1Lives=0x0,ship=null,playSound(gameOverSound),triggerFinalGameOverSequence();}else{if(isTwoPlayerMode&&selectedGameMode===_0x299a8d(0x1b6)){if(_0x1d2dcb===0x1)player1Lives=playerLives;else player2Lives=playerLives;}if(!_0x5cab52){isInvincible=!![],invincibilityEndTime=_0x136f43+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x136f43+RESPAWN_DELAY_MS;if(ship&&gameCanvas){ship['x']=_0x167981,ship['y']=_0x56042d,ship[_0x299a8d(0x127)]=ship['x'];if(!isManualControl&&!isPlayerTwoAI)aiNeedsStabilization=!![];else{if(isPlayerTwoAI&&selectedGameMode===_0x299a8d(0x1b6)&&currentPlayer===0x2)aiNeedsStabilization=!![];}}}if(_0x5cab52)isDualShipActive=![];}}}if(!_0x5cab52)fallingShips=[];}function switchPlayerTurn(){if(!isTwoPlayerMode||selectedGameMode==='coop')return![];stopSound(hiScoreSound);if(currentPlayer===0x1){player1Score=score,player1IsDualShipActive=isDualShipActive;if(player1Score>highScore)highScore=player1Score;}else{player2Score=score,player2IsDualShipActive=isDualShipActive;if(player2Score>highScore)highScore=player2Score;}const _0x14e501=currentPlayer===0x1?0x2:0x1,_0x30031a=_0x14e501===0x1?player1Lives:player2Lives;if(_0x30031a<=0x0){const _0x42d8dc=currentPlayer===0x1?player1Lives:player2Lives;return _0x42d8dc<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x14e501,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function triggerGridFiring(){const _0x2b5138=_0x28f57a;if(isPaused||!isInGameState||isChallengingStage||isWaveTransitioning)return;let _0x4e7ed5=![];isTwoPlayerMode&&selectedGameMode===_0x2b5138(0x109)?(player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)&&(_0x4e7ed5=!![]):playerLives>0x0&&ship&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(_0x4e7ed5=!![]);if(!_0x4e7ed5)return;const _0x196bf7=enemies[_0x2b5138(0xdc)](_0x3f43e1=>_0x3f43e1&&_0x3f43e1['state']==='in_grid');if(_0x196bf7['length']===0x0)return;const _0x361995=Date[_0x2b5138(0x19f)](),_0x3b05f7=scaleValue(level,BASE_GRID_FIRE_INTERVAL,MIN_GRID_FIRE_INTERVAL);if(_0x361995-lastGridFireCheckTime<_0x3b05f7)return;lastGridFireCheckTime=_0x361995;const _0x401e31=scaleValue(level,BASE_GRID_FIRE_PROBABILITY,MAX_GRID_FIRE_PROBABILITY),_0x3935fe=Math[_0x2b5138(0x167)](scaleValue(level,BASE_GRID_MAX_FIRING_ENEMIES,MAX_GRID_MAX_FIRING_ENEMIES));let _0x1231ca=0x0;_0x196bf7[_0x2b5138(0x16b)](()=>Math[_0x2b5138(0x132)]()-0.5);for(const _0x27b901 of _0x196bf7){if(_0x1231ca>=_0x3935fe)break;if(_0x27b901[_0x2b5138(0x113)]===ENEMY2_TYPE||_0x27b901[_0x2b5138(0x113)]===ENEMY3_TYPE){if(_0x27b901[_0x2b5138(0x113)]===ENEMY3_TYPE&&_0x27b901[_0x2b5138(0x192)])continue;Math['random']()<_0x401e31&&(createBulletSimple(_0x27b901)&&(playSound(enemyShootSound),_0x27b901[_0x2b5138(0x18f)]=_0x361995,_0x1231ca++));}}}function runSingleGameUpdate(_0x5a114f){const _0x55f1a5=_0x28f57a;try{const _0x459c0e=Date[_0x55f1a5(0x19f)]();let _0x47b510=![];isTwoPlayerMode&&selectedGameMode===_0x55f1a5(0x109)?_0x47b510=player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture:_0x47b510=playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;let _0x47ac73=![];if(isManualControl&&connectedGamepadIndex!==null){if(isTwoPlayerMode&&selectedGameMode===_0x55f1a5(0x109)){if(player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage)_0x47ac73=!![];}else{if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1))_0x47ac73=!![];}}if(_0x47ac73&&gameOverSequenceStartTime===0x0&&!isPaused){const _0xb4c505=navigator[_0x55f1a5(0xeb)]();if(_0xb4c505?.[connectedGamepadIndex]){const _0x50472d=_0xb4c505[connectedGamepadIndex],_0x3441b5=processSingleController(_0x50472d,previousGameButtonStates);previousGameButtonStates=_0x3441b5[_0x55f1a5(0x11b)]['slice']();if(_0x3441b5[_0x55f1a5(0x129)]){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates[_0x55f1a5(0xdd)]>0x0)previousGameButtonStates=[];}}else connectedGamepadIndex===null&&previousGameButtonStates[_0x55f1a5(0xdd)]>0x0&&(previousGameButtonStates=[]);let _0x39e9bb=![];if(isManualControl&&isTwoPlayerMode&&selectedGameMode===_0x55f1a5(0x109)&&!isPlayerTwoAI&&connectedGamepadIndexP2!==null){if(player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage)_0x39e9bb=!![];}else{if(isManualControl&&isTwoPlayerMode&&selectedGameMode===_0x55f1a5(0x1b6)&&!isPlayerTwoAI&&connectedGamepadIndexP2!==null){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&currentPlayer===0x2)_0x39e9bb=!![];}}if(_0x39e9bb&&gameOverSequenceStartTime===0x0&&!isPaused){const _0x213432=navigator[_0x55f1a5(0xeb)]();if(_0x213432?.[connectedGamepadIndexP2]){const _0x13c264=_0x213432[connectedGamepadIndexP2],_0x55329e=processSingleController(_0x13c264,previousGameButtonStatesP2);previousGameButtonStatesP2=_0x55329e[_0x55f1a5(0x11b)]['slice']();if(_0x55329e[_0x55f1a5(0x129)]){stopGameAndShowMenu();return;}}else{if(previousGameButtonStatesP2[_0x55f1a5(0xdd)]>0x0)previousGameButtonStatesP2=[];}}else connectedGamepadIndexP2===null&&previousGameButtonStatesP2[_0x55f1a5(0xdd)]>0x0&&(previousGameButtonStatesP2=[]);if(isPaused){renderGame();return;}const _0x151a1e=showCsBonusScoreMessage||showPerfectMessage;if(_0x151a1e&&gameCanvas?.[_0x55f1a5(0x1c2)]>0x0){if(isTwoPlayerMode&&selectedGameMode===_0x55f1a5(0x109)){const _0x10bc4b=ship1&&player1Lives>0x0,_0x2d8620=ship2&&player2Lives>0x0;if(_0x10bc4b&&_0x2d8620){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x55f1a5(0x17e)){const _0x131600=gameCanvas[_0x55f1a5(0x1c2)]/0x2-gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1&&(ship1['x']=_0x131600,ship1[_0x55f1a5(0x127)]=_0x131600,smoothedShip1X=_0x131600);const _0x3554f1=gameCanvas[_0x55f1a5(0x1c2)]/0x2+gameCanvas[_0x55f1a5(0x1c2)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2['x']=_0x3554f1,ship2[_0x55f1a5(0x127)]=_0x3554f1,smoothedShip2X=_0x3554f1);}}else{if(_0x10bc4b&&ship1){const _0x569de5=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0xae19a1=Math[_0x55f1a5(0x167)](gameCanvas['width']/0x2-_0x569de5/0x2);ship1['x']=_0xae19a1,ship1['targetX']=_0xae19a1;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')smoothedShip1X=_0xae19a1;ship2&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x55f1a5(0x17e))&&(ship2['targetX']=ship2['x'],smoothedShip2X=ship2['x']);}else{if(_0x2d8620&&ship2){const _0x56befe=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x575f40=Math[_0x55f1a5(0x167)](gameCanvas['width']/0x2-_0x56befe/0x2);ship2['x']=_0x575f40,ship2['targetX']=_0x575f40;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x55f1a5(0x17e))smoothedShip2X=_0x575f40;ship1&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&(ship1[_0x55f1a5(0x127)]=ship1['x'],smoothedShip1X=ship1['x']);}}}}else{if((!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x55f1a5(0x1b6)&&currentPlayer===0x2)&&ship){const _0x458730=isDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH;ship['x']=Math[_0x55f1a5(0x167)](gameCanvas[_0x55f1a5(0x1c2)]/0x2-_0x458730/0x2),ship[_0x55f1a5(0x127)]=ship['x'];}}}let _0x9679da=![];if(selectedGameMode==='coop'&&level===0x1&&coopPlayersReadyStartTime>0x0){_0x9679da=!![];if(isShowingCoopPlayersReady){if(_0x459c0e-coopPlayersReadyStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x55f1a5(0xfc))updateExplosions();}if(_0x459c0e>=coopPlayersReadyStartTime+0xbb8){isShowingCoopPlayersReady=![],explosions=[];if(typeof updateExplosions===_0x55f1a5(0xfc))updateExplosions();isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x55f1a5(0x17e)?(isShowingIntro=!![],introStep=0x2,introDisplayStartTime=_0x459c0e):(isShowingIntro=!![],introStep=0x1,introDisplayStartTime=_0x459c0e);}}else{if(isShowingIntro){if(_0x459c0e-introDisplayStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x55f1a5(0xfc))updateExplosions();}let _0x278cf0=INTRO_DURATION_PER_STEP;introStep===0x1&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x55f1a5(0x17e))&&(_0x278cf0=TWO_PLAYER_STAGE_INTRO_DURATION);if(_0x459c0e>=introDisplayStartTime+_0x278cf0){if(introStep===0x1&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x55f1a5(0x17e))){introStep=0x2,introDisplayStartTime=_0x459c0e,explosions=[];if(typeof updateExplosions===_0x55f1a5(0xfc))updateExplosions();}else{isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],explosions=[];if(typeof updateExplosions===_0x55f1a5(0xfc))updateExplosions();_0x9679da=![],coopPlayersReadyStartTime=0x0;}}}else _0x9679da=![],coopPlayersReadyStartTime=0x0;}if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x55f1a5(0x17e))handlePlayerInput();if(typeof moveEntities==='function')moveEntities();renderGame();if(_0x9679da)return;}if(selectedGameMode===_0x55f1a5(0x109)&&level===0x1&&!gameJustStartedAndWaveLaunched&&coopPlayersReadyStartTime===0x0&&gameJustStarted){if(isFullGridWave)startFullGridWave();else{if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x55f1a5(0xdd)]>0x0)scheduleEntranceFlightWave();else isWaveTransitioning=!![],readyForNextWaveReset=!![];}}gameJustStartedAndWaveLaunched=!![],gameJustStarted=![];}if(isShowingPlayerGameOverMessage&&isTwoPlayerMode&&selectedGameMode===_0x55f1a5(0x1b6)){if(_0x459c0e-playerGameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x55f1a5(0xfc))updateExplosions();}if(_0x459c0e-playerGameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION){isShowingPlayerGameOverMessage=![],explosions=[];if(typeof updateExplosions===_0x55f1a5(0xfc))updateExplosions();const _0x5c3ad8=playerWhoIsGameOver;playerWhoIsGameOver=0x0;if(nextActionAfterPlayerGameOver===_0x55f1a5(0x10a)){if(switchPlayerTurn()){let _0x49846a=level;_0x5c3ad8===0x2&&currentPlayer===0x1&&player1CompletedLevel===level&&(level++,player1CompletedLevel=-0x1,_0x49846a=level);if(currentPlayer===0x1&&player1Lives>0x0)player1MaxLevelReached=Math[_0x55f1a5(0x1e0)](player1MaxLevelReached,level);else{if(currentPlayer===0x2&&player2Lives>0x0)player2MaxLevelReached=Math['max'](player2MaxLevelReached,level);}resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![];}else triggerFinalGameOverSequence();}else{if(nextActionAfterPlayerGameOver===_0x55f1a5(0x123))triggerFinalGameOverSequence();else triggerFinalGameOverSequence();}renderGame();return;}else{renderGame();return;}}if(isTwoPlayerMode&&selectedGameMode===_0x55f1a5(0x109)){let _0x577c08=![],_0x4322e3=![];if(isPlayer1ShowingGameOverMessage){if(_0x459c0e-player1GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x55f1a5(0xfc))updateExplosions();}if(_0x459c0e-player1GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer1ShowingGameOverMessage=![],_0x577c08=!![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();}}if(isPlayer2ShowingGameOverMessage){if(_0x459c0e-player2GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(_0x459c0e-player2GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer2ShowingGameOverMessage=![],_0x4322e3=!![],explosions=[];if(typeof updateExplosions===_0x55f1a5(0xfc))updateExplosions();}}if(_0x577c08||_0x4322e3){player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')handlePlayerInput();if(typeof moveEntities===_0x55f1a5(0xfc))moveEntities();renderGame();if(gameOverSequenceStartTime>0x0||player1Lives>0x0||player2Lives>0x0)return;}else{if(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage){if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x55f1a5(0x17e))handlePlayerInput();if(typeof moveEntities==='function')moveEntities();renderGame();return;}}}if(isShowingCaptureMessage){if(_0x459c0e-captureMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x55f1a5(0xfc))updateExplosions();}const _0x35ad82=enemies[_0x55f1a5(0x18e)](_0x18373a=>_0x18373a['id']===capturedBossIdWithMessage);if(_0x35ad82&&_0x35ad82[_0x55f1a5(0x110)]==='showing_capture_message'){const _0x2fce12=_0x459c0e-captureMessageStartTime,_0x4655a9=Math['min'](0x1,_0x2fce12/CAPTURE_MESSAGE_DURATION);_0x35ad82[_0x55f1a5(0x133)]=_0x4655a9*0x2*(0x2*Math['PI']);}else _0x35ad82&&(_0x35ad82[_0x55f1a5(0x133)]=0x0);if(isInGameState&&!isShowingPlayerGameOverMessage&&!isPlayer1ShowingGameOverMessage&&!isPlayer2ShowingGameOverMessage&&gameOverSequenceStartTime===0x0){if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x55f1a5(0x17e))handlePlayerInput();if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x55f1a5(0x17e))aiControlCoop();else isPlayerTwoAI&&selectedGameMode===_0x55f1a5(0x1b6)&&currentPlayer===0x2&&aiControl();if(typeof moveEntities===_0x55f1a5(0xfc))moveEntities();updateExplosions(),updateFloatingScores();}if(_0x459c0e-captureMessageStartTime>=CAPTURE_MESSAGE_DURATION){isShowingCaptureMessage=![],explosions=[];if(typeof updateExplosions===_0x55f1a5(0xfc))updateExplosions();stopSound(shipCapturedSound),captureBeamActive=![];if(_0x35ad82&&_0x35ad82[_0x55f1a5(0x110)]===_0x55f1a5(0x1cd)){_0x35ad82[_0x55f1a5(0x110)]=_0x55f1a5(0xf4),_0x35ad82[_0x55f1a5(0x133)]=0x0;try{const _0x246396=_0x35ad82[_0x55f1a5(0x113)]===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH,{x:_0x252a4f,y:_0x10f68a}=getCurrentGridSlotPosition(_0x35ad82[_0x55f1a5(0x1d6)],_0x35ad82['gridCol'],_0x246396);_0x35ad82[_0x55f1a5(0x15e)]=_0x252a4f,_0x35ad82[_0x55f1a5(0x19a)]=_0x10f68a;}catch(_0x50d2ef){console[_0x55f1a5(0x1c5)](_0x55f1a5(0x16d)+_0x35ad82['id']+':',_0x50d2ef),_0x35ad82[_0x55f1a5(0x15e)]=gameCanvas[_0x55f1a5(0x1c2)]/0x2,_0x35ad82['targetGridY']=ENEMY_TOP_MARGIN;}}else _0x35ad82&&(_0x35ad82[_0x55f1a5(0x133)]=0x0);capturedBossIdWithMessage=null;const _0x37e52d=gameCanvas?gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;if(isTwoPlayerMode&&selectedGameMode===_0x55f1a5(0x109)){if(player1NeedsRespawnAfterCapture&&player1Lives>0x0){ship1={'x':player1CaptureRespawnX,'y':_0x37e52d,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player1CaptureRespawnX,'id':'p1'},isPlayer1ShipCaptured=![],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x459c0e+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=![],player1NeedsRespawnAfterCapture=![],player1CaptureRespawnX=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x55f1a5(0x17e))smoothedShip1X=ship1['x'];}if(player2NeedsRespawnAfterCapture&&player2Lives>0x0){ship2={'x':player2CaptureRespawnX,'y':_0x37e52d,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player2CaptureRespawnX,'id':'p2'},isPlayer2ShipCaptured=![],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x459c0e+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=![],player2NeedsRespawnAfterCapture=![],player2CaptureRespawnX=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x55f1a5(0x17e))smoothedShip2X=ship2['x'];}if(player1Lives<=0x0&&player2Lives<=0x0){if(gameOverSequenceStartTime===0x0)triggerFinalGameOverSequence();}}else{if(!isManualControl&&!isPlayerTwoAI){if(isShipCaptured&&playerLives>0x0){let _0x3c7564=gameCanvas?gameCanvas[_0x55f1a5(0x1c2)]/0x2-SHIP_WIDTH/0x2:0xc8;if(typeof smoothedShipX==='number')_0x3c7564=smoothedShipX;ship={'x':_0x3c7564,'y':_0x37e52d,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x3c7564,'id':_0x55f1a5(0x122)},isShipCaptured=![],isInvincible=!![],invincibilityEndTime=_0x459c0e+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=![],aiNeedsStabilization=!![];if(smoothedShipX===undefined&&ship)smoothedShipX=ship['x'];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isManualControl){if(isShipCaptured&&playerLives>0x0){let _0x4d4761=capturedShipRespawnX_NormalMode!==0x0?capturedShipRespawnX_NormalMode:gameCanvas?gameCanvas['width']/0x2-SHIP_WIDTH/0x2:0xc8;ship={'x':_0x4d4761,'y':_0x37e52d,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x4d4761,'id':_0x55f1a5(0x122)},isShipCaptured=![],capturedShipRespawnX_NormalMode=0x0,isInvincible=!![],invincibilityEndTime=_0x459c0e+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x459c0e+RESPAWN_DELAY_MS;if(isPlayerTwoAI&&selectedGameMode===_0x55f1a5(0x1b6)&&currentPlayer===0x2)aiNeedsStabilization=!![];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&((!isTwoPlayerMode||isTwoPlayerMode&&selectedGameMode===_0x55f1a5(0x1b6)&&(currentPlayer===0x1&&player2Lives<=0x0||currentPlayer===0x2&&player1Lives<=0x0))&&triggerFinalGameOverSequence());}}}}renderGame();return;}const _0x152468=!(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage||isShowingPlayerGameOverMessage),_0x50e09c=isShowingIntro&&!_0x9679da&&!(selectedGameMode===_0x55f1a5(0x109)&&level===0x1);if(!_0x9679da&&gameOverSequenceStartTime===0x0&&_0x47b510&&!isShowingCaptureMessage&&_0x152468){if(isInGameState&&!_0x50e09c){if(!(_0x151a1e&&!isManualControl)){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x55f1a5(0x17e))aiControlCoop();else{if(isPlayerTwoAI&&selectedGameMode===_0x55f1a5(0x1b6)&&currentPlayer===0x2)aiControl();else!isManualControl&&!isPlayerTwoAI&&aiControl();}}if(isManualControl&&!(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2))handlePlayerInput();else{if(isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_NORMAL'&&currentPlayer===0x1)handlePlayerInput();else isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'&&handlePlayerInput();}}}isTwoPlayerMode&&selectedGameMode===_0x55f1a5(0x109)?(isPlayer1Invincible&&_0x459c0e>=player1InvincibilityEndTime&&(isPlayer1Invincible=![],player1InvincibilityEndTime=0x0),isPlayer2Invincible&&_0x459c0e>=player2InvincibilityEndTime&&(isPlayer2Invincible=![],player2InvincibilityEndTime=0x0)):(isInvincible&&_0x459c0e>=invincibilityEndTime&&(isInvincible=![],invincibilityEndTime=0x0),isWaitingForRespawn&&_0x459c0e>=respawnTime&&(isWaitingForRespawn=![]));const _0x46b499=showExtraLifeMessage&&_0x459c0e-extraLifeMessageStartTime<0x64;if(_0x46b499&&(isWaveTransitioning||isChallengingStage&&enemies[_0x55f1a5(0xdd)]===0x0)){}if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x55f1a5(0x17e))&&isChallengingStage&&enemies[_0x55f1a5(0xdd)]===0x0&&!isCsCompletionDelayActive&&!showCsBonusScoreMessage&&!showPerfectMessage&&gameCanvas&&gameCanvas['width']>0x0){const _0x455530=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage,_0x5c9b57=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage;if(_0x455530&&!_0x5c9b57){const _0x17b503=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x541516=Math[_0x55f1a5(0x167)](gameCanvas[_0x55f1a5(0x1c2)]/0x2-_0x17b503/0x2);ship1['x']=_0x541516,ship1[_0x55f1a5(0x127)]=_0x541516,smoothedShip1X=_0x541516;}else{if(_0x5c9b57&&!_0x455530){const _0x2f8d17=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0xb7c7ca=Math[_0x55f1a5(0x167)](gameCanvas['width']/0x2-_0x2f8d17/0x2);ship2['x']=_0xb7c7ca,ship2['targetX']=_0xb7c7ca,smoothedShip2X=_0xb7c7ca;}}}if(isCsCompletionDelayActive&&_0x152468&&gameOverSequenceStartTime===0x0){if(_0x459c0e-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY+EXPLOSION_DURATION){isCsCompletionDelayActive=![],csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies;csCompletionResultIsPerfect?(playSound(csPerfectSound),showCsHitsMessage=!![],csHitsMessageStartTime=_0x459c0e):(playSound(csClearSound),showCSClearMessage=!![],csClearMessageStartTime=_0x459c0e);bullets=[],enemyBullets=[],renderGame();return;}else{if(_0x459c0e-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY&&explosions[_0x55f1a5(0xdd)]>0x0){updateExplosions(),renderGame();return;}else{if(_0x459c0e-csCompletionDelayStartTime<CS_COMPLETION_MESSAGE_DELAY){renderGame();return;}}}}let _0x415810=![],_0xe068d6=![];if(_0x152468&&gameOverSequenceStartTime===0x0&&!isShowingCoopPlayersReady&&!_0x9679da){if(showCsHitsMessage){if(_0x459c0e-csHitsMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x55f1a5(0xfc))updateExplosions();}if(Date[_0x55f1a5(0x19f)]()-csHitsMessageStartTime>CS_HITS_MESSAGE_DURATION){showCsHitsMessage=![],showPerfectMessage=!![],perfectMessageStartTime=_0x459c0e,explosions=[];if(typeof updateExplosions==='function')updateExplosions();}_0xe068d6=!![];}else{if(showPerfectMessage){if(_0x459c0e-perfectMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x55f1a5(0xfc))updateExplosions();}if(Date[_0x55f1a5(0x19f)]()-perfectMessageStartTime>CS_PERFECT_MESSAGE_DURATION){showPerfectMessage=![],showCsBonusScoreMessage=!![],csBonusScoreMessageStartTime=_0x459c0e,explosions=[];if(typeof updateExplosions===_0x55f1a5(0xfc))updateExplosions();}_0xe068d6=!![];}else{if(showCsBonusScoreMessage){if(_0x459c0e-csBonusScoreMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x55f1a5(0xfc))updateExplosions();}if(Date[_0x55f1a5(0x19f)]()-csBonusScoreMessageStartTime>CS_BONUS_MESSAGE_DURATION){showCsBonusScoreMessage=![],_0x415810=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions===_0x55f1a5(0xfc))updateExplosions();}_0xe068d6=!![];}else{if(showCSClearMessage){if(_0x459c0e-csClearMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x55f1a5(0xfc))updateExplosions();}Date[_0x55f1a5(0x19f)]()-csClearMessageStartTime>=CS_CLEAR_HITS_DELAY&&!showCsHitsForClearMessage&&(showCsHitsForClearMessage=!![]);Date[_0x55f1a5(0x19f)]()-csClearMessageStartTime>=CS_CLEAR_SCORE_DELAY&&!showCsScoreForClearMessage&&(showCsScoreForClearMessage=!![]);if(Date[_0x55f1a5(0x19f)]()-csClearMessageStartTime>=CS_CLEAR_DELAY){showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],_0x415810=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions===_0x55f1a5(0xfc))updateExplosions();}_0xe068d6=!![];}else{if(showExtraLifeMessage)Date[_0x55f1a5(0x19f)]()-extraLifeMessageStartTime>EXTRA_LIFE_MESSAGE_DURATION&&(showExtraLifeMessage=![]),_0xe068d6=!![];else{if(showReadyMessage){if(_0x459c0e-readyMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x55f1a5(0xfc))updateExplosions();}if(Date[_0x55f1a5(0x19f)]()-readyMessageStartTime>READY_MESSAGE_DURATION){showReadyMessage=![],_0x415810=!![],explosions=[];if(typeof updateExplosions===_0x55f1a5(0xfc))updateExplosions();}_0xe068d6=!![];}}}}}}}if(_0xe068d6&&!_0x415810&&!isShowingCoopPlayersReady&&!_0x9679da&&!isShowingCaptureMessage&&_0x152468){if(!((_0x151a1e||showCsHitsMessage||showCSClearMessage)&&isManualControl)&&!showExtraLifeMessage){renderGame();return;}}if(_0x50e09c&&_0x152468&&gameOverSequenceStartTime===0x0){let _0x312441=![];const _0x5cbeba=_0x459c0e-introDisplayStartTime;let _0x2e96f9=INTRO_DURATION_PER_STEP;const _0x130cc1=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x55f1a5(0x11a),_0x36ae51=isTwoPlayerMode&&selectedGameMode===_0x55f1a5(0x1b6)&&!isPlayerTwoAI;(_0x36ae51||_0x130cc1)&&(_0x2e96f9=TWO_PLAYER_STAGE_INTRO_DURATION);if(introStep===0x1){if(_0x5cbeba<0x64){explosions=[];if(typeof updateExplosions===_0x55f1a5(0xfc))updateExplosions();}let _0x416bee=null;if(!playerIntroSoundPlayed){const _0x483411=_0x130cc1||_0x36ae51,_0x171d2d=isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'&&level>0x1;if(_0x483411){if(currentPlayer===0x1&&level===0x1&&!initialGameStartSoundPlayedThisSession)_0x416bee=startSound;else(currentPlayer===0x2||level>0x1)&&(_0x416bee=levelUpSound);}else{if(_0x171d2d)_0x416bee=levelUpSound;else{if(!isTwoPlayerMode){if(level===0x1&&!initialGameStartSoundPlayedThisSession)_0x416bee=startSound;else level>0x1&&(_0x416bee=levelUpSound);}}}}_0x416bee&&(playSound(_0x416bee),playerIntroSoundPlayed=!![],_0x416bee===startSound&&(initialGameStartSoundPlayedThisSession=!![]));if(_0x5cbeba>=_0x2e96f9){if(isChallengingStage)introStep=0x3;else introStep=0x2;introDisplayStartTime=_0x459c0e,explosions=[];if(typeof updateExplosions===_0x55f1a5(0xfc))updateExplosions();}}else{if(introStep===0x2){if(_0x5cbeba<0x64){explosions=[];if(typeof updateExplosions===_0x55f1a5(0xfc))updateExplosions();}if(!stageIntroSoundPlayed){if(playLevelUpAfterCSBonus&&(isTwoPlayerMode&&selectedGameMode===_0x55f1a5(0x109)))playSound(levelUpSound),playLevelUpAfterCSBonus=![];else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x55f1a5(0x17e)&&level>0x1)playSound(levelUpSound);else{if(!isTwoPlayerMode&&level>0x1)playSound(levelUpSound);else{if(selectedGameMode===_0x55f1a5(0x109)&&level===0x1&&!coopStartSoundPlayedThisSession){}else{if(level>0x1&&!playerIntroSoundPlayed&&!(isPlayerTwoAI&&selectedGameMode===_0x55f1a5(0x1b6))&&!initialGameStartSoundPlayedThisSession)playSound(levelUpSound);else level===0x1&&!isManualControl&&!isCoopAIDemoActive&&!initialGameStartSoundPlayedThisSession&&(playSound(startSound),initialGameStartSoundPlayedThisSession=!![]);}}}}stageIntroSoundPlayed=!![];}if(_0x5cbeba>=_0x2e96f9){_0x312441=!![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();}}else{if(introStep===0x3){if(_0x5cbeba<0x64){explosions=[];if(typeof updateExplosions===_0x55f1a5(0xfc))updateExplosions();}!csIntroSoundPlayed&&(playSound(entranceSound),csIntroSoundPlayed=!![]);if(_0x5cbeba>=_0x2e96f9){_0x312441=!![],explosions=[];if(typeof updateExplosions===_0x55f1a5(0xfc))updateExplosions();}}}}if(isInGameState&&_0x152468&&gameOverSequenceStartTime===0x0&&gameCanvas){let _0x3adfd1=null,_0x361adf=null;const _0x33a421=isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_NORMAL'&&currentPlayer===0x1&&isShowingIntro;if(_0x33a421){let _0x9f4837=![],_0x525b59=![];const _0x528299=navigator[_0x55f1a5(0xeb)]();if(connectedGamepadIndex!==null&&_0x528299?.[connectedGamepadIndex]){const _0x143050=_0x528299[connectedGamepadIndex],_0x42b49c=processSingleController(_0x143050,previousGameButtonStates);_0x9f4837=_0x42b49c[_0x55f1a5(0xcb)],_0x525b59=_0x42b49c[_0x55f1a5(0x111)];}_0x3adfd1=keyboardP1LeftDown||_0x9f4837,_0x361adf=keyboardP1RightDown||_0x525b59;}if(_0x130cc1&&currentPlayer===0x2)aiControl();else{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x55f1a5(0x17e))aiControlCoop();else!isManualControl&&!isPlayerTwoAI&&aiControl();}handlePlayerInput(),typeof moveEntities==='function'&&moveEntities(_0x3adfd1,_0x361adf),updateExplosions(),updateFloatingScores();}if(_0x312441){isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![];isManualControl&&(isShowingDemoText=![]);if(!isChallengingStage)isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x55f1a5(0x17e)?(aiShip1CanShootTime=Date[_0x55f1a5(0x19f)]()+0x3e8,aiShip2CanShootTime=Date[_0x55f1a5(0x19f)]()+0x4b0):aiCanShootTime=Date['now']()+(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x55f1a5(0x11a)?0x3e8:0xbb8);else{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x55f1a5(0x17e))aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0;else aiCanShootTime=0x0;}const _0xbd2bed=level===0x1&&selectedGameMode!=='coop',_0x3fc07e=level===0x1&&selectedGameMode===_0x55f1a5(0x109),_0x44e7fe=_0xbd2bed&&!gameJustStartedAndWaveLaunched||level>0x1||isChallengingStage||_0x3fc07e&&!gameJustStartedAndWaveLaunched;if(_0x44e7fe){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x55f1a5(0xdd)]>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound(entranceSound);}else isEntrancePhaseActive=![],stopSound(entranceSound),isWaveTransitioning=!![],readyForNextWaveReset=!![],bullets=[],enemyBullets=[],explosions=[],setTimeout(()=>{const _0x1723dc=_0x55f1a5,_0x204852=isTwoPlayerMode&&selectedGameMode===_0x1723dc(0x109)?player1Lives>0x0||player2Lives>0x0:playerLives>0x0;if((isInGameState||!isInGameState&&_0x204852)&&typeof resetWaveInternal===_0x1723dc(0xfc)){if(_0x204852)resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![];else triggerFinalGameOverSequence();}},0x64);}if(_0xbd2bed||level>0x1||isChallengingStage||_0x3fc07e)gameJustStartedAndWaveLaunched=!![];}}renderGame();return;}const _0x964d83=!_0x9679da&&!_0x50e09c&&!_0x415810&&!isShowingCaptureMessage;if(gameJustStarted&&_0x964d83){if(!gameJustStartedAndWaveLaunched){const _0x37f6b1=selectedGameMode==='coop'&&level===0x1&&coopPlayersReadyStartTime!==0x0;if(!_0x37f6b1){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x55f1a5(0xdd)]>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound(entranceSound);}else isWaveTransitioning=!![],readyForNextWaveReset=!![];}gameJustStartedAndWaveLaunched=!![];}}gameJustStarted=![];}if(_0x964d83&&isInGameState&&_0x152468&&gameOverSequenceStartTime===0x0){if(!_0x151a1e||_0x151a1e&&isManualControl){if(typeof moveEntities===_0x55f1a5(0xfc))moveEntities();updateExplosions(),updateFloatingScores();}else _0x151a1e&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x55f1a5(0x17e))&&(updateExplosions(),updateFloatingScores());}if(_0x964d83&&_0x152468&&gameOverSequenceStartTime===0x0){if(GRID_BREATH_ENABLED&&isInGameState&&!isChallengingStage&&!isWaveTransitioning&&_0x47b510){const _0x82ab53=enemies[_0x55f1a5(0x15b)](_0x122246=>_0x122246?.[_0x55f1a5(0x110)]===_0x55f1a5(0xe9));if(_0x82ab53&&isGridBreathingActive){const _0x44d7c2=_0x459c0e-gridBreathStartTime,_0x5dd928=scaleValue(level,BASE_GRID_BREATH_CYCLE_MS,MIN_GRID_BREATH_CYCLE_MS),_0x142777=_0x44d7c2%_0x5dd928;currentGridBreathFactor=(Math[_0x55f1a5(0xd1)](_0x142777/_0x5dd928*Math['PI']*0x2-Math['PI']/0x2)+0x1)/0x2;}else{if(!_0x82ab53&&isGridBreathingActive)isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0;else _0x82ab53&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=_0x459c0e,currentGridBreathFactor=0x0);}}else isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if(isEntrancePhaseActive){const _0xd5758c=enemiesSpawnedThisWave>=totalEnemiesScheduledForWave,_0x2d4998=enemies[_0x55f1a5(0x15b)](_0x2b1bcf=>_0x2b1bcf?.[_0x55f1a5(0x110)]==='following_entrance_path'||_0x2b1bcf?.[_0x55f1a5(0x110)]==='moving_to_grid'||_0x2b1bcf?.['state']===_0x55f1a5(0x114));if(totalEnemiesScheduledForWave>0x0&&_0xd5758c&&!_0x2d4998){const _0x218081=isEntrancePhaseActive;isEntrancePhaseActive=![];if(_0x218081){stopSound(entranceSound),enemiesSpawnedThisWave=0x0,totalEnemiesScheduledForWave=0x0,enemySpawnTimeouts[_0x55f1a5(0x1a7)](clearTimeout),enemySpawnTimeouts=[],gridJustCompleted=!![];if(!isChallengingStage&&!isFullGridWave){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x55f1a5(0x17e))coopAICaptureDiveAnticipationActive=!![],coopAICaptureDiveAnticipationEndTime=Date[_0x55f1a5(0x19f)]()+COOP_AI_CAPTURE_DIVE_ANTICIPATION_DURATION_MS,typeof triggerImmediateCaptureDive==='function'&&triggerImmediateCaptureDive();else typeof triggerImmediateCaptureDive===_0x55f1a5(0xfc)&&triggerImmediateCaptureDive();}}}}if(!isChallengingStage&&!_0x50e09c&&!isPaused&&!isWaveTransitioning)triggerGridFiring();if(!isWaveTransitioning&&_0x47b510&&!_0x50e09c&&!isShowingCaptureMessage&&!isEntrancePhaseActive){let _0x4faa79=enemies[_0x55f1a5(0xdd)]===0x0,_0x46a1f3=fallingShips[_0x55f1a5(0xdd)]===0x0,_0x123070=![];if(isChallengingStage){if(_0x4faa79&&!isEntrancePhaseActive)_0x123070=!![];}else{if(_0x4faa79&&!isEntrancePhaseActive&&_0x46a1f3)_0x123070=!![];}if(_0x123070){isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&gameCanvas&&gameCanvas[_0x55f1a5(0x1c2)]>0x0){const _0x3f926f=player1Lives,_0x3e3cae=player2Lives,_0x5e91da=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(_0x3f926f>0x0&&_0x3e3cae<=0x0&&ship1){const _0x1f42e2=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x67a2ce=Math[_0x55f1a5(0x167)](gameCanvas[_0x55f1a5(0x1c2)]/0x2-_0x1f42e2/0x2);ship1['x']=_0x67a2ce,ship1['targetX']=_0x67a2ce,smoothedShip1X=_0x67a2ce,ship1['y']=_0x5e91da;}else{if(_0x3e3cae>0x0&&_0x3f926f<=0x0&&ship2){const _0x43dbbf=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x51d3bb=Math[_0x55f1a5(0x167)](gameCanvas[_0x55f1a5(0x1c2)]/0x2-_0x43dbbf/0x2);ship2['x']=_0x51d3bb,ship2[_0x55f1a5(0x127)]=_0x51d3bb,smoothedShip2X=_0x51d3bb,ship2['y']=_0x5e91da;}}}isWaveTransitioning=!![];isGridSoundPlaying&&(stopSound(gridBackgroundSound),isGridSoundPlaying=![]);!isChallengingStage&&(bullets=[],enemyBullets=[]);floatingScores=[],enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;let _0x2c136b;if(isChallengingStage){csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,setTimeout(()=>{const _0x59deb2=_0x55f1a5;if(isWaveTransitioning){explosions=[];if(typeof updateExplosions===_0x59deb2(0xfc))updateExplosions();isCsCompletionDelayActive=!![],csCompletionDelayStartTime=Date[_0x59deb2(0x19f)]();}},EXPLOSION_DURATION);if(csCompletionResultIsPerfect){let _0x2e3def=0x2710;if(isTwoPlayerMode&&selectedGameMode===_0x55f1a5(0x109))(player1Lives>0x0||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&ship1)&&(player1Score+=_0x2e3def),(player2Lives>0x0||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x55f1a5(0x17e))&&ship2)&&(player2Score+=_0x2e3def),highScore=Math[_0x55f1a5(0x1e0)](highScore,player1Score,player2Score),checkAndAwardExtraLife(null);else{score+=_0x2e3def;if(!isTwoPlayerMode)player1Score=score;else{if(isTwoPlayerMode&&selectedGameMode===_0x55f1a5(0x1b6)){if(currentPlayer===0x1)player1Score=score;else player2Score=score;}}highScore=Math['max'](highScore,score,player1Score,player2Score),checkAndAwardExtraLife(currentPlayer);}_0x2c136b=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_HITS_MESSAGE_DURATION+CS_PERFECT_MESSAGE_DURATION+CS_BONUS_MESSAGE_DURATION;}else isTwoPlayerMode&&selectedGameMode==='coop'?checkAndAwardExtraLife(null):checkAndAwardExtraLife(currentPlayer),_0x2c136b=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_CLEAR_DELAY;_0x2c136b+=0x64;}else playSound(waveUpSound),normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,_0x2c136b=POST_MESSAGE_RESET_DELAY;setTimeout(()=>{const _0x5d0d53=_0x55f1a5;let _0x4345bc=![],_0xc125be=currentPlayer;if(isTwoPlayerMode&&selectedGameMode==='normal'){const _0x52d750=currentPlayer;if(currentPlayer===0x1)player1Score=score;else player2Score=score;const _0x23dd4f=switchPlayerTurn();if(_0x23dd4f){_0xc125be=currentPlayer;if(_0x52d750===0x2&&player1CompletedLevel===level)_0x4345bc=!![],player1CompletedLevel=-0x1;else{_0x4345bc=![];if(_0x52d750===0x1)player1CompletedLevel=level;}}else _0xc125be=_0x52d750,_0x4345bc=!![],player1CompletedLevel=-0x1;}else _0x4345bc=!![],_0xc125be=isTwoPlayerMode&&selectedGameMode==='coop'?0x0:0x1;if(_0x4345bc){level++;if(isTwoPlayerMode&&selectedGameMode===_0x5d0d53(0x109)){if(player1Lives>0x0)player1MaxLevelReached=Math['max'](player1MaxLevelReached,level);if(player2Lives>0x0)player2MaxLevelReached=Math[_0x5d0d53(0x1e0)](player2MaxLevelReached,level);}else{if(isTwoPlayerMode&&selectedGameMode===_0x5d0d53(0x1b6)){if(_0xc125be===0x1&&player1Lives>0x0)player1MaxLevelReached=Math['max'](player1MaxLevelReached,level);else{if(_0xc125be===0x2&&player2Lives>0x0)player2MaxLevelReached=Math[_0x5d0d53(0x1e0)](player2MaxLevelReached,level);}}else{if(playerLives>0x0)player1MaxLevelReached=Math[_0x5d0d53(0x1e0)](player1MaxLevelReached,level);}}}const _0x46dd5c=player1Lives,_0x959ba9=player2Lives;let _0xe19905=![];if(isTwoPlayerMode&&selectedGameMode===_0x5d0d53(0x109))_0xe19905=_0x46dd5c>0x0||_0x959ba9>0x0;else{if(isTwoPlayerMode&&selectedGameMode==='normal')_0xe19905=(_0xc125be===0x1?_0x46dd5c:_0x959ba9)>0x0;else _0xe19905=player1Lives>0x0;}_0xe19905?(resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![]):triggerFinalGameOverSequence();},_0x2c136b),renderGame();return;}if(!isChallengingStage){if(enemies['length']>0x0){let _0x564807=null;const _0x534d71=enemies[_0x55f1a5(0xdc)](_0x32d8c2=>_0x32d8c2?.[_0x55f1a5(0x110)]===_0x55f1a5(0xe9)),_0x53ff17=_0x534d71['length']<=0x3,_0x47a4d0=Math[_0x55f1a5(0x1e0)](0x1,Math[_0x55f1a5(0xdb)](level,LEVEL_CAP_FOR_SCALING)),_0x3d795b=0x1068,_0x41c48a=0x320,_0x56436d=(_0x47a4d0-0x1)*((_0x3d795b-_0x41c48a)/(LEVEL_CAP_FOR_SCALING-0x1)),_0x15b8f1=Math['max'](_0x41c48a,_0x3d795b-_0x56436d),_0xaf33a1=Math[_0x55f1a5(0x167)](scaleValue(level,BASE_MAX_ATTACKING_ENEMIES,MAX_MAX_ATTACKING_ENEMIES)),_0x47ead0=enemies['filter'](_0x1c08d7=>_0x1c08d7?.[_0x55f1a5(0x110)]==='attacking'||_0x1c08d7?.['state']===_0x55f1a5(0xe5))[_0x55f1a5(0xdd)];if(_0x53ff17||_0x459c0e-lastEnemyDetachTime>_0x15b8f1&&_0x534d71[_0x55f1a5(0xdd)]>0x0&&_0x47ead0<_0xaf33a1){_0x564807=findAndDetachEnemy();if(_0x564807&&_0x564807[_0x55f1a5(0xdd)]>0x0){const _0x5f5dad=_0x564807[_0x55f1a5(0xbb)](_0x3314f4=>enemies['find'](_0x117aa8=>_0x117aa8?.['id']===_0x3314f4['id']))[_0x55f1a5(0xdc)](_0x106c0e=>_0x106c0e&&_0x106c0e[_0x55f1a5(0x110)]===_0x55f1a5(0xe9));if(_0x5f5dad[_0x55f1a5(0xdd)]>0x0){const _0x44143e=_0x5f5dad[0x0],_0x59a1c4=_0x44143e[_0x55f1a5(0x12e)];if(!_0x53ff17)lastEnemyDetachTime=_0x459c0e;if(_0x59a1c4===_0x55f1a5(0x1b6)){const _0x1fa8b8=generateAttackPathInternal(_0x44143e);if(_0x1fa8b8&&_0x1fa8b8['length']>0x0){if(_0x5f5dad['length']===0x3&&_0x44143e[_0x55f1a5(0x113)]===ENEMY3_TYPE&&level!==0x1)playSound(tripleAttackSound);let _0x5ae31c=[..._0x5f5dad];const _0x3da9ad=_0x5ae31c['length'];if(_0x3da9ad>0x1){let _0x1e4a94=null,_0xff813a=[];_0x5ae31c[_0x55f1a5(0x1a7)](_0xdf812f=>{const _0x582e71=_0x55f1a5;if(_0xdf812f[_0x582e71(0x113)]===ENEMY3_TYPE)_0x1e4a94=_0xdf812f;else _0xff813a[_0x582e71(0x157)](_0xdf812f);});if(_0x1e4a94&&level!==0x1&&_0x3da9ad===0x3&&_0xff813a[_0x55f1a5(0xdd)]===0x2)_0x5ae31c=[_0xff813a[0x0],_0x1e4a94,_0xff813a[0x1]];else _0x5ae31c[_0x55f1a5(0x16b)]((_0x2e7966,_0x26a80e)=>(_0x2e7966?.[_0x55f1a5(0x1dd)]??0x0)-(_0x26a80e?.[_0x55f1a5(0x1dd)]??0x0));const _0xd2eb73=0x5;let _0x3c50cf=0x0;_0x5ae31c=_0x5ae31c['filter'](_0x5ba695=>_0x5ba695&&typeof _0x5ba695['width']===_0x55f1a5(0x178));const _0x25ad40=_0x5ae31c[_0x55f1a5(0xdd)];for(let _0x148be9=0x0;_0x148be9<_0x25ad40;_0x148be9++){_0x3c50cf+=_0x5ae31c[_0x148be9]['width'];if(_0x148be9<_0x25ad40-0x1)_0x3c50cf+=_0xd2eb73;}const _0x39d7b2=-_0x3c50cf/0x2;let _0x2470b3=_0x39d7b2;for(let _0x3fe940=0x0;_0x3fe940<_0x25ad40;_0x3fe940++){const _0x3914ef=_0x5ae31c[_0x3fe940];_0x3914ef[_0x55f1a5(0x13f)]=_0x2470b3+_0x3914ef['width']/0x2,_0x2470b3+=_0x3914ef['width']+_0xd2eb73;}}else _0x5ae31c[_0x55f1a5(0x1a7)](_0x1d2a46=>_0x1d2a46[_0x55f1a5(0x13f)]=0x0);const _0x30b2e9=_0x55f1a5(0x1d8)+_0x44143e['id']+'-'+_0x459c0e;_0x5ae31c[_0x55f1a5(0x1a7)](_0x4048c3=>{const _0x39bceb=_0x55f1a5;if(_0x4048c3)_0x4048c3[_0x39bceb(0x1b1)]=_0x30b2e9;});let _0x190d71=![],_0x4fb4ee=GROUP_FIRE_BURST_DELAY;if(_0x44143e['type']===ENEMY2_TYPE||_0x44143e[_0x55f1a5(0x113)]===ENEMY3_TYPE){_0x190d71=!![];if(_0x44143e[_0x55f1a5(0x113)]===ENEMY2_TYPE&&_0x3da9ad===0x1)_0x4fb4ee=SOLO_BUTTERFLY_FIRE_DELAY;}else{if(_0x44143e[_0x55f1a5(0x113)]===ENEMY1_TYPE)_0x190d71=!![];}if(_0x53ff17&&level>0x1)_0x190d71=![];_0x190d71&&_0x5ae31c[_0x55f1a5(0x1a7)](_0x3ad5a8=>{const _0x5102c1=_0x55f1a5,_0x159fcc=_0x3ad5a8&&!(_0x3ad5a8[_0x5102c1(0x113)]===ENEMY3_TYPE&&_0x3ad5a8[_0x5102c1(0x192)]);if(_0x159fcc)fireEnemyBurst(_0x3ad5a8['id'],'attacking',_0x4fb4ee);}),_0x5ae31c['forEach']((_0x2bb031,_0x4edb80)=>{const _0x2d2312=_0x55f1a5;_0x2bb031&&_0x2bb031['state']===_0x2d2312(0xe9)&&(_0x2bb031[_0x2d2312(0x110)]=_0x2d2312(0xe5),_0x2bb031[_0x2d2312(0x15f)]=![],_0x2bb031['velocityX']=0x0,_0x2bb031['velocityY']=0x0,_0x2bb031[_0x2d2312(0x1af)]=![],setTimeout(()=>{const _0xa676b0=_0x2d2312;if(isPaused)return;const _0x834330=enemies['find'](_0x2b108b=>_0x2b108b?.['id']===_0x2bb031['id']);if(_0x834330&&_0x834330[_0xa676b0(0x110)]==='preparing_attack')try{const _0x5a045a=scaleValue(level,BASE_ENEMY_ATTACK_SPEED,MAX_ENEMY_ATTACK_SPEED);let _0x44f1a6=0x1;if(_0x834330[_0xa676b0(0x113)]===ENEMY1_TYPE)_0x44f1a6=ENEMY1_DIVE_SPEED_FACTOR;else{if(_0x834330[_0xa676b0(0x113)]===ENEMY2_TYPE)_0x44f1a6=ENEMY2_DIVE_SPEED_FACTOR;else{if(_0x834330[_0xa676b0(0x113)]===ENEMY3_TYPE)_0x44f1a6=ENEMY3_ATTACK_SPEED_FACTOR;}}if(_0x2bb031[_0xa676b0(0x113)]===ENEMY3_TYPE)playSound(bossGalagaDiveSound);else playSound(butterflyDiveSound);_0x834330[_0xa676b0(0x110)]=_0xa676b0(0xc2),_0x834330[_0xa676b0(0x103)]=_0x1fa8b8,_0x834330[_0xa676b0(0xe7)]=0x0,_0x834330['attackPathT']=0x0,_0x834330[_0xa676b0(0x184)]=_0x5a045a*_0x44f1a6,_0x834330[_0xa676b0(0x18f)]=0x0,_0x834330['canFireThisDive']=!![];}catch(_0x5d6d67){console[_0xa676b0(0x1c5)](_0xa676b0(0xfe)+_0x2bb031['id']+':',_0x5d6d67);}},_0x4edb80*GROUP_DETACH_DELAY_MS));});}else _0x564807[_0x55f1a5(0x1a7)](_0x1c1334=>{const _0x2d1ec9=_0x55f1a5;if(_0x1c1334)_0x1c1334[_0x2d1ec9(0x15f)]=![];});}}}}}}enemies[_0x55f1a5(0x1a7)](_0x48d192=>{const _0x3338d9=_0x55f1a5;if(_0x48d192&&_0x48d192[_0x3338d9(0x113)]===ENEMY3_TYPE&&_0x48d192[_0x3338d9(0x192)]&&_0x48d192['state']===_0x3338d9(0xc2)&&_0x48d192[_0x3338d9(0x142)]&&typeof _0x48d192[_0x3338d9(0xec)]===_0x3338d9(0x178)){if(_0x459c0e-_0x48d192[_0x3338d9(0xec)]>CAPTURED_SHIP_FIRE_COOLDOWN_MS){const _0x59ce8e=_0x48d192['x']+_0x48d192[_0x3338d9(0x1c2)]/0x2,_0x20030b=_0x48d192['y']+_0x48d192[_0x3338d9(0x16a)]+_0x48d192[_0x3338d9(0x142)]['height']*0.5,_0x58fb97={'x':_0x59ce8e,'y':_0x20030b};createBulletSimple(_0x48d192,_0x58fb97)&&(_0x48d192['capturedShipLastFiredTime']=_0x459c0e,playSound(playerShootSound));}}});}}else{if(gameOverSequenceStartTime>0x0){const _0x27601b=_0x459c0e-gameOverSequenceStartTime,_0x5e69d2=_0x27601b>=GAME_OVER_DURATION;if(_0x5e69d2&&!isShowingResultsScreen){isShowingResultsScreen=!![],stopSound(gameOverSound),playSound(resultsMusicSound),explosions=[];if(typeof updateExplosions==='function')updateExplosions();}}}!_0x9679da&&renderGame();}catch(_0x13fffe){console[_0x55f1a5(0x1c5)](_0x55f1a5(0x169),_0x13fffe,_0x13fffe[_0x55f1a5(0x185)]),isPaused=![];mainLoopId&&(cancelAnimationFrame(mainLoopId),mainLoopId=null);isInGameState=![],isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',alert(_0x55f1a5(0x135)),stopAllGameSoundsInternal(),isGridSoundPlaying=![],isInvincible=![],invincibilityEndTime=0x0;try{typeof showMenuState===_0x55f1a5(0xfc)&&showMenuState();}catch(_0x7393a1){console[_0x55f1a5(0x1c5)](_0x55f1a5(0xed),_0x7393a1);}}}function checkAndAwardExtraLife(_0x8672fd=null){const _0x427dae=_0x28f57a;try{const _0x5dd46d=[];if(_0x8672fd===0x1){const _0x3d1ccd=isTwoPlayerMode&&selectedGameMode===_0x427dae(0x109)?player1Lives:isTwoPlayerMode&&selectedGameMode===_0x427dae(0x1b6)&&currentPlayer===0x1?playerLives:player1Lives,_0x266477=isTwoPlayerMode&&selectedGameMode===_0x427dae(0x109)?player1Score:isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x1?score:player1Score;_0x5dd46d['push']({'num':0x1,'currentLives':_0x3d1ccd,'currentScore':_0x266477,'thresholdsMet':player1LifeThresholdsMet});}else{if(_0x8672fd===0x2&&isTwoPlayerMode){const _0x12d5e6=selectedGameMode===_0x427dae(0x109)?player2Lives:selectedGameMode===_0x427dae(0x1b6)&&currentPlayer===0x2?playerLives:player2Lives,_0x7b1575=selectedGameMode===_0x427dae(0x109)?player2Score:selectedGameMode===_0x427dae(0x1b6)&&currentPlayer===0x2?score:player2Score;_0x5dd46d[_0x427dae(0x157)]({'num':0x2,'currentLives':_0x12d5e6,'currentScore':_0x7b1575,'thresholdsMet':player2LifeThresholdsMet});}else{if(isTwoPlayerMode&&selectedGameMode==='coop'&&_0x8672fd===null)_0x5dd46d[_0x427dae(0x157)]({'num':0x1,'currentLives':player1Lives,'currentScore':player1Score,'thresholdsMet':player1LifeThresholdsMet}),_0x5dd46d['push']({'num':0x2,'currentLives':player2Lives,'currentScore':player2Score,'thresholdsMet':player2LifeThresholdsMet});else{if(!isTwoPlayerMode&&(_0x8672fd===null||_0x8672fd===0x1))_0x5dd46d['push']({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet});else isTwoPlayerMode&&selectedGameMode==='normal'&&_0x8672fd===currentPlayer&&(currentPlayer===0x1?_0x5dd46d['push']({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet}):_0x5dd46d[_0x427dae(0x157)]({'num':0x2,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player2LifeThresholdsMet}));}}}_0x5dd46d['forEach'](_0xbc6c6d=>{const _0x54e538=_0x427dae;let _0x16894f=![];while(!![]){let _0x3588b6=![],_0x1ed482=-0x1;const _0x514175=_0xbc6c6d[_0x54e538(0x156)][_0x54e538(0x170)];if(_0x514175===0x0)_0x1ed482=EXTRA_LIFE_THRESHOLD_1;else{if(_0x514175===0x1&&!_0xbc6c6d[_0x54e538(0x156)][_0x54e538(0x105)](EXTRA_LIFE_THRESHOLD_2))_0x1ed482=EXTRA_LIFE_THRESHOLD_2;else{if(_0x514175>=0x1&&_0xbc6c6d[_0x54e538(0x156)]['has'](EXTRA_LIFE_THRESHOLD_1)&&_0xbc6c6d['thresholdsMet'][_0x54e538(0x105)](EXTRA_LIFE_THRESHOLD_2)){let _0x1d8bb2=0x0;_0xbc6c6d[_0x54e538(0x156)][_0x54e538(0x1a7)](_0x23da84=>{_0x23da84>=EXTRA_LIFE_THRESHOLD_2&&(_0x23da84-EXTRA_LIFE_THRESHOLD_2)%RECURRING_EXTRA_LIFE_INTERVAL===0x0&&_0x1d8bb2++;}),_0x1ed482=EXTRA_LIFE_THRESHOLD_2+_0x1d8bb2*RECURRING_EXTRA_LIFE_INTERVAL;}else{if(_0x514175===0x1&&_0xbc6c6d[_0x54e538(0x156)]['has'](EXTRA_LIFE_THRESHOLD_1)&&!_0xbc6c6d['thresholdsMet']['has'](EXTRA_LIFE_THRESHOLD_2))_0x1ed482=EXTRA_LIFE_THRESHOLD_2;else _0x514175===0x1&&_0xbc6c6d[_0x54e538(0x156)]['has'](EXTRA_LIFE_THRESHOLD_2)&&!_0xbc6c6d[_0x54e538(0x156)]['has'](EXTRA_LIFE_THRESHOLD_1)&&(_0x1ed482=EXTRA_LIFE_THRESHOLD_1);}}}if(_0x1ed482!==-0x1&&_0xbc6c6d[_0x54e538(0xf7)]>=_0x1ed482&&!_0xbc6c6d[_0x54e538(0x156)][_0x54e538(0x105)](_0x1ed482)){if(_0xbc6c6d[_0x54e538(0x1c1)]===0x1){if(isTwoPlayerMode&&selectedGameMode===_0x54e538(0x109))player1Lives++;else{if(isTwoPlayerMode&&selectedGameMode===_0x54e538(0x1b6)&&currentPlayer===0x1)playerLives++;else{if(!isTwoPlayerMode)playerLives++;}}player1Lives=isTwoPlayerMode&&selectedGameMode===_0x54e538(0x109)?player1Lives:isTwoPlayerMode&&selectedGameMode===_0x54e538(0x1b6)&&currentPlayer===0x1?playerLives:player1Lives,_0xbc6c6d['currentLives']=player1Lives;}else{if(_0xbc6c6d[_0x54e538(0x1c1)]===0x2){if(isTwoPlayerMode&&selectedGameMode===_0x54e538(0x109))player2Lives++;else{if(isTwoPlayerMode&&selectedGameMode===_0x54e538(0x1b6)&&currentPlayer===0x2)playerLives++;}player2Lives=isTwoPlayerMode&&selectedGameMode===_0x54e538(0x109)?player2Lives:isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x2?playerLives:player2Lives,_0xbc6c6d[_0x54e538(0x17f)]=player2Lives;}}_0xbc6c6d[_0x54e538(0x156)][_0x54e538(0x1c9)](_0x1ed482),_0x16894f=!![],_0x3588b6=!![];}if(!_0x3588b6)break;}_0x16894f&&!showExtraLifeMessage&&!showCsBonusScoreMessage&&!showPerfectMessage&&!showCsHitsMessage&&!showCSClearMessage&&!showReadyMessage&&setTimeout(()=>{const _0x1b3502=_0x54e538;if(isInGameState){explosions=[];if(typeof updateExplosions===_0x1b3502(0xfc))updateExplosions();showExtraLifeMessage=!![],extraLifeMessageStartTime=Date[_0x1b3502(0x19f)](),playSound(extraLifeSound);}},EXPLOSION_DURATION);});}catch(_0x242c0a){console[_0x427dae(0x1c5)](_0x427dae(0x18c),_0x242c0a);}}