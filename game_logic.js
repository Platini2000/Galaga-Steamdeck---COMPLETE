const _0x48e791=_0x4661;(function(_0x588a40,_0xf8287d){const _0x256013=_0x4661,_0x380b12=_0x588a40();while(!![]){try{const _0x4b0bed=-parseInt(_0x256013(0x21b))/0x1+-parseInt(_0x256013(0x15b))/0x2+parseInt(_0x256013(0x240))/0x3+parseInt(_0x256013(0x23b))/0x4*(-parseInt(_0x256013(0x140))/0x5)+-parseInt(_0x256013(0x1f1))/0x6*(-parseInt(_0x256013(0x238))/0x7)+-parseInt(_0x256013(0x16c))/0x8+parseInt(_0x256013(0x107))/0x9;if(_0x4b0bed===_0xf8287d)break;else _0x380b12['push'](_0x380b12['shift']());}catch(_0x45325d){_0x380b12['push'](_0x380b12['shift']());}}}(_0x53fe,0xe1959));function generateAttackPathInternal(_0x3d8b3b){const _0x3d6d64=_0x4661;try{if(!_0x3d8b3b||!gameCanvas)return[];const _0x17c406=_0x3d8b3b[_0x3d6d64(0x1b3)]===ENEMY3_TYPE?BOSS_WIDTH:_0x3d8b3b['type']===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x12647f=_0x3d8b3b[_0x3d6d64(0x1b3)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x3d8b3b['type']===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x2aa318=_0x17c406*0.5,_0x7f0ba5=gameCanvas['width'],_0x58b648=gameCanvas[_0x3d6d64(0x1dd)];let _0x39e164=[];const _0x71c049={'x':_0x3d8b3b['x'],'y':_0x3d8b3b['y']},_0x201a20=Math[_0x3d6d64(0x20a)](_0x58b648*0.06,_0x12647f*1.8),_0x3d10a2=Math[_0x3d6d64(0x20a)](_0x7f0ba5*0.04,_0x17c406*1.2),_0x37161f=_0x3d8b3b['x']+_0x17c406/0x2<_0x7f0ba5/0x2?0x1:-0x1,_0x275fe2={'x':_0x71c049['x']-_0x37161f*_0x3d10a2*0.6,'y':_0x71c049['y']-_0x201a20};_0x275fe2['x']=Math[_0x3d6d64(0x1a4)](_0x2aa318,Math[_0x3d6d64(0x20a)](_0x7f0ba5-_0x2aa318-_0x17c406,_0x275fe2['x'])),_0x275fe2['y']=Math[_0x3d6d64(0x1a4)](_0x2aa318,_0x275fe2['y']);const _0x19014b={'x':_0x71c049['x']+_0x37161f*_0x3d10a2*0.1,'y':_0x71c049['y']-_0x201a20*1.4},_0x120e05={'x':_0x275fe2['x']+_0x37161f*_0x3d10a2*0.3,'y':_0x71c049['y']-_0x201a20*1.5},_0x38c810={'p0':_0x71c049,'p1':_0x19014b,'p2':_0x120e05,'p3':_0x275fe2};_0x39e164['push'](_0x38c810);const _0x3bf462=_0x275fe2,_0x339909=_0x58b648*0.45,_0x71317=_0x7f0ba5*0.22,_0x10ecea=_0x58b648*0.28,_0xc9691d=0.5,_0x2ab471=0.6,_0x2d6865=_0x58b648*0.85,_0x2d9d32=Math[_0x3d6d64(0x218)](Math[_0x3d6d64(0x16a)]()*0x3);let _0x55e719=[];if(_0x2d9d32===0x0){const _0x6221dc=_0x339909+Math[_0x3d6d64(0x16a)]()*_0x58b648*0.1,_0x1d49f2=_0x71317+Math[_0x3d6d64(0x16a)]()*_0x7f0ba5*0.08,_0x2937b1=_0x10ecea+Math[_0x3d6d64(0x16a)]()*_0x58b648*0.08,_0x1c7745=_0x3bf462['x']+_0x37161f*_0x1d49f2*0.5,_0x28ad80=Math[_0x3d6d64(0x20a)](_0x2d6865,_0x3bf462['y']+_0x6221dc),_0x4d1071=_0x1c7745+_0x37161f*_0x1d49f2*0.5,_0x2bd9c6=Math['max'](_0x3bf462['y']+0x14,_0x28ad80-_0x2937b1),_0x53dd4b=_0x4d1071-_0x37161f*_0x1d49f2*0.9,_0x5c9a04=Math['max'](_0x3bf462['y']+0x28,_0x2bd9c6+_0x2937b1*0.6),_0x3e7275=_0x53dd4b-_0x37161f*_0x1d49f2*0.3,_0xacce88=_0x58b648+_0x12647f*0x2,_0x16b11f=Math[_0x3d6d64(0x1a4)](_0x2aa318,Math[_0x3d6d64(0x20a)](_0x7f0ba5-_0x2aa318-_0x17c406,_0x1c7745)),_0x4b5363=Math[_0x3d6d64(0x1a4)](_0x2aa318,Math[_0x3d6d64(0x20a)](_0x7f0ba5-_0x2aa318-_0x17c406,_0x4d1071)),_0x46b1c5=Math[_0x3d6d64(0x1a4)](_0x2aa318,Math[_0x3d6d64(0x20a)](_0x7f0ba5-_0x2aa318-_0x17c406,_0x53dd4b)),_0x1ca9c2={'x':_0x3bf462['x'],'y':_0x3bf462['y']+_0x6221dc*_0x2ab471*0.5},_0x3af292={'x':_0x16b11f-_0x37161f*_0x1d49f2*_0xc9691d,'y':_0x28ad80},_0x381ba6={'x':_0x16b11f,'y':_0x28ad80},_0x36bd6a={'x':_0x16b11f+_0x37161f*_0x1d49f2*_0xc9691d,'y':_0x28ad80},_0x12e24e={'x':_0x4b5363,'y':_0x2bd9c6+_0x2937b1*_0x2ab471},_0x36e52b={'x':_0x4b5363,'y':_0x2bd9c6},_0x162264={'x':_0x4b5363,'y':_0x2bd9c6-_0x2937b1*_0x2ab471*0.5},_0x23cb50={'x':_0x46b1c5+_0x37161f*_0x1d49f2*_0xc9691d,'y':_0x5c9a04},_0x18ee90={'x':_0x46b1c5,'y':_0x5c9a04},_0x23263d={'x':_0x18ee90['x'],'y':_0x18ee90['y']+_0x58b648*0.1},_0x300734={'x':_0x3e7275,'y':_0xacce88-_0x58b648*0.2},_0x57c6a5={'x':_0x3e7275,'y':_0xacce88};_0x55e719=[{'p0':_0x3bf462,'p1':_0x1ca9c2,'p2':_0x3af292,'p3':_0x381ba6},{'p0':_0x381ba6,'p1':_0x36bd6a,'p2':_0x12e24e,'p3':_0x36e52b},{'p0':_0x36e52b,'p1':_0x162264,'p2':_0x23cb50,'p3':_0x18ee90},{'p0':_0x18ee90,'p1':_0x23263d,'p2':_0x300734,'p3':_0x57c6a5}];}else{if(_0x2d9d32===0x1){const _0x136adb=_0x339909*0.8+Math[_0x3d6d64(0x16a)]()*_0x58b648*0.1,_0x59638d=_0x71317*1.2+Math[_0x3d6d64(0x16a)]()*_0x7f0ba5*0.1,_0xfe5cbe=_0x10ecea*0.7+Math[_0x3d6d64(0x16a)]()*_0x58b648*0.1,_0x30381b=_0x3bf462['x']+_0x37161f*_0x59638d*0.4,_0x3df5b2=Math[_0x3d6d64(0x20a)](_0x2d6865-_0xfe5cbe*0.5,_0x3bf462['y']+_0x136adb*0.6),_0x117a0a=_0x30381b+_0x37161f*_0x59638d*0.6,_0x4e05cb=Math[_0x3d6d64(0x20a)](_0x2d6865,_0x3df5b2+_0xfe5cbe),_0x136830=_0x117a0a-_0x37161f*_0x59638d*0.5,_0x3f6397=_0x58b648+_0x12647f*0x2,_0x15704f=Math[_0x3d6d64(0x1a4)](_0x2aa318,Math['min'](_0x7f0ba5-_0x2aa318-_0x17c406,_0x30381b)),_0x11fac5=Math[_0x3d6d64(0x1a4)](_0x2aa318,Math[_0x3d6d64(0x20a)](_0x7f0ba5-_0x2aa318-_0x17c406,_0x117a0a)),_0x409bcc={'x':_0x3bf462['x']-_0x37161f*_0x59638d*0.1,'y':_0x3bf462['y']+_0x136adb*0.3},_0x22cd9e={'x':_0x15704f-_0x37161f*_0x59638d*_0xc9691d*0.8,'y':_0x3df5b2+_0xfe5cbe*_0x2ab471*0.4},_0x370089={'x':_0x15704f,'y':_0x3df5b2},_0x462787={'x':_0x15704f+_0x37161f*_0x59638d*_0xc9691d*0.8,'y':_0x3df5b2-_0xfe5cbe*_0x2ab471*0.4},_0xe82716={'x':_0x11fac5+_0x37161f*_0x59638d*_0xc9691d*0.6,'y':_0x4e05cb+_0xfe5cbe*_0x2ab471*0.5},_0x33f569={'x':_0x11fac5,'y':_0x4e05cb},_0x265807={'x':_0x11fac5-_0x37161f*_0x59638d*0.2,'y':_0x4e05cb+_0x58b648*0.1},_0x4e70bc={'x':_0x136830,'y':_0x3f6397-_0x58b648*0.3},_0x1675e7={'x':_0x136830,'y':_0x3f6397};_0x55e719=[{'p0':_0x3bf462,'p1':_0x409bcc,'p2':_0x22cd9e,'p3':_0x370089},{'p0':_0x370089,'p1':_0x462787,'p2':_0xe82716,'p3':_0x33f569},{'p0':_0x33f569,'p1':_0x265807,'p2':_0x4e70bc,'p3':_0x1675e7}];}else{const _0x10ce18=_0x339909*0.6+Math[_0x3d6d64(0x16a)]()*_0x58b648*0.05,_0x33f84a=_0x71317*0.7+Math['random']()*_0x7f0ba5*0.05,_0x4d327b=_0x10ecea*0.6+Math['random']()*_0x58b648*0.05,_0xce8176=_0x4d327b*1.5,_0x4a863e=_0x3bf462['x']+_0x37161f*_0x33f84a*0.5,_0x5b67ab=Math[_0x3d6d64(0x20a)](_0x2d6865-_0xce8176,_0x3bf462['y']+_0x10ce18),_0x3461a2=_0x4a863e+_0x37161f*_0x33f84a*0.5,_0x52c900=_0x5b67ab+_0x4d327b,_0x1b14b7=_0x3461a2-_0x37161f*_0x33f84a*0.8,_0x2c9523=Math[_0x3d6d64(0x20a)](_0x2d6865,_0x52c900+_0xce8176*0.7),_0x2bf659=_0x1b14b7+_0x37161f*_0x33f84a*0.4,_0x2a59f3=_0x2c9523+_0x4d327b*0.8,_0x1ded0d=_0x2bf659,_0x438643=_0x58b648+_0x12647f*0x2,_0x2f13c5=Math[_0x3d6d64(0x1a4)](_0x2aa318,Math[_0x3d6d64(0x20a)](_0x7f0ba5-_0x2aa318-_0x17c406,_0x4a863e)),_0x95056c=Math['max'](_0x2aa318,Math['min'](_0x7f0ba5-_0x2aa318-_0x17c406,_0x3461a2)),_0x206f0b=Math['max'](_0x2aa318,Math['min'](_0x7f0ba5-_0x2aa318-_0x17c406,_0x1b14b7)),_0x1ff242=Math[_0x3d6d64(0x1a4)](_0x2aa318,Math['min'](_0x7f0ba5-_0x2aa318-_0x17c406,_0x2bf659)),_0x5cd5ad={'x':_0x3bf462['x'],'y':_0x3bf462['y']+_0x10ce18*0.5},_0x35b502={'x':_0x2f13c5-_0x37161f*_0x33f84a*_0xc9691d,'y':_0x5b67ab+_0x4d327b*_0x2ab471*0.3},_0x4c1ca6={'x':_0x2f13c5,'y':_0x5b67ab},_0xbf6813={'x':_0x2f13c5+_0x37161f*_0x33f84a*_0xc9691d,'y':_0x5b67ab-_0x4d327b*_0x2ab471*0.3},_0x121d41={'x':_0x95056c+_0x37161f*_0x33f84a*_0xc9691d,'y':_0x52c900+_0x4d327b*_0x2ab471*0.5},_0x3888f7={'x':_0x95056c,'y':_0x52c900},_0x2a9ee4={'x':_0x95056c-_0x37161f*_0x33f84a*_0xc9691d,'y':_0x52c900-_0x4d327b*_0x2ab471*0.5},_0x26bb17={'x':_0x206f0b-_0x37161f*_0x33f84a*_0xc9691d,'y':_0x2c9523+_0x4d327b*_0x2ab471*0.4},_0x36f606={'x':_0x206f0b,'y':_0x2c9523},_0x592057={'x':_0x206f0b+_0x37161f*_0x33f84a*_0xc9691d,'y':_0x2c9523-_0x4d327b*_0x2ab471*0.4},_0x3a4cee={'x':_0x1ff242+_0x37161f*_0x33f84a*_0xc9691d,'y':_0x2a59f3+_0x4d327b*_0x2ab471*0.6},_0xa3c73f={'x':_0x1ff242,'y':_0x2a59f3},_0x59f4e1={'x':_0x1ff242-_0x37161f*_0x33f84a*0.1,'y':_0x2a59f3+_0x58b648*0.05},_0x5c0a0d={'x':_0x1ded0d,'y':_0x438643-_0x58b648*0.2},_0x11c18e={'x':_0x1ded0d,'y':_0x438643};_0x55e719=[{'p0':_0x3bf462,'p1':_0x5cd5ad,'p2':_0x35b502,'p3':_0x4c1ca6},{'p0':_0x4c1ca6,'p1':_0xbf6813,'p2':_0x121d41,'p3':_0x3888f7},{'p0':_0x3888f7,'p1':_0x2a9ee4,'p2':_0x26bb17,'p3':_0x36f606},{'p0':_0x36f606,'p1':_0x592057,'p2':_0x3a4cee,'p3':_0xa3c73f},{'p0':_0xa3c73f,'p1':_0x59f4e1,'p2':_0x5c0a0d,'p3':_0x11c18e}];}}return _0x39e164['push'](..._0x55e719),_0x39e164;}catch(_0x48d563){return console[_0x3d6d64(0x1cc)](_0x3d6d64(0x1c1)+_0x3d8b3b?.['id']+':',_0x48d563),[];}}window['generateAttackPath']=generateAttackPathInternal;function resetAllMessagesInternal(){showReadyMessage=![],isShowingIntro=![],showCsHitsMessage=![],showPerfectMessage=![],showCsBonusScoreMessage=![],showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showExtraLifeMessage=![],isShowingCaptureMessage=![],isShowingPlayerGameOverMessage=![],isShowingCoopPlayersReady=![],csHitsMessageStartTime=0x0,perfectMessageStartTime=0x0,csBonusScoreMessageStartTime=0x0,csClearMessageStartTime=0x0,extraLifeMessageStartTime=0x0,readyMessageStartTime=0x0,captureMessageStartTime=0x0,playerGameOverMessageStartTime=0x0,csCompletionDelayStartTime=0x0,introDisplayStartTime=0x0,coopPlayersReadyStartTime=0x0;}window['resetAllMessages']=resetAllMessagesInternal;function stopAllGameSoundsInternal(){const _0x5e15b3=_0x4661;if(typeof soundPaths===_0x5e15b3(0x11a)&&soundPaths!==null&&typeof stopSound==='function')for(const _0x38d720 in soundPaths){stopSound(_0x38d720);}isGridSoundPlaying=![];}function _0x4661(_0x13da67,_0x1048dd){const _0x53fe0f=_0x53fe();return _0x4661=function(_0x4661f1,_0xab7da9){_0x4661f1=_0x4661f1-0x102;let _0x4f62af=_0x53fe0f[_0x4661f1];return _0x4f62af;},_0x4661(_0x13da67,_0x1048dd);}window[_0x48e791(0x1c5)]=stopAllGameSoundsInternal;function resetGameInternal(){const _0x5c72c7=_0x48e791;score=0x0,level=0x1,playerLives=0x3;if(isTwoPlayerMode){player1Lives=0x3,player2Lives=0x3,player1Score=0x0,player2Score=0x0,currentPlayer=0x1,player1CompletedLevel=-0x1,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet[_0x5c72c7(0x186)]();else player1LifeThresholdsMet=new Set();if(player2LifeThresholdsMet instanceof Set)player2LifeThresholdsMet[_0x5c72c7(0x186)]();else player2LifeThresholdsMet=new Set();player1IsDualShipActive=![],player2IsDualShipActive=![],isPlayer1ShipCaptured=![],isPlayer2ShipCaptured=![],isPlayer1WaitingForRespawn=![],isPlayer2WaitingForRespawn=![],isPlayer1Invincible=![],isPlayer2Invincible=![],player1RespawnTime=0x0,player2RespawnTime=0x0,player1InvincibilityEndTime=0x0,player2InvincibilityEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![];if(selectedGameMode===_0x5c72c7(0x1a7)){playerLives=0x0;if(gameCanvas&&gameCanvas[_0x5c72c7(0x10d)]>0x0&&gameCanvas['height']>0x0){const _0x38b305=gameCanvas[_0x5c72c7(0x10d)]/0x2-gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x497491=gameCanvas[_0x5c72c7(0x10d)]/0x2+gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x175ee7=gameCanvas[_0x5c72c7(0x1dd)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;ship1={'x':_0x38b305,'y':_0x175ee7,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x38b305,'id':'p1'},ship2={'x':_0x497491,'y':_0x175ee7,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x497491,'id':'p2'},(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&(smoothedShip1X=_0x38b305,smoothedShip2X=_0x497491,aiShip1TargetEnemy=null,aiShip2TargetEnemy=null,aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0,aiShip1LastShotTime=0x0,aiShip2LastShotTime=0x0,aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0);}ship=null;}else{if(!ship&&gameCanvas&&gameCanvas['width']>0x0&&gameCanvas[_0x5c72c7(0x1dd)]>0x0)ship={'x':Math[_0x5c72c7(0x105)](gameCanvas[_0x5c72c7(0x10d)]/0x2-SHIP_WIDTH/0x2),'y':gameCanvas[_0x5c72c7(0x1dd)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':_0x5c72c7(0x1ac)},ship['targetX']=ship['x'];else ship&&gameCanvas&&gameCanvas[_0x5c72c7(0x10d)]>0x0&&gameCanvas[_0x5c72c7(0x1dd)]>0x0&&(ship['x']=Math['round'](gameCanvas['width']/0x2-SHIP_WIDTH/0x2),ship[_0x5c72c7(0x217)]=ship['x'],ship['y']=gameCanvas[_0x5c72c7(0x1dd)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}}else{player1Lives=0x3,player1Score=0x0,player1MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet[_0x5c72c7(0x186)]();else player1LifeThresholdsMet=new Set();if(!ship&&gameCanvas&&gameCanvas['width']>0x0&&gameCanvas[_0x5c72c7(0x1dd)]>0x0)ship={'x':Math[_0x5c72c7(0x105)](gameCanvas[_0x5c72c7(0x10d)]/0x2-SHIP_WIDTH/0x2),'y':gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':_0x5c72c7(0x1ac)},ship[_0x5c72c7(0x217)]=ship['x'];else ship&&gameCanvas&&gameCanvas['width']>0x0&&gameCanvas[_0x5c72c7(0x1dd)]>0x0&&(ship['x']=Math['round'](gameCanvas['width']/0x2-SHIP_WIDTH/0x2),ship[_0x5c72c7(0x217)]=ship['x'],ship['y']=gameCanvas[_0x5c72c7(0x1dd)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,isDualShipActive=![];if(!isTwoPlayerMode)player1IsDualShipActive=![];fallingShips=[],visualOffsetX=-0x14,gameOverSequenceStartTime=0x0,isShowingResultsScreen=![],gameStartTime=Date[_0x5c72c7(0x1ba)](),gameJustStarted=!![],gameJustStartedAndWaveLaunched=![],currentGridOffsetX=0x0,gridMoveDirection=0x1,gridJustCompleted=![],isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,lastGridFireCheckTime=0x0,player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,scoreEarnedThisCS=0x0,challengingStageEnemiesHit=0x0,aiNeedsStabilization=!![],aiStabilizationEndTime=0x0,smoothedShipX=undefined,aiCanShootTime=0x0,aiLastShotTime=0x0,!(selectedGameMode===_0x5c72c7(0x1a7)&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'))&&(aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0),playerLastShotTime=0x0,player1LastShotTime=0x0,player2LastShotTime=0x0,p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],isShowingCoopPlayersReady=![],coopPlayersReadyStartTime=0x0,resetWaveInternal();}window[_0x48e791(0x115)]=resetGameInternal;function resetWaveInternal(){const _0x3e2232=_0x48e791;isWaveTransitioning=![],readyForNextWave=![],readyForNextWaveReset=![],isEntrancePhaseActive=!![],firstEnemyLanded=![],captureAttemptMadeThisLevel=![],gameJustStartedAndWaveLaunched=![],aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![],enemies=[],bullets=[],enemyBullets=[],explosions=[],floatingScores=[],hitSparks=[];Array[_0x3e2232(0x102)](enemySpawnTimeouts)&&enemySpawnTimeouts['forEach'](clearTimeout);enemySpawnTimeouts=[],squadronCompletionStatus={},squadronEntranceFiringStatus={},totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;const _0x2e36a9=getWaveTypeInternal(level);isChallengingStage=_0x2e36a9===_0x3e2232(0x16d),isFullGridWave=_0x2e36a9===_0x3e2232(0x1c9),challengingStageEnemiesHit=0x0,scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null;(isFullGridWave||isChallengingStage)&&(isEntrancePhaseActive=![]);const _0x128cbd=isShowingDemoText;resetAllMessagesInternal();_0x128cbd&&(isShowingDemoText=!![]);if(selectedGameMode===_0x3e2232(0x1a7)&&level===0x1)isShowingIntro=![],introStep=0x2;else{if(isTwoPlayerMode&&selectedGameMode===_0x3e2232(0x213)||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_NORMAL'){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(isChallengingStage){introStep=0x3,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(level===0x1&&!isTwoPlayerMode){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{introStep=0x2,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}}}}isShowingIntro&&!(selectedGameMode===_0x3e2232(0x1a7)&&level===0x1)&&(introDisplayStartTime=Date[_0x3e2232(0x1ba)]());playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],currentWaveDefinition=generateWaveDefinitionInternal(level);if(selectedGameMode===_0x3e2232(0x1a7)){if(gameCanvas&&gameCanvas['width']>0x0&&gameCanvas[_0x3e2232(0x1dd)]>0x0){const _0x2094eb=ship1&&player1Lives>0x0,_0x4ee0fa=ship2&&player2Lives>0x0,_0x10d6b2=gameCanvas[_0x3e2232(0x1dd)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(_0x2094eb&&_0x4ee0fa){const _0x5f5054=gameCanvas[_0x3e2232(0x10d)]/0x2-gameCanvas[_0x3e2232(0x10d)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1&&(ship1[_0x3e2232(0x217)]=_0x5f5054,ship1['x']=_0x5f5054,smoothedShip1X=_0x5f5054,ship1['y']=_0x10d6b2);const _0x2f83c6=gameCanvas[_0x3e2232(0x10d)]/0x2+gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2[_0x3e2232(0x217)]=_0x2f83c6,ship2['x']=_0x2f83c6,smoothedShip2X=_0x2f83c6,ship2['y']=_0x10d6b2);}else{if(_0x2094eb&&ship1){const _0x269ef1=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x9a6161=Math[_0x3e2232(0x105)](gameCanvas[_0x3e2232(0x10d)]/0x2-_0x269ef1/0x2);ship1[_0x3e2232(0x217)]=_0x9a6161,ship1['x']=_0x9a6161,smoothedShip1X=_0x9a6161,ship1['y']=_0x10d6b2;}else{if(_0x4ee0fa&&ship2){const _0x12e742=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x5cc187=Math[_0x3e2232(0x105)](gameCanvas[_0x3e2232(0x10d)]/0x2-_0x12e742/0x2);ship2[_0x3e2232(0x217)]=_0x5cc187,ship2['x']=_0x5cc187,smoothedShip2X=_0x5cc187,ship2['y']=_0x10d6b2;}}}}else{if(_0x2094eb&&ship1)ship1['y']=_0x10d6b2;if(_0x4ee0fa&&ship2)ship2['y']=_0x10d6b2;}}}else{if(ship&&gameCanvas&&gameCanvas[_0x3e2232(0x10d)]>0x0&&gameCanvas[_0x3e2232(0x1dd)]>0x0&&(forceCenterShipNextReset||!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x3e2232(0x213)&&currentPlayer===0x2)){let _0x2529f0=ship[_0x3e2232(0x10d)];if(isDualShipActive)_0x2529f0=DUAL_SHIP_OFFSET_X+SHIP_WIDTH;ship['x']=Math[_0x3e2232(0x105)](gameCanvas['width']/0x2-_0x2529f0/0x2),ship[_0x3e2232(0x217)]=ship['x'],ship['y']=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(isPlayerTwoAI&&selectedGameMode===_0x3e2232(0x213)&&currentPlayer===0x2)smoothedShipX=ship['x'];}else ship&&gameCanvas&&gameCanvas[_0x3e2232(0x10d)]>0x0&&(ship['y']=gameCanvas[_0x3e2232(0x1dd)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);}forceCenterShipNextReset=![];if(!isManualControl&&aiNeedsStabilization&&selectedGameMode!=='coop'&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode===_0x3e2232(0x213)&&currentPlayer===0x2)){aiStabilizationEndTime=Date[_0x3e2232(0x1ba)]()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}else{if(isPlayerTwoAI&&selectedGameMode===_0x3e2232(0x213)&&currentPlayer===0x2&&aiNeedsStabilization){aiStabilizationEndTime=Date[_0x3e2232(0x1ba)]()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}}}window['resetWave']=resetWaveInternal;function getWaveTypeInternal(_0x532d1d){const _0x35f113=_0x48e791,_0x2f5a40=(_0x532d1d-0x1)%0x4;switch(_0x2f5a40){case 0x0:return'full_grid';case 0x1:return _0x35f113(0x109);case 0x2:return _0x35f113(0x16d);case 0x3:return _0x35f113(0x225);default:return _0x35f113(0x1a6);}}window[_0x48e791(0x10c)]=getWaveTypeInternal;function generateWaveDefinitionInternal(_0x556f15){const _0x4d7719=_0x48e791;let _0x516a8e=[];currentWavePatternIndex=-0x1;const _0xb8f6ec=getWaveTypeInternal(_0x556f15);if(typeof waveEntrancePatterns===_0x4d7719(0x11b)||!Array['isArray'](waveEntrancePatterns)||waveEntrancePatterns[_0x4d7719(0x14e)]<0x2)return[];if(_0xb8f6ec===_0x4d7719(0x16d))_0x516a8e=[];else{if(_0xb8f6ec===_0x4d7719(0x1c9)){currentWavePatternIndex=0x0;const _0x946c74=waveEntrancePatterns[0x0];if(!_0x946c74||_0x946c74[_0x4d7719(0x14e)]===0x0)_0x516a8e=[];else try{_0x516a8e=JSON[_0x4d7719(0x152)](JSON[_0x4d7719(0x14d)](_0x946c74),(_0x447cc8,_0x24858a)=>{const _0x2d69b4=_0x4d7719;return _0x24858a&&typeof _0x24858a===_0x2d69b4(0x11a)&&_0x24858a[_0x2d69b4(0x1b3)]===ENEMY3_TYPE&&typeof _0x24858a['hasCapturedShip']===_0x2d69b4(0x11b)&&(_0x24858a[_0x2d69b4(0x1cb)]=![]),_0x24858a;});}catch(_0x42fb0a){_0x516a8e=[];}}else{if(_0xb8f6ec==='entrance_flight_1'){currentWavePatternIndex=0x0;const _0x316c1d=waveEntrancePatterns[0x0];if(!_0x316c1d||_0x316c1d[_0x4d7719(0x14e)]===0x0)_0x516a8e=[];else try{_0x516a8e=JSON[_0x4d7719(0x152)](JSON[_0x4d7719(0x14d)](_0x316c1d),(_0x33ec9d,_0x56dc49)=>{const _0x582f05=_0x4d7719;return _0x56dc49&&typeof _0x56dc49==='object'&&_0x56dc49['type']===ENEMY3_TYPE&&typeof _0x56dc49[_0x582f05(0x1cb)]===_0x582f05(0x11b)&&(_0x56dc49['hasCapturedShip']=![]),_0x56dc49;});}catch(_0x5b3a00){_0x516a8e=[];}}else{if(_0xb8f6ec===_0x4d7719(0x225)){currentWavePatternIndex=0x1;const _0x3105d2=waveEntrancePatterns[0x1];if(!_0x3105d2||_0x3105d2[_0x4d7719(0x14e)]===0x0)_0x516a8e=[];else try{_0x516a8e=JSON[_0x4d7719(0x152)](JSON[_0x4d7719(0x14d)](_0x3105d2),(_0x37b237,_0x564606)=>{const _0x296007=_0x4d7719;return _0x564606&&typeof _0x564606==='object'&&_0x564606[_0x296007(0x1b3)]===ENEMY3_TYPE&&typeof _0x564606[_0x296007(0x1cb)]==='undefined'&&(_0x564606[_0x296007(0x1cb)]=![]),_0x564606;});}catch(_0x5865cf){_0x516a8e=[];}}else _0x516a8e=[];}}}if(_0xb8f6ec!=='challenging_stage'){if(typeof normalWaveEntrancePaths===_0x4d7719(0x11b)||Object[_0x4d7719(0x1d5)](normalWaveEntrancePaths)[_0x4d7719(0x14e)]===0x0)return _0x516a8e;for(let _0xaf75ed=_0x516a8e[_0x4d7719(0x14e)]-0x1;_0xaf75ed>=0x0;_0xaf75ed--){const _0x241f32=_0x516a8e[_0xaf75ed];if(!normalWaveEntrancePaths?.[_0x241f32[_0x4d7719(0x124)]]){_0x516a8e['splice'](_0xaf75ed,0x1);continue;}if(_0x241f32[_0x4d7719(0x1e9)]&&Array[_0x4d7719(0x102)](_0x241f32[_0x4d7719(0x1e9)])){for(let _0x149751=_0x241f32[_0x4d7719(0x1e9)][_0x4d7719(0x14e)]-0x1;_0x149751>=0x0;_0x149751--){const _0x5a67d4=_0x241f32[_0x4d7719(0x1e9)][_0x149751];(!_0x5a67d4||!normalWaveEntrancePaths?.[_0x5a67d4[_0x4d7719(0x18c)]])&&_0x241f32[_0x4d7719(0x1e9)][_0x4d7719(0x1ed)](_0x149751,0x1),_0x5a67d4&&_0x5a67d4[_0x4d7719(0x1b3)]===ENEMY3_TYPE&&typeof _0x5a67d4[_0x4d7719(0x1cb)]===_0x4d7719(0x11b)&&(_0x5a67d4[_0x4d7719(0x1cb)]=![]);}_0x241f32[_0x4d7719(0x1e9)][_0x4d7719(0x14e)]===0x0&&_0x516a8e['splice'](_0xaf75ed,0x1);}else _0x516a8e[_0x4d7719(0x1ed)](_0xaf75ed,0x1);}}return _0x516a8e;}window['generateWaveDefinition']=generateWaveDefinitionInternal;function _0x53fe(){const _0x3326e9=['CS_HorizontalFlyByL','CS_LoopAttack_TR','tintProgress','Error\x20in\x20renderGame:','squadronId','CS3_DiveLoopL_Sharp','1P_VS_AI_COOP','rotationDirection','enemyShootSound','attackType','Error\x20calculating\x20bezier\x20point\x20during\x20attack\x20for\x20','clear','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!','1\x20PLAYER','velocityX','fillStyle','HIGH\x20SCORE','entrancePathId','returning','Error\x20updating\x20explosions:','explosionSound','switch_player','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20','Invalid\x20Normal\x20Bezier\x20segment\x20','attackGroupId','.\x20Skipping.','canFireThisDive','attackPathT','bossGalagaDiveSound','\x20in\x20returning','\x20for\x20SHARED\x20path\x20','\x20after\x20invalid\x20path\x20index','capturedShipLastFiredTime','findIndex','\x20at\x20[','\x20in\x20moving_to_grid\x20state\x20without\x20target.\x20Recalculating.','Error\x20calculating\x20Normal\x20Bezier\x20point\x20for\x20enemy\x20','Error\x20in\x20aiControl:','naturalWidth','hasFired','landedTime','max','scheduledStartTime','unknown','coop','playerNum','state','!\x20Returning.','\x20(state:\x20','main','!!!\x20CRITICAL\x20ERROR\x20IN\x20runSingleGameUpdate\x20!!!','blue','gridBackgroundSound','beeHitSound','tripleAttackSound','particles','type','captureSound',',\x20Idx\x20','\x20(Path\x20','\x20after\x20bezier\x20error','Entrance\x20Wave:\x20Assigned\x20entrance\x20path\x20\x22','warn','now','completed','attackFormationOffsetX',',\x20isFullGrid:\x20','player2',',\x20index\x20','Invalid\x20CS\x20Bezier\x20segment\x20','[DEBUG]\x20Error\x20generating\x20attack\x20path\x20for\x20enemy\x20','playerShootSound','Entrance\x20Wave:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','CS:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','stopAllGameSounds','sort','targetPlayerId','velocityY','full_grid','every','hasCapturedShip','error','.\x20Enemy\x20','lastFiredTime','Error\x20getting\x20grid\x20pos\x20within\x20\x27in_grid\x27\x20for\x20','getGamepads','waveUpSound','map','push','\x22\x20for\x20enemy\x20in\x20squadron\x20','keys','buttons','includes','attackPathSegments','total','toString','restore','Full\x20Grid:\x20Error\x20getting\x20target\x20grid\x20pos\x20for\x20enemy\x20','height',',\x20Path\x20','destroyed','\x20at\x20end\x20of\x20normal\x20path\x20','number','diveStartTime','attack-','\x20not\x20found.','[Capture\x20Message\x20End]\x20Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','\x20(no\x20attack\x20path):','pathSpeedMultiplier','Full\x20Grid:\x20Squadron\x20','enemies','creationTime','Boss\x20','targetY','splice','Error\x20handling\x20player\x20input:','justReturned','gameOverSound','30BRncwB','drawImage','red','duration','extraLifeSound','some','EASY','\x20attacking,\x20invalid\x20segment\x20','CS_LoopAttack_BR','csClearSound','rapid','Invalid\x20start\x20segment\x20for\x20squadron\x20path\x20','player1','\x20is\x20empty\x20or\x20invalid.',')\x20for\x20','slice','forEach','\x20off\x20screen:','\x20after\x20bad\x20segment','gridRow','Error\x20getting\x20grid\x20pos\x20after\x20FINAL\x20bezier\x20error\x20for\x20','[scheduleSingleEntranceSquadron]\x20Called\x20inappropriately\x20for\x20non-entrance\x20wave\x20type\x20(Level\x20','Error\x20calculating\x20final\x20bezier\x20point\x20for\x20','LOGO','CO-OP\x20GAME','min','[Destroyed\x20Boss\x20Score\x20-\x20Attack]\x20Boss\x20destroyed\x20on\x20first\x20hit?\x20Awarding\x20','isDamaged','Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.','[scheduleEntranceFlightWave]\x20Called\x20inappropriately\x20or\x20with\x20no\x20definition.\x20Level\x20','Error\x20in\x20findAndDetachEnemy:','rotation','abs','CRITICAL:\x20Failed\x20to\x20define\x20CS\x20paths!','normal','attacking','sign','csPerfectSound','targetX','floor','ai_p2','Error\x20during\x20post-landing\x20fire\x20for\x20','147812ROYtEy','boss_loop_left','shipCapturedSound','preparing_attack','targetGridX','naturalHeight','),\x20index\x20','capturedShipDimensions','\x20invalid!\x20Skipping.','CS:\x20Error\x20setting\x20up\x20spawns\x20for\x20squadron\x20','entrance_flight_2','single','pathT','atan2','grey','targetGridY','\x20after\x20attack:','speed','Entrance\x20Wave:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','health','Error\x20getting\x20grid\x20pos\x20after\x20invalid\x20NEXT\x20attack\x20segment\x20for\x20','center','isPreparingForImmediateCapture','\x20attacking,\x20invalid\x20NEXT\x20segment\x20','2\x20PLAYER','A\x20critical\x20error\x20occurred\x20in\x20the\x20game\x20loop.\x20Please\x20refresh.','function','Error\x20getting\x20target\x20grid\x20pos\x20for\x20new\x20enemy\x20','in_grid','250789ewAzMv','capturePrepareTimeout','thresholdsMet','1434892sORvxg','lifetime','squadronEnemyIndex','initialCaptureAnimationY','pause','3875763EzrvNp','Error\x20checking/awarding\x20extra\x20life:','white','lostLifeSound','capturedShipX','filter','right','find','bossHit1Sound','isArray','CS_HorizontalFlyByR','Invalid\x20next\x20CS\x20Bezier\x20segment\x20','round','\x20out\x20of\x20bounds\x20(','20564874ZwEDmU','Error\x20getting\x20grid\x20pos\x20for\x20','entrance_flight_1','diving_to_capture_position','shoot','getWaveType','width','\x20missing\x20SHARED\x20path\x20','complete','pressed','START\x20GAME','Error\x20creating\x20player\x20bullet(s):','preparing_capture','30px\x20Arial','resetGame','stack','following_bezier_path','levelUpSound','attackPathSegmentIndex','object','undefined','NaN\x20detected\x20in\x20CS\x20path\x20calculation\x20for\x20enemy\x20',')!\x20Returning.','back','dual','totalRotation','CS:\x20No\x20squadrons\x20generated.\x20Skipping\x20CS\x20sequence.','add','\x20for\x20squadron\x20','pathId','currentLives','captureStartTime','newButtonStates','clearRect','Full\x20Grid:\x20Error\x20placing\x20enemy\x20(Sq\x20','NORMAL\x20GAME','hasFiredPostLanding','cos','\x20after\x20bad\x20next\x20segment','capturing','\x20after\x20NaN','Failed\x20to\x20return\x20to\x20menu\x20after\x20critical\x20error:','bossHit2Sound','shipObj','enemy-cs-','CS:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','has','CS:\x20Path\x20','CRITICAL:\x20Required\x20CS\x20path\x20\x22','Entrance\x20Wave:\x20Error\x20processing\x20enemies\x20for\x20squadron\x20','capturedShipY','FATAL\x20Error\x20in\x20moveEntities:','string','sin','.\x20Removing.','num','dualShipSound','5whsxpJ','\x20for\x20path\x20',').\x20Skipping.','\x20has\x20invalid\x20enemy\x20data.','CS_LoopAttack_TL','Entrance\x20Wave:\x20Squadron\x20',',\x20def\x20length:\x20','\x20attacking,\x20index\x20','pathSegmentIndex','save','rotationCompleted','1P_VS_AI_NORMAL','CS_LoopAttack_BL','stringify','length','Error\x20calculating\x20CS\x20Bezier\x20point\x20for\x20enemy\x20','\x20not\x20found.\x20Enemy\x20will\x20follow\x20squadron\x20path\x20\x22','butterflyDiveSound','parse','1UP','landed','captureAnimationRotation','\x22\x20not\x20found!\x20Aborting\x20CS.','hiScoreSound','left','Entrance\x20Wave:\x20No\x20squadrons\x20or\x20enemies\x20scheduled\x20for\x20level\x20','Enemy\x20','3387648GQCHnE','.\x20Switching\x20to\x20moving_to_grid.','showing_capture_message','enemy-entr-','2UP','hasOwnProperty','Error\x20during\x20enemy\x20burst\x20firing\x20(bullet\x20','alpha','.\x20Transitioning.',')\x20during\x20shift:','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','\x20path\x20index\x20','Attempted\x20to\x20start\x20Full\x20Grid\x20wave\x20without\x20valid\x20definition\x20or\x20when\x20not\x20in\x20Full\x20Grid\x20mode.','following_entrance_path','\x20(invalid\x20attack\x20index):','random','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20','5053520uMHRxa','challenging_stage','sqrt','entranceSound','gridCol','enemy-grid-','\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!\x20Resetting\x20state\x20anyway.','startSound','middle','\x20attacking\x20without\x20path!\x20Returning.','\x20invalid!\x20Skipping\x20squadron.','substring','moving_to_grid','Error\x20in\x20triggerImmediateCaptureDive:','indexOf'];_0x53fe=function(){return _0x3326e9;};return _0x53fe();}const createBulletSimple=(_0x2ce1e9,_0x5396be=null)=>{const _0x27e608=_0x48e791;let _0x44d5e9=null,_0x4d4f0d=![];if(isTwoPlayerMode&&selectedGameMode===_0x27e608(0x1a7)){const _0x7d298d=ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured,_0x3eb219=ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured;if(_0x7d298d&&_0x3eb219)_0x44d5e9=Math[_0x27e608(0x16a)]()<0.5?ship1:ship2,_0x4d4f0d=!![];else{if(_0x7d298d)_0x44d5e9=ship1,_0x4d4f0d=!![];else _0x3eb219&&(_0x44d5e9=ship2,_0x4d4f0d=!![]);}}else ship&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn&&(_0x44d5e9=ship,_0x4d4f0d=!![]);if(!_0x2ce1e9||!isInGameState||!_0x4d4f0d||!_0x44d5e9)return![];const _0x2e2ba6=scaleValue(level,BASE_ENEMY_BULLET_SPEED,MAX_ENEMY_BULLET_SPEED),_0x5d7b4f=_0x5396be?_0x5396be['x']:_0x2ce1e9['x']+_0x2ce1e9[_0x27e608(0x10d)]/0x2,_0x384af1=_0x5396be?_0x5396be['y']:_0x2ce1e9['y']+_0x2ce1e9[_0x27e608(0x1dd)]/0x2;let _0x5adf23=0x0,_0x298c90=_0x2e2ba6;const _0xae27aa=_0x44d5e9['x']+_0x44d5e9['width']/0x2-_0x5d7b4f,_0x20ba82=_0x44d5e9['y']+_0x44d5e9[_0x27e608(0x1dd)]/0x2-_0x384af1,_0x5b5de7=Math['sqrt'](_0xae27aa*_0xae27aa+_0x20ba82*_0x20ba82);if(_0x5b5de7>0x0){let _0x27e1f1=0x0;!isChallengingStage&&(_0x27e1f1=scaleValue(level,BASE_ENEMY_AIM_FACTOR,MAX_ENEMY_AIM_FACTOR));let _0x407a29=Math[_0x27e608(0x228)](_0x20ba82,_0xae27aa);_0x5adf23=Math[_0x27e608(0x12c)](_0x407a29)*_0x2e2ba6*_0x27e1f1,_0x298c90=Math['sqrt'](_0x2e2ba6**0x2-_0x5adf23**0x2),_0x298c90=Math[_0x27e608(0x1a4)](_0x2e2ba6*(0x1-_0x27e1f1)*0.5,_0x298c90);if(_0x20ba82<0x0&&_0x298c90>0x0){}if(_0x20ba82<0x0)_0x298c90=Math[_0x27e608(0x211)](_0x298c90);return enemyBullets[_0x27e608(0x1d3)]({'x':_0x5d7b4f-ENEMY_BULLET_WIDTH/0x2,'y':_0x384af1,'width':ENEMY_BULLET_WIDTH,'height':ENEMY_BULLET_HEIGHT,'vx':_0x5adf23,'vy':_0x298c90,'type':_0x2ce1e9[_0x27e608(0x1b3)]}),!![];}return![];};function scheduleSingleEntranceSquadron(_0x13500a,_0x1cbcff,_0x4d1e96){const _0x5dc376=_0x48e791;if(isFullGridWave||isChallengingStage)return console['warn'](_0x5dc376(0x206)+level+_0x5dc376(0x1bd)+isFullGridWave+',\x20isCS:\x20'+isChallengingStage+_0x5dc376(0x142)),_0x13500a?.[_0x5dc376(0x1e9)]?.[_0x5dc376(0x14e)]>0x0&&(enemiesSpawnedThisWave+=_0x13500a[_0x5dc376(0x1e9)]['length'],squadronCompletionStatus[_0x1cbcff]&&(squadronCompletionStatus[_0x1cbcff][_0x5dc376(0x1bb)]=squadronCompletionStatus[_0x1cbcff]['total'])),![];const _0x5b5367=normalWaveEntrancePaths,_0x2ca651=_0x13500a[_0x5dc376(0x124)],_0x1e383f=_0x5b5367[_0x2ca651];if(!_0x1e383f||_0x1e383f[_0x5dc376(0x14e)]===0x0)return console[_0x5dc376(0x1cc)]('Entrance\x20Wave:\x20Path\x20'+_0x2ca651+'\x20for\x20squadron\x20'+_0x1cbcff+_0x5dc376(0x176)),_0x13500a?.[_0x5dc376(0x1e9)]?.['length']>0x0&&(enemiesSpawnedThisWave+=_0x13500a[_0x5dc376(0x1e9)][_0x5dc376(0x14e)],squadronCompletionStatus[_0x1cbcff]&&(squadronCompletionStatus[_0x1cbcff][_0x5dc376(0x1bb)]=squadronCompletionStatus[_0x1cbcff][_0x5dc376(0x1d9)])),![];const _0x5b043b=setTimeout(()=>{const _0x2cd969=_0x5dc376,_0x25fe41=enemySpawnTimeouts[_0x2cd969(0x17a)](_0x5b043b);if(_0x25fe41>-0x1)enemySpawnTimeouts[_0x2cd969(0x1ed)](_0x25fe41,0x1);let _0xf575c1=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0xf575c1=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0xf575c1=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0xf575c1||isFullGridWave){_0x13500a?.[_0x2cd969(0x1e9)]?.['length']>0x0&&(enemiesSpawnedThisWave+=_0x13500a[_0x2cd969(0x1e9)][_0x2cd969(0x14e)],squadronCompletionStatus[_0x1cbcff]&&(squadronCompletionStatus[_0x1cbcff][_0x2cd969(0x1bb)]=squadronCompletionStatus[_0x1cbcff][_0x2cd969(0x1d9)]));return;}try{squadronEntranceFiringStatus[_0x1cbcff]?(squadronEntranceFiringStatus[_0x1cbcff][_0x2cd969(0x1a5)]=Date[_0x2cd969(0x1ba)]()+_0x4d1e96,squadronEntranceFiringStatus[_0x1cbcff][_0x2cd969(0x1a2)]=![]):(console[_0x2cd969(0x1b9)]('[scheduleSingleEntranceSquadron]\x20Firing\x20status\x20for\x20squadron\x20'+_0x1cbcff+_0x2cd969(0x1e4)),squadronEntranceFiringStatus[_0x1cbcff]={'hasFired':![],'scheduledStartTime':Date[_0x2cd969(0x1ba)]()+_0x4d1e96});const _0x4b86d2=ENEMY_SPAWN_DELAY_IN_SQUADRON,_0x2dca95=_0x4b86d2*0x2,_0x2ca02b=0x1;_0x13500a[_0x2cd969(0x1e9)]['forEach']((_0x2329d8,_0x14c046)=>{const _0x279e5d=_0x2cd969;if(!_0x2329d8||!_0x2329d8[_0x279e5d(0x1b3)]||typeof _0x2329d8['gridRow']===_0x279e5d(0x11b)||typeof _0x2329d8[_0x279e5d(0x170)]===_0x279e5d(0x11b)||!_0x2329d8[_0x279e5d(0x18c)]){console[_0x279e5d(0x1cc)](_0x279e5d(0x1c3)+_0x1cbcff+_0x279e5d(0x1b6)+_0x2ca651+_0x279e5d(0x221)+_0x14c046+_0x279e5d(0x194)),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x1cbcff]&&squadronCompletionStatus[_0x1cbcff][_0x279e5d(0x1bb)]++;return;}const _0x1a2886=_0x5b5367[_0x2329d8['entrancePathId']];(!_0x1a2886||_0x1a2886[_0x279e5d(0x14e)]===0x0)&&console[_0x279e5d(0x1b9)](_0x279e5d(0x1b8)+_0x2329d8['entrancePathId']+_0x279e5d(0x1d4)+_0x1cbcff+_0x279e5d(0x1bf)+_0x14c046+_0x279e5d(0x150)+_0x2ca651+'\x22.');let _0x42582b=0x0;const _0x998a74=getWaveType(level),_0x1a30c0=_0x998a74===_0x279e5d(0x225)&&(_0x1cbcff===0x2||_0x1cbcff===0x3);if(_0x1a30c0){const _0x11b4c2=Math[_0x279e5d(0x218)](_0x14c046/0x2);_0x14c046%0x2===0x0?_0x42582b=_0x11b4c2*_0x2dca95:_0x42582b=_0x11b4c2*_0x2dca95+_0x2ca02b;}else _0x42582b=_0x14c046*ENEMY_SPAWN_DELAY_IN_SQUADRON;const _0x3b1fc4=setTimeout(()=>{const _0x2f36e9=_0x279e5d,_0x992cf3=enemySpawnTimeouts['indexOf'](_0x3b1fc4);if(_0x992cf3>-0x1)enemySpawnTimeouts[_0x2f36e9(0x1ed)](_0x992cf3,0x1);let _0x440de7=![];isTwoPlayerMode&&selectedGameMode===_0x2f36e9(0x1a7)?_0x440de7=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x440de7=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0x440de7||isFullGridWave){enemiesSpawnedThisWave++;squadronCompletionStatus[_0x1cbcff]&&squadronCompletionStatus[_0x1cbcff][_0x2f36e9(0x1bb)]++;return;}try{let _0x584090=_0x2329d8[_0x2f36e9(0x1b3)],_0x55e8f3=_0x584090===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x56de0c,_0x5da888;if(_0x584090===ENEMY1_TYPE)_0x56de0c=ENEMY1_WIDTH,_0x5da888=ENEMY1_HEIGHT;else _0x584090===ENEMY3_TYPE?(_0x56de0c=BOSS_WIDTH,_0x5da888=BOSS_HEIGHT):(_0x56de0c=ENEMY_WIDTH,_0x5da888=ENEMY_HEIGHT);let _0x3ee160=0x0,_0x2de11f=0x0;if(_0x1e383f&&_0x1e383f[0x0]?.['p0'])_0x3ee160=_0x1e383f[0x0]['p0']['x'],_0x2de11f=_0x1e383f[0x0]['p0']['y'];else throw new Error(_0x2f36e9(0x1fc)+_0x2ca651);let _0xf0b81,_0x1bb20c;try{const {x:_0x400171,y:_0x50b23c}=getCurrentGridSlotPosition(_0x2329d8[_0x2f36e9(0x204)],_0x2329d8['gridCol'],_0x56de0c);_0xf0b81=_0x400171,_0x1bb20c=_0x50b23c;}catch(_0x58b23b){console[_0x2f36e9(0x1cc)](_0x2f36e9(0x236)+_0x2329d8[_0x2f36e9(0x1b3)]+_0x2f36e9(0x19d)+_0x2329d8['gridRow']+','+_0x2329d8[_0x2f36e9(0x170)]+']',_0x58b23b),_0xf0b81=gameCanvas?.[_0x2f36e9(0x10d)]/0x2||0xc8,_0x1bb20c=ENEMY_TOP_MARGIN+_0x2329d8[_0x2f36e9(0x204)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}let _0x528cd3=0x0;const _0x2cf7dd=_0x1a30c0,_0x5eb194=_0x2cf7dd&&_0x14c046%0x2!==0x0;_0x5eb194?_0x528cd3=-ENTRANCE_PAIR_PATH_T_OFFSET:_0x528cd3=-_0x14c046*PATH_T_OFFSET_PER_ENEMY;const _0x1ce59e={'x':_0x3ee160,'y':_0x2de11f,'width':_0x56de0c,'height':_0x5da888,'targetGridX':_0xf0b81,'targetGridY':_0x1bb20c,'speed':0x0,'state':'following_entrance_path','gridRow':_0x2329d8[_0x2f36e9(0x204)],'gridCol':_0x2329d8[_0x2f36e9(0x170)],'type':_0x584090,'health':_0x55e8f3,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x2ca651,'pathSegmentIndex':0x0,'pathT':_0x528cd3,'squadronId':_0x1cbcff,'squadronEnemyIndex':_0x14c046,'id':_0x2f36e9(0x15e)+_0x1cbcff+'-'+_0x14c046+'-'+Date[_0x2f36e9(0x1ba)]()+'-'+Math[_0x2f36e9(0x16a)]()['toString'](0x24)[_0x2f36e9(0x177)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x2f36e9(0x213),'hasCapturedShip':_0x584090===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x584090===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies['push'](_0x1ce59e),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x1cbcff]&&squadronCompletionStatus[_0x1cbcff][_0x2f36e9(0x1bb)]++;if(_0x14c046===0x0){let _0x36dac2=0x5dc;(_0x1cbcff===0x0||_0x1cbcff===0x1)&&(_0x36dac2=0xfa);const _0x7586ed=_0x1ce59e['id'],_0xc94fb3=setTimeout(()=>{const _0x49dedd=_0x2f36e9,_0x354697=enemySpawnTimeouts[_0x49dedd(0x17a)](_0xc94fb3);if(_0x354697>-0x1)enemySpawnTimeouts[_0x49dedd(0x1ed)](_0x354697,0x1);let _0x40745f=![];isTwoPlayerMode&&selectedGameMode===_0x49dedd(0x1a7)?_0x40745f=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x40745f=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x40745f||isChallengingStage||isWaveTransitioning||isFullGridWave)return;fireFixedEnemyBurst(_0x7586ed,null,0x0,0x3);},_0x36dac2);enemySpawnTimeouts[_0x2f36e9(0x1d3)](_0xc94fb3);}}catch(_0x1fcf3b){console[_0x2f36e9(0x1cc)](_0x2f36e9(0x22d)+_0x1cbcff+_0x2f36e9(0x1b5)+_0x14c046+_0x2f36e9(0x1de)+_0x2ca651+'):',_0x1fcf3b),enemiesSpawnedThisWave++,squadronCompletionStatus[_0x1cbcff]&&squadronCompletionStatus[_0x1cbcff][_0x2f36e9(0x1bb)]++;}},_0x42582b);enemySpawnTimeouts['push'](_0x3b1fc4);});}catch(_0x41c871){console[_0x2cd969(0x1cc)](_0x2cd969(0x138)+_0x1cbcff+_0x2cd969(0x1b6)+_0x2ca651+'):',_0x41c871),_0x13500a?.[_0x2cd969(0x1e9)]?.[_0x2cd969(0x14e)]>0x0&&(enemiesSpawnedThisWave+=_0x13500a[_0x2cd969(0x1e9)][_0x2cd969(0x14e)],squadronCompletionStatus[_0x1cbcff]&&(squadronCompletionStatus[_0x1cbcff][_0x2cd969(0x1bb)]=squadronCompletionStatus[_0x1cbcff][_0x2cd969(0x1d9)]));}},_0x4d1e96);return enemySpawnTimeouts[_0x5dc376(0x1d3)](_0x5b043b),!![];};function scheduleEntranceFlightWave(){const _0x39fdc3=_0x48e791;if(isFullGridWave||isChallengingStage||!currentWaveDefinition||currentWaveDefinition[_0x39fdc3(0x14e)]===0x0){console['warn'](_0x39fdc3(0x20e)+level+_0x39fdc3(0x1bd)+isFullGridWave+',\x20isCS:\x20'+isChallengingStage+_0x39fdc3(0x146)+currentWaveDefinition?.[_0x39fdc3(0x14e)]),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x4a81cf=0x0,_0x1044b2=0x0;currentWaveDefinition['forEach']((_0x688cf8,_0x17d699)=>{const _0x2dc14d=_0x39fdc3;_0x688cf8&&_0x688cf8[_0x2dc14d(0x1e9)]&&Array[_0x2dc14d(0x102)](_0x688cf8['enemies'])&&_0x688cf8[_0x2dc14d(0x1e9)][_0x2dc14d(0x14e)]>0x0?(totalEnemiesScheduledForWave+=_0x688cf8[_0x2dc14d(0x1e9)][_0x2dc14d(0x14e)],squadronCompletionStatus[_0x17d699]={'completed':0x0,'total':_0x688cf8[_0x2dc14d(0x1e9)][_0x2dc14d(0x14e)],'hasFiredPostLanding':![]},squadronEntranceFiringStatus[_0x17d699]={'hasFired':![],'scheduledStartTime':0x0},scheduleSingleEntranceSquadron(_0x688cf8,_0x17d699,_0x4a81cf)&&_0x1044b2++,_0x4a81cf+=NORMAL_WAVE_SQUADRON_INTERVAL):console[_0x2dc14d(0x1b9)](_0x2dc14d(0x145)+_0x17d699+_0x2dc14d(0x1fe));}),_0x1044b2===0x0&&totalEnemiesScheduledForWave===0x0?(console['warn'](_0x39fdc3(0x159)+level+_0x39fdc3(0x163)),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![]):isEntrancePhaseActive=!![];}function startChallengingStageSequence(){const _0x33f424=_0x48e791;currentWaveDefinition=[],isEntrancePhaseActive=![],enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronEntranceFiringStatus={};Object[_0x33f424(0x1d5)](challengingStagePaths)[_0x33f424(0x14e)]===0x0&&defineChallengingStagePaths();if(Object[_0x33f424(0x1d5)](challengingStagePaths)['length']===0x0){console[_0x33f424(0x1cc)](_0x33f424(0x212)),isWaveTransitioning=!![],setTimeout(()=>{const _0x4ae9b4=_0x33f424;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x4ae9b4(0x1a7)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x4ae9b4(0x235)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}const _0x3a6e23=[_0x33f424(0x180),'CS3_DiveLoopR_Sharp',_0x33f424(0x17b),_0x33f424(0x103)],_0xeebf34=[_0x33f424(0x144),_0x33f424(0x17c),_0x33f424(0x14c),_0x33f424(0x1f9)],_0x12c233=[..._0x3a6e23,..._0xeebf34];for(const _0x156fa8 of _0x12c233){if(!challengingStagePaths[_0x33f424(0x160)](_0x156fa8)){console[_0x33f424(0x1cc)](_0x33f424(0x137)+_0x156fa8+_0x33f424(0x156)),isWaveTransitioning=!![],setTimeout(()=>{const _0x57a987=_0x33f424;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode==='coop'&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x57a987(0x235)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}}let _0x524b5e=[..._0x3a6e23],_0x28dbf7=[..._0xeebf34][_0x33f424(0x1c6)](()=>Math[_0x33f424(0x16a)]()-0.5);_0x524b5e[_0x33f424(0x1d3)](..._0x28dbf7),currentWaveDefinition=[];for(let _0x2cafa8=0x0;_0x2cafa8<CHALLENGING_STAGE_SQUADRON_COUNT;_0x2cafa8++){const _0x25b11a=_0x524b5e[_0x2cafa8],_0x578028={'pathId':_0x25b11a,'enemies':[]};for(let _0xc29e74=0x0;_0xc29e74<CHALLENGING_STAGE_SQUADRON_SIZE;_0xc29e74++){let _0x2b6d84=_0xc29e74<Math[_0x33f424(0x218)](CHALLENGING_STAGE_SQUADRON_SIZE/0x2)?ENEMY1_TYPE:ENEMY2_TYPE;_0x578028['enemies'][_0x33f424(0x1d3)]({'type':_0x2b6d84,'entrancePathId':_0x25b11a});}currentWaveDefinition[_0x33f424(0x1d3)](_0x578028);}challengingStageTotalEnemies=CHALLENGING_STAGE_ENEMY_COUNT,totalEnemiesScheduledForWave=challengingStageTotalEnemies,enemiesSpawnedThisWave=0x0;if(currentWaveDefinition[_0x33f424(0x14e)]>0x0){isEntrancePhaseActive=!![],enemySpawnTimeouts=[];let _0x38e4de=0x0;const _0x42eac8=-0x1c,_0x34b070=Math[_0x33f424(0x218)](Math[_0x33f424(0x1a4)](0x0,level-0x3)/0x4)+0x1,_0x450fe5=scaleValue(_0x34b070,BASE_CS_SPEED_MULTIPLIER,MAX_CS_SPEED_MULTIPLIER);currentWaveDefinition[_0x33f424(0x201)]((_0x1161db,_0x4742a0)=>{const _0x1835f5=_0x33f424;let _0x1e06f1=0x0;if(_0x4742a0<=0x1)_0x1e06f1=0x0;else _0x4742a0<=0x3?_0x1e06f1=CHALLENGING_STAGE_SQUADRON_INTERVAL:_0x1e06f1=(_0x4742a0-0x2)*CHALLENGING_STAGE_SQUADRON_INTERVAL;let _0x3c7e14=_0x450fe5;(_0x4742a0===0x2||_0x4742a0===0x3)&&(_0x3c7e14*=CS_HORIZONTAL_FLYBY_SPEED_FACTOR);const _0x4b0b1a=setTimeout(()=>{const _0x1eff2a=_0x4661,_0x44e692=enemySpawnTimeouts[_0x1eff2a(0x17a)](_0x4b0b1a);if(_0x44e692>-0x1)enemySpawnTimeouts[_0x1eff2a(0x1ed)](_0x44e692,0x1);let _0x4af10b=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x4af10b=player1Lives>0x0||player2Lives>0x0:_0x4af10b=playerLives>0x0;if(!isPaused&&isInGameState&&isEntrancePhaseActive&&isChallengingStage&&!isWaveTransitioning&&_0x4af10b)try{const _0x553b7b=_0x1161db['pathId'],_0x487966=challengingStagePaths,_0x5d2cc8=_0x487966[_0x553b7b];if(!_0x5d2cc8||_0x5d2cc8[_0x1eff2a(0x14e)]===0x0){console[_0x1eff2a(0x1cc)](_0x1eff2a(0x136)+_0x553b7b+_0x1eff2a(0x123)+_0x4742a0+_0x1eff2a(0x223)),enemiesSpawnedThisWave+=_0x1161db[_0x1eff2a(0x1e9)][_0x1eff2a(0x14e)];return;}let _0x16e2f3=CS_ENEMY_SPAWN_DELAY_IN_SQUADRON;if(_0x4742a0>=0x2&&_0x4742a0<=0x3)_0x16e2f3=CS_HORIZONTAL_FLYBY_SPAWN_DELAY;else _0x4742a0>=0x4&&(_0x16e2f3=CS_LOOP_ATTACK_SPAWN_DELAY);_0x1161db['enemies'][_0x1eff2a(0x201)]((_0x229818,_0x5b3ec0)=>{const _0x2bee53=_0x1eff2a;if(!_0x229818||!_0x229818[_0x2bee53(0x1b3)]){console[_0x2bee53(0x1cc)](_0x2bee53(0x134)+_0x4742a0+',\x20index\x20'+_0x5b3ec0+_0x2bee53(0x194)),enemiesSpawnedThisWave++;return;}const _0x16dd39=_0x5b3ec0*_0x16e2f3,_0x2e9585=setTimeout(()=>{const _0x434835=_0x2bee53,_0x4503c9=enemySpawnTimeouts[_0x434835(0x17a)](_0x2e9585);if(_0x4503c9>-0x1)enemySpawnTimeouts[_0x434835(0x1ed)](_0x4503c9,0x1);let _0x4f4494=![];isTwoPlayerMode&&selectedGameMode===_0x434835(0x1a7)?_0x4f4494=player1Lives>0x0||player2Lives>0x0:_0x4f4494=playerLives>0x0;if(isPaused||!isInGameState||!isEntrancePhaseActive||!isChallengingStage||isWaveTransitioning||!_0x4f4494){enemiesSpawnedThisWave++;return;}try{let _0x31c008=_0x229818[_0x434835(0x1b3)],_0x353d84=_0x31c008===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x53db3a,_0xb2bb1d;if(_0x31c008===ENEMY1_TYPE)_0x53db3a=ENEMY1_WIDTH,_0xb2bb1d=ENEMY1_HEIGHT;else _0x31c008===ENEMY3_TYPE?(_0x53db3a=BOSS_WIDTH,_0xb2bb1d=BOSS_HEIGHT):(_0x53db3a=ENEMY_WIDTH,_0xb2bb1d=ENEMY_HEIGHT);let _0x5b2d0e=0x0,_0x592b23=0x0;if(_0x5d2cc8[0x0]?.['p0'])_0x5b2d0e=_0x5d2cc8[0x0]['p0']['x'],_0x592b23=_0x5d2cc8[0x0]['p0']['y'];else throw new Error('Invalid\x20start\x20segment\x20for\x20path\x20'+_0x553b7b);(_0x4742a0===0x0||_0x4742a0===0x1)&&(_0x5b2d0e+=_0x42eac8);const _0x120462=-_0x5b3ec0*PATH_T_OFFSET_PER_ENEMY,_0x164d50={'x':_0x5b2d0e,'y':_0x592b23,'width':_0x53db3a,'height':_0xb2bb1d,'targetGridX':0x0,'targetGridY':0x0,'speed':0x0,'state':_0x434835(0x117),'gridRow':-0x1,'gridCol':-0x1,'type':_0x31c008,'health':_0x353d84,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x553b7b,'pathSegmentIndex':0x0,'pathT':_0x120462,'squadronId':_0x4742a0,'id':_0x434835(0x133)+_0x4742a0+'-'+_0x5b3ec0+'-'+Date[_0x434835(0x1ba)]()+'-'+Math['random']()[_0x434835(0x1da)](0x24)['substring'](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x434835(0x213),'hasCapturedShip':_0x31c008===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x31c008===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':_0x3c7e14};enemies[_0x434835(0x1d3)](_0x164d50),enemiesSpawnedThisWave++;}catch(_0x1bac1b){console[_0x434835(0x1cc)](_0x434835(0x1c4)+_0x4742a0+_0x434835(0x1b5)+_0x5b3ec0+_0x434835(0x1de)+_0x553b7b+'):',_0x1bac1b),enemiesSpawnedThisWave++;}},_0x16dd39);enemySpawnTimeouts['push'](_0x2e9585),_0x38e4de++;});}catch(_0x14dcbe){console['error'](_0x1eff2a(0x224)+_0x4742a0+':',_0x14dcbe),enemiesSpawnedThisWave+=_0x1161db[_0x1eff2a(0x1e9)][_0x1eff2a(0x14e)];}else _0x1161db?.['enemies']?.[_0x1eff2a(0x14e)]>0x0&&(enemiesSpawnedThisWave+=_0x1161db[_0x1eff2a(0x1e9)][_0x1eff2a(0x14e)]);},_0x1e06f1);enemySpawnTimeouts[_0x1835f5(0x1d3)](_0x4b0b1a);});}else console[_0x33f424(0x1b9)](_0x33f424(0x121)),isWaveTransitioning=!![],setTimeout(()=>{const _0x2802f0=_0x33f424;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x2802f0(0x1a7)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x2802f0(0x235)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);}function fireEnemyBurst(_0x27d48f,_0x3e09f2,_0x4e0162){const _0x5d34a5=_0x48e791;let _0x3d8a02=![];isTwoPlayerMode&&selectedGameMode===_0x5d34a5(0x1a7)?_0x3d8a02=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x3d8a02=playerLives>0x0&&!isShipCaptured;if(!_0x27d48f||isPaused||!isInGameState||!_0x3d8a02||isChallengingStage||isWaveTransitioning)return;const _0x22ace0=Math[_0x5d34a5(0x105)](scaleValue(level,BASE_ENEMY_BULLET_BURST_COUNT,MAX_ENEMY_BULLET_BURST_COUNT));for(let _0x4f7672=0x0;_0x4f7672<_0x22ace0;_0x4f7672++){const _0x40fd75=_0x4e0162+_0x4f7672*ENTRANCE_FIRE_BURST_DELAY_MS,_0x273f7c=setTimeout(()=>{const _0x2afb5f=_0x5d34a5;try{const _0x39852b=enemySpawnTimeouts['indexOf'](_0x273f7c);_0x39852b>-0x1&&enemySpawnTimeouts[_0x2afb5f(0x1ed)](_0x39852b,0x1);let _0x5c64f4=![];isTwoPlayerMode&&selectedGameMode===_0x2afb5f(0x1a7)?_0x5c64f4=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x5c64f4=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x5c64f4||isChallengingStage||isWaveTransitioning)return;const _0x233517=enemies[_0x2afb5f(0x247)](_0x14ceb3=>_0x14ceb3&&_0x14ceb3['id']===_0x27d48f);_0x233517&&_0x233517['state']===_0x3e09f2&&(createBulletSimple(_0x233517)&&(_0x4f7672===0x0&&playSound(_0x2afb5f(0x183),![],0.4),_0x233517[_0x2afb5f(0x1ce)]=Date['now']()));}catch(_0x2da2e8){console[_0x2afb5f(0x1cc)](_0x2afb5f(0x161)+(_0x4f7672+0x1)+'/'+_0x22ace0+_0x2afb5f(0x1ff)+_0x27d48f+':',_0x2da2e8);}},_0x40fd75);enemySpawnTimeouts['push'](_0x273f7c);}}function fireFixedEnemyBurst(_0x189c1a,_0x4a113d,_0x3277d3,_0x1d1b67){const _0x543165=_0x48e791;let _0x42e249=![];isTwoPlayerMode&&selectedGameMode===_0x543165(0x1a7)?_0x42e249=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x42e249=playerLives>0x0&&!isShipCaptured;if(!_0x189c1a||isPaused||!isInGameState||!_0x42e249||isChallengingStage||isWaveTransitioning||_0x1d1b67<=0x0)return;for(let _0x331b7d=0x0;_0x331b7d<_0x1d1b67;_0x331b7d++){const _0x4be327=_0x3277d3+_0x331b7d*ENTRANCE_FIRE_BURST_DELAY_MS,_0x439294=setTimeout(()=>{const _0xe27e14=_0x543165;try{const _0x323649=enemySpawnTimeouts[_0xe27e14(0x17a)](_0x439294);_0x323649>-0x1&&enemySpawnTimeouts[_0xe27e14(0x1ed)](_0x323649,0x1);let _0x3fc49b=![];isTwoPlayerMode&&selectedGameMode===_0xe27e14(0x1a7)?_0x3fc49b=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x3fc49b=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x3fc49b||isChallengingStage||isWaveTransitioning)return;const _0x22e47b=enemies[_0xe27e14(0x247)](_0x101d55=>_0x101d55&&_0x101d55['id']===_0x189c1a);if(_0x22e47b)createBulletSimple(_0x22e47b)&&(_0x331b7d===0x0&&playSound(_0xe27e14(0x183),![],0.4),_0x22e47b['lastFiredTime']=Date[_0xe27e14(0x1ba)]());else{}}catch(_0x1723ed){console[_0xe27e14(0x1cc)]('Error\x20during\x20FIXED\x20enemy\x20burst\x20firing\x20(bullet\x20'+(_0x331b7d+0x1)+'/'+_0x1d1b67+_0xe27e14(0x1ff)+_0x189c1a+':',_0x1723ed);}},_0x4be327);enemySpawnTimeouts[_0x543165(0x1d3)](_0x439294);}}function startFullGridWave(){const _0x11204d=_0x48e791;if(!currentWaveDefinition||currentWaveDefinition[_0x11204d(0x14e)]===0x0||!isFullGridWave){console[_0x11204d(0x1cc)](_0x11204d(0x167)),isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}playSound(_0x11204d(0x16f),![],0.4),enemySpawnTimeouts[_0x11204d(0x201)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x5e4d62=0x0;currentWaveDefinition['forEach']((_0x24275d,_0x3cb89e)=>{const _0x9cb327=_0x11204d;let _0x5b8d31=0x0;_0x24275d&&_0x24275d['enemies']&&Array['isArray'](_0x24275d['enemies'])?(_0x5b8d31=_0x24275d['enemies'][_0x9cb327(0x14e)],_0x24275d[_0x9cb327(0x1e9)][_0x9cb327(0x201)]((_0x13c29b,_0x52eab0)=>{const _0x363cd5=_0x9cb327;try{if(!_0x13c29b||!_0x13c29b['type']||typeof _0x13c29b['gridRow']===_0x363cd5(0x11b)||typeof _0x13c29b[_0x363cd5(0x170)]===_0x363cd5(0x11b)){console['error']('Full\x20Grid:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20'+_0x3cb89e+',\x20index\x20'+_0x52eab0+_0x363cd5(0x194));return;}let _0x28e43b=_0x13c29b['type'],_0x54e22a=_0x28e43b===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x27753f,_0x39b712;if(_0x28e43b===ENEMY1_TYPE)_0x27753f=ENEMY1_WIDTH,_0x39b712=ENEMY1_HEIGHT;else _0x28e43b===ENEMY3_TYPE?(_0x27753f=BOSS_WIDTH,_0x39b712=BOSS_HEIGHT):(_0x27753f=ENEMY_WIDTH,_0x39b712=ENEMY_HEIGHT);let _0x99283e,_0x4b4587;try{const {x:_0x5b4e5b,y:_0x2e081e}=getCurrentGridSlotPosition(_0x13c29b[_0x363cd5(0x204)],_0x13c29b[_0x363cd5(0x170)],_0x27753f);_0x99283e=_0x5b4e5b,_0x4b4587=_0x2e081e;}catch(_0x121853){console[_0x363cd5(0x1cc)](_0x363cd5(0x1dc)+_0x13c29b[_0x363cd5(0x1b3)]+_0x363cd5(0x19d)+_0x13c29b[_0x363cd5(0x204)]+','+_0x13c29b[_0x363cd5(0x170)]+']',_0x121853),_0x99283e=gameCanvas?.['width']/0x2||0xc8,_0x4b4587=ENEMY_TOP_MARGIN+_0x13c29b[_0x363cd5(0x204)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x57eb8c={'x':_0x99283e,'y':_0x4b4587,'width':_0x27753f,'height':_0x39b712,'targetGridX':_0x99283e,'targetGridY':_0x4b4587,'speed':0x0,'state':_0x363cd5(0x237),'gridRow':_0x13c29b[_0x363cd5(0x204)],'gridCol':_0x13c29b[_0x363cd5(0x170)],'type':_0x28e43b,'health':_0x54e22a,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':null,'pathSegmentIndex':0x0,'pathT':0x0,'squadronId':_0x3cb89e,'squadronEnemyIndex':_0x52eab0,'id':_0x363cd5(0x171)+_0x3cb89e+'-'+_0x52eab0+'-'+Date[_0x363cd5(0x1ba)]()+'-'+Math[_0x363cd5(0x16a)]()[_0x363cd5(0x1da)](0x24)['substring'](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x363cd5(0x213),'hasCapturedShip':_0x28e43b===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x28e43b===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies[_0x363cd5(0x1d3)](_0x57eb8c),_0x5e4d62++;}catch(_0x21755a){console[_0x363cd5(0x1cc)](_0x363cd5(0x129)+_0x3cb89e+',\x20Idx\x20'+_0x52eab0+'):',_0x21755a);}})):console[_0x9cb327(0x1b9)](_0x9cb327(0x1e8)+_0x3cb89e+_0x9cb327(0x143)),squadronCompletionStatus[_0x3cb89e]={'completed':_0x5b8d31,'total':_0x5b8d31};}),totalEnemiesScheduledForWave=_0x5e4d62,enemiesSpawnedThisWave=_0x5e4d62,isEntrancePhaseActive=![],gridJustCompleted=!![],!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(_0x11204d(0x1af),!![],0.1)),GRID_BREATH_ENABLED&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=Date[_0x11204d(0x1ba)](),currentGridBreathFactor=0x0),lastGridFireCheckTime=Date[_0x11204d(0x1ba)](),firstEnemyLanded=!![];}function renderGame(){const _0x17d9d9=_0x48e791;try{if(!gameCtx||!gameCanvas){if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null;return;}gameCtx[_0x17d9d9(0x128)](0x0,0x0,gameCanvas[_0x17d9d9(0x10d)],gameCanvas['height']);const _0x484159=Date['now']();gameCtx['save']();const _0x336a9c='20px\x20\x27Press\x20Start\x202P\x27',_0x48008=_0x17d9d9(0x1f3),_0x3ce92c=_0x17d9d9(0x242);let _0x5e9b76,_0x36d941,_0x5563d7,_0x500c12,_0x388567=![],_0x3e5f10=![],_0x2e2e2f=![];if(isShowingResultsScreen){}else{if(gameOverSequenceStartTime>0x0&&!isShowingPlayerGameOverMessage){}else{if(isShowingPlayerGameOverMessage){}else{if(!isInGameState){}else{_0x5563d7=highScore||0x0;if(!isManualControl){}else{if(isTwoPlayerMode&&selectedGameMode===_0x17d9d9(0x1a7)){_0x5e9b76=player1Score,_0x36d941=player2Score,_0x5563d7=Math[_0x17d9d9(0x1a4)](highScore,player1Score,player2Score),_0x500c12=_0x17d9d9(0x153),_0x388567=!isShowingIntro&&!isPaused&&player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn,_0x3e5f10=!isShowingIntro&&!isPaused&&player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn;if(player1Score>=_0x5563d7&&player1Score>0x0)_0x2e2e2f=_0x388567;if(player2Score>=_0x5563d7&&player2Score>0x0&&player2Score>player1Score)_0x2e2e2f=_0x3e5f10;}else isTwoPlayerMode&&selectedGameMode==='normal'?(_0x5e9b76=currentPlayer===0x1?score:player1Score,_0x36d941=currentPlayer===0x2?score:player2Score,_0x5563d7=Math['max'](highScore,player1Score,player2Score,score),_0x500c12='1UP',_0x388567=!isShowingIntro&&!isPaused&&currentPlayer===0x1&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x3e5f10=!isShowingIntro&&!isPaused&&currentPlayer===0x2&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x2e2e2f=!isPaused&&!isShowingIntro&&score>0x0&&_0x5563d7>0x0&&score>=_0x5563d7):(_0x5e9b76=score,_0x36d941=0x0,_0x500c12=_0x17d9d9(0x153));}}}}}let _0xbc1c2a=![];if(_0x2e2e2f){}typeof MARGIN_SIDE!==_0x17d9d9(0x11b)&&typeof MARGIN_TOP!=='undefined'&&typeof SCORE_OFFSET_Y!=='undefined'&&(drawTopUiElement(_0x500c12,_0x5e9b76,_0x17d9d9(0x158),MARGIN_SIDE,_0x388567),drawTopUiElement(_0x17d9d9(0x18b),_0x5563d7,'center',gameCanvas[_0x17d9d9(0x10d)]/0x2,_0xbc1c2a),drawTopUiElement(_0x17d9d9(0x15f),_0x36d941,_0x17d9d9(0x246),gameCanvas[_0x17d9d9(0x10d)]-MARGIN_SIDE,_0x3e5f10));if(typeof shipImage!=='undefined'&&typeof LIFE_ICON_MARGIN_BOTTOM!=='undefined'&&typeof LIFE_ICON_SIZE!==_0x17d9d9(0x11b)&&typeof LIFE_ICON_MARGIN_LEFT!=='undefined'&&typeof LIFE_ICON_SPACING!==_0x17d9d9(0x11b)){if(shipImage[_0x17d9d9(0x10f)]&&shipImage['naturalHeight']!==0x0){const _0x1e7818=gameCanvas[_0x17d9d9(0x1dd)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE;let _0x12f600=0x0,_0x96b34=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x17d9d9(0x1a7)){if(player1Lives>0x0)_0x12f600=Math[_0x17d9d9(0x1a4)](0x0,player1Lives-0x1);if(player2Lives>0x0)_0x96b34=Math[_0x17d9d9(0x1a4)](0x0,player2Lives-0x1);}else{if(playerLives>0x0)_0x12f600=Math[_0x17d9d9(0x1a4)](0x0,playerLives-0x1);}const _0x16236d=0x5;for(let _0x39874f=0x0;_0x39874f<Math['min'](_0x12f600,_0x16236d);_0x39874f++){const _0x407cf3=LIFE_ICON_MARGIN_LEFT+_0x39874f*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx[_0x17d9d9(0x1f2)](shipImage,Math['round'](_0x407cf3),Math[_0x17d9d9(0x105)](_0x1e7818),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}if(isTwoPlayerMode&&selectedGameMode===_0x17d9d9(0x1a7)){const _0x8877c5=gameCanvas[_0x17d9d9(0x10d)]-LIFE_ICON_MARGIN_RIGHT-Math[_0x17d9d9(0x20a)](_0x96b34,_0x16236d)*(LIFE_ICON_SIZE+LIFE_ICON_SPACING)+LIFE_ICON_SPACING;for(let _0x85b32d=0x0;_0x85b32d<Math[_0x17d9d9(0x20a)](_0x96b34,_0x16236d);_0x85b32d++){const _0x424a33=_0x8877c5+_0x85b32d*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx[_0x17d9d9(0x1f2)](shipImage,Math[_0x17d9d9(0x105)](_0x424a33),Math['round'](_0x1e7818),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}}}}gameCtx['restore'](),gameCtx[_0x17d9d9(0x149)]();if(isTwoPlayerMode&&selectedGameMode===_0x17d9d9(0x1a7)){if(ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured){let _0x2cc052=!![];if(isPlayer1Invincible){const _0x22f934=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x484159%_0x22f934>=INVINCIBILITY_BLINK_ON_MS)_0x2cc052=![];}if(_0x2cc052){const _0xc3f41a=ship1['x'],_0xd5f2fd=ship1['y'];typeof shipImage!=='undefined'&&shipImage[_0x17d9d9(0x10f)]?(gameCtx['drawImage'](shipImage,Math[_0x17d9d9(0x105)](_0xc3f41a),Math[_0x17d9d9(0x105)](_0xd5f2fd),ship1[_0x17d9d9(0x10d)],ship1[_0x17d9d9(0x1dd)]),player1IsDualShipActive&&gameCtx[_0x17d9d9(0x1f2)](shipImage,Math[_0x17d9d9(0x105)](_0xc3f41a+DUAL_SHIP_OFFSET_X),Math[_0x17d9d9(0x105)](_0xd5f2fd),ship1[_0x17d9d9(0x10d)],ship1[_0x17d9d9(0x1dd)])):(gameCtx[_0x17d9d9(0x18a)]=_0x17d9d9(0x1ae),gameCtx['fillRect'](Math['round'](_0xc3f41a),Math['round'](_0xd5f2fd),ship1[_0x17d9d9(0x10d)],ship1[_0x17d9d9(0x1dd)]));}}if(ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured){let _0x5703cd=!![];if(isPlayer2Invincible){const _0x2eaf92=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x484159%_0x2eaf92>=INVINCIBILITY_BLINK_ON_MS)_0x5703cd=![];}if(_0x5703cd){const _0x77b56=ship2['x'],_0x206667=ship2['y'];typeof shipImage!==_0x17d9d9(0x11b)&&shipImage[_0x17d9d9(0x10f)]?(gameCtx[_0x17d9d9(0x1f2)](shipImage,Math[_0x17d9d9(0x105)](_0x77b56),Math['round'](_0x206667),ship2[_0x17d9d9(0x10d)],ship2[_0x17d9d9(0x1dd)]),player2IsDualShipActive&&gameCtx[_0x17d9d9(0x1f2)](shipImage,Math[_0x17d9d9(0x105)](_0x77b56+DUAL_SHIP_OFFSET_X),Math[_0x17d9d9(0x105)](_0x206667),ship2['width'],ship2[_0x17d9d9(0x1dd)])):(gameCtx[_0x17d9d9(0x18a)]='green',gameCtx['fillRect'](Math[_0x17d9d9(0x105)](_0x77b56),Math[_0x17d9d9(0x105)](_0x206667),ship2[_0x17d9d9(0x10d)],ship2[_0x17d9d9(0x1dd)]));}}}else{if(ship&&!isShowingCaptureMessage){let _0x4517f9=!![];if(isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isInvincible){const _0x2353c2=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x484159%_0x2353c2>=INVINCIBILITY_BLINK_ON_MS)_0x4517f9=![];}if(_0x4517f9){let _0x1378cb=ship['x'],_0xbba014=(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0||!isInGameState||isShowingScoreScreen||isInGameState&&isShowingIntro&&!isManualControl&&(introStep===0x1||introStep===0x2||introStep===0x3))&&!isDualShipActive;_0xbba014&&(_0x1378cb=Math[_0x17d9d9(0x105)](gameCanvas[_0x17d9d9(0x10d)]/0x2-ship['width']/0x2));const _0x3821be=ship['y'];typeof shipImage!=='undefined'&&shipImage['complete']?(gameCtx[_0x17d9d9(0x1f2)](shipImage,Math[_0x17d9d9(0x105)](_0x1378cb),Math['round'](_0x3821be),ship['width'],ship[_0x17d9d9(0x1dd)]),isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isDualShipActive&&!isShipCaptured&&gameCtx[_0x17d9d9(0x1f2)](shipImage,Math[_0x17d9d9(0x105)](_0x1378cb+DUAL_SHIP_OFFSET_X),Math[_0x17d9d9(0x105)](_0x3821be),ship[_0x17d9d9(0x10d)],ship[_0x17d9d9(0x1dd)])):(gameCtx[_0x17d9d9(0x18a)]=_0x17d9d9(0x1ae),gameCtx['fillRect'](Math[_0x17d9d9(0x105)](_0x1378cb),Math[_0x17d9d9(0x105)](_0x3821be),ship[_0x17d9d9(0x10d)],ship[_0x17d9d9(0x1dd)]));}}}if(fallingShips[_0x17d9d9(0x14e)]>0x0&&typeof shipImage!=='undefined'&&shipImage[_0x17d9d9(0x10f)]){}gameCtx[_0x17d9d9(0x1db)]();if(!isInGameState){if(isShowingScoreScreen){}else{gameCtx['save']();const _0x448536=gameCanvas['width'],_0x1657ef=gameCanvas[_0x17d9d9(0x1dd)],_0x5a0f2e=_0x448536/0x2;selectedButtonIndex===-0x1&&(isPlayerSelectMode||isFiringModeSelectMode||isGameModeSelectMode||!isPlayerSelectMode&&!isFiringModeSelectMode&&!isGameModeSelectMode)&&(selectedButtonIndex=0x0);let _0xec2557=MENU_LOGO_APPROX_HEIGHT,_0x4bd1b3=_0xec2557*(logoImage[_0x17d9d9(0x1a1)]/logoImage[_0x17d9d9(0x220)]||0x1);typeof logoImage!==_0x17d9d9(0x11b)&&logoImage[_0x17d9d9(0x10f)]&&logoImage[_0x17d9d9(0x220)]!==0x0&&(_0xec2557=logoImage['naturalHeight']*LOGO_SCALE_FACTOR,_0x4bd1b3=logoImage[_0x17d9d9(0x1a1)]*LOGO_SCALE_FACTOR);const _0xcf8879=getSubtitleApproxHeight(MENU_SUBTITLE_FONT),_0x3eb5dc=_0xec2557+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0xcf8879;let _0xedff97=(_0x1657ef-_0x3eb5dc)/0x2-0x46;_0xedff97+=MENU_GENERAL_Y_OFFSET;const _0x44844b=_0x5a0f2e-_0x4bd1b3/0x2,_0x1e6167=_0xedff97+MENU_LOGO_EXTRA_Y_OFFSET;typeof logoImage!==_0x17d9d9(0x11b)&&logoImage[_0x17d9d9(0x10f)]&&logoImage[_0x17d9d9(0x220)]!==0x0?gameCtx[_0x17d9d9(0x1f2)](logoImage,Math[_0x17d9d9(0x105)](_0x44844b),Math['round'](_0x1e6167),_0x4bd1b3,_0xec2557):drawCanvasText(_0x17d9d9(0x208),_0x5a0f2e,_0x1e6167+_0xec2557/0x2,_0x17d9d9(0x114),_0x17d9d9(0x229));if(isGameModeSelectMode)drawCanvasButton(_0x17d9d9(0x12a),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x17d9d9(0x209),0x1,selectedButtonIndex===0x1);else{if(isFiringModeSelectMode)drawCanvasButton(_0x17d9d9(0x1f7),0x0,selectedButtonIndex===0x0),drawCanvasButton('NORMAL',0x1,selectedButtonIndex===0x1);else isPlayerSelectMode?(drawCanvasButton(_0x17d9d9(0x188),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x17d9d9(0x233),0x1,selectedButtonIndex===0x1)):(drawCanvasButton(_0x17d9d9(0x111),0x0,selectedButtonIndex===0x0),drawCanvasButton('GAME\x20EXIT',0x1,selectedButtonIndex===0x1));}const _0x4eb7f7=getMenuButtonRect(0x1);let _0xf1f7fa;_0x4eb7f7?_0xf1f7fa=_0x4eb7f7['y']+_0x4eb7f7[_0x17d9d9(0x1dd)]+MENU_BUTTON_SUBTITLE_V_GAP+_0xcf8879/0x2:_0xf1f7fa=_0xedff97+_0xec2557+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0xcf8879/0x2,drawCanvasText(MENU_SUBTITLE_TEXT,_0x5a0f2e-0x1,Math[_0x17d9d9(0x105)](_0xf1f7fa),MENU_SUBTITLE_FONT,MENU_SUBTITLE_COLOR,_0x17d9d9(0x230),_0x17d9d9(0x174),!![]),gameCtx[_0x17d9d9(0x1db)]();}}else{if(gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){gameCtx[_0x17d9d9(0x149)]();let _0x3800bf=!showReadyMessage&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!isCsCompletionDelayActive&&!isShowingIntro&&!isShowingCaptureMessage;_0x3800bf&&(bullets['forEach'](_0x95ebf1=>{}),enemyBullets[_0x17d9d9(0x201)](_0x10afdc=>{}));enemies[_0x17d9d9(0x201)](_0x1dd20e=>{});if(captureBeamActive&&capturingBossId&&captureBeamProgress>0x0){}renderExplosions(),renderFloatingScores(),renderHitSparks();let _0x440d29=![];const _0x4f7c05=gameCanvas['height']/0x2;if(isPaused){}else{if(isShowingCaptureMessage){}}gameCtx[_0x17d9d9(0x1db)]();}else{if(isShowingPlayerGameOverMessage){}else{if(gameOverSequenceStartTime>0x0){}}}}}catch(_0x59840e){console[_0x17d9d9(0x1cc)](_0x17d9d9(0x17e),_0x59840e,_0x59840e[_0x17d9d9(0x116)]);}}function handleEnemyHit(_0xb06ac,_0x2ac752=null){const _0x44483f=_0x48e791;if(!_0xb06ac)return{'destroyed':![],'pointsAwarded':0x0};const _0x1831cf=Date[_0x44483f(0x1ba)]();let _0x5bc1a0=0x0,_0x128a1b=![],_0x12a553=_0xb06ac[_0x44483f(0x20c)],_0x360450=null,_0x592176=0x1;const _0x1c3d9a=_0xb06ac['type']===ENEMY3_TYPE?BOSS_WIDTH:_0xb06ac[_0x44483f(0x1b3)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x3f1587=_0xb06ac[_0x44483f(0x1b3)]===ENEMY3_TYPE?BOSS_HEIGHT:_0xb06ac[_0x44483f(0x1b3)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x20c8bc=_0xb06ac['type']===ENEMY3_TYPE&&_0xb06ac['hasCapturedShip'],_0x241987=_0xb06ac[_0x44483f(0x1b3)]===ENEMY3_TYPE&&_0xb06ac[_0x44483f(0x222)];let _0x284d93=![],_0x565ee8=null;if(_0x20c8bc){if(isTwoPlayerMode&&selectedGameMode===_0x44483f(0x1a7)){if(isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0xb06ac['id'])_0x284d93=!![],_0x565ee8='player1';else isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0xb06ac['id']&&(_0x284d93=!![],_0x565ee8=_0x44483f(0x1be));}else!isTwoPlayerMode&&isShipCaptured&&capturedBossIdWithMessage===_0xb06ac['id']&&(_0x284d93=!![]);}const _0x2ee61f=_0xb06ac['x']+_0x1c3d9a/0x2,_0x26beba=_0xb06ac['y']+_0x3f1587*0.2;createHitSparks(_0x2ee61f,_0x26beba),_0xb06ac['health']--;_0xb06ac[_0x44483f(0x1b3)]===ENEMY3_TYPE&&(_0xb06ac[_0x44483f(0x20c)]=_0xb06ac[_0x44483f(0x22e)]<ENEMY3_MAX_HITS);if(_0xb06ac[_0x44483f(0x22e)]<=0x0){_0x128a1b=!![];isChallengingStage&&challengingStageEnemiesHit++;if(_0x20c8bc&&_0x241987){let _0x1ad53c=null;if(_0x284d93&&_0x565ee8)_0x1ad53c=_0x565ee8;else{let _0x2cc3a5=![];if(isCoopAIDemoActive){if(_0x2ac752===_0x44483f(0x1fd)&&player1IsDualShipActive)_0x1ad53c='player2',_0x2cc3a5=!![];else _0x2ac752===_0x44483f(0x1be)&&player2IsDualShipActive&&(_0x1ad53c='player1',_0x2cc3a5=!![]);}else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x44483f(0x181)){if(_0x2ac752===_0x44483f(0x219)&&player2IsDualShipActive)_0x1ad53c='player1',_0x2cc3a5=!![];else _0x2ac752===_0x44483f(0x1fd)&&player1IsDualShipActive&&(_0x1ad53c='ai_p2',_0x2cc3a5=!![]);}}!_0x2cc3a5&&(_0x1ad53c=_0x2ac752);}_0x1ad53c===null&&_0x2ac752&&(_0x1ad53c=_0x2ac752);if(_0xb06ac[_0x44483f(0x222)]){const _0x35e952=_0xb06ac[_0x44483f(0x222)][_0x44483f(0x10d)],_0x5dd66a=_0xb06ac[_0x44483f(0x222)][_0x44483f(0x1dd)],_0x3f98eb=_0xb06ac['x']+(_0x1c3d9a-_0x35e952)/0x2+CAPTURED_SHIP_OFFSET_X,_0x3a71cc=_0xb06ac['y']+CAPTURED_SHIP_OFFSET_Y,_0x3ae4cb=fallingShips['some'](_0x54a5bc=>Math['abs'](_0x54a5bc['x']-_0x3f98eb)<0x1&&Math[_0x44483f(0x211)](_0x54a5bc['y']-_0x3a71cc)<0x1);!_0x3ae4cb&&fallingShips[_0x44483f(0x1d3)]({'x':_0x3f98eb,'y':_0x3a71cc,'width':_0x35e952,'height':_0x5dd66a,'creationTime':_0x1831cf,'tintProgress':0x1,'rotation':0x0,'rotationDirection':Math[_0x44483f(0x16a)]()<0.5?-0x1:0x1,'totalRotation':0x0,'rotationCompleted':![],'targetPlayerId':_0x1ad53c});}else console[_0x44483f(0x1cc)](_0x44483f(0x187));_0xb06ac['hasCapturedShip']=![],_0xb06ac[_0x44483f(0x222)]=null;}else _0x20c8bc&&!_0x241987&&(console[_0x44483f(0x1cc)](_0x44483f(0x191)+_0xb06ac['id']+_0x44483f(0x172)),_0xb06ac[_0x44483f(0x1cb)]=![],_0xb06ac[_0x44483f(0x222)]=null);if(isChallengingStage){let _0x32ef32=0x64;const _0x4d10d7=csLastHitTime;csLastHitTime=_0x1831cf,csLastChainHitPosition={'x':_0xb06ac['x'],'y':_0xb06ac['y']},csCurrentChainHits>0x0&&_0x1831cf-_0x4d10d7<CS_CHAIN_BREAK_TIME_MS?csCurrentChainHits++:(csCurrentChainHits=0x1,csCurrentChainScore=0x0),csCurrentChainHits>=CS_CHAIN_SCORE_THRESHOLD&&(_0x32ef32*=0x2),_0x5bc1a0=_0x32ef32,csCurrentChainScore+=_0x5bc1a0,scoreEarnedThisCS+=_0x5bc1a0,_0x360450=_0x44483f(0x18f),_0x592176=0.4;}else{if(_0xb06ac['state']===_0x44483f(0x237))_0x5bc1a0=_0xb06ac[_0x44483f(0x1b3)]===ENEMY1_TYPE?0x32:_0xb06ac[_0x44483f(0x1b3)]===ENEMY2_TYPE?0x50:0x0,_0xb06ac['type']===ENEMY3_TYPE&&(_0x5bc1a0=0x96),_0x360450=_0x44483f(0x18f),_0x592176=0.4;else{_0x5bc1a0=_0xb06ac['type']===ENEMY1_TYPE?0x64:_0xb06ac[_0x44483f(0x1b3)]===ENEMY2_TYPE?0xa0:0x0;if(_0xb06ac[_0x44483f(0x1b3)]===ENEMY3_TYPE){if(_0x20c8bc){const _0x5758ab=[0x3e8,0x5dc,0x7d0,0xbb8];_0x5bc1a0=_0x5758ab[Math[_0x44483f(0x218)](Math[_0x44483f(0x16a)]()*_0x5758ab[_0x44483f(0x14e)])],_0x360450=_0x44483f(0x131),_0x592176=0.4;}else _0x12a553?(_0x5bc1a0=0x190,_0x360450=_0x44483f(0x131),_0x592176=0.4):(_0x5bc1a0=0x0,console[_0x44483f(0x1b9)](_0x44483f(0x20b)+_0x5bc1a0+'\x20points.\x20Health\x20was:\x20'+(_0xb06ac[_0x44483f(0x22e)]+0x1)),_0x360450=_0x44483f(0x18f),_0x592176=0.4);}else _0x360450=_0x44483f(0x18f),_0x592176=0.4;if(_0x128a1b&&_0x5bc1a0>0x0){const _0x386161=normalWaveLastHitTime;normalWaveLastHitTime=_0x1831cf,normalWaveLastChainHitPosition={'x':_0xb06ac['x'],'y':_0xb06ac['y']};normalWaveLastChainHitPosition&&_0x1831cf-_0x386161<NORMAL_WAVE_CHAIN_BREAK_TIME_MS?normalWaveCurrentChainHits++:(normalWaveCurrentChainHits=0x1,normalWaveCurrentChainScore=0x0);if(NORMAL_WAVE_CHAIN_BONUS_ENABLED&&normalWaveCurrentChainHits>=NORMAL_WAVE_CHAIN_SCORE_THRESHOLD){const _0x254e2a=[0x12c,0x258,0x3e8,0x5dc,0x7d0,0xbb8],_0x2b3cf8=Math[_0x44483f(0x20a)](_0x254e2a[_0x44483f(0x14e)]-0x1,normalWaveCurrentChainHits-NORMAL_WAVE_CHAIN_SCORE_THRESHOLD),_0x308231=_0x254e2a[_0x2b3cf8];_0x5bc1a0+=_0x308231,normalWaveCurrentChainScore+=_0x308231;}}}}if(_0x5bc1a0>0x0){let _0x9e01ae=null;if(isCoopAIDemoActive){if(_0x2ac752===_0x44483f(0x1fd))player1Score+=_0x5bc1a0,_0x9e01ae=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound('hiScoreSound',![],0.2))),checkAndAwardExtraLife(0x1);else{if(_0x2ac752===_0x44483f(0x1be))player2Score+=_0x5bc1a0,_0x9e01ae=()=>player2EnemiesHit++,player2Score>highScore&&(highScore=player2Score,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound(_0x44483f(0x157),![],0.2))),checkAndAwardExtraLife(0x2);else{player1Score+=_0x5bc1a0,_0x9e01ae=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score;checkAndAwardExtraLife(0x1);}}}else{if(!isManualControl)score+=_0x5bc1a0,player1Score=score,_0x9e01ae=()=>player1EnemiesHit++,score>highScore&&(highScore=score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(_0x44483f(0x157),![],0.2))),checkAndAwardExtraLife(0x1);else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(_0x2ac752==='player1')player1Score+=_0x5bc1a0,_0x9e01ae=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(_0x44483f(0x157),![],0.2))),checkAndAwardExtraLife(0x1);else{if(_0x2ac752===_0x44483f(0x219))player2Score+=_0x5bc1a0,_0x9e01ae=()=>player2EnemiesHit++,player2Score>highScore&&(highScore=player2Score,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound(_0x44483f(0x157),![],0.2))),checkAndAwardExtraLife(0x2);else{player1Score+=_0x5bc1a0,_0x9e01ae=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score;checkAndAwardExtraLife(0x1);}}}else{if(isTwoPlayerMode&&selectedGameMode===_0x44483f(0x1a7)){if(_0x2ac752===_0x44483f(0x1fd))player1Score+=_0x5bc1a0,_0x9e01ae=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(_0x44483f(0x157),![],0.2))),checkAndAwardExtraLife(0x1);else _0x2ac752==='player2'?(player2Score+=_0x5bc1a0,_0x9e01ae=()=>player2EnemiesHit++,player2Score>highScore&&(highScore=player2Score,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound('hiScoreSound',![],0.2))),checkAndAwardExtraLife(0x2)):(player1Score+=_0x5bc1a0,_0x9e01ae=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound('hiScoreSound',![],0.2))),checkAndAwardExtraLife(0x1));}else{score+=_0x5bc1a0;let _0x31fbab=score,_0x4c92a1=null,_0x5e7a72=currentPlayer;currentPlayer===0x1||!isTwoPlayerMode?(player1Score=score,_0x9e01ae=()=>player1EnemiesHit++,_0x4c92a1=()=>{player1TriggeredHighScoreSound=!![];}):(player2Score=score,_0x9e01ae=()=>player2EnemiesHit++,_0x4c92a1=()=>{player2TriggeredHighScoreSound=!![];});if(_0x31fbab>highScore){highScore=_0x31fbab;const _0x889e8f=currentPlayer===0x1||!isTwoPlayerMode?player1TriggeredHighScoreSound:player2TriggeredHighScoreSound;!_0x889e8f&&_0x4c92a1&&(_0x4c92a1(),playSound(_0x44483f(0x157),![],0.2));}checkAndAwardExtraLife(_0x5e7a72);}}}}_0x9e01ae&&!isChallengingStage&&_0x9e01ae();const _0x3257ff=_0xb06ac[_0x44483f(0x1a9)]===_0x44483f(0x237)||isChallengingStage?FLOATING_SCORE_COLOR_GRID:FLOATING_SCORE_COLOR_ACTIVE;floatingScores[_0x44483f(0x1d3)]({'text':_0x5bc1a0[_0x44483f(0x1da)](),'x':_0xb06ac['x']+_0x1c3d9a/0x2,'y':_0xb06ac['y'],'color':_0x3257ff,'creationTime':_0x1831cf,'displayStartTime':_0x1831cf+FLOATING_SCORE_APPEAR_DELAY});}createExplosion(_0xb06ac['x']+_0x1c3d9a/0x2,_0xb06ac['y']+_0x3f1587/0x2);_0xb06ac['id']===capturingBossId&&stopSound(_0x44483f(0x1b4));if(_0xb06ac[_0x44483f(0x1a9)]===_0x44483f(0x214)||_0xb06ac[_0x44483f(0x1a9)]===_0x44483f(0x168)||_0xb06ac['state']===_0x44483f(0x10a)||_0xb06ac[_0x44483f(0x1a9)]===_0x44483f(0x117)||_0xb06ac[_0x44483f(0x1a9)]==='returning'||_0xb06ac[_0x44483f(0x1a9)]===_0x44483f(0x15d)){if(_0xb06ac['type']===ENEMY3_TYPE)stopSound('bossGalagaDiveSound');else stopSound(_0x44483f(0x151));}}else{_0x128a1b=![];if(_0xb06ac[_0x44483f(0x1b3)]===ENEMY3_TYPE)_0x360450=_0x44483f(0x248),_0x592176=0.6,_0x5bc1a0=0x0;else{_0x5bc1a0=0x0;if(_0xb06ac[_0x44483f(0x1b3)]===ENEMY1_TYPE)_0x360450=_0x44483f(0x1b0),_0x592176=0.3;else _0xb06ac[_0x44483f(0x1b3)]===ENEMY2_TYPE&&(_0x360450='butterflyHitSound',_0x592176=0.3);}}return _0x360450&&playSound(_0x360450,![],_0x592176),{'destroyed':_0x128a1b,'pointsAwarded':_0x5bc1a0};}function createHitSparks(_0x39eb4d,_0x2d2d37){const _0x1cccbb=_0x48e791;if(!gameCtx)return;const _0x17151f=Date[_0x1cccbb(0x1ba)]();for(let _0x967b20=0x0;_0x967b20<HIT_SPARK_COUNT;_0x967b20++){const _0x245951=Math[_0x1cccbb(0x16a)]()*Math['PI']*0x2,_0x28b7b3=HIT_SPARK_SPEED*(0.7+Math[_0x1cccbb(0x16a)]()*0.6),_0x286bb6=HIT_SPARK_LIFETIME*(0.8+Math[_0x1cccbb(0x16a)]()*0.4);hitSparks[_0x1cccbb(0x1d3)]({'x':_0x39eb4d,'y':_0x2d2d37,'vx':Math[_0x1cccbb(0x12c)](_0x245951)*_0x28b7b3,'vy':Math[_0x1cccbb(0x13c)](_0x245951)*_0x28b7b3,'creationTime':_0x17151f,'lifetime':_0x286bb6,'size':HIT_SPARK_SIZE,'color':HIT_SPARK_COLOR});}}function updateHitSparks(){const _0x1d72a4=_0x48e791,_0x237d53=Date[_0x1d72a4(0x1ba)]();for(let _0x33c1b3=hitSparks['length']-0x1;_0x33c1b3>=0x0;_0x33c1b3--){const _0x4ced81=hitSparks[_0x33c1b3],_0x4cf35d=_0x237d53-_0x4ced81[_0x1d72a4(0x1ea)];_0x4cf35d>=_0x4ced81[_0x1d72a4(0x23c)]?hitSparks[_0x1d72a4(0x1ed)](_0x33c1b3,0x1):(_0x4ced81['vy']+=HIT_SPARK_GRAVITY,_0x4ced81['x']+=_0x4ced81['vx'],_0x4ced81['y']+=_0x4ced81['vy'],_0x4ced81[_0x1d72a4(0x162)]=Math[_0x1d72a4(0x1a4)](0x0,0x1-_0x4cf35d*HIT_SPARK_FADE_SPEED));}}function moveEntities(){const _0x139fa9=_0x48e791;try{if(isPaused)return;const _0x21e2ce=Date[_0x139fa9(0x1ba)]();}catch(_0x51ab22){console[_0x139fa9(0x1cc)]('FATAL\x20Error\x20in\x20moveEntities\x20(Restored\x20Conditions):',_0x51ab22,_0x51ab22[_0x139fa9(0x116)]),isGridSoundPlaying=![],stopSound(_0x139fa9(0x1af)),isEntrancePhaseActive=![],stopSound('entranceSound'),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(_0x139fa9(0x1b4)),stopSound(_0x139fa9(0x21d)),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0x139fa9(0x235))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x139fa9(0x20d));}}function switchPlayerTurn(){const _0x157763=_0x48e791;if(!isTwoPlayerMode||selectedGameMode===_0x157763(0x1a7))return![];stopSound(_0x157763(0x157));if(currentPlayer===0x1){player1Score=score,player1IsDualShipActive=isDualShipActive,player1MaxLevelReached=Math[_0x157763(0x1a4)](player1MaxLevelReached,level);if(player1Score>highScore)highScore=player1Score;}else{player2Score=score,player2IsDualShipActive=isDualShipActive,player2MaxLevelReached=Math[_0x157763(0x1a4)](player2MaxLevelReached,level);if(player2Score>highScore)highScore=player2Score;}const _0x1186f0=currentPlayer===0x1?0x2:0x1,_0x57880f=_0x1186f0===0x1?player1Lives:player2Lives;if(_0x57880f<=0x0){const _0x5cb898=currentPlayer===0x1?player1Lives:player2Lives;return _0x5cb898<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x1186f0,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function firePlayerBullet(_0x3c2c6e=null,_0x2f1f01=![]){const _0x46819c=_0x48e791,_0x435be4=Date[_0x46819c(0x1ba)](),_0x251335=isTwoPlayerMode&&selectedGameMode===_0x46819c(0x1a7)&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x435be4<coopPlayersReadyStartTime+0x1f40;if(_0x251335)return![];let _0x4f6c85=![],_0x9e5814=null,_0x118bfc=![],_0x139a31=0x0,_0x578347=_0x167df2=>{},_0x1f5f78=_0x1a8fc1=>{},_0x5430fe=![],_0x61c9d3=()=>![],_0x14cb9b=_0xfb2ae7=>{},_0x3984e4=_0x3c2c6e;const _0x1b149e=!isPaused&&isInGameState&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!showReadyMessage&&!isCsCompletionDelayActive&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x46819c(0x1a7)&&(_0x3c2c6e===_0x46819c(0x1fd)&&isPlayer1ShowingGameOverMessage||_0x3c2c6e==='player2'&&isPlayer2ShowingGameOverMessage));if(!_0x1b149e)return![];if(_0x3984e4){let _0x43b156=![];if(_0x3984e4==='ai'&&isShipCaptured)_0x43b156=!![];else{if(_0x3984e4===_0x46819c(0x219)&&isTwoPlayerMode&&selectedGameMode===_0x46819c(0x213)&&isShipCaptured)_0x43b156=!![];else{if(_0x3984e4===_0x46819c(0x1fd)&&isCoopAIDemoActive&&isPlayer1ShipCaptured)_0x43b156=!![];else{if(_0x3984e4===_0x46819c(0x1be)&&isCoopAIDemoActive&&isPlayer2ShipCaptured)_0x43b156=!![];else{if(_0x3984e4===_0x46819c(0x219)&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x46819c(0x181)&&isPlayer2ShipCaptured)_0x43b156=!![];}}}}if(_0x43b156)return![];}if(isTwoPlayerMode&&selectedGameMode==='coop'){if(_0x3c2c6e===_0x46819c(0x1fd)&&ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!player1NeedsRespawnAfterCapture)(!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer1ShipCaptured)&&(_0x9e5814=ship1,_0x118bfc=player1IsDualShipActive,_0x139a31=player1LastShotTime,_0x578347=_0x10e003=>{player1LastShotTime=_0x10e003;},_0x1f5f78=_0x1b6d21=>{player1ShotsFired+=_0x1b6d21;},_0x5430fe=selectedFiringMode==='single',_0x61c9d3=()=>p1JustFiredSingle,_0x14cb9b=_0xb5497a=>{p1JustFiredSingle=_0xb5497a;},_0x4f6c85=!![]);else _0x3c2c6e==='player2'&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!player2NeedsRespawnAfterCapture&&((!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer2ShipCaptured)&&(_0x9e5814=ship2,_0x118bfc=player2IsDualShipActive,_0x139a31=player2LastShotTime,_0x578347=_0x174c7f=>{player2LastShotTime=_0x174c7f;},_0x1f5f78=_0x493ec8=>{player2ShotsFired+=_0x493ec8;},isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x46819c(0x181)?_0x5430fe=![]:(_0x5430fe=selectedFiringMode===_0x46819c(0x226),_0x61c9d3=()=>p2JustFiredSingle,_0x14cb9b=_0x800ac2=>{p2JustFiredSingle=_0x800ac2;}),_0x4f6c85=!![]));}else{if(ship&&playerLives>0x0&&!isShipCaptured){_0x9e5814=ship,_0x118bfc=isDualShipActive;if(isTwoPlayerMode&&selectedGameMode===_0x46819c(0x213)){if(currentPlayer===0x1){_0x139a31=player1LastShotTime,_0x578347=_0x3fca9d=>{player1LastShotTime=_0x3fca9d;},_0x1f5f78=_0x3eefaf=>{player1ShotsFired+=_0x3eefaf;},_0x5430fe=selectedFiringMode===_0x46819c(0x226),_0x61c9d3=()=>p1JustFiredSingle,_0x14cb9b=_0x43767e=>{p1JustFiredSingle=_0x43767e;};if(!_0x3984e4)_0x3984e4=_0x46819c(0x1fd);}else{_0x139a31=player2LastShotTime,_0x578347=_0x4ab4a1=>{player2LastShotTime=_0x4ab4a1;},_0x1f5f78=_0x41a770=>{player2ShotsFired+=_0x41a770;};if(isPlayerTwoAI){_0x5430fe=![];if(!_0x3984e4)_0x3984e4='ai_p2';}else{_0x5430fe=selectedFiringMode==='single';connectedGamepadIndexP2===null&&connectedGamepadIndex!==null?(_0x61c9d3=()=>p1JustFiredSingle,_0x14cb9b=_0x4be70a=>{p1JustFiredSingle=_0x4be70a;}):(_0x61c9d3=()=>p2JustFiredSingle,_0x14cb9b=_0x1d8f1c=>{p2JustFiredSingle=_0x1d8f1c;});if(!_0x3984e4)_0x3984e4=_0x46819c(0x1be);}}}else{_0x139a31=player1LastShotTime,_0x578347=_0x129ed9=>{player1LastShotTime=_0x129ed9;},_0x1f5f78=_0x336394=>{player1ShotsFired+=_0x336394;},_0x5430fe=selectedFiringMode===_0x46819c(0x226),_0x61c9d3=()=>p1JustFiredSingle,_0x14cb9b=_0x3d8bea=>{p1JustFiredSingle=_0x3d8bea;};if(!_0x3984e4)_0x3984e4='player1';}_0x4f6c85=!![];}}_0x3c2c6e===null&&!isManualControl&&!isCoopAIDemoActive&&ship&&playerLives>0x0&&!isShipCaptured&&!isShowingCaptureMessage&&(_0x9e5814=ship,_0x118bfc=isDualShipActive,_0x139a31=aiLastShotTime,_0x578347=_0x2014a0=>{aiLastShotTime=_0x2014a0;},_0x1f5f78=_0x57c772=>{player1ShotsFired+=_0x57c772;},_0x5430fe=![],_0x4f6c85=!![],_0x3984e4='ai');if(!_0x4f6c85||!_0x9e5814)return![];const _0x2a7c28=isManualControl||isPlayerTwoAI&&selectedGameMode===_0x46819c(0x213)&&currentPlayer===0x2||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'&&_0x3c2c6e===_0x46819c(0x1fd);if(_0x5430fe){if(_0x2f1f01){if(_0x435be4-_0x139a31<SHOOT_COOLDOWN)return![];}else{let _0x345790=![];if(_0x3984e4===_0x46819c(0x1fd)||!isTwoPlayerMode&&_0x3984e4==='player1')_0x345790=keyboardP1ShootDown||connectedGamepadIndex!==null&&navigator['getGamepads']()?.[connectedGamepadIndex]?.[_0x46819c(0x1d6)][PS5_BUTTON_CROSS]?.[_0x46819c(0x110)];else{if(_0x3984e4===_0x46819c(0x1be)&&!isPlayerTwoAI){if(connectedGamepadIndexP2!==null)_0x345790=keyboardP2ShootDown||connectedGamepadIndexP2!==null&&navigator[_0x46819c(0x1d0)]()?.[connectedGamepadIndexP2]?.['buttons'][PS5_BUTTON_CROSS]?.[_0x46819c(0x110)];else connectedGamepadIndex!==null?_0x345790=keyboardP2ShootDown||connectedGamepadIndex!==null&&navigator['getGamepads']()?.[connectedGamepadIndex]?.['buttons'][PS5_BUTTON_CROSS]?.[_0x46819c(0x110)]:_0x345790=keyboardP2ShootDown;}}if(_0x61c9d3()){if(_0x345790)return![];else _0x14cb9b(![]);}if(_0x435be4-_0x139a31<SHOOT_COOLDOWN)return![];}}else{if(_0x435be4-_0x139a31<SHOOT_COOLDOWN)return![];}try{const _0x221a62=_0x9e5814['y'];let _0x5f4bf0=0x0;if(_0x118bfc){const _0x5d140e=_0x9e5814['x']+_0x9e5814[_0x46819c(0x10d)]/0x2,_0x5f2154=_0x9e5814['x']+DUAL_SHIP_OFFSET_X+_0x9e5814['width']/0x2,_0xf919e0=_0x5d140e-PLAYER_BULLET_WIDTH/0x2,_0x3dea1d=_0x5f2154-PLAYER_BULLET_WIDTH/0x2;bullets[_0x46819c(0x1d3)]({'x':_0xf919e0,'y':_0x221a62,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x3984e4}),bullets[_0x46819c(0x1d3)]({'x':_0x3dea1d,'y':_0x221a62,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x3984e4}),_0x5f4bf0=0x2;}else{const _0x58513c=_0x9e5814['x']+_0x9e5814[_0x46819c(0x10d)]/0x2-PLAYER_BULLET_WIDTH/0x2;bullets['push']({'x':_0x58513c,'y':_0x221a62,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x3984e4}),_0x5f4bf0=0x1;}if(_0x5430fe&&!_0x2f1f01)_0x14cb9b(!![]);return playSound(_0x46819c(0x1c2),![],0.4),_0x1f5f78(_0x5f4bf0),_0x578347(_0x435be4),!![];}catch(_0xc2003d){return console['error'](_0x46819c(0x112),_0xc2003d),![];}}function handlePlayerInput(){const _0x5f1c9e=_0x48e791;try{const _0x3b1f25=Date['now'](),_0x1ab312=isTwoPlayerMode&&selectedGameMode===_0x5f1c9e(0x1a7)&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x3b1f25<coopPlayersReadyStartTime+0x1f40;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedGameMode===_0x5f1c9e(0x213)&&currentPlayer===0x2&&!isManualControl){isCoopAIDemoActive&&(leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![]);return;}let _0x4ab00e=isPaused||!isManualControl||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isTwoPlayerMode&&selectedGameMode===_0x5f1c9e(0x1a7)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage);if(_0x4ab00e){keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![];return;}let _0x4c26e8=0x0;if(isTouchActiveGame&&gameCanvas&&gameCanvas['width']>0x0){const _0x4d0e61=gameCanvas['getBoundingClientRect'](),_0x43078b=gameCanvas[_0x5f1c9e(0x10d)]/_0x4d0e61['width'];_0x4c26e8=(touchCurrentX-_0x4d0e61[_0x5f1c9e(0x158)])*_0x43078b;}let _0x25355e=![],_0x2de3bc=![],_0x577103=![],_0x2371a4=![],_0x2b874f=![],_0x296c4a=![];if(connectedGamepadIndex!==null){const _0x5664f7=navigator[_0x5f1c9e(0x1d0)]();if(_0x5664f7?.[connectedGamepadIndex]){const _0x58c3ba=_0x5664f7[connectedGamepadIndex],_0xd96753=processSingleController(_0x58c3ba,previousGameButtonStates);_0x25355e=_0xd96753[_0x5f1c9e(0x158)],_0x2de3bc=_0xd96753['right'],_0x577103=_0xd96753[_0x5f1c9e(0x10b)],previousGameButtonStates=_0xd96753[_0x5f1c9e(0x127)][_0x5f1c9e(0x200)]();if(_0xd96753[_0x5f1c9e(0x23f)]&&!isShowingCaptureMessage){togglePause();return;}if(_0xd96753['back']&&!isShowingCaptureMessage){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates['length']>0x0)previousGameButtonStates=[];}}else{if(previousGameButtonStates[_0x5f1c9e(0x14e)]>0x0)previousGameButtonStates=[];}if(!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5f1c9e(0x181))){if(isTwoPlayerMode&&connectedGamepadIndexP2!==null&&connectedGamepadIndexP2!==connectedGamepadIndex){const _0x519c51=navigator[_0x5f1c9e(0x1d0)]();if(_0x519c51?.[connectedGamepadIndexP2]){const _0x5cb389=_0x519c51[connectedGamepadIndexP2],_0x5aa05b=processSingleController(_0x5cb389,previousGameButtonStatesP2);_0x2371a4=_0x5aa05b['left'],_0x2b874f=_0x5aa05b['right'],_0x296c4a=_0x5aa05b[_0x5f1c9e(0x10b)],previousGameButtonStatesP2=_0x5aa05b[_0x5f1c9e(0x127)]['slice']();}else{if(previousGameButtonStatesP2[_0x5f1c9e(0x14e)]>0x0)previousGameButtonStatesP2=[];}}else{if(previousGameButtonStatesP2[_0x5f1c9e(0x14e)]>0x0)previousGameButtonStatesP2=[];}}const _0x369c02=p1FireInputWasDown;p1FireInputWasDown=keyboardP1ShootDown||_0x577103;let _0x660d86=![];if(!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5f1c9e(0x181))){_0x660d86=p2FireInputWasDown;if(isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x2&&!isPlayerTwoAI){if(connectedGamepadIndexP2!==null)p2FireInputWasDown=keyboardP2ShootDown||_0x296c4a;else connectedGamepadIndex!==null?p2FireInputWasDown=keyboardP2ShootDown||_0x577103:p2FireInputWasDown=keyboardP2ShootDown;}else p2FireInputWasDown=keyboardP2ShootDown||_0x296c4a;}else p2FireInputWasDown=![];if(selectedFiringMode===_0x5f1c9e(0x226)){if(isTwoPlayerMode&&selectedGameMode==='coop'){if(!isTouchActiveGame){if(_0x369c02&&!p1FireInputWasDown)p1JustFiredSingle=![];if(!isPlayerTwoAI&&_0x660d86&&!p2FireInputWasDown)p2JustFiredSingle=![];}}else{if(isTwoPlayerMode&&selectedGameMode===_0x5f1c9e(0x213)){if(!isTouchActiveGame){if(currentPlayer===0x1&&_0x369c02&&!p1FireInputWasDown)p1JustFiredSingle=![];else{if(currentPlayer===0x2&&!isPlayerTwoAI){let _0x1eb441=connectedGamepadIndexP2===null&&connectedGamepadIndex!==null,_0x16af02=connectedGamepadIndexP2===null&&connectedGamepadIndex!==null;_0x1eb441&&_0x16af02?_0x369c02&&!p1FireInputWasDown&&(p1JustFiredSingle=![]):_0x660d86&&!p2FireInputWasDown&&(p2JustFiredSingle=![]);}}}}else{if(!isTouchActiveGame){if(_0x369c02&&!p1FireInputWasDown)p1JustFiredSingle=![];}}}}leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![];let _0x20e228=![];if(isTouchActiveGame&&gameCanvas){if(isTwoPlayerMode&&selectedGameMode===_0x5f1c9e(0x1a7)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x23cf97=ship1['width']+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x30f085=_0x4c26e8-_0x23cf97/0x2;_0x30f085=Math['max'](0x0,Math['min'](gameCanvas['width']-_0x23cf97,_0x30f085)),ship1['x']=_0x30f085,ship1[_0x5f1c9e(0x217)]=_0x30f085,_0x20e228=!![];}}else{if(ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1)){const _0x2dcf29=ship[_0x5f1c9e(0x10d)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x394455=_0x4c26e8-_0x2dcf29/0x2;_0x394455=Math[_0x5f1c9e(0x1a4)](0x0,Math[_0x5f1c9e(0x20a)](gameCanvas[_0x5f1c9e(0x10d)]-_0x2dcf29,_0x394455)),ship['x']=_0x394455,ship[_0x5f1c9e(0x217)]=_0x394455,_0x20e228=!![];}}}if(isTwoPlayerMode&&selectedGameMode===_0x5f1c9e(0x1a7)){if(!_0x20e228){const _0x2f471c=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture;_0x2f471c&&(leftPressed=keyboardP1LeftDown||_0x25355e,rightPressed=keyboardP1RightDown||_0x2de3bc);}if(!isPlayerTwoAI){const _0x37adbc=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture;_0x37adbc&&(p2LeftPressed=keyboardP2LeftDown||_0x2371a4,p2RightPressed=keyboardP2RightDown||_0x2b874f);}}else{if(!_0x20e228){const _0xa13c8f=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;if(_0xa13c8f){if(currentPlayer===0x1||!isTwoPlayerMode)leftPressed=keyboardP1LeftDown||_0x25355e,rightPressed=keyboardP1RightDown||_0x2de3bc;else{if(currentPlayer===0x2&&!isPlayerTwoAI&&selectedGameMode==='normal'){if(connectedGamepadIndexP2!==null)leftPressed=keyboardP2LeftDown||_0x2371a4,rightPressed=keyboardP2RightDown||_0x2b874f;else connectedGamepadIndex!==null?(leftPressed=keyboardP2LeftDown||_0x25355e,rightPressed=keyboardP2RightDown||_0x2de3bc):(leftPressed=keyboardP2LeftDown,rightPressed=keyboardP2RightDown);}}}}}if(isTwoPlayerMode&&selectedGameMode===_0x5f1c9e(0x1a7)){const _0x4f79b8=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture&&!_0x1ab312;if(_0x4f79b8){shootPressed=isTouchActiveGame&&selectedFiringMode==='rapid'&&(!isPlayerTwoAI||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'&&_0x4c26e8<=gameCanvas[_0x5f1c9e(0x10d)]/0x2)||p1FireInputWasDown;if(isShowingCaptureMessage&&isPlayer1ShipCaptured)shootPressed=![];}if(!isPlayerTwoAI){const _0x5c86f1=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture&&!_0x1ab312;if(_0x5c86f1){p2ShootPressed=isTouchActiveGame&&selectedFiringMode===_0x5f1c9e(0x1fb)&&_0x4c26e8>gameCanvas[_0x5f1c9e(0x10d)]/0x2||p2FireInputWasDown;if(isShowingCaptureMessage&&isPlayer2ShipCaptured)p2ShootPressed=![];}}}else{const _0x301014=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!_0x1ab312;if(_0x301014){let _0x52c356=![];if(currentPlayer===0x1||!isTwoPlayerMode)_0x52c356=p1FireInputWasDown;else currentPlayer===0x2&&!isPlayerTwoAI&&selectedGameMode===_0x5f1c9e(0x213)&&(_0x52c356=p2FireInputWasDown);shootPressed=isTouchActiveGame&&selectedFiringMode===_0x5f1c9e(0x1fb)||_0x52c356;if(isShowingCaptureMessage&&isShipCaptured)shootPressed=![];}}if(isManualControl){if(isTwoPlayerMode&&selectedGameMode===_0x5f1c9e(0x1a7))shootPressed&&firePlayerBullet(_0x5f1c9e(0x1fd),![]),!isPlayerTwoAI&&p2ShootPressed&&firePlayerBullet(_0x5f1c9e(0x1be),![]);else{if(shootPressed){if(isPlayerTwoAI&&selectedGameMode===_0x5f1c9e(0x213)&&currentPlayer===0x2){}else firePlayerBullet(currentPlayer===0x1||!isTwoPlayerMode?_0x5f1c9e(0x1fd):_0x5f1c9e(0x1be),![]);}}}}catch(_0x30a17e){console['error'](_0x5f1c9e(0x1ee),_0x30a17e),leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![];}}let aiIsCurrentlyTargetingCaptureBoss=![];function aiControl(){const _0x19dded=_0x48e791;try{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x19dded(0x181))return;let _0x2f439a=null,_0x304c9a=null,_0x194ef4=![],_0x4e417f=![],_0x51868e=![],_0x9ebda4=0x0,_0x2905b1='ai',_0x59d65a=![],_0x418959=![];if(isPlayerTwoAI&&selectedGameMode===_0x19dded(0x213)&&currentPlayer===0x2){if(!ship||playerLives<=0x0||isShipCaptured||isShowingPlayerGameOverMessage){if(ship)ship[_0x19dded(0x217)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas['width']/0x2:0x0;return;}_0x2f439a=ship,_0x304c9a=smoothedShipX,_0x194ef4=isDualShipActive,_0x4e417f=isShipCaptured,_0x51868e=isInvincible,_0x9ebda4=playerLives,_0x2905b1=_0x19dded(0x219),_0x59d65a=!![],_0x418959=playerLives>0x1&&!_0x194ef4&&!isShipCaptured;}else{if(!isManualControl&&!isPlayerTwoAI){if(playerLives<=0x0||!ship||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage){if(ship)ship[_0x19dded(0x217)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x19dded(0x10d)]/0x2:0x0;if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}if(isShipCaptured||isShowingCaptureMessage){if(ship)ship[_0x19dded(0x217)]=ship['x'];else{if(_0x2f439a)_0x2f439a[_0x19dded(0x217)]=_0x2f439a['x'];}if(smoothedShipX!==undefined&&ship)smoothedShipX=ship['x'];else{if(smoothedShipX!==undefined&&_0x2f439a)smoothedShipX=_0x2f439a['x'];}aiIsCurrentlyTargetingCaptureBoss=![];return;}_0x2f439a=ship,_0x304c9a=smoothedShipX,_0x194ef4=isDualShipActive,_0x4e417f=isShipCaptured,_0x51868e=isInvincible,_0x9ebda4=playerLives,_0x418959=playerLives>0x1&&!isDualShipActive&&!isShipCaptured;}else{if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}}if(_0x304c9a===undefined&&_0x2f439a)_0x304c9a=_0x2f439a['x'],(_0x59d65a||!isManualControl&&!isPlayerTwoAI)&&(smoothedShipX=_0x304c9a);else{if(_0x304c9a===undefined&&!_0x2f439a){_0x304c9a=gameCanvas?gameCanvas[_0x19dded(0x10d)]/0x2:0x0;(_0x59d65a||!isManualControl&&!isPlayerTwoAI)&&(smoothedShipX=_0x304c9a);if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}}const _0x545d6e=Date[_0x19dded(0x1ba)](),_0x28fe95=gameCanvas[_0x19dded(0x10d)],_0x722896=gameCanvas[_0x19dded(0x1dd)];let _0x4fd44c=_0x2f439a[_0x19dded(0x10d)];_0x194ef4&&(_0x4fd44c=DUAL_SHIP_OFFSET_X+_0x2f439a['width']);const _0x5a5fae=_0x2f439a['x']+_0x4fd44c/0x2,_0x33aad3=_0x2f439a['y'],_0x7e81ab=_0x28fe95/0x2,_0x2aa8f1=_0x7e81ab-_0x4fd44c/0x2,_0xaecd0b=showReadyMessage||showCSClearMessage||showCsHitsMessage||showPerfectMessage||showCsBonusScoreMessage||showExtraLifeMessage||isCsCompletionDelayActive||isShowingCaptureMessage||isShowingIntro;let _0x40bd4f=_0x304c9a,_0x1ab105=![],_0x3ac205=![],_0x5eae62=_0x304c9a,_0x164b46=null,_0x481f8f=![],_0x1fa6dd=![];aiNeedsStabilization&&!_0xaecd0b&&(aiStabilizationEndTime=_0x545d6e+AI_STABILIZATION_DURATION,aiNeedsStabilization=![],_0x304c9a=_0x2f439a['x'],(_0x59d65a||!isManualControl&&!isPlayerTwoAI)&&(smoothedShipX=_0x304c9a));const _0x438798=enemies[_0x19dded(0x247)](_0x1f1f33=>_0x1f1f33['id']===capturingBossId&&_0x1f1f33[_0x19dded(0x1b3)]===ENEMY3_TYPE);if(_0x418959&&captureBeamActive&&_0x438798&&_0x438798['state']===_0x19dded(0x12e)&&!_0x4e417f&&!isWaitingForRespawn){if(!isManualControl&&!isPlayerTwoAI)aiIsCurrentlyTargetingCaptureBoss=!![];else _0x59d65a&&(_0x1fa6dd=!![],aiIsCurrentlyTargetingCaptureBoss=!![]);if(aiIsCurrentlyTargetingCaptureBoss){_0x1ab105=![],_0x164b46=null;const _0x3b0858=_0x438798['x']+_0x438798[_0x19dded(0x10d)]/0x2;_0x545d6e-(_0x438798[_0x19dded(0x126)]||0x0)>=AI_CAPTURE_BEAM_APPROACH_DELAY_MS?(_0x40bd4f=_0x3b0858-_0x4fd44c/0x2,_0x481f8f=!![]):(_0x40bd4f=_0x2aa8f1,_0x481f8f=![]);}}else aiIsCurrentlyTargetingCaptureBoss&&(!captureBeamActive||!_0x438798||_0x438798[_0x19dded(0x1a9)]!=='capturing')&&(aiIsCurrentlyTargetingCaptureBoss=![],_0x1fa6dd=![]);if(_0x545d6e<aiStabilizationEndTime&&!_0xaecd0b&&!aiIsCurrentlyTargetingCaptureBoss)_0x40bd4f=_0x2aa8f1;else{if(!_0xaecd0b&&!aiIsCurrentlyTargetingCaptureBoss){_0x3ac205=![],_0x5eae62=_0x304c9a;if(!_0x51868e){let _0x5f4fbf=[];const _0x2ee2d4=isChallengingStage?FINAL_DODGE_LOOKAHEAD*0.9:isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_LOOKAHEAD*1.1:FINAL_DODGE_LOOKAHEAD*1.2,_0x1bfc5a=isChallengingStage?FINAL_DODGE_BUFFER_BASE*0.9:isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_BUFFER*1.1:FINAL_DODGE_BUFFER_BASE*1.2,_0x2252da={'x':_0x2f439a['x']-_0x1bfc5a,'y':_0x2f439a['y']-_0x2ee2d4,'width':_0x4fd44c+_0x1bfc5a*0x2,'height':_0x2ee2d4+_0x2f439a[_0x19dded(0x1dd)]};for(const _0x24db11 of enemyBullets){if(_0x24db11&&_0x24db11['y']+_0x24db11[_0x19dded(0x1dd)]>_0x2f439a['y']-_0x2f439a['height']*0x2&&_0x24db11['y']<_0x722896){const _0x4d11e3={'x':_0x24db11['x'],'y':_0x24db11['y'],'width':_0x24db11['width'],'height':_0x24db11['height']};checkCollision(_0x2252da,_0x4d11e3)&&_0x5f4fbf[_0x19dded(0x1d3)](_0x24db11);}}if(_0x5f4fbf[_0x19dded(0x14e)]>0x0){_0x3ac205=!![];let _0x4291ea=_0x304c9a,_0x45c17b=-Infinity;for(let _0x33c73b=-0x1;_0x33c73b<=0x1;_0x33c73b+=0x2){const _0x4274fa=_0x4fd44c*(0x2+Math[_0x19dded(0x16a)]()*0.5)+(_0x5f4fbf[_0x19dded(0x14e)]>0x1?_0x4fd44c*0.5:0x0);let _0xad530a=_0x304c9a+_0x33c73b*_0x4274fa;_0xad530a=Math[_0x19dded(0x1a4)](AI_ANTI_CORNER_BUFFER,Math['min'](_0x28fe95-_0x4fd44c-AI_ANTI_CORNER_BUFFER,_0xad530a));let _0xc09d8e=0x0;const _0x35ad6c={'x':_0xad530a-_0x1bfc5a/0x2,'y':_0x2f439a['y']-_0x2ee2d4,'width':_0x4fd44c+_0x1bfc5a,'height':_0x2ee2d4+_0x2f439a[_0x19dded(0x1dd)]};for(const _0x3c8051 of _0x5f4fbf){checkCollision(_0x35ad6c,{'x':_0x3c8051['x'],'y':_0x3c8051['y'],'width':_0x3c8051[_0x19dded(0x10d)],'height':_0x3c8051[_0x19dded(0x1dd)]})&&_0xc09d8e++;}let _0x56686d=-_0xc09d8e;if(Math[_0x19dded(0x211)](_0xad530a-_0x304c9a)<_0x4fd44c*0.5)_0x56686d-=0xa;_0x56686d>_0x45c17b&&(_0x45c17b=_0x56686d,_0x4291ea=_0xad530a);}_0x5eae62=_0x4291ea;}if(!_0x3ac205){const _0x426ad7=AI_COLLISION_LOOKAHEAD*1.5,_0x210428=FINAL_DODGE_BUFFER_BASE*1.5;for(const _0x223202 of enemies){if(_0x223202&&(_0x223202[_0x19dded(0x1a9)]===_0x19dded(0x214)||_0x223202['state']==='diving_to_capture_position'||_0x223202[_0x19dded(0x1a9)]===_0x19dded(0x168)||_0x223202[_0x19dded(0x1a9)]===_0x19dded(0x117))&&_0x223202['y']+_0x223202[_0x19dded(0x1dd)]>_0x2f439a['y']-_0x426ad7/0x2&&_0x223202['y']<_0x2f439a['y']+_0x2f439a[_0x19dded(0x1dd)]){const _0x279ee0={'x':_0x2f439a['x']-_0x210428,'y':_0x2f439a['y']-_0x426ad7,'width':_0x4fd44c+_0x210428*0x2,'height':_0x426ad7+_0x2f439a[_0x19dded(0x1dd)]},_0x575dc6={'x':_0x223202['x'],'y':_0x223202['y'],'width':_0x223202[_0x19dded(0x10d)],'height':_0x223202[_0x19dded(0x1dd)]};if(checkCollision(_0x279ee0,_0x575dc6)){_0x3ac205=!![];const _0x7a6061=_0x223202['x']+_0x223202[_0x19dded(0x10d)]/0x2,_0x5e0ba9=_0x5a5fae<_0x7a6061?-0x1:0x1,_0x5f4fa1=_0x4fd44c*(2.2+Math[_0x19dded(0x16a)]()*0.6);_0x5eae62=_0x304c9a+_0x5e0ba9*_0x5f4fa1;break;}}}}}if(_0x3ac205)_0x40bd4f=Math[_0x19dded(0x1a4)](AI_ANTI_CORNER_BUFFER,Math['min'](_0x28fe95-_0x4fd44c-AI_ANTI_CORNER_BUFFER,_0x5eae62)),_0x164b46=null,_0x1ab105=![];else{if(fallingShips[_0x19dded(0x14e)]>0x0&&!_0x4e417f&&!isWaitingForRespawn&&!_0x194ef4){let _0x11be3e=null,_0x4259fb=Infinity;for(const _0x121671 of fallingShips){let _0x541401=![];if(!isManualControl&&!isPlayerTwoAI||isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2){if(_0x59d65a&&_0x121671['targetPlayerId']===_0x19dded(0x1fd))_0x541401=!![];else!isManualControl&&!isPlayerTwoAI&&_0x121671[_0x19dded(0x1c7)]==='player1'&&(_0x541401=!![]);if(!_0x11be3e&&!_0x541401)_0x541401=!![];}if(_0x121671&&!_0x121671[_0x19dded(0x154)]&&_0x541401){const _0x3284ad=Math[_0x19dded(0x211)](_0x121671['x']+_0x121671[_0x19dded(0x10d)]/0x2-_0x5a5fae)+Math[_0x19dded(0x211)](_0x121671['y']-_0x2f439a['y']);_0x3284ad<_0x4259fb&&(_0x4259fb=_0x3284ad,_0x11be3e=_0x121671);}}_0x11be3e&&(_0x40bd4f=_0x11be3e['x']+_0x11be3e[_0x19dded(0x10d)]/0x2-_0x4fd44c/0x2,_0x1ab105=![],_0x164b46=null);}else{if(!_0x481f8f){_0x164b46=null;let _0x8f94da=-Infinity;for(const _0x11b9a2 of enemies){if(!_0x11b9a2)continue;let _0x4ec021=![];aiIsCurrentlyTargetingCaptureBoss&&_0x11b9a2['id']===capturingBossId&&(_0x4ec021=!![]);let _0x24700f=0x0;const _0x5d5130=_0x11b9a2['x']+_0x11b9a2[_0x19dded(0x10d)]/0x2,_0x1cbf23=_0x5d5130-_0x5a5fae,_0x4dfcfa=_0x33aad3-(_0x11b9a2['y']+_0x11b9a2['height']);if(_0x4dfcfa<0x0&&_0x11b9a2[_0x19dded(0x1a9)]!==_0x19dded(0x214)&&_0x11b9a2[_0x19dded(0x1a9)]!==_0x19dded(0x10a)&&_0x11b9a2[_0x19dded(0x1a9)]!==_0x19dded(0x117))continue;_0x24700f=(_0x722896-_0x11b9a2['y'])*0x2-Math[_0x19dded(0x211)](_0x1cbf23)*0x3-_0x4dfcfa;if(_0x11b9a2[_0x19dded(0x1a9)]===_0x19dded(0x214)||_0x11b9a2[_0x19dded(0x1a9)]==='diving_to_capture_position')_0x24700f+=0xbb8;if(_0x11b9a2[_0x19dded(0x1b3)]===ENEMY3_TYPE&&!_0x11b9a2[_0x19dded(0x20c)])_0x24700f+=0x7d0;if(_0x11b9a2['type']===ENEMY3_TYPE&&_0x11b9a2[_0x19dded(0x20c)])_0x24700f+=0xfa0;if(_0x11b9a2[_0x19dded(0x1b3)]===ENEMY3_TYPE&&_0x11b9a2[_0x19dded(0x1cb)])_0x24700f+=0x1388;_0x24700f>_0x8f94da&&(_0x8f94da=_0x24700f,_0x164b46=_0x11b9a2);}if(_0x164b46){const _0x23e882=_0x164b46['x']+_0x164b46[_0x19dded(0x10d)]/0x2;_0x40bd4f=_0x23e882-_0x4fd44c/0x2;const _0x1d5c5e=1.8;let _0x139e67;if(isChallengingStage)_0x139e67=_0x4fd44c*2.5;else _0x164b46[_0x19dded(0x1a9)]==='in_grid'||_0x164b46[_0x19dded(0x1a9)]===_0x19dded(0x113)?_0x139e67=_0x4fd44c*(GRID_SHOOT_ALIGNMENT_FACTOR*_0x1d5c5e):_0x139e67=_0x4fd44c*(FINAL_SHOOT_ALIGNMENT_THRESHOLD*_0x1d5c5e);const _0x49b181=Math[_0x19dded(0x211)](_0x5a5fae-_0x23e882);let _0x4223e5=![];if(aiIsCurrentlyTargetingCaptureBoss&&_0x164b46['id']===capturingBossId)_0x4223e5=!![];else _0x418959&&_0x164b46[_0x19dded(0x1b3)]===ENEMY3_TYPE&&!_0x164b46['hasCapturedShip']&&!captureAttemptMadeThisLevel&&!isFullGridWave&&(_0x164b46[_0x19dded(0x1a9)]===_0x19dded(0x237)||_0x164b46[_0x19dded(0x1a9)]===_0x19dded(0x113)||_0x164b46['state']===_0x19dded(0x10a)||_0x164b46[_0x19dded(0x1a9)]===_0x19dded(0x12e)&&_0x164b46['id']===capturingBossId)&&(_0x4223e5=!![]);_0x49b181<_0x139e67&&!_0x4223e5&&(_0x1ab105=!![]);}else _0x40bd4f=_0x2aa8f1,_0x1ab105=![];}}}}else aiIsCurrentlyTargetingCaptureBoss&&_0xaecd0b&&(_0x1ab105=![],_0x164b46=null);}if(_0x2f439a){_0x304c9a+=(_0x40bd4f-_0x304c9a)*AI_SMOOTHING_FACTOR_MOVE,_0x2f439a[_0x19dded(0x217)]=_0x304c9a;if(_0x59d65a)smoothedShipX=_0x304c9a;else!isManualControl&&!isPlayerTwoAI&&(smoothedShipX=_0x304c9a);}aiIsCurrentlyTargetingCaptureBoss&&(_0x1ab105=![]);if(_0x1ab105&&!_0x3ac205&&!_0x481f8f&&!_0xaecd0b){let _0x5e38c2=![];_0x59d65a?_0x5e38c2=!![]:_0x545d6e>=aiCanShootTime&&(_0x5e38c2=!![]),_0x5e38c2&&!isShowingIntro&&(firePlayerBullet(_0x2905b1,![])&&(!_0x59d65a&&(aiCanShootTime=_0x545d6e+SHOOT_COOLDOWN)));}}catch(_0x4eb80a){console[_0x19dded(0x1cc)](_0x19dded(0x1a0),_0x4eb80a,_0x4eb80a[_0x19dded(0x116)]);ship&&(ship[_0x19dded(0x217)]=ship['x']);aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x19dded(0x10d)]/0x2:0x0;if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];}}function aiControlCoop(){const _0x2bd5da=_0x48e791;if(!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2bd5da(0x181))||isPaused||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0){if(ship1)ship1[_0x2bd5da(0x217)]=ship1['x'];if(ship2)ship2[_0x2bd5da(0x217)]=ship2['x'];return;}const _0xc34702=Date['now'](),_0x398b19=gameCanvas['width'],_0x4f3fd=isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP',_0x392162=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture,_0x237bcf=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture,_0x10b8d5=_0x788951=>{const _0x385af4=_0x788951==='p1'&&isPlayer1ShowingGameOverMessage||_0x788951==='p2'&&isPlayer2ShowingGameOverMessage;return _0x385af4||showReadyMessage||isCsCompletionDelayActive||isShowingIntro&&!(level===0x1&&coopPlayersReadyStartTime>0x0&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'));};let _0x1bcea2=!![],_0x221ee4=!![];if(coopAICaptureDiveAnticipationActive&&_0xc34702<coopAICaptureDiveAnticipationEndTime){if(!_0x4f3fd)_0x1bcea2=![];_0x221ee4=![];}else coopAICaptureDiveAnticipationActive&&(coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0);if(_0x392162&&ship1&&!_0x4f3fd){if(smoothedShip1X===undefined)smoothedShip1X=ship1['x'];const _0x1b61d6=_0x10b8d5('p1');let {desiredTargetX:_0x41ffa2,shouldTryShoot:_0x13da9d,targetEnemyForAI:_0x366456}=calculateAIDesiredState(ship1,smoothedShip1X,player1IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer1Invincible,isPlayer1ShipCaptured,isPlayer1WaitingForRespawn,_0xc34702,_0x398b19,_0x1b61d6,'p1');aiShip1TargetEnemy=_0x366456,smoothedShip1X+=(_0x41ffa2-smoothedShip1X)*AI_SMOOTHING_FACTOR_MOVE,ship1['targetX']=smoothedShip1X;const _0x290fad=_0x366456&&_0x366456[_0x2bd5da(0x1b3)]===ENEMY3_TYPE&&_0x366456['hasCapturedShip']&&_0x366456['id']===capturedBossIdWithMessage&&isPlayer2ShipCaptured;if(_0x13da9d&&_0x1bcea2&&!(isShowingCaptureMessage&&isPlayer1ShipCaptured)){if(_0x290fad||_0xc34702>=aiShip1CanShootTime){fireCoopAIBullet(ship1,player1IsDualShipActive,_0x2bd5da(0x1fd));if(!_0x290fad)aiShip1CanShootTime=_0xc34702+SHOOT_COOLDOWN;else aiShip1CanShootTime=_0xc34702+SHOOT_COOLDOWN/0x2;}}}if(_0x237bcf&&ship2){if(smoothedShip2X===undefined)smoothedShip2X=ship2['x'];const _0x5b467d=_0x10b8d5('p2');let {desiredTargetX:_0x159216,shouldTryShoot:_0x56d9aa,targetEnemyForAI:_0x252221}=calculateAIDesiredState(ship2,smoothedShip2X,player2IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer2Invincible,isPlayer2ShipCaptured,isPlayer2WaitingForRespawn,_0xc34702,_0x398b19,_0x5b467d,'ai_p2');aiShip2TargetEnemy=_0x252221,smoothedShip2X+=(_0x159216-smoothedShip2X)*AI_SMOOTHING_FACTOR_MOVE,ship2['targetX']=smoothedShip2X;const _0x3dc82f=_0x252221&&_0x252221[_0x2bd5da(0x1b3)]===ENEMY3_TYPE&&_0x252221[_0x2bd5da(0x1cb)]&&_0x252221['id']===capturedBossIdWithMessage&&isPlayer1ShipCaptured;if(_0x56d9aa&&_0x221ee4&&!(isShowingCaptureMessage&&isPlayer2ShipCaptured)){if(_0x3dc82f||_0xc34702>=aiShip2CanShootTime){fireCoopAIBullet(ship2,player2IsDualShipActive,isCoopAIDemoActive?_0x2bd5da(0x1be):_0x2bd5da(0x219));if(!_0x3dc82f)aiShip2CanShootTime=_0xc34702+SHOOT_COOLDOWN;else aiShip2CanShootTime=_0xc34702+SHOOT_COOLDOWN/0x2;}}}}function fireCoopAIBullet(_0x4f2216,_0xc486e6,_0x54b13b){const _0x54150f=_0x48e791;if(!_0x4f2216)return![];const _0x54b267=Date[_0x54150f(0x1ba)]();let _0x19c053=![];if(_0x54b13b===_0x54150f(0x1fd)&&isPlayer1ShowingGameOverMessage)_0x19c053=!![];if((_0x54b13b===_0x54150f(0x1be)||_0x54b13b==='ai_p2')&&isPlayer2ShowingGameOverMessage)_0x19c053=!![];let _0x112b69=isPaused||!isInGameState||gameOverSequenceStartTime>0x0||_0x19c053;if(_0x112b69)return![];if(_0x54b13b===_0x54150f(0x1fd)&&isPlayer1ShipCaptured)return![];if((_0x54b13b===_0x54150f(0x1be)||_0x54b13b===_0x54150f(0x219))&&isPlayer2ShipCaptured)return![];try{const _0x5ad33a=_0x4f2216['y'];let _0x44f455=0x0;const _0x3e6b41=_0x54b13b;if(_0xc486e6){const _0xefe06e=_0x4f2216['x']+_0x4f2216[_0x54150f(0x10d)]/0x2,_0x2b59b8=_0x4f2216['x']+DUAL_SHIP_OFFSET_X+_0x4f2216[_0x54150f(0x10d)]/0x2,_0x4fe746=_0xefe06e-PLAYER_BULLET_WIDTH/0x2,_0x439ef1=_0x2b59b8-PLAYER_BULLET_WIDTH/0x2;bullets[_0x54150f(0x1d3)]({'x':_0x4fe746,'y':_0x5ad33a,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x3e6b41}),bullets[_0x54150f(0x1d3)]({'x':_0x439ef1,'y':_0x5ad33a,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x3e6b41}),_0x44f455=0x2;}else{const _0x37abb3=_0x4f2216['x']+_0x4f2216[_0x54150f(0x10d)]/0x2-PLAYER_BULLET_WIDTH/0x2;bullets[_0x54150f(0x1d3)]({'x':_0x37abb3,'y':_0x5ad33a,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x3e6b41}),_0x44f455=0x1;}playSound('playerShootSound',![],0.4);if(_0x54b13b===_0x54150f(0x1fd))player1ShotsFired+=_0x44f455,player1LastShotTime=_0x54b267,aiShip1LastShotTime=_0x54b267;else(_0x54b13b===_0x54150f(0x1be)||_0x54b13b===_0x54150f(0x219))&&(player2ShotsFired+=_0x44f455,player2LastShotTime=_0x54b267,aiShip2LastShotTime=_0x54b267);return!![];}catch(_0x1429a9){return console[_0x54150f(0x1cc)]('Error\x20creating\x20CO-OP\x20AI\x20bullet\x20for\x20'+_0x54b13b+':',_0x1429a9),![];}}function calculateAIDesiredState(_0x2c337e,_0x1d5c5f,_0x5d959f,_0x46e448,_0x3129e6,_0x37fa31,_0x1a6935,_0x493bc9,_0x462afe,_0x369ea5,_0x76b1e1,_0x36b7e6,_0x35ae93){const _0x38cd0e=_0x48e791;let _0x5d9c13=_0x1d5c5f,_0x1cc4a1=![],_0xd4faa8=null,_0x20b39e=![],_0x1cbde8=![],_0x20ea84=![],_0x1d4afe=![];const _0x2187ed=gameCanvas[_0x38cd0e(0x1dd)],_0x2c3561=_0x2c337e[_0x38cd0e(0x10d)]+(_0x5d959f?DUAL_SHIP_OFFSET_X:0x0),_0x563f2b=_0x2c337e['x']+_0x2c3561/0x2,_0x310324=_0x2c337e['y'],_0x42e90d=_0x35ae93==='p1'?player1Lives:_0x35ae93===_0x38cd0e(0x219)?player2Lives:0x0,_0x4638d4=_0x42e90d>0x1&&!_0x5d959f&&!_0x493bc9;let _0x142911=_0x76b1e1/0x2;const _0x2ffe90=isShowingIntro||isShowingCoopPlayersReady,_0x270302=isCoopAIDemoActive&&_0x2ffe90&&!(isChallengingStage&&isEntrancePhaseActive),_0x3423e8=isCoopAIDemoActive&&(_0x35ae93==='p1'&&player1Lives>0x0&&player2Lives<=0x0||(_0x35ae93===_0x38cd0e(0x219)||_0x35ae93==='p2')&&player2Lives>0x0&&player1Lives<=0x0);if(_0x270302&&_0x3423e8)_0x142911=_0x76b1e1/0x2;else{if(_0x35ae93==='p1')_0x142911=_0x76b1e1*0.25+Math[_0x38cd0e(0x13c)](_0x369ea5/(AI_WIGGLE_PERIOD*1.1))*(AI_WIGGLE_AMPLITUDE*0.8);else(_0x35ae93===_0x38cd0e(0x219)||_0x35ae93==='p2')&&(_0x142911=_0x76b1e1*0.75+Math[_0x38cd0e(0x12c)](_0x369ea5/(AI_WIGGLE_PERIOD*0.9))*(AI_WIGGLE_AMPLITUDE*0.8));}let _0xdfdf81=_0x142911-_0x2c3561/0x2;if(_0x36b7e6||_0x493bc9||_0x462afe||_0x35ae93==='p1'&&player1NeedsRespawnAfterCapture||(_0x35ae93===_0x38cd0e(0x219)||_0x35ae93==='p2')&&player2NeedsRespawnAfterCapture)return _0x270302&&_0x3423e8?_0x5d9c13=_0xdfdf81:_0x5d9c13=_0xdfdf81,(_0x493bc9||_0x462afe||_0x35ae93==='p1'&&player1NeedsRespawnAfterCapture||(_0x35ae93===_0x38cd0e(0x219)||_0x35ae93==='p2')&&player2NeedsRespawnAfterCapture)&&(_0x5d9c13=_0x2c337e['x']),{'desiredTargetX':_0x5d9c13,'shouldTryShoot':![],'targetEnemyForAI':null};const _0x174297=_0x35ae93==='p1'?_0x38cd0e(0x219):'p1',_0x2765bc=_0x174297==='p1'&&isPlayer1ShipCaptured||_0x174297===_0x38cd0e(0x219)&&isPlayer2ShipCaptured,_0x35bd96=_0x174297==='p1'&&isPlayer1ShowingGameOverMessage||_0x174297==='ai_p2'&&isPlayer2ShowingGameOverMessage;let _0x460c84=null,_0x29a1d6=!![];if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x38cd0e(0x181)){if(_0x2765bc&&!_0x35bd96&&capturedBossIdWithMessage){const _0x13f848=_0x174297==='p1'?coopPartner1CapturedTime:coopPartner2CapturedTime;_0x13f848>0x0&&_0x369ea5-_0x13f848<COOP_AI_SAVE_PARTNER_DELAY_MS&&(_0x29a1d6=![]),_0x460c84=_0x46e448[_0x38cd0e(0x247)](_0x47708b=>_0x47708b['id']===capturedBossIdWithMessage&&_0x47708b[_0x38cd0e(0x1b3)]===ENEMY3_TYPE&&_0x47708b[_0x38cd0e(0x1cb)]);}}if(_0x460c84&&!_0x5d959f&&_0x29a1d6){_0x20ea84=!![],_0xd4faa8=_0x460c84;const _0x2e238a=_0x460c84['x']+_0x460c84['width']/0x2;_0x5d9c13=_0x2e238a-_0x2c3561/0x2,_0x1cc4a1=!![],_0x20b39e=![];if(!_0x1a6935){let _0xa775ae=[];const _0x211b07=FINAL_DODGE_LOOKAHEAD*0.4,_0xef891f=FINAL_DODGE_BUFFER_BASE*0.3,_0x474c53={'x':Math[_0x38cd0e(0x20a)](_0x563f2b,_0x2e238a)-_0xef891f,'y':_0x2c337e['y']-_0x211b07,'width':Math['abs'](_0x563f2b-_0x2e238a)+_0x2c3561+_0xef891f*0x2,'height':_0x211b07+_0x2c337e[_0x38cd0e(0x1dd)]};for(const _0x4ee03a of _0x3129e6){if(_0x4ee03a&&_0x4ee03a['y']+_0x4ee03a[_0x38cd0e(0x1dd)]>_0x2c337e['y']-_0x2c337e['height']&&_0x4ee03a['y']<_0x2187ed){const _0x226766={'x':_0x4ee03a['x'],'y':_0x4ee03a['y'],'width':_0x4ee03a['width'],'height':_0x4ee03a[_0x38cd0e(0x1dd)]};checkCollision(_0x474c53,_0x226766)&&_0xa775ae[_0x38cd0e(0x1d3)](_0x4ee03a);}}if(_0xa775ae[_0x38cd0e(0x14e)]>0x0){_0x20b39e=!![];const _0x553a3e=_0x1d5c5f<_0x76b1e1/0x2?-0x1:0x1;_0x5d9c13=_0x1d5c5f+_0x553a3e*(_0x2c3561*0.6),_0x1cc4a1=![];}}return _0x5d9c13=Math[_0x38cd0e(0x1a4)](AI_EDGE_BUFFER,Math[_0x38cd0e(0x20a)](_0x76b1e1-_0x2c3561-AI_EDGE_BUFFER,_0x5d9c13)),{'desiredTargetX':_0x5d9c13,'shouldTryShoot':_0x1cc4a1,'targetEnemyForAI':_0xd4faa8};}if(!_0x1a6935){let _0x248aff=[];const _0x3a83bf=FINAL_DODGE_LOOKAHEAD*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x38cd0e(0x181)?1.6:0.8),_0x37bbb2=FINAL_DODGE_BUFFER_BASE*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x38cd0e(0x181)?1.7:0.8),_0x46dae6={'x':_0x2c337e['x']-_0x37bbb2,'y':_0x2c337e['y']-_0x3a83bf,'width':_0x2c3561+_0x37bbb2*0x2,'height':_0x3a83bf+_0x2c337e[_0x38cd0e(0x1dd)]};for(const _0x60c140 of _0x3129e6){if(_0x60c140&&_0x60c140['y']+_0x60c140[_0x38cd0e(0x1dd)]>_0x2c337e['y']-_0x2c337e['height']*1.5&&_0x60c140['y']<_0x2187ed){const _0x45c6f7={'x':_0x60c140['x'],'y':_0x60c140['y'],'width':_0x60c140[_0x38cd0e(0x10d)],'height':_0x60c140['height']};checkCollision(_0x46dae6,_0x45c6f7)&&_0x248aff[_0x38cd0e(0x1d3)](_0x60c140);}}if(_0x248aff[_0x38cd0e(0x14e)]>0x0){_0x20b39e=!![];let _0x2cb7fd=_0x1d5c5f;const _0x525715=_0x2c3561*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x38cd0e(0x181)?0x3:0x2);let _0x518e2d=0x0,_0x16c642=0x0,_0x1cf13f=0x0;const _0x27d515=_0x2c337e['x']+_0x2c3561/0x2;for(const _0x1683b5 of _0x248aff){if(_0x1683b5['x']<_0x27d515-_0x2c3561*0.5)_0x16c642++;else{if(_0x1683b5['x']>_0x27d515+_0x2c3561*0.5)_0x1cf13f++;else _0x518e2d++;}}if(_0x16c642<=_0x1cf13f&&_0x16c642<=_0x518e2d)_0x2cb7fd=_0x1d5c5f-_0x525715-Math[_0x38cd0e(0x16a)]()*_0x2c3561*0.4;else{if(_0x1cf13f<=_0x16c642&&_0x1cf13f<=_0x518e2d)_0x2cb7fd=_0x1d5c5f+_0x525715+Math[_0x38cd0e(0x16a)]()*_0x2c3561*0.4;else{if(_0x1d5c5f<_0x142911)_0x2cb7fd=_0x142911+_0x525715+Math[_0x38cd0e(0x16a)]()*_0x2c3561*0.7;else _0x2cb7fd=_0x142911-_0x525715-Math[_0x38cd0e(0x16a)]()*_0x2c3561*0.7;}}_0x5d9c13=_0x2cb7fd;}if(!_0x20b39e){const _0x5ebaa8=AI_COLLISION_LOOKAHEAD*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x38cd0e(0x181)?0x1:0.75),_0x578bbf=AI_COLLISION_BUFFER*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x38cd0e(0x181)?0x1:0.8);for(const _0x2cde50 of _0x46e448){if(!_0x2cde50)continue;if(!_0x29a1d6&&_0x460c84&&_0x2cde50['id']===_0x460c84['id'])continue;if((_0x2cde50[_0x38cd0e(0x1a9)]===_0x38cd0e(0x214)||_0x2cde50[_0x38cd0e(0x1a9)]==='diving_to_capture_position')&&_0x2cde50['y']+_0x2cde50[_0x38cd0e(0x1dd)]>_0x310324-_0x5ebaa8&&_0x2cde50['y']<_0x310324+_0x2c337e[_0x38cd0e(0x1dd)]*1.5){const _0x1dd309={'x':_0x2c337e['x']-_0x578bbf,'y':_0x2c337e['y']-_0x5ebaa8,'width':_0x2c3561+_0x578bbf*0x2,'height':_0x5ebaa8+_0x2c337e[_0x38cd0e(0x1dd)]},_0x2e725d={'x':_0x2cde50['x'],'y':_0x2cde50['y'],'width':_0x2cde50[_0x38cd0e(0x10d)],'height':_0x2cde50[_0x38cd0e(0x1dd)]};if(checkCollision(_0x1dd309,_0x2e725d)){_0x20b39e=!![],_0xd4faa8=null,_0x1cc4a1=![];const _0xa1f369=_0x2cde50['x']+_0x2cde50[_0x38cd0e(0x10d)]/0x2;_0x5d9c13=_0x1d5c5f+(_0x563f2b<_0xa1f369?-0x1:0x1)*(_0x2c3561*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x38cd0e(0x181)?2.2:1.9));break;}}}}}if(!_0x20b39e&&_0x4638d4&&captureBeamActive&&capturingBossId&&!_0x493bc9){if(aiPlayerActivelySeekingCaptureById===null||aiPlayerActivelySeekingCaptureById===_0x35ae93){const _0x5509ff=_0x46e448[_0x38cd0e(0x247)](_0x39f13a=>_0x39f13a['id']===capturingBossId);if(_0x5509ff&&_0x5509ff[_0x38cd0e(0x1a9)]===_0x38cd0e(0x12e)){aiPlayerActivelySeekingCaptureById===null&&(aiPlayerActivelySeekingCaptureById=_0x35ae93);if(aiPlayerActivelySeekingCaptureById===_0x35ae93){if(_0x369ea5-(_0x5509ff[_0x38cd0e(0x126)]||0x0)>=AI_CAPTURE_BEAM_APPROACH_DELAY_MS){_0x1d4afe=!![];const _0x402fbd=_0x5509ff['x']+(_0x5509ff[_0x38cd0e(0x1b3)]===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH)/0x2;_0x5d9c13=_0x402fbd-_0x2c3561/0x2,_0x1cc4a1=![],_0xd4faa8=null;}else _0x5d9c13=_0xdfdf81,_0x1cc4a1=![],_0xd4faa8=null;}}else aiPlayerActivelySeekingCaptureById===_0x35ae93&&(aiPlayerActivelySeekingCaptureById=null);}}else aiPlayerActivelySeekingCaptureById===_0x35ae93&&!(_0x4638d4&&captureBeamActive&&capturingBossId&&!_0x493bc9)&&(aiPlayerActivelySeekingCaptureById=null);if(!_0x20b39e&&!_0x1d4afe&&!_0x5d959f){const _0x5a8051=_0x37fa31[_0x38cd0e(0x247)](_0x45a31c=>_0x45a31c[_0x38cd0e(0x1c7)]===_0x35ae93&&!_0x45a31c[_0x38cd0e(0x154)]);_0x5a8051&&(_0x1cbde8=!![],_0x5d9c13=_0x5a8051['x']+_0x5a8051['width']/0x2-_0x2c3561/0x2,_0x1cc4a1=![],_0xd4faa8=null);}if(!_0x20b39e&&!_0x1d4afe&&!_0x1cbde8&&!_0x20ea84){let _0x3bcd23=-Infinity,_0x580ae0=![],_0x461c72=null;for(const _0x1a0ad3 of _0x46e448){if(!_0x1a0ad3)continue;if(!_0x29a1d6&&_0x460c84&&_0x1a0ad3['id']===_0x460c84['id'])continue;if(_0x1d4afe&&_0x1a0ad3['id']===capturingBossId&&aiPlayerActivelySeekingCaptureById===_0x35ae93)continue;let _0x4fe58b=![];if(_0x1a0ad3[_0x38cd0e(0x1b3)]===ENEMY3_TYPE&&_0x1a0ad3[_0x38cd0e(0x1cb)]&&_0x42e90d<=0x1){const _0x172b8e=(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x38cd0e(0x181))&&_0x1a0ad3['id']===capturedBossIdWithMessage&&_0x2765bc;!_0x172b8e&&(_0x4fe58b=!![]);}let _0x5b0275=0x0;const _0x5bcb1f=_0x1a0ad3['x']+_0x1a0ad3[_0x38cd0e(0x10d)]/0x2,_0x34b2b8=_0x5bcb1f-_0x563f2b,_0x4d71aa=_0x310324-(_0x1a0ad3['y']+_0x1a0ad3[_0x38cd0e(0x1dd)]);if(_0x4d71aa<0x0&&_0x1a0ad3['state']!==_0x38cd0e(0x214)&&_0x1a0ad3[_0x38cd0e(0x1a9)]!==_0x38cd0e(0x10a)&&_0x1a0ad3[_0x38cd0e(0x1a9)]!==_0x38cd0e(0x117))continue;let _0x1b3597=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(_0x35ae93==='p1'&&_0x5bcb1f<_0x76b1e1/0x2)_0x1b3597=0x1388;else{if((_0x35ae93===_0x38cd0e(0x219)||_0x35ae93==='p2')&&_0x5bcb1f>=_0x76b1e1/0x2)_0x1b3597=0x1388;}}_0x5b0275=_0x1b3597+(_0x2187ed-_0x1a0ad3['y'])*0x2-Math[_0x38cd0e(0x211)](_0x34b2b8)*0x3-_0x4d71aa;if(_0x1a0ad3[_0x38cd0e(0x1a9)]===_0x38cd0e(0x214)||_0x1a0ad3[_0x38cd0e(0x1a9)]===_0x38cd0e(0x10a))_0x5b0275+=0xbb8;if(_0x1a0ad3[_0x38cd0e(0x1b3)]===ENEMY3_TYPE&&!_0x1a0ad3['isDamaged'])_0x5b0275+=0x7d0;if(_0x1a0ad3[_0x38cd0e(0x1b3)]===ENEMY3_TYPE&&_0x1a0ad3[_0x38cd0e(0x20c)])_0x5b0275+=0xfa0;_0x1a0ad3[_0x38cd0e(0x1b3)]===ENEMY3_TYPE&&_0x1a0ad3[_0x38cd0e(0x1cb)]&&(!_0x4fe58b?_0x5b0275+=0x1388:_0x5b0275-=0x2710);if(_0x5b0275>_0x3bcd23){_0x3bcd23=_0x5b0275,_0x461c72=_0x1a0ad3;let _0x32cfeb=![];if(_0x461c72[_0x38cd0e(0x1b3)]===ENEMY3_TYPE&&!_0x461c72['hasCapturedShip']&&!isFullGridWave){if(_0x4638d4&&!captureAttemptMadeThisLevel&&(_0x461c72[_0x38cd0e(0x1a9)]===_0x38cd0e(0x237)||_0x461c72['state']===_0x38cd0e(0x113)||_0x461c72['state']==='diving_to_capture_position'||_0x461c72['state']===_0x38cd0e(0x12e))){if(_0x1d4afe&&_0x461c72['id']===capturingBossId&&aiPlayerActivelySeekingCaptureById===_0x35ae93)_0x32cfeb=!![];else!_0x1d4afe&&aiPlayerActivelySeekingCaptureById!==_0x35ae93&&(_0x32cfeb=!![]);}if(_0x5d959f){const _0x25deb8=_0x35ae93==='p1'?'ai_p2':'p1';let _0x2ea6be=![];_0x25deb8==='p1'?ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture&&!player1IsDualShipActive&&(_0x2ea6be=!![]):ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture&&!player2IsDualShipActive&&(_0x2ea6be=!![]),_0x2ea6be&&(_0x32cfeb=!![]);}}if(_0x4fe58b&&_0x461c72===_0x1a0ad3)Math[_0x38cd0e(0x211)](_0x563f2b-(_0x461c72['x']+_0x461c72[_0x38cd0e(0x10d)]/0x2))<_0x2c3561*1.1?_0x580ae0=!![]:_0x580ae0=![];else{if(_0x32cfeb)_0x580ae0=![];else Math['abs'](_0x563f2b-(_0x461c72['x']+_0x461c72[_0x38cd0e(0x10d)]/0x2))<_0x2c3561*0.9?_0x580ae0=!![]:_0x580ae0=![];}}}_0xd4faa8=_0x461c72,_0x1cc4a1=_0x580ae0;if(_0xd4faa8){let _0x437b70=![];if(_0xd4faa8[_0x38cd0e(0x1b3)]===ENEMY3_TYPE&&_0xd4faa8['hasCapturedShip']&&_0x42e90d<=0x1){const _0x258bd6=(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x38cd0e(0x181))&&_0xd4faa8['id']===capturedBossIdWithMessage&&_0x2765bc;!_0x258bd6&&(_0x437b70=!![]);}if(_0x437b70)_0x5d9c13=_0xdfdf81;else{const _0x14c15b=_0xd4faa8['x']+_0xd4faa8[_0x38cd0e(0x10d)]/0x2;_0x5d9c13=_0x14c15b-_0x2c3561/0x2;}}else _0x5d9c13=_0xdfdf81,_0x1cc4a1=![];}return _0x1d4afe&&aiPlayerActivelySeekingCaptureById===_0x35ae93&&(_0x1cc4a1=![],_0xd4faa8=null),_0x5d9c13=Math[_0x38cd0e(0x1a4)](AI_EDGE_BUFFER,Math[_0x38cd0e(0x20a)](_0x76b1e1-_0x2c3561-AI_EDGE_BUFFER,_0x5d9c13)),{'desiredTargetX':_0x5d9c13,'shouldTryShoot':_0x1cc4a1,'targetEnemyForAI':_0xd4faa8};}function findAndDetachEnemy(){const _0x4b0a05=_0x48e791;try{let _0x40c3dd=![];isTwoPlayerMode&&selectedGameMode===_0x4b0a05(0x1a7)?_0x40c3dd=isPlayer1ShipCaptured||isPlayer2ShipCaptured:_0x40c3dd=isShipCaptured;if(!isFullGridWave&&_0x40c3dd){const _0x2c2c63=enemies[_0x4b0a05(0x247)](_0x250af1=>_0x250af1&&_0x250af1[_0x4b0a05(0x1b3)]===ENEMY3_TYPE&&_0x250af1[_0x4b0a05(0x1cb)]&&_0x250af1[_0x4b0a05(0x1a9)]===_0x4b0a05(0x237));if(_0x2c2c63){_0x2c2c63[_0x4b0a05(0x1ef)]=!![],_0x2c2c63[_0x4b0a05(0x184)]=_0x4b0a05(0x213);const _0x386cf3=new Set([_0x2c2c63['id']]);return resetJustReturnedFlags(_0x386cf3),[_0x2c2c63];}}if(isEntrancePhaseActive)return null;let _0x46e956=enemies[_0x4b0a05(0x245)](_0x582e37=>_0x582e37&&_0x582e37[_0x4b0a05(0x1a9)]===_0x4b0a05(0x237)&&!_0x582e37['justReturned']);if(_0x46e956[_0x4b0a05(0x14e)]===0x0){_0x46e956=enemies[_0x4b0a05(0x245)](_0x37739b=>_0x37739b&&_0x37739b[_0x4b0a05(0x1a9)]===_0x4b0a05(0x237));if(_0x46e956[_0x4b0a05(0x14e)]===0x0)return null;}if(_0x46e956[_0x4b0a05(0x14e)]===0x0)return null;_0x46e956[_0x4b0a05(0x1c6)]((_0x14564c,_0x3cf116)=>(_0x3cf116[_0x4b0a05(0x204)]||0x0)-(_0x14564c['gridRow']||0x0));const _0x2608a2=_0x46e956[_0x4b0a05(0x14e)]<=0x3;let _0x3a8d01=[];const _0x511070=_0x4b0a05(0x213);gridJustCompleted&&(gridJustCompleted=![]);let _0x158036=![];if(level>0x1&&!_0x2608a2&&_0x46e956['length']>=0x3){const _0x2bb5e7=_0x46e956['filter'](_0x15697b=>_0x15697b[_0x4b0a05(0x1b3)]===ENEMY3_TYPE&&!_0x15697b[_0x4b0a05(0x1cb)]);for(const _0x48c251 of _0x2bb5e7){const _0x4a0b25=_0x46e956[_0x4b0a05(0x247)](_0x5a37a6=>_0x5a37a6[_0x4b0a05(0x1b3)]===ENEMY2_TYPE&&_0x5a37a6['gridRow']===_0x48c251['gridRow']&&_0x5a37a6[_0x4b0a05(0x170)]===_0x48c251[_0x4b0a05(0x170)]-0x1),_0x5e5298=_0x46e956[_0x4b0a05(0x247)](_0x507abf=>_0x507abf[_0x4b0a05(0x1b3)]===ENEMY2_TYPE&&_0x507abf[_0x4b0a05(0x204)]===_0x48c251[_0x4b0a05(0x204)]&&_0x507abf[_0x4b0a05(0x170)]===_0x48c251[_0x4b0a05(0x170)]+0x1);if(_0x4a0b25&&_0x5e5298){_0x3a8d01=[_0x48c251,_0x4a0b25,_0x5e5298],_0x158036=!![];break;}}}if(!_0x158036&&!_0x2608a2){const _0x2849a1=_0x46e956[_0x4b0a05(0x245)](_0x5984cc=>_0x5984cc[_0x4b0a05(0x1b3)]===ENEMY1_TYPE),_0x414fbb=scaleValue(level,BASE_BEE_GROUP_ATTACK_PROBABILITY,MAX_BEE_GROUP_ATTACK_PROBABILITY)*1.2;if(_0x2849a1[_0x4b0a05(0x14e)]>=0x2&&Math['random']()<_0x414fbb){const _0x14e7b3=scaleValue(level,BASE_BEE_TRIPLE_ATTACK_PROBABILITY,MAX_BEE_TRIPLE_ATTACK_PROBABILITY)*1.1,_0x3c8e3f=_0x2849a1[_0x4b0a05(0x14e)]>=0x3&&Math[_0x4b0a05(0x16a)]()<_0x14e7b3?0x3:0x2;let _0x352267=![];_0x2849a1[_0x4b0a05(0x1c6)](()=>Math[_0x4b0a05(0x16a)]()-0.5);for(let _0x23b8c5=0x0;_0x23b8c5<_0x2849a1[_0x4b0a05(0x14e)];_0x23b8c5++){const _0x191bbe=_0x2849a1[_0x23b8c5];let _0x360717=[_0x191bbe];const _0x2d3fdd=_0x2849a1[_0x4b0a05(0x245)](_0x45fd5d=>_0x45fd5d['id']!==_0x191bbe['id']&&_0x45fd5d[_0x4b0a05(0x204)]===_0x191bbe[_0x4b0a05(0x204)]);_0x2d3fdd[_0x4b0a05(0x1c6)]((_0x28d5ac,_0x4338d3)=>Math[_0x4b0a05(0x211)](_0x28d5ac[_0x4b0a05(0x170)]-_0x191bbe[_0x4b0a05(0x170)])-Math['abs'](_0x4338d3['gridCol']-_0x191bbe['gridCol']));for(let _0x350756=0x0;_0x350756<_0x2d3fdd['length']&&_0x360717['length']<_0x3c8e3f;_0x350756++){_0x360717['push'](_0x2d3fdd[_0x350756]);}if(_0x360717[_0x4b0a05(0x14e)]===_0x3c8e3f){_0x3a8d01=_0x360717,_0x158036=!![],_0x352267=!![];break;}}!_0x352267&&_0x2849a1[_0x4b0a05(0x14e)]>=_0x3c8e3f&&(_0x3a8d01=_0x2849a1[_0x4b0a05(0x200)](0x0,_0x3c8e3f),_0x158036=!![]);}}if(!_0x158036&&!_0x2608a2){const _0x4a3b1f=_0x46e956[_0x4b0a05(0x245)](_0x3343a2=>_0x3343a2[_0x4b0a05(0x1b3)]===ENEMY2_TYPE),_0x16bbda=0.2;if(_0x4a3b1f[_0x4b0a05(0x14e)]>=0x2&&Math[_0x4b0a05(0x16a)]()<_0x16bbda){const _0x2e5758=0x2;let _0x1654ab=![];_0x4a3b1f[_0x4b0a05(0x1c6)](()=>Math[_0x4b0a05(0x16a)]()-0.5);for(let _0x13d386=0x0;_0x13d386<_0x4a3b1f[_0x4b0a05(0x14e)];_0x13d386++){const _0x96d2a3=_0x4a3b1f[_0x13d386];let _0x3932ad=[_0x96d2a3];const _0x1ae986=_0x4a3b1f[_0x4b0a05(0x245)](_0x1188cc=>_0x1188cc['id']!==_0x96d2a3['id']&&_0x1188cc[_0x4b0a05(0x204)]===_0x96d2a3[_0x4b0a05(0x204)]);_0x1ae986[_0x4b0a05(0x1c6)]((_0x5b04cb,_0xbe6eda)=>Math[_0x4b0a05(0x211)](_0x5b04cb[_0x4b0a05(0x170)]-_0x96d2a3[_0x4b0a05(0x170)])-Math['abs'](_0xbe6eda[_0x4b0a05(0x170)]-_0x96d2a3[_0x4b0a05(0x170)]));for(let _0x24847f=0x0;_0x24847f<_0x1ae986['length']&&_0x3932ad[_0x4b0a05(0x14e)]<_0x2e5758;_0x24847f++){_0x3932ad[_0x4b0a05(0x1d3)](_0x1ae986[_0x24847f]);}if(_0x3932ad[_0x4b0a05(0x14e)]===_0x2e5758){_0x3a8d01=_0x3932ad,_0x158036=!![],_0x1654ab=!![];break;}}!_0x1654ab&&_0x4a3b1f[_0x4b0a05(0x14e)]>=_0x2e5758&&(_0x3a8d01=_0x4a3b1f[_0x4b0a05(0x200)](0x0,_0x2e5758),_0x158036=!![]);}}if(!_0x158036&&_0x46e956[_0x4b0a05(0x14e)]>0x0){const _0x46a274=_0x46e956[0x0];_0x3a8d01[_0x4b0a05(0x1d3)](_0x46a274);if(_0x46e956[_0x4b0a05(0x14e)]>0x1&&!_0x2608a2&&Math['random']()<0.2){const _0x3975a4=_0x46e956[_0x4b0a05(0x247)](_0x1829bf=>_0x1829bf['id']!==_0x46a274['id']&&_0x1829bf[_0x4b0a05(0x204)]===_0x46a274['gridRow']&&_0x1829bf[_0x4b0a05(0x170)]===_0x46a274[_0x4b0a05(0x170)]-0x1),_0x4f902a=_0x46e956[_0x4b0a05(0x247)](_0x487825=>_0x487825['id']!==_0x46a274['id']&&_0x487825[_0x4b0a05(0x204)]===_0x46a274[_0x4b0a05(0x204)]&&_0x487825[_0x4b0a05(0x170)]===_0x46a274[_0x4b0a05(0x170)]+0x1),_0x4570a9=_0x3975a4||_0x4f902a;if(_0x4570a9){const _0x137432=_0x46a274['type']===ENEMY3_TYPE&&_0x4570a9[_0x4b0a05(0x1b3)]===ENEMY3_TYPE;!_0x137432&&_0x3a8d01[_0x4b0a05(0x1d3)](_0x4570a9);}}_0x158036=!![];}if(_0x3a8d01['length']>0x0){_0x3a8d01=_0x3a8d01[_0x4b0a05(0x245)](_0x5d8402=>_0x5d8402);if(_0x3a8d01[_0x4b0a05(0x14e)]===0x0)return null;_0x3a8d01['forEach'](_0x277fef=>{const _0x34db8e=_0x4b0a05;_0x277fef&&(_0x277fef[_0x34db8e(0x1ef)]=!![],_0x277fef[_0x34db8e(0x184)]=_0x511070);});const _0x5c452a=new Set(_0x3a8d01[_0x4b0a05(0x1d2)](_0x1795ed=>_0x1795ed['id']));return resetJustReturnedFlags(_0x5c452a),_0x3a8d01;}return null;}catch(_0x5eb090){return console[_0x4b0a05(0x1cc)](_0x4b0a05(0x20f),_0x5eb090),null;}}function triggerImmediateCaptureDive(){const _0x5b65af=_0x48e791;try{let _0x430c0b=![],_0x47e435=null;if(isTwoPlayerMode&&selectedGameMode===_0x5b65af(0x1a7)){const _0x30f833=ship1&&player1Lives>0x1&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn,_0x239568=ship2&&player2Lives>0x1&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn;if((_0x30f833||_0x239568)&&!captureAttemptMadeThisLevel){_0x430c0b=!![];if(_0x30f833&&_0x239568)_0x47e435=Math[_0x5b65af(0x16a)]()<0.5?ship1:ship2;else{if(_0x30f833)_0x47e435=ship1;else _0x239568&&(_0x47e435=ship2);}}}else playerLives>0x1&&ship&&!isShipCaptured&&!isWaitingForRespawn&&!captureAttemptMadeThisLevel&&(_0x430c0b=!![],_0x47e435=ship);if(isChallengingStage||!_0x430c0b||!_0x47e435)return;const _0x315e5b=enemies[_0x5b65af(0x245)](_0x5f48e7=>_0x5f48e7&&_0x5f48e7[_0x5b65af(0x1a9)]===_0x5b65af(0x237)&&_0x5f48e7['type']===ENEMY3_TYPE&&!_0x5f48e7[_0x5b65af(0x1cb)]&&!_0x5f48e7['isPreparingForImmediateCapture']);if(_0x315e5b[_0x5b65af(0x14e)]>0x0){const _0x4dd445=_0x315e5b[Math[_0x5b65af(0x218)](Math[_0x5b65af(0x16a)]()*_0x315e5b[_0x5b65af(0x14e)])],_0x68e248=Date[_0x5b65af(0x1ba)]();_0x4dd445[_0x5b65af(0x231)]=!![],_0x4dd445['justReturned']=!![];const _0x27524c=new Set([_0x4dd445['id']]);resetJustReturnedFlags(_0x27524c);const _0x2bcf50=_0x47e435['x']+_0x47e435[_0x5b65af(0x10d)]/0x2,_0x230569=_0x2bcf50<gameCanvas['width']/0x2?_0x5b65af(0x246):'left',_0x2d76f5=_0x230569===_0x5b65af(0x158)?gameCanvas[_0x5b65af(0x10d)]*CAPTURE_DIVE_SIDE_MARGIN_FACTOR:gameCanvas[_0x5b65af(0x10d)]*(0x1-CAPTURE_DIVE_SIDE_MARGIN_FACTOR)-BOSS_WIDTH,_0x3a69e1=gameCanvas[_0x5b65af(0x1dd)]*CAPTURE_DIVE_BOTTOM_HOVER_Y_FACTOR;_0x4dd445['state']=_0x5b65af(0x113),_0x4dd445[_0x5b65af(0x217)]=_0x2d76f5,_0x4dd445[_0x5b65af(0x1ec)]=_0x3a69e1,_0x4dd445[_0x5b65af(0x1e2)]=_0x68e248,playSound(_0x5b65af(0x197),![],0.2);const _0xff15d0=_0x4dd445['id'];_0x4dd445[_0x5b65af(0x239)]=setTimeout(()=>{const _0x551f45=_0x5b65af,_0x22ec95=enemies[_0x551f45(0x247)](_0x44b637=>_0x44b637?.['id']===_0xff15d0);_0x22ec95&&_0x22ec95['state']===_0x551f45(0x113)&&(_0x22ec95[_0x551f45(0x1a9)]=_0x551f45(0x10a));if(_0x22ec95)_0x22ec95['capturePrepareTimeout']=null;const _0x51e038=enemySpawnTimeouts[_0x551f45(0x19c)](_0x33ff96=>_0x33ff96===_0x4dd445['capturePrepareTimeout']);if(_0x51e038>-0x1)enemySpawnTimeouts[_0x551f45(0x1ed)](_0x51e038,0x1);},0x12c),enemySpawnTimeouts['push'](_0x4dd445['capturePrepareTimeout']);}}catch(_0x493a44){console[_0x5b65af(0x1cc)](_0x5b65af(0x179),_0x493a44);}}function resetJustReturnedFlags(_0x69aa88){const _0x51bf90=_0x48e791;enemies[_0x51bf90(0x201)](_0x3818ac=>{const _0x114677=_0x51bf90;let _0x21ec5a=![];if(_0x69aa88 instanceof Set)_0x21ec5a=_0x69aa88['has'](_0x3818ac['id']);else typeof _0x69aa88===_0x114677(0x13b)&&(_0x21ec5a=_0x3818ac['id']===_0x69aa88);_0x3818ac&&_0x3818ac[_0x114677(0x1a9)]===_0x114677(0x237)&&_0x3818ac[_0x114677(0x1ef)]&&!_0x21ec5a&&(_0x3818ac[_0x114677(0x1ef)]=![]);});}function updateFloatingScores(){const _0x3cd30b=_0x48e791;if(isPaused)return;try{const _0x50b98a=Date[_0x3cd30b(0x1ba)]();floatingScores=floatingScores['filter'](_0xfb825b=>_0x50b98a-_0xfb825b[_0x3cd30b(0x1ea)]<FLOATING_SCORE_DURATION+FLOATING_SCORE_APPEAR_DELAY);}catch(_0x5122f4){console[_0x3cd30b(0x1cc)]('Error\x20updating\x20floating\x20scores:',_0x5122f4),floatingScores=[];}}function updateExplosions(){const _0x54ada3=_0x48e791;if(isPaused)return;try{const _0x43151b=Date[_0x54ada3(0x1ba)]();for(let _0x427985=explosions[_0x54ada3(0x14e)]-0x1;_0x427985>=0x0;_0x427985--){const _0x3c9f23=explosions[_0x427985],_0xdebe3d=_0x43151b-_0x3c9f23[_0x54ada3(0x1ea)];if(_0xdebe3d>_0x3c9f23[_0x54ada3(0x1f4)]){explosions[_0x54ada3(0x1ed)](_0x427985,0x1);continue;}_0x3c9f23[_0x54ada3(0x1b2)][_0x54ada3(0x201)](_0x49369b=>{const _0x274723=_0x54ada3;_0x49369b['x']+=_0x49369b['vx'],_0x49369b['y']+=_0x49369b['vy'],_0x49369b[_0x274723(0x162)]=Math[_0x274723(0x1a4)](0x0,0x1-_0xdebe3d/_0x3c9f23['duration']*EXPLOSION_FADE_SPEED);});}}catch(_0x407768){console['error'](_0x54ada3(0x18e),_0x407768),explosions=[];}}function moveEntities(_0x1f2bb3=null,_0x3bbec6=null){const _0x759314=_0x48e791;if(isPaused)return;try{const _0xddcfbd=Date[_0x759314(0x1ba)](),_0x170887=gameCanvas?gameCanvas[_0x759314(0x1dd)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;if(gameCanvas&&!isTouchActiveGame){if(isManualControl){if(isTwoPlayerMode&&selectedGameMode===_0x759314(0x1a7)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x155e8c=ship1[_0x759314(0x10d)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(leftPressed)ship1['x']-=ship1[_0x759314(0x22c)];if(rightPressed)ship1['x']+=ship1[_0x759314(0x22c)];ship1['x']=Math[_0x759314(0x1a4)](0x0,Math['min'](gameCanvas['width']-_0x155e8c,ship1['x'])),ship1[_0x759314(0x217)]=ship1['x'];}if(!isPlayerTwoAI&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x33de37=ship2['width']+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(p2LeftPressed)ship2['x']-=ship2[_0x759314(0x22c)];if(p2RightPressed)ship2['x']+=ship2[_0x759314(0x22c)];ship2['x']=Math[_0x759314(0x1a4)](0x0,Math[_0x759314(0x20a)](gameCanvas[_0x759314(0x10d)]-_0x33de37,ship2['x'])),ship2[_0x759314(0x217)]=ship2['x'];}}else{if(ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1){const _0x4c03de=ship['width']+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x5a6456=![],_0x1300d0=![];if(isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x759314(0x14b)&&currentPlayer===0x1&&isShowingIntro){if(_0x1f2bb3!==null)_0x5a6456=_0x1f2bb3;if(_0x3bbec6!==null)_0x1300d0=_0x3bbec6;}if(_0x5a6456||leftPressed)ship['x']-=ship[_0x759314(0x22c)];if(_0x1300d0||rightPressed)ship['x']+=ship['speed'];ship['x']=Math[_0x759314(0x1a4)](0x0,Math[_0x759314(0x20a)](gameCanvas['width']-_0x4c03de,ship['x'])),ship['targetX']=ship['x'];}}}}}if(!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x759314(0x213)&&currentPlayer===0x2||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x759314(0x181)){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x759314(0x181)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x42064e=ship1[_0x759314(0x217)]-ship1['x'];let _0x28f721=ship1['speed']*AI_POSITION_MOVE_SPEED_FACTOR;if(Math[_0x759314(0x211)](_0x42064e)>AI_MOVEMENT_DEADZONE)ship1['x']+=Math['sign'](_0x42064e)*Math[_0x759314(0x20a)](Math[_0x759314(0x211)](_0x42064e),_0x28f721);const _0x5fa69a=ship1[_0x759314(0x10d)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship1['x']=Math[_0x759314(0x1a4)](0x0,Math[_0x759314(0x20a)](gameCanvas[_0x759314(0x10d)]-_0x5fa69a,ship1['x']));}if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x2f614e=ship2[_0x759314(0x217)]-ship2['x'];let _0x4a5338=ship2[_0x759314(0x22c)]*AI_POSITION_MOVE_SPEED_FACTOR;if(Math[_0x759314(0x211)](_0x2f614e)>AI_MOVEMENT_DEADZONE)ship2['x']+=Math['sign'](_0x2f614e)*Math['min'](Math['abs'](_0x2f614e),_0x4a5338);const _0x539155=ship2['width']+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship2['x']=Math['max'](0x0,Math['min'](gameCanvas[_0x759314(0x10d)]-_0x539155,ship2['x']));}}else{if(ship){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){const _0x17b678=ship[_0x759314(0x217)]-ship['x'];let _0xa784f1=ship[_0x759314(0x22c)]*AI_POSITION_MOVE_SPEED_FACTOR;isPlayerTwoAI&&selectedGameMode===_0x759314(0x213)&&currentPlayer===0x2&&(_0xa784f1=ship[_0x759314(0x22c)]*(AI_POSITION_MOVE_SPEED_FACTOR*1.15));Math[_0x759314(0x211)](_0x17b678)>AI_MOVEMENT_DEADZONE&&(ship['x']+=Math[_0x759314(0x215)](_0x17b678)*Math[_0x759314(0x20a)](Math['abs'](_0x17b678),_0xa784f1));const _0x4844e8=ship[_0x759314(0x10d)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship['x']=Math['max'](0x0,Math[_0x759314(0x20a)](gameCanvas[_0x759314(0x10d)]-_0x4844e8,ship['x']));}}}}if(isTwoPlayerMode&&selectedGameMode===_0x759314(0x1a7)){if(isPlayer1WaitingForRespawn&&_0xddcfbd>=player1RespawnTime)isPlayer1WaitingForRespawn=![];if(isPlayer1Invincible&&_0xddcfbd>=player1InvincibilityEndTime)isPlayer1Invincible=![];if(isPlayer2WaitingForRespawn&&_0xddcfbd>=player2RespawnTime)isPlayer2WaitingForRespawn=![];if(isPlayer2Invincible&&_0xddcfbd>=player2InvincibilityEndTime)isPlayer2Invincible=![];}else{if(isWaitingForRespawn&&_0xddcfbd>=respawnTime)isWaitingForRespawn=![];if(isInvincible&&_0xddcfbd>=invincibilityEndTime)isInvincible=![];}for(let _0xb3d9b5=bullets[_0x759314(0x14e)]-0x1;_0xb3d9b5>=0x0;_0xb3d9b5--){const _0x28eed0=bullets[_0xb3d9b5];if(!_0x28eed0){bullets['splice'](_0xb3d9b5,0x1);continue;}_0x28eed0['y']-=_0x28eed0['speed'];if(_0x28eed0['y']+PLAYER_BULLET_HEIGHT<0x0){bullets[_0x759314(0x1ed)](_0xb3d9b5,0x1);continue;}for(let _0x44a1ef=enemies['length']-0x1;_0x44a1ef>=0x0;_0x44a1ef--){const _0x286220=enemies[_0x44a1ef];if(!_0x286220){enemies['splice'](_0x44a1ef,0x1);continue;}const _0x539774={'x':_0x286220['x'],'y':_0x286220['y'],'width':_0x286220['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x286220[_0x759314(0x1b3)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,'height':_0x286220[_0x759314(0x1b3)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x286220[_0x759314(0x1b3)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT},_0x341b71={'x':_0x28eed0['x'],'y':_0x28eed0['y'],'width':_0x28eed0[_0x759314(0x10d)],'height':_0x28eed0['height']};if(checkCollision(_0x341b71,_0x539774)){bullets[_0x759314(0x1ed)](_0xb3d9b5,0x1);const _0x2141a7=handleEnemyHit(_0x286220,_0x28eed0['playerId']);if(_0x2141a7[_0x759314(0x1df)])enemies[_0x759314(0x1ed)](_0x44a1ef,0x1);break;}}}for(let _0x567358=enemyBullets['length']-0x1;_0x567358>=0x0;_0x567358--){const _0x22de0b=enemyBullets[_0x567358];if(!_0x22de0b){enemyBullets['splice'](_0x567358,0x1);continue;}_0x22de0b['x']+=_0x22de0b['vx'],_0x22de0b['y']+=_0x22de0b['vy'],(_0x22de0b['y']>gameCanvas['height']||_0x22de0b['y']<-ENEMY_BULLET_HEIGHT||_0x22de0b['x']<-ENEMY_BULLET_WIDTH||_0x22de0b['x']>gameCanvas[_0x759314(0x10d)])&&enemyBullets[_0x759314(0x1ed)](_0x567358,0x1);}const _0x4357d3=gameCanvas?gameCanvas[_0x759314(0x1dd)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4,_0x514e75=0x2;for(let _0x498aaa=fallingShips[_0x759314(0x14e)]-0x1;_0x498aaa>=0x0;_0x498aaa--){const _0x1ce01a=fallingShips[_0x498aaa];if(!_0x1ce01a){fallingShips['splice'](_0x498aaa,0x1);continue;}let _0x158951=![];if(!_0x1ce01a[_0x759314(0x154)]){_0x1ce01a['y']+=FALLING_SHIP_SPEED;if(_0x1ce01a['y']>=_0x4357d3){_0x1ce01a['y']=_0x4357d3,_0x1ce01a[_0x759314(0x154)]=!![],_0x1ce01a[_0x759314(0x1a3)]=_0xddcfbd;!_0x1ce01a[_0x759314(0x14a)]&&(_0x1ce01a['rotation']=0x0,_0x1ce01a[_0x759314(0x14a)]=!![]);let _0x52870c=null,_0x330ab6=()=>{},_0x4aeafd=![],_0x17e9ea=![],_0x13213e=![],_0x97e957=null;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(_0x1ce01a[_0x759314(0x1c7)]===_0x759314(0x1fd)&&ship1&&player1Lives>0x0)_0x52870c=ship1,_0x4aeafd=player1IsDualShipActive,_0x330ab6=()=>{player1IsDualShipActive=!![];},_0x13213e=!![],_0x97e957=_0x759314(0x1fd);else(_0x1ce01a[_0x759314(0x1c7)]===_0x759314(0x1be)||_0x1ce01a['targetPlayerId']==='ai_p2')&&ship2&&player2Lives>0x0&&(_0x52870c=ship2,_0x4aeafd=player2IsDualShipActive,_0x330ab6=()=>{player2IsDualShipActive=!![];},_0x13213e=!![],_0x97e957=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x759314(0x181)?_0x759314(0x219):_0x759314(0x1be));}else{if(isTwoPlayerMode&&selectedGameMode===_0x759314(0x1a7)){if(_0x1ce01a[_0x759314(0x1c7)]==='player1'&&ship1&&player1Lives>0x0)_0x52870c=ship1,_0x4aeafd=player1IsDualShipActive,_0x17e9ea=isPlayer1ShipCaptured,_0x330ab6=()=>{player1IsDualShipActive=!![],isPlayer1ShipCaptured=![];},_0x13213e=!![],_0x97e957='player1';else _0x1ce01a[_0x759314(0x1c7)]===_0x759314(0x1be)&&ship2&&player2Lives>0x0&&(_0x52870c=ship2,_0x4aeafd=player2IsDualShipActive,_0x17e9ea=isPlayer2ShipCaptured,_0x330ab6=()=>{player2IsDualShipActive=!![],isPlayer2ShipCaptured=![];},_0x13213e=!![],_0x97e957=_0x759314(0x1be));}else ship&&playerLives>0x0&&(_0x52870c=ship,_0x4aeafd=isDualShipActive,_0x17e9ea=isShipCaptured,_0x330ab6=()=>{isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode==='normal'){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}isShipCaptured=![];},_0x13213e=!![],_0x97e957=isTwoPlayerMode&&selectedGameMode===_0x759314(0x213)?String(currentPlayer):_0x759314(0x1fd));}if(_0x13213e&&!_0x4aeafd){_0x330ab6(),playSound(_0x759314(0x13f),![],0.4);if(_0x17e9ea&&!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x759314(0x181))){if(_0x97e957===_0x759314(0x1fd)&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0xddcfbd+INVINCIBILITY_DURATION_MS;else{if(_0x97e957===_0x759314(0x1be)&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0xddcfbd+INVINCIBILITY_DURATION_MS;else ship&&(isInvincible=!![],invincibilityEndTime=_0xddcfbd+INVINCIBILITY_DURATION_MS);}}fallingShips[_0x759314(0x1ed)](_0x498aaa,0x1),_0x158951=!![];continue;}else{if(_0x13213e&&_0x4aeafd){fallingShips[_0x759314(0x1ed)](_0x498aaa,0x1),_0x158951=!![];continue;}else{fallingShips[_0x759314(0x1ed)](_0x498aaa,0x1),_0x158951=!![];continue;}}}}if(_0x158951)continue;const _0x4c5818=_0xddcfbd-_0x1ce01a[_0x759314(0x1ea)];if(_0x4c5818<FALLING_SHIP_FADE_DURATION_MS)_0x1ce01a['tintProgress']=Math[_0x759314(0x1a4)](0x0,0x1-_0x4c5818/FALLING_SHIP_FADE_DURATION_MS);else _0x1ce01a[_0x759314(0x17d)]=0x0;if(_0x1ce01a[_0x759314(0x14a)])_0x1ce01a[_0x759314(0x210)]=0x0;else{if(!_0x1ce01a[_0x759314(0x154)]&&typeof _0x1ce01a['rotationDirection']===_0x759314(0x1e1)&&typeof FALLING_SHIP_ROTATION_SPEED===_0x759314(0x1e1)&&FALLING_SHIP_ROTATION_SPEED>0x0){const _0x58a6c6=FALLING_SHIP_ROTATION_SPEED*_0x1ce01a[_0x759314(0x182)];_0x1ce01a[_0x759314(0x210)]+=_0x58a6c6,_0x1ce01a[_0x759314(0x120)]+=Math[_0x759314(0x211)](_0x58a6c6);if(_0x1ce01a[_0x759314(0x120)]>=_0x514e75*0x2*Math['PI'])_0x1ce01a[_0x759314(0x210)]=0x0,_0x1ce01a[_0x759314(0x14a)]=!![];else{if(_0x1ce01a[_0x759314(0x210)]>Math['PI']*0x2)_0x1ce01a['rotation']-=Math['PI']*0x2;if(_0x1ce01a[_0x759314(0x210)]<0x0)_0x1ce01a[_0x759314(0x210)]+=Math['PI']*0x2;}}else _0x1ce01a[_0x759314(0x210)]=_0x1ce01a['rotation']||0x0;}if(!_0x1ce01a[_0x759314(0x154)]){let _0x3ee870=null,_0x46198b=()=>{},_0x580e36=0x0,_0x4d8113=![],_0x5a8fa2=![];if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x759314(0x181)){if(_0x1ce01a[_0x759314(0x1c7)]===_0x759314(0x1fd)&&ship1&&player1Lives>0x0)_0x3ee870=ship1,_0x5a8fa2=player1IsDualShipActive,_0x46198b=()=>{if(!_0x5a8fa2)player1IsDualShipActive=!![];},_0x580e36=0x1;else(_0x1ce01a[_0x759314(0x1c7)]==='player2'||_0x1ce01a[_0x759314(0x1c7)]===_0x759314(0x219))&&ship2&&player2Lives>0x0&&(_0x3ee870=ship2,_0x5a8fa2=player2IsDualShipActive,_0x46198b=()=>{if(!_0x5a8fa2)player2IsDualShipActive=!![];},_0x580e36=0x2);}else{if(isTwoPlayerMode&&selectedGameMode===_0x759314(0x1a7)){if(_0x1ce01a[_0x759314(0x1c7)]===_0x759314(0x1fd)&&ship1&&player1Lives>0x0)_0x3ee870=ship1,_0x4d8113=isPlayer1ShipCaptured,_0x5a8fa2=player1IsDualShipActive,_0x46198b=()=>{if(!_0x5a8fa2)player1IsDualShipActive=!![];isPlayer1ShipCaptured=![];},_0x580e36=0x1;else _0x1ce01a[_0x759314(0x1c7)]===_0x759314(0x1be)&&ship2&&player2Lives>0x0&&(_0x3ee870=ship2,_0x4d8113=isPlayer2ShipCaptured,_0x5a8fa2=player2IsDualShipActive,_0x46198b=()=>{if(!_0x5a8fa2)player2IsDualShipActive=!![];isPlayer2ShipCaptured=![];},_0x580e36=0x2);}else ship&&playerLives>0x0&&(_0x3ee870=ship,_0x4d8113=isShipCaptured,_0x5a8fa2=isDualShipActive,_0x46198b=()=>{const _0x354b94=_0x759314;if(!_0x5a8fa2){isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode===_0x354b94(0x213)){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}}isShipCaptured=![];},_0x580e36=isTwoPlayerMode&&selectedGameMode===_0x759314(0x213)?currentPlayer:0x1);}if(_0x3ee870&&!_0x5a8fa2){const _0x11816a={'x':_0x1ce01a['x'],'y':_0x1ce01a['y'],'width':_0x1ce01a[_0x759314(0x10d)],'height':_0x1ce01a['height']},_0x16b850={'x':_0x3ee870['x'],'y':_0x3ee870['y'],'width':_0x3ee870['width'],'height':_0x3ee870[_0x759314(0x1dd)]};if(checkCollision(_0x11816a,_0x16b850)){_0x46198b();if(_0x4d8113&&!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x759314(0x181))){playSound(_0x759314(0x13f),![],0.4);if(_0x580e36===0x1&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0xddcfbd+INVINCIBILITY_DURATION_MS;else{if(_0x580e36===0x2&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0xddcfbd+INVINCIBILITY_DURATION_MS;else _0x580e36!==0x0&&ship&&(isInvincible=!![],invincibilityEndTime=_0xddcfbd+INVINCIBILITY_DURATION_MS);}}else playSound(_0x759314(0x13f),![],0.4);fallingShips[_0x759314(0x1ed)](_0x498aaa,0x1);continue;}}}if(!_0x1ce01a[_0x759314(0x154)]&&_0x1ce01a['y']>=gameCanvas['height'])fallingShips['splice'](_0x498aaa,0x1);}let _0x128417=0x0;const _0x1beb31=enemies[_0x759314(0x1f6)](_0x1c7bd4=>_0x1c7bd4?.[_0x759314(0x1a9)]===_0x759314(0x237)),_0xb662da=!isChallengingStage&&!isWaveTransitioning&&_0x1beb31&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x759314(0x1a7)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage));if(_0xb662da){!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(_0x759314(0x1af),!![],0.1));const _0x4f11f7=enemies[_0x759314(0x245)](_0x4c0bba=>_0x4c0bba?.['state']==='in_grid');if(_0x4f11f7[_0x759314(0x14e)]>0x0){let _0xba8afc=gameCanvas[_0x759314(0x10d)],_0x485541=0x0;_0x4f11f7[_0x759314(0x201)](_0x1943c4=>{const _0x1d881d=_0x759314;_0x1943c4&&(_0xba8afc=Math['min'](_0xba8afc,_0x1943c4['x']),_0x485541=Math['max'](_0x485541,_0x1943c4['x']+_0x1943c4[_0x1d881d(0x10d)]));});const _0x4edb61=gameCanvas['width']*GRID_HORIZONTAL_MARGIN_PERCENT,_0x5ed120=gameCanvas[_0x759314(0x10d)]*(0x1-GRID_HORIZONTAL_MARGIN_PERCENT);if(gridMoveDirection===0x1&&_0x485541>=_0x5ed120)gridMoveDirection=-0x1;else{if(gridMoveDirection===-0x1&&_0xba8afc<=_0x4edb61)gridMoveDirection=0x1;}const _0x47f232=scaleValue(level,BASE_GRID_MOVE_SPEED,MAX_GRID_MOVE_SPEED);_0x128417=_0x47f232*gridMoveDirection,currentGridOffsetX+=_0x128417,enemies[_0x759314(0x201)](_0x2d0f8f=>{const _0x4cac60=_0x759314;if(_0x2d0f8f&&(_0x2d0f8f['state']==='returning'||_0x2d0f8f[_0x4cac60(0x1a9)]==='in_grid'||_0x2d0f8f[_0x4cac60(0x1a9)]===_0x4cac60(0x178)))try{const _0x35cae5=_0x2d0f8f[_0x4cac60(0x1b3)]===ENEMY3_TYPE?BOSS_WIDTH:_0x2d0f8f[_0x4cac60(0x1b3)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x127976,y:_0x347be4}=getCurrentGridSlotPosition(_0x2d0f8f[_0x4cac60(0x204)],_0x2d0f8f['gridCol'],_0x35cae5);_0x2d0f8f[_0x4cac60(0x21f)]=_0x127976,_0x2d0f8f[_0x4cac60(0x22a)]=_0x347be4;}catch(_0x58008b){console[_0x4cac60(0x1cc)]('Error\x20updating\x20target\x20grid\x20pos\x20for\x20enemy\x20'+_0x2d0f8f?.['id']+_0x4cac60(0x1ab)+_0x2d0f8f?.[_0x4cac60(0x1a9)]+_0x4cac60(0x164),_0x58008b);}});}}else isGridSoundPlaying&&(stopSound(_0x759314(0x1af)),isGridSoundPlaying=![]),_0x128417=0x0;for(let _0x3ddfc2=enemies['length']-0x1;_0x3ddfc2>=0x0;_0x3ddfc2--){let _0x19470a=enemies[_0x3ddfc2];if(!_0x19470a){enemies[_0x759314(0x1ed)](_0x3ddfc2,0x1);continue;}const _0x2771cf=_0x19470a['id'];if(_0x19470a[_0x759314(0x239)]&&_0x19470a[_0x759314(0x1a9)]!==_0x759314(0x113)){clearTimeout(_0x19470a['capturePrepareTimeout']);const _0x11e5d3=enemySpawnTimeouts[_0x759314(0x17a)](_0x19470a[_0x759314(0x239)]);if(_0x11e5d3>-0x1)enemySpawnTimeouts[_0x759314(0x1ed)](_0x11e5d3,0x1);_0x19470a['capturePrepareTimeout']=null;}const _0x78b55f=_0x19470a['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x19470a[_0x759314(0x1b3)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x2f717d=_0x19470a[_0x759314(0x1b3)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x19470a['type']===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT;switch(_0x19470a['state']){case _0x759314(0x117):{let _0x142089=CS_ENTRANCE_PATH_SPEED;const _0x5c0ac8=_0x19470a[_0x759314(0x1e7)]||0x1;_0x142089*=_0x5c0ac8;if(!isChallengingStage){enemies['splice'](_0x3ddfc2,0x1),_0x19470a=null;break;}let _0x2f2f3b=challengingStagePaths,_0x260238=_0x2f2f3b[_0x19470a['entrancePathId']];if(!_0x260238||_0x19470a[_0x759314(0x148)]>=_0x260238[_0x759314(0x14e)]){enemies[_0x759314(0x1ed)](_0x3ddfc2,0x1),_0x19470a=null;break;}const _0x2db5f3=_0x260238[_0x19470a['pathSegmentIndex']];if(!_0x2db5f3||!_0x2db5f3['p0']||!_0x2db5f3['p1']||!_0x2db5f3['p2']||!_0x2db5f3['p3']){console['error'](_0x759314(0x1c0)+_0x19470a['pathSegmentIndex']+_0x759314(0x141)+_0x19470a[_0x759314(0x18c)]+_0x759314(0x1cd)+_0x19470a['id']),enemies[_0x759314(0x1ed)](_0x3ddfc2,0x1),_0x19470a=null;break;}_0x19470a[_0x759314(0x227)]+=_0x142089;let _0x3f1fcf,_0x3edf71,_0x2605ee=_0x19470a['x'],_0x28dbba=_0x19470a['y'];if(_0x19470a['pathT']>=0x1){_0x19470a[_0x759314(0x227)]=0x0,_0x19470a[_0x759314(0x148)]++;if(_0x19470a[_0x759314(0x148)]>=_0x260238[_0x759314(0x14e)])enemies[_0x759314(0x1ed)](_0x3ddfc2,0x1),_0x19470a=null;else{const _0x99fa1c=_0x260238[_0x19470a['pathSegmentIndex']];_0x99fa1c?.['p0']?(_0x3f1fcf=_0x99fa1c['p0']['x'],_0x3edf71=_0x99fa1c['p0']['y']):(console['error'](_0x759314(0x104)+_0x19470a[_0x759314(0x148)]+'\x20for\x20path\x20'+_0x19470a[_0x759314(0x18c)]+_0x759314(0x1cd)+_0x2771cf),enemies[_0x759314(0x1ed)](_0x3ddfc2,0x1),_0x19470a=null);}}else try{_0x3f1fcf=calculateBezierPoint(_0x19470a['pathT'],_0x2db5f3['p0']['x'],_0x2db5f3['p1']['x'],_0x2db5f3['p2']['x'],_0x2db5f3['p3']['x']),_0x3edf71=calculateBezierPoint(_0x19470a[_0x759314(0x227)],_0x2db5f3['p0']['y'],_0x2db5f3['p1']['y'],_0x2db5f3['p2']['y'],_0x2db5f3['p3']['y']);}catch(_0x48c70d){console[_0x759314(0x1cc)](_0x759314(0x14f)+_0x2771cf+':',_0x48c70d),enemies[_0x759314(0x1ed)](_0x3ddfc2,0x1),_0x19470a=null;}_0x19470a&&(isNaN(_0x3f1fcf)||isNaN(_0x3edf71)?(console['error'](_0x759314(0x11c)+_0x2771cf+_0x759314(0x13d)),enemies[_0x759314(0x1ed)](_0x3ddfc2,0x1),_0x19470a=null):(_0x19470a['velocityX']=_0x3f1fcf-_0x2605ee,_0x19470a[_0x759314(0x1c8)]=_0x3edf71-_0x28dbba,_0x19470a['x']=_0x3f1fcf,_0x19470a['y']=_0x3edf71));break;}case _0x759314(0x168):{if(isChallengingStage){enemies['splice'](_0x3ddfc2,0x1),_0x19470a=null;break;}let _0x1a28d3=normalWaveEntrancePaths,_0x372674=_0x1a28d3[_0x19470a[_0x759314(0x18c)]],_0x2851ad;_0x19470a[_0x759314(0x18c)]===_0x759314(0x21c)||_0x19470a[_0x759314(0x18c)]==='boss_loop_right'?_0x2851ad=BOSS_LOOP_ENTRANCE_PATH_SPEED:_0x2851ad=NORMAL_ENTRANCE_PATH_SPEED;if(!_0x372674){console[_0x759314(0x1b9)](_0x759314(0x15a)+_0x2771cf+_0x759314(0x10e)+_0x19470a[_0x759314(0x18c)]+'.\x20Switching\x20to\x20moving_to_grid.');try{_0x19470a[_0x759314(0x21f)]=_0x19470a[_0x759314(0x21f)]??gameCanvas[_0x759314(0x10d)]/0x2,_0x19470a[_0x759314(0x22a)]=_0x19470a['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x192354){console[_0x759314(0x1cc)](_0x759314(0x108)+_0x2771cf+'\x20after\x20missing\x20path',_0x192354),_0x19470a[_0x759314(0x21f)]=gameCanvas[_0x759314(0x10d)]/0x2,_0x19470a['targetGridY']=ENEMY_TOP_MARGIN;}_0x19470a['state']=_0x759314(0x178),_0x19470a[_0x759314(0x227)]=0x0,_0x19470a[_0x759314(0x148)]=0x0,_0x19470a[_0x759314(0x189)]=0x0,_0x19470a[_0x759314(0x1c8)]=0x0;_0x19470a[_0x759314(0x17f)]!==undefined&&squadronCompletionStatus[_0x19470a[_0x759314(0x17f)]]&&squadronCompletionStatus[_0x19470a[_0x759314(0x17f)]][_0x759314(0x1bb)]++;break;}if(_0x19470a['pathSegmentIndex']>=_0x372674[_0x759314(0x14e)]){console[_0x759314(0x1b9)](_0x759314(0x15a)+_0x2771cf+_0x759314(0x166)+_0x19470a['pathSegmentIndex']+'\x20out\x20of\x20bounds\x20for\x20SHARED\x20path\x20'+_0x19470a[_0x759314(0x18c)]+_0x759314(0x15c));try{_0x19470a[_0x759314(0x21f)]=_0x19470a[_0x759314(0x21f)]??gameCanvas[_0x759314(0x10d)]/0x2,_0x19470a[_0x759314(0x22a)]=_0x19470a[_0x759314(0x22a)]??ENEMY_TOP_MARGIN;}catch(_0x17ea4c){console['error'](_0x759314(0x108)+_0x2771cf+_0x759314(0x19a),_0x17ea4c),_0x19470a[_0x759314(0x21f)]=gameCanvas['width']/0x2,_0x19470a[_0x759314(0x22a)]=ENEMY_TOP_MARGIN;}_0x19470a['state']=_0x759314(0x178),_0x19470a['pathT']=0x0,_0x19470a[_0x759314(0x148)]=0x0,_0x19470a['velocityX']=0x0,_0x19470a[_0x759314(0x1c8)]=0x0;_0x19470a[_0x759314(0x17f)]!==undefined&&squadronCompletionStatus[_0x19470a[_0x759314(0x17f)]]&&squadronCompletionStatus[_0x19470a[_0x759314(0x17f)]]['completed']++;break;}const _0x1d70e3=_0x372674[_0x19470a[_0x759314(0x148)]];if(!_0x1d70e3||!_0x1d70e3['p0']||!_0x1d70e3['p1']||!_0x1d70e3['p2']||!_0x1d70e3['p3']){console[_0x759314(0x1cc)](_0x759314(0x192)+_0x19470a['pathSegmentIndex']+_0x759314(0x199)+_0x19470a[_0x759314(0x18c)]+_0x759314(0x1cd)+_0x2771cf+'.\x20Switching\x20to\x20moving_to_grid.');try{_0x19470a['targetGridX']=_0x19470a[_0x759314(0x21f)]??gameCanvas[_0x759314(0x10d)]/0x2,_0x19470a[_0x759314(0x22a)]=_0x19470a[_0x759314(0x22a)]??ENEMY_TOP_MARGIN+_0x19470a['gridRow']*(ENEMY_HEIGHT+ENEMY_V_SPACING);}catch(_0x1b81e7){console[_0x759314(0x1cc)](_0x759314(0x108)+_0x2771cf+_0x759314(0x203),_0x1b81e7),_0x19470a[_0x759314(0x21f)]=gameCanvas['width']/0x2,_0x19470a[_0x759314(0x22a)]=ENEMY_TOP_MARGIN;}_0x19470a[_0x759314(0x1a9)]=_0x759314(0x178),_0x19470a[_0x759314(0x227)]=0x0,_0x19470a[_0x759314(0x148)]=0x0,_0x19470a[_0x759314(0x189)]=0x0,_0x19470a[_0x759314(0x1c8)]=0x0;_0x19470a[_0x759314(0x17f)]!==undefined&&squadronCompletionStatus[_0x19470a[_0x759314(0x17f)]]&&squadronCompletionStatus[_0x19470a['squadronId']]['completed']++;break;}_0x19470a['pathT']+=_0x2851ad;let _0x209cf9,_0xe7032,_0x413f2d=_0x19470a['x'],_0xe7502b=_0x19470a['y'];if(_0x19470a[_0x759314(0x227)]>=0x1){_0x19470a['pathT']=0x0,_0x19470a[_0x759314(0x148)]++;if(_0x19470a[_0x759314(0x148)]>=_0x372674['length']){let _0x177d55,_0x527140;try{_0x177d55=calculateBezierPoint(0x1,_0x1d70e3['p0']['x'],_0x1d70e3['p1']['x'],_0x1d70e3['p2']['x'],_0x1d70e3['p3']['x']),_0x527140=calculateBezierPoint(0x1,_0x1d70e3['p0']['y'],_0x1d70e3['p1']['y'],_0x1d70e3['p2']['y'],_0x1d70e3['p3']['y']);}catch(_0x29d387){console[_0x759314(0x1cc)](_0x759314(0x207)+_0x2771cf+_0x759314(0x1e0)+_0x19470a[_0x759314(0x18c)],_0x29d387),_0x177d55=_0x1d70e3['p3']['x'],_0x527140=_0x1d70e3['p3']['y'];}_0x19470a['x']=_0x177d55,_0x19470a['y']=_0x527140;try{_0x19470a[_0x759314(0x21f)]=_0x19470a[_0x759314(0x21f)]??gameCanvas[_0x759314(0x10d)]/0x2,_0x19470a[_0x759314(0x22a)]=_0x19470a[_0x759314(0x22a)]??ENEMY_TOP_MARGIN;}catch(_0x9acfd4){console[_0x759314(0x1cc)]('Error\x20getting\x20target\x20grid\x20pos\x20for\x20'+_0x2771cf+_0x759314(0x1e0)+_0x19470a[_0x759314(0x18c)],_0x9acfd4),_0x19470a[_0x759314(0x21f)]=_0x19470a['x'],_0x19470a[_0x759314(0x22a)]=ENEMY_TOP_MARGIN+_0x19470a[_0x759314(0x204)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x265d5e=_0x19470a[_0x759314(0x1a9)];_0x19470a[_0x759314(0x1a9)]=_0x759314(0x178),_0x19470a['velocityX']=0x0,_0x19470a[_0x759314(0x1c8)]=0x0,_0x19470a[_0x759314(0x148)]=0x0;_0x265d5e==='following_entrance_path'&&_0x19470a[_0x759314(0x17f)]!==undefined&&squadronCompletionStatus[_0x19470a[_0x759314(0x17f)]]&&squadronCompletionStatus[_0x19470a[_0x759314(0x17f)]]['completed']++;break;}else{const _0x102b8b=_0x372674[_0x19470a[_0x759314(0x148)]];if(_0x102b8b?.['p0'])_0x209cf9=_0x102b8b['p0']['x'],_0xe7032=_0x102b8b['p0']['y'];else{console[_0x759314(0x1cc)]('Invalid\x20next\x20Normal\x20Bezier\x20segment\x20'+_0x19470a[_0x759314(0x148)]+_0x759314(0x199)+_0x19470a['entrancePathId']+'.\x20Enemy\x20'+_0x2771cf+_0x759314(0x15c));try{_0x19470a[_0x759314(0x21f)]=_0x19470a[_0x759314(0x21f)]??gameCanvas[_0x759314(0x10d)]/0x2,_0x19470a[_0x759314(0x22a)]=_0x19470a[_0x759314(0x22a)]??ENEMY_TOP_MARGIN;}catch(_0x106dff){console[_0x759314(0x1cc)](_0x759314(0x108)+_0x2771cf+_0x759314(0x12d),_0x106dff),_0x19470a[_0x759314(0x21f)]=gameCanvas[_0x759314(0x10d)]/0x2,_0x19470a[_0x759314(0x22a)]=ENEMY_TOP_MARGIN;}_0x19470a[_0x759314(0x1a9)]=_0x759314(0x178),_0x19470a['pathT']=0x0,_0x19470a[_0x759314(0x148)]=0x0,_0x19470a[_0x759314(0x189)]=0x0,_0x19470a['velocityY']=0x0;_0x19470a[_0x759314(0x17f)]!==undefined&&squadronCompletionStatus[_0x19470a[_0x759314(0x17f)]]&&squadronCompletionStatus[_0x19470a[_0x759314(0x17f)]]['completed']++;break;}}}else try{_0x209cf9=calculateBezierPoint(_0x19470a['pathT'],_0x1d70e3['p0']['x'],_0x1d70e3['p1']['x'],_0x1d70e3['p2']['x'],_0x1d70e3['p3']['x']),_0xe7032=calculateBezierPoint(_0x19470a['pathT'],_0x1d70e3['p0']['y'],_0x1d70e3['p1']['y'],_0x1d70e3['p2']['y'],_0x1d70e3['p3']['y']);}catch(_0x558d06){console[_0x759314(0x1cc)](_0x759314(0x19f)+_0x2771cf+':',_0x558d06);try{_0x19470a[_0x759314(0x21f)]=_0x19470a['targetGridX']??gameCanvas[_0x759314(0x10d)]/0x2,_0x19470a[_0x759314(0x22a)]=_0x19470a[_0x759314(0x22a)]??ENEMY_TOP_MARGIN;}catch(_0x36c8ca){console[_0x759314(0x1cc)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x2771cf+_0x759314(0x1b7),_0x36c8ca),_0x19470a[_0x759314(0x21f)]=gameCanvas[_0x759314(0x10d)]/0x2,_0x19470a[_0x759314(0x22a)]=ENEMY_TOP_MARGIN;}_0x19470a[_0x759314(0x1a9)]=_0x759314(0x178),_0x19470a[_0x759314(0x227)]=0x0,_0x19470a[_0x759314(0x148)]=0x0,_0x19470a[_0x759314(0x189)]=0x0,_0x19470a[_0x759314(0x1c8)]=0x0;_0x19470a[_0x759314(0x17f)]!==undefined&&squadronCompletionStatus[_0x19470a[_0x759314(0x17f)]]&&squadronCompletionStatus[_0x19470a['squadronId']]['completed']++;break;}if(_0x19470a&&_0x19470a[_0x759314(0x1a9)]===_0x759314(0x168)){if(isNaN(_0x209cf9)||isNaN(_0xe7032)){console[_0x759314(0x1cc)]('NaN\x20detected\x20in\x20Normal\x20path\x20calculation\x20for\x20enemy\x20'+_0x2771cf+_0x759314(0x15c));try{_0x19470a[_0x759314(0x21f)]=_0x19470a[_0x759314(0x21f)]??gameCanvas[_0x759314(0x10d)]/0x2,_0x19470a[_0x759314(0x22a)]=_0x19470a['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x362738){console[_0x759314(0x1cc)](_0x759314(0x108)+_0x2771cf+_0x759314(0x12f),_0x362738),_0x19470a[_0x759314(0x21f)]=gameCanvas[_0x759314(0x10d)]/0x2,_0x19470a[_0x759314(0x22a)]=ENEMY_TOP_MARGIN;}_0x19470a[_0x759314(0x1a9)]=_0x759314(0x178),_0x19470a['pathT']=0x0,_0x19470a[_0x759314(0x148)]=0x0,_0x19470a['velocityX']=0x0,_0x19470a['velocityY']=0x0,_0x19470a[_0x759314(0x17f)]!==undefined&&squadronCompletionStatus[_0x19470a[_0x759314(0x17f)]]&&squadronCompletionStatus[_0x19470a[_0x759314(0x17f)]]['completed']++;}else{let _0x21920b=_0x209cf9;const _0xd48d46=currentWavePatternIndex===0x1&&(_0x19470a[_0x759314(0x17f)]===0x2||_0x19470a[_0x759314(0x17f)]===0x3),_0x1d56d1=typeof _0x19470a[_0x759314(0x23d)]===_0x759314(0x1e1)&&_0x19470a['squadronEnemyIndex']%0x2!==0x0;if(_0xd48d46&&_0x1d56d1){const _0x29fe13=_0x78b55f+ENTRANCE_PAIR_HORIZONTAL_GAP;_0x21920b=_0x209cf9+_0x29fe13;}_0x19470a['velocityX']=_0x21920b-_0x413f2d,_0x19470a['velocityY']=_0xe7032-_0xe7502b,_0x19470a['x']=_0x21920b,_0x19470a['y']=_0xe7032;}}break;}case _0x759314(0x178):{if(_0x19470a[_0x759314(0x21f)]==null||_0x19470a[_0x759314(0x22a)]==null){console['warn'](_0x759314(0x15a)+_0x2771cf+_0x759314(0x19e));try{const {x:_0x4cc006,y:_0x26da21}=getCurrentGridSlotPosition(_0x19470a[_0x759314(0x204)],_0x19470a[_0x759314(0x170)],_0x78b55f);_0x19470a[_0x759314(0x21f)]=_0x4cc006,_0x19470a['targetGridY']=_0x26da21;}catch(_0x281f08){console['error'](_0x759314(0x108)+_0x2771cf+'\x20in\x20moving_to_grid',_0x281f08),_0x19470a[_0x759314(0x1a9)]=_0x759314(0x237),_0x19470a['x']=gameCanvas[_0x759314(0x10d)]/0x2,_0x19470a['y']=ENEMY_TOP_MARGIN;break;}}const _0x3f3a38=_0x19470a[_0x759314(0x21f)],_0x3815ab=_0x19470a[_0x759314(0x22a)],_0x385e97=_0x3f3a38-_0x19470a['x'],_0x3c8240=_0x3815ab-_0x19470a['y'],_0x1fa895=Math[_0x759314(0x16e)](_0x385e97*_0x385e97+_0x3c8240*_0x3c8240),_0x18c22d=ENTRANCE_SPEED*1.2,_0x4ece37=_0x18c22d*0.5;if(_0x1fa895>_0x4ece37)_0x19470a[_0x759314(0x189)]=_0x385e97/_0x1fa895*_0x18c22d,_0x19470a['velocityY']=_0x3c8240/_0x1fa895*_0x18c22d,_0x19470a['x']+=_0x19470a[_0x759314(0x189)],_0x19470a['y']+=_0x19470a['velocityY'];else{_0x19470a['x']=_0x3f3a38,_0x19470a['y']=_0x3815ab,_0x19470a['velocityX']=0x0,_0x19470a[_0x759314(0x1c8)]=0x0;const _0xc442fb=_0x19470a[_0x759314(0x1a9)];_0x19470a[_0x759314(0x1a9)]=_0x759314(0x237),_0x19470a['justReturned']=![];!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(_0x759314(0x1af),!![],0.1));GRID_BREATH_ENABLED&&!isGridBreathingActive&&!isChallengingStage&&(isGridBreathingActive=!![],gridBreathStartTime=_0xddcfbd,currentGridBreathFactor=0x0);!firstEnemyLanded&&!isFullGridWave&&!isChallengingStage&&(lastGridFireCheckTime=Date['now'](),firstEnemyLanded=!![]);if(_0xc442fb===_0x759314(0x178)&&!isChallengingStage&&!isFullGridWave&&_0x19470a[_0x759314(0x17f)]!==undefined){const _0x15bd21=_0x19470a[_0x759314(0x17f)],_0xdd9ae6=squadronCompletionStatus[_0x15bd21];if(_0xdd9ae6&&!_0xdd9ae6[_0x759314(0x12b)]){const _0x1baa8d=enemies[_0x759314(0x1ca)](_0x182d33=>{const _0x6abb68=_0x759314;if(_0x182d33&&_0x182d33['squadronId']===_0x15bd21)return _0x182d33['state']===_0x6abb68(0x237)||!enemies[_0x6abb68(0x1f6)](_0x50fad3=>_0x50fad3['id']===_0x182d33['id']);return!![];});if(_0x1baa8d){_0xdd9ae6[_0x759314(0x12b)]=!![];const _0x59988d=enemies['filter'](_0x3c8312=>_0x3c8312&&_0x3c8312['squadronId']===_0x15bd21&&_0x3c8312['state']===_0x759314(0x237)&&(_0x3c8312[_0x759314(0x1b3)]===ENEMY2_TYPE||_0x3c8312[_0x759314(0x1b3)]===ENEMY3_TYPE)&&!(_0x3c8312[_0x759314(0x1b3)]===ENEMY3_TYPE&&_0x3c8312[_0x759314(0x1cb)]));if(_0x59988d[_0x759314(0x14e)]>0x0){const _0x4a05f0=_0x59988d[Math[_0x759314(0x218)](Math[_0x759314(0x16a)]()*_0x59988d[_0x759314(0x14e)])],_0x1ab308=_0x4a05f0['id'],_0x264fb=0xc8+Math['random']()*0x190,_0x27fddd=setTimeout(()=>{const _0x185b9f=_0x759314;try{const _0x17680a=enemySpawnTimeouts[_0x185b9f(0x17a)](_0x27fddd);if(_0x17680a>-0x1)enemySpawnTimeouts['splice'](_0x17680a,0x1);if(isPaused||!isInGameState||playerLives<=0x0&&(!isTwoPlayerMode||player1Lives<=0x0&&player2Lives<=0x0)||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x3fc860=enemies[_0x185b9f(0x247)](_0x4a542a=>_0x4a542a&&_0x4a542a['id']===_0x1ab308);_0x3fc860&&_0x3fc860[_0x185b9f(0x1a9)]===_0x185b9f(0x237)&&(createBulletSimple(_0x3fc860)&&(playSound('enemyShootSound',![],0.4),_0x3fc860[_0x185b9f(0x1ce)]=Date['now']()));}catch(_0x378d98){console[_0x185b9f(0x1cc)](_0x185b9f(0x21a)+_0x1ab308+':',_0x378d98);}},_0x264fb);enemySpawnTimeouts[_0x759314(0x1d3)](_0x27fddd);}}}}}break;}case _0x759314(0x237):{try{const _0x45ad55=_0x19470a[_0x759314(0x1b3)]===ENEMY3_TYPE?BOSS_WIDTH:_0x19470a[_0x759314(0x1b3)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x54c62a,y:_0x4468a7}=getCurrentGridSlotPosition(_0x19470a[_0x759314(0x204)],_0x19470a['gridCol'],_0x45ad55);typeof _0x54c62a===_0x759314(0x1e1)&&!isNaN(_0x54c62a)&&(_0x19470a['x']=_0x54c62a),typeof _0x4468a7===_0x759314(0x1e1)&&!isNaN(_0x4468a7)&&(_0x19470a['y']=_0x4468a7),_0x19470a[_0x759314(0x21f)]=_0x54c62a,_0x19470a[_0x759314(0x22a)]=_0x4468a7;}catch(_0x26b9d){console['error'](_0x759314(0x1cf)+_0x19470a['id']+':',_0x26b9d);}_0x19470a['velocityX']=_0xb662da?_0x128417:0x0,_0x19470a[_0x759314(0x1c8)]=0x0;_0x19470a[_0x759314(0x1b3)]===ENEMY3_TYPE&&_0x19470a['hasCapturedShip']&&_0x19470a[_0x759314(0x222)]&&(_0x19470a[_0x759314(0x244)]=_0x19470a['x']+CAPTURED_SHIP_OFFSET_X,_0x19470a[_0x759314(0x139)]=_0x19470a['y']+CAPTURED_SHIP_OFFSET_Y);break;}case _0x759314(0x21e):{_0x19470a[_0x759314(0x189)]=0x0,_0x19470a[_0x759314(0x1c8)]=0x0;break;}case _0x759314(0x113):{_0x19470a[_0x759314(0x189)]=0x0,_0x19470a[_0x759314(0x1c8)]=0x0;break;}case _0x759314(0x10a):{let _0x2f864b=isTwoPlayerMode&&selectedGameMode===_0x759314(0x1a7)?isPlayer1ShipCaptured||isPlayer2ShipCaptured:isShipCaptured;if(_0x2f864b){_0x19470a[_0x759314(0x1a9)]=_0x759314(0x18d);try{const {x:_0x1bce05,y:_0xe91441}=getCurrentGridSlotPosition(_0x19470a['gridRow'],_0x19470a[_0x759314(0x170)],_0x78b55f);_0x19470a['targetGridX']=_0x1bce05,_0x19470a[_0x759314(0x22a)]=_0xe91441;}catch(_0x953cff){console[_0x759314(0x1cc)](_0x759314(0x165)+_0x19470a['id']+':',_0x953cff),_0x19470a['targetGridX']=gameCanvas[_0x759314(0x10d)]/0x2,_0x19470a[_0x759314(0x22a)]=ENEMY_TOP_MARGIN;}break;}const _0x4f8566=_0x19470a[_0x759314(0x217)],_0x1f9fe6=_0x19470a[_0x759314(0x1ec)];if(_0x4f8566==null||_0x1f9fe6==null){console['error'](_0x759314(0x1eb)+_0x19470a['id']+'\x20diving\x20to\x20capture\x20without\x20targetX/Y!\x20Aborting.'),_0x19470a[_0x759314(0x1a9)]=_0x759314(0x18d);try{const {x:_0x17ccc5,y:_0x23412f}=getCurrentGridSlotPosition(_0x19470a[_0x759314(0x204)],_0x19470a[_0x759314(0x170)],_0x78b55f);_0x19470a[_0x759314(0x21f)]=_0x17ccc5,_0x19470a[_0x759314(0x22a)]=_0x23412f;}catch(_0x37c432){console[_0x759314(0x1cc)](_0x759314(0x165)+_0x19470a['id']+':',_0x37c432),_0x19470a['targetGridX']=gameCanvas['width']/0x2,_0x19470a[_0x759314(0x22a)]=ENEMY_TOP_MARGIN;}break;}const _0xf5ce8f=_0x4f8566-_0x19470a['x'],_0x42e155=_0x1f9fe6-_0x19470a['y'],_0x34144e=Math[_0x759314(0x16e)](_0xf5ce8f*_0xf5ce8f+_0x42e155*_0x42e155),_0x1919d8=BOSS_CAPTURE_DIVE_SPEED_FACTOR*BASE_ENEMY_ATTACK_SPEED,_0x1f137f=_0x1919d8*0.6;_0x34144e>_0x1f137f?(_0x19470a[_0x759314(0x189)]=_0xf5ce8f/_0x34144e*_0x1919d8,_0x19470a[_0x759314(0x1c8)]=_0x42e155/_0x34144e*_0x1919d8,_0x19470a['x']+=_0x19470a[_0x759314(0x189)],_0x19470a['y']+=_0x19470a[_0x759314(0x1c8)]):(_0x19470a['x']=_0x4f8566,_0x19470a['y']=_0x1f9fe6,_0x19470a['velocityX']=0x0,_0x19470a[_0x759314(0x1c8)]=0x0,_0x19470a[_0x759314(0x1a9)]='capturing',_0x19470a[_0x759314(0x126)]=_0xddcfbd,capturingBossId=_0x19470a['id'],captureBeamActive=!![],captureBeamSource={'x':_0x19470a['x']+_0x78b55f/0x2,'y':_0x19470a['y']+_0x2f717d},captureBeamTargetY=_0x19470a['y'],captureBeamProgress=0x0,playSound('captureSound',![],0.6),_0x19470a['isPreparingForImmediateCapture']&&(captureAttemptMadeThisLevel=!![],delete _0x19470a[_0x759314(0x231)]));break;}case _0x759314(0x12e):{_0x19470a[_0x759314(0x189)]=0x0,_0x19470a['velocityY']=0x0;_0x19470a['isPreparingForImmediateCapture']&&!captureAttemptMadeThisLevel&&(captureAttemptMadeThisLevel=!![],delete _0x19470a['isPreparingForImmediateCapture']);let _0x53d458=![];isTwoPlayerMode&&selectedGameMode===_0x759314(0x1a7)?_0x53d458=isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x19470a['id']||isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x19470a['id']:_0x53d458=isShipCaptured&&capturedBossIdWithMessage===_0x19470a['id'];if(_0x53d458){captureBeamActive=![];if(capturingBossId===_0x19470a['id'])capturingBossId=null;_0x19470a[_0x759314(0x1a9)]=_0x759314(0x18d),stopSound(_0x759314(0x1b4));break;}const _0x43eede=_0xddcfbd-_0x19470a[_0x759314(0x126)],_0x192d2c=CAPTURE_BEAM_ANIMATION_DURATION_MS/0x2,_0x441467=CAPTURE_BEAM_DURATION_MS;if(_0x43eede<_0x192d2c)captureBeamProgress=_0x43eede/_0x192d2c;else{if(_0x43eede<_0x441467-_0x192d2c)captureBeamProgress=0x1;else{if(_0x43eede<_0x441467)captureBeamProgress=0x1-(_0x43eede-(_0x441467-_0x192d2c))/_0x192d2c;else{captureBeamProgress=0x0,captureBeamActive=![],capturingBossId=null,stopSound(_0x759314(0x1b4)),_0x19470a[_0x759314(0x1a9)]=_0x759314(0x214),_0x19470a[_0x759314(0x1d8)]=generateAttackPathInternal(_0x19470a),_0x19470a[_0x759314(0x119)]=0x0,_0x19470a[_0x759314(0x196)]=0x0,_0x19470a[_0x759314(0x22c)]=BASE_ENEMY_ATTACK_SPEED*ENEMY3_ATTACK_SPEED_FACTOR,_0x19470a[_0x759314(0x1ce)]=0x0,_0x19470a['canFireThisDive']=!![],_0x19470a[_0x759314(0x1bc)]=0x0,_0x19470a['attackGroupId']=null;break;}}}captureBeamProgress=Math[_0x759314(0x1a4)](0x0,Math['min'](0x1,captureBeamProgress));if(captureBeamActive&&captureBeamProgress>=0.95){const _0x5834fb=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x4cc185=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR,_0x87c40d=_0x19470a['x']+_0x78b55f/0x2,_0x51eb72=_0x19470a['y']+_0x2f717d,_0x545d70=gameCanvas['height']-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x4b00c0=Math[_0x759314(0x1a4)](_0x5834fb,_0x4cc185),_0x213b4d=_0x87c40d-_0x4b00c0/0x2,_0x4c5fea=_0x51eb72,_0x30112b=_0x545d70-_0x51eb72;if(_0x30112b>0x0){const _0x3656f6={'x':_0x213b4d,'y':_0x4c5fea,'width':_0x4b00c0,'height':_0x30112b};let _0x2d5356=null,_0x1c47f9=0x0;if(isTwoPlayerMode&&selectedGameMode==='coop'){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&checkCollision(ship1,_0x3656f6))_0x2d5356=ship1,_0x1c47f9=0x1;else ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&checkCollision(ship2,_0x3656f6)&&(_0x2d5356=ship2,_0x1c47f9=0x2);}else ship&&playerLives>0x0&&!isShipCaptured&&checkCollision(ship,_0x3656f6)&&(_0x2d5356=ship,_0x1c47f9=currentPlayer);if(_0x2d5356){_0x19470a[_0x759314(0x222)]={'width':_0x2d5356[_0x759314(0x10d)],'height':_0x2d5356[_0x759314(0x1dd)]},_0x19470a['hasCapturedShip']=!![],stopSound(_0x759314(0x1b4)),_0x19470a[_0x759314(0x1a9)]=_0x759314(0x15d),_0x19470a['targetGridX']=null,_0x19470a['targetGridY']=null,_0x19470a[_0x759314(0x23e)]=_0x2d5356['y'],_0x19470a[_0x759314(0x155)]=0x0,isShowingCaptureMessage=!![],captureMessageStartTime=_0xddcfbd,capturedBossIdWithMessage=_0x19470a['id'],playSound('shipCapturedSound',![],0.3),csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,handlePlayerShipCollision(_0x1c47f9,![],_0xddcfbd,!![]);if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x759314(0x181))&&aiPlayerActivelySeekingCaptureById)aiPlayerActivelySeekingCaptureById=null;break;}}}break;}case _0x759314(0x15d):{_0x19470a[_0x759314(0x189)]=0x0,_0x19470a[_0x759314(0x1c8)]=0x0;if(_0x19470a['hasCapturedShip']&&_0x19470a[_0x759314(0x222)]&&typeof _0x19470a['initialCaptureAnimationY']===_0x759314(0x1e1)){const _0x4cc70d=_0xddcfbd-captureMessageStartTime,_0xf8b877=Math['min'](0x1,_0x4cc70d/CAPTURE_MESSAGE_DURATION),_0x338384=_0x19470a['y']+CAPTURED_SHIP_OFFSET_Y,_0x106025=_0x19470a[_0x759314(0x23e)];_0x19470a['capturedShipY']=_0x106025+(_0x338384-_0x106025)*_0xf8b877,_0x19470a[_0x759314(0x244)]=_0x19470a['x']+CAPTURED_SHIP_OFFSET_X;}else _0x19470a[_0x759314(0x244)]=_0x19470a['x']+CAPTURED_SHIP_OFFSET_X,_0x19470a[_0x759314(0x139)]=_0x19470a['y']+CAPTURED_SHIP_OFFSET_Y;break;}case _0x759314(0x214):{if(isEntrancePhaseActive)break;const _0x49fb5d=_0x19470a[_0x759314(0x1d8)],_0x195db4=3.8;if(!_0x49fb5d||_0x49fb5d[_0x759314(0x14e)]===0x0){console['error'](_0x759314(0x15a)+_0x2771cf+_0x759314(0x175)),_0x19470a[_0x759314(0x1a9)]=_0x759314(0x18d);try{const {x:_0x42e72c,y:_0x56683e}=getCurrentGridSlotPosition(_0x19470a[_0x759314(0x204)],_0x19470a[_0x759314(0x170)],_0x78b55f);_0x19470a[_0x759314(0x21f)]=_0x42e72c,_0x19470a[_0x759314(0x22a)]=_0x56683e;}catch(_0xcedc8d){console[_0x759314(0x1cc)](_0x759314(0x16b)+_0x2771cf+_0x759314(0x1e6),_0xcedc8d),_0x19470a[_0x759314(0x21f)]=gameCanvas['width']/0x2,_0x19470a[_0x759314(0x22a)]=ENEMY_TOP_MARGIN;}break;}if(_0x19470a[_0x759314(0x119)]>=_0x49fb5d['length']){console[_0x759314(0x1b9)](_0x759314(0x15a)+_0x2771cf+_0x759314(0x147)+_0x19470a[_0x759314(0x119)]+_0x759314(0x106)+_0x49fb5d[_0x759314(0x14e)]+_0x759314(0x11d)),_0x19470a['state']=_0x759314(0x18d);try{const {x:_0x2cc0ac,y:_0x13b43b}=getCurrentGridSlotPosition(_0x19470a['gridRow'],_0x19470a[_0x759314(0x170)],_0x78b55f);_0x19470a[_0x759314(0x21f)]=_0x2cc0ac,_0x19470a['targetGridY']=_0x13b43b;}catch(_0x20a572){console['error']('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x2771cf+_0x759314(0x169),_0x20a572),_0x19470a[_0x759314(0x21f)]=gameCanvas[_0x759314(0x10d)]/0x2,_0x19470a[_0x759314(0x22a)]=ENEMY_TOP_MARGIN;}break;}const _0x2669ce=_0x49fb5d[_0x19470a[_0x759314(0x119)]];if(!_0x2669ce||!_0x2669ce['p0']||!_0x2669ce['p1']||!_0x2669ce['p2']||!_0x2669ce['p3']){console[_0x759314(0x1cc)](_0x759314(0x15a)+_0x2771cf+_0x759314(0x1f8)+_0x19470a[_0x759314(0x119)]+_0x759314(0x1aa)),_0x19470a[_0x759314(0x1a9)]=_0x759314(0x18d);try{const {x:_0x292faf,y:_0x26a379}=getCurrentGridSlotPosition(_0x19470a['gridRow'],_0x19470a[_0x759314(0x170)],_0x78b55f);_0x19470a[_0x759314(0x21f)]=_0x292faf,_0x19470a[_0x759314(0x22a)]=_0x26a379;}catch(_0x4485ef){console['error'](_0x759314(0x16b)+_0x2771cf+'\x20(invalid\x20attack\x20segment):',_0x4485ef),_0x19470a[_0x759314(0x21f)]=gameCanvas[_0x759314(0x10d)]/0x2,_0x19470a[_0x759314(0x22a)]=ENEMY_TOP_MARGIN;}break;}const _0x1580b8=_0x19470a[_0x759314(0x22c)]/0x3e8*_0x195db4;_0x19470a['attackPathT']+=_0x1580b8;let _0x2a022b,_0x1d3a81;const _0x489901=_0x19470a['x'],_0x33b5c8=_0x19470a['y'];if(_0x19470a[_0x759314(0x196)]>=0x1){try{_0x2a022b=calculateBezierPoint(0x1,_0x2669ce['p0']['x'],_0x2669ce['p1']['x'],_0x2669ce['p2']['x'],_0x2669ce['p3']['x']),_0x1d3a81=calculateBezierPoint(0x1,_0x2669ce['p0']['y'],_0x2669ce['p1']['y'],_0x2669ce['p2']['y'],_0x2669ce['p3']['y']);}catch(_0x28600b){console[_0x759314(0x1cc)]('Error\x20calculating\x20FINAL\x20bezier\x20point\x20for\x20attack\x20'+_0x19470a['id']+':',_0x28600b),_0x2a022b=_0x19470a['x'],_0x1d3a81=_0x19470a['y'],_0x19470a[_0x759314(0x1a9)]=_0x759314(0x18d);try{const {x:_0xceec17,y:_0x453879}=getCurrentGridSlotPosition(_0x19470a[_0x759314(0x204)],_0x19470a[_0x759314(0x170)],_0x78b55f);_0x19470a[_0x759314(0x21f)]=_0xceec17,_0x19470a[_0x759314(0x22a)]=_0x453879;}catch(_0x1df4b1){console[_0x759314(0x1cc)](_0x759314(0x205)+_0x19470a['id']+':',_0x1df4b1),_0x19470a['targetGridX']=gameCanvas[_0x759314(0x10d)]/0x2,_0x19470a[_0x759314(0x22a)]=ENEMY_TOP_MARGIN;}break;}_0x19470a[_0x759314(0x196)]=0x0,_0x19470a['attackPathSegmentIndex']++;if(_0x19470a[_0x759314(0x119)]>=_0x49fb5d[_0x759314(0x14e)]){_0x19470a[_0x759314(0x1a9)]=_0x759314(0x18d),_0x19470a[_0x759314(0x1ce)]=0x0,_0x19470a[_0x759314(0x1bc)]=0x0,_0x19470a[_0x759314(0x193)]=null;try{const {x:_0x4cc595,y:_0x203a0d}=getCurrentGridSlotPosition(_0x19470a['gridRow'],_0x19470a[_0x759314(0x170)],_0x78b55f);_0x19470a[_0x759314(0x21f)]=_0x4cc595,_0x19470a[_0x759314(0x22a)]=_0x203a0d;}catch(_0x3d4ba8){console[_0x759314(0x1cc)](_0x759314(0x16b)+_0x2771cf+_0x759314(0x22b),_0x3d4ba8),_0x19470a[_0x759314(0x21f)]=gameCanvas[_0x759314(0x10d)]/0x2,_0x19470a['targetGridY']=ENEMY_TOP_MARGIN;}}else{const _0x3dd315=_0x49fb5d[_0x19470a[_0x759314(0x119)]];if(!_0x3dd315?.['p0']){console[_0x759314(0x1cc)]('Enemy\x20'+_0x2771cf+_0x759314(0x232)+_0x19470a[_0x759314(0x119)]+_0x759314(0x1aa)),_0x2a022b=_0x19470a['x'],_0x1d3a81=_0x19470a['y'],_0x19470a[_0x759314(0x1a9)]=_0x759314(0x18d);try{const {x:_0x5452a7,y:_0x4dce28}=getCurrentGridSlotPosition(_0x19470a['gridRow'],_0x19470a[_0x759314(0x170)],_0x78b55f);_0x19470a[_0x759314(0x21f)]=_0x5452a7,_0x19470a[_0x759314(0x22a)]=_0x4dce28;}catch(_0x52d05e){console[_0x759314(0x1cc)](_0x759314(0x22f)+_0x19470a['id']+':',_0x52d05e),_0x19470a[_0x759314(0x21f)]=gameCanvas[_0x759314(0x10d)]/0x2,_0x19470a[_0x759314(0x22a)]=ENEMY_TOP_MARGIN;}break;}}}else try{_0x2a022b=calculateBezierPoint(_0x19470a[_0x759314(0x196)],_0x2669ce['p0']['x'],_0x2669ce['p1']['x'],_0x2669ce['p2']['x'],_0x2669ce['p3']['x']),_0x1d3a81=calculateBezierPoint(_0x19470a[_0x759314(0x196)],_0x2669ce['p0']['y'],_0x2669ce['p1']['y'],_0x2669ce['p2']['y'],_0x2669ce['p3']['y']);}catch(_0x5a8b83){console[_0x759314(0x1cc)](_0x759314(0x185)+_0x19470a['id']+':',_0x5a8b83),_0x2a022b=_0x19470a['x'],_0x1d3a81=_0x19470a['y'],_0x19470a['state']=_0x759314(0x18d);try{const {x:_0x15e641,y:_0x378598}=getCurrentGridSlotPosition(_0x19470a[_0x759314(0x204)],_0x19470a[_0x759314(0x170)],_0x78b55f);_0x19470a['targetGridX']=_0x15e641,_0x19470a['targetGridY']=_0x378598;}catch(_0x345724){console[_0x759314(0x1cc)]('Error\x20getting\x20grid\x20pos\x20after\x20bezier\x20error\x20for\x20'+_0x19470a['id']+':',_0x345724),_0x19470a[_0x759314(0x21f)]=gameCanvas[_0x759314(0x10d)]/0x2,_0x19470a['targetGridY']=ENEMY_TOP_MARGIN;}break;}if(_0x19470a&&_0x19470a['state']===_0x759314(0x214)){const _0x197378=_0x19470a[_0x759314(0x1bc)]||0x0,_0x1abd9b=_0x2a022b+_0x197378,_0x3c8b54=_0x1d3a81;_0x19470a['velocityX']=_0x1abd9b-_0x489901,_0x19470a['velocityY']=_0x3c8b54-_0x33b5c8,_0x19470a['x']=_0x1abd9b,_0x19470a['y']=_0x3c8b54;if(_0x19470a['y']>gameCanvas[_0x759314(0x1dd)]+_0x2f717d*1.5){_0x19470a[_0x759314(0x1a9)]=_0x759314(0x18d),_0x19470a['attackPathSegmentIndex']=0x0,_0x19470a['attackPathT']=0x0,_0x19470a['lastFiredTime']=0x0,_0x19470a[_0x759314(0x1bc)]=0x0,_0x19470a[_0x759314(0x193)]=null,_0x19470a['y']=-_0x2f717d*(1.1+Math[_0x759314(0x16a)]()*0.4),_0x19470a['x']=Math[_0x759314(0x16a)]()*(gameCanvas['width']-_0x78b55f),_0x19470a[_0x759314(0x189)]=0x0,_0x19470a['velocityY']=0x0;try{const {x:_0x265385,y:_0x23875d}=getCurrentGridSlotPosition(_0x19470a['gridRow'],_0x19470a['gridCol'],_0x78b55f);_0x19470a[_0x759314(0x21f)]=_0x265385,_0x19470a['targetGridY']=_0x23875d;}catch(_0x573f42){console[_0x759314(0x1cc)](_0x759314(0x16b)+_0x2771cf+_0x759314(0x202),_0x573f42),_0x19470a[_0x759314(0x21f)]=gameCanvas[_0x759314(0x10d)]/0x2,_0x19470a[_0x759314(0x22a)]=ENEMY_TOP_MARGIN;}}}break;}case _0x759314(0x18d):{if(isEntrancePhaseActive)break;if(_0x19470a[_0x759314(0x21f)]==null||_0x19470a[_0x759314(0x22a)]==null){console[_0x759314(0x1b9)](_0x759314(0x15a)+_0x2771cf+'\x20returning\x20without\x20target\x20coords.\x20Recalculating.');try{const {x:_0x5b3d87,y:_0xb0b767}=getCurrentGridSlotPosition(_0x19470a[_0x759314(0x204)],_0x19470a['gridCol'],_0x78b55f);_0x19470a[_0x759314(0x21f)]=_0x5b3d87,_0x19470a['targetGridY']=_0xb0b767;}catch(_0x925402){console[_0x759314(0x1cc)](_0x759314(0x108)+_0x2771cf+_0x759314(0x198),_0x925402),_0x19470a[_0x759314(0x1a9)]='in_grid',_0x19470a['x']=gameCanvas[_0x759314(0x10d)]/0x2,_0x19470a['y']=ENEMY_TOP_MARGIN;break;}}const _0x22a014=_0x19470a[_0x759314(0x21f)],_0x395f26=_0x19470a[_0x759314(0x22a)],_0x3a43fe=_0x22a014-_0x19470a['x'],_0x92f9af=_0x395f26-_0x19470a['y'],_0x44f145=Math[_0x759314(0x16e)](_0x3a43fe*_0x3a43fe+_0x92f9af*_0x92f9af),_0x412ab9=scaleValue(level,BASE_RETURN_SPEED_FACTOR,MAX_RETURN_SPEED_FACTOR),_0x3bdd68=BASE_RETURN_SPEED*_0x412ab9,_0x38ba54=_0x3bdd68*0.5;_0x44f145>_0x38ba54?(_0x19470a[_0x759314(0x189)]=_0x3a43fe/_0x44f145*_0x3bdd68,_0x19470a[_0x759314(0x1c8)]=_0x92f9af/_0x44f145*_0x3bdd68,_0x19470a['x']+=_0x19470a[_0x759314(0x189)],_0x19470a['y']+=_0x19470a['velocityY']):(_0x19470a['x']=_0x22a014,_0x19470a['y']=_0x395f26,_0x19470a[_0x759314(0x189)]=0x0,_0x19470a['velocityY']=0x0,_0x19470a[_0x759314(0x1a9)]=_0x759314(0x237),_0x19470a[_0x759314(0x1ef)]=!![],_0x19470a[_0x759314(0x1bc)]=0x0,_0x19470a[_0x759314(0x193)]=null,_0x19470a['hasOwnProperty']('returnLogDone')&&delete _0x19470a['returnLogDone'],!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(_0x759314(0x1af),!![],0.1)));break;}}if(_0x19470a&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x759314(0x1a7)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){const _0x4a3674=['attacking',_0x759314(0x168),'following_bezier_path',_0x759314(0x10a)];if(_0x4a3674[_0x759314(0x1d7)](_0x19470a[_0x759314(0x1a9)])){let _0x1e7054=[];if(isTwoPlayerMode&&selectedGameMode==='coop'){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x1e7054[_0x759314(0x1d3)]({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x1e7054[_0x759314(0x1d3)]({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isInvincible&&_0x1e7054[_0x759314(0x1d3)]({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(const _0x334b6c of _0x1e7054){const _0xa10779=_0x334b6c['shipObj'],_0x2b31e1={'x':_0x19470a['x'],'y':_0x19470a['y'],'width':_0x78b55f,'height':_0x2f717d},_0x2c2a61={'x':_0xa10779['x'],'y':_0xa10779['y'],'width':_0xa10779[_0x759314(0x10d)],'height':_0xa10779[_0x759314(0x1dd)]},_0x50a6c9=_0x334b6c[_0x759314(0x11f)]?{'x':_0xa10779['x']+DUAL_SHIP_OFFSET_X,'y':_0xa10779['y'],'width':_0xa10779[_0x759314(0x10d)],'height':_0xa10779['height']}:null;let _0x133199=![],_0x42b628=![];if(checkCollision(_0x2b31e1,_0x2c2a61))_0x133199=!![];else _0x334b6c['dual']&&_0x50a6c9&&checkCollision(_0x2b31e1,_0x50a6c9)&&(_0x133199=!![],_0x42b628=!![]);if(_0x133199){createExplosion(_0x19470a['x']+_0x78b55f/0x2,_0x19470a['y']+_0x2f717d/0x2),playSound(_0x759314(0x243),![],0.6),enemies[_0x759314(0x1ed)](_0x3ddfc2,0x1),_0x19470a=null,handlePlayerShipCollision(_0x334b6c[_0x759314(0x1a8)],_0x42b628,_0xddcfbd,![]);if(_0x19470a===null)break;}}}}if(!_0x19470a)continue;}if(!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode==='coop'&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){let _0x40dd7=[];if(isTwoPlayerMode&&selectedGameMode==='coop'){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x40dd7[_0x759314(0x1d3)]({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x40dd7[_0x759314(0x1d3)]({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isInvincible&&_0x40dd7['push']({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(let _0xf4f0d3=enemyBullets['length']-0x1;_0xf4f0d3>=0x0;_0xf4f0d3--){const _0x28d19a=enemyBullets[_0xf4f0d3];if(!_0x28d19a){enemyBullets['splice'](_0xf4f0d3,0x1);continue;}const _0x45bbd2={'x':_0x28d19a['x'],'y':_0x28d19a['y'],'width':_0x28d19a[_0x759314(0x10d)],'height':_0x28d19a['height']};let _0x260a0e=![];for(const _0x476db0 of _0x40dd7){const _0x3e2780=_0x476db0[_0x759314(0x132)],_0x39d12a={'x':_0x3e2780['x'],'y':_0x3e2780['y'],'width':_0x3e2780['width'],'height':_0x3e2780[_0x759314(0x1dd)]},_0x3ed0b2=_0x476db0['dual']?{'x':_0x3e2780['x']+DUAL_SHIP_OFFSET_X,'y':_0x3e2780['y'],'width':_0x3e2780['width'],'height':_0x3e2780['height']}:null;let _0x2ac578=![],_0x302729=![];if(checkCollision(_0x45bbd2,_0x39d12a))_0x2ac578=!![];else _0x476db0[_0x759314(0x11f)]&&_0x3ed0b2&&checkCollision(_0x45bbd2,_0x3ed0b2)&&(_0x2ac578=!![],_0x302729=!![]);if(_0x2ac578){playSound(_0x759314(0x243),![],0.6),handlePlayerShipCollision(_0x476db0[_0x759314(0x1a8)],_0x302729,_0xddcfbd,![]),enemyBullets[_0x759314(0x1ed)](_0xf4f0d3,0x1),_0x260a0e=!![];break;}}if(_0x260a0e)continue;}}updateHitSparks();}catch(_0x3e2665){console[_0x759314(0x1cc)](_0x759314(0x13a),_0x3e2665,_0x3e2665['stack']),isGridSoundPlaying=![],stopSound(_0x759314(0x1af)),isEntrancePhaseActive=![],stopSound(_0x759314(0x16f)),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(_0x759314(0x1b4)),stopSound(_0x759314(0x21d)),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0x759314(0x235))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x759314(0x20d));}}function handlePlayerShipCollision(_0x175b94,_0xc9400e,_0x3c0405,_0x5ce354=![]){const _0x203ed5=_0x48e791,_0x3ce202=_0x3c0405,_0x4ef83a=gameCanvas?gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;let _0x142170=0x0,_0x1196da=null;if(isTwoPlayerMode&&selectedGameMode===_0x203ed5(0x1a7)){_0x1196da=_0x175b94===0x1?ship1:ship2;if(_0x1196da){_0x142170=_0x1196da['x'];if(_0x5ce354){if(_0x175b94===0x1)player1CaptureRespawnX=_0x1196da['x'];else{if(_0x175b94===0x2)player2CaptureRespawnX=_0x1196da['x'];}}}else{if(_0x175b94===0x1&&typeof player1CaptureRespawnX===_0x203ed5(0x1e1)&&player1CaptureRespawnX!==0x0)_0x142170=player1CaptureRespawnX;else{if(_0x175b94===0x2&&typeof player2CaptureRespawnX===_0x203ed5(0x1e1)&&player2CaptureRespawnX!==0x0)_0x142170=player2CaptureRespawnX;else{if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&gameCanvas)_0x142170=_0x175b94===0x1?gameCanvas[_0x203ed5(0x10d)]/0x2-gameCanvas[_0x203ed5(0x10d)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2:gameCanvas['width']/0x2+gameCanvas[_0x203ed5(0x10d)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;else gameCanvas?_0x142170=gameCanvas[_0x203ed5(0x10d)]/0x2-SHIP_WIDTH/0x2:_0x142170=0xc8;}}}}else{_0x1196da=ship;if(_0x1196da)_0x142170=_0x1196da['x'],_0x5ce354&&(capturedShipRespawnX_NormalMode=ship['x']);else _0x5ce354&&capturedShipRespawnX_NormalMode!==0x0?_0x142170=capturedShipRespawnX_NormalMode:_0x142170=gameCanvas?gameCanvas[_0x203ed5(0x10d)]/0x2-SHIP_WIDTH/0x2:0xc8;}if(isTwoPlayerMode&&selectedGameMode===_0x203ed5(0x1a7)){if(_0x175b94===0x1){if(_0x5ce354){isPlayer1ShipCaptured=!![],player1IsDualShipActive=![],player1Lives--;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x203ed5(0x181))coopPartner1CapturedTime=_0x3ce202;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0x3ce202,playSound(_0x203ed5(0x1f0),![],0.4),ship1=null,player1NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;if(capturedBossIdWithMessage&&enemies['find'](_0x1da01c=>_0x1da01c['id']===capturedBossIdWithMessage)){const _0x3f072a=enemies[_0x203ed5(0x247)](_0x102d37=>_0x102d37['id']===capturedBossIdWithMessage);_0x3f072a&&(_0x3f072a[_0x203ed5(0x1cb)]=![],_0x3f072a[_0x203ed5(0x222)]=null);}}else player1NeedsRespawnAfterCapture=!![],ship1=null;}else{if(player1IsDualShipActive&&ship1){player1IsDualShipActive=![];const _0x2d9a0a=_0xc9400e?ship1['x']+DUAL_SHIP_OFFSET_X+ship1[_0x203ed5(0x10d)]/0x2:ship1['x']+ship1[_0x203ed5(0x10d)]/0x2;createExplosion(_0x2d9a0a,ship1['y']+ship1[_0x203ed5(0x1dd)]/0x2),ship1['x']=_0x142170,ship1['y']=_0x4ef83a,ship1[_0x203ed5(0x217)]=ship1['x'],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x3ce202+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0x3ce202+RESPAWN_DELAY_MS;}else{if(ship1)createExplosion(ship1['x']+ship1[_0x203ed5(0x10d)]/0x2,ship1['y']+ship1['height']/0x2);player1Lives--;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0x3ce202,playSound('gameOverSound',![],0.4),ship1=null;if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;}else isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x3ce202+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0x3ce202+RESPAWN_DELAY_MS,ship1?(ship1['x']=_0x142170,ship1['y']=_0x4ef83a,ship1[_0x203ed5(0x217)]=ship1['x']):ship1={'x':_0x142170,'y':_0x4ef83a,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x142170,'id':'p1'};}}}else{if(_0x175b94===0x2){if(_0x5ce354){isPlayer2ShipCaptured=!![],player2IsDualShipActive=![],player2Lives--;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x203ed5(0x181))coopPartner2CapturedTime=_0x3ce202;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0x3ce202,playSound('gameOverSound',![],0.4),ship2=null,player2NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p2'||aiPlayerActivelySeekingCaptureById===_0x203ed5(0x219))aiPlayerActivelySeekingCaptureById=null;if(capturedBossIdWithMessage&&enemies[_0x203ed5(0x247)](_0x912095=>_0x912095['id']===capturedBossIdWithMessage)){const _0x5975c4=enemies[_0x203ed5(0x247)](_0x238dc4=>_0x238dc4['id']===capturedBossIdWithMessage);_0x5975c4&&(_0x5975c4[_0x203ed5(0x1cb)]=![],_0x5975c4['capturedShipDimensions']=null);}}else player2NeedsRespawnAfterCapture=!![],ship2=null;}else{if(player2IsDualShipActive&&ship2){player2IsDualShipActive=![];const _0x78198a=_0xc9400e?ship2['x']+DUAL_SHIP_OFFSET_X+ship2[_0x203ed5(0x10d)]/0x2:ship2['x']+ship2[_0x203ed5(0x10d)]/0x2;createExplosion(_0x78198a,ship2['y']+ship2[_0x203ed5(0x1dd)]/0x2),ship2['x']=_0x142170,ship2['y']=_0x4ef83a,ship2[_0x203ed5(0x217)]=ship2['x'],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x3ce202+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0x3ce202+RESPAWN_DELAY_MS;}else{if(ship2)createExplosion(ship2['x']+ship2['width']/0x2,ship2['y']+ship2[_0x203ed5(0x1dd)]/0x2);player2Lives--;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0x3ce202,playSound(_0x203ed5(0x1f0),![],0.4),ship2=null;if(aiPlayerActivelySeekingCaptureById==='p2'||aiPlayerActivelySeekingCaptureById===_0x203ed5(0x219))aiPlayerActivelySeekingCaptureById=null;}else isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x3ce202+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0x3ce202+RESPAWN_DELAY_MS,ship2?(ship2['x']=_0x142170,ship2['y']=_0x4ef83a,ship2[_0x203ed5(0x217)]=_0x142170):ship2={'x':_0x142170,'y':_0x4ef83a,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x142170,'id':'p2'};}}}}player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isDualShipActive&&!_0x5ce354&&_0x1196da){isDualShipActive=![];if(isTwoPlayerMode&&selectedGameMode===_0x203ed5(0x213)){if(_0x175b94===0x1)player1IsDualShipActive=![];else{if(_0x175b94===0x2)player2IsDualShipActive=![];}}else{if(!isTwoPlayerMode)player1IsDualShipActive=![];}const _0x3063eb=_0xc9400e?_0x142170+DUAL_SHIP_OFFSET_X+SHIP_WIDTH/0x2:_0x142170+SHIP_WIDTH/0x2;createExplosion(_0x3063eb,_0x4ef83a+SHIP_HEIGHT/0x2);ship&&(ship['x']=_0x142170,ship['y']=_0x4ef83a,ship[_0x203ed5(0x217)]=ship['x']);isInvincible=!![],invincibilityEndTime=_0x3ce202+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x3ce202+RESPAWN_DELAY_MS;if(!isManualControl&&!isPlayerTwoAI)aiNeedsStabilization=!![];else{if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)aiNeedsStabilization=!![];}}else{if(!_0x5ce354&&_0x1196da)createExplosion(_0x142170+SHIP_WIDTH/0x2,_0x4ef83a+SHIP_HEIGHT/0x2);if(_0x5ce354){isShipCaptured=!![];if(ship)ship=null;}playerLives--;if(playerLives<=0x0){playerLives=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x203ed5(0x213)){if(_0x175b94===0x1)player1Lives=0x0;else{if(_0x175b94===0x2)player2Lives=0x0;}isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x3ce202,playerWhoIsGameOver=_0x175b94,playSound(_0x203ed5(0x1f0),![],0.4);const _0xab3069=_0x175b94===0x1?0x2:0x1,_0x18da24=_0xab3069===0x1?player1Lives:player2Lives;_0x18da24>0x0?nextActionAfterPlayerGameOver=_0x203ed5(0x190):nextActionAfterPlayerGameOver='show_results';bullets=[],enemyBullets=[],explosions=[];if(!(_0x18da24>0x0))ship=null;}else player1Lives=0x0,ship=null,playSound('gameOverSound',![],0.4),triggerFinalGameOverSequence();}else{if(isTwoPlayerMode&&selectedGameMode===_0x203ed5(0x213)){if(_0x175b94===0x1)player1Lives=playerLives;else player2Lives=playerLives;}if(!_0x5ce354){isInvincible=!![],invincibilityEndTime=_0x3ce202+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x3ce202+RESPAWN_DELAY_MS;if(ship&&gameCanvas){ship['x']=_0x142170,ship['y']=_0x4ef83a,ship[_0x203ed5(0x217)]=ship['x'];if(!isManualControl&&!isPlayerTwoAI)aiNeedsStabilization=!![];else{if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)aiNeedsStabilization=!![];}}}if(_0x5ce354)isDualShipActive=![];}}}if(!_0x5ce354)fallingShips=[];}function switchPlayerTurn(){const _0x3b60de=_0x48e791;if(!isTwoPlayerMode||selectedGameMode===_0x3b60de(0x1a7))return![];stopSound(_0x3b60de(0x157));if(currentPlayer===0x1){player1Score=score,player1IsDualShipActive=isDualShipActive;if(player1Score>highScore)highScore=player1Score;}else{player2Score=score,player2IsDualShipActive=isDualShipActive;if(player2Score>highScore)highScore=player2Score;}const _0x59488d=currentPlayer===0x1?0x2:0x1,_0x1b4366=_0x59488d===0x1?player1Lives:player2Lives;if(_0x1b4366<=0x0){const _0x30cee6=currentPlayer===0x1?player1Lives:player2Lives;return _0x30cee6<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x59488d,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function triggerGridFiring(){const _0x491c1f=_0x48e791;if(isPaused||!isInGameState||isChallengingStage||isWaveTransitioning)return;let _0x3fb8ca=![];isTwoPlayerMode&&selectedGameMode===_0x491c1f(0x1a7)?(player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)&&(_0x3fb8ca=!![]):playerLives>0x0&&ship&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(_0x3fb8ca=!![]);if(!_0x3fb8ca)return;const _0x5ac6d6=enemies[_0x491c1f(0x245)](_0xc3cb81=>_0xc3cb81&&_0xc3cb81['state']===_0x491c1f(0x237));if(_0x5ac6d6[_0x491c1f(0x14e)]===0x0)return;const _0x2f4e86=Date[_0x491c1f(0x1ba)](),_0x5b6791=scaleValue(level,BASE_GRID_FIRE_INTERVAL,MIN_GRID_FIRE_INTERVAL);if(_0x2f4e86-lastGridFireCheckTime<_0x5b6791)return;lastGridFireCheckTime=_0x2f4e86;const _0x1e8edc=scaleValue(level,BASE_GRID_FIRE_PROBABILITY,MAX_GRID_FIRE_PROBABILITY),_0x19ce21=Math[_0x491c1f(0x105)](scaleValue(level,BASE_GRID_MAX_FIRING_ENEMIES,MAX_GRID_MAX_FIRING_ENEMIES));let _0x5dd979=0x0;_0x5ac6d6['sort'](()=>Math[_0x491c1f(0x16a)]()-0.5);for(const _0x1e4f32 of _0x5ac6d6){if(_0x5dd979>=_0x19ce21)break;if(_0x1e4f32[_0x491c1f(0x1b3)]===ENEMY2_TYPE||_0x1e4f32[_0x491c1f(0x1b3)]===ENEMY3_TYPE){if(_0x1e4f32[_0x491c1f(0x1b3)]===ENEMY3_TYPE&&_0x1e4f32[_0x491c1f(0x1cb)])continue;Math[_0x491c1f(0x16a)]()<_0x1e8edc&&(createBulletSimple(_0x1e4f32)&&(playSound(_0x491c1f(0x183),![],0.4),_0x1e4f32['lastFiredTime']=_0x2f4e86,_0x5dd979++));}}}function runSingleGameUpdate(_0x1d02da){const _0x152523=_0x48e791;try{const _0x45dd30=Date[_0x152523(0x1ba)]();let _0x5c6a50=![];isTwoPlayerMode&&selectedGameMode===_0x152523(0x1a7)?_0x5c6a50=player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture:_0x5c6a50=playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;let _0x329e14=![];if(isManualControl&&connectedGamepadIndex!==null){if(isTwoPlayerMode&&selectedGameMode===_0x152523(0x1a7)){if(player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage)_0x329e14=!![];}else{if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1))_0x329e14=!![];}}if(_0x329e14&&gameOverSequenceStartTime===0x0&&!isPaused){const _0xb232b7=navigator['getGamepads']();if(_0xb232b7?.[connectedGamepadIndex]){const _0x472076=_0xb232b7[connectedGamepadIndex],_0x34b365=processSingleController(_0x472076,previousGameButtonStates);previousGameButtonStates=_0x34b365[_0x152523(0x127)][_0x152523(0x200)]();if(_0x34b365[_0x152523(0x11e)]){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates[_0x152523(0x14e)]>0x0)previousGameButtonStates=[];}}else connectedGamepadIndex===null&&previousGameButtonStates[_0x152523(0x14e)]>0x0&&(previousGameButtonStates=[]);let _0x9b3cb0=![];if(isManualControl&&isTwoPlayerMode&&selectedGameMode===_0x152523(0x1a7)&&!isPlayerTwoAI&&connectedGamepadIndexP2!==null){if(player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage)_0x9b3cb0=!![];}else{if(isManualControl&&isTwoPlayerMode&&selectedGameMode===_0x152523(0x213)&&!isPlayerTwoAI&&connectedGamepadIndexP2!==null){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&currentPlayer===0x2)_0x9b3cb0=!![];}}if(_0x9b3cb0&&gameOverSequenceStartTime===0x0&&!isPaused){const _0x50d632=navigator[_0x152523(0x1d0)]();if(_0x50d632?.[connectedGamepadIndexP2]){const _0x5c22c0=_0x50d632[connectedGamepadIndexP2],_0x602ae0=processSingleController(_0x5c22c0,previousGameButtonStatesP2);previousGameButtonStatesP2=_0x602ae0[_0x152523(0x127)][_0x152523(0x200)]();if(_0x602ae0[_0x152523(0x11e)]){stopGameAndShowMenu();return;}}else{if(previousGameButtonStatesP2[_0x152523(0x14e)]>0x0)previousGameButtonStatesP2=[];}}else connectedGamepadIndexP2===null&&previousGameButtonStatesP2[_0x152523(0x14e)]>0x0&&(previousGameButtonStatesP2=[]);if(isPaused){renderGame();return;}const _0x584917=showCsBonusScoreMessage||showPerfectMessage;if(isCoopAIDemoActive&&_0x584917&&gameCanvas?.[_0x152523(0x10d)]>0x0){const _0x57035d=ship1&&player1Lives>0x0&&player2Lives<=0x0,_0x59e9a7=ship2&&player2Lives>0x0&&player1Lives<=0x0;if(_0x57035d){const _0x2af633=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x36bfc6=Math[_0x152523(0x105)](gameCanvas[_0x152523(0x10d)]/0x2-_0x2af633/0x2);ship1['x']=_0x36bfc6,ship1[_0x152523(0x217)]=_0x36bfc6,smoothedShip1X=_0x36bfc6,ship2&&(ship2['targetX']=ship2['x'],smoothedShip2X=ship2['x']);}else{if(_0x59e9a7){const _0x43fd25=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0xdffe40=Math[_0x152523(0x105)](gameCanvas[_0x152523(0x10d)]/0x2-_0x43fd25/0x2);ship2['x']=_0xdffe40,ship2[_0x152523(0x217)]=_0xdffe40,smoothedShip2X=_0xdffe40,ship1&&(ship1[_0x152523(0x217)]=ship1['x'],smoothedShip1X=ship1['x']);}else{if(ship1&&player1Lives>0x0&&ship2&&player2Lives>0x0){const _0x3a8d96=gameCanvas['width']/0x2-gameCanvas[_0x152523(0x10d)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1['x']=_0x3a8d96,ship1['targetX']=_0x3a8d96,smoothedShip1X=_0x3a8d96;const _0x36d69b=gameCanvas['width']/0x2+gameCanvas[_0x152523(0x10d)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2['x']=_0x36d69b,ship2['targetX']=_0x36d69b,smoothedShip2X=_0x36d69b;}}}}else{if(_0x584917&&gameCanvas?.['width']>0x0){if(isTwoPlayerMode&&selectedGameMode===_0x152523(0x1a7)){const _0x13daa0=ship1&&player1Lives>0x0,_0x19e87c=ship2&&player2Lives>0x0;if(_0x13daa0&&_0x19e87c){if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x152523(0x181)){const _0x298449=gameCanvas['width']/0x2-gameCanvas[_0x152523(0x10d)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x37e6d2=gameCanvas[_0x152523(0x10d)]/0x2+gameCanvas[_0x152523(0x10d)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2['x']=_0x37e6d2,ship2[_0x152523(0x217)]=_0x37e6d2,smoothedShip2X=_0x37e6d2);}}else{if(_0x13daa0&&ship1){const _0x544a17=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x45f244=Math[_0x152523(0x105)](gameCanvas[_0x152523(0x10d)]/0x2-_0x544a17/0x2);ship1['x']=_0x45f244,ship1['targetX']=_0x45f244,ship2&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'&&(ship2[_0x152523(0x217)]=ship2['x'],smoothedShip2X=ship2['x']);}else{if(_0x19e87c&&ship2){const _0x2a4f6f=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x34bc88=Math[_0x152523(0x105)](gameCanvas[_0x152523(0x10d)]/0x2-_0x2a4f6f/0x2);ship2['x']=_0x34bc88,ship2[_0x152523(0x217)]=_0x34bc88;if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x152523(0x181))smoothedShip2X=_0x34bc88;ship1&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x152523(0x181)&&(ship1[_0x152523(0x217)]=ship1['x']);}}}}else{if((!isManualControl||isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)&&ship){const _0x7ef0e7=isDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH;ship['x']=Math[_0x152523(0x105)](gameCanvas[_0x152523(0x10d)]/0x2-_0x7ef0e7/0x2),ship['targetX']=ship['x'];if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)smoothedShipX=ship['x'];else{if(!isManualControl)smoothedShipX=ship['x'];}}}}}let _0x4106e8=![];if(selectedGameMode==='coop'&&level===0x1&&coopPlayersReadyStartTime>0x0){_0x4106e8=!![];if(isShowingCoopPlayersReady){if(_0x45dd30-coopPlayersReadyStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x152523(0x235))updateExplosions();}if(_0x45dd30>=coopPlayersReadyStartTime+0xbb8){isShowingCoopPlayersReady=![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'?(isShowingIntro=!![],introStep=0x2,introDisplayStartTime=_0x45dd30):(isShowingIntro=!![],introStep=0x1,introDisplayStartTime=_0x45dd30);}}else{if(isShowingIntro){if(_0x45dd30-introDisplayStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x152523(0x235))updateExplosions();}let _0x46b739=INTRO_DURATION_PER_STEP;introStep===0x1&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x152523(0x181))&&(_0x46b739=TWO_PLAYER_STAGE_INTRO_DURATION);if(_0x45dd30>=introDisplayStartTime+_0x46b739){if(introStep===0x1&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x152523(0x181))){introStep=0x2,introDisplayStartTime=_0x45dd30,explosions=[];if(typeof updateExplosions===_0x152523(0x235))updateExplosions();}else{isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();_0x4106e8=![],coopPlayersReadyStartTime=0x0;}}}else _0x4106e8=![],coopPlayersReadyStartTime=0x0;}if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x152523(0x181))handlePlayerInput();if(typeof moveEntities===_0x152523(0x235))moveEntities();renderGame();if(_0x4106e8)return;}if(selectedGameMode===_0x152523(0x1a7)&&level===0x1&&!gameJustStartedAndWaveLaunched&&coopPlayersReadyStartTime===0x0&&gameJustStarted){if(isFullGridWave)startFullGridWave();else{if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x152523(0x14e)]>0x0)scheduleEntranceFlightWave();else isWaveTransitioning=!![],readyForNextWaveReset=!![];}}gameJustStartedAndWaveLaunched=!![],gameJustStarted=![];}if(isShowingPlayerGameOverMessage&&isTwoPlayerMode&&selectedGameMode===_0x152523(0x213)){if(_0x45dd30-playerGameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x152523(0x235))updateExplosions();}if(_0x45dd30-playerGameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION){isShowingPlayerGameOverMessage=![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();const _0x243645=playerWhoIsGameOver;playerWhoIsGameOver=0x0;if(nextActionAfterPlayerGameOver==='switch_player')switchPlayerTurn()?(_0x243645===0x2&&currentPlayer===0x1&&player1CompletedLevel===level&&(level++,player1CompletedLevel=-0x1,player1MaxLevelReached=Math[_0x152523(0x1a4)](player1MaxLevelReached,level)),resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![]):triggerFinalGameOverSequence();else nextActionAfterPlayerGameOver==='show_results'?triggerFinalGameOverSequence():triggerFinalGameOverSequence();renderGame();return;}else{renderGame();return;}}if(isTwoPlayerMode&&selectedGameMode==='coop'){let _0x561e12=![],_0x1b99c8=![];if(isPlayer1ShowingGameOverMessage){if(_0x45dd30-player1GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x152523(0x235))updateExplosions();}if(_0x45dd30-player1GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer1ShowingGameOverMessage=![],_0x561e12=!![],explosions=[];if(typeof updateExplosions===_0x152523(0x235))updateExplosions();}}if(isPlayer2ShowingGameOverMessage){if(_0x45dd30-player2GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x152523(0x235))updateExplosions();}if(_0x45dd30-player2GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer2ShowingGameOverMessage=![],_0x1b99c8=!![],explosions=[];if(typeof updateExplosions===_0x152523(0x235))updateExplosions();}}if(_0x561e12||_0x1b99c8){player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x152523(0x181))handlePlayerInput();if(typeof moveEntities===_0x152523(0x235))moveEntities();renderGame();if(gameOverSequenceStartTime>0x0||player1Lives>0x0||player2Lives>0x0)return;}else{if(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage){if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x152523(0x181))handlePlayerInput();if(typeof moveEntities===_0x152523(0x235))moveEntities();renderGame();return;}}}if(isShowingCaptureMessage){if(_0x45dd30-captureMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x152523(0x235))updateExplosions();}const _0x5120e3=enemies[_0x152523(0x247)](_0x551dac=>_0x551dac['id']===capturedBossIdWithMessage);if(_0x5120e3&&_0x5120e3[_0x152523(0x1a9)]===_0x152523(0x15d)){const _0x41c471=_0x45dd30-captureMessageStartTime,_0x21600d=Math[_0x152523(0x20a)](0x1,_0x41c471/CAPTURE_MESSAGE_DURATION);_0x5120e3[_0x152523(0x155)]=_0x21600d*0x2*(0x2*Math['PI']);}else _0x5120e3&&(_0x5120e3['captureAnimationRotation']=0x0);if(isInGameState&&!isShowingPlayerGameOverMessage&&!isPlayer1ShowingGameOverMessage&&!isPlayer2ShowingGameOverMessage&&gameOverSequenceStartTime===0x0){if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')handlePlayerInput();if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')aiControlCoop();else isPlayerTwoAI&&selectedGameMode===_0x152523(0x213)&&currentPlayer===0x2&&aiControl();if(typeof moveEntities===_0x152523(0x235))moveEntities();updateExplosions(),updateFloatingScores();}if(_0x45dd30-captureMessageStartTime>=CAPTURE_MESSAGE_DURATION){isShowingCaptureMessage=![],explosions=[];if(typeof updateExplosions===_0x152523(0x235))updateExplosions();stopSound('shipCapturedSound'),captureBeamActive=![];if(_0x5120e3&&_0x5120e3[_0x152523(0x1a9)]===_0x152523(0x15d)){_0x5120e3['state']='returning',_0x5120e3['captureAnimationRotation']=0x0;try{const _0x31cfdc=_0x5120e3[_0x152523(0x1b3)]===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH,{x:_0x2403df,y:_0x4b696b}=getCurrentGridSlotPosition(_0x5120e3[_0x152523(0x204)],_0x5120e3[_0x152523(0x170)],_0x31cfdc);_0x5120e3['targetGridX']=_0x2403df,_0x5120e3[_0x152523(0x22a)]=_0x4b696b;}catch(_0x43af6a){console['error'](_0x152523(0x1e5)+_0x5120e3['id']+':',_0x43af6a),_0x5120e3[_0x152523(0x21f)]=gameCanvas[_0x152523(0x10d)]/0x2,_0x5120e3[_0x152523(0x22a)]=ENEMY_TOP_MARGIN;}}else _0x5120e3&&(_0x5120e3[_0x152523(0x155)]=0x0);capturedBossIdWithMessage=null;const _0x424c87=gameCanvas?gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;if(isTwoPlayerMode&&selectedGameMode===_0x152523(0x1a7)){if(player1NeedsRespawnAfterCapture&&player1Lives>0x0){ship1={'x':player1CaptureRespawnX,'y':_0x424c87,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player1CaptureRespawnX,'id':'p1'},isPlayer1ShipCaptured=![],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x45dd30+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=![],player1NeedsRespawnAfterCapture=![],player1CaptureRespawnX=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')smoothedShip1X=ship1['x'];}if(player2NeedsRespawnAfterCapture&&player2Lives>0x0){ship2={'x':player2CaptureRespawnX,'y':_0x424c87,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player2CaptureRespawnX,'id':'p2'},isPlayer2ShipCaptured=![],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x45dd30+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=![],player2NeedsRespawnAfterCapture=![],player2CaptureRespawnX=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')smoothedShip2X=ship2['x'];}if(player1Lives<=0x0&&player2Lives<=0x0){if(gameOverSequenceStartTime===0x0)triggerFinalGameOverSequence();}}else{if(!isManualControl&&!isPlayerTwoAI){if(isShipCaptured&&playerLives>0x0){let _0x597f6c=gameCanvas?gameCanvas[_0x152523(0x10d)]/0x2-SHIP_WIDTH/0x2:0xc8;if(typeof smoothedShipX===_0x152523(0x1e1))_0x597f6c=smoothedShipX;ship={'x':_0x597f6c,'y':_0x424c87,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x597f6c,'id':_0x152523(0x1ac)},isShipCaptured=![],isInvincible=!![],invincibilityEndTime=_0x45dd30+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=![],aiNeedsStabilization=!![];if(smoothedShipX===undefined&&ship)smoothedShipX=ship['x'];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isManualControl){if(isShipCaptured&&playerLives>0x0){let _0x23a0ab=capturedShipRespawnX_NormalMode!==0x0?capturedShipRespawnX_NormalMode:gameCanvas?gameCanvas[_0x152523(0x10d)]/0x2-SHIP_WIDTH/0x2:0xc8;ship={'x':_0x23a0ab,'y':_0x424c87,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x23a0ab,'id':'main'},isShipCaptured=![],capturedShipRespawnX_NormalMode=0x0,isInvincible=!![],invincibilityEndTime=_0x45dd30+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x45dd30+RESPAWN_DELAY_MS;if(isPlayerTwoAI&&selectedGameMode===_0x152523(0x213)&&currentPlayer===0x2)aiNeedsStabilization=!![];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&((!isTwoPlayerMode||isTwoPlayerMode&&selectedGameMode===_0x152523(0x213)&&(currentPlayer===0x1&&player2Lives<=0x0||currentPlayer===0x2&&player1Lives<=0x0))&&triggerFinalGameOverSequence());}}}}renderGame();return;}const _0x3d1571=!(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage||isShowingPlayerGameOverMessage),_0x54386b=isShowingIntro&&!_0x4106e8&&!(selectedGameMode===_0x152523(0x1a7)&&level===0x1);if(!_0x4106e8&&gameOverSequenceStartTime===0x0&&_0x5c6a50&&!isShowingCaptureMessage&&_0x3d1571){if(isInGameState&&!_0x54386b){if(!(_0x584917&&!isManualControl)){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x152523(0x181))aiControlCoop();else{if(isPlayerTwoAI&&selectedGameMode===_0x152523(0x213)&&currentPlayer===0x2)aiControl();else!isManualControl&&!isPlayerTwoAI&&aiControl();}}isManualControl&&handlePlayerInput();}}isTwoPlayerMode&&selectedGameMode===_0x152523(0x1a7)?(isPlayer1Invincible&&_0x45dd30>=player1InvincibilityEndTime&&(isPlayer1Invincible=![],player1InvincibilityEndTime=0x0),isPlayer2Invincible&&_0x45dd30>=player2InvincibilityEndTime&&(isPlayer2Invincible=![],player2InvincibilityEndTime=0x0)):(isInvincible&&_0x45dd30>=invincibilityEndTime&&(isInvincible=![],invincibilityEndTime=0x0),isWaitingForRespawn&&_0x45dd30>=respawnTime&&(isWaitingForRespawn=![]));const _0x4f86d1=showExtraLifeMessage&&_0x45dd30-extraLifeMessageStartTime<0x64;if(_0x4f86d1&&(isWaveTransitioning||isChallengingStage&&enemies['length']===0x0)){}if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x152523(0x181))&&isChallengingStage&&enemies['length']===0x0&&!isCsCompletionDelayActive&&!showCsBonusScoreMessage&&!showPerfectMessage&&gameCanvas&&gameCanvas[_0x152523(0x10d)]>0x0){const _0x558a05=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage,_0x43077a=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage;if(_0x558a05&&!_0x43077a){const _0x38a529=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0xe3acc5=Math[_0x152523(0x105)](gameCanvas['width']/0x2-_0x38a529/0x2);ship1['x']=_0xe3acc5,ship1['targetX']=_0xe3acc5,smoothedShip1X=_0xe3acc5;}else{if(_0x43077a&&!_0x558a05){const _0x2ad5b6=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x4531b7=Math[_0x152523(0x105)](gameCanvas['width']/0x2-_0x2ad5b6/0x2);ship2['x']=_0x4531b7,ship2[_0x152523(0x217)]=_0x4531b7,smoothedShip2X=_0x4531b7;}}}if(isCsCompletionDelayActive&&_0x3d1571&&gameOverSequenceStartTime===0x0){if(_0x45dd30-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY+EXPLOSION_DURATION){isCsCompletionDelayActive=![],csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies;csCompletionResultIsPerfect?(playSound(_0x152523(0x216),![],0.6),showCsHitsMessage=!![],csHitsMessageStartTime=_0x45dd30):(playSound(_0x152523(0x1fa),![],0.6),showCSClearMessage=!![],csClearMessageStartTime=_0x45dd30);bullets=[],enemyBullets=[],renderGame();return;}else{if(_0x45dd30-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY&&explosions[_0x152523(0x14e)]>0x0){updateExplosions(),renderGame();return;}else{if(_0x45dd30-csCompletionDelayStartTime<CS_COMPLETION_MESSAGE_DELAY){renderGame();return;}}}}let _0x90a4b8=![],_0x16ee67=![];if(_0x3d1571&&gameOverSequenceStartTime===0x0&&!isShowingCoopPlayersReady&&!_0x4106e8){if(showCsHitsMessage){if(_0x45dd30-csHitsMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(Date[_0x152523(0x1ba)]()-csHitsMessageStartTime>CS_HITS_MESSAGE_DURATION){showCsHitsMessage=![],showPerfectMessage=!![],perfectMessageStartTime=_0x45dd30,explosions=[];if(typeof updateExplosions===_0x152523(0x235))updateExplosions();}_0x16ee67=!![];}else{if(showPerfectMessage){if(_0x45dd30-perfectMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x152523(0x235))updateExplosions();}if(Date['now']()-perfectMessageStartTime>CS_PERFECT_MESSAGE_DURATION){showPerfectMessage=![],showCsBonusScoreMessage=!![],csBonusScoreMessageStartTime=_0x45dd30,explosions=[];if(typeof updateExplosions==='function')updateExplosions();}_0x16ee67=!![];}else{if(showCsBonusScoreMessage){if(_0x45dd30-csBonusScoreMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x152523(0x235))updateExplosions();}if(Date[_0x152523(0x1ba)]()-csBonusScoreMessageStartTime>CS_BONUS_MESSAGE_DURATION){showCsBonusScoreMessage=![],_0x90a4b8=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions===_0x152523(0x235))updateExplosions();}_0x16ee67=!![];}else{if(showCSClearMessage){if(_0x45dd30-csClearMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x152523(0x235))updateExplosions();}Date[_0x152523(0x1ba)]()-csClearMessageStartTime>=CS_CLEAR_HITS_DELAY&&!showCsHitsForClearMessage&&(showCsHitsForClearMessage=!![]);Date[_0x152523(0x1ba)]()-csClearMessageStartTime>=CS_CLEAR_SCORE_DELAY&&!showCsScoreForClearMessage&&(showCsScoreForClearMessage=!![]);if(Date[_0x152523(0x1ba)]()-csClearMessageStartTime>=CS_CLEAR_DELAY){showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],_0x90a4b8=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions===_0x152523(0x235))updateExplosions();}_0x16ee67=!![];}else{if(showExtraLifeMessage)Date['now']()-extraLifeMessageStartTime>EXTRA_LIFE_MESSAGE_DURATION&&(showExtraLifeMessage=![]),_0x16ee67=!![];else{if(showReadyMessage){if(_0x45dd30-readyMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x152523(0x235))updateExplosions();}if(Date[_0x152523(0x1ba)]()-readyMessageStartTime>READY_MESSAGE_DURATION){showReadyMessage=![],_0x90a4b8=!![],explosions=[];if(typeof updateExplosions===_0x152523(0x235))updateExplosions();}_0x16ee67=!![];}}}}}}}if(_0x16ee67&&!_0x90a4b8&&!isShowingCoopPlayersReady&&!_0x4106e8&&!isShowingCaptureMessage&&_0x3d1571){if(!((_0x584917||showCsHitsMessage||showCSClearMessage)&&isManualControl)&&!showExtraLifeMessage){renderGame();return;}}if(_0x54386b&&_0x3d1571&&gameOverSequenceStartTime===0x0){let _0x1df211=![];const _0x19d217=_0x45dd30-introDisplayStartTime;let _0x24ca24=INTRO_DURATION_PER_STEP;const _0x502bac=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x152523(0x14b),_0x1f8833=isTwoPlayerMode&&selectedGameMode==='normal'&&!isPlayerTwoAI;(_0x1f8833||_0x502bac)&&(_0x24ca24=TWO_PLAYER_STAGE_INTRO_DURATION);if(introStep===0x1){if(_0x19d217<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}let _0xcf056e=null,_0x3beab5=0x1;if(!playerIntroSoundPlayed){const _0x41d25f=_0x502bac||_0x1f8833,_0x1845a6=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x152523(0x181)&&level>0x1;if(_0x41d25f){if(currentPlayer===0x1&&level===0x1&&!initialGameStartSoundPlayedThisSession)_0xcf056e='startSound',_0x3beab5=0.4;else(currentPlayer===0x2||level>0x1)&&(_0xcf056e=_0x152523(0x118),_0x3beab5=0.2);}else{if(_0x1845a6)_0xcf056e=_0x152523(0x118),_0x3beab5=0.2;else{if(!isTwoPlayerMode){if(level===0x1&&!initialGameStartSoundPlayedThisSession)_0xcf056e=_0x152523(0x173),_0x3beab5=0.4;else level>0x1&&(_0xcf056e=_0x152523(0x118),_0x3beab5=0.2);}}}}_0xcf056e&&(playSound(_0xcf056e,![],_0x3beab5),playerIntroSoundPlayed=!![],_0xcf056e===_0x152523(0x173)&&(initialGameStartSoundPlayedThisSession=!![]));if(_0x19d217>=_0x24ca24){if(isChallengingStage)introStep=0x3;else introStep=0x2;introDisplayStartTime=_0x45dd30,explosions=[];if(typeof updateExplosions===_0x152523(0x235))updateExplosions();}}else{if(introStep===0x2){if(_0x19d217<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(!stageIntroSoundPlayed){if(playLevelUpAfterCSBonus&&(isTwoPlayerMode&&selectedGameMode===_0x152523(0x1a7)))playSound('levelUpSound',![],0.2),playLevelUpAfterCSBonus=![],stageIntroSoundPlayed=!![];else{if(isTwoPlayerMode&&selectedGameMode===_0x152523(0x1a7)&&!isPlayerTwoAI&&!isCoopAIDemoActive)playSound(_0x152523(0x118),![],0.2),stageIntroSoundPlayed=!![];else{if(selectedGameMode==='coop'){if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x152523(0x181))&&level>0x1)playSound(_0x152523(0x118),![],0.2),stageIntroSoundPlayed=!![];else(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x152523(0x181))&&level===0x1&&(stageIntroSoundPlayed=!![]);}else{if(!isTwoPlayerMode&&level>0x1)playSound(_0x152523(0x118),![],0.2),stageIntroSoundPlayed=!![];else{if(level>0x1&&!playerIntroSoundPlayed&&!(isPlayerTwoAI&&selectedGameMode===_0x152523(0x213))&&!initialGameStartSoundPlayedThisSession)playSound(_0x152523(0x118),![],0.2),stageIntroSoundPlayed=!![];else level===0x1&&!isManualControl&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode==='coop')&&!initialGameStartSoundPlayedThisSession&&(playSound(_0x152523(0x173),![],0.4),initialGameStartSoundPlayedThisSession=!![],stageIntroSoundPlayed=!![]);}}}}}if(_0x19d217>=_0x24ca24){_0x1df211=!![],explosions=[];if(typeof updateExplosions===_0x152523(0x235))updateExplosions();}}else{if(introStep===0x3){if(_0x19d217<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}!csIntroSoundPlayed&&(playSound('entranceSound',![],0.4),csIntroSoundPlayed=!![],stageIntroSoundPlayed=!![]);if(_0x19d217>=_0x24ca24){_0x1df211=!![],explosions=[];if(typeof updateExplosions===_0x152523(0x235))updateExplosions();}}}}if(isInGameState&&_0x3d1571&&gameOverSequenceStartTime===0x0&&gameCanvas){let _0x270ab3=null,_0x3d6273=null;const _0x3c7f27=isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x152523(0x14b)&&currentPlayer===0x1&&isShowingIntro;if(_0x3c7f27){let _0x533c15=![],_0x4e2b74=![];const _0x4e3ce7=navigator['getGamepads']();if(connectedGamepadIndex!==null&&_0x4e3ce7?.[connectedGamepadIndex]){const _0x53003a=_0x4e3ce7[connectedGamepadIndex],_0x423c7d=processSingleController(_0x53003a,previousGameButtonStates);_0x533c15=_0x423c7d[_0x152523(0x158)],_0x4e2b74=_0x423c7d['right'];}_0x270ab3=keyboardP1LeftDown||_0x533c15,_0x3d6273=keyboardP1RightDown||_0x4e2b74;}if(_0x502bac&&currentPlayer===0x2)aiControl();else{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')aiControlCoop();else!isManualControl&&!isPlayerTwoAI&&aiControl();}typeof moveEntities==='function'&&moveEntities(_0x270ab3,_0x3d6273),updateExplosions(),updateFloatingScores();}if(_0x1df211){isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![];isManualControl&&(isShowingDemoText=![]);if(!isChallengingStage)isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x152523(0x181)?(aiShip1CanShootTime=Date[_0x152523(0x1ba)]()+0x3e8,aiShip2CanShootTime=Date['now']()+0x4b0):aiCanShootTime=Date[_0x152523(0x1ba)]()+(isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_NORMAL'?0x3e8:0xbb8);else{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x152523(0x181))aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0;else aiCanShootTime=0x0;}const _0x3bf610=level===0x1&&selectedGameMode!==_0x152523(0x1a7),_0x461a8d=level===0x1&&selectedGameMode===_0x152523(0x1a7),_0x2369e9=_0x3bf610&&!gameJustStartedAndWaveLaunched||level>0x1||isChallengingStage||_0x461a8d&&!gameJustStartedAndWaveLaunched;if(_0x2369e9){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x152523(0x14e)]>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound(_0x152523(0x16f),![],0.4);}else isEntrancePhaseActive=![],stopSound(_0x152523(0x16f)),isWaveTransitioning=!![],readyForNextWaveReset=!![],bullets=[],enemyBullets=[],explosions=[],setTimeout(()=>{const _0x4d9452=_0x152523,_0x5d6610=isTwoPlayerMode&&selectedGameMode===_0x4d9452(0x1a7)?player1Lives>0x0||player2Lives>0x0:playerLives>0x0;if((isInGameState||!isInGameState&&_0x5d6610)&&typeof resetWaveInternal===_0x4d9452(0x235)){if(_0x5d6610)resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![];else triggerFinalGameOverSequence();}},0x64);}if(_0x3bf610||level>0x1||isChallengingStage||_0x461a8d)gameJustStartedAndWaveLaunched=!![];}}isManualControl&&_0x54386b&&_0x3d1571&&gameOverSequenceStartTime===0x0&&handlePlayerInput();renderGame();return;}const _0x452376=!_0x4106e8&&!_0x54386b&&!_0x90a4b8&&!isShowingCaptureMessage;if(gameJustStarted&&_0x452376){if(!gameJustStartedAndWaveLaunched){const _0x1bf0cd=selectedGameMode===_0x152523(0x1a7)&&level===0x1&&coopPlayersReadyStartTime!==0x0;if(!_0x1bf0cd){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x152523(0x14e)]>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound(_0x152523(0x16f),![],0.4);}else isWaveTransitioning=!![],readyForNextWaveReset=!![];}gameJustStartedAndWaveLaunched=!![];}}gameJustStarted=![];}if(_0x452376&&isInGameState&&_0x3d1571&&gameOverSequenceStartTime===0x0){if(!_0x584917||_0x584917&&isManualControl){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x152523(0x181))aiControlCoop();else{if(isPlayerTwoAI&&selectedGameMode===_0x152523(0x213)&&currentPlayer===0x2)aiControl();else!isManualControl&&!isPlayerTwoAI&&aiControl();}isManualControl&&handlePlayerInput();if(typeof moveEntities===_0x152523(0x235))moveEntities();updateExplosions(),updateFloatingScores();}else _0x584917&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x152523(0x181))&&(updateExplosions(),updateFloatingScores());}if(_0x452376&&_0x3d1571&&gameOverSequenceStartTime===0x0){if(GRID_BREATH_ENABLED&&isInGameState&&!isChallengingStage&&!isWaveTransitioning&&_0x5c6a50){const _0x5996d8=enemies[_0x152523(0x1f6)](_0x3db1cd=>_0x3db1cd?.['state']===_0x152523(0x237));if(_0x5996d8&&isGridBreathingActive){const _0x105783=_0x45dd30-gridBreathStartTime,_0x699dd0=scaleValue(level,BASE_GRID_BREATH_CYCLE_MS,MIN_GRID_BREATH_CYCLE_MS),_0x141b96=_0x105783%_0x699dd0;currentGridBreathFactor=(Math[_0x152523(0x13c)](_0x141b96/_0x699dd0*Math['PI']*0x2-Math['PI']/0x2)+0x1)/0x2;}else{if(!_0x5996d8&&isGridBreathingActive)isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0;else _0x5996d8&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=_0x45dd30,currentGridBreathFactor=0x0);}}else isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if(isEntrancePhaseActive){const _0x2622e1=enemiesSpawnedThisWave>=totalEnemiesScheduledForWave,_0x2ba9b7=enemies[_0x152523(0x1f6)](_0x407911=>_0x407911?.[_0x152523(0x1a9)]==='following_entrance_path'||_0x407911?.[_0x152523(0x1a9)]===_0x152523(0x178)||_0x407911?.[_0x152523(0x1a9)]===_0x152523(0x117));if(totalEnemiesScheduledForWave>0x0&&_0x2622e1&&!_0x2ba9b7){const _0x568eb0=isEntrancePhaseActive;isEntrancePhaseActive=![];if(_0x568eb0){stopSound(_0x152523(0x16f)),enemiesSpawnedThisWave=0x0,totalEnemiesScheduledForWave=0x0,enemySpawnTimeouts[_0x152523(0x201)](clearTimeout),enemySpawnTimeouts=[],gridJustCompleted=!![];if(!isChallengingStage&&!isFullGridWave){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x152523(0x181))coopAICaptureDiveAnticipationActive=!![],coopAICaptureDiveAnticipationEndTime=Date['now']()+COOP_AI_CAPTURE_DIVE_ANTICIPATION_DURATION_MS,typeof triggerImmediateCaptureDive===_0x152523(0x235)&&triggerImmediateCaptureDive();else typeof triggerImmediateCaptureDive==='function'&&triggerImmediateCaptureDive();}}}}if(!isChallengingStage&&!_0x54386b&&!isPaused&&!isWaveTransitioning)triggerGridFiring();if(!isWaveTransitioning&&_0x5c6a50&&!_0x54386b&&!isShowingCaptureMessage&&!isEntrancePhaseActive){let _0x17186f=enemies[_0x152523(0x14e)]===0x0,_0x3c3152=fallingShips[_0x152523(0x14e)]===0x0,_0x3c5e88=![];if(isChallengingStage){if(_0x17186f&&!isEntrancePhaseActive)_0x3c5e88=!![];}else{if(_0x17186f&&!isEntrancePhaseActive&&_0x3c3152)_0x3c5e88=!![];}if(_0x3c5e88){isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x152523(0x181))&&gameCanvas&&gameCanvas[_0x152523(0x10d)]>0x0){const _0x4406dc=player1Lives,_0x2ad4c9=player2Lives,_0x6aa004=gameCanvas[_0x152523(0x1dd)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(_0x4406dc>0x0&&_0x2ad4c9<=0x0&&ship1){const _0x1e2797=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x343ae8=Math[_0x152523(0x105)](gameCanvas[_0x152523(0x10d)]/0x2-_0x1e2797/0x2);ship1['x']=_0x343ae8,ship1['targetX']=_0x343ae8,smoothedShip1X=_0x343ae8,ship1['y']=_0x6aa004;}else{if(_0x2ad4c9>0x0&&_0x4406dc<=0x0&&ship2){const _0x5f2889=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x498fb4=Math[_0x152523(0x105)](gameCanvas[_0x152523(0x10d)]/0x2-_0x5f2889/0x2);ship2['x']=_0x498fb4,ship2[_0x152523(0x217)]=_0x498fb4,smoothedShip2X=_0x498fb4,ship2['y']=_0x6aa004;}}}isWaveTransitioning=!![];isGridSoundPlaying&&(stopSound(_0x152523(0x1af)),isGridSoundPlaying=![]);!isChallengingStage&&(bullets=[],enemyBullets=[]);floatingScores=[],enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;let _0x20ebe8;if(isChallengingStage){csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,setTimeout(()=>{const _0x6e4653=_0x152523;if(isWaveTransitioning){explosions=[];if(typeof updateExplosions==='function')updateExplosions();isCsCompletionDelayActive=!![],csCompletionDelayStartTime=Date[_0x6e4653(0x1ba)]();}},EXPLOSION_DURATION);if(csCompletionResultIsPerfect){let _0x56f4c3=0x2710;if(isTwoPlayerMode&&selectedGameMode==='coop')(player1Lives>0x0||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x152523(0x181))&&ship1)&&(player1Score+=_0x56f4c3),(player2Lives>0x0||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&ship2)&&(player2Score+=_0x56f4c3),highScore=Math[_0x152523(0x1a4)](highScore,player1Score,player2Score),checkAndAwardExtraLife(null);else{score+=_0x56f4c3;if(!isTwoPlayerMode)player1Score=score;else{if(isTwoPlayerMode&&selectedGameMode==='normal'){if(currentPlayer===0x1)player1Score=score;else player2Score=score;}}highScore=Math['max'](highScore,score,player1Score,player2Score),checkAndAwardExtraLife(currentPlayer);}_0x20ebe8=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_HITS_MESSAGE_DURATION+CS_PERFECT_MESSAGE_DURATION+CS_BONUS_MESSAGE_DURATION;}else isTwoPlayerMode&&selectedGameMode===_0x152523(0x1a7)?checkAndAwardExtraLife(null):checkAndAwardExtraLife(currentPlayer),_0x20ebe8=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_CLEAR_DELAY;_0x20ebe8+=0x64;}else playSound(_0x152523(0x1d1),![],0.8),normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,_0x20ebe8=POST_MESSAGE_RESET_DELAY;setTimeout(()=>{const _0x489ecb=_0x152523;let _0x487736=![],_0x137974=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x489ecb(0x213)){_0x137974=currentPlayer;_0x137974===0x1?player1MaxLevelReached=Math[_0x489ecb(0x1a4)](player1MaxLevelReached,level):player2MaxLevelReached=Math[_0x489ecb(0x1a4)](player2MaxLevelReached,level);const _0x2b016b=switchPlayerTurn();if(_0x2b016b){if(_0x137974===0x2&&currentPlayer===0x1&&player1CompletedLevel===level)_0x487736=!![],player1CompletedLevel=-0x1;else _0x137974===0x1?(player1CompletedLevel=level,_0x487736=![]):_0x487736=![];}else _0x487736=!![],player1CompletedLevel=-0x1;}else{_0x487736=!![];if(!isTwoPlayerMode)player1MaxLevelReached=Math[_0x489ecb(0x1a4)](player1MaxLevelReached,level);else{if(isTwoPlayerMode&&selectedGameMode==='coop'){if(player1Lives>0x0)player1MaxLevelReached=Math['max'](player1MaxLevelReached,level);if(player2Lives>0x0)player2MaxLevelReached=Math[_0x489ecb(0x1a4)](player2MaxLevelReached,level);}}}if(_0x487736){level++;if(isTwoPlayerMode&&selectedGameMode===_0x489ecb(0x1a7)){if(player1Lives>0x0)player1MaxLevelReached=Math['max'](player1MaxLevelReached,level);if(player2Lives>0x0)player2MaxLevelReached=Math['max'](player2MaxLevelReached,level);}else{if(isTwoPlayerMode&&selectedGameMode===_0x489ecb(0x213)){if(currentPlayer===0x1&&player1Lives>0x0)player1MaxLevelReached=Math['max'](player1MaxLevelReached,level);else{if(currentPlayer===0x2&&player2Lives>0x0)player2MaxLevelReached=Math[_0x489ecb(0x1a4)](player2MaxLevelReached,level);}}else{if(playerLives>0x0)player1MaxLevelReached=Math[_0x489ecb(0x1a4)](player1MaxLevelReached,level);}}}let _0xb8f22c=![];if(isTwoPlayerMode&&selectedGameMode==='coop')_0xb8f22c=player1Lives>0x0||player2Lives>0x0;else{if(isTwoPlayerMode&&selectedGameMode===_0x489ecb(0x213))_0xb8f22c=(currentPlayer===0x1?player1Lives:player2Lives)>0x0;else _0xb8f22c=playerLives>0x0;}_0xb8f22c?(resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![]):triggerFinalGameOverSequence();},_0x20ebe8),renderGame();return;}if(!isChallengingStage){if(enemies[_0x152523(0x14e)]>0x0){let _0x10bdf5=null;const _0x3150bb=enemies[_0x152523(0x245)](_0x5340db=>_0x5340db?.[_0x152523(0x1a9)]===_0x152523(0x237)),_0x1d1ac8=_0x3150bb[_0x152523(0x14e)]<=0x3,_0x4c9a2d=Math['max'](0x1,Math[_0x152523(0x20a)](level,LEVEL_CAP_FOR_SCALING)),_0x4b01b2=0x1068,_0x4de1c2=0x320,_0x4be140=(_0x4c9a2d-0x1)*((_0x4b01b2-_0x4de1c2)/(LEVEL_CAP_FOR_SCALING-0x1)),_0x806d89=Math[_0x152523(0x1a4)](_0x4de1c2,_0x4b01b2-_0x4be140),_0xe46c61=Math[_0x152523(0x105)](scaleValue(level,BASE_MAX_ATTACKING_ENEMIES,MAX_MAX_ATTACKING_ENEMIES)),_0x574e35=enemies['filter'](_0x58771d=>_0x58771d?.[_0x152523(0x1a9)]===_0x152523(0x214)||_0x58771d?.[_0x152523(0x1a9)]===_0x152523(0x21e))['length'];if(_0x1d1ac8||_0x45dd30-lastEnemyDetachTime>_0x806d89&&_0x3150bb['length']>0x0&&_0x574e35<_0xe46c61){_0x10bdf5=findAndDetachEnemy();if(_0x10bdf5&&_0x10bdf5[_0x152523(0x14e)]>0x0){const _0xee0ee6=_0x10bdf5[_0x152523(0x1d2)](_0x37da28=>enemies[_0x152523(0x247)](_0x54630b=>_0x54630b?.['id']===_0x37da28['id']))[_0x152523(0x245)](_0x33d739=>_0x33d739&&_0x33d739[_0x152523(0x1a9)]===_0x152523(0x237));if(_0xee0ee6[_0x152523(0x14e)]>0x0){const _0x3df716=_0xee0ee6[0x0],_0x588856=_0x3df716[_0x152523(0x184)];if(!_0x1d1ac8)lastEnemyDetachTime=_0x45dd30;if(_0x588856==='normal'){const _0x70cd9f=generateAttackPathInternal(_0x3df716);if(_0x70cd9f&&_0x70cd9f['length']>0x0){if(_0xee0ee6[_0x152523(0x14e)]===0x3&&_0x3df716['type']===ENEMY3_TYPE&&level!==0x1)playSound(_0x152523(0x1b1),![],0.3);let _0x52089f=[..._0xee0ee6];const _0x135a21=_0x52089f[_0x152523(0x14e)];if(_0x135a21>0x1){let _0x4a3449=null,_0x3bfc75=[];_0x52089f[_0x152523(0x201)](_0x1169b0=>{const _0x1752a7=_0x152523;if(_0x1169b0[_0x1752a7(0x1b3)]===ENEMY3_TYPE)_0x4a3449=_0x1169b0;else _0x3bfc75[_0x1752a7(0x1d3)](_0x1169b0);});if(_0x4a3449&&level!==0x1&&_0x135a21===0x3&&_0x3bfc75[_0x152523(0x14e)]===0x2)_0x52089f=[_0x3bfc75[0x0],_0x4a3449,_0x3bfc75[0x1]];else _0x52089f[_0x152523(0x1c6)]((_0x8889f9,_0x15b75e)=>(_0x8889f9?.[_0x152523(0x170)]??0x0)-(_0x15b75e?.[_0x152523(0x170)]??0x0));const _0x11ca9e=0x5;let _0x1f186f=0x0;_0x52089f=_0x52089f[_0x152523(0x245)](_0x3b5b38=>_0x3b5b38&&typeof _0x3b5b38['width']===_0x152523(0x1e1));const _0x119770=_0x52089f['length'];for(let _0x382cb9=0x0;_0x382cb9<_0x119770;_0x382cb9++){_0x1f186f+=_0x52089f[_0x382cb9][_0x152523(0x10d)];if(_0x382cb9<_0x119770-0x1)_0x1f186f+=_0x11ca9e;}const _0x240dac=-_0x1f186f/0x2;let _0x1acfd7=_0x240dac;for(let _0x4ea3ef=0x0;_0x4ea3ef<_0x119770;_0x4ea3ef++){const _0x35d614=_0x52089f[_0x4ea3ef];_0x35d614[_0x152523(0x1bc)]=_0x1acfd7+_0x35d614[_0x152523(0x10d)]/0x2,_0x1acfd7+=_0x35d614[_0x152523(0x10d)]+_0x11ca9e;}}else _0x52089f[_0x152523(0x201)](_0x45860a=>_0x45860a[_0x152523(0x1bc)]=0x0);const _0x113162=_0x152523(0x1e3)+_0x3df716['id']+'-'+_0x45dd30;_0x52089f[_0x152523(0x201)](_0x56d9d7=>{if(_0x56d9d7)_0x56d9d7['attackGroupId']=_0x113162;});let _0x5f19e4=![],_0x56e642=GROUP_FIRE_BURST_DELAY;if(_0x3df716[_0x152523(0x1b3)]===ENEMY2_TYPE||_0x3df716[_0x152523(0x1b3)]===ENEMY3_TYPE){_0x5f19e4=!![];if(_0x3df716[_0x152523(0x1b3)]===ENEMY2_TYPE&&_0x135a21===0x1)_0x56e642=SOLO_BUTTERFLY_FIRE_DELAY;}else{if(_0x3df716[_0x152523(0x1b3)]===ENEMY1_TYPE)_0x5f19e4=!![];}if(_0x1d1ac8&&level>0x1)_0x5f19e4=![];_0x5f19e4&&_0x52089f[_0x152523(0x201)](_0x7735fb=>{const _0x3ff1bf=_0x152523,_0x15a815=_0x7735fb&&!(_0x7735fb[_0x3ff1bf(0x1b3)]===ENEMY3_TYPE&&_0x7735fb['hasCapturedShip']);if(_0x15a815)fireEnemyBurst(_0x7735fb['id'],_0x3ff1bf(0x214),_0x56e642);}),_0x52089f[_0x152523(0x201)]((_0x523849,_0x696b15)=>{const _0x2df9b3=_0x152523;_0x523849&&_0x523849[_0x2df9b3(0x1a9)]===_0x2df9b3(0x237)&&(_0x523849[_0x2df9b3(0x1a9)]=_0x2df9b3(0x21e),_0x523849[_0x2df9b3(0x1ef)]=![],_0x523849[_0x2df9b3(0x189)]=0x0,_0x523849[_0x2df9b3(0x1c8)]=0x0,_0x523849[_0x2df9b3(0x195)]=![],setTimeout(()=>{const _0x3bce38=_0x2df9b3;if(isPaused)return;const _0x208b20=enemies['find'](_0x5b3d4d=>_0x5b3d4d?.['id']===_0x523849['id']);if(_0x208b20&&_0x208b20['state']===_0x3bce38(0x21e))try{const _0x1d943e=scaleValue(level,BASE_ENEMY_ATTACK_SPEED,MAX_ENEMY_ATTACK_SPEED);let _0xf381e0=0x1;if(_0x208b20[_0x3bce38(0x1b3)]===ENEMY1_TYPE)_0xf381e0=ENEMY1_DIVE_SPEED_FACTOR;else{if(_0x208b20['type']===ENEMY2_TYPE)_0xf381e0=ENEMY2_DIVE_SPEED_FACTOR;else{if(_0x208b20['type']===ENEMY3_TYPE)_0xf381e0=ENEMY3_ATTACK_SPEED_FACTOR;}}if(_0x523849['type']===ENEMY3_TYPE)playSound(_0x3bce38(0x197),![],0.2);else playSound(_0x3bce38(0x151),![],0.2);_0x208b20[_0x3bce38(0x1a9)]=_0x3bce38(0x214),_0x208b20[_0x3bce38(0x1d8)]=_0x70cd9f,_0x208b20[_0x3bce38(0x119)]=0x0,_0x208b20[_0x3bce38(0x196)]=0x0,_0x208b20[_0x3bce38(0x22c)]=_0x1d943e*_0xf381e0,_0x208b20[_0x3bce38(0x1ce)]=0x0,_0x208b20[_0x3bce38(0x195)]=!![];}catch(_0x5dade9){console[_0x3bce38(0x1cc)]('Error\x20starting\x20attack\x20for\x20'+_0x523849['id']+':',_0x5dade9);}},_0x696b15*GROUP_DETACH_DELAY_MS));});}else _0x10bdf5[_0x152523(0x201)](_0xb9945d=>{const _0x43fe4f=_0x152523;if(_0xb9945d)_0xb9945d[_0x43fe4f(0x1ef)]=![];});}}}}}}enemies[_0x152523(0x201)](_0x360bb9=>{const _0x1852ad=_0x152523;if(_0x360bb9&&_0x360bb9[_0x1852ad(0x1b3)]===ENEMY3_TYPE&&_0x360bb9[_0x1852ad(0x1cb)]&&_0x360bb9[_0x1852ad(0x1a9)]===_0x1852ad(0x214)&&_0x360bb9['capturedShipDimensions']&&typeof _0x360bb9[_0x1852ad(0x19b)]===_0x1852ad(0x1e1)){if(_0x45dd30-_0x360bb9[_0x1852ad(0x19b)]>CAPTURED_SHIP_FIRE_COOLDOWN_MS){const _0x126ada=_0x360bb9['x']+_0x360bb9[_0x1852ad(0x10d)]/0x2,_0x4cd75f=_0x360bb9['y']+_0x360bb9[_0x1852ad(0x1dd)]+_0x360bb9[_0x1852ad(0x222)][_0x1852ad(0x1dd)]*0.5,_0x4747f3={'x':_0x126ada,'y':_0x4cd75f};createBulletSimple(_0x360bb9,_0x4747f3)&&(_0x360bb9[_0x1852ad(0x19b)]=_0x45dd30,playSound(_0x1852ad(0x1c2),![],0.4));}}});}}else{if(gameOverSequenceStartTime>0x0){const _0x3dde51=_0x45dd30-gameOverSequenceStartTime,_0x247699=_0x3dde51>=GAME_OVER_DURATION;if(_0x247699&&!isShowingResultsScreen){isShowingResultsScreen=!![],stopSound(_0x152523(0x1f0)),playSound('resultsMusicSound',!![],0.2),explosions=[];if(typeof updateExplosions==='function')updateExplosions();}}}!_0x4106e8&&renderGame();}catch(_0x5c1965){console[_0x152523(0x1cc)](_0x152523(0x1ad),_0x5c1965,_0x5c1965[_0x152523(0x116)]),isPaused=![];mainLoopId&&(cancelAnimationFrame(mainLoopId),mainLoopId=null);isInGameState=![],isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',alert(_0x152523(0x234)),stopAllGameSoundsInternal(),isGridSoundPlaying=![],isInvincible=![],invincibilityEndTime=0x0;try{typeof showMenuState===_0x152523(0x235)&&showMenuState();}catch(_0x461020){console[_0x152523(0x1cc)](_0x152523(0x130),_0x461020);}}}function checkAndAwardExtraLife(_0x43d066=null){const _0x2ec47b=_0x48e791;try{const _0x1059c6=[];if(_0x43d066===0x1){const _0x5c3715=isTwoPlayerMode&&selectedGameMode===_0x2ec47b(0x1a7)?player1Lives:isTwoPlayerMode&&selectedGameMode===_0x2ec47b(0x213)&&currentPlayer===0x1?playerLives:player1Lives,_0x4dd30a=isTwoPlayerMode&&selectedGameMode===_0x2ec47b(0x1a7)?player1Score:isTwoPlayerMode&&selectedGameMode===_0x2ec47b(0x213)&&currentPlayer===0x1?score:player1Score;_0x1059c6['push']({'num':0x1,'currentLives':_0x5c3715,'currentScore':_0x4dd30a,'thresholdsMet':player1LifeThresholdsMet});}else{if(_0x43d066===0x2&&isTwoPlayerMode){const _0x31df8e=selectedGameMode===_0x2ec47b(0x1a7)?player2Lives:selectedGameMode===_0x2ec47b(0x213)&&currentPlayer===0x2?playerLives:player2Lives,_0xbb1c0d=selectedGameMode===_0x2ec47b(0x1a7)?player2Score:selectedGameMode===_0x2ec47b(0x213)&&currentPlayer===0x2?score:player2Score;_0x1059c6[_0x2ec47b(0x1d3)]({'num':0x2,'currentLives':_0x31df8e,'currentScore':_0xbb1c0d,'thresholdsMet':player2LifeThresholdsMet});}else{if(isTwoPlayerMode&&selectedGameMode===_0x2ec47b(0x1a7)&&_0x43d066===null)_0x1059c6['push']({'num':0x1,'currentLives':player1Lives,'currentScore':player1Score,'thresholdsMet':player1LifeThresholdsMet}),_0x1059c6[_0x2ec47b(0x1d3)]({'num':0x2,'currentLives':player2Lives,'currentScore':player2Score,'thresholdsMet':player2LifeThresholdsMet});else{if(!isTwoPlayerMode&&(_0x43d066===null||_0x43d066===0x1))_0x1059c6['push']({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet});else isTwoPlayerMode&&selectedGameMode===_0x2ec47b(0x213)&&_0x43d066===currentPlayer&&(currentPlayer===0x1?_0x1059c6['push']({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet}):_0x1059c6['push']({'num':0x2,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player2LifeThresholdsMet}));}}}_0x1059c6[_0x2ec47b(0x201)](_0x1a7f97=>{const _0x5475eb=_0x2ec47b;let _0x2d7e4a=![];while(!![]){let _0x448d64=![],_0x5ae9fd=-0x1;const _0x39f769=_0x1a7f97[_0x5475eb(0x23a)]['size'];if(_0x39f769===0x0)_0x5ae9fd=EXTRA_LIFE_THRESHOLD_1;else{if(_0x39f769===0x1&&!_0x1a7f97[_0x5475eb(0x23a)][_0x5475eb(0x135)](EXTRA_LIFE_THRESHOLD_2))_0x5ae9fd=EXTRA_LIFE_THRESHOLD_2;else{if(_0x39f769>=0x1&&_0x1a7f97['thresholdsMet']['has'](EXTRA_LIFE_THRESHOLD_1)&&_0x1a7f97[_0x5475eb(0x23a)][_0x5475eb(0x135)](EXTRA_LIFE_THRESHOLD_2)){let _0x210318=0x0;_0x1a7f97[_0x5475eb(0x23a)][_0x5475eb(0x201)](_0x8b633a=>{_0x8b633a>=EXTRA_LIFE_THRESHOLD_2&&(_0x8b633a-EXTRA_LIFE_THRESHOLD_2)%RECURRING_EXTRA_LIFE_INTERVAL===0x0&&_0x210318++;}),_0x5ae9fd=EXTRA_LIFE_THRESHOLD_2+_0x210318*RECURRING_EXTRA_LIFE_INTERVAL;}else{if(_0x39f769===0x1&&_0x1a7f97[_0x5475eb(0x23a)][_0x5475eb(0x135)](EXTRA_LIFE_THRESHOLD_1)&&!_0x1a7f97['thresholdsMet'][_0x5475eb(0x135)](EXTRA_LIFE_THRESHOLD_2))_0x5ae9fd=EXTRA_LIFE_THRESHOLD_2;else _0x39f769===0x1&&_0x1a7f97[_0x5475eb(0x23a)][_0x5475eb(0x135)](EXTRA_LIFE_THRESHOLD_2)&&!_0x1a7f97[_0x5475eb(0x23a)][_0x5475eb(0x135)](EXTRA_LIFE_THRESHOLD_1)&&(_0x5ae9fd=EXTRA_LIFE_THRESHOLD_1);}}}if(_0x5ae9fd!==-0x1&&_0x1a7f97['currentScore']>=_0x5ae9fd&&!_0x1a7f97[_0x5475eb(0x23a)]['has'](_0x5ae9fd)){if(_0x1a7f97['num']===0x1){if(isTwoPlayerMode&&selectedGameMode===_0x5475eb(0x1a7))player1Lives++;else{if(isTwoPlayerMode&&selectedGameMode===_0x5475eb(0x213)&&currentPlayer===0x1)playerLives++;else{if(!isTwoPlayerMode)playerLives++;}}player1Lives=isTwoPlayerMode&&selectedGameMode===_0x5475eb(0x1a7)?player1Lives:isTwoPlayerMode&&selectedGameMode===_0x5475eb(0x213)&&currentPlayer===0x1?playerLives:player1Lives,_0x1a7f97[_0x5475eb(0x125)]=player1Lives;}else{if(_0x1a7f97[_0x5475eb(0x13e)]===0x2){if(isTwoPlayerMode&&selectedGameMode===_0x5475eb(0x1a7))player2Lives++;else{if(isTwoPlayerMode&&selectedGameMode===_0x5475eb(0x213)&&currentPlayer===0x2)playerLives++;}player2Lives=isTwoPlayerMode&&selectedGameMode===_0x5475eb(0x1a7)?player2Lives:isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x2?playerLives:player2Lives,_0x1a7f97['currentLives']=player2Lives;}}_0x1a7f97[_0x5475eb(0x23a)][_0x5475eb(0x122)](_0x5ae9fd),_0x2d7e4a=!![],_0x448d64=!![];}if(!_0x448d64)break;}_0x2d7e4a&&!showExtraLifeMessage&&!showCsBonusScoreMessage&&!showPerfectMessage&&!showCsHitsMessage&&!showCSClearMessage&&!showReadyMessage&&setTimeout(()=>{const _0x3a1ffb=_0x5475eb;if(isInGameState){explosions=[];if(typeof updateExplosions===_0x3a1ffb(0x235))updateExplosions();showExtraLifeMessage=!![],extraLifeMessageStartTime=Date['now'](),playSound(_0x3a1ffb(0x1f5),![],0.5);}},EXPLOSION_DURATION);});}catch(_0x39f9b8){console[_0x2ec47b(0x1cc)](_0x2ec47b(0x241),_0x39f9b8);}}