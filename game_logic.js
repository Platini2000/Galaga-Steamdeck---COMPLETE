const _0x4c0c0a=_0xab6d;(function(_0xdaef6b,_0x557e36){const _0x29461b=_0xab6d,_0x3aaf79=_0xdaef6b();while(!![]){try{const _0x277d4b=parseInt(_0x29461b(0x24c))/0x1+parseInt(_0x29461b(0x254))/0x2+-parseInt(_0x29461b(0x25b))/0x3+-parseInt(_0x29461b(0x251))/0x4+parseInt(_0x29461b(0x1d4))/0x5*(parseInt(_0x29461b(0x250))/0x6)+-parseInt(_0x29461b(0x2b6))/0x7*(parseInt(_0x29461b(0x28e))/0x8)+parseInt(_0x29461b(0x272))/0x9;if(_0x277d4b===_0x557e36)break;else _0x3aaf79['push'](_0x3aaf79['shift']());}catch(_0x1b550a){_0x3aaf79['push'](_0x3aaf79['shift']());}}}(_0x5706,0xc830e));function generateAttackPathInternal(_0x14cad5){const _0x4ba33d=_0xab6d;try{if(!_0x14cad5||!gameCanvas)return[];const _0x2f3384=_0x14cad5[_0x4ba33d(0x274)]===ENEMY3_TYPE?BOSS_WIDTH:_0x14cad5['type']===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x477677=_0x14cad5[_0x4ba33d(0x274)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x14cad5[_0x4ba33d(0x274)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x5d2198=_0x2f3384*0.5,_0x3ff566=gameCanvas['width'],_0x564f87=gameCanvas[_0x4ba33d(0x2de)];let _0x8b51bf=[];const _0x3e5306={'x':_0x14cad5['x'],'y':_0x14cad5['y']},_0x57a638=Math[_0x4ba33d(0x305)](_0x564f87*0.06,_0x477677*1.8),_0x414b82=Math['min'](_0x3ff566*0.04,_0x2f3384*1.2),_0x5a3e00=_0x14cad5['x']+_0x2f3384/0x2<_0x3ff566/0x2?0x1:-0x1,_0x1e4ab6={'x':_0x3e5306['x']-_0x5a3e00*_0x414b82*0.6,'y':_0x3e5306['y']-_0x57a638};_0x1e4ab6['x']=Math[_0x4ba33d(0x2df)](_0x5d2198,Math['min'](_0x3ff566-_0x5d2198-_0x2f3384,_0x1e4ab6['x'])),_0x1e4ab6['y']=Math[_0x4ba33d(0x2df)](_0x5d2198,_0x1e4ab6['y']);const _0x6de365={'x':_0x3e5306['x']+_0x5a3e00*_0x414b82*0.1,'y':_0x3e5306['y']-_0x57a638*1.4},_0x19725c={'x':_0x1e4ab6['x']+_0x5a3e00*_0x414b82*0.3,'y':_0x3e5306['y']-_0x57a638*1.5},_0x103ff7={'p0':_0x3e5306,'p1':_0x6de365,'p2':_0x19725c,'p3':_0x1e4ab6};_0x8b51bf[_0x4ba33d(0x2ae)](_0x103ff7);const _0x3f057e=_0x1e4ab6,_0x213bd4=_0x564f87*0.45,_0x4be63e=_0x3ff566*0.22,_0x3e92d6=_0x564f87*0.28,_0x255668=0.5,_0xd3e258=0.6,_0x2c3bed=_0x564f87*0.85,_0x5194c1=Math['floor'](Math[_0x4ba33d(0x262)]()*0x3);let _0xd25546=[];if(_0x5194c1===0x0){const _0x250bce=_0x213bd4+Math['random']()*_0x564f87*0.1,_0x395cee=_0x4be63e+Math[_0x4ba33d(0x262)]()*_0x3ff566*0.08,_0x25c63a=_0x3e92d6+Math[_0x4ba33d(0x262)]()*_0x564f87*0.08,_0x122072=_0x3f057e['x']+_0x5a3e00*_0x395cee*0.5,_0xbe5ae3=Math[_0x4ba33d(0x305)](_0x2c3bed,_0x3f057e['y']+_0x250bce),_0xc9efd0=_0x122072+_0x5a3e00*_0x395cee*0.5,_0x51d8b2=Math[_0x4ba33d(0x2df)](_0x3f057e['y']+0x14,_0xbe5ae3-_0x25c63a),_0x9693bf=_0xc9efd0-_0x5a3e00*_0x395cee*0.9,_0x2c8b65=Math['max'](_0x3f057e['y']+0x28,_0x51d8b2+_0x25c63a*0.6),_0x2c15c0=_0x9693bf-_0x5a3e00*_0x395cee*0.3,_0x5ebd76=_0x564f87+_0x477677*0x2,_0x1ccb95=Math[_0x4ba33d(0x2df)](_0x5d2198,Math['min'](_0x3ff566-_0x5d2198-_0x2f3384,_0x122072)),_0x3d5b36=Math[_0x4ba33d(0x2df)](_0x5d2198,Math[_0x4ba33d(0x305)](_0x3ff566-_0x5d2198-_0x2f3384,_0xc9efd0)),_0x2e700c=Math['max'](_0x5d2198,Math[_0x4ba33d(0x305)](_0x3ff566-_0x5d2198-_0x2f3384,_0x9693bf)),_0x1a76f5={'x':_0x3f057e['x'],'y':_0x3f057e['y']+_0x250bce*_0xd3e258*0.5},_0x2f0b19={'x':_0x1ccb95-_0x5a3e00*_0x395cee*_0x255668,'y':_0xbe5ae3},_0x3ad30c={'x':_0x1ccb95,'y':_0xbe5ae3},_0x12c489={'x':_0x1ccb95+_0x5a3e00*_0x395cee*_0x255668,'y':_0xbe5ae3},_0x1bbf8d={'x':_0x3d5b36,'y':_0x51d8b2+_0x25c63a*_0xd3e258},_0x298b6e={'x':_0x3d5b36,'y':_0x51d8b2},_0x48552b={'x':_0x3d5b36,'y':_0x51d8b2-_0x25c63a*_0xd3e258*0.5},_0x356b23={'x':_0x2e700c+_0x5a3e00*_0x395cee*_0x255668,'y':_0x2c8b65},_0x382a04={'x':_0x2e700c,'y':_0x2c8b65},_0x3c62eb={'x':_0x382a04['x'],'y':_0x382a04['y']+_0x564f87*0.1},_0x59f038={'x':_0x2c15c0,'y':_0x5ebd76-_0x564f87*0.2},_0x21f288={'x':_0x2c15c0,'y':_0x5ebd76};_0xd25546=[{'p0':_0x3f057e,'p1':_0x1a76f5,'p2':_0x2f0b19,'p3':_0x3ad30c},{'p0':_0x3ad30c,'p1':_0x12c489,'p2':_0x1bbf8d,'p3':_0x298b6e},{'p0':_0x298b6e,'p1':_0x48552b,'p2':_0x356b23,'p3':_0x382a04},{'p0':_0x382a04,'p1':_0x3c62eb,'p2':_0x59f038,'p3':_0x21f288}];}else{if(_0x5194c1===0x1){const _0x2a4e36=_0x213bd4*0.8+Math['random']()*_0x564f87*0.1,_0xc6b3e=_0x4be63e*1.2+Math['random']()*_0x3ff566*0.1,_0x5b3dc1=_0x3e92d6*0.7+Math[_0x4ba33d(0x262)]()*_0x564f87*0.1,_0x13363c=_0x3f057e['x']+_0x5a3e00*_0xc6b3e*0.4,_0x355cac=Math[_0x4ba33d(0x305)](_0x2c3bed-_0x5b3dc1*0.5,_0x3f057e['y']+_0x2a4e36*0.6),_0x120890=_0x13363c+_0x5a3e00*_0xc6b3e*0.6,_0x1f951c=Math[_0x4ba33d(0x305)](_0x2c3bed,_0x355cac+_0x5b3dc1),_0x30b566=_0x120890-_0x5a3e00*_0xc6b3e*0.5,_0x20a62f=_0x564f87+_0x477677*0x2,_0x31aae5=Math['max'](_0x5d2198,Math[_0x4ba33d(0x305)](_0x3ff566-_0x5d2198-_0x2f3384,_0x13363c)),_0x15a55d=Math['max'](_0x5d2198,Math[_0x4ba33d(0x305)](_0x3ff566-_0x5d2198-_0x2f3384,_0x120890)),_0x468325={'x':_0x3f057e['x']-_0x5a3e00*_0xc6b3e*0.1,'y':_0x3f057e['y']+_0x2a4e36*0.3},_0xd89afb={'x':_0x31aae5-_0x5a3e00*_0xc6b3e*_0x255668*0.8,'y':_0x355cac+_0x5b3dc1*_0xd3e258*0.4},_0x16b47e={'x':_0x31aae5,'y':_0x355cac},_0x17064b={'x':_0x31aae5+_0x5a3e00*_0xc6b3e*_0x255668*0.8,'y':_0x355cac-_0x5b3dc1*_0xd3e258*0.4},_0x564202={'x':_0x15a55d+_0x5a3e00*_0xc6b3e*_0x255668*0.6,'y':_0x1f951c+_0x5b3dc1*_0xd3e258*0.5},_0x29a6b8={'x':_0x15a55d,'y':_0x1f951c},_0x37bdd9={'x':_0x15a55d-_0x5a3e00*_0xc6b3e*0.2,'y':_0x1f951c+_0x564f87*0.1},_0x11523e={'x':_0x30b566,'y':_0x20a62f-_0x564f87*0.3},_0x106448={'x':_0x30b566,'y':_0x20a62f};_0xd25546=[{'p0':_0x3f057e,'p1':_0x468325,'p2':_0xd89afb,'p3':_0x16b47e},{'p0':_0x16b47e,'p1':_0x17064b,'p2':_0x564202,'p3':_0x29a6b8},{'p0':_0x29a6b8,'p1':_0x37bdd9,'p2':_0x11523e,'p3':_0x106448}];}else{const _0x3aa875=_0x213bd4*0.6+Math[_0x4ba33d(0x262)]()*_0x564f87*0.05,_0x24b1f4=_0x4be63e*0.7+Math[_0x4ba33d(0x262)]()*_0x3ff566*0.05,_0x94c225=_0x3e92d6*0.6+Math['random']()*_0x564f87*0.05,_0x5d6db6=_0x94c225*1.5,_0x332798=_0x3f057e['x']+_0x5a3e00*_0x24b1f4*0.5,_0x50ad0b=Math[_0x4ba33d(0x305)](_0x2c3bed-_0x5d6db6,_0x3f057e['y']+_0x3aa875),_0x188e93=_0x332798+_0x5a3e00*_0x24b1f4*0.5,_0x294a44=_0x50ad0b+_0x94c225,_0x4eadc8=_0x188e93-_0x5a3e00*_0x24b1f4*0.8,_0x37df7e=Math[_0x4ba33d(0x305)](_0x2c3bed,_0x294a44+_0x5d6db6*0.7),_0x20377b=_0x4eadc8+_0x5a3e00*_0x24b1f4*0.4,_0x231c76=_0x37df7e+_0x94c225*0.8,_0x8743cf=_0x20377b,_0x900e27=_0x564f87+_0x477677*0x2,_0x39730d=Math[_0x4ba33d(0x2df)](_0x5d2198,Math[_0x4ba33d(0x305)](_0x3ff566-_0x5d2198-_0x2f3384,_0x332798)),_0x2540a4=Math[_0x4ba33d(0x2df)](_0x5d2198,Math['min'](_0x3ff566-_0x5d2198-_0x2f3384,_0x188e93)),_0x5f1b8b=Math[_0x4ba33d(0x2df)](_0x5d2198,Math['min'](_0x3ff566-_0x5d2198-_0x2f3384,_0x4eadc8)),_0x1e35bc=Math[_0x4ba33d(0x2df)](_0x5d2198,Math[_0x4ba33d(0x305)](_0x3ff566-_0x5d2198-_0x2f3384,_0x20377b)),_0x25abf3={'x':_0x3f057e['x'],'y':_0x3f057e['y']+_0x3aa875*0.5},_0x1313c1={'x':_0x39730d-_0x5a3e00*_0x24b1f4*_0x255668,'y':_0x50ad0b+_0x94c225*_0xd3e258*0.3},_0x2e1a2f={'x':_0x39730d,'y':_0x50ad0b},_0x2b69ce={'x':_0x39730d+_0x5a3e00*_0x24b1f4*_0x255668,'y':_0x50ad0b-_0x94c225*_0xd3e258*0.3},_0x442477={'x':_0x2540a4+_0x5a3e00*_0x24b1f4*_0x255668,'y':_0x294a44+_0x94c225*_0xd3e258*0.5},_0x1b6f6f={'x':_0x2540a4,'y':_0x294a44},_0x3c90ed={'x':_0x2540a4-_0x5a3e00*_0x24b1f4*_0x255668,'y':_0x294a44-_0x94c225*_0xd3e258*0.5},_0x5c4570={'x':_0x5f1b8b-_0x5a3e00*_0x24b1f4*_0x255668,'y':_0x37df7e+_0x94c225*_0xd3e258*0.4},_0x479ddd={'x':_0x5f1b8b,'y':_0x37df7e},_0x9c0afc={'x':_0x5f1b8b+_0x5a3e00*_0x24b1f4*_0x255668,'y':_0x37df7e-_0x94c225*_0xd3e258*0.4},_0x1be8e7={'x':_0x1e35bc+_0x5a3e00*_0x24b1f4*_0x255668,'y':_0x231c76+_0x94c225*_0xd3e258*0.6},_0x472691={'x':_0x1e35bc,'y':_0x231c76},_0x3827e0={'x':_0x1e35bc-_0x5a3e00*_0x24b1f4*0.1,'y':_0x231c76+_0x564f87*0.05},_0x54fe41={'x':_0x8743cf,'y':_0x900e27-_0x564f87*0.2},_0xe62408={'x':_0x8743cf,'y':_0x900e27};_0xd25546=[{'p0':_0x3f057e,'p1':_0x25abf3,'p2':_0x1313c1,'p3':_0x2e1a2f},{'p0':_0x2e1a2f,'p1':_0x2b69ce,'p2':_0x442477,'p3':_0x1b6f6f},{'p0':_0x1b6f6f,'p1':_0x3c90ed,'p2':_0x5c4570,'p3':_0x479ddd},{'p0':_0x479ddd,'p1':_0x9c0afc,'p2':_0x1be8e7,'p3':_0x472691},{'p0':_0x472691,'p1':_0x3827e0,'p2':_0x54fe41,'p3':_0xe62408}];}}return _0x8b51bf[_0x4ba33d(0x2ae)](..._0xd25546),_0x8b51bf;}catch(_0x5b6967){return console[_0x4ba33d(0x2ec)](_0x4ba33d(0x280)+_0x14cad5?.['id']+':',_0x5b6967),[];}}window['generateAttackPath']=generateAttackPathInternal;function resetAllMessagesInternal(){showReadyMessage=![],isShowingIntro=![],showCsHitsMessage=![],showPerfectMessage=![],showCsBonusScoreMessage=![],showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showExtraLifeMessage=![],isShowingCaptureMessage=![],isShowingPlayerGameOverMessage=![],isShowingCoopPlayersReady=![],csHitsMessageStartTime=0x0,perfectMessageStartTime=0x0,csBonusScoreMessageStartTime=0x0,csClearMessageStartTime=0x0,extraLifeMessageStartTime=0x0,readyMessageStartTime=0x0,captureMessageStartTime=0x0,playerGameOverMessageStartTime=0x0,csCompletionDelayStartTime=0x0,introDisplayStartTime=0x0,coopPlayersReadyStartTime=0x0;}window['resetAllMessages']=resetAllMessagesInternal;function stopAllGameSoundsInternal(){if(typeof soundPaths==='object'&&soundPaths!==null&&typeof stopSound==='function')for(const _0x3af6c1 in soundPaths){stopSound(_0x3af6c1);}isGridSoundPlaying=![];}window[_0x4c0c0a(0x2be)]=stopAllGameSoundsInternal;function resetGameInternal(){const _0x5aaf31=_0x4c0c0a;score=0x0,level=0x1,playerLives=0x3;if(isTwoPlayerMode){player1Lives=0x3,player2Lives=0x3,player1Score=0x0,player2Score=0x0,currentPlayer=0x1,player1CompletedLevel=-0x1,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet['clear']();else player1LifeThresholdsMet=new Set();if(player2LifeThresholdsMet instanceof Set)player2LifeThresholdsMet[_0x5aaf31(0x1ea)]();else player2LifeThresholdsMet=new Set();player1IsDualShipActive=![],player2IsDualShipActive=![],isPlayer1ShipCaptured=![],isPlayer2ShipCaptured=![],isPlayer1WaitingForRespawn=![],isPlayer2WaitingForRespawn=![],isPlayer1Invincible=![],isPlayer2Invincible=![],player1RespawnTime=0x0,player2RespawnTime=0x0,player1InvincibilityEndTime=0x0,player2InvincibilityEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![];if(selectedGameMode===_0x5aaf31(0x235)){playerLives=0x0;if(gameCanvas&&gameCanvas[_0x5aaf31(0x2a8)]>0x0&&gameCanvas['height']>0x0){const _0x3ff083=gameCanvas[_0x5aaf31(0x2a8)]/0x2-gameCanvas[_0x5aaf31(0x2a8)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0xe1a1ce=gameCanvas[_0x5aaf31(0x2a8)]/0x2+gameCanvas[_0x5aaf31(0x2a8)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x19ff58=gameCanvas[_0x5aaf31(0x2de)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;ship1={'x':_0x3ff083,'y':_0x19ff58,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x3ff083,'id':'p1'},ship2={'x':_0xe1a1ce,'y':_0x19ff58,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0xe1a1ce,'id':'p2'},(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5aaf31(0x2fb))&&(smoothedShip1X=_0x3ff083,smoothedShip2X=_0xe1a1ce,aiShip1TargetEnemy=null,aiShip2TargetEnemy=null,aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0,aiShip1LastShotTime=0x0,aiShip2LastShotTime=0x0,aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0);}ship=null;}else{if(!ship&&gameCanvas&&gameCanvas[_0x5aaf31(0x2a8)]>0x0&&gameCanvas[_0x5aaf31(0x2de)]>0x0)ship={'x':Math[_0x5aaf31(0x2f8)](gameCanvas[_0x5aaf31(0x2a8)]/0x2-SHIP_WIDTH/0x2),'y':gameCanvas[_0x5aaf31(0x2de)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':_0x5aaf31(0x1e1)},ship[_0x5aaf31(0x1f9)]=ship['x'];else ship&&gameCanvas&&gameCanvas[_0x5aaf31(0x2a8)]>0x0&&gameCanvas['height']>0x0&&(ship['x']=Math[_0x5aaf31(0x2f8)](gameCanvas[_0x5aaf31(0x2a8)]/0x2-SHIP_WIDTH/0x2),ship[_0x5aaf31(0x1f9)]=ship['x'],ship['y']=gameCanvas[_0x5aaf31(0x2de)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}}else{player1Lives=0x3,player1Score=0x0,player1MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet[_0x5aaf31(0x1ea)]();else player1LifeThresholdsMet=new Set();if(!ship&&gameCanvas&&gameCanvas[_0x5aaf31(0x2a8)]>0x0&&gameCanvas[_0x5aaf31(0x2de)]>0x0)ship={'x':Math[_0x5aaf31(0x2f8)](gameCanvas[_0x5aaf31(0x2a8)]/0x2-SHIP_WIDTH/0x2),'y':gameCanvas[_0x5aaf31(0x2de)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':_0x5aaf31(0x1e1)},ship['targetX']=ship['x'];else ship&&gameCanvas&&gameCanvas[_0x5aaf31(0x2a8)]>0x0&&gameCanvas[_0x5aaf31(0x2de)]>0x0&&(ship['x']=Math[_0x5aaf31(0x2f8)](gameCanvas[_0x5aaf31(0x2a8)]/0x2-SHIP_WIDTH/0x2),ship['targetX']=ship['x'],ship['y']=gameCanvas[_0x5aaf31(0x2de)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,isDualShipActive=![];if(!isTwoPlayerMode)player1IsDualShipActive=![];fallingShips=[],visualOffsetX=-0x14,gameOverSequenceStartTime=0x0,isShowingResultsScreen=![],gameStartTime=Date[_0x5aaf31(0x2ed)](),gameJustStarted=!![],gameJustStartedAndWaveLaunched=![],currentGridOffsetX=0x0,gridMoveDirection=0x1,gridJustCompleted=![],isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,lastGridFireCheckTime=0x0,player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,scoreEarnedThisCS=0x0,challengingStageEnemiesHit=0x0,aiNeedsStabilization=!![],aiStabilizationEndTime=0x0,smoothedShipX=undefined,aiCanShootTime=0x0,aiLastShotTime=0x0,!(selectedGameMode===_0x5aaf31(0x235)&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5aaf31(0x2fb)))&&(aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0),playerLastShotTime=0x0,player1LastShotTime=0x0,player2LastShotTime=0x0,p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],isShowingCoopPlayersReady=![],coopPlayersReadyStartTime=0x0,resetWaveInternal();}window[_0x4c0c0a(0x2c2)]=resetGameInternal;function resetWaveInternal(){const _0x58e5c5=_0x4c0c0a;isWaveTransitioning=![],readyForNextWave=![],readyForNextWaveReset=![],isEntrancePhaseActive=!![],firstEnemyLanded=![],captureAttemptMadeThisLevel=![],gameJustStartedAndWaveLaunched=![],aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![],enemies=[],bullets=[],enemyBullets=[],explosions=[],floatingScores=[],hitSparks=[];Array[_0x58e5c5(0x1cf)](enemySpawnTimeouts)&&enemySpawnTimeouts[_0x58e5c5(0x1cd)](clearTimeout);enemySpawnTimeouts=[],squadronCompletionStatus={},squadronEntranceFiringStatus={},totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;const _0xed0fc=getWaveTypeInternal(level);isChallengingStage=_0xed0fc===_0x58e5c5(0x277),isFullGridWave=_0xed0fc===_0x58e5c5(0x207),challengingStageEnemiesHit=0x0,scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null;(isFullGridWave||isChallengingStage)&&(isEntrancePhaseActive=![]);const _0x123beb=isShowingDemoText;resetAllMessagesInternal();_0x123beb&&(isShowingDemoText=!![]);if(selectedGameMode===_0x58e5c5(0x235)&&level===0x1)isShowingIntro=![],introStep=0x2;else{if(isTwoPlayerMode&&selectedGameMode===_0x58e5c5(0x2f1)||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x58e5c5(0x271)){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(isChallengingStage){introStep=0x3,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(level===0x1&&!isTwoPlayerMode){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{introStep=0x2,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}}}}isShowingIntro&&!(selectedGameMode===_0x58e5c5(0x235)&&level===0x1)&&(introDisplayStartTime=Date[_0x58e5c5(0x2ed)]());playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],currentWaveDefinition=generateWaveDefinitionInternal(level);if(selectedGameMode===_0x58e5c5(0x235)){if(gameCanvas&&gameCanvas[_0x58e5c5(0x2a8)]>0x0&&gameCanvas[_0x58e5c5(0x2de)]>0x0){const _0x30e7e0=ship1&&player1Lives>0x0,_0x2fbf68=ship2&&player2Lives>0x0,_0x569f66=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x58e5c5(0x2fb)){if(_0x30e7e0&&_0x2fbf68){const _0x49cfc2=gameCanvas[_0x58e5c5(0x2a8)]/0x2-gameCanvas[_0x58e5c5(0x2a8)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1&&(ship1[_0x58e5c5(0x1f9)]=_0x49cfc2,ship1['x']=_0x49cfc2,smoothedShip1X=_0x49cfc2,ship1['y']=_0x569f66);const _0x3c79a7=gameCanvas[_0x58e5c5(0x2a8)]/0x2+gameCanvas[_0x58e5c5(0x2a8)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2[_0x58e5c5(0x1f9)]=_0x3c79a7,ship2['x']=_0x3c79a7,smoothedShip2X=_0x3c79a7,ship2['y']=_0x569f66);}else{if(_0x30e7e0&&ship1){const _0x2a9428=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x5333ed=Math[_0x58e5c5(0x2f8)](gameCanvas[_0x58e5c5(0x2a8)]/0x2-_0x2a9428/0x2);ship1[_0x58e5c5(0x1f9)]=_0x5333ed,ship1['x']=_0x5333ed,smoothedShip1X=_0x5333ed,ship1['y']=_0x569f66;}else{if(_0x2fbf68&&ship2){const _0x2bcb70=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x3394dd=Math[_0x58e5c5(0x2f8)](gameCanvas['width']/0x2-_0x2bcb70/0x2);ship2['targetX']=_0x3394dd,ship2['x']=_0x3394dd,smoothedShip2X=_0x3394dd,ship2['y']=_0x569f66;}}}}else{if(_0x30e7e0&&ship1)ship1['y']=_0x569f66;if(_0x2fbf68&&ship2)ship2['y']=_0x569f66;}}}else{if(ship&&gameCanvas&&gameCanvas[_0x58e5c5(0x2a8)]>0x0&&gameCanvas[_0x58e5c5(0x2de)]>0x0&&(forceCenterShipNextReset||!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x58e5c5(0x2f1)&&currentPlayer===0x2)){let _0x28c213=ship[_0x58e5c5(0x2a8)];if(isDualShipActive)_0x28c213=DUAL_SHIP_OFFSET_X+SHIP_WIDTH;ship['x']=Math[_0x58e5c5(0x2f8)](gameCanvas[_0x58e5c5(0x2a8)]/0x2-_0x28c213/0x2),ship[_0x58e5c5(0x1f9)]=ship['x'],ship['y']=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(isPlayerTwoAI&&selectedGameMode===_0x58e5c5(0x2f1)&&currentPlayer===0x2)smoothedShipX=ship['x'];}else ship&&gameCanvas&&gameCanvas[_0x58e5c5(0x2a8)]>0x0&&(ship['y']=gameCanvas[_0x58e5c5(0x2de)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);}forceCenterShipNextReset=![];if(!isManualControl&&aiNeedsStabilization&&selectedGameMode!==_0x58e5c5(0x235)&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)){aiStabilizationEndTime=Date['now']()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}else{if(isPlayerTwoAI&&selectedGameMode===_0x58e5c5(0x2f1)&&currentPlayer===0x2&&aiNeedsStabilization){aiStabilizationEndTime=Date[_0x58e5c5(0x2ed)]()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}}}window[_0x4c0c0a(0x20b)]=resetWaveInternal;function getWaveTypeInternal(_0x541920){const _0x380e70=_0x4c0c0a,_0xa92b10=(_0x541920-0x1)%0x4;switch(_0xa92b10){case 0x0:return _0x380e70(0x207);case 0x1:return _0x380e70(0x248);case 0x2:return _0x380e70(0x277);case 0x3:return'entrance_flight_2';default:return _0x380e70(0x230);}}window['getWaveType']=getWaveTypeInternal;function generateWaveDefinitionInternal(_0xa0e487){const _0x4094d6=_0x4c0c0a;let _0x442b73=[];currentWavePatternIndex=-0x1;const _0x39e770=getWaveTypeInternal(_0xa0e487);if(typeof waveEntrancePatterns===_0x4094d6(0x226)||!Array[_0x4094d6(0x1cf)](waveEntrancePatterns)||waveEntrancePatterns[_0x4094d6(0x1e6)]<0x2)return[];if(_0x39e770===_0x4094d6(0x277))_0x442b73=[];else{if(_0x39e770===_0x4094d6(0x207)){currentWavePatternIndex=0x0;const _0x1d2510=waveEntrancePatterns[0x0];if(!_0x1d2510||_0x1d2510['length']===0x0)_0x442b73=[];else try{_0x442b73=JSON[_0x4094d6(0x21f)](JSON[_0x4094d6(0x1fa)](_0x1d2510),(_0x10d305,_0x292c45)=>{const _0x171bf2=_0x4094d6;return _0x292c45&&typeof _0x292c45===_0x171bf2(0x29a)&&_0x292c45[_0x171bf2(0x274)]===ENEMY3_TYPE&&typeof _0x292c45[_0x171bf2(0x1dc)]===_0x171bf2(0x226)&&(_0x292c45[_0x171bf2(0x1dc)]=![]),_0x292c45;});}catch(_0x5df7e0){_0x442b73=[];}}else{if(_0x39e770==='entrance_flight_1'){currentWavePatternIndex=0x0;const _0x1a1a30=waveEntrancePatterns[0x0];if(!_0x1a1a30||_0x1a1a30[_0x4094d6(0x1e6)]===0x0)_0x442b73=[];else try{_0x442b73=JSON[_0x4094d6(0x21f)](JSON[_0x4094d6(0x1fa)](_0x1a1a30),(_0x20e1db,_0x2b1add)=>{const _0x1a807f=_0x4094d6;return _0x2b1add&&typeof _0x2b1add===_0x1a807f(0x29a)&&_0x2b1add['type']===ENEMY3_TYPE&&typeof _0x2b1add['hasCapturedShip']===_0x1a807f(0x226)&&(_0x2b1add[_0x1a807f(0x1dc)]=![]),_0x2b1add;});}catch(_0x13e973){_0x442b73=[];}}else{if(_0x39e770==='entrance_flight_2'){currentWavePatternIndex=0x1;const _0xcc44d6=waveEntrancePatterns[0x1];if(!_0xcc44d6||_0xcc44d6[_0x4094d6(0x1e6)]===0x0)_0x442b73=[];else try{_0x442b73=JSON[_0x4094d6(0x21f)](JSON[_0x4094d6(0x1fa)](_0xcc44d6),(_0xdd5bff,_0x394853)=>{const _0x597023=_0x4094d6;return _0x394853&&typeof _0x394853==='object'&&_0x394853[_0x597023(0x274)]===ENEMY3_TYPE&&typeof _0x394853[_0x597023(0x1dc)]===_0x597023(0x226)&&(_0x394853[_0x597023(0x1dc)]=![]),_0x394853;});}catch(_0x6343ef){_0x442b73=[];}}else _0x442b73=[];}}}if(_0x39e770!==_0x4094d6(0x277)){if(typeof normalWaveEntrancePaths===_0x4094d6(0x226)||Object[_0x4094d6(0x26c)](normalWaveEntrancePaths)[_0x4094d6(0x1e6)]===0x0)return _0x442b73;for(let _0xb2abf1=_0x442b73['length']-0x1;_0xb2abf1>=0x0;_0xb2abf1--){const _0x4b18f7=_0x442b73[_0xb2abf1];if(!normalWaveEntrancePaths?.[_0x4b18f7[_0x4094d6(0x2c7)]]){_0x442b73[_0x4094d6(0x1fd)](_0xb2abf1,0x1);continue;}if(_0x4b18f7['enemies']&&Array[_0x4094d6(0x1cf)](_0x4b18f7[_0x4094d6(0x2e8)])){for(let _0x28bc0f=_0x4b18f7[_0x4094d6(0x2e8)]['length']-0x1;_0x28bc0f>=0x0;_0x28bc0f--){const _0x5e5ab2=_0x4b18f7[_0x4094d6(0x2e8)][_0x28bc0f];(!_0x5e5ab2||!normalWaveEntrancePaths?.[_0x5e5ab2['entrancePathId']])&&_0x4b18f7[_0x4094d6(0x2e8)]['splice'](_0x28bc0f,0x1),_0x5e5ab2&&_0x5e5ab2[_0x4094d6(0x274)]===ENEMY3_TYPE&&typeof _0x5e5ab2['hasCapturedShip']==='undefined'&&(_0x5e5ab2[_0x4094d6(0x1dc)]=![]);}_0x4b18f7[_0x4094d6(0x2e8)][_0x4094d6(0x1e6)]===0x0&&_0x442b73[_0x4094d6(0x1fd)](_0xb2abf1,0x1);}else _0x442b73[_0x4094d6(0x1fd)](_0xb2abf1,0x1);}}return _0x442b73;}window[_0x4c0c0a(0x1d0)]=generateWaveDefinitionInternal;const createBulletSimple=(_0x167a56,_0x5c810d=null)=>{const _0x4c0a98=_0x4c0c0a;let _0x24285b=null,_0x50ad1c=![];if(isTwoPlayerMode&&selectedGameMode===_0x4c0a98(0x235)){const _0x3bcbeb=ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured,_0x25ebff=ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured;if(_0x3bcbeb&&_0x25ebff)_0x24285b=Math[_0x4c0a98(0x262)]()<0.5?ship1:ship2,_0x50ad1c=!![];else{if(_0x3bcbeb)_0x24285b=ship1,_0x50ad1c=!![];else _0x25ebff&&(_0x24285b=ship2,_0x50ad1c=!![]);}}else ship&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn&&(_0x24285b=ship,_0x50ad1c=!![]);if(!_0x167a56||!isInGameState||!_0x50ad1c||!_0x24285b)return![];const _0x379af0=scaleValue(level,BASE_ENEMY_BULLET_SPEED,MAX_ENEMY_BULLET_SPEED),_0x32bc0e=_0x5c810d?_0x5c810d['x']:_0x167a56['x']+_0x167a56[_0x4c0a98(0x2a8)]/0x2,_0x1dfaeb=_0x5c810d?_0x5c810d['y']:_0x167a56['y']+_0x167a56[_0x4c0a98(0x2de)]/0x2;let _0x3b5f7f=0x0,_0x42f00d=_0x379af0;const _0x2ef0c1=_0x24285b['x']+_0x24285b[_0x4c0a98(0x2a8)]/0x2-_0x32bc0e,_0x4199ae=_0x24285b['y']+_0x24285b[_0x4c0a98(0x2de)]/0x2-_0x1dfaeb,_0x301bd7=Math[_0x4c0a98(0x209)](_0x2ef0c1*_0x2ef0c1+_0x4199ae*_0x4199ae);if(_0x301bd7>0x0){let _0x247740=0x0;!isChallengingStage&&(_0x247740=scaleValue(level,BASE_ENEMY_AIM_FACTOR,MAX_ENEMY_AIM_FACTOR));let _0x4c060e=Math[_0x4c0a98(0x1ef)](_0x4199ae,_0x2ef0c1);_0x3b5f7f=Math[_0x4c0a98(0x2a4)](_0x4c060e)*_0x379af0*_0x247740,_0x42f00d=Math[_0x4c0a98(0x209)](_0x379af0**0x2-_0x3b5f7f**0x2),_0x42f00d=Math['max'](_0x379af0*(0x1-_0x247740)*0.5,_0x42f00d);if(_0x4199ae<0x0&&_0x42f00d>0x0){}if(_0x4199ae<0x0)_0x42f00d=Math[_0x4c0a98(0x1fc)](_0x42f00d);return enemyBullets[_0x4c0a98(0x2ae)]({'x':_0x32bc0e-ENEMY_BULLET_WIDTH/0x2,'y':_0x1dfaeb,'width':ENEMY_BULLET_WIDTH,'height':ENEMY_BULLET_HEIGHT,'vx':_0x3b5f7f,'vy':_0x42f00d,'type':_0x167a56[_0x4c0a98(0x274)]}),!![];}return![];};function scheduleSingleEntranceSquadron(_0x57a2fd,_0x525466,_0xa70569){const _0x35a909=_0x4c0c0a;if(isFullGridWave||isChallengingStage)return console[_0x35a909(0x2b0)]('[scheduleSingleEntranceSquadron]\x20Called\x20inappropriately\x20for\x20non-entrance\x20wave\x20type\x20(Level\x20'+level+',\x20isFullGrid:\x20'+isFullGridWave+_0x35a909(0x2c6)+isChallengingStage+_0x35a909(0x21a)),_0x57a2fd?.[_0x35a909(0x2e8)]?.[_0x35a909(0x1e6)]>0x0&&(enemiesSpawnedThisWave+=_0x57a2fd['enemies'][_0x35a909(0x1e6)],squadronCompletionStatus[_0x525466]&&(squadronCompletionStatus[_0x525466][_0x35a909(0x300)]=squadronCompletionStatus[_0x525466][_0x35a909(0x221)])),![];const _0x173cb5=normalWaveEntrancePaths,_0xf166c5=_0x57a2fd['pathId'],_0x5421f2=_0x173cb5[_0xf166c5];if(!_0x5421f2||_0x5421f2[_0x35a909(0x1e6)]===0x0)return console[_0x35a909(0x2ec)](_0x35a909(0x26f)+_0xf166c5+'\x20for\x20squadron\x20'+_0x525466+'\x20invalid!\x20Skipping\x20squadron.'),_0x57a2fd?.[_0x35a909(0x2e8)]?.[_0x35a909(0x1e6)]>0x0&&(enemiesSpawnedThisWave+=_0x57a2fd[_0x35a909(0x2e8)]['length'],squadronCompletionStatus[_0x525466]&&(squadronCompletionStatus[_0x525466]['completed']=squadronCompletionStatus[_0x525466][_0x35a909(0x221)])),![];const _0x2c2ad1=setTimeout(()=>{const _0x50c713=_0x35a909,_0x2801b3=enemySpawnTimeouts[_0x50c713(0x279)](_0x2c2ad1);if(_0x2801b3>-0x1)enemySpawnTimeouts['splice'](_0x2801b3,0x1);let _0x450c71=![];isTwoPlayerMode&&selectedGameMode===_0x50c713(0x235)?_0x450c71=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x450c71=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0x450c71||isFullGridWave){_0x57a2fd?.['enemies']?.[_0x50c713(0x1e6)]>0x0&&(enemiesSpawnedThisWave+=_0x57a2fd[_0x50c713(0x2e8)][_0x50c713(0x1e6)],squadronCompletionStatus[_0x525466]&&(squadronCompletionStatus[_0x525466][_0x50c713(0x300)]=squadronCompletionStatus[_0x525466][_0x50c713(0x221)]));return;}try{squadronEntranceFiringStatus[_0x525466]?(squadronEntranceFiringStatus[_0x525466]['scheduledStartTime']=Date[_0x50c713(0x2ed)]()+_0xa70569,squadronEntranceFiringStatus[_0x525466][_0x50c713(0x215)]=![]):(console[_0x50c713(0x2b0)](_0x50c713(0x20f)+_0x525466+_0x50c713(0x25c)),squadronEntranceFiringStatus[_0x525466]={'hasFired':![],'scheduledStartTime':Date[_0x50c713(0x2ed)]()+_0xa70569});const _0x143c87=ENEMY_SPAWN_DELAY_IN_SQUADRON,_0x665d52=_0x143c87*0x2,_0x1bc883=0x1;_0x57a2fd['enemies'][_0x50c713(0x1cd)]((_0x24542a,_0x42aea7)=>{const _0x24edb5=_0x50c713;if(!_0x24542a||!_0x24542a['type']||typeof _0x24542a[_0x24edb5(0x26d)]===_0x24edb5(0x226)||typeof _0x24542a[_0x24edb5(0x28a)]==='undefined'||!_0x24542a[_0x24edb5(0x27e)]){console[_0x24edb5(0x2ec)](_0x24edb5(0x2ac)+_0x525466+_0x24edb5(0x2a9)+_0xf166c5+_0x24edb5(0x2c5)+_0x42aea7+_0x24edb5(0x1e3)),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x525466]&&squadronCompletionStatus[_0x525466][_0x24edb5(0x300)]++;return;}const _0x4f74be=_0x173cb5[_0x24542a[_0x24edb5(0x27e)]];(!_0x4f74be||_0x4f74be['length']===0x0)&&console[_0x24edb5(0x2b0)](_0x24edb5(0x2da)+_0x24542a[_0x24edb5(0x27e)]+_0x24edb5(0x2ea)+_0x525466+_0x24edb5(0x253)+_0x42aea7+_0x24edb5(0x2af)+_0xf166c5+'\x22.');let _0x20b3a0=0x0;const _0xa97700=getWaveType(level),_0x34b630=_0xa97700===_0x24edb5(0x2ee)&&(_0x525466===0x2||_0x525466===0x3);if(_0x34b630){const _0x20f6c3=Math['floor'](_0x42aea7/0x2);_0x42aea7%0x2===0x0?_0x20b3a0=_0x20f6c3*_0x665d52:_0x20b3a0=_0x20f6c3*_0x665d52+_0x1bc883;}else _0x20b3a0=_0x42aea7*ENEMY_SPAWN_DELAY_IN_SQUADRON;const _0x2d6899=setTimeout(()=>{const _0x47cb6c=_0x24edb5,_0x260193=enemySpawnTimeouts[_0x47cb6c(0x279)](_0x2d6899);if(_0x260193>-0x1)enemySpawnTimeouts[_0x47cb6c(0x1fd)](_0x260193,0x1);let _0x11513e=![];isTwoPlayerMode&&selectedGameMode===_0x47cb6c(0x235)?_0x11513e=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x11513e=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0x11513e||isFullGridWave){enemiesSpawnedThisWave++;squadronCompletionStatus[_0x525466]&&squadronCompletionStatus[_0x525466][_0x47cb6c(0x300)]++;return;}try{let _0xec9eab=_0x24542a['type'],_0x9c4288=_0xec9eab===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x2b87a8,_0x280535;if(_0xec9eab===ENEMY1_TYPE)_0x2b87a8=ENEMY1_WIDTH,_0x280535=ENEMY1_HEIGHT;else _0xec9eab===ENEMY3_TYPE?(_0x2b87a8=BOSS_WIDTH,_0x280535=BOSS_HEIGHT):(_0x2b87a8=ENEMY_WIDTH,_0x280535=ENEMY_HEIGHT);let _0x3b3365=0x0,_0x3fcdec=0x0;if(_0x5421f2&&_0x5421f2[0x0]?.['p0'])_0x3b3365=_0x5421f2[0x0]['p0']['x'],_0x3fcdec=_0x5421f2[0x0]['p0']['y'];else throw new Error(_0x47cb6c(0x22e)+_0xf166c5);let _0x5dbecf,_0x1ddc58;try{const {x:_0x5cf7ba,y:_0x1fe7b7}=getCurrentGridSlotPosition(_0x24542a[_0x47cb6c(0x26d)],_0x24542a[_0x47cb6c(0x28a)],_0x2b87a8);_0x5dbecf=_0x5cf7ba,_0x1ddc58=_0x1fe7b7;}catch(_0x2989cc){console['error']('Error\x20getting\x20target\x20grid\x20pos\x20for\x20new\x20enemy\x20'+_0x24542a['type']+_0x47cb6c(0x1f7)+_0x24542a[_0x47cb6c(0x26d)]+','+_0x24542a[_0x47cb6c(0x28a)]+']',_0x2989cc),_0x5dbecf=gameCanvas?.[_0x47cb6c(0x2a8)]/0x2||0xc8,_0x1ddc58=ENEMY_TOP_MARGIN+_0x24542a[_0x47cb6c(0x26d)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}let _0x456867=0x0;const _0x863868=_0x34b630,_0x292810=_0x863868&&_0x42aea7%0x2!==0x0;_0x292810?_0x456867=-ENTRANCE_PAIR_PATH_T_OFFSET:_0x456867=-_0x42aea7*PATH_T_OFFSET_PER_ENEMY;const _0x3dec5c={'x':_0x3b3365,'y':_0x3fcdec,'width':_0x2b87a8,'height':_0x280535,'targetGridX':_0x5dbecf,'targetGridY':_0x1ddc58,'speed':0x0,'state':_0x47cb6c(0x291),'gridRow':_0x24542a['gridRow'],'gridCol':_0x24542a['gridCol'],'type':_0xec9eab,'health':_0x9c4288,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0xf166c5,'pathSegmentIndex':0x0,'pathT':_0x456867,'squadronId':_0x525466,'squadronEnemyIndex':_0x42aea7,'id':_0x47cb6c(0x26a)+_0x525466+'-'+_0x42aea7+'-'+Date['now']()+'-'+Math[_0x47cb6c(0x262)]()['toString'](0x24)['substring'](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x47cb6c(0x2f1),'hasCapturedShip':_0xec9eab===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0xec9eab===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies['push'](_0x3dec5c),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x525466]&&squadronCompletionStatus[_0x525466][_0x47cb6c(0x300)]++;if(_0x42aea7===0x0){let _0x5db273=0x5dc;(_0x525466===0x0||_0x525466===0x1)&&(_0x5db273=0xfa);const _0x466a89=_0x3dec5c['id'],_0x5898b8=setTimeout(()=>{const _0x5b59e2=_0x47cb6c,_0x41354f=enemySpawnTimeouts['indexOf'](_0x5898b8);if(_0x41354f>-0x1)enemySpawnTimeouts[_0x5b59e2(0x1fd)](_0x41354f,0x1);let _0x3ac454=![];isTwoPlayerMode&&selectedGameMode===_0x5b59e2(0x235)?_0x3ac454=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x3ac454=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x3ac454||isChallengingStage||isWaveTransitioning||isFullGridWave)return;fireFixedEnemyBurst(_0x466a89,null,0x0,0x3);},_0x5db273);enemySpawnTimeouts[_0x47cb6c(0x2ae)](_0x5898b8);}}catch(_0x20ef02){console[_0x47cb6c(0x2ec)]('Entrance\x20Wave:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20'+_0x525466+_0x47cb6c(0x2a6)+_0x42aea7+_0x47cb6c(0x2e4)+_0xf166c5+'):',_0x20ef02),enemiesSpawnedThisWave++,squadronCompletionStatus[_0x525466]&&squadronCompletionStatus[_0x525466][_0x47cb6c(0x300)]++;}},_0x20b3a0);enemySpawnTimeouts[_0x24edb5(0x2ae)](_0x2d6899);});}catch(_0x56be79){console[_0x50c713(0x2ec)]('Entrance\x20Wave:\x20Error\x20processing\x20enemies\x20for\x20squadron\x20'+_0x525466+_0x50c713(0x2a9)+_0xf166c5+'):',_0x56be79),_0x57a2fd?.[_0x50c713(0x2e8)]?.[_0x50c713(0x1e6)]>0x0&&(enemiesSpawnedThisWave+=_0x57a2fd[_0x50c713(0x2e8)][_0x50c713(0x1e6)],squadronCompletionStatus[_0x525466]&&(squadronCompletionStatus[_0x525466]['completed']=squadronCompletionStatus[_0x525466][_0x50c713(0x221)]));}},_0xa70569);return enemySpawnTimeouts[_0x35a909(0x2ae)](_0x2c2ad1),!![];};function scheduleEntranceFlightWave(){const _0x4cc4cd=_0x4c0c0a;if(isFullGridWave||isChallengingStage||!currentWaveDefinition||currentWaveDefinition[_0x4cc4cd(0x1e6)]===0x0){console[_0x4cc4cd(0x2b0)]('[scheduleEntranceFlightWave]\x20Called\x20inappropriately\x20or\x20with\x20no\x20definition.\x20Level\x20'+level+',\x20isFullGrid:\x20'+isFullGridWave+_0x4cc4cd(0x2c6)+isChallengingStage+',\x20def\x20length:\x20'+currentWaveDefinition?.[_0x4cc4cd(0x1e6)]),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x2df0a5=0x0,_0x3ce391=0x0;currentWaveDefinition['forEach']((_0x2fe157,_0x1ea50d)=>{const _0x57da79=_0x4cc4cd;_0x2fe157&&_0x2fe157['enemies']&&Array[_0x57da79(0x1cf)](_0x2fe157[_0x57da79(0x2e8)])&&_0x2fe157[_0x57da79(0x2e8)][_0x57da79(0x1e6)]>0x0?(totalEnemiesScheduledForWave+=_0x2fe157[_0x57da79(0x2e8)][_0x57da79(0x1e6)],squadronCompletionStatus[_0x1ea50d]={'completed':0x0,'total':_0x2fe157[_0x57da79(0x2e8)][_0x57da79(0x1e6)],'hasFiredPostLanding':![]},squadronEntranceFiringStatus[_0x1ea50d]={'hasFired':![],'scheduledStartTime':0x0},scheduleSingleEntranceSquadron(_0x2fe157,_0x1ea50d,_0x2df0a5)&&_0x3ce391++,_0x2df0a5+=NORMAL_WAVE_SQUADRON_INTERVAL):console[_0x57da79(0x2b0)]('Entrance\x20Wave:\x20Squadron\x20'+_0x1ea50d+_0x57da79(0x2ce));}),_0x3ce391===0x0&&totalEnemiesScheduledForWave===0x0?(console['warn'](_0x4cc4cd(0x2d2)+level+'.\x20Transitioning.'),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![]):isEntrancePhaseActive=!![];}function startChallengingStageSequence(){const _0x278bbf=_0x4c0c0a;currentWaveDefinition=[],isEntrancePhaseActive=![],enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronEntranceFiringStatus={};Object[_0x278bbf(0x26c)](challengingStagePaths)['length']===0x0&&defineChallengingStagePaths();if(Object[_0x278bbf(0x26c)](challengingStagePaths)[_0x278bbf(0x1e6)]===0x0){console[_0x278bbf(0x2ec)](_0x278bbf(0x2e0)),isWaveTransitioning=!![],setTimeout(()=>{const _0x5da0e9=_0x278bbf;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode==='coop'&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x5da0e9(0x298)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}const _0x1c1fa1=['CS3_DiveLoopL_Sharp',_0x278bbf(0x2a7),_0x278bbf(0x2d3),_0x278bbf(0x236)],_0x4b2532=['CS_LoopAttack_TL',_0x278bbf(0x1f0),_0x278bbf(0x26b),_0x278bbf(0x283)],_0x19e8a5=[..._0x1c1fa1,..._0x4b2532];for(const _0x53c2c6 of _0x19e8a5){if(!challengingStagePaths[_0x278bbf(0x23a)](_0x53c2c6)){console['error'](_0x278bbf(0x1ce)+_0x53c2c6+_0x278bbf(0x282)),isWaveTransitioning=!![],setTimeout(()=>{const _0x25f962=_0x278bbf;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x25f962(0x235)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x25f962(0x298)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}}let _0x249db7=[..._0x1c1fa1],_0x5f5619=[..._0x4b2532]['sort'](()=>Math['random']()-0.5);_0x249db7[_0x278bbf(0x2ae)](..._0x5f5619),currentWaveDefinition=[];for(let _0x45bb75=0x0;_0x45bb75<CHALLENGING_STAGE_SQUADRON_COUNT;_0x45bb75++){const _0x5fe245=_0x249db7[_0x45bb75],_0x5eae49={'pathId':_0x5fe245,'enemies':[]};for(let _0x4293c9=0x0;_0x4293c9<CHALLENGING_STAGE_SQUADRON_SIZE;_0x4293c9++){let _0x47bff9=_0x4293c9<Math[_0x278bbf(0x1fe)](CHALLENGING_STAGE_SQUADRON_SIZE/0x2)?ENEMY1_TYPE:ENEMY2_TYPE;_0x5eae49[_0x278bbf(0x2e8)][_0x278bbf(0x2ae)]({'type':_0x47bff9,'entrancePathId':_0x5fe245});}currentWaveDefinition[_0x278bbf(0x2ae)](_0x5eae49);}challengingStageTotalEnemies=CHALLENGING_STAGE_ENEMY_COUNT,totalEnemiesScheduledForWave=challengingStageTotalEnemies,enemiesSpawnedThisWave=0x0;if(currentWaveDefinition[_0x278bbf(0x1e6)]>0x0){isEntrancePhaseActive=!![],enemySpawnTimeouts=[];let _0x2f88d1=0x0;const _0x37bcfa=-0x1c,_0x278e94=Math[_0x278bbf(0x1fe)](Math[_0x278bbf(0x2df)](0x0,level-0x3)/0x4)+0x1,_0x152d0a=scaleValue(_0x278e94,BASE_CS_SPEED_MULTIPLIER,MAX_CS_SPEED_MULTIPLIER);currentWaveDefinition[_0x278bbf(0x1cd)]((_0x4a671f,_0x5dc273)=>{const _0x437af9=_0x278bbf;let _0x5aa174=0x0;if(_0x5dc273<=0x1)_0x5aa174=0x0;else _0x5dc273<=0x3?_0x5aa174=CHALLENGING_STAGE_SQUADRON_INTERVAL:_0x5aa174=(_0x5dc273-0x2)*CHALLENGING_STAGE_SQUADRON_INTERVAL;let _0x9aa40c=_0x152d0a;(_0x5dc273===0x2||_0x5dc273===0x3)&&(_0x9aa40c*=CS_HORIZONTAL_FLYBY_SPEED_FACTOR);const _0x41cfc3=setTimeout(()=>{const _0x47f480=_0xab6d,_0x1f55e2=enemySpawnTimeouts[_0x47f480(0x279)](_0x41cfc3);if(_0x1f55e2>-0x1)enemySpawnTimeouts['splice'](_0x1f55e2,0x1);let _0x3e4544=![];isTwoPlayerMode&&selectedGameMode===_0x47f480(0x235)?_0x3e4544=player1Lives>0x0||player2Lives>0x0:_0x3e4544=playerLives>0x0;if(!isPaused&&isInGameState&&isEntrancePhaseActive&&isChallengingStage&&!isWaveTransitioning&&_0x3e4544)try{const _0x206864=_0x4a671f[_0x47f480(0x2c7)],_0x142832=challengingStagePaths,_0x13c590=_0x142832[_0x206864];if(!_0x13c590||_0x13c590[_0x47f480(0x1e6)]===0x0){console[_0x47f480(0x2ec)](_0x47f480(0x23b)+_0x206864+'\x20for\x20squadron\x20'+_0x5dc273+_0x47f480(0x29f)),enemiesSpawnedThisWave+=_0x4a671f['enemies']['length'];return;}let _0x550ad9=CS_ENEMY_SPAWN_DELAY_IN_SQUADRON;if(_0x5dc273>=0x2&&_0x5dc273<=0x3)_0x550ad9=CS_HORIZONTAL_FLYBY_SPAWN_DELAY;else _0x5dc273>=0x4&&(_0x550ad9=CS_LOOP_ATTACK_SPAWN_DELAY);_0x4a671f[_0x47f480(0x2e8)][_0x47f480(0x1cd)]((_0x2b4b22,_0x4cb28f)=>{const _0x254dfa=_0x47f480;if(!_0x2b4b22||!_0x2b4b22[_0x254dfa(0x274)]){console[_0x254dfa(0x2ec)]('CS:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20'+_0x5dc273+_0x254dfa(0x253)+_0x4cb28f+'.\x20Skipping.'),enemiesSpawnedThisWave++;return;}const _0x114adc=_0x4cb28f*_0x550ad9,_0x45aad8=setTimeout(()=>{const _0x17ad5d=_0x254dfa,_0x49e125=enemySpawnTimeouts['indexOf'](_0x45aad8);if(_0x49e125>-0x1)enemySpawnTimeouts['splice'](_0x49e125,0x1);let _0x2afa98=![];isTwoPlayerMode&&selectedGameMode===_0x17ad5d(0x235)?_0x2afa98=player1Lives>0x0||player2Lives>0x0:_0x2afa98=playerLives>0x0;if(isPaused||!isInGameState||!isEntrancePhaseActive||!isChallengingStage||isWaveTransitioning||!_0x2afa98){enemiesSpawnedThisWave++;return;}try{let _0x3b8e2a=_0x2b4b22[_0x17ad5d(0x274)],_0x591b7d=_0x3b8e2a===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x50eeee,_0x2e85b7;if(_0x3b8e2a===ENEMY1_TYPE)_0x50eeee=ENEMY1_WIDTH,_0x2e85b7=ENEMY1_HEIGHT;else _0x3b8e2a===ENEMY3_TYPE?(_0x50eeee=BOSS_WIDTH,_0x2e85b7=BOSS_HEIGHT):(_0x50eeee=ENEMY_WIDTH,_0x2e85b7=ENEMY_HEIGHT);let _0xffef8=0x0,_0x1a8c97=0x0;if(_0x13c590[0x0]?.['p0'])_0xffef8=_0x13c590[0x0]['p0']['x'],_0x1a8c97=_0x13c590[0x0]['p0']['y'];else throw new Error(_0x17ad5d(0x213)+_0x206864);(_0x5dc273===0x0||_0x5dc273===0x1)&&(_0xffef8+=_0x37bcfa);const _0x1468d6=-_0x4cb28f*PATH_T_OFFSET_PER_ENEMY,_0xcf814d={'x':_0xffef8,'y':_0x1a8c97,'width':_0x50eeee,'height':_0x2e85b7,'targetGridX':0x0,'targetGridY':0x0,'speed':0x0,'state':'following_bezier_path','gridRow':-0x1,'gridCol':-0x1,'type':_0x3b8e2a,'health':_0x591b7d,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x206864,'pathSegmentIndex':0x0,'pathT':_0x1468d6,'squadronId':_0x5dc273,'id':'enemy-cs-'+_0x5dc273+'-'+_0x4cb28f+'-'+Date['now']()+'-'+Math['random']()[_0x17ad5d(0x268)](0x24)[_0x17ad5d(0x295)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x17ad5d(0x2f1),'hasCapturedShip':_0x3b8e2a===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x3b8e2a===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':_0x9aa40c};enemies['push'](_0xcf814d),enemiesSpawnedThisWave++;}catch(_0x16ba56){console[_0x17ad5d(0x2ec)](_0x17ad5d(0x2e2)+_0x5dc273+_0x17ad5d(0x2a6)+_0x4cb28f+_0x17ad5d(0x2e4)+_0x206864+'):',_0x16ba56),enemiesSpawnedThisWave++;}},_0x114adc);enemySpawnTimeouts['push'](_0x45aad8),_0x2f88d1++;});}catch(_0x10aa6a){console[_0x47f480(0x2ec)](_0x47f480(0x1e5)+_0x5dc273+':',_0x10aa6a),enemiesSpawnedThisWave+=_0x4a671f['enemies'][_0x47f480(0x1e6)];}else _0x4a671f?.[_0x47f480(0x2e8)]?.[_0x47f480(0x1e6)]>0x0&&(enemiesSpawnedThisWave+=_0x4a671f[_0x47f480(0x2e8)][_0x47f480(0x1e6)]);},_0x5aa174);enemySpawnTimeouts[_0x437af9(0x2ae)](_0x41cfc3);});}else console['warn']('CS:\x20No\x20squadrons\x20generated.\x20Skipping\x20CS\x20sequence.'),isWaveTransitioning=!![],setTimeout(()=>{const _0x3170ab=_0x278bbf;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x3170ab(0x235)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x3170ab(0x298)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);}function fireEnemyBurst(_0x1dcafb,_0x4b1273,_0x256d61){const _0x4d253a=_0x4c0c0a;let _0x96d413=![];isTwoPlayerMode&&selectedGameMode===_0x4d253a(0x235)?_0x96d413=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x96d413=playerLives>0x0&&!isShipCaptured;if(!_0x1dcafb||isPaused||!isInGameState||!_0x96d413||isChallengingStage||isWaveTransitioning)return;const _0x24efc5=Math[_0x4d253a(0x2f8)](scaleValue(level,BASE_ENEMY_BULLET_BURST_COUNT,MAX_ENEMY_BULLET_BURST_COUNT));for(let _0x1e382f=0x0;_0x1e382f<_0x24efc5;_0x1e382f++){const _0x475134=_0x256d61+_0x1e382f*ENTRANCE_FIRE_BURST_DELAY_MS,_0x50678d=setTimeout(()=>{const _0x439873=_0x4d253a;try{const _0x5093fe=enemySpawnTimeouts[_0x439873(0x279)](_0x50678d);_0x5093fe>-0x1&&enemySpawnTimeouts[_0x439873(0x1fd)](_0x5093fe,0x1);let _0x32d5ad=![];isTwoPlayerMode&&selectedGameMode===_0x439873(0x235)?_0x32d5ad=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x32d5ad=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x32d5ad||isChallengingStage||isWaveTransitioning)return;const _0x301085=enemies[_0x439873(0x228)](_0x17488e=>_0x17488e&&_0x17488e['id']===_0x1dcafb);_0x301085&&_0x301085[_0x439873(0x214)]===_0x4b1273&&(createBulletSimple(_0x301085)&&(_0x1e382f===0x0&&playSound('enemyShootSound',![],0.4),_0x301085[_0x439873(0x266)]=Date['now']()));}catch(_0x39b66e){console['error']('Error\x20during\x20enemy\x20burst\x20firing\x20(bullet\x20'+(_0x1e382f+0x1)+'/'+_0x24efc5+_0x439873(0x2d8)+_0x1dcafb+':',_0x39b66e);}},_0x475134);enemySpawnTimeouts[_0x4d253a(0x2ae)](_0x50678d);}}function fireFixedEnemyBurst(_0x1d3124,_0x3dd826,_0x546fdc,_0x23975d){const _0x5bfc6b=_0x4c0c0a;let _0x2a3a70=![];isTwoPlayerMode&&selectedGameMode===_0x5bfc6b(0x235)?_0x2a3a70=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x2a3a70=playerLives>0x0&&!isShipCaptured;if(!_0x1d3124||isPaused||!isInGameState||!_0x2a3a70||isChallengingStage||isWaveTransitioning||_0x23975d<=0x0)return;for(let _0x27bb26=0x0;_0x27bb26<_0x23975d;_0x27bb26++){const _0x38b358=_0x546fdc+_0x27bb26*ENTRANCE_FIRE_BURST_DELAY_MS,_0x337934=setTimeout(()=>{const _0x3fe8cd=_0x5bfc6b;try{const _0x10d021=enemySpawnTimeouts['indexOf'](_0x337934);_0x10d021>-0x1&&enemySpawnTimeouts[_0x3fe8cd(0x1fd)](_0x10d021,0x1);let _0x2f9bbc=![];isTwoPlayerMode&&selectedGameMode===_0x3fe8cd(0x235)?_0x2f9bbc=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x2f9bbc=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x2f9bbc||isChallengingStage||isWaveTransitioning)return;const _0x4f91c3=enemies[_0x3fe8cd(0x228)](_0x43e79b=>_0x43e79b&&_0x43e79b['id']===_0x1d3124);if(_0x4f91c3)createBulletSimple(_0x4f91c3)&&(_0x27bb26===0x0&&playSound(_0x3fe8cd(0x286),![],0.4),_0x4f91c3['lastFiredTime']=Date['now']());else{}}catch(_0x273f06){console['error'](_0x3fe8cd(0x296)+(_0x27bb26+0x1)+'/'+_0x23975d+_0x3fe8cd(0x2d8)+_0x1d3124+':',_0x273f06);}},_0x38b358);enemySpawnTimeouts[_0x5bfc6b(0x2ae)](_0x337934);}}function startFullGridWave(){const _0x2924ef=_0x4c0c0a;if(!currentWaveDefinition||currentWaveDefinition['length']===0x0||!isFullGridWave){console[_0x2924ef(0x2ec)]('Attempted\x20to\x20start\x20Full\x20Grid\x20wave\x20without\x20valid\x20definition\x20or\x20when\x20not\x20in\x20Full\x20Grid\x20mode.'),isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}playSound(_0x2924ef(0x270),![],0.4),enemySpawnTimeouts[_0x2924ef(0x1cd)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x44f1b3=0x0;currentWaveDefinition[_0x2924ef(0x1cd)]((_0xb8801d,_0xa28b4b)=>{const _0x31b155=_0x2924ef;let _0x1de4fc=0x0;_0xb8801d&&_0xb8801d[_0x31b155(0x2e8)]&&Array[_0x31b155(0x1cf)](_0xb8801d['enemies'])?(_0x1de4fc=_0xb8801d[_0x31b155(0x2e8)][_0x31b155(0x1e6)],_0xb8801d['enemies'][_0x31b155(0x1cd)]((_0x5d02c3,_0xf6c64e)=>{const _0x348ebc=_0x31b155;try{if(!_0x5d02c3||!_0x5d02c3[_0x348ebc(0x274)]||typeof _0x5d02c3[_0x348ebc(0x26d)]===_0x348ebc(0x226)||typeof _0x5d02c3[_0x348ebc(0x28a)]===_0x348ebc(0x226)){console[_0x348ebc(0x2ec)](_0x348ebc(0x2c4)+_0xa28b4b+_0x348ebc(0x253)+_0xf6c64e+'.\x20Skipping.');return;}let _0x3e628a=_0x5d02c3[_0x348ebc(0x274)],_0x24c9e2=_0x3e628a===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x585d1c,_0x54dfad;if(_0x3e628a===ENEMY1_TYPE)_0x585d1c=ENEMY1_WIDTH,_0x54dfad=ENEMY1_HEIGHT;else _0x3e628a===ENEMY3_TYPE?(_0x585d1c=BOSS_WIDTH,_0x54dfad=BOSS_HEIGHT):(_0x585d1c=ENEMY_WIDTH,_0x54dfad=ENEMY_HEIGHT);let _0x525d61,_0x4ab3f6;try{const {x:_0x1ca145,y:_0x3199db}=getCurrentGridSlotPosition(_0x5d02c3[_0x348ebc(0x26d)],_0x5d02c3[_0x348ebc(0x28a)],_0x585d1c);_0x525d61=_0x1ca145,_0x4ab3f6=_0x3199db;}catch(_0x529c32){console[_0x348ebc(0x2ec)](_0x348ebc(0x219)+_0x5d02c3[_0x348ebc(0x274)]+'\x20at\x20['+_0x5d02c3[_0x348ebc(0x26d)]+','+_0x5d02c3[_0x348ebc(0x28a)]+']',_0x529c32),_0x525d61=gameCanvas?.[_0x348ebc(0x2a8)]/0x2||0xc8,_0x4ab3f6=ENEMY_TOP_MARGIN+_0x5d02c3[_0x348ebc(0x26d)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x16cef3={'x':_0x525d61,'y':_0x4ab3f6,'width':_0x585d1c,'height':_0x54dfad,'targetGridX':_0x525d61,'targetGridY':_0x4ab3f6,'speed':0x0,'state':_0x348ebc(0x1dd),'gridRow':_0x5d02c3['gridRow'],'gridCol':_0x5d02c3[_0x348ebc(0x28a)],'type':_0x3e628a,'health':_0x24c9e2,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':null,'pathSegmentIndex':0x0,'pathT':0x0,'squadronId':_0xa28b4b,'squadronEnemyIndex':_0xf6c64e,'id':_0x348ebc(0x2f2)+_0xa28b4b+'-'+_0xf6c64e+'-'+Date[_0x348ebc(0x2ed)]()+'-'+Math['random']()['toString'](0x24)[_0x348ebc(0x295)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x348ebc(0x2f1),'hasCapturedShip':_0x3e628a===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x3e628a===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies[_0x348ebc(0x2ae)](_0x16cef3),_0x44f1b3++;}catch(_0x27540e){console[_0x348ebc(0x2ec)](_0x348ebc(0x1d9)+_0xa28b4b+',\x20Idx\x20'+_0xf6c64e+'):',_0x27540e);}})):console[_0x31b155(0x2b0)]('Full\x20Grid:\x20Squadron\x20'+_0xa28b4b+_0x31b155(0x299)),squadronCompletionStatus[_0xa28b4b]={'completed':_0x1de4fc,'total':_0x1de4fc};}),totalEnemiesScheduledForWave=_0x44f1b3,enemiesSpawnedThisWave=_0x44f1b3,isEntrancePhaseActive=![],gridJustCompleted=!![],!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound('gridBackgroundSound',!![],0.1)),GRID_BREATH_ENABLED&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=Date[_0x2924ef(0x2ed)](),currentGridBreathFactor=0x0),lastGridFireCheckTime=Date[_0x2924ef(0x2ed)](),firstEnemyLanded=!![];}function renderGame(){const _0x1924e3=_0x4c0c0a;try{if(!gameCtx||!gameCanvas){if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null;return;}gameCtx['clearRect'](0x0,0x0,gameCanvas[_0x1924e3(0x2a8)],gameCanvas[_0x1924e3(0x2de)]);const _0x27307c=Date[_0x1924e3(0x2ed)]();gameCtx['save']();const _0x19f951='20px\x20\x27Press\x20Start\x202P\x27',_0x53b6d3='red',_0x5d6c7b=_0x1924e3(0x2d5);let _0x1190ed,_0x5597c7,_0x2b895a,_0x9d1c17,_0x2b5cff=![],_0x5ef493=![],_0x497270=![];if(isShowingResultsScreen){}else{if(gameOverSequenceStartTime>0x0&&!isShowingPlayerGameOverMessage){}else{if(isShowingPlayerGameOverMessage){}else{if(!isInGameState){}else{_0x2b895a=highScore||0x0;if(!isManualControl){}else{if(isTwoPlayerMode&&selectedGameMode==='coop'){_0x1190ed=player1Score,_0x5597c7=player2Score,_0x2b895a=Math[_0x1924e3(0x2df)](highScore,player1Score,player2Score),_0x9d1c17=_0x1924e3(0x1f2),_0x2b5cff=!isShowingIntro&&!isPaused&&player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn,_0x5ef493=!isShowingIntro&&!isPaused&&player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn;if(player1Score>=_0x2b895a&&player1Score>0x0)_0x497270=_0x2b5cff;if(player2Score>=_0x2b895a&&player2Score>0x0&&player2Score>player1Score)_0x497270=_0x5ef493;}else isTwoPlayerMode&&selectedGameMode===_0x1924e3(0x2f1)?(_0x1190ed=currentPlayer===0x1?score:player1Score,_0x5597c7=currentPlayer===0x2?score:player2Score,_0x2b895a=Math[_0x1924e3(0x2df)](highScore,player1Score,player2Score,score),_0x9d1c17=_0x1924e3(0x1f2),_0x2b5cff=!isShowingIntro&&!isPaused&&currentPlayer===0x1&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x5ef493=!isShowingIntro&&!isPaused&&currentPlayer===0x2&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x497270=!isPaused&&!isShowingIntro&&score>0x0&&_0x2b895a>0x0&&score>=_0x2b895a):(_0x1190ed=score,_0x5597c7=0x0,_0x9d1c17=_0x1924e3(0x1f2));}}}}}let _0x18f47e=![];if(_0x497270){}typeof MARGIN_SIDE!==_0x1924e3(0x226)&&typeof MARGIN_TOP!==_0x1924e3(0x226)&&typeof SCORE_OFFSET_Y!==_0x1924e3(0x226)&&(drawTopUiElement(_0x9d1c17,_0x1190ed,_0x1924e3(0x24a),MARGIN_SIDE,_0x2b5cff),drawTopUiElement('HIGH\x20SCORE',_0x2b895a,_0x1924e3(0x306),gameCanvas[_0x1924e3(0x2a8)]/0x2,_0x18f47e),drawTopUiElement(_0x1924e3(0x2ab),_0x5597c7,_0x1924e3(0x29b),gameCanvas[_0x1924e3(0x2a8)]-MARGIN_SIDE,_0x5ef493));if(typeof shipImage!=='undefined'&&typeof LIFE_ICON_MARGIN_BOTTOM!==_0x1924e3(0x226)&&typeof LIFE_ICON_SIZE!==_0x1924e3(0x226)&&typeof LIFE_ICON_MARGIN_LEFT!=='undefined'&&typeof LIFE_ICON_SPACING!=='undefined'){if(shipImage[_0x1924e3(0x243)]&&shipImage['naturalHeight']!==0x0){const _0x508bf3=gameCanvas[_0x1924e3(0x2de)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE;let _0x46b853=0x0,_0x121875=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x1924e3(0x235)){if(player1Lives>0x0)_0x46b853=Math[_0x1924e3(0x2df)](0x0,player1Lives-0x1);if(player2Lives>0x0)_0x121875=Math[_0x1924e3(0x2df)](0x0,player2Lives-0x1);}else{if(playerLives>0x0)_0x46b853=Math[_0x1924e3(0x2df)](0x0,playerLives-0x1);}const _0x2baab0=0x5;for(let _0x349e40=0x0;_0x349e40<Math[_0x1924e3(0x305)](_0x46b853,_0x2baab0);_0x349e40++){const _0x163cb4=LIFE_ICON_MARGIN_LEFT+_0x349e40*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx[_0x1924e3(0x267)](shipImage,Math[_0x1924e3(0x2f8)](_0x163cb4),Math[_0x1924e3(0x2f8)](_0x508bf3),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}if(isTwoPlayerMode&&selectedGameMode==='coop'){const _0x27162f=gameCanvas[_0x1924e3(0x2a8)]-LIFE_ICON_MARGIN_RIGHT-Math[_0x1924e3(0x305)](_0x121875,_0x2baab0)*(LIFE_ICON_SIZE+LIFE_ICON_SPACING)+LIFE_ICON_SPACING;for(let _0x242f2a=0x0;_0x242f2a<Math['min'](_0x121875,_0x2baab0);_0x242f2a++){const _0x372d7c=_0x27162f+_0x242f2a*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx[_0x1924e3(0x267)](shipImage,Math[_0x1924e3(0x2f8)](_0x372d7c),Math['round'](_0x508bf3),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}}}}gameCtx[_0x1924e3(0x29c)](),gameCtx[_0x1924e3(0x26e)]();if(isTwoPlayerMode&&selectedGameMode===_0x1924e3(0x235)){if(ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured){let _0x262151=!![];if(isPlayer1Invincible){const _0x3b969c=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x27307c%_0x3b969c>=INVINCIBILITY_BLINK_ON_MS)_0x262151=![];}if(_0x262151){const _0x425334=ship1['x'],_0x3be9b6=ship1['y'];typeof shipImage!==_0x1924e3(0x226)&&shipImage['complete']?(gameCtx[_0x1924e3(0x267)](shipImage,Math[_0x1924e3(0x2f8)](_0x425334),Math[_0x1924e3(0x2f8)](_0x3be9b6),ship1[_0x1924e3(0x2a8)],ship1[_0x1924e3(0x2de)]),player1IsDualShipActive&&gameCtx[_0x1924e3(0x267)](shipImage,Math[_0x1924e3(0x2f8)](_0x425334+DUAL_SHIP_OFFSET_X),Math[_0x1924e3(0x2f8)](_0x3be9b6),ship1['width'],ship1[_0x1924e3(0x2de)])):(gameCtx[_0x1924e3(0x28b)]=_0x1924e3(0x2b2),gameCtx['fillRect'](Math[_0x1924e3(0x2f8)](_0x425334),Math[_0x1924e3(0x2f8)](_0x3be9b6),ship1[_0x1924e3(0x2a8)],ship1[_0x1924e3(0x2de)]));}}if(ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured){let _0x5cc23f=!![];if(isPlayer2Invincible){const _0x1c0ccf=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x27307c%_0x1c0ccf>=INVINCIBILITY_BLINK_ON_MS)_0x5cc23f=![];}if(_0x5cc23f){const _0x2ec093=ship2['x'],_0x5739d2=ship2['y'];typeof shipImage!=='undefined'&&shipImage['complete']?(gameCtx[_0x1924e3(0x267)](shipImage,Math[_0x1924e3(0x2f8)](_0x2ec093),Math[_0x1924e3(0x2f8)](_0x5739d2),ship2[_0x1924e3(0x2a8)],ship2[_0x1924e3(0x2de)]),player2IsDualShipActive&&gameCtx[_0x1924e3(0x267)](shipImage,Math['round'](_0x2ec093+DUAL_SHIP_OFFSET_X),Math[_0x1924e3(0x2f8)](_0x5739d2),ship2[_0x1924e3(0x2a8)],ship2['height'])):(gameCtx[_0x1924e3(0x28b)]='green',gameCtx['fillRect'](Math[_0x1924e3(0x2f8)](_0x2ec093),Math['round'](_0x5739d2),ship2['width'],ship2['height']));}}}else{if(ship&&!isShowingCaptureMessage){let _0x3fda91=!![];if(isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isInvincible){const _0x287d07=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x27307c%_0x287d07>=INVINCIBILITY_BLINK_ON_MS)_0x3fda91=![];}if(_0x3fda91){let _0x26d107=ship['x'],_0x3b97e9=(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0||!isInGameState||isShowingScoreScreen||isInGameState&&isShowingIntro&&!isManualControl&&(introStep===0x1||introStep===0x2||introStep===0x3))&&!isDualShipActive;_0x3b97e9&&(_0x26d107=Math[_0x1924e3(0x2f8)](gameCanvas['width']/0x2-ship['width']/0x2));const _0x4c4063=ship['y'];typeof shipImage!==_0x1924e3(0x226)&&shipImage[_0x1924e3(0x243)]?(gameCtx[_0x1924e3(0x267)](shipImage,Math['round'](_0x26d107),Math[_0x1924e3(0x2f8)](_0x4c4063),ship['width'],ship[_0x1924e3(0x2de)]),isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isDualShipActive&&!isShipCaptured&&gameCtx[_0x1924e3(0x267)](shipImage,Math['round'](_0x26d107+DUAL_SHIP_OFFSET_X),Math[_0x1924e3(0x2f8)](_0x4c4063),ship[_0x1924e3(0x2a8)],ship[_0x1924e3(0x2de)])):(gameCtx[_0x1924e3(0x28b)]=_0x1924e3(0x2b2),gameCtx[_0x1924e3(0x2cd)](Math['round'](_0x26d107),Math[_0x1924e3(0x2f8)](_0x4c4063),ship[_0x1924e3(0x2a8)],ship[_0x1924e3(0x2de)]));}}}if(fallingShips[_0x1924e3(0x1e6)]>0x0&&typeof shipImage!=='undefined'&&shipImage[_0x1924e3(0x243)]){}gameCtx[_0x1924e3(0x29c)]();if(!isInGameState){if(isShowingScoreScreen){}else{gameCtx[_0x1924e3(0x26e)]();const _0x2fd72d=gameCanvas['width'],_0x430f83=gameCanvas[_0x1924e3(0x2de)],_0x192c90=_0x2fd72d/0x2;selectedButtonIndex===-0x1&&(isPlayerSelectMode||isFiringModeSelectMode||isGameModeSelectMode||!isPlayerSelectMode&&!isFiringModeSelectMode&&!isGameModeSelectMode)&&(selectedButtonIndex=0x0);let _0x464b54=MENU_LOGO_APPROX_HEIGHT,_0x2fcd3a=_0x464b54*(logoImage[_0x1924e3(0x246)]/logoImage[_0x1924e3(0x1d5)]||0x1);typeof logoImage!=='undefined'&&logoImage[_0x1924e3(0x243)]&&logoImage[_0x1924e3(0x1d5)]!==0x0&&(_0x464b54=logoImage['naturalHeight']*LOGO_SCALE_FACTOR,_0x2fcd3a=logoImage[_0x1924e3(0x246)]*LOGO_SCALE_FACTOR);const _0x371db5=getSubtitleApproxHeight(MENU_SUBTITLE_FONT),_0x2eabb2=_0x464b54+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0x371db5;let _0x503895=(_0x430f83-_0x2eabb2)/0x2-0x46;_0x503895+=MENU_GENERAL_Y_OFFSET;const _0x10d633=_0x192c90-_0x2fcd3a/0x2,_0x41353d=_0x503895+MENU_LOGO_EXTRA_Y_OFFSET;typeof logoImage!==_0x1924e3(0x226)&&logoImage[_0x1924e3(0x243)]&&logoImage[_0x1924e3(0x1d5)]!==0x0?gameCtx[_0x1924e3(0x267)](logoImage,Math['round'](_0x10d633),Math[_0x1924e3(0x2f8)](_0x41353d),_0x2fcd3a,_0x464b54):drawCanvasText('LOGO',_0x192c90,_0x41353d+_0x464b54/0x2,_0x1924e3(0x232),_0x1924e3(0x202));if(isGameModeSelectMode)drawCanvasButton(_0x1924e3(0x200),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x1924e3(0x2db),0x1,selectedButtonIndex===0x1);else{if(isFiringModeSelectMode)drawCanvasButton('EASY',0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x1924e3(0x1d1),0x1,selectedButtonIndex===0x1);else isPlayerSelectMode?(drawCanvasButton(_0x1924e3(0x2f7),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x1924e3(0x260),0x1,selectedButtonIndex===0x1)):(drawCanvasButton(_0x1924e3(0x2b5),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x1924e3(0x2ff),0x1,selectedButtonIndex===0x1));}const _0x25b003=getMenuButtonRect(0x1);let _0x40fdd5;_0x25b003?_0x40fdd5=_0x25b003['y']+_0x25b003[_0x1924e3(0x2de)]+MENU_BUTTON_SUBTITLE_V_GAP+_0x371db5/0x2:_0x40fdd5=_0x503895+_0x464b54+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0x371db5/0x2,drawCanvasText(MENU_SUBTITLE_TEXT,_0x192c90-0x1,Math[_0x1924e3(0x2f8)](_0x40fdd5),MENU_SUBTITLE_FONT,MENU_SUBTITLE_COLOR,_0x1924e3(0x306),_0x1924e3(0x22a),!![]),gameCtx[_0x1924e3(0x29c)]();}}else{if(gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){gameCtx['save']();let _0x3e01bc=!showReadyMessage&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!isCsCompletionDelayActive&&!isShowingIntro&&!isShowingCaptureMessage;_0x3e01bc&&(bullets[_0x1924e3(0x1cd)](_0x53dfc4=>{}),enemyBullets[_0x1924e3(0x1cd)](_0x1cf9dd=>{}));enemies[_0x1924e3(0x1cd)](_0x50a4c9=>{});if(captureBeamActive&&capturingBossId&&captureBeamProgress>0x0){}renderExplosions(),renderFloatingScores(),renderHitSparks();let _0x18cbf9=![];const _0x6b2baf=gameCanvas['height']/0x2;if(isPaused){}else{if(isShowingCaptureMessage){}}gameCtx['restore']();}else{if(isShowingPlayerGameOverMessage){}else{if(gameOverSequenceStartTime>0x0){}}}}}catch(_0x7868ea){console[_0x1924e3(0x2ec)](_0x1924e3(0x2fc),_0x7868ea,_0x7868ea[_0x1924e3(0x245)]);}}function handleEnemyHit(_0x8f9ffc,_0x45934b=null){const _0x2505d7=_0x4c0c0a;if(!_0x8f9ffc)return{'destroyed':![],'pointsAwarded':0x0};const _0x3bf668=Date[_0x2505d7(0x2ed)]();let _0x9635d5=0x0,_0x1d7651=![],_0x27ac0b=_0x8f9ffc['isDamaged'],_0x8a43ff=null,_0x2126c6=0x1;const _0x2aaa66=_0x8f9ffc['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x8f9ffc[_0x2505d7(0x274)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x34e03c=_0x8f9ffc[_0x2505d7(0x274)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x8f9ffc[_0x2505d7(0x274)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x57b1f4=_0x8f9ffc['type']===ENEMY3_TYPE&&_0x8f9ffc[_0x2505d7(0x1dc)],_0x1b3038=_0x8f9ffc[_0x2505d7(0x274)]===ENEMY3_TYPE&&_0x8f9ffc[_0x2505d7(0x289)];let _0x15dee6=![],_0x196519=null;if(_0x57b1f4){if(isTwoPlayerMode&&selectedGameMode===_0x2505d7(0x235)){if(isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x8f9ffc['id'])_0x15dee6=!![],_0x196519=_0x2505d7(0x247);else isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x8f9ffc['id']&&(_0x15dee6=!![],_0x196519=_0x2505d7(0x220));}else!isTwoPlayerMode&&isShipCaptured&&capturedBossIdWithMessage===_0x8f9ffc['id']&&(_0x15dee6=!![]);}const _0x4571ab=_0x8f9ffc['x']+_0x2aaa66/0x2,_0x277044=_0x8f9ffc['y']+_0x34e03c*0.2;createHitSparks(_0x4571ab,_0x277044),_0x8f9ffc[_0x2505d7(0x28f)]--;_0x8f9ffc['type']===ENEMY3_TYPE&&(_0x8f9ffc[_0x2505d7(0x304)]=_0x8f9ffc[_0x2505d7(0x28f)]<ENEMY3_MAX_HITS);if(_0x8f9ffc[_0x2505d7(0x28f)]<=0x0){_0x1d7651=!![];isChallengingStage&&challengingStageEnemiesHit++;if(_0x57b1f4&&_0x1b3038){let _0x4da540=null;if(_0x15dee6&&_0x196519)_0x4da540=_0x196519;else{let _0x469afb=![];if(isCoopAIDemoActive){if(_0x45934b===_0x2505d7(0x247)&&player1IsDualShipActive)_0x4da540=_0x2505d7(0x220),_0x469afb=!![];else _0x45934b===_0x2505d7(0x220)&&player2IsDualShipActive&&(_0x4da540='player1',_0x469afb=!![]);}else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2505d7(0x2fb)){if(_0x45934b===_0x2505d7(0x2d1)&&player2IsDualShipActive)_0x4da540=_0x2505d7(0x247),_0x469afb=!![];else _0x45934b===_0x2505d7(0x247)&&player1IsDualShipActive&&(_0x4da540='ai_p2',_0x469afb=!![]);}}!_0x469afb&&(_0x4da540=_0x45934b);}_0x4da540===null&&_0x45934b&&(_0x4da540=_0x45934b);if(_0x8f9ffc[_0x2505d7(0x289)]){const _0x5ad240=_0x8f9ffc[_0x2505d7(0x289)][_0x2505d7(0x2a8)],_0x4c4e3a=_0x8f9ffc['capturedShipDimensions'][_0x2505d7(0x2de)],_0x3491b5=_0x8f9ffc['x']+(_0x2aaa66-_0x5ad240)/0x2+CAPTURED_SHIP_OFFSET_X,_0x30739a=_0x8f9ffc['y']+CAPTURED_SHIP_OFFSET_Y,_0x4e2fce=fallingShips[_0x2505d7(0x1e0)](_0x45da5f=>Math[_0x2505d7(0x1fc)](_0x45da5f['x']-_0x3491b5)<0x1&&Math[_0x2505d7(0x1fc)](_0x45da5f['y']-_0x30739a)<0x1);!_0x4e2fce&&fallingShips[_0x2505d7(0x2ae)]({'x':_0x3491b5,'y':_0x30739a,'width':_0x5ad240,'height':_0x4c4e3a,'creationTime':_0x3bf668,'tintProgress':0x1,'rotation':0x0,'rotationDirection':Math['random']()<0.5?-0x1:0x1,'totalRotation':0x0,'rotationCompleted':![],'targetPlayerId':_0x4da540});}else console[_0x2505d7(0x2ec)](_0x2505d7(0x25e));_0x8f9ffc[_0x2505d7(0x1dc)]=![],_0x8f9ffc['capturedShipDimensions']=null;}else _0x57b1f4&&!_0x1b3038&&(console[_0x2505d7(0x2ec)](_0x2505d7(0x307)+_0x8f9ffc['id']+_0x2505d7(0x2a2)),_0x8f9ffc[_0x2505d7(0x1dc)]=![],_0x8f9ffc[_0x2505d7(0x289)]=null);if(isChallengingStage){let _0x5a3806=0x64;const _0x8fe443=csLastHitTime;csLastHitTime=_0x3bf668,csLastChainHitPosition={'x':_0x8f9ffc['x'],'y':_0x8f9ffc['y']},csCurrentChainHits>0x0&&_0x3bf668-_0x8fe443<CS_CHAIN_BREAK_TIME_MS?csCurrentChainHits++:(csCurrentChainHits=0x1,csCurrentChainScore=0x0),csCurrentChainHits>=CS_CHAIN_SCORE_THRESHOLD&&(_0x5a3806*=0x2),_0x9635d5=_0x5a3806,csCurrentChainScore+=_0x9635d5,scoreEarnedThisCS+=_0x9635d5,_0x8a43ff=_0x2505d7(0x225),_0x2126c6=0.4;}else{if(_0x8f9ffc[_0x2505d7(0x214)]===_0x2505d7(0x1dd))_0x9635d5=_0x8f9ffc[_0x2505d7(0x274)]===ENEMY1_TYPE?0x32:_0x8f9ffc[_0x2505d7(0x274)]===ENEMY2_TYPE?0x50:0x0,_0x8f9ffc[_0x2505d7(0x274)]===ENEMY3_TYPE&&(_0x9635d5=0x96),_0x8a43ff=_0x2505d7(0x225),_0x2126c6=0.4;else{_0x9635d5=_0x8f9ffc['type']===ENEMY1_TYPE?0x64:_0x8f9ffc[_0x2505d7(0x274)]===ENEMY2_TYPE?0xa0:0x0;if(_0x8f9ffc[_0x2505d7(0x274)]===ENEMY3_TYPE){if(_0x57b1f4){const _0x254f5e=[0x3e8,0x5dc,0x7d0,0xbb8];_0x9635d5=_0x254f5e[Math[_0x2505d7(0x1fe)](Math[_0x2505d7(0x262)]()*_0x254f5e[_0x2505d7(0x1e6)])],_0x8a43ff=_0x2505d7(0x21d),_0x2126c6=0.4;}else _0x27ac0b?(_0x9635d5=0x190,_0x8a43ff=_0x2505d7(0x21d),_0x2126c6=0.4):(_0x9635d5=0x0,console[_0x2505d7(0x2b0)](_0x2505d7(0x1e2)+_0x9635d5+_0x2505d7(0x2cc)+(_0x8f9ffc[_0x2505d7(0x28f)]+0x1)),_0x8a43ff='explosionSound',_0x2126c6=0.4);}else _0x8a43ff=_0x2505d7(0x225),_0x2126c6=0.4;if(_0x1d7651&&_0x9635d5>0x0){const _0x24c051=normalWaveLastHitTime;normalWaveLastHitTime=_0x3bf668,normalWaveLastChainHitPosition={'x':_0x8f9ffc['x'],'y':_0x8f9ffc['y']};normalWaveLastChainHitPosition&&_0x3bf668-_0x24c051<NORMAL_WAVE_CHAIN_BREAK_TIME_MS?normalWaveCurrentChainHits++:(normalWaveCurrentChainHits=0x1,normalWaveCurrentChainScore=0x0);if(NORMAL_WAVE_CHAIN_BONUS_ENABLED&&normalWaveCurrentChainHits>=NORMAL_WAVE_CHAIN_SCORE_THRESHOLD){const _0x359d6b=[0x12c,0x258,0x3e8,0x5dc,0x7d0,0xbb8],_0x55bc71=Math[_0x2505d7(0x305)](_0x359d6b['length']-0x1,normalWaveCurrentChainHits-NORMAL_WAVE_CHAIN_SCORE_THRESHOLD),_0x27e7c1=_0x359d6b[_0x55bc71];_0x9635d5+=_0x27e7c1,normalWaveCurrentChainScore+=_0x27e7c1;}}}}if(_0x9635d5>0x0){let _0x337806=null;if(isCoopAIDemoActive){if(_0x45934b===_0x2505d7(0x247))player1Score+=_0x9635d5,_0x337806=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound('hiScoreSound',![],0.2))),checkAndAwardExtraLife(0x1);else{if(_0x45934b===_0x2505d7(0x220))player2Score+=_0x9635d5,_0x337806=()=>player2EnemiesHit++,player2Score>highScore&&(highScore=player2Score,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound(_0x2505d7(0x2bd),![],0.2))),checkAndAwardExtraLife(0x2);else{player1Score+=_0x9635d5,_0x337806=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score;checkAndAwardExtraLife(0x1);}}}else{if(!isManualControl)score+=_0x9635d5,player1Score=score,_0x337806=()=>player1EnemiesHit++,score>highScore&&(highScore=score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(_0x2505d7(0x2bd),![],0.2))),checkAndAwardExtraLife(0x1);else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2505d7(0x2fb)){if(_0x45934b===_0x2505d7(0x247))player1Score+=_0x9635d5,_0x337806=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound('hiScoreSound',![],0.2))),checkAndAwardExtraLife(0x1);else{if(_0x45934b===_0x2505d7(0x2d1))player2Score+=_0x9635d5,_0x337806=()=>player2EnemiesHit++,player2Score>highScore&&(highScore=player2Score,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound(_0x2505d7(0x2bd),![],0.2))),checkAndAwardExtraLife(0x2);else{player1Score+=_0x9635d5,_0x337806=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score;checkAndAwardExtraLife(0x1);}}}else{if(isTwoPlayerMode&&selectedGameMode===_0x2505d7(0x235)){if(_0x45934b===_0x2505d7(0x247))player1Score+=_0x9635d5,_0x337806=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(_0x2505d7(0x2bd),![],0.2))),checkAndAwardExtraLife(0x1);else _0x45934b==='player2'?(player2Score+=_0x9635d5,_0x337806=()=>player2EnemiesHit++,player2Score>highScore&&(highScore=player2Score,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound(_0x2505d7(0x2bd),![],0.2))),checkAndAwardExtraLife(0x2)):(player1Score+=_0x9635d5,_0x337806=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound('hiScoreSound',![],0.2))),checkAndAwardExtraLife(0x1));}else{score+=_0x9635d5;let _0x50bb89=score,_0x3e3173=null,_0x3d82f6=currentPlayer;currentPlayer===0x1||!isTwoPlayerMode?(player1Score=score,_0x337806=()=>player1EnemiesHit++,_0x3e3173=()=>{player1TriggeredHighScoreSound=!![];}):(player2Score=score,_0x337806=()=>player2EnemiesHit++,_0x3e3173=()=>{player2TriggeredHighScoreSound=!![];});if(_0x50bb89>highScore){highScore=_0x50bb89;const _0x4b077d=currentPlayer===0x1||!isTwoPlayerMode?player1TriggeredHighScoreSound:player2TriggeredHighScoreSound;!_0x4b077d&&_0x3e3173&&(_0x3e3173(),playSound(_0x2505d7(0x2bd),![],0.2));}checkAndAwardExtraLife(_0x3d82f6);}}}}_0x337806&&!isChallengingStage&&_0x337806();const _0x54482a=_0x8f9ffc[_0x2505d7(0x214)]===_0x2505d7(0x1dd)||isChallengingStage?FLOATING_SCORE_COLOR_GRID:FLOATING_SCORE_COLOR_ACTIVE;floatingScores[_0x2505d7(0x2ae)]({'text':_0x9635d5[_0x2505d7(0x268)](),'x':_0x8f9ffc['x']+_0x2aaa66/0x2,'y':_0x8f9ffc['y'],'color':_0x54482a,'creationTime':_0x3bf668,'displayStartTime':_0x3bf668+FLOATING_SCORE_APPEAR_DELAY});}createExplosion(_0x8f9ffc['x']+_0x2aaa66/0x2,_0x8f9ffc['y']+_0x34e03c/0x2);_0x8f9ffc['id']===capturingBossId&&stopSound(_0x2505d7(0x20c));if(_0x8f9ffc['state']===_0x2505d7(0x2ef)||_0x8f9ffc[_0x2505d7(0x214)]===_0x2505d7(0x291)||_0x8f9ffc['state']===_0x2505d7(0x218)||_0x8f9ffc[_0x2505d7(0x214)]===_0x2505d7(0x2f0)||_0x8f9ffc['state']===_0x2505d7(0x303)||_0x8f9ffc[_0x2505d7(0x214)]==='showing_capture_message'){if(_0x8f9ffc['type']===ENEMY3_TYPE)stopSound(_0x2505d7(0x285));else stopSound(_0x2505d7(0x2b1));}}else{_0x1d7651=![];if(_0x8f9ffc['type']===ENEMY3_TYPE)_0x8a43ff=_0x2505d7(0x223),_0x2126c6=0.6,_0x9635d5=0x0;else{_0x9635d5=0x0;if(_0x8f9ffc[_0x2505d7(0x274)]===ENEMY1_TYPE)_0x8a43ff=_0x2505d7(0x252),_0x2126c6=0.3;else _0x8f9ffc['type']===ENEMY2_TYPE&&(_0x8a43ff=_0x2505d7(0x20a),_0x2126c6=0.3);}}return _0x8a43ff&&playSound(_0x8a43ff,![],_0x2126c6),{'destroyed':_0x1d7651,'pointsAwarded':_0x9635d5};}function createHitSparks(_0x32b74b,_0x1aaf24){const _0x136c7c=_0x4c0c0a;if(!gameCtx)return;const _0x4badfa=Date[_0x136c7c(0x2ed)]();for(let _0x2a618e=0x0;_0x2a618e<HIT_SPARK_COUNT;_0x2a618e++){const _0xc73aae=Math[_0x136c7c(0x262)]()*Math['PI']*0x2,_0xe0824a=HIT_SPARK_SPEED*(0.7+Math[_0x136c7c(0x262)]()*0.6),_0x1a6511=HIT_SPARK_LIFETIME*(0.8+Math[_0x136c7c(0x262)]()*0.4);hitSparks['push']({'x':_0x32b74b,'y':_0x1aaf24,'vx':Math['cos'](_0xc73aae)*_0xe0824a,'vy':Math[_0x136c7c(0x237)](_0xc73aae)*_0xe0824a,'creationTime':_0x4badfa,'lifetime':_0x1a6511,'size':HIT_SPARK_SIZE,'color':HIT_SPARK_COLOR});}}function updateHitSparks(){const _0x3c4cb9=_0x4c0c0a,_0x131b79=Date[_0x3c4cb9(0x2ed)]();for(let _0x5a73ca=hitSparks[_0x3c4cb9(0x1e6)]-0x1;_0x5a73ca>=0x0;_0x5a73ca--){const _0x249ff2=hitSparks[_0x5a73ca],_0x5bc01f=_0x131b79-_0x249ff2[_0x3c4cb9(0x27d)];_0x5bc01f>=_0x249ff2['lifetime']?hitSparks['splice'](_0x5a73ca,0x1):(_0x249ff2['vy']+=HIT_SPARK_GRAVITY,_0x249ff2['x']+=_0x249ff2['vx'],_0x249ff2['y']+=_0x249ff2['vy'],_0x249ff2[_0x3c4cb9(0x2eb)]=Math['max'](0x0,0x1-_0x5bc01f*HIT_SPARK_FADE_SPEED));}}function moveEntities(){const _0x4183b2=_0x4c0c0a;try{if(isPaused)return;const _0x167658=Date[_0x4183b2(0x2ed)]();}catch(_0x4677e9){console[_0x4183b2(0x2ec)]('FATAL\x20Error\x20in\x20moveEntities\x20(Restored\x20Conditions):',_0x4677e9,_0x4677e9['stack']),isGridSoundPlaying=![],stopSound(_0x4183b2(0x24b)),isEntrancePhaseActive=![],stopSound(_0x4183b2(0x270)),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(_0x4183b2(0x20c)),stopSound(_0x4183b2(0x2a0)),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState==='function')showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x4183b2(0x2bf));}}function switchPlayerTurn(){const _0xf1084a=_0x4c0c0a;if(!isTwoPlayerMode||selectedGameMode===_0xf1084a(0x235))return![];stopSound('hiScoreSound');if(currentPlayer===0x1){player1Score=score,player1IsDualShipActive=isDualShipActive,player1MaxLevelReached=Math['max'](player1MaxLevelReached,level);if(player1Score>highScore)highScore=player1Score;}else{player2Score=score,player2IsDualShipActive=isDualShipActive,player2MaxLevelReached=Math['max'](player2MaxLevelReached,level);if(player2Score>highScore)highScore=player2Score;}const _0x2eced0=currentPlayer===0x1?0x2:0x1,_0x215252=_0x2eced0===0x1?player1Lives:player2Lives;if(_0x215252<=0x0){const _0x31c980=currentPlayer===0x1?player1Lives:player2Lives;return _0x31c980<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x2eced0,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function firePlayerBullet(_0x2219bb=null,_0x3f25a8=![]){const _0x3b4b34=_0x4c0c0a,_0x44dff8=Date[_0x3b4b34(0x2ed)](),_0x461020=isTwoPlayerMode&&selectedGameMode===_0x3b4b34(0x235)&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x44dff8<coopPlayersReadyStartTime+0x1f40;if(_0x461020)return![];let _0x31c900=![],_0x36da8d=null,_0x1d05c=![],_0x496757=0x0,_0x11f2a6=_0x51789e=>{},_0x48442d=_0x2843da=>{},_0x9d8edc=![],_0x15bb74=()=>![],_0xfe851=_0x5ae584=>{},_0x2fcc01=_0x2219bb;const _0x3c2afb=!isPaused&&isInGameState&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!showReadyMessage&&!isCsCompletionDelayActive&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x3b4b34(0x235)&&(_0x2219bb===_0x3b4b34(0x247)&&isPlayer1ShowingGameOverMessage||_0x2219bb===_0x3b4b34(0x220)&&isPlayer2ShowingGameOverMessage));if(!_0x3c2afb)return![];if(isTwoPlayerMode&&selectedGameMode===_0x3b4b34(0x235)){if(_0x2219bb===_0x3b4b34(0x247)&&ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!player1NeedsRespawnAfterCapture)(!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer1ShipCaptured)&&(_0x36da8d=ship1,_0x1d05c=player1IsDualShipActive,_0x496757=player1LastShotTime,_0x11f2a6=_0x3d82e8=>{player1LastShotTime=_0x3d82e8;},_0x48442d=_0x3c2d97=>{player1ShotsFired+=_0x3c2d97;},_0x9d8edc=selectedFiringMode==='single',_0x15bb74=()=>p1JustFiredSingle,_0xfe851=_0x1a0391=>{p1JustFiredSingle=_0x1a0391;},_0x31c900=!![]);else _0x2219bb==='player2'&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!player2NeedsRespawnAfterCapture&&((!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer2ShipCaptured)&&(_0x36da8d=ship2,_0x1d05c=player2IsDualShipActive,_0x496757=player2LastShotTime,_0x11f2a6=_0x31a103=>{player2LastShotTime=_0x31a103;},_0x48442d=_0x7549c0=>{player2ShotsFired+=_0x7549c0;},isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3b4b34(0x2fb)?_0x9d8edc=![]:(_0x9d8edc=selectedFiringMode===_0x3b4b34(0x227),_0x15bb74=()=>p2JustFiredSingle,_0xfe851=_0x3d37d6=>{p2JustFiredSingle=_0x3d37d6;}),_0x31c900=!![]));}else{if(ship&&playerLives>0x0&&!isShipCaptured){_0x36da8d=ship,_0x1d05c=isDualShipActive;if(isTwoPlayerMode&&selectedGameMode===_0x3b4b34(0x2f1)){if(currentPlayer===0x1){_0x496757=player1LastShotTime,_0x11f2a6=_0x526ef5=>{player1LastShotTime=_0x526ef5;},_0x48442d=_0x17173b=>{player1ShotsFired+=_0x17173b;},_0x9d8edc=selectedFiringMode==='single',_0x15bb74=()=>p1JustFiredSingle,_0xfe851=_0x306120=>{p1JustFiredSingle=_0x306120;};if(!_0x2fcc01)_0x2fcc01='player1';}else{_0x496757=player2LastShotTime,_0x11f2a6=_0x1f67e0=>{player2LastShotTime=_0x1f67e0;},_0x48442d=_0xcb8a1f=>{player2ShotsFired+=_0xcb8a1f;};if(isPlayerTwoAI){_0x9d8edc=![];if(!_0x2fcc01)_0x2fcc01=_0x3b4b34(0x2d1);}else{_0x9d8edc=selectedFiringMode===_0x3b4b34(0x227);connectedGamepadIndexP2===null&&connectedGamepadIndex!==null?(_0x15bb74=()=>p1JustFiredSingle,_0xfe851=_0x53f4ee=>{p1JustFiredSingle=_0x53f4ee;}):(_0x15bb74=()=>p2JustFiredSingle,_0xfe851=_0x46b560=>{p2JustFiredSingle=_0x46b560;});if(!_0x2fcc01)_0x2fcc01='player2';}}}else{_0x496757=player1LastShotTime,_0x11f2a6=_0x3d7cf6=>{player1LastShotTime=_0x3d7cf6;},_0x48442d=_0x284365=>{player1ShotsFired+=_0x284365;},_0x9d8edc=selectedFiringMode===_0x3b4b34(0x227),_0x15bb74=()=>p1JustFiredSingle,_0xfe851=_0x33a68c=>{p1JustFiredSingle=_0x33a68c;};if(!_0x2fcc01)_0x2fcc01=_0x3b4b34(0x247);}_0x31c900=!![];}}_0x2219bb===null&&!isManualControl&&!isCoopAIDemoActive&&ship&&playerLives>0x0&&!isShipCaptured&&!isShowingCaptureMessage&&(_0x36da8d=ship,_0x1d05c=isDualShipActive,_0x496757=aiLastShotTime,_0x11f2a6=_0x45a6f1=>{aiLastShotTime=_0x45a6f1;},_0x48442d=_0x1e9790=>{player1ShotsFired+=_0x1e9790;},_0x9d8edc=![],_0x31c900=!![],_0x2fcc01='ai');if(!_0x31c900||!_0x36da8d)return![];const _0x34d650=isManualControl||isPlayerTwoAI&&selectedGameMode===_0x3b4b34(0x2f1)&&currentPlayer===0x2||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3b4b34(0x2fb)&&_0x2219bb===_0x3b4b34(0x247);if(_0x9d8edc){if(_0x3f25a8){if(_0x44dff8-_0x496757<SHOOT_COOLDOWN)return![];}else{let _0x45e5b4=![];if(_0x2fcc01===_0x3b4b34(0x247)||!isTwoPlayerMode&&_0x2fcc01===_0x3b4b34(0x247))_0x45e5b4=keyboardP1ShootDown||connectedGamepadIndex!==null&&navigator[_0x3b4b34(0x27f)]()?.[connectedGamepadIndex]?.[_0x3b4b34(0x287)][PS5_BUTTON_CROSS]?.[_0x3b4b34(0x2d4)];else{if(_0x2fcc01===_0x3b4b34(0x220)&&!isPlayerTwoAI){if(connectedGamepadIndexP2!==null)_0x45e5b4=keyboardP2ShootDown||connectedGamepadIndexP2!==null&&navigator[_0x3b4b34(0x27f)]()?.[connectedGamepadIndexP2]?.[_0x3b4b34(0x287)][PS5_BUTTON_CROSS]?.['pressed'];else connectedGamepadIndex!==null?_0x45e5b4=keyboardP2ShootDown||connectedGamepadIndex!==null&&navigator[_0x3b4b34(0x27f)]()?.[connectedGamepadIndex]?.[_0x3b4b34(0x287)][PS5_BUTTON_CROSS]?.['pressed']:_0x45e5b4=keyboardP2ShootDown;}}if(_0x15bb74()){if(_0x45e5b4)return![];else _0xfe851(![]);}if(_0x44dff8-_0x496757<SHOOT_COOLDOWN)return![];}}else{if(_0x44dff8-_0x496757<SHOOT_COOLDOWN)return![];}try{const _0x2fae1d=_0x36da8d['y'];let _0x19888a=0x0;if(_0x1d05c){const _0x45d7bd=_0x36da8d['x']+_0x36da8d[_0x3b4b34(0x2a8)]/0x2,_0x57a29c=_0x36da8d['x']+DUAL_SHIP_OFFSET_X+_0x36da8d[_0x3b4b34(0x2a8)]/0x2,_0x4b79db=_0x45d7bd-PLAYER_BULLET_WIDTH/0x2,_0x24ee6a=_0x57a29c-PLAYER_BULLET_WIDTH/0x2;bullets[_0x3b4b34(0x2ae)]({'x':_0x4b79db,'y':_0x2fae1d,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x2fcc01}),bullets[_0x3b4b34(0x2ae)]({'x':_0x24ee6a,'y':_0x2fae1d,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x2fcc01}),_0x19888a=0x2;}else{const _0x20c38c=_0x36da8d['x']+_0x36da8d[_0x3b4b34(0x2a8)]/0x2-PLAYER_BULLET_WIDTH/0x2;bullets[_0x3b4b34(0x2ae)]({'x':_0x20c38c,'y':_0x2fae1d,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x2fcc01}),_0x19888a=0x1;}if(_0x9d8edc&&!_0x3f25a8)_0xfe851(!![]);return playSound(_0x3b4b34(0x21e),![],0.4),_0x48442d(_0x19888a),_0x11f2a6(_0x44dff8),!![];}catch(_0x48bb55){return console[_0x3b4b34(0x2ec)](_0x3b4b34(0x2f9),_0x48bb55),![];}}function handlePlayerInput(){const _0xdeb502=_0x4c0c0a;try{const _0x1425a8=Date[_0xdeb502(0x2ed)](),_0x4a8da8=isTwoPlayerMode&&selectedGameMode===_0xdeb502(0x235)&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x1425a8<coopPlayersReadyStartTime+0x1f40;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2&&!isManualControl){isCoopAIDemoActive&&(leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![]);return;}let _0xbea3d4=isPaused||!isManualControl||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isTwoPlayerMode&&selectedGameMode===_0xdeb502(0x235)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage);if(_0xbea3d4){keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![];return;}let _0x23f0d9=0x0;if(isTouchActiveGame&&gameCanvas&&gameCanvas['width']>0x0){const _0x3ae315=gameCanvas['getBoundingClientRect'](),_0xdd4611=gameCanvas[_0xdeb502(0x2a8)]/_0x3ae315[_0xdeb502(0x2a8)];_0x23f0d9=(touchCurrentX-_0x3ae315[_0xdeb502(0x24a)])*_0xdd4611;}let _0x5eb07e=![],_0x5a252e=![],_0x5af617=![],_0x5a0cd0=![],_0x25a2c9=![],_0x2f681b=![];if(connectedGamepadIndex!==null){const _0x284141=navigator[_0xdeb502(0x27f)]();if(_0x284141?.[connectedGamepadIndex]){const _0x534fe5=_0x284141[connectedGamepadIndex],_0x51becd=processSingleController(_0x534fe5,previousGameButtonStates);_0x5eb07e=_0x51becd['left'],_0x5a252e=_0x51becd[_0xdeb502(0x29b)],_0x5af617=_0x51becd['shoot'],previousGameButtonStates=_0x51becd[_0xdeb502(0x292)][_0xdeb502(0x240)]();if(_0x51becd[_0xdeb502(0x24d)]&&!isShowingCaptureMessage){togglePause();return;}if(_0x51becd[_0xdeb502(0x1e8)]&&!isShowingCaptureMessage){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates[_0xdeb502(0x1e6)]>0x0)previousGameButtonStates=[];}}else{if(previousGameButtonStates['length']>0x0)previousGameButtonStates=[];}if(!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xdeb502(0x2fb))){if(isTwoPlayerMode&&connectedGamepadIndexP2!==null&&connectedGamepadIndexP2!==connectedGamepadIndex){const _0x30ddb5=navigator[_0xdeb502(0x27f)]();if(_0x30ddb5?.[connectedGamepadIndexP2]){const _0x6bdf47=_0x30ddb5[connectedGamepadIndexP2],_0x53cf56=processSingleController(_0x6bdf47,previousGameButtonStatesP2);_0x5a0cd0=_0x53cf56[_0xdeb502(0x24a)],_0x25a2c9=_0x53cf56['right'],_0x2f681b=_0x53cf56[_0xdeb502(0x2ca)],previousGameButtonStatesP2=_0x53cf56[_0xdeb502(0x292)][_0xdeb502(0x240)]();}else{if(previousGameButtonStatesP2[_0xdeb502(0x1e6)]>0x0)previousGameButtonStatesP2=[];}}else{if(previousGameButtonStatesP2['length']>0x0)previousGameButtonStatesP2=[];}}const _0x23a85b=p1FireInputWasDown;p1FireInputWasDown=keyboardP1ShootDown||_0x5af617;let _0x39fee8=![];if(!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xdeb502(0x2fb))){_0x39fee8=p2FireInputWasDown;if(isTwoPlayerMode&&selectedGameMode===_0xdeb502(0x2f1)&&currentPlayer===0x2&&!isPlayerTwoAI){if(connectedGamepadIndexP2!==null)p2FireInputWasDown=keyboardP2ShootDown||_0x2f681b;else connectedGamepadIndex!==null?p2FireInputWasDown=keyboardP2ShootDown||_0x5af617:p2FireInputWasDown=keyboardP2ShootDown;}else p2FireInputWasDown=keyboardP2ShootDown||_0x2f681b;}else p2FireInputWasDown=![];if(selectedFiringMode===_0xdeb502(0x227)){if(isTwoPlayerMode&&selectedGameMode===_0xdeb502(0x235)){if(!isTouchActiveGame){if(_0x23a85b&&!p1FireInputWasDown)p1JustFiredSingle=![];if(!isPlayerTwoAI&&_0x39fee8&&!p2FireInputWasDown)p2JustFiredSingle=![];}}else{if(isTwoPlayerMode&&selectedGameMode===_0xdeb502(0x2f1)){if(!isTouchActiveGame){if(currentPlayer===0x1&&_0x23a85b&&!p1FireInputWasDown)p1JustFiredSingle=![];else{if(currentPlayer===0x2&&!isPlayerTwoAI){let _0x31523b=connectedGamepadIndexP2===null&&connectedGamepadIndex!==null,_0x12fb8e=connectedGamepadIndexP2===null&&connectedGamepadIndex!==null;_0x31523b&&_0x12fb8e?_0x23a85b&&!p1FireInputWasDown&&(p1JustFiredSingle=![]):_0x39fee8&&!p2FireInputWasDown&&(p2JustFiredSingle=![]);}}}}else{if(!isTouchActiveGame){if(_0x23a85b&&!p1FireInputWasDown)p1JustFiredSingle=![];}}}}leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![];let _0x45f7a0=![];if(isTouchActiveGame&&gameCanvas){if(isTwoPlayerMode&&selectedGameMode==='coop'){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x1b0b5d=ship1[_0xdeb502(0x2a8)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x1907e7=_0x23f0d9-_0x1b0b5d/0x2;_0x1907e7=Math[_0xdeb502(0x2df)](0x0,Math[_0xdeb502(0x305)](gameCanvas[_0xdeb502(0x2a8)]-_0x1b0b5d,_0x1907e7)),ship1['x']=_0x1907e7,ship1[_0xdeb502(0x1f9)]=_0x1907e7,_0x45f7a0=!![];}}else{if(ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1)){const _0x5162f1=ship[_0xdeb502(0x2a8)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x4a5d1b=_0x23f0d9-_0x5162f1/0x2;_0x4a5d1b=Math[_0xdeb502(0x2df)](0x0,Math[_0xdeb502(0x305)](gameCanvas[_0xdeb502(0x2a8)]-_0x5162f1,_0x4a5d1b)),ship['x']=_0x4a5d1b,ship[_0xdeb502(0x1f9)]=_0x4a5d1b,_0x45f7a0=!![];}}}if(isTwoPlayerMode&&selectedGameMode===_0xdeb502(0x235)){if(!_0x45f7a0){const _0x5a18ed=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture;_0x5a18ed&&(leftPressed=keyboardP1LeftDown||_0x5eb07e,rightPressed=keyboardP1RightDown||_0x5a252e);}if(!isPlayerTwoAI){const _0x354eb6=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture;_0x354eb6&&(p2LeftPressed=keyboardP2LeftDown||_0x5a0cd0,p2RightPressed=keyboardP2RightDown||_0x25a2c9);}}else{if(!_0x45f7a0){const _0x123dbc=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;if(_0x123dbc){if(currentPlayer===0x1||!isTwoPlayerMode)leftPressed=keyboardP1LeftDown||_0x5eb07e,rightPressed=keyboardP1RightDown||_0x5a252e;else{if(currentPlayer===0x2&&!isPlayerTwoAI&&selectedGameMode===_0xdeb502(0x2f1)){if(connectedGamepadIndexP2!==null)leftPressed=keyboardP2LeftDown||_0x5a0cd0,rightPressed=keyboardP2RightDown||_0x25a2c9;else connectedGamepadIndex!==null?(leftPressed=keyboardP2LeftDown||_0x5eb07e,rightPressed=keyboardP2RightDown||_0x5a252e):(leftPressed=keyboardP2LeftDown,rightPressed=keyboardP2RightDown);}}}}}if(isTwoPlayerMode&&selectedGameMode==='coop'){const _0x553b8e=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture&&!_0x4a8da8;if(_0x553b8e){shootPressed=isTouchActiveGame&&selectedFiringMode===_0xdeb502(0x205)&&(!isPlayerTwoAI||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xdeb502(0x2fb)&&_0x23f0d9<=gameCanvas[_0xdeb502(0x2a8)]/0x2)||p1FireInputWasDown;if(isShowingCaptureMessage&&isPlayer1ShipCaptured)shootPressed=![];}if(!isPlayerTwoAI){const _0x2aead5=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture&&!_0x4a8da8;if(_0x2aead5){p2ShootPressed=isTouchActiveGame&&selectedFiringMode===_0xdeb502(0x205)&&_0x23f0d9>gameCanvas[_0xdeb502(0x2a8)]/0x2||p2FireInputWasDown;if(isShowingCaptureMessage&&isPlayer2ShipCaptured)p2ShootPressed=![];}}}else{const _0x2b4d95=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!_0x4a8da8;if(_0x2b4d95){let _0x4b37de=![];if(currentPlayer===0x1||!isTwoPlayerMode)_0x4b37de=p1FireInputWasDown;else currentPlayer===0x2&&!isPlayerTwoAI&&selectedGameMode===_0xdeb502(0x2f1)&&(_0x4b37de=p2FireInputWasDown);shootPressed=isTouchActiveGame&&selectedFiringMode===_0xdeb502(0x205)||_0x4b37de;if(isShowingCaptureMessage&&isShipCaptured)shootPressed=![];}}if(isManualControl){if(isTwoPlayerMode&&selectedGameMode===_0xdeb502(0x235))shootPressed&&firePlayerBullet(_0xdeb502(0x247),![]),!isPlayerTwoAI&&p2ShootPressed&&firePlayerBullet(_0xdeb502(0x220),![]);else{if(shootPressed){if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2){}else firePlayerBullet(currentPlayer===0x1||!isTwoPlayerMode?_0xdeb502(0x247):_0xdeb502(0x220),![]);}}}}catch(_0x36b1ef){console[_0xdeb502(0x2ec)](_0xdeb502(0x2c3),_0x36b1ef),leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![];}}function aiControl(){const _0x163119=_0x4c0c0a;try{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')return;let _0x510c48=null,_0xc63b84=null,_0x4b7dfc=![],_0x52c268=![],_0x5ad16d=![],_0x244f23=0x0,_0x366cd5='ai',_0x2522df=![],_0x4ed1d7=![];if(isPlayerTwoAI&&selectedGameMode===_0x163119(0x2f1)&&currentPlayer===0x2){if(!ship||playerLives<=0x0||isShipCaptured||isShowingPlayerGameOverMessage){if(ship)ship[_0x163119(0x1f9)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x163119(0x2a8)]/0x2:0x0;return;}_0x510c48=ship,_0xc63b84=smoothedShipX,_0x4b7dfc=isDualShipActive,_0x52c268=isShipCaptured,_0x5ad16d=isInvincible,_0x244f23=playerLives,_0x366cd5='ai_p2',_0x2522df=!![],_0x4ed1d7=playerLives>0x1&&!isDualShipActive;}else{if(!isManualControl&&!isPlayerTwoAI){if(playerLives<=0x0||!ship||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isShipCaptured||isShowingCaptureMessage){if(ship)ship[_0x163119(0x1f9)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x163119(0x2a8)]/0x2:0x0;return;}_0x510c48=ship,_0xc63b84=smoothedShipX,_0x4b7dfc=isDualShipActive,_0x52c268=isShipCaptured,_0x5ad16d=isInvincible,_0x244f23=playerLives,_0x4ed1d7=playerLives>0x1&&!isDualShipActive;}else return;}if(_0xc63b84===undefined&&_0x510c48)_0xc63b84=_0x510c48['x'],(_0x2522df||!isManualControl&&!isPlayerTwoAI)&&(smoothedShipX=_0xc63b84);else{if(_0xc63b84===undefined&&!_0x510c48){_0xc63b84=gameCanvas?gameCanvas[_0x163119(0x2a8)]/0x2:0x0;(_0x2522df||!isManualControl&&!isPlayerTwoAI)&&(smoothedShipX=_0xc63b84);return;}}const _0x26c99d=Date[_0x163119(0x2ed)](),_0x54cc08=gameCanvas[_0x163119(0x2a8)],_0x34c9a6=gameCanvas['height'];let _0x4d2e40=_0x510c48[_0x163119(0x2a8)];_0x4b7dfc&&(_0x4d2e40=DUAL_SHIP_OFFSET_X+_0x510c48['width']);const _0x570edc=_0x510c48['x']+_0x4d2e40/0x2,_0x38245a=_0x510c48['y'],_0x4ee87b=_0x54cc08/0x2,_0x578f18=_0x4ee87b-_0x4d2e40/0x2,_0x2b8e95=showReadyMessage||showCSClearMessage||showCsHitsMessage||showPerfectMessage||showCsBonusScoreMessage||showExtraLifeMessage||isCsCompletionDelayActive||isShowingCaptureMessage||isShowingIntro;let _0x4b8022=_0xc63b84,_0x34a923=![],_0x26694f=![],_0x4f8fd9=_0xc63b84,_0x3b1808=null,_0x2d5abe=![];const _0x30854f=_0x4b7dfc;aiNeedsStabilization&&!_0x2b8e95&&(aiStabilizationEndTime=_0x26c99d+AI_STABILIZATION_DURATION,aiNeedsStabilization=![],_0xc63b84=_0x510c48['x'],(_0x2522df||!isManualControl&&!isPlayerTwoAI)&&(smoothedShipX=_0xc63b84));if(_0x26c99d<aiStabilizationEndTime&&!_0x2b8e95)_0x4b8022=_0x578f18;else{if(!_0x2b8e95){_0x26694f=![],_0x4f8fd9=_0xc63b84;if(!_0x5ad16d){let _0x58cb52=[];const _0x6f0b50=isChallengingStage?FINAL_DODGE_LOOKAHEAD*0.9:isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_LOOKAHEAD*1.1:FINAL_DODGE_LOOKAHEAD*1.2,_0x350589=isChallengingStage?FINAL_DODGE_BUFFER_BASE*0.9:isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_BUFFER*1.1:FINAL_DODGE_BUFFER_BASE*1.2,_0xfb73dc={'x':_0x510c48['x']-_0x350589,'y':_0x510c48['y']-_0x6f0b50,'width':_0x4d2e40+_0x350589*0x2,'height':_0x6f0b50+_0x510c48[_0x163119(0x2de)]};for(const _0x224327 of enemyBullets){if(_0x224327&&_0x224327['y']+_0x224327[_0x163119(0x2de)]>_0x510c48['y']-_0x510c48['height']*0x2&&_0x224327['y']<_0x34c9a6){const _0x56bd83={'x':_0x224327['x'],'y':_0x224327['y'],'width':_0x224327[_0x163119(0x2a8)],'height':_0x224327[_0x163119(0x2de)]};checkCollision(_0xfb73dc,_0x56bd83)&&_0x58cb52[_0x163119(0x2ae)](_0x224327);}}if(_0x58cb52[_0x163119(0x1e6)]>0x0){_0x26694f=!![];let _0x52a517=_0xc63b84,_0x2b807b=-Infinity;for(let _0x24787b=-0x1;_0x24787b<=0x1;_0x24787b+=0x2){const _0x23cbf4=_0x4d2e40*(0x2+Math['random']()*0.5)+(_0x58cb52[_0x163119(0x1e6)]>0x1?_0x4d2e40*0.5:0x0);let _0x26bd31=_0xc63b84+_0x24787b*_0x23cbf4;_0x26bd31=Math[_0x163119(0x2df)](AI_ANTI_CORNER_BUFFER,Math['min'](_0x54cc08-_0x4d2e40-AI_ANTI_CORNER_BUFFER,_0x26bd31));let _0x5ef29f=0x0;const _0x6e245a={'x':_0x26bd31-_0x350589/0x2,'y':_0x510c48['y']-_0x6f0b50,'width':_0x4d2e40+_0x350589,'height':_0x6f0b50+_0x510c48['height']};for(const _0x59720f of _0x58cb52){checkCollision(_0x6e245a,{'x':_0x59720f['x'],'y':_0x59720f['y'],'width':_0x59720f[_0x163119(0x2a8)],'height':_0x59720f[_0x163119(0x2de)]})&&_0x5ef29f++;}let _0x2e7a18=-_0x5ef29f;if(Math[_0x163119(0x1fc)](_0x26bd31-_0xc63b84)<_0x4d2e40*0.5)_0x2e7a18-=0xa;_0x2e7a18>_0x2b807b&&(_0x2b807b=_0x2e7a18,_0x52a517=_0x26bd31);}_0x4f8fd9=_0x52a517;}if(!_0x26694f){const _0x3558b3=AI_COLLISION_LOOKAHEAD*1.5,_0x4c23e6=FINAL_DODGE_BUFFER_BASE*1.5;for(const _0xef6122 of enemies){if(_0xef6122&&(_0xef6122['state']==='attacking'||_0xef6122[_0x163119(0x214)]===_0x163119(0x218)||_0xef6122['state']===_0x163119(0x291)||_0xef6122[_0x163119(0x214)]==='following_bezier_path')&&_0xef6122['y']+_0xef6122[_0x163119(0x2de)]>_0x510c48['y']-_0x3558b3/0x2&&_0xef6122['y']<_0x510c48['y']+_0x510c48[_0x163119(0x2de)]){const _0x53f946={'x':_0x510c48['x']-_0x4c23e6,'y':_0x510c48['y']-_0x3558b3,'width':_0x4d2e40+_0x4c23e6*0x2,'height':_0x3558b3+_0x510c48[_0x163119(0x2de)]},_0x203662={'x':_0xef6122['x'],'y':_0xef6122['y'],'width':_0xef6122[_0x163119(0x2a8)],'height':_0xef6122['height']};if(checkCollision(_0x53f946,_0x203662)){_0x26694f=!![];const _0x32b094=_0xef6122['x']+_0xef6122[_0x163119(0x2a8)]/0x2,_0x1ade82=_0x570edc<_0x32b094?-0x1:0x1,_0x3e1a2d=_0x4d2e40*(2.2+Math[_0x163119(0x262)]()*0.6);_0x4f8fd9=_0xc63b84+_0x1ade82*_0x3e1a2d;break;}}}}}if(_0x26694f)_0x4b8022=Math[_0x163119(0x2df)](AI_ANTI_CORNER_BUFFER,Math['min'](_0x54cc08-_0x4d2e40-AI_ANTI_CORNER_BUFFER,_0x4f8fd9)),_0x3b1808=null,_0x34a923=![];else{if(fallingShips[_0x163119(0x1e6)]>0x0&&!_0x52c268&&!isWaitingForRespawn&&!_0x4b7dfc){let _0x386713=null,_0x45dd69=Infinity;for(const _0x563b49 of fallingShips){if(_0x563b49&&!_0x563b49[_0x163119(0x264)]){const _0x13a7ad=Math[_0x163119(0x1fc)](_0x563b49['x']+_0x563b49[_0x163119(0x2a8)]/0x2-_0x570edc)+Math[_0x163119(0x1fc)](_0x563b49['y']-_0x510c48['y']);_0x13a7ad<_0x45dd69&&(_0x45dd69=_0x13a7ad,_0x386713=_0x563b49);}}_0x386713&&(_0x4b8022=_0x386713['x']+_0x386713['width']/0x2-_0x4d2e40/0x2,_0x34a923=![],_0x3b1808=null);}else{_0x2d5abe=![];if(_0x4ed1d7&&captureBeamActive&&capturingBossId&&!_0x52c268&&!isWaitingForRespawn){const _0x31bac5=enemies[_0x163119(0x228)](_0x25182b=>_0x25182b['id']===capturingBossId&&_0x25182b[_0x163119(0x274)]===ENEMY3_TYPE&&_0x25182b[_0x163119(0x214)]===_0x163119(0x1ec));if(_0x31bac5){const _0x3dfe81=_0x31bac5['x']+(_0x31bac5[_0x163119(0x274)]===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH)/0x2,_0x50c9ac=Math['abs'](_0x570edc-_0x3dfe81);_0x50c9ac<_0x4d2e40*0.8&&_0x26c99d-(_0x31bac5['captureStartTime']||0x0)>=AI_CAPTURE_BEAM_APPROACH_DELAY_MS&&(_0x4b8022=_0x3dfe81-_0x4d2e40/0x2,_0x34a923=![],_0x3b1808=null,_0x2d5abe=!![]);}}if(!_0x2d5abe){_0x3b1808=null;let _0x2acd21=-Infinity;for(const _0x1b8b8f of enemies){if(!_0x1b8b8f)continue;let _0x544950=0x0;const _0x56f586=_0x1b8b8f['x']+_0x1b8b8f[_0x163119(0x2a8)]/0x2,_0x4372dc=_0x56f586-_0x570edc,_0x58eba4=_0x38245a-(_0x1b8b8f['y']+_0x1b8b8f[_0x163119(0x2de)]);if(_0x58eba4<0x0&&_0x1b8b8f[_0x163119(0x214)]!==_0x163119(0x2ef)&&_0x1b8b8f[_0x163119(0x214)]!==_0x163119(0x218)&&_0x1b8b8f['state']!==_0x163119(0x2f0))continue;_0x544950=(_0x34c9a6-_0x1b8b8f['y'])*0x2-Math[_0x163119(0x1fc)](_0x4372dc)*0x3-_0x58eba4;if(_0x1b8b8f[_0x163119(0x214)]==='attacking'||_0x1b8b8f[_0x163119(0x214)]===_0x163119(0x218))_0x544950+=0xbb8;if(_0x1b8b8f[_0x163119(0x274)]===ENEMY3_TYPE&&!_0x1b8b8f[_0x163119(0x304)])_0x544950+=0x7d0;if(_0x1b8b8f[_0x163119(0x274)]===ENEMY3_TYPE&&_0x1b8b8f[_0x163119(0x304)])_0x544950+=0xfa0;if(_0x1b8b8f[_0x163119(0x274)]===ENEMY3_TYPE&&_0x1b8b8f[_0x163119(0x1dc)])_0x544950+=0x1388;_0x544950>_0x2acd21&&(_0x2acd21=_0x544950,_0x3b1808=_0x1b8b8f);}if(_0x3b1808){const _0x4565aa=_0x3b1808['x']+_0x3b1808[_0x163119(0x2a8)]/0x2;_0x4b8022=_0x4565aa-_0x4d2e40/0x2;const _0x102318=1.8;let _0x1cb9c0;if(isChallengingStage)_0x1cb9c0=_0x4d2e40*2.5;else _0x3b1808['state']==='in_grid'||_0x3b1808[_0x163119(0x214)]===_0x163119(0x1f4)?_0x1cb9c0=_0x4d2e40*(GRID_SHOOT_ALIGNMENT_FACTOR*_0x102318):_0x1cb9c0=_0x4d2e40*(FINAL_SHOOT_ALIGNMENT_THRESHOLD*_0x102318);const _0x74db37=Math[_0x163119(0x1fc)](_0x570edc-_0x4565aa);if(_0x74db37<_0x1cb9c0){let _0x5159d3=![];_0x4ed1d7&&_0x3b1808[_0x163119(0x274)]===ENEMY3_TYPE&&!_0x3b1808[_0x163119(0x1dc)]&&!captureAttemptMadeThisLevel&&!isFullGridWave&&(_0x3b1808[_0x163119(0x214)]===_0x163119(0x1dd)||_0x3b1808['state']===_0x163119(0x1f4)||_0x3b1808[_0x163119(0x214)]===_0x163119(0x218))&&(_0x5159d3=!![]),!_0x5159d3&&(_0x34a923=!![]);}}else _0x4b8022=_0x578f18,_0x34a923=![];}}}}}if(_0x510c48){_0xc63b84+=(_0x4b8022-_0xc63b84)*AI_SMOOTHING_FACTOR_MOVE,_0x510c48[_0x163119(0x1f9)]=_0xc63b84;if(_0x2522df)smoothedShipX=_0xc63b84;else!isManualControl&&!isPlayerTwoAI&&(smoothedShipX=_0xc63b84);}if(_0x34a923&&!_0x26694f&&!_0x2d5abe&&!_0x2b8e95){let _0x576681=![];_0x2522df?_0x576681=!![]:_0x26c99d>=aiCanShootTime&&(_0x576681=!![]),_0x576681&&!isShowingIntro&&(firePlayerBullet(_0x366cd5,![])&&(!_0x2522df&&(aiCanShootTime=_0x26c99d+SHOOT_COOLDOWN)));}}catch(_0x468bae){console['error'](_0x163119(0x20e),_0x468bae,_0x468bae[_0x163119(0x245)]),ship&&(ship[_0x163119(0x1f9)]=ship['x']),aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x163119(0x2a8)]/0x2:0x0;}}function aiControlCoop(){const _0x49e7ce=_0x4c0c0a;if(!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')||isPaused||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0){if(ship1)ship1['targetX']=ship1['x'];if(ship2)ship2[_0x49e7ce(0x1f9)]=ship2['x'];return;}const _0x9a8a97=Date['now'](),_0x2c0d56=gameCanvas[_0x49e7ce(0x2a8)],_0xf2f1f5=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x49e7ce(0x2fb),_0x2d72bb=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture,_0x500b65=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture,_0x4039ca=_0x375f9e=>{const _0xdd6fae=_0x49e7ce,_0x32c21c=_0x375f9e==='p1'&&isPlayer1ShowingGameOverMessage||_0x375f9e==='p2'&&isPlayer2ShowingGameOverMessage;return _0x32c21c||showReadyMessage||isCsCompletionDelayActive||isShowingIntro&&!(level===0x1&&coopPlayersReadyStartTime>0x0&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xdd6fae(0x2fb)));};let _0x11afa6=!![],_0xc922f=!![];if(coopAICaptureDiveAnticipationActive&&_0x9a8a97<coopAICaptureDiveAnticipationEndTime){if(!_0xf2f1f5)_0x11afa6=![];_0xc922f=![];}else coopAICaptureDiveAnticipationActive&&(coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0);if(_0x2d72bb&&ship1&&!_0xf2f1f5){if(smoothedShip1X===undefined)smoothedShip1X=ship1['x'];const _0x5bf759=_0x4039ca('p1');let {desiredTargetX:_0x1ea453,shouldTryShoot:_0x264702,targetEnemyForAI:_0x34654a}=calculateAIDesiredState(ship1,smoothedShip1X,player1IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer1Invincible,isPlayer1ShipCaptured,isPlayer1WaitingForRespawn,_0x9a8a97,_0x2c0d56,_0x5bf759,'p1');aiShip1TargetEnemy=_0x34654a,smoothedShip1X+=(_0x1ea453-smoothedShip1X)*AI_SMOOTHING_FACTOR_MOVE,ship1['targetX']=smoothedShip1X;const _0x53fe40=_0x34654a&&_0x34654a[_0x49e7ce(0x274)]===ENEMY3_TYPE&&_0x34654a[_0x49e7ce(0x1dc)]&&_0x34654a['id']===capturedBossIdWithMessage&&isPlayer2ShipCaptured;if(_0x264702&&_0x11afa6&&!(isShowingCaptureMessage&&isPlayer1ShipCaptured)){if(_0x53fe40||_0x9a8a97>=aiShip1CanShootTime){fireCoopAIBullet(ship1,player1IsDualShipActive,'player1');if(!_0x53fe40)aiShip1CanShootTime=_0x9a8a97+SHOOT_COOLDOWN;else aiShip1CanShootTime=_0x9a8a97+SHOOT_COOLDOWN/0x2;}}}if(_0x500b65&&ship2){if(smoothedShip2X===undefined)smoothedShip2X=ship2['x'];const _0x2ee252=_0x4039ca('p2');let {desiredTargetX:_0x33ac6a,shouldTryShoot:_0x6ac0d6,targetEnemyForAI:_0x3291cf}=calculateAIDesiredState(ship2,smoothedShip2X,player2IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer2Invincible,isPlayer2ShipCaptured,isPlayer2WaitingForRespawn,_0x9a8a97,_0x2c0d56,_0x2ee252,'p2');aiShip2TargetEnemy=_0x3291cf,smoothedShip2X+=(_0x33ac6a-smoothedShip2X)*AI_SMOOTHING_FACTOR_MOVE,ship2[_0x49e7ce(0x1f9)]=smoothedShip2X;const _0x99194=_0x3291cf&&_0x3291cf[_0x49e7ce(0x274)]===ENEMY3_TYPE&&_0x3291cf[_0x49e7ce(0x1dc)]&&_0x3291cf['id']===capturedBossIdWithMessage&&isPlayer1ShipCaptured;if(_0x6ac0d6&&_0xc922f&&!(isShowingCaptureMessage&&isPlayer2ShipCaptured)){if(_0x99194||_0x9a8a97>=aiShip2CanShootTime){fireCoopAIBullet(ship2,player2IsDualShipActive,isCoopAIDemoActive?_0x49e7ce(0x220):_0x49e7ce(0x2d1));if(!_0x99194)aiShip2CanShootTime=_0x9a8a97+SHOOT_COOLDOWN;else aiShip2CanShootTime=_0x9a8a97+SHOOT_COOLDOWN/0x2;}}}}function fireCoopAIBullet(_0x1ff125,_0x54d94a,_0x54bdf1){const _0x4d5566=_0x4c0c0a;if(!_0x1ff125)return![];const _0x4980a3=Date['now']();let _0x32cb42=![];if(_0x54bdf1===_0x4d5566(0x247)&&isPlayer1ShowingGameOverMessage)_0x32cb42=!![];if((_0x54bdf1==='player2'||_0x54bdf1===_0x4d5566(0x2d1))&&isPlayer2ShowingGameOverMessage)_0x32cb42=!![];let _0x4b5c59=isPaused||!isInGameState||gameOverSequenceStartTime>0x0||_0x32cb42;if(_0x4b5c59)return![];if(_0x54bdf1===_0x4d5566(0x247)&&isPlayer1ShipCaptured)return![];if((_0x54bdf1===_0x4d5566(0x220)||_0x54bdf1==='ai_p2')&&isPlayer2ShipCaptured)return![];try{const _0x283f23=_0x1ff125['y'];let _0x4bb189=0x0;const _0x33d3c6=_0x54bdf1;if(_0x54d94a){const _0xf4a8b7=_0x1ff125['x']+_0x1ff125['width']/0x2,_0x1ce820=_0x1ff125['x']+DUAL_SHIP_OFFSET_X+_0x1ff125[_0x4d5566(0x2a8)]/0x2,_0x124200=_0xf4a8b7-PLAYER_BULLET_WIDTH/0x2,_0x47ae46=_0x1ce820-PLAYER_BULLET_WIDTH/0x2;bullets[_0x4d5566(0x2ae)]({'x':_0x124200,'y':_0x283f23,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x33d3c6}),bullets[_0x4d5566(0x2ae)]({'x':_0x47ae46,'y':_0x283f23,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x33d3c6}),_0x4bb189=0x2;}else{const _0x3ac30b=_0x1ff125['x']+_0x1ff125['width']/0x2-PLAYER_BULLET_WIDTH/0x2;bullets[_0x4d5566(0x2ae)]({'x':_0x3ac30b,'y':_0x283f23,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x33d3c6}),_0x4bb189=0x1;}playSound('playerShootSound',![],0.4);if(_0x54bdf1===_0x4d5566(0x247))player1ShotsFired+=_0x4bb189,player1LastShotTime=_0x4980a3,aiShip1LastShotTime=_0x4980a3;else(_0x54bdf1==='player2'||_0x54bdf1===_0x4d5566(0x2d1))&&(player2ShotsFired+=_0x4bb189,player2LastShotTime=_0x4980a3,aiShip2LastShotTime=_0x4980a3);return!![];}catch(_0x45b976){return console[_0x4d5566(0x2ec)]('Error\x20creating\x20CO-OP\x20AI\x20bullet\x20for\x20'+_0x54bdf1+':',_0x45b976),![];}}function _0xab6d(_0x3c384a,_0x473c0e){const _0x570659=_0x5706();return _0xab6d=function(_0xab6ded,_0x4265af){_0xab6ded=_0xab6ded-0x1cd;let _0x388972=_0x570659[_0xab6ded];return _0x388972;},_0xab6d(_0x3c384a,_0x473c0e);}function calculateAIDesiredState(_0x13e95f,_0x2fc821,_0x4ec78a,_0x1e4505,_0x45641a,_0x5c9a11,_0x3c49ff,_0x55a273,_0x431a9c,_0x3d09b0,_0x3aa937,_0x1afe06,_0x5c5f2d){const _0x1de2e4=_0x4c0c0a;let _0x2122df=_0x2fc821,_0x25a5bc=![],_0x2549cb=null,_0x441ed4=![],_0x482eab=![],_0x2e90b5=![],_0x3529e2=![];const _0x22059d=gameCanvas[_0x1de2e4(0x2de)],_0x3b94e9=_0x13e95f['width']+(_0x4ec78a?DUAL_SHIP_OFFSET_X:0x0),_0xedb523=_0x13e95f['x']+_0x3b94e9/0x2,_0x3c6d32=_0x13e95f['y'],_0x213738=_0x5c5f2d==='p1'?player1Lives:_0x5c5f2d===_0x1de2e4(0x2d1)||_0x5c5f2d==='p2'?player2Lives:0x0,_0x28be7a=_0x213738>0x1&&!_0x4ec78a;let _0x4646c0=_0x3aa937/0x2;const _0xa17659=isShowingIntro||isShowingCoopPlayersReady,_0x53970b=isCoopAIDemoActive&&_0xa17659&&!(isChallengingStage&&isEntrancePhaseActive),_0x52f2e9=isCoopAIDemoActive&&(_0x5c5f2d==='p1'&&player1Lives>0x0&&player2Lives<=0x0||(_0x5c5f2d==='p2'||_0x5c5f2d===_0x1de2e4(0x2d1))&&player2Lives>0x0&&player1Lives<=0x0);if(_0x53970b&&_0x52f2e9)_0x4646c0=_0x3aa937/0x2;else{if(_0x5c5f2d==='p1')_0x4646c0=_0x3aa937*0.25+Math['sin'](_0x3d09b0/(AI_WIGGLE_PERIOD*1.1))*(AI_WIGGLE_AMPLITUDE*0.8);else(_0x5c5f2d==='p2'||_0x5c5f2d===_0x1de2e4(0x2d1))&&(_0x4646c0=_0x3aa937*0.75+Math[_0x1de2e4(0x2a4)](_0x3d09b0/(AI_WIGGLE_PERIOD*0.9))*(AI_WIGGLE_AMPLITUDE*0.8));}let _0x48b844=_0x4646c0-_0x3b94e9/0x2;if(_0x1afe06||_0x55a273||_0x431a9c||_0x5c5f2d==='p1'&&player1NeedsRespawnAfterCapture||(_0x5c5f2d==='p2'||_0x5c5f2d===_0x1de2e4(0x2d1))&&player2NeedsRespawnAfterCapture)return _0x53970b&&_0x52f2e9?_0x2122df=_0x48b844:_0x2122df=_0x48b844,(_0x55a273||_0x431a9c||_0x5c5f2d==='p1'&&player1NeedsRespawnAfterCapture||(_0x5c5f2d==='p2'||_0x5c5f2d===_0x1de2e4(0x2d1))&&player2NeedsRespawnAfterCapture)&&(_0x2122df=_0x13e95f['x']),{'desiredTargetX':_0x2122df,'shouldTryShoot':![],'targetEnemyForAI':null};const _0x424eaf=_0x5c5f2d==='p1'?'p2':'p1',_0x3d16a7=_0x424eaf==='p1'&&isPlayer1ShipCaptured||_0x424eaf==='p2'&&isPlayer2ShipCaptured,_0x3bc6eb=_0x424eaf==='p1'&&isPlayer1ShowingGameOverMessage||_0x424eaf==='p2'&&isPlayer2ShowingGameOverMessage;let _0x226931=null,_0x2081dd=!![];if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(_0x3d16a7&&!_0x3bc6eb&&capturedBossIdWithMessage){const _0x386b78=_0x424eaf==='p1'?coopPartner1CapturedTime:coopPartner2CapturedTime;_0x386b78>0x0&&_0x3d09b0-_0x386b78<COOP_AI_SAVE_PARTNER_DELAY_MS&&(_0x2081dd=![]),_0x226931=_0x1e4505['find'](_0x4b5f20=>_0x4b5f20['id']===capturedBossIdWithMessage&&_0x4b5f20['type']===ENEMY3_TYPE&&_0x4b5f20[_0x1de2e4(0x1dc)]);}}if(_0x226931&&!_0x4ec78a&&_0x2081dd){_0x2e90b5=!![],_0x2549cb=_0x226931;const _0x23992f=_0x226931['x']+_0x226931[_0x1de2e4(0x2a8)]/0x2;_0x2122df=_0x23992f-_0x3b94e9/0x2,_0x25a5bc=!![],_0x441ed4=![];if(!_0x3c49ff){let _0x31099e=[];const _0x441fb6=FINAL_DODGE_LOOKAHEAD*0.4,_0x8991c6=FINAL_DODGE_BUFFER_BASE*0.3,_0x22e892={'x':Math[_0x1de2e4(0x305)](_0xedb523,_0x23992f)-_0x8991c6,'y':_0x13e95f['y']-_0x441fb6,'width':Math[_0x1de2e4(0x1fc)](_0xedb523-_0x23992f)+_0x3b94e9+_0x8991c6*0x2,'height':_0x441fb6+_0x13e95f[_0x1de2e4(0x2de)]};for(const _0x54119b of _0x45641a){if(_0x54119b&&_0x54119b['y']+_0x54119b[_0x1de2e4(0x2de)]>_0x13e95f['y']-_0x13e95f[_0x1de2e4(0x2de)]&&_0x54119b['y']<_0x22059d){const _0x5b5144={'x':_0x54119b['x'],'y':_0x54119b['y'],'width':_0x54119b[_0x1de2e4(0x2a8)],'height':_0x54119b[_0x1de2e4(0x2de)]};checkCollision(_0x22e892,_0x5b5144)&&_0x31099e['push'](_0x54119b);}}if(_0x31099e[_0x1de2e4(0x1e6)]>0x0){_0x441ed4=!![];const _0x26c058=_0x2fc821<_0x3aa937/0x2?-0x1:0x1;_0x2122df=_0x2fc821+_0x26c058*(_0x3b94e9*0.6),_0x25a5bc=![];}}return _0x2122df=Math[_0x1de2e4(0x2df)](AI_EDGE_BUFFER,Math[_0x1de2e4(0x305)](_0x3aa937-_0x3b94e9-AI_EDGE_BUFFER,_0x2122df)),{'desiredTargetX':_0x2122df,'shouldTryShoot':_0x25a5bc,'targetEnemyForAI':_0x2549cb};}if(!_0x3c49ff){let _0x5530d2=[];const _0x3e3a10=FINAL_DODGE_LOOKAHEAD*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x1de2e4(0x2fb)?1.6:0.8),_0x10e774=FINAL_DODGE_BUFFER_BASE*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x1de2e4(0x2fb)?1.7:0.8),_0x2ede4c={'x':_0x13e95f['x']-_0x10e774,'y':_0x13e95f['y']-_0x3e3a10,'width':_0x3b94e9+_0x10e774*0x2,'height':_0x3e3a10+_0x13e95f[_0x1de2e4(0x2de)]};for(const _0x534dcf of _0x45641a){if(_0x534dcf&&_0x534dcf['y']+_0x534dcf[_0x1de2e4(0x2de)]>_0x13e95f['y']-_0x13e95f[_0x1de2e4(0x2de)]*1.5&&_0x534dcf['y']<_0x22059d){const _0x33fb0b={'x':_0x534dcf['x'],'y':_0x534dcf['y'],'width':_0x534dcf[_0x1de2e4(0x2a8)],'height':_0x534dcf[_0x1de2e4(0x2de)]};checkCollision(_0x2ede4c,_0x33fb0b)&&_0x5530d2[_0x1de2e4(0x2ae)](_0x534dcf);}}if(_0x5530d2['length']>0x0){_0x441ed4=!![];let _0x4e2d23=_0x2fc821;const _0xc73d79=_0x3b94e9*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x1de2e4(0x2fb)?0x3:0x2);let _0x57d795=0x0,_0x12a614=0x0,_0x1b6f83=0x0;const _0x4e96c7=_0x13e95f['x']+_0x3b94e9/0x2;for(const _0x2179a1 of _0x5530d2){if(_0x2179a1['x']<_0x4e96c7-_0x3b94e9*0.5)_0x12a614++;else{if(_0x2179a1['x']>_0x4e96c7+_0x3b94e9*0.5)_0x1b6f83++;else _0x57d795++;}}if(_0x12a614<=_0x1b6f83&&_0x12a614<=_0x57d795)_0x4e2d23=_0x2fc821-_0xc73d79-Math[_0x1de2e4(0x262)]()*_0x3b94e9*0.4;else{if(_0x1b6f83<=_0x12a614&&_0x1b6f83<=_0x57d795)_0x4e2d23=_0x2fc821+_0xc73d79+Math['random']()*_0x3b94e9*0.4;else{if(_0x2fc821<_0x4646c0)_0x4e2d23=_0x4646c0+_0xc73d79+Math[_0x1de2e4(0x262)]()*_0x3b94e9*0.7;else _0x4e2d23=_0x4646c0-_0xc73d79-Math[_0x1de2e4(0x262)]()*_0x3b94e9*0.7;}}_0x2122df=_0x4e2d23;}if(!_0x441ed4){const _0x1f643b=AI_COLLISION_LOOKAHEAD*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x1de2e4(0x2fb)?0x1:0.75),_0x1148ed=AI_COLLISION_BUFFER*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'?0x1:0.8);for(const _0x44d46e of _0x1e4505){if(!_0x44d46e)continue;if(!_0x2081dd&&_0x226931&&_0x44d46e['id']===_0x226931['id'])continue;if((_0x44d46e[_0x1de2e4(0x214)]===_0x1de2e4(0x2ef)||_0x44d46e[_0x1de2e4(0x214)]===_0x1de2e4(0x218))&&_0x44d46e['y']+_0x44d46e[_0x1de2e4(0x2de)]>_0x3c6d32-_0x1f643b&&_0x44d46e['y']<_0x3c6d32+_0x13e95f[_0x1de2e4(0x2de)]*1.5){const _0x2535ed={'x':_0x13e95f['x']-_0x1148ed,'y':_0x13e95f['y']-_0x1f643b,'width':_0x3b94e9+_0x1148ed*0x2,'height':_0x1f643b+_0x13e95f['height']},_0x398527={'x':_0x44d46e['x'],'y':_0x44d46e['y'],'width':_0x44d46e[_0x1de2e4(0x2a8)],'height':_0x44d46e['height']};if(checkCollision(_0x2535ed,_0x398527)){_0x441ed4=!![],_0x2549cb=null,_0x25a5bc=![];const _0x493412=_0x44d46e['x']+_0x44d46e[_0x1de2e4(0x2a8)]/0x2;_0x2122df=_0x2fc821+(_0xedb523<_0x493412?-0x1:0x1)*(_0x3b94e9*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x1de2e4(0x2fb)?2.2:1.9));break;}}}}}if(!_0x441ed4&&_0x28be7a&&captureBeamActive&&capturingBossId&&!_0x55a273){if(aiPlayerActivelySeekingCaptureById===null||aiPlayerActivelySeekingCaptureById===_0x5c5f2d){const _0x5f3a8e=_0x1e4505[_0x1de2e4(0x228)](_0x37f412=>_0x37f412['id']===capturingBossId);if(_0x5f3a8e&&_0x5f3a8e[_0x1de2e4(0x214)]===_0x1de2e4(0x1ec)){aiPlayerActivelySeekingCaptureById===null&&(aiPlayerActivelySeekingCaptureById=_0x5c5f2d);if(aiPlayerActivelySeekingCaptureById===_0x5c5f2d){if(_0x3d09b0-(_0x5f3a8e[_0x1de2e4(0x1de)]||0x0)>=AI_CAPTURE_BEAM_APPROACH_DELAY_MS){_0x3529e2=!![];const _0x33b13f=_0x5f3a8e['x']+(_0x5f3a8e[_0x1de2e4(0x274)]===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH)/0x2;_0x2122df=_0x33b13f-_0x3b94e9/0x2,_0x25a5bc=![],_0x2549cb=null;}else _0x2122df=_0x48b844,_0x25a5bc=![],_0x2549cb=null;}}else aiPlayerActivelySeekingCaptureById===_0x5c5f2d&&(aiPlayerActivelySeekingCaptureById=null);}}else aiPlayerActivelySeekingCaptureById===_0x5c5f2d&&!(_0x28be7a&&captureBeamActive&&capturingBossId&&!_0x55a273)&&(aiPlayerActivelySeekingCaptureById=null);if(!_0x441ed4&&!_0x3529e2&&!_0x4ec78a){const _0x731971=_0x5c9a11[_0x1de2e4(0x228)](_0x1ea503=>_0x1ea503[_0x1de2e4(0x21b)]===_0x5c5f2d&&!_0x1ea503[_0x1de2e4(0x264)]);_0x731971&&(_0x482eab=!![],_0x2122df=_0x731971['x']+_0x731971[_0x1de2e4(0x2a8)]/0x2-_0x3b94e9/0x2,_0x25a5bc=![],_0x2549cb=null);}if(!_0x441ed4&&!_0x3529e2&&!_0x482eab&&!_0x2e90b5){let _0x2c0cc0=-Infinity,_0x48d8ab=![],_0x14e9c5=null;for(const _0x4606ad of _0x1e4505){if(!_0x4606ad)continue;if(!_0x2081dd&&_0x226931&&_0x4606ad['id']===_0x226931['id'])continue;let _0x247ad7=![];if(_0x4606ad[_0x1de2e4(0x274)]===ENEMY3_TYPE&&_0x4606ad[_0x1de2e4(0x1dc)]&&_0x213738<=0x1){const _0x58e377=(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x1de2e4(0x2fb))&&_0x4606ad['id']===capturedBossIdWithMessage&&_0x3d16a7;!_0x58e377&&(_0x247ad7=!![]);}let _0x5d61b1=0x0;const _0x4072aa=_0x4606ad['x']+_0x4606ad['width']/0x2,_0x35d6f5=_0x4072aa-_0xedb523,_0x529a27=_0x3c6d32-(_0x4606ad['y']+_0x4606ad[_0x1de2e4(0x2de)]);if(_0x529a27<0x0&&_0x4606ad[_0x1de2e4(0x214)]!==_0x1de2e4(0x2ef)&&_0x4606ad[_0x1de2e4(0x214)]!==_0x1de2e4(0x218)&&_0x4606ad['state']!==_0x1de2e4(0x2f0))continue;let _0x1941cc=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(_0x5c5f2d==='p1'&&_0x4072aa<_0x3aa937/0x2)_0x1941cc=0x1388;else{if((_0x5c5f2d==='p2'||_0x5c5f2d===_0x1de2e4(0x2d1))&&_0x4072aa>=_0x3aa937/0x2)_0x1941cc=0x1388;}}_0x5d61b1=_0x1941cc+(_0x22059d-_0x4606ad['y'])*0x2-Math[_0x1de2e4(0x1fc)](_0x35d6f5)*0x3-_0x529a27;if(_0x4606ad[_0x1de2e4(0x214)]===_0x1de2e4(0x2ef)||_0x4606ad[_0x1de2e4(0x214)]===_0x1de2e4(0x218))_0x5d61b1+=0xbb8;if(_0x4606ad['type']===ENEMY3_TYPE&&!_0x4606ad[_0x1de2e4(0x304)])_0x5d61b1+=0x7d0;if(_0x4606ad['type']===ENEMY3_TYPE&&_0x4606ad['isDamaged'])_0x5d61b1+=0xfa0;_0x4606ad[_0x1de2e4(0x274)]===ENEMY3_TYPE&&_0x4606ad['hasCapturedShip']&&(!_0x247ad7?_0x5d61b1+=0x1388:_0x5d61b1-=0x2710);if(_0x5d61b1>_0x2c0cc0){_0x2c0cc0=_0x5d61b1,_0x14e9c5=_0x4606ad;let _0x59e35c=![];if(_0x14e9c5[_0x1de2e4(0x274)]===ENEMY3_TYPE&&!_0x14e9c5[_0x1de2e4(0x1dc)]&&!isFullGridWave){_0x28be7a&&!captureAttemptMadeThisLevel&&(_0x14e9c5['state']===_0x1de2e4(0x1dd)||_0x14e9c5['state']===_0x1de2e4(0x1f4)||_0x14e9c5[_0x1de2e4(0x214)]===_0x1de2e4(0x218))&&(_0x59e35c=!![]);if(_0x4ec78a){const _0x2de00b=_0x5c5f2d==='p1'?'p2':'p1';let _0x29e1b8=![];_0x2de00b==='p1'?ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture&&!player1IsDualShipActive&&(_0x29e1b8=!![]):ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture&&!player2IsDualShipActive&&(_0x29e1b8=!![]),_0x29e1b8&&(_0x59e35c=!![]);}}if(_0x247ad7&&_0x14e9c5===_0x4606ad)Math[_0x1de2e4(0x1fc)](_0xedb523-(_0x14e9c5['x']+_0x14e9c5[_0x1de2e4(0x2a8)]/0x2))<_0x3b94e9*1.1?_0x48d8ab=!![]:_0x48d8ab=![];else{if(_0x59e35c)_0x48d8ab=![];else Math[_0x1de2e4(0x1fc)](_0xedb523-(_0x14e9c5['x']+_0x14e9c5['width']/0x2))<_0x3b94e9*0.9?_0x48d8ab=!![]:_0x48d8ab=![];}}}_0x2549cb=_0x14e9c5,_0x25a5bc=_0x48d8ab;if(_0x2549cb){let _0x18a9e1=![];if(_0x2549cb['type']===ENEMY3_TYPE&&_0x2549cb['hasCapturedShip']&&_0x213738<=0x1){const _0x2166c4=(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x1de2e4(0x2fb))&&_0x2549cb['id']===capturedBossIdWithMessage&&_0x3d16a7;!_0x2166c4&&(_0x18a9e1=!![]);}if(_0x18a9e1)_0x2122df=_0x48b844;else{const _0x581498=_0x2549cb['x']+_0x2549cb[_0x1de2e4(0x2a8)]/0x2;_0x2122df=_0x581498-_0x3b94e9/0x2;}}else _0x2122df=_0x48b844,_0x25a5bc=![];}return _0x2122df=Math[_0x1de2e4(0x2df)](AI_EDGE_BUFFER,Math[_0x1de2e4(0x305)](_0x3aa937-_0x3b94e9-AI_EDGE_BUFFER,_0x2122df)),{'desiredTargetX':_0x2122df,'shouldTryShoot':_0x25a5bc,'targetEnemyForAI':_0x2549cb};}function findAndDetachEnemy(){const _0x800dd6=_0x4c0c0a;try{let _0x4dbe0f=![];isTwoPlayerMode&&selectedGameMode===_0x800dd6(0x235)?_0x4dbe0f=isPlayer1ShipCaptured||isPlayer2ShipCaptured:_0x4dbe0f=isShipCaptured;if(!isFullGridWave&&_0x4dbe0f){const _0x385287=enemies['find'](_0x1b3d0a=>_0x1b3d0a&&_0x1b3d0a[_0x800dd6(0x274)]===ENEMY3_TYPE&&_0x1b3d0a[_0x800dd6(0x1dc)]&&_0x1b3d0a[_0x800dd6(0x214)]===_0x800dd6(0x1dd));if(_0x385287){_0x385287[_0x800dd6(0x29d)]=!![],_0x385287[_0x800dd6(0x1fb)]=_0x800dd6(0x2f1);const _0x2dcf93=new Set([_0x385287['id']]);return resetJustReturnedFlags(_0x2dcf93),[_0x385287];}}if(isEntrancePhaseActive)return null;let _0x4de2fa=enemies[_0x800dd6(0x2c1)](_0x3e78d6=>_0x3e78d6&&_0x3e78d6[_0x800dd6(0x214)]===_0x800dd6(0x1dd)&&!_0x3e78d6['justReturned']);if(_0x4de2fa[_0x800dd6(0x1e6)]===0x0){_0x4de2fa=enemies[_0x800dd6(0x2c1)](_0x23a11c=>_0x23a11c&&_0x23a11c[_0x800dd6(0x214)]===_0x800dd6(0x1dd));if(_0x4de2fa['length']===0x0)return null;}if(_0x4de2fa[_0x800dd6(0x1e6)]===0x0)return null;_0x4de2fa[_0x800dd6(0x281)]((_0x2a6723,_0x3fa322)=>(_0x3fa322[_0x800dd6(0x26d)]||0x0)-(_0x2a6723[_0x800dd6(0x26d)]||0x0));const _0x1fe733=_0x4de2fa[_0x800dd6(0x1e6)]<=0x3;let _0x327108=[];const _0xd0433d=_0x800dd6(0x2f1);gridJustCompleted&&(gridJustCompleted=![]);let _0x14e3c0=![];if(level>0x1&&!_0x1fe733&&_0x4de2fa[_0x800dd6(0x1e6)]>=0x3){const _0x47d96b=_0x4de2fa[_0x800dd6(0x2c1)](_0x1eb722=>_0x1eb722['type']===ENEMY3_TYPE&&!_0x1eb722['hasCapturedShip']);for(const _0x4d2d04 of _0x47d96b){const _0x2d2ba5=_0x4de2fa[_0x800dd6(0x228)](_0x104988=>_0x104988[_0x800dd6(0x274)]===ENEMY2_TYPE&&_0x104988[_0x800dd6(0x26d)]===_0x4d2d04[_0x800dd6(0x26d)]&&_0x104988[_0x800dd6(0x28a)]===_0x4d2d04[_0x800dd6(0x28a)]-0x1),_0x30b7fd=_0x4de2fa[_0x800dd6(0x228)](_0xf44981=>_0xf44981[_0x800dd6(0x274)]===ENEMY2_TYPE&&_0xf44981[_0x800dd6(0x26d)]===_0x4d2d04['gridRow']&&_0xf44981[_0x800dd6(0x28a)]===_0x4d2d04['gridCol']+0x1);if(_0x2d2ba5&&_0x30b7fd){_0x327108=[_0x4d2d04,_0x2d2ba5,_0x30b7fd],_0x14e3c0=!![];break;}}}if(!_0x14e3c0&&!_0x1fe733){const _0x53a954=_0x4de2fa['filter'](_0x10c337=>_0x10c337[_0x800dd6(0x274)]===ENEMY1_TYPE),_0x6b8ca1=scaleValue(level,BASE_BEE_GROUP_ATTACK_PROBABILITY,MAX_BEE_GROUP_ATTACK_PROBABILITY)*1.2;if(_0x53a954['length']>=0x2&&Math[_0x800dd6(0x262)]()<_0x6b8ca1){const _0x332c54=scaleValue(level,BASE_BEE_TRIPLE_ATTACK_PROBABILITY,MAX_BEE_TRIPLE_ATTACK_PROBABILITY)*1.1,_0x5ed5c4=_0x53a954[_0x800dd6(0x1e6)]>=0x3&&Math[_0x800dd6(0x262)]()<_0x332c54?0x3:0x2;let _0x2e6076=![];_0x53a954[_0x800dd6(0x281)](()=>Math[_0x800dd6(0x262)]()-0.5);for(let _0x39f4a2=0x0;_0x39f4a2<_0x53a954[_0x800dd6(0x1e6)];_0x39f4a2++){const _0x18f3a1=_0x53a954[_0x39f4a2];let _0x308529=[_0x18f3a1];const _0xe30ac2=_0x53a954[_0x800dd6(0x2c1)](_0x2f7031=>_0x2f7031['id']!==_0x18f3a1['id']&&_0x2f7031[_0x800dd6(0x26d)]===_0x18f3a1[_0x800dd6(0x26d)]);_0xe30ac2[_0x800dd6(0x281)]((_0x34f1cf,_0x57db8b)=>Math[_0x800dd6(0x1fc)](_0x34f1cf[_0x800dd6(0x28a)]-_0x18f3a1[_0x800dd6(0x28a)])-Math[_0x800dd6(0x1fc)](_0x57db8b[_0x800dd6(0x28a)]-_0x18f3a1[_0x800dd6(0x28a)]));for(let _0x5217ef=0x0;_0x5217ef<_0xe30ac2[_0x800dd6(0x1e6)]&&_0x308529[_0x800dd6(0x1e6)]<_0x5ed5c4;_0x5217ef++){_0x308529[_0x800dd6(0x2ae)](_0xe30ac2[_0x5217ef]);}if(_0x308529['length']===_0x5ed5c4){_0x327108=_0x308529,_0x14e3c0=!![],_0x2e6076=!![];break;}}!_0x2e6076&&_0x53a954[_0x800dd6(0x1e6)]>=_0x5ed5c4&&(_0x327108=_0x53a954[_0x800dd6(0x240)](0x0,_0x5ed5c4),_0x14e3c0=!![]);}}if(!_0x14e3c0&&!_0x1fe733){const _0xaafbd3=_0x4de2fa[_0x800dd6(0x2c1)](_0x11f65f=>_0x11f65f[_0x800dd6(0x274)]===ENEMY2_TYPE),_0x358232=0.2;if(_0xaafbd3['length']>=0x2&&Math[_0x800dd6(0x262)]()<_0x358232){const _0x228d5d=0x2;let _0xf46116=![];_0xaafbd3[_0x800dd6(0x281)](()=>Math[_0x800dd6(0x262)]()-0.5);for(let _0x2a1ba4=0x0;_0x2a1ba4<_0xaafbd3[_0x800dd6(0x1e6)];_0x2a1ba4++){const _0x543297=_0xaafbd3[_0x2a1ba4];let _0x3af029=[_0x543297];const _0x517d98=_0xaafbd3['filter'](_0x4646fe=>_0x4646fe['id']!==_0x543297['id']&&_0x4646fe[_0x800dd6(0x26d)]===_0x543297['gridRow']);_0x517d98['sort']((_0x3feef3,_0x20bb88)=>Math[_0x800dd6(0x1fc)](_0x3feef3[_0x800dd6(0x28a)]-_0x543297[_0x800dd6(0x28a)])-Math[_0x800dd6(0x1fc)](_0x20bb88[_0x800dd6(0x28a)]-_0x543297[_0x800dd6(0x28a)]));for(let _0x25bfdf=0x0;_0x25bfdf<_0x517d98['length']&&_0x3af029[_0x800dd6(0x1e6)]<_0x228d5d;_0x25bfdf++){_0x3af029[_0x800dd6(0x2ae)](_0x517d98[_0x25bfdf]);}if(_0x3af029[_0x800dd6(0x1e6)]===_0x228d5d){_0x327108=_0x3af029,_0x14e3c0=!![],_0xf46116=!![];break;}}!_0xf46116&&_0xaafbd3[_0x800dd6(0x1e6)]>=_0x228d5d&&(_0x327108=_0xaafbd3[_0x800dd6(0x240)](0x0,_0x228d5d),_0x14e3c0=!![]);}}if(!_0x14e3c0&&_0x4de2fa[_0x800dd6(0x1e6)]>0x0){const _0x418f5f=_0x4de2fa[0x0];_0x327108['push'](_0x418f5f);if(_0x4de2fa[_0x800dd6(0x1e6)]>0x1&&!_0x1fe733&&Math[_0x800dd6(0x262)]()<0.2){const _0x542ed6=_0x4de2fa['find'](_0x966092=>_0x966092['id']!==_0x418f5f['id']&&_0x966092['gridRow']===_0x418f5f[_0x800dd6(0x26d)]&&_0x966092['gridCol']===_0x418f5f['gridCol']-0x1),_0x10954e=_0x4de2fa[_0x800dd6(0x228)](_0x2d45fe=>_0x2d45fe['id']!==_0x418f5f['id']&&_0x2d45fe[_0x800dd6(0x26d)]===_0x418f5f[_0x800dd6(0x26d)]&&_0x2d45fe['gridCol']===_0x418f5f['gridCol']+0x1),_0x4ff5cd=_0x542ed6||_0x10954e;if(_0x4ff5cd){const _0x23cd97=_0x418f5f['type']===ENEMY3_TYPE&&_0x4ff5cd['type']===ENEMY3_TYPE;!_0x23cd97&&_0x327108[_0x800dd6(0x2ae)](_0x4ff5cd);}}_0x14e3c0=!![];}if(_0x327108[_0x800dd6(0x1e6)]>0x0){_0x327108=_0x327108[_0x800dd6(0x2c1)](_0x27fde6=>_0x27fde6);if(_0x327108[_0x800dd6(0x1e6)]===0x0)return null;_0x327108[_0x800dd6(0x1cd)](_0x41fd71=>{const _0xbe5d9d=_0x800dd6;_0x41fd71&&(_0x41fd71['justReturned']=!![],_0x41fd71[_0xbe5d9d(0x1fb)]=_0xd0433d);});const _0x3bde12=new Set(_0x327108['map'](_0x25e43f=>_0x25e43f['id']));return resetJustReturnedFlags(_0x3bde12),_0x327108;}return null;}catch(_0x4c3680){return console[_0x800dd6(0x2ec)](_0x800dd6(0x25a),_0x4c3680),null;}}function triggerImmediateCaptureDive(){const _0x208c17=_0x4c0c0a;try{let _0x4b5a5b=![],_0x3bd86a=null;if(isTwoPlayerMode&&selectedGameMode===_0x208c17(0x235)){const _0x10883c=ship1&&player1Lives>0x1&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn,_0x3d73c5=ship2&&player2Lives>0x1&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn;if((_0x10883c||_0x3d73c5)&&!captureAttemptMadeThisLevel){_0x4b5a5b=!![];if(_0x10883c&&_0x3d73c5)_0x3bd86a=Math[_0x208c17(0x262)]()<0.5?ship1:ship2;else{if(_0x10883c)_0x3bd86a=ship1;else _0x3d73c5&&(_0x3bd86a=ship2);}}}else playerLives>0x1&&ship&&!isShipCaptured&&!isWaitingForRespawn&&!captureAttemptMadeThisLevel&&(_0x4b5a5b=!![],_0x3bd86a=ship);if(isChallengingStage||!_0x4b5a5b||!_0x3bd86a)return;const _0x1f9443=enemies[_0x208c17(0x2c1)](_0x54e9df=>_0x54e9df&&_0x54e9df[_0x208c17(0x214)]===_0x208c17(0x1dd)&&_0x54e9df[_0x208c17(0x274)]===ENEMY3_TYPE&&!_0x54e9df['hasCapturedShip']&&!_0x54e9df[_0x208c17(0x20d)]);if(_0x1f9443[_0x208c17(0x1e6)]>0x0){const _0x43eb97=_0x1f9443[Math[_0x208c17(0x1fe)](Math[_0x208c17(0x262)]()*_0x1f9443['length'])],_0x3b1adc=Date[_0x208c17(0x2ed)]();_0x43eb97['isPreparingForImmediateCapture']=!![],_0x43eb97['justReturned']=!![];const _0x2ec1a0=new Set([_0x43eb97['id']]);resetJustReturnedFlags(_0x2ec1a0);const _0x1665ea=_0x3bd86a['x']+_0x3bd86a[_0x208c17(0x2a8)]/0x2,_0x1ac17c=_0x1665ea<gameCanvas[_0x208c17(0x2a8)]/0x2?_0x208c17(0x29b):_0x208c17(0x24a),_0x21d486=_0x1ac17c===_0x208c17(0x24a)?gameCanvas['width']*CAPTURE_DIVE_SIDE_MARGIN_FACTOR:gameCanvas[_0x208c17(0x2a8)]*(0x1-CAPTURE_DIVE_SIDE_MARGIN_FACTOR)-BOSS_WIDTH,_0x57fda8=gameCanvas['height']*CAPTURE_DIVE_BOTTOM_HOVER_Y_FACTOR;_0x43eb97[_0x208c17(0x214)]=_0x208c17(0x1f4),_0x43eb97[_0x208c17(0x1f9)]=_0x21d486,_0x43eb97[_0x208c17(0x269)]=_0x57fda8,_0x43eb97[_0x208c17(0x21c)]=_0x3b1adc,playSound(_0x208c17(0x285),![],0.2);const _0xaba95=_0x43eb97['id'];_0x43eb97[_0x208c17(0x2e5)]=setTimeout(()=>{const _0x39972e=_0x208c17,_0x1d66ac=enemies[_0x39972e(0x228)](_0x3cbb91=>_0x3cbb91?.['id']===_0xaba95);_0x1d66ac&&_0x1d66ac[_0x39972e(0x214)]===_0x39972e(0x1f4)&&(_0x1d66ac[_0x39972e(0x214)]=_0x39972e(0x218));if(_0x1d66ac)_0x1d66ac['capturePrepareTimeout']=null;const _0x530a70=enemySpawnTimeouts[_0x39972e(0x1d2)](_0x3bac91=>_0x3bac91===_0x43eb97[_0x39972e(0x2e5)]);if(_0x530a70>-0x1)enemySpawnTimeouts[_0x39972e(0x1fd)](_0x530a70,0x1);},0x12c),enemySpawnTimeouts[_0x208c17(0x2ae)](_0x43eb97[_0x208c17(0x2e5)]);}}catch(_0x5db0f8){console[_0x208c17(0x2ec)](_0x208c17(0x2fa),_0x5db0f8);}}function resetJustReturnedFlags(_0xe83db1){const _0x266caa=_0x4c0c0a;enemies[_0x266caa(0x1cd)](_0x484825=>{const _0x248e59=_0x266caa;let _0xab64f9=![];if(_0xe83db1 instanceof Set)_0xab64f9=_0xe83db1[_0x248e59(0x28c)](_0x484825['id']);else typeof _0xe83db1===_0x248e59(0x23d)&&(_0xab64f9=_0x484825['id']===_0xe83db1);_0x484825&&_0x484825[_0x248e59(0x214)]===_0x248e59(0x1dd)&&_0x484825[_0x248e59(0x29d)]&&!_0xab64f9&&(_0x484825[_0x248e59(0x29d)]=![]);});}function updateFloatingScores(){const _0x1a8bc5=_0x4c0c0a;if(isPaused)return;try{const _0x193e05=Date[_0x1a8bc5(0x2ed)]();floatingScores=floatingScores['filter'](_0x5e2f6a=>_0x193e05-_0x5e2f6a[_0x1a8bc5(0x27d)]<FLOATING_SCORE_DURATION+FLOATING_SCORE_APPEAR_DELAY);}catch(_0x4c8bf4){console['error']('Error\x20updating\x20floating\x20scores:',_0x4c8bf4),floatingScores=[];}}function updateExplosions(){const _0x3664bf=_0x4c0c0a;if(isPaused)return;try{const _0xaa85=Date['now']();for(let _0x29980a=explosions[_0x3664bf(0x1e6)]-0x1;_0x29980a>=0x0;_0x29980a--){const _0x5be776=explosions[_0x29980a],_0x197692=_0xaa85-_0x5be776[_0x3664bf(0x27d)];if(_0x197692>_0x5be776[_0x3664bf(0x1d7)]){explosions[_0x3664bf(0x1fd)](_0x29980a,0x1);continue;}_0x5be776['particles'][_0x3664bf(0x1cd)](_0x2170dc=>{const _0x5b718f=_0x3664bf;_0x2170dc['x']+=_0x2170dc['vx'],_0x2170dc['y']+=_0x2170dc['vy'],_0x2170dc[_0x5b718f(0x2eb)]=Math[_0x5b718f(0x2df)](0x0,0x1-_0x197692/_0x5be776[_0x5b718f(0x1d7)]*EXPLOSION_FADE_SPEED);});}}catch(_0x4a0551){console[_0x3664bf(0x2ec)](_0x3664bf(0x233),_0x4a0551),explosions=[];}}function moveEntities(_0x883c40=null,_0x5ac216=null){const _0x37b699=_0x4c0c0a;if(isPaused)return;try{const _0x453ef8=Date[_0x37b699(0x2ed)](),_0x11eea2=gameCanvas?gameCanvas[_0x37b699(0x2de)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;if(gameCanvas&&!isTouchActiveGame){if(isManualControl){if(isTwoPlayerMode&&selectedGameMode===_0x37b699(0x235)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0xbc628f=ship1[_0x37b699(0x2a8)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(leftPressed)ship1['x']-=ship1[_0x37b699(0x263)];if(rightPressed)ship1['x']+=ship1[_0x37b699(0x263)];ship1['x']=Math[_0x37b699(0x2df)](0x0,Math[_0x37b699(0x305)](gameCanvas[_0x37b699(0x2a8)]-_0xbc628f,ship1['x'])),ship1[_0x37b699(0x1f9)]=ship1['x'];}if(!isPlayerTwoAI&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x3596bf=ship2['width']+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(p2LeftPressed)ship2['x']-=ship2[_0x37b699(0x263)];if(p2RightPressed)ship2['x']+=ship2['speed'];ship2['x']=Math[_0x37b699(0x2df)](0x0,Math[_0x37b699(0x305)](gameCanvas[_0x37b699(0x2a8)]-_0x3596bf,ship2['x'])),ship2[_0x37b699(0x1f9)]=ship2['x'];}}else{if(ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1){const _0x5cc689=ship[_0x37b699(0x2a8)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x25e76f=![],_0x5beca0=![];if(isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x37b699(0x271)&&currentPlayer===0x1&&isShowingIntro){if(_0x883c40!==null)_0x25e76f=_0x883c40;if(_0x5ac216!==null)_0x5beca0=_0x5ac216;}if(_0x25e76f||leftPressed)ship['x']-=ship['speed'];if(_0x5beca0||rightPressed)ship['x']+=ship['speed'];ship['x']=Math[_0x37b699(0x2df)](0x0,Math['min'](gameCanvas[_0x37b699(0x2a8)]-_0x5cc689,ship['x'])),ship[_0x37b699(0x1f9)]=ship['x'];}}}}}if(!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x37b699(0x2f1)&&currentPlayer===0x2||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x37b699(0x2fb)){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x37b699(0x2fb)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0xf2b9dc=ship1[_0x37b699(0x1f9)]-ship1['x'];let _0x782dc=ship1[_0x37b699(0x263)]*AI_POSITION_MOVE_SPEED_FACTOR;if(Math[_0x37b699(0x1fc)](_0xf2b9dc)>AI_MOVEMENT_DEADZONE)ship1['x']+=Math[_0x37b699(0x2f4)](_0xf2b9dc)*Math['min'](Math['abs'](_0xf2b9dc),_0x782dc);const _0x4c9b01=ship1['width']+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship1['x']=Math[_0x37b699(0x2df)](0x0,Math[_0x37b699(0x305)](gameCanvas[_0x37b699(0x2a8)]-_0x4c9b01,ship1['x']));}if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x349d17=ship2[_0x37b699(0x1f9)]-ship2['x'];let _0x2f35a6=ship2[_0x37b699(0x263)]*AI_POSITION_MOVE_SPEED_FACTOR;if(Math[_0x37b699(0x1fc)](_0x349d17)>AI_MOVEMENT_DEADZONE)ship2['x']+=Math['sign'](_0x349d17)*Math[_0x37b699(0x305)](Math[_0x37b699(0x1fc)](_0x349d17),_0x2f35a6);const _0x1d37e6=ship2['width']+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship2['x']=Math[_0x37b699(0x2df)](0x0,Math[_0x37b699(0x305)](gameCanvas[_0x37b699(0x2a8)]-_0x1d37e6,ship2['x']));}}else{if(ship){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){const _0xca1ddf=ship[_0x37b699(0x1f9)]-ship['x'];let _0x14eb76=ship[_0x37b699(0x263)]*AI_POSITION_MOVE_SPEED_FACTOR;isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2&&(_0x14eb76=ship[_0x37b699(0x263)]*(AI_POSITION_MOVE_SPEED_FACTOR*1.15));Math[_0x37b699(0x1fc)](_0xca1ddf)>AI_MOVEMENT_DEADZONE&&(ship['x']+=Math['sign'](_0xca1ddf)*Math[_0x37b699(0x305)](Math['abs'](_0xca1ddf),_0x14eb76));const _0xd486a5=ship[_0x37b699(0x2a8)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship['x']=Math['max'](0x0,Math[_0x37b699(0x305)](gameCanvas[_0x37b699(0x2a8)]-_0xd486a5,ship['x']));}}}}if(isTwoPlayerMode&&selectedGameMode===_0x37b699(0x235)){if(isPlayer1WaitingForRespawn&&_0x453ef8>=player1RespawnTime)isPlayer1WaitingForRespawn=![];if(isPlayer1Invincible&&_0x453ef8>=player1InvincibilityEndTime)isPlayer1Invincible=![];if(isPlayer2WaitingForRespawn&&_0x453ef8>=player2RespawnTime)isPlayer2WaitingForRespawn=![];if(isPlayer2Invincible&&_0x453ef8>=player2InvincibilityEndTime)isPlayer2Invincible=![];}else{if(isWaitingForRespawn&&_0x453ef8>=respawnTime)isWaitingForRespawn=![];if(isInvincible&&_0x453ef8>=invincibilityEndTime)isInvincible=![];}for(let _0x3cfac9=bullets[_0x37b699(0x1e6)]-0x1;_0x3cfac9>=0x0;_0x3cfac9--){const _0x2997c5=bullets[_0x3cfac9];if(!_0x2997c5){bullets[_0x37b699(0x1fd)](_0x3cfac9,0x1);continue;}_0x2997c5['y']-=_0x2997c5[_0x37b699(0x263)];if(_0x2997c5['y']+PLAYER_BULLET_HEIGHT<0x0){bullets[_0x37b699(0x1fd)](_0x3cfac9,0x1);continue;}for(let _0x4e3a1f=enemies[_0x37b699(0x1e6)]-0x1;_0x4e3a1f>=0x0;_0x4e3a1f--){const _0x57434a=enemies[_0x4e3a1f];if(!_0x57434a){enemies['splice'](_0x4e3a1f,0x1);continue;}const _0x80f89b={'x':_0x57434a['x'],'y':_0x57434a['y'],'width':_0x57434a[_0x37b699(0x274)]===ENEMY3_TYPE?BOSS_WIDTH:_0x57434a[_0x37b699(0x274)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,'height':_0x57434a[_0x37b699(0x274)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x57434a['type']===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT},_0x3ff7c9={'x':_0x2997c5['x'],'y':_0x2997c5['y'],'width':_0x2997c5['width'],'height':_0x2997c5[_0x37b699(0x2de)]};if(checkCollision(_0x3ff7c9,_0x80f89b)){bullets[_0x37b699(0x1fd)](_0x3cfac9,0x1);const _0x10c10d=handleEnemyHit(_0x57434a,_0x2997c5[_0x37b699(0x284)]);if(_0x10c10d[_0x37b699(0x2aa)])enemies['splice'](_0x4e3a1f,0x1);break;}}}for(let _0x5a2439=enemyBullets[_0x37b699(0x1e6)]-0x1;_0x5a2439>=0x0;_0x5a2439--){const _0x421232=enemyBullets[_0x5a2439];if(!_0x421232){enemyBullets[_0x37b699(0x1fd)](_0x5a2439,0x1);continue;}_0x421232['x']+=_0x421232['vx'],_0x421232['y']+=_0x421232['vy'],(_0x421232['y']>gameCanvas[_0x37b699(0x2de)]||_0x421232['y']<-ENEMY_BULLET_HEIGHT||_0x421232['x']<-ENEMY_BULLET_WIDTH||_0x421232['x']>gameCanvas[_0x37b699(0x2a8)])&&enemyBullets[_0x37b699(0x1fd)](_0x5a2439,0x1);}const _0xf84ee9=gameCanvas?gameCanvas[_0x37b699(0x2de)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4,_0x3cc94a=0x2;for(let _0x267e7f=fallingShips[_0x37b699(0x1e6)]-0x1;_0x267e7f>=0x0;_0x267e7f--){const _0x32772e=fallingShips[_0x267e7f];if(!_0x32772e){fallingShips[_0x37b699(0x1fd)](_0x267e7f,0x1);continue;}let _0x3ce4a8=![];if(!_0x32772e[_0x37b699(0x264)]){_0x32772e['y']+=FALLING_SHIP_SPEED;if(_0x32772e['y']>=_0xf84ee9){_0x32772e['y']=_0xf84ee9,_0x32772e[_0x37b699(0x264)]=!![],_0x32772e[_0x37b699(0x1f5)]=_0x453ef8;!_0x32772e[_0x37b699(0x204)]&&(_0x32772e[_0x37b699(0x256)]=0x0,_0x32772e[_0x37b699(0x204)]=!![]);let _0x2c122d=null,_0xac7ee3=()=>{},_0x4d6911=![],_0x590632=![],_0x16c541=![],_0x2f4834=null;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x37b699(0x2fb)){if(_0x32772e[_0x37b699(0x21b)]==='player1'&&ship1&&player1Lives>0x0)_0x2c122d=ship1,_0x4d6911=player1IsDualShipActive,_0xac7ee3=()=>{player1IsDualShipActive=!![];},_0x16c541=!![],_0x2f4834=_0x37b699(0x247);else(_0x32772e[_0x37b699(0x21b)]===_0x37b699(0x220)||_0x32772e[_0x37b699(0x21b)]===_0x37b699(0x2d1))&&ship2&&player2Lives>0x0&&(_0x2c122d=ship2,_0x4d6911=player2IsDualShipActive,_0xac7ee3=()=>{player2IsDualShipActive=!![];},_0x16c541=!![],_0x2f4834=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x37b699(0x2fb)?_0x37b699(0x2d1):_0x37b699(0x220));}else{if(isTwoPlayerMode&&selectedGameMode===_0x37b699(0x235)){if(_0x32772e[_0x37b699(0x21b)]==='player1'&&ship1&&player1Lives>0x0)_0x2c122d=ship1,_0x4d6911=player1IsDualShipActive,_0x590632=isPlayer1ShipCaptured,_0xac7ee3=()=>{player1IsDualShipActive=!![],isPlayer1ShipCaptured=![];},_0x16c541=!![],_0x2f4834=_0x37b699(0x247);else _0x32772e['targetPlayerId']===_0x37b699(0x220)&&ship2&&player2Lives>0x0&&(_0x2c122d=ship2,_0x4d6911=player2IsDualShipActive,_0x590632=isPlayer2ShipCaptured,_0xac7ee3=()=>{player2IsDualShipActive=!![],isPlayer2ShipCaptured=![];},_0x16c541=!![],_0x2f4834='player2');}else ship&&playerLives>0x0&&(_0x2c122d=ship,_0x4d6911=isDualShipActive,_0x590632=isShipCaptured,_0xac7ee3=()=>{const _0x30cbcb=_0x37b699;isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode===_0x30cbcb(0x2f1)){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}isShipCaptured=![];},_0x16c541=!![],_0x2f4834=isTwoPlayerMode&&selectedGameMode==='normal'?String(currentPlayer):_0x37b699(0x247));}if(_0x16c541&&!_0x4d6911){_0xac7ee3(),playSound(_0x37b699(0x2b7),![],0.4);if(_0x590632&&!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')){if(_0x2f4834==='player1'&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x453ef8+INVINCIBILITY_DURATION_MS;else{if(_0x2f4834===_0x37b699(0x220)&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x453ef8+INVINCIBILITY_DURATION_MS;else ship&&(isInvincible=!![],invincibilityEndTime=_0x453ef8+INVINCIBILITY_DURATION_MS);}}fallingShips[_0x37b699(0x1fd)](_0x267e7f,0x1),_0x3ce4a8=!![];continue;}else{if(_0x16c541&&_0x4d6911){fallingShips[_0x37b699(0x1fd)](_0x267e7f,0x1),_0x3ce4a8=!![];continue;}else{fallingShips[_0x37b699(0x1fd)](_0x267e7f,0x1),_0x3ce4a8=!![];continue;}}}}if(_0x3ce4a8)continue;const _0x44f015=_0x453ef8-_0x32772e[_0x37b699(0x27d)];if(_0x44f015<FALLING_SHIP_FADE_DURATION_MS)_0x32772e['tintProgress']=Math[_0x37b699(0x2df)](0x0,0x1-_0x44f015/FALLING_SHIP_FADE_DURATION_MS);else _0x32772e[_0x37b699(0x224)]=0x0;if(_0x32772e[_0x37b699(0x204)])_0x32772e[_0x37b699(0x256)]=0x0;else{if(!_0x32772e['landed']&&typeof _0x32772e['rotationDirection']===_0x37b699(0x22b)&&typeof FALLING_SHIP_ROTATION_SPEED==='number'&&FALLING_SHIP_ROTATION_SPEED>0x0){const _0x3401bc=FALLING_SHIP_ROTATION_SPEED*_0x32772e[_0x37b699(0x1d3)];_0x32772e['rotation']+=_0x3401bc,_0x32772e[_0x37b699(0x302)]+=Math[_0x37b699(0x1fc)](_0x3401bc);if(_0x32772e[_0x37b699(0x302)]>=_0x3cc94a*0x2*Math['PI'])_0x32772e[_0x37b699(0x256)]=0x0,_0x32772e[_0x37b699(0x204)]=!![];else{if(_0x32772e['rotation']>Math['PI']*0x2)_0x32772e[_0x37b699(0x256)]-=Math['PI']*0x2;if(_0x32772e[_0x37b699(0x256)]<0x0)_0x32772e[_0x37b699(0x256)]+=Math['PI']*0x2;}}else _0x32772e[_0x37b699(0x256)]=_0x32772e[_0x37b699(0x256)]||0x0;}if(!_0x32772e['landed']){let _0x59ef33=null,_0x15a953=()=>{},_0x30e79c=0x0,_0x9f80d3=![],_0x5d2562=![];if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x37b699(0x2fb)){if(_0x32772e['targetPlayerId']===_0x37b699(0x247)&&ship1&&player1Lives>0x0)_0x59ef33=ship1,_0x5d2562=player1IsDualShipActive,_0x15a953=()=>{if(!_0x5d2562)player1IsDualShipActive=!![];},_0x30e79c=0x1;else(_0x32772e['targetPlayerId']===_0x37b699(0x220)||_0x32772e['targetPlayerId']===_0x37b699(0x2d1))&&ship2&&player2Lives>0x0&&(_0x59ef33=ship2,_0x5d2562=player2IsDualShipActive,_0x15a953=()=>{if(!_0x5d2562)player2IsDualShipActive=!![];},_0x30e79c=0x2);}else{if(isTwoPlayerMode&&selectedGameMode===_0x37b699(0x235)){if(_0x32772e[_0x37b699(0x21b)]===_0x37b699(0x247)&&ship1&&player1Lives>0x0)_0x59ef33=ship1,_0x9f80d3=isPlayer1ShipCaptured,_0x5d2562=player1IsDualShipActive,_0x15a953=()=>{if(!_0x5d2562)player1IsDualShipActive=!![];isPlayer1ShipCaptured=![];},_0x30e79c=0x1;else _0x32772e['targetPlayerId']===_0x37b699(0x220)&&ship2&&player2Lives>0x0&&(_0x59ef33=ship2,_0x9f80d3=isPlayer2ShipCaptured,_0x5d2562=player2IsDualShipActive,_0x15a953=()=>{if(!_0x5d2562)player2IsDualShipActive=!![];isPlayer2ShipCaptured=![];},_0x30e79c=0x2);}else ship&&playerLives>0x0&&(_0x59ef33=ship,_0x9f80d3=isShipCaptured,_0x5d2562=isDualShipActive,_0x15a953=()=>{const _0x41d5e6=_0x37b699;if(!_0x5d2562){isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode===_0x41d5e6(0x2f1)){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}}isShipCaptured=![];},_0x30e79c=isTwoPlayerMode&&selectedGameMode==='normal'?currentPlayer:0x1);}if(_0x59ef33&&!_0x5d2562){const _0x19f00f={'x':_0x32772e['x'],'y':_0x32772e['y'],'width':_0x32772e[_0x37b699(0x2a8)],'height':_0x32772e[_0x37b699(0x2de)]},_0x1d1e37={'x':_0x59ef33['x'],'y':_0x59ef33['y'],'width':_0x59ef33[_0x37b699(0x2a8)],'height':_0x59ef33[_0x37b699(0x2de)]};if(checkCollision(_0x19f00f,_0x1d1e37)){_0x15a953();if(_0x9f80d3&&!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x37b699(0x2fb))){playSound('dualShipSound',![],0.4);if(_0x30e79c===0x1&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x453ef8+INVINCIBILITY_DURATION_MS;else{if(_0x30e79c===0x2&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x453ef8+INVINCIBILITY_DURATION_MS;else _0x30e79c!==0x0&&ship&&(isInvincible=!![],invincibilityEndTime=_0x453ef8+INVINCIBILITY_DURATION_MS);}}else playSound('dualShipSound',![],0.4);fallingShips[_0x37b699(0x1fd)](_0x267e7f,0x1);continue;}}}if(!_0x32772e[_0x37b699(0x264)]&&_0x32772e['y']>=gameCanvas[_0x37b699(0x2de)])fallingShips[_0x37b699(0x1fd)](_0x267e7f,0x1);}let _0x951c4a=0x0;const _0x2c3a95=enemies[_0x37b699(0x1e0)](_0x3a35b0=>_0x3a35b0?.['state']===_0x37b699(0x1dd)),_0x4b29e7=!isChallengingStage&&!isWaveTransitioning&&_0x2c3a95&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x37b699(0x235)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage));if(_0x4b29e7){!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(_0x37b699(0x24b),!![],0.1));const _0x279d08=enemies['filter'](_0x12cfda=>_0x12cfda?.[_0x37b699(0x214)]==='in_grid');if(_0x279d08[_0x37b699(0x1e6)]>0x0){let _0x4d1e2a=gameCanvas[_0x37b699(0x2a8)],_0xfd5393=0x0;_0x279d08['forEach'](_0x4d4b8d=>{const _0xe6a066=_0x37b699;_0x4d4b8d&&(_0x4d1e2a=Math[_0xe6a066(0x305)](_0x4d1e2a,_0x4d4b8d['x']),_0xfd5393=Math['max'](_0xfd5393,_0x4d4b8d['x']+_0x4d4b8d[_0xe6a066(0x2a8)]));});const _0x1e5df4=gameCanvas[_0x37b699(0x2a8)]*GRID_HORIZONTAL_MARGIN_PERCENT,_0x236c3b=gameCanvas['width']*(0x1-GRID_HORIZONTAL_MARGIN_PERCENT);if(gridMoveDirection===0x1&&_0xfd5393>=_0x236c3b)gridMoveDirection=-0x1;else{if(gridMoveDirection===-0x1&&_0x4d1e2a<=_0x1e5df4)gridMoveDirection=0x1;}const _0x340419=scaleValue(level,BASE_GRID_MOVE_SPEED,MAX_GRID_MOVE_SPEED);_0x951c4a=_0x340419*gridMoveDirection,currentGridOffsetX+=_0x951c4a,enemies[_0x37b699(0x1cd)](_0x507c1d=>{const _0x234aec=_0x37b699;if(_0x507c1d&&(_0x507c1d[_0x234aec(0x214)]==='returning'||_0x507c1d['state']===_0x234aec(0x1dd)||_0x507c1d['state']==='moving_to_grid'))try{const _0x2bdd5f=_0x507c1d['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x507c1d['type']===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x5a908d,y:_0xa61132}=getCurrentGridSlotPosition(_0x507c1d[_0x234aec(0x26d)],_0x507c1d[_0x234aec(0x28a)],_0x2bdd5f);_0x507c1d['targetGridX']=_0x5a908d,_0x507c1d[_0x234aec(0x2c0)]=_0xa61132;}catch(_0xf6b397){console[_0x234aec(0x2ec)](_0x234aec(0x2c8)+_0x507c1d?.['id']+_0x234aec(0x1d6)+_0x507c1d?.[_0x234aec(0x214)]+')\x20during\x20shift:',_0xf6b397);}});}}else isGridSoundPlaying&&(stopSound(_0x37b699(0x24b)),isGridSoundPlaying=![]),_0x951c4a=0x0;for(let _0x1b4ee9=enemies[_0x37b699(0x1e6)]-0x1;_0x1b4ee9>=0x0;_0x1b4ee9--){let _0x112abb=enemies[_0x1b4ee9];if(!_0x112abb){enemies['splice'](_0x1b4ee9,0x1);continue;}const _0x388f0d=_0x112abb['id'];if(_0x112abb[_0x37b699(0x2e5)]&&_0x112abb[_0x37b699(0x214)]!=='preparing_capture'){clearTimeout(_0x112abb['capturePrepareTimeout']);const _0x2dbdaf=enemySpawnTimeouts[_0x37b699(0x279)](_0x112abb[_0x37b699(0x2e5)]);if(_0x2dbdaf>-0x1)enemySpawnTimeouts[_0x37b699(0x1fd)](_0x2dbdaf,0x1);_0x112abb[_0x37b699(0x2e5)]=null;}const _0x11eaff=_0x112abb[_0x37b699(0x274)]===ENEMY3_TYPE?BOSS_WIDTH:_0x112abb[_0x37b699(0x274)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x16cfb3=_0x112abb[_0x37b699(0x274)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x112abb[_0x37b699(0x274)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT;switch(_0x112abb[_0x37b699(0x214)]){case'following_bezier_path':{let _0xc407dd=CS_ENTRANCE_PATH_SPEED;const _0x34b5a5=_0x112abb['pathSpeedMultiplier']||0x1;_0xc407dd*=_0x34b5a5;if(!isChallengingStage){enemies[_0x37b699(0x1fd)](_0x1b4ee9,0x1),_0x112abb=null;break;}let _0x3e99dd=challengingStagePaths,_0x2bad31=_0x3e99dd[_0x112abb[_0x37b699(0x27e)]];if(!_0x2bad31||_0x112abb[_0x37b699(0x25f)]>=_0x2bad31[_0x37b699(0x1e6)]){enemies[_0x37b699(0x1fd)](_0x1b4ee9,0x1),_0x112abb=null;break;}const _0x56067b=_0x2bad31[_0x112abb[_0x37b699(0x25f)]];if(!_0x56067b||!_0x56067b['p0']||!_0x56067b['p1']||!_0x56067b['p2']||!_0x56067b['p3']){console[_0x37b699(0x2ec)](_0x37b699(0x239)+_0x112abb[_0x37b699(0x25f)]+_0x37b699(0x2f6)+_0x112abb[_0x37b699(0x27e)]+_0x37b699(0x297)+_0x112abb['id']),enemies[_0x37b699(0x1fd)](_0x1b4ee9,0x1),_0x112abb=null;break;}_0x112abb['pathT']+=_0xc407dd;let _0x4ed20d,_0x3deae2,_0x871ef4=_0x112abb['x'],_0x30b4ce=_0x112abb['y'];if(_0x112abb['pathT']>=0x1){_0x112abb[_0x37b699(0x2d0)]=0x0,_0x112abb['pathSegmentIndex']++;if(_0x112abb[_0x37b699(0x25f)]>=_0x2bad31[_0x37b699(0x1e6)])enemies['splice'](_0x1b4ee9,0x1),_0x112abb=null;else{const _0x3fe77e=_0x2bad31[_0x112abb[_0x37b699(0x25f)]];_0x3fe77e?.['p0']?(_0x4ed20d=_0x3fe77e['p0']['x'],_0x3deae2=_0x3fe77e['p0']['y']):(console[_0x37b699(0x2ec)](_0x37b699(0x2d9)+_0x112abb[_0x37b699(0x25f)]+_0x37b699(0x2f6)+_0x112abb[_0x37b699(0x27e)]+_0x37b699(0x297)+_0x388f0d),enemies['splice'](_0x1b4ee9,0x1),_0x112abb=null);}}else try{_0x4ed20d=calculateBezierPoint(_0x112abb['pathT'],_0x56067b['p0']['x'],_0x56067b['p1']['x'],_0x56067b['p2']['x'],_0x56067b['p3']['x']),_0x3deae2=calculateBezierPoint(_0x112abb[_0x37b699(0x2d0)],_0x56067b['p0']['y'],_0x56067b['p1']['y'],_0x56067b['p2']['y'],_0x56067b['p3']['y']);}catch(_0x590dfa){console[_0x37b699(0x2ec)](_0x37b699(0x2f5)+_0x388f0d+':',_0x590dfa),enemies[_0x37b699(0x1fd)](_0x1b4ee9,0x1),_0x112abb=null;}_0x112abb&&(isNaN(_0x4ed20d)||isNaN(_0x3deae2)?(console['error'](_0x37b699(0x1db)+_0x388f0d+_0x37b699(0x294)),enemies[_0x37b699(0x1fd)](_0x1b4ee9,0x1),_0x112abb=null):(_0x112abb[_0x37b699(0x2e1)]=_0x4ed20d-_0x871ef4,_0x112abb['velocityY']=_0x3deae2-_0x30b4ce,_0x112abb['x']=_0x4ed20d,_0x112abb['y']=_0x3deae2));break;}case _0x37b699(0x291):{if(isChallengingStage){enemies[_0x37b699(0x1fd)](_0x1b4ee9,0x1),_0x112abb=null;break;}let _0x483b83=normalWaveEntrancePaths,_0x126a90=_0x483b83[_0x112abb['entrancePathId']],_0x54733e;_0x112abb[_0x37b699(0x27e)]===_0x37b699(0x2a3)||_0x112abb[_0x37b699(0x27e)]===_0x37b699(0x2bc)?_0x54733e=BOSS_LOOP_ENTRANCE_PATH_SPEED:_0x54733e=NORMAL_ENTRANCE_PATH_SPEED;if(!_0x126a90){console[_0x37b699(0x2b0)](_0x37b699(0x249)+_0x388f0d+_0x37b699(0x1d8)+_0x112abb[_0x37b699(0x27e)]+'.\x20Switching\x20to\x20moving_to_grid.');try{_0x112abb[_0x37b699(0x1e4)]=_0x112abb[_0x37b699(0x1e4)]??gameCanvas[_0x37b699(0x2a8)]/0x2,_0x112abb['targetGridY']=_0x112abb[_0x37b699(0x2c0)]??ENEMY_TOP_MARGIN;}catch(_0x3e13f6){console[_0x37b699(0x2ec)](_0x37b699(0x2b3)+_0x388f0d+'\x20after\x20missing\x20path',_0x3e13f6),_0x112abb[_0x37b699(0x1e4)]=gameCanvas['width']/0x2,_0x112abb['targetGridY']=ENEMY_TOP_MARGIN;}_0x112abb['state']=_0x37b699(0x206),_0x112abb[_0x37b699(0x2d0)]=0x0,_0x112abb[_0x37b699(0x25f)]=0x0,_0x112abb[_0x37b699(0x2e1)]=0x0,_0x112abb['velocityY']=0x0;_0x112abb['squadronId']!==undefined&&squadronCompletionStatus[_0x112abb[_0x37b699(0x1df)]]&&squadronCompletionStatus[_0x112abb[_0x37b699(0x1df)]][_0x37b699(0x300)]++;break;}if(_0x112abb[_0x37b699(0x25f)]>=_0x126a90[_0x37b699(0x1e6)]){console['warn']('Enemy\x20'+_0x388f0d+_0x37b699(0x2e9)+_0x112abb['pathSegmentIndex']+'\x20out\x20of\x20bounds\x20for\x20SHARED\x20path\x20'+_0x112abb[_0x37b699(0x27e)]+_0x37b699(0x1e9));try{_0x112abb['targetGridX']=_0x112abb[_0x37b699(0x1e4)]??gameCanvas['width']/0x2,_0x112abb[_0x37b699(0x2c0)]=_0x112abb[_0x37b699(0x2c0)]??ENEMY_TOP_MARGIN;}catch(_0x4883c2){console[_0x37b699(0x2ec)](_0x37b699(0x2b3)+_0x388f0d+_0x37b699(0x276),_0x4883c2),_0x112abb[_0x37b699(0x1e4)]=gameCanvas['width']/0x2,_0x112abb[_0x37b699(0x2c0)]=ENEMY_TOP_MARGIN;}_0x112abb['state']='moving_to_grid',_0x112abb['pathT']=0x0,_0x112abb[_0x37b699(0x25f)]=0x0,_0x112abb[_0x37b699(0x2e1)]=0x0,_0x112abb[_0x37b699(0x216)]=0x0;_0x112abb[_0x37b699(0x1df)]!==undefined&&squadronCompletionStatus[_0x112abb[_0x37b699(0x1df)]]&&squadronCompletionStatus[_0x112abb['squadronId']][_0x37b699(0x300)]++;break;}const _0x37c36d=_0x126a90[_0x112abb[_0x37b699(0x25f)]];if(!_0x37c36d||!_0x37c36d['p0']||!_0x37c36d['p1']||!_0x37c36d['p2']||!_0x37c36d['p3']){console['error'](_0x37b699(0x22c)+_0x112abb[_0x37b699(0x25f)]+_0x37b699(0x1da)+_0x112abb['entrancePathId']+_0x37b699(0x297)+_0x388f0d+_0x37b699(0x1e9));try{_0x112abb[_0x37b699(0x1e4)]=_0x112abb['targetGridX']??gameCanvas['width']/0x2,_0x112abb[_0x37b699(0x2c0)]=_0x112abb[_0x37b699(0x2c0)]??ENEMY_TOP_MARGIN+_0x112abb['gridRow']*(ENEMY_HEIGHT+ENEMY_V_SPACING);}catch(_0x44c25f){console[_0x37b699(0x2ec)](_0x37b699(0x2b3)+_0x388f0d+_0x37b699(0x201),_0x44c25f),_0x112abb[_0x37b699(0x1e4)]=gameCanvas[_0x37b699(0x2a8)]/0x2,_0x112abb['targetGridY']=ENEMY_TOP_MARGIN;}_0x112abb['state']=_0x37b699(0x206),_0x112abb[_0x37b699(0x2d0)]=0x0,_0x112abb['pathSegmentIndex']=0x0,_0x112abb['velocityX']=0x0,_0x112abb[_0x37b699(0x216)]=0x0;_0x112abb[_0x37b699(0x1df)]!==undefined&&squadronCompletionStatus[_0x112abb['squadronId']]&&squadronCompletionStatus[_0x112abb[_0x37b699(0x1df)]][_0x37b699(0x300)]++;break;}_0x112abb[_0x37b699(0x2d0)]+=_0x54733e;let _0x435b2a,_0x28506e,_0x513796=_0x112abb['x'],_0x4f8520=_0x112abb['y'];if(_0x112abb['pathT']>=0x1){_0x112abb[_0x37b699(0x2d0)]=0x0,_0x112abb[_0x37b699(0x25f)]++;if(_0x112abb[_0x37b699(0x25f)]>=_0x126a90[_0x37b699(0x1e6)]){let _0xf4300a,_0x2d94ba;try{_0xf4300a=calculateBezierPoint(0x1,_0x37c36d['p0']['x'],_0x37c36d['p1']['x'],_0x37c36d['p2']['x'],_0x37c36d['p3']['x']),_0x2d94ba=calculateBezierPoint(0x1,_0x37c36d['p0']['y'],_0x37c36d['p1']['y'],_0x37c36d['p2']['y'],_0x37c36d['p3']['y']);}catch(_0x2aee7e){console[_0x37b699(0x2ec)](_0x37b699(0x273)+_0x388f0d+_0x37b699(0x2e6)+_0x112abb[_0x37b699(0x27e)],_0x2aee7e),_0xf4300a=_0x37c36d['p3']['x'],_0x2d94ba=_0x37c36d['p3']['y'];}_0x112abb['x']=_0xf4300a,_0x112abb['y']=_0x2d94ba;try{_0x112abb[_0x37b699(0x1e4)]=_0x112abb[_0x37b699(0x1e4)]??gameCanvas[_0x37b699(0x2a8)]/0x2,_0x112abb[_0x37b699(0x2c0)]=_0x112abb['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x335496){console[_0x37b699(0x2ec)]('Error\x20getting\x20target\x20grid\x20pos\x20for\x20'+_0x388f0d+_0x37b699(0x2e6)+_0x112abb[_0x37b699(0x27e)],_0x335496),_0x112abb[_0x37b699(0x1e4)]=_0x112abb['x'],_0x112abb['targetGridY']=ENEMY_TOP_MARGIN+_0x112abb[_0x37b699(0x26d)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x3cd5b5=_0x112abb['state'];_0x112abb[_0x37b699(0x214)]='moving_to_grid',_0x112abb[_0x37b699(0x2e1)]=0x0,_0x112abb['velocityY']=0x0,_0x112abb[_0x37b699(0x25f)]=0x0;_0x3cd5b5===_0x37b699(0x291)&&_0x112abb[_0x37b699(0x1df)]!==undefined&&squadronCompletionStatus[_0x112abb[_0x37b699(0x1df)]]&&squadronCompletionStatus[_0x112abb[_0x37b699(0x1df)]][_0x37b699(0x300)]++;break;}else{const _0x7d1e4a=_0x126a90[_0x112abb[_0x37b699(0x25f)]];if(_0x7d1e4a?.['p0'])_0x435b2a=_0x7d1e4a['p0']['x'],_0x28506e=_0x7d1e4a['p0']['y'];else{console[_0x37b699(0x2ec)](_0x37b699(0x2e3)+_0x112abb[_0x37b699(0x25f)]+_0x37b699(0x1da)+_0x112abb[_0x37b699(0x27e)]+_0x37b699(0x297)+_0x388f0d+_0x37b699(0x1e9));try{_0x112abb[_0x37b699(0x1e4)]=_0x112abb['targetGridX']??gameCanvas['width']/0x2,_0x112abb[_0x37b699(0x2c0)]=_0x112abb[_0x37b699(0x2c0)]??ENEMY_TOP_MARGIN;}catch(_0x4ebf15){console[_0x37b699(0x2ec)](_0x37b699(0x2b3)+_0x388f0d+_0x37b699(0x1ff),_0x4ebf15),_0x112abb[_0x37b699(0x1e4)]=gameCanvas[_0x37b699(0x2a8)]/0x2,_0x112abb[_0x37b699(0x2c0)]=ENEMY_TOP_MARGIN;}_0x112abb['state']=_0x37b699(0x206),_0x112abb[_0x37b699(0x2d0)]=0x0,_0x112abb['pathSegmentIndex']=0x0,_0x112abb[_0x37b699(0x2e1)]=0x0,_0x112abb['velocityY']=0x0;_0x112abb[_0x37b699(0x1df)]!==undefined&&squadronCompletionStatus[_0x112abb['squadronId']]&&squadronCompletionStatus[_0x112abb[_0x37b699(0x1df)]][_0x37b699(0x300)]++;break;}}}else try{_0x435b2a=calculateBezierPoint(_0x112abb['pathT'],_0x37c36d['p0']['x'],_0x37c36d['p1']['x'],_0x37c36d['p2']['x'],_0x37c36d['p3']['x']),_0x28506e=calculateBezierPoint(_0x112abb[_0x37b699(0x2d0)],_0x37c36d['p0']['y'],_0x37c36d['p1']['y'],_0x37c36d['p2']['y'],_0x37c36d['p3']['y']);}catch(_0x4f18b7){console[_0x37b699(0x2ec)](_0x37b699(0x259)+_0x388f0d+':',_0x4f18b7);try{_0x112abb[_0x37b699(0x1e4)]=_0x112abb[_0x37b699(0x1e4)]??gameCanvas[_0x37b699(0x2a8)]/0x2,_0x112abb[_0x37b699(0x2c0)]=_0x112abb[_0x37b699(0x2c0)]??ENEMY_TOP_MARGIN;}catch(_0x88428a){console[_0x37b699(0x2ec)](_0x37b699(0x2b3)+_0x388f0d+'\x20after\x20bezier\x20error',_0x88428a),_0x112abb['targetGridX']=gameCanvas['width']/0x2,_0x112abb[_0x37b699(0x2c0)]=ENEMY_TOP_MARGIN;}_0x112abb['state']=_0x37b699(0x206),_0x112abb['pathT']=0x0,_0x112abb[_0x37b699(0x25f)]=0x0,_0x112abb['velocityX']=0x0,_0x112abb['velocityY']=0x0;_0x112abb['squadronId']!==undefined&&squadronCompletionStatus[_0x112abb[_0x37b699(0x1df)]]&&squadronCompletionStatus[_0x112abb['squadronId']][_0x37b699(0x300)]++;break;}if(_0x112abb&&_0x112abb[_0x37b699(0x214)]===_0x37b699(0x291)){if(isNaN(_0x435b2a)||isNaN(_0x28506e)){console[_0x37b699(0x2ec)](_0x37b699(0x231)+_0x388f0d+'.\x20Switching\x20to\x20moving_to_grid.');try{_0x112abb['targetGridX']=_0x112abb[_0x37b699(0x1e4)]??gameCanvas[_0x37b699(0x2a8)]/0x2,_0x112abb['targetGridY']=_0x112abb[_0x37b699(0x2c0)]??ENEMY_TOP_MARGIN;}catch(_0x4e7035){console[_0x37b699(0x2ec)](_0x37b699(0x2b3)+_0x388f0d+_0x37b699(0x258),_0x4e7035),_0x112abb[_0x37b699(0x1e4)]=gameCanvas[_0x37b699(0x2a8)]/0x2,_0x112abb['targetGridY']=ENEMY_TOP_MARGIN;}_0x112abb[_0x37b699(0x214)]=_0x37b699(0x206),_0x112abb[_0x37b699(0x2d0)]=0x0,_0x112abb[_0x37b699(0x25f)]=0x0,_0x112abb[_0x37b699(0x2e1)]=0x0,_0x112abb[_0x37b699(0x216)]=0x0,_0x112abb[_0x37b699(0x1df)]!==undefined&&squadronCompletionStatus[_0x112abb[_0x37b699(0x1df)]]&&squadronCompletionStatus[_0x112abb[_0x37b699(0x1df)]]['completed']++;}else{let _0x26909e=_0x435b2a;const _0x572d91=currentWavePatternIndex===0x1&&(_0x112abb['squadronId']===0x2||_0x112abb[_0x37b699(0x1df)]===0x3),_0x35fd76=typeof _0x112abb[_0x37b699(0x2ad)]===_0x37b699(0x22b)&&_0x112abb[_0x37b699(0x2ad)]%0x2!==0x0;if(_0x572d91&&_0x35fd76){const _0x31351e=_0x11eaff+ENTRANCE_PAIR_HORIZONTAL_GAP;_0x26909e=_0x435b2a+_0x31351e;}_0x112abb[_0x37b699(0x2e1)]=_0x26909e-_0x513796,_0x112abb[_0x37b699(0x216)]=_0x28506e-_0x4f8520,_0x112abb['x']=_0x26909e,_0x112abb['y']=_0x28506e;}}break;}case'moving_to_grid':{if(_0x112abb[_0x37b699(0x1e4)]==null||_0x112abb[_0x37b699(0x2c0)]==null){console[_0x37b699(0x2b0)](_0x37b699(0x249)+_0x388f0d+'\x20in\x20moving_to_grid\x20state\x20without\x20target.\x20Recalculating.');try{const {x:_0x24b4e3,y:_0x53854e}=getCurrentGridSlotPosition(_0x112abb[_0x37b699(0x26d)],_0x112abb['gridCol'],_0x11eaff);_0x112abb[_0x37b699(0x1e4)]=_0x24b4e3,_0x112abb[_0x37b699(0x2c0)]=_0x53854e;}catch(_0x4e058b){console[_0x37b699(0x2ec)](_0x37b699(0x2b3)+_0x388f0d+'\x20in\x20moving_to_grid',_0x4e058b),_0x112abb[_0x37b699(0x214)]='in_grid',_0x112abb['x']=gameCanvas['width']/0x2,_0x112abb['y']=ENEMY_TOP_MARGIN;break;}}const _0x446e14=_0x112abb[_0x37b699(0x1e4)],_0x40b557=_0x112abb[_0x37b699(0x2c0)],_0x1db952=_0x446e14-_0x112abb['x'],_0x244b58=_0x40b557-_0x112abb['y'],_0x504b5b=Math['sqrt'](_0x1db952*_0x1db952+_0x244b58*_0x244b58),_0x178ca0=ENTRANCE_SPEED*1.2,_0x1fd5b6=_0x178ca0*0.5;if(_0x504b5b>_0x1fd5b6)_0x112abb['velocityX']=_0x1db952/_0x504b5b*_0x178ca0,_0x112abb[_0x37b699(0x216)]=_0x244b58/_0x504b5b*_0x178ca0,_0x112abb['x']+=_0x112abb[_0x37b699(0x2e1)],_0x112abb['y']+=_0x112abb[_0x37b699(0x216)];else{_0x112abb['x']=_0x446e14,_0x112abb['y']=_0x40b557,_0x112abb[_0x37b699(0x2e1)]=0x0,_0x112abb['velocityY']=0x0;const _0x3ad03a=_0x112abb[_0x37b699(0x214)];_0x112abb['state']=_0x37b699(0x1dd),_0x112abb[_0x37b699(0x29d)]=![];!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(_0x37b699(0x24b),!![],0.1));GRID_BREATH_ENABLED&&!isGridBreathingActive&&!isChallengingStage&&(isGridBreathingActive=!![],gridBreathStartTime=_0x453ef8,currentGridBreathFactor=0x0);!firstEnemyLanded&&!isFullGridWave&&!isChallengingStage&&(lastGridFireCheckTime=Date[_0x37b699(0x2ed)](),firstEnemyLanded=!![]);if(_0x3ad03a===_0x37b699(0x206)&&!isChallengingStage&&!isFullGridWave&&_0x112abb[_0x37b699(0x1df)]!==undefined){const _0x4519da=_0x112abb[_0x37b699(0x1df)],_0x2bea07=squadronCompletionStatus[_0x4519da];if(_0x2bea07&&!_0x2bea07[_0x37b699(0x241)]){const _0x1a7aba=enemies[_0x37b699(0x2bb)](_0x467228=>{const _0x526d7a=_0x37b699;if(_0x467228&&_0x467228[_0x526d7a(0x1df)]===_0x4519da)return _0x467228['state']===_0x526d7a(0x1dd)||!enemies['some'](_0x37210e=>_0x37210e['id']===_0x467228['id']);return!![];});if(_0x1a7aba){_0x2bea07[_0x37b699(0x241)]=!![];const _0x41c2dd=enemies[_0x37b699(0x2c1)](_0xd9d47=>_0xd9d47&&_0xd9d47[_0x37b699(0x1df)]===_0x4519da&&_0xd9d47[_0x37b699(0x214)]===_0x37b699(0x1dd)&&(_0xd9d47[_0x37b699(0x274)]===ENEMY2_TYPE||_0xd9d47['type']===ENEMY3_TYPE)&&!(_0xd9d47[_0x37b699(0x274)]===ENEMY3_TYPE&&_0xd9d47[_0x37b699(0x1dc)]));if(_0x41c2dd[_0x37b699(0x1e6)]>0x0){const _0x3ff756=_0x41c2dd[Math[_0x37b699(0x1fe)](Math[_0x37b699(0x262)]()*_0x41c2dd['length'])],_0x3a0315=_0x3ff756['id'],_0x33d853=0xc8+Math['random']()*0x190,_0xb7d2bc=setTimeout(()=>{const _0x59fb6d=_0x37b699;try{const _0x568738=enemySpawnTimeouts[_0x59fb6d(0x279)](_0xb7d2bc);if(_0x568738>-0x1)enemySpawnTimeouts[_0x59fb6d(0x1fd)](_0x568738,0x1);if(isPaused||!isInGameState||playerLives<=0x0&&(!isTwoPlayerMode||player1Lives<=0x0&&player2Lives<=0x0)||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x1e3520=enemies['find'](_0x4e39de=>_0x4e39de&&_0x4e39de['id']===_0x3a0315);_0x1e3520&&_0x1e3520['state']===_0x59fb6d(0x1dd)&&(createBulletSimple(_0x1e3520)&&(playSound(_0x59fb6d(0x286),![],0.4),_0x1e3520[_0x59fb6d(0x266)]=Date[_0x59fb6d(0x2ed)]()));}catch(_0x59d561){console['error'](_0x59fb6d(0x2e7)+_0x3a0315+':',_0x59d561);}},_0x33d853);enemySpawnTimeouts['push'](_0xb7d2bc);}}}}}break;}case _0x37b699(0x1dd):{try{const _0x2b316e=_0x112abb[_0x37b699(0x274)]===ENEMY3_TYPE?BOSS_WIDTH:_0x112abb[_0x37b699(0x274)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x36cd47,y:_0x9a38b9}=getCurrentGridSlotPosition(_0x112abb[_0x37b699(0x26d)],_0x112abb[_0x37b699(0x28a)],_0x2b316e);typeof _0x36cd47===_0x37b699(0x22b)&&!isNaN(_0x36cd47)&&(_0x112abb['x']=_0x36cd47),typeof _0x9a38b9===_0x37b699(0x22b)&&!isNaN(_0x9a38b9)&&(_0x112abb['y']=_0x9a38b9),_0x112abb[_0x37b699(0x1e4)]=_0x36cd47,_0x112abb['targetGridY']=_0x9a38b9;}catch(_0x2df287){console[_0x37b699(0x2ec)](_0x37b699(0x222)+_0x112abb['id']+':',_0x2df287);}_0x112abb['velocityX']=_0x4b29e7?_0x951c4a:0x0,_0x112abb[_0x37b699(0x216)]=0x0;_0x112abb[_0x37b699(0x274)]===ENEMY3_TYPE&&_0x112abb[_0x37b699(0x1dc)]&&_0x112abb['capturedShipDimensions']&&(_0x112abb[_0x37b699(0x278)]=_0x112abb['x']+CAPTURED_SHIP_OFFSET_X,_0x112abb[_0x37b699(0x2cb)]=_0x112abb['y']+CAPTURED_SHIP_OFFSET_Y);break;}case'preparing_attack':{_0x112abb[_0x37b699(0x2e1)]=0x0,_0x112abb[_0x37b699(0x216)]=0x0;break;}case _0x37b699(0x1f4):{_0x112abb[_0x37b699(0x2e1)]=0x0,_0x112abb[_0x37b699(0x216)]=0x0;break;}case'diving_to_capture_position':{let _0x3798dc=isTwoPlayerMode&&selectedGameMode==='coop'?isPlayer1ShipCaptured||isPlayer2ShipCaptured:isShipCaptured;if(_0x3798dc){_0x112abb['state']=_0x37b699(0x303);try{const {x:_0x4711a4,y:_0x5712b5}=getCurrentGridSlotPosition(_0x112abb[_0x37b699(0x26d)],_0x112abb[_0x37b699(0x28a)],_0x11eaff);_0x112abb[_0x37b699(0x1e4)]=_0x4711a4,_0x112abb[_0x37b699(0x2c0)]=_0x5712b5;}catch(_0x2400d0){console['error'](_0x37b699(0x290)+_0x112abb['id']+':',_0x2400d0),_0x112abb['targetGridX']=gameCanvas['width']/0x2,_0x112abb[_0x37b699(0x2c0)]=ENEMY_TOP_MARGIN;}break;}const _0x472c5a=_0x112abb[_0x37b699(0x1f9)],_0x27b9c9=_0x112abb[_0x37b699(0x269)];if(_0x472c5a==null||_0x27b9c9==null){console[_0x37b699(0x2ec)](_0x37b699(0x211)+_0x112abb['id']+'\x20diving\x20to\x20capture\x20without\x20targetX/Y!\x20Aborting.'),_0x112abb['state']=_0x37b699(0x303);try{const {x:_0x4e33c0,y:_0x55dd12}=getCurrentGridSlotPosition(_0x112abb[_0x37b699(0x26d)],_0x112abb['gridCol'],_0x11eaff);_0x112abb[_0x37b699(0x1e4)]=_0x4e33c0,_0x112abb[_0x37b699(0x2c0)]=_0x55dd12;}catch(_0x1762c5){console['error'](_0x37b699(0x290)+_0x112abb['id']+':',_0x1762c5),_0x112abb[_0x37b699(0x1e4)]=gameCanvas[_0x37b699(0x2a8)]/0x2,_0x112abb[_0x37b699(0x2c0)]=ENEMY_TOP_MARGIN;}break;}const _0x1c392f=_0x472c5a-_0x112abb['x'],_0x4c08f5=_0x27b9c9-_0x112abb['y'],_0x1ce403=Math[_0x37b699(0x209)](_0x1c392f*_0x1c392f+_0x4c08f5*_0x4c08f5),_0x4dcb17=BOSS_CAPTURE_DIVE_SPEED_FACTOR*BASE_ENEMY_ATTACK_SPEED,_0x1050ff=_0x4dcb17*0.6;_0x1ce403>_0x1050ff?(_0x112abb['velocityX']=_0x1c392f/_0x1ce403*_0x4dcb17,_0x112abb[_0x37b699(0x216)]=_0x4c08f5/_0x1ce403*_0x4dcb17,_0x112abb['x']+=_0x112abb[_0x37b699(0x2e1)],_0x112abb['y']+=_0x112abb['velocityY']):(_0x112abb['x']=_0x472c5a,_0x112abb['y']=_0x27b9c9,_0x112abb[_0x37b699(0x2e1)]=0x0,_0x112abb['velocityY']=0x0,_0x112abb[_0x37b699(0x214)]=_0x37b699(0x1ec),_0x112abb[_0x37b699(0x1de)]=_0x453ef8,capturingBossId=_0x112abb['id'],captureBeamActive=!![],captureBeamSource={'x':_0x112abb['x']+_0x11eaff/0x2,'y':_0x112abb['y']+_0x16cfb3},captureBeamTargetY=_0x112abb['y'],captureBeamProgress=0x0,playSound(_0x37b699(0x20c),![],0.6),_0x112abb[_0x37b699(0x20d)]&&(captureAttemptMadeThisLevel=!![],delete _0x112abb[_0x37b699(0x20d)]));break;}case _0x37b699(0x1ec):{_0x112abb[_0x37b699(0x2e1)]=0x0,_0x112abb[_0x37b699(0x216)]=0x0;_0x112abb[_0x37b699(0x20d)]&&!captureAttemptMadeThisLevel&&(captureAttemptMadeThisLevel=!![],delete _0x112abb[_0x37b699(0x20d)]);let _0x1b0b3e=![];isTwoPlayerMode&&selectedGameMode===_0x37b699(0x235)?_0x1b0b3e=isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x112abb['id']||isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x112abb['id']:_0x1b0b3e=isShipCaptured&&capturedBossIdWithMessage===_0x112abb['id'];if(_0x1b0b3e){captureBeamActive=![];if(capturingBossId===_0x112abb['id'])capturingBossId=null;_0x112abb[_0x37b699(0x214)]=_0x37b699(0x303),stopSound('captureSound');break;}const _0x1ed9b8=_0x453ef8-_0x112abb['captureStartTime'],_0x36d8bf=CAPTURE_BEAM_ANIMATION_DURATION_MS/0x2,_0x195575=CAPTURE_BEAM_DURATION_MS;if(_0x1ed9b8<_0x36d8bf)captureBeamProgress=_0x1ed9b8/_0x36d8bf;else{if(_0x1ed9b8<_0x195575-_0x36d8bf)captureBeamProgress=0x1;else{if(_0x1ed9b8<_0x195575)captureBeamProgress=0x1-(_0x1ed9b8-(_0x195575-_0x36d8bf))/_0x36d8bf;else{captureBeamProgress=0x0,captureBeamActive=![],capturingBossId=null,stopSound(_0x37b699(0x20c)),_0x112abb[_0x37b699(0x214)]=_0x37b699(0x2ef),_0x112abb[_0x37b699(0x2b8)]=generateAttackPathInternal(_0x112abb),_0x112abb['attackPathSegmentIndex']=0x0,_0x112abb[_0x37b699(0x275)]=0x0,_0x112abb[_0x37b699(0x263)]=BASE_ENEMY_ATTACK_SPEED*ENEMY3_ATTACK_SPEED_FACTOR,_0x112abb['lastFiredTime']=0x0,_0x112abb['canFireThisDive']=!![],_0x112abb[_0x37b699(0x23e)]=0x0,_0x112abb[_0x37b699(0x261)]=null;break;}}}captureBeamProgress=Math['max'](0x0,Math[_0x37b699(0x305)](0x1,captureBeamProgress));if(captureBeamActive&&captureBeamProgress>=0.95){const _0x4bc7ea=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x1c1b38=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR,_0xb3f059=_0x112abb['x']+_0x11eaff/0x2,_0xdc8f3a=_0x112abb['y']+_0x16cfb3,_0xa5fa3f=gameCanvas[_0x37b699(0x2de)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x559fc2=Math[_0x37b699(0x2df)](_0x4bc7ea,_0x1c1b38),_0x1d3e4a=_0xb3f059-_0x559fc2/0x2,_0x5bebe8=_0xdc8f3a,_0x11348d=_0xa5fa3f-_0xdc8f3a;if(_0x11348d>0x0){const _0x129f4a={'x':_0x1d3e4a,'y':_0x5bebe8,'width':_0x559fc2,'height':_0x11348d};let _0x4acee6=null,_0x4c476a=0x0;if(isTwoPlayerMode&&selectedGameMode==='coop'){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&checkCollision(ship1,_0x129f4a))_0x4acee6=ship1,_0x4c476a=0x1;else ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&checkCollision(ship2,_0x129f4a)&&(_0x4acee6=ship2,_0x4c476a=0x2);}else ship&&playerLives>0x0&&!isShipCaptured&&checkCollision(ship,_0x129f4a)&&(_0x4acee6=ship,_0x4c476a=currentPlayer);if(_0x4acee6){_0x112abb[_0x37b699(0x289)]={'width':_0x4acee6[_0x37b699(0x2a8)],'height':_0x4acee6['height']},_0x112abb[_0x37b699(0x1dc)]=!![],stopSound(_0x37b699(0x20c)),_0x112abb[_0x37b699(0x214)]=_0x37b699(0x27c),_0x112abb[_0x37b699(0x1e4)]=null,_0x112abb[_0x37b699(0x2c0)]=null,_0x112abb['initialCaptureAnimationY']=_0x4acee6['y'],_0x112abb[_0x37b699(0x212)]=0x0,isShowingCaptureMessage=!![],captureMessageStartTime=_0x453ef8,capturedBossIdWithMessage=_0x112abb['id'],playSound(_0x37b699(0x2a0),![],0.3),csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,handlePlayerShipCollision(_0x4c476a,![],_0x453ef8,!![]);if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&aiPlayerActivelySeekingCaptureById)aiPlayerActivelySeekingCaptureById=null;break;}}}break;}case'showing_capture_message':{_0x112abb['velocityX']=0x0,_0x112abb['velocityY']=0x0;if(_0x112abb[_0x37b699(0x1dc)]&&_0x112abb['capturedShipDimensions']&&typeof _0x112abb[_0x37b699(0x301)]===_0x37b699(0x22b)){const _0x18a33c=_0x453ef8-captureMessageStartTime,_0x15093b=Math[_0x37b699(0x305)](0x1,_0x18a33c/CAPTURE_MESSAGE_DURATION),_0x36898a=_0x112abb['y']+CAPTURED_SHIP_OFFSET_Y,_0x36d130=_0x112abb[_0x37b699(0x301)];_0x112abb[_0x37b699(0x2cb)]=_0x36d130+(_0x36898a-_0x36d130)*_0x15093b,_0x112abb['capturedShipX']=_0x112abb['x']+CAPTURED_SHIP_OFFSET_X;}else _0x112abb[_0x37b699(0x278)]=_0x112abb['x']+CAPTURED_SHIP_OFFSET_X,_0x112abb[_0x37b699(0x2cb)]=_0x112abb['y']+CAPTURED_SHIP_OFFSET_Y;break;}case'attacking':{if(isEntrancePhaseActive)break;const _0xf67106=_0x112abb[_0x37b699(0x2b8)],_0x2d5729=3.8;if(!_0xf67106||_0xf67106[_0x37b699(0x1e6)]===0x0){console[_0x37b699(0x2ec)](_0x37b699(0x249)+_0x388f0d+_0x37b699(0x244)),_0x112abb['state']=_0x37b699(0x303);try{const {x:_0x41e5e2,y:_0x3a40d7}=getCurrentGridSlotPosition(_0x112abb[_0x37b699(0x26d)],_0x112abb[_0x37b699(0x28a)],_0x11eaff);_0x112abb[_0x37b699(0x1e4)]=_0x41e5e2,_0x112abb['targetGridY']=_0x3a40d7;}catch(_0x416645){console['error'](_0x37b699(0x255)+_0x388f0d+'\x20(no\x20attack\x20path):',_0x416645),_0x112abb['targetGridX']=gameCanvas[_0x37b699(0x2a8)]/0x2,_0x112abb[_0x37b699(0x2c0)]=ENEMY_TOP_MARGIN;}break;}if(_0x112abb['attackPathSegmentIndex']>=_0xf67106[_0x37b699(0x1e6)]){console[_0x37b699(0x2b0)](_0x37b699(0x249)+_0x388f0d+_0x37b699(0x2c9)+_0x112abb['attackPathSegmentIndex']+_0x37b699(0x24e)+_0xf67106[_0x37b699(0x1e6)]+_0x37b699(0x24f)),_0x112abb[_0x37b699(0x214)]=_0x37b699(0x303);try{const {x:_0x57170a,y:_0xd7e692}=getCurrentGridSlotPosition(_0x112abb[_0x37b699(0x26d)],_0x112abb[_0x37b699(0x28a)],_0x11eaff);_0x112abb['targetGridX']=_0x57170a,_0x112abb[_0x37b699(0x2c0)]=_0xd7e692;}catch(_0x43dc4a){console[_0x37b699(0x2ec)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x388f0d+'\x20(invalid\x20attack\x20index):',_0x43dc4a),_0x112abb[_0x37b699(0x1e4)]=gameCanvas[_0x37b699(0x2a8)]/0x2,_0x112abb[_0x37b699(0x2c0)]=ENEMY_TOP_MARGIN;}break;}const _0x1af8b9=_0xf67106[_0x112abb[_0x37b699(0x1ed)]];if(!_0x1af8b9||!_0x1af8b9['p0']||!_0x1af8b9['p1']||!_0x1af8b9['p2']||!_0x1af8b9['p3']){console['error']('Enemy\x20'+_0x388f0d+_0x37b699(0x29e)+_0x112abb[_0x37b699(0x1ed)]+_0x37b699(0x2ba)),_0x112abb[_0x37b699(0x214)]='returning';try{const {x:_0x4d8b9c,y:_0x418487}=getCurrentGridSlotPosition(_0x112abb[_0x37b699(0x26d)],_0x112abb[_0x37b699(0x28a)],_0x11eaff);_0x112abb[_0x37b699(0x1e4)]=_0x4d8b9c,_0x112abb[_0x37b699(0x2c0)]=_0x418487;}catch(_0x5ecb26){console[_0x37b699(0x2ec)](_0x37b699(0x255)+_0x388f0d+_0x37b699(0x2dc),_0x5ecb26),_0x112abb[_0x37b699(0x1e4)]=gameCanvas[_0x37b699(0x2a8)]/0x2,_0x112abb[_0x37b699(0x2c0)]=ENEMY_TOP_MARGIN;}break;}const _0x590ea8=_0x112abb[_0x37b699(0x263)]/0x3e8*_0x2d5729;_0x112abb[_0x37b699(0x275)]+=_0x590ea8;let _0x1dcba5,_0x3e0bdd;const _0x13c8aa=_0x112abb['x'],_0x382739=_0x112abb['y'];if(_0x112abb['attackPathT']>=0x1){try{_0x1dcba5=calculateBezierPoint(0x1,_0x1af8b9['p0']['x'],_0x1af8b9['p1']['x'],_0x1af8b9['p2']['x'],_0x1af8b9['p3']['x']),_0x3e0bdd=calculateBezierPoint(0x1,_0x1af8b9['p0']['y'],_0x1af8b9['p1']['y'],_0x1af8b9['p2']['y'],_0x1af8b9['p3']['y']);}catch(_0x1eff58){console[_0x37b699(0x2ec)](_0x37b699(0x288)+_0x112abb['id']+':',_0x1eff58),_0x1dcba5=_0x112abb['x'],_0x3e0bdd=_0x112abb['y'],_0x112abb['state']='returning';try{const {x:_0xfade39,y:_0x12a2f7}=getCurrentGridSlotPosition(_0x112abb[_0x37b699(0x26d)],_0x112abb['gridCol'],_0x11eaff);_0x112abb['targetGridX']=_0xfade39,_0x112abb[_0x37b699(0x2c0)]=_0x12a2f7;}catch(_0x2d5bde){console[_0x37b699(0x2ec)](_0x37b699(0x22f)+_0x112abb['id']+':',_0x2d5bde),_0x112abb[_0x37b699(0x1e4)]=gameCanvas[_0x37b699(0x2a8)]/0x2,_0x112abb[_0x37b699(0x2c0)]=ENEMY_TOP_MARGIN;}break;}_0x112abb[_0x37b699(0x275)]=0x0,_0x112abb[_0x37b699(0x1ed)]++;if(_0x112abb[_0x37b699(0x1ed)]>=_0xf67106[_0x37b699(0x1e6)]){_0x112abb[_0x37b699(0x214)]=_0x37b699(0x303),_0x112abb[_0x37b699(0x266)]=0x0,_0x112abb[_0x37b699(0x23e)]=0x0,_0x112abb['attackGroupId']=null;try{const {x:_0x5ba7ba,y:_0xbca655}=getCurrentGridSlotPosition(_0x112abb['gridRow'],_0x112abb[_0x37b699(0x28a)],_0x11eaff);_0x112abb[_0x37b699(0x1e4)]=_0x5ba7ba,_0x112abb[_0x37b699(0x2c0)]=_0xbca655;}catch(_0x4ec99e){console[_0x37b699(0x2ec)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x388f0d+_0x37b699(0x1f1),_0x4ec99e),_0x112abb['targetGridX']=gameCanvas[_0x37b699(0x2a8)]/0x2,_0x112abb[_0x37b699(0x2c0)]=ENEMY_TOP_MARGIN;}}else{const _0x16537d=_0xf67106[_0x112abb['attackPathSegmentIndex']];if(!_0x16537d?.['p0']){console[_0x37b699(0x2ec)](_0x37b699(0x249)+_0x388f0d+_0x37b699(0x2b4)+_0x112abb[_0x37b699(0x1ed)]+_0x37b699(0x2ba)),_0x1dcba5=_0x112abb['x'],_0x3e0bdd=_0x112abb['y'],_0x112abb['state']=_0x37b699(0x303);try{const {x:_0x33c363,y:_0x1767c8}=getCurrentGridSlotPosition(_0x112abb[_0x37b699(0x26d)],_0x112abb[_0x37b699(0x28a)],_0x11eaff);_0x112abb[_0x37b699(0x1e4)]=_0x33c363,_0x112abb[_0x37b699(0x2c0)]=_0x1767c8;}catch(_0x4a8f60){console[_0x37b699(0x2ec)](_0x37b699(0x25d)+_0x112abb['id']+':',_0x4a8f60),_0x112abb[_0x37b699(0x1e4)]=gameCanvas[_0x37b699(0x2a8)]/0x2,_0x112abb[_0x37b699(0x2c0)]=ENEMY_TOP_MARGIN;}break;}}}else try{_0x1dcba5=calculateBezierPoint(_0x112abb[_0x37b699(0x275)],_0x1af8b9['p0']['x'],_0x1af8b9['p1']['x'],_0x1af8b9['p2']['x'],_0x1af8b9['p3']['x']),_0x3e0bdd=calculateBezierPoint(_0x112abb[_0x37b699(0x275)],_0x1af8b9['p0']['y'],_0x1af8b9['p1']['y'],_0x1af8b9['p2']['y'],_0x1af8b9['p3']['y']);}catch(_0x5aa6ae){console[_0x37b699(0x2ec)](_0x37b699(0x229)+_0x112abb['id']+':',_0x5aa6ae),_0x1dcba5=_0x112abb['x'],_0x3e0bdd=_0x112abb['y'],_0x112abb[_0x37b699(0x214)]=_0x37b699(0x303);try{const {x:_0x33d325,y:_0x3acd75}=getCurrentGridSlotPosition(_0x112abb[_0x37b699(0x26d)],_0x112abb[_0x37b699(0x28a)],_0x11eaff);_0x112abb['targetGridX']=_0x33d325,_0x112abb[_0x37b699(0x2c0)]=_0x3acd75;}catch(_0x46d6ed){console[_0x37b699(0x2ec)](_0x37b699(0x1e7)+_0x112abb['id']+':',_0x46d6ed),_0x112abb['targetGridX']=gameCanvas[_0x37b699(0x2a8)]/0x2,_0x112abb[_0x37b699(0x2c0)]=ENEMY_TOP_MARGIN;}break;}if(_0x112abb&&_0x112abb['state']===_0x37b699(0x2ef)){const _0x21e4bc=_0x112abb['attackFormationOffsetX']||0x0,_0x4090d7=_0x1dcba5+_0x21e4bc,_0x195aff=_0x3e0bdd;_0x112abb[_0x37b699(0x2e1)]=_0x4090d7-_0x13c8aa,_0x112abb[_0x37b699(0x216)]=_0x195aff-_0x382739,_0x112abb['x']=_0x4090d7,_0x112abb['y']=_0x195aff;if(_0x112abb['y']>gameCanvas['height']+_0x16cfb3*1.5){_0x112abb['state']=_0x37b699(0x303),_0x112abb[_0x37b699(0x1ed)]=0x0,_0x112abb[_0x37b699(0x275)]=0x0,_0x112abb[_0x37b699(0x266)]=0x0,_0x112abb[_0x37b699(0x23e)]=0x0,_0x112abb[_0x37b699(0x261)]=null,_0x112abb['y']=-_0x16cfb3*(1.1+Math[_0x37b699(0x262)]()*0.4),_0x112abb['x']=Math['random']()*(gameCanvas[_0x37b699(0x2a8)]-_0x11eaff),_0x112abb['velocityX']=0x0,_0x112abb[_0x37b699(0x216)]=0x0;try{const {x:_0x10e6d1,y:_0x2ada3b}=getCurrentGridSlotPosition(_0x112abb[_0x37b699(0x26d)],_0x112abb[_0x37b699(0x28a)],_0x11eaff);_0x112abb[_0x37b699(0x1e4)]=_0x10e6d1,_0x112abb[_0x37b699(0x2c0)]=_0x2ada3b;}catch(_0x26afbd){console['error'](_0x37b699(0x255)+_0x388f0d+'\x20off\x20screen:',_0x26afbd),_0x112abb[_0x37b699(0x1e4)]=gameCanvas[_0x37b699(0x2a8)]/0x2,_0x112abb[_0x37b699(0x2c0)]=ENEMY_TOP_MARGIN;}}}break;}case'returning':{if(isEntrancePhaseActive)break;if(_0x112abb['targetGridX']==null||_0x112abb[_0x37b699(0x2c0)]==null){console['warn'](_0x37b699(0x249)+_0x388f0d+_0x37b699(0x2f3));try{const {x:_0x21bf9f,y:_0xe87dc5}=getCurrentGridSlotPosition(_0x112abb[_0x37b699(0x26d)],_0x112abb[_0x37b699(0x28a)],_0x11eaff);_0x112abb['targetGridX']=_0x21bf9f,_0x112abb['targetGridY']=_0xe87dc5;}catch(_0x274dcd){console['error'](_0x37b699(0x2b3)+_0x388f0d+_0x37b699(0x22d),_0x274dcd),_0x112abb[_0x37b699(0x214)]='in_grid',_0x112abb['x']=gameCanvas[_0x37b699(0x2a8)]/0x2,_0x112abb['y']=ENEMY_TOP_MARGIN;break;}}const _0x331cb4=_0x112abb[_0x37b699(0x1e4)],_0x25326a=_0x112abb['targetGridY'],_0x3a0487=_0x331cb4-_0x112abb['x'],_0x1f693a=_0x25326a-_0x112abb['y'],_0x79f917=Math['sqrt'](_0x3a0487*_0x3a0487+_0x1f693a*_0x1f693a),_0x3e7e69=scaleValue(level,BASE_RETURN_SPEED_FACTOR,MAX_RETURN_SPEED_FACTOR),_0xe11632=BASE_RETURN_SPEED*_0x3e7e69,_0x42e045=_0xe11632*0.5;_0x79f917>_0x42e045?(_0x112abb[_0x37b699(0x2e1)]=_0x3a0487/_0x79f917*_0xe11632,_0x112abb[_0x37b699(0x216)]=_0x1f693a/_0x79f917*_0xe11632,_0x112abb['x']+=_0x112abb[_0x37b699(0x2e1)],_0x112abb['y']+=_0x112abb[_0x37b699(0x216)]):(_0x112abb['x']=_0x331cb4,_0x112abb['y']=_0x25326a,_0x112abb['velocityX']=0x0,_0x112abb[_0x37b699(0x216)]=0x0,_0x112abb[_0x37b699(0x214)]=_0x37b699(0x1dd),_0x112abb[_0x37b699(0x29d)]=!![],_0x112abb['attackFormationOffsetX']=0x0,_0x112abb[_0x37b699(0x261)]=null,_0x112abb[_0x37b699(0x23a)]('returnLogDone')&&delete _0x112abb['returnLogDone'],!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(_0x37b699(0x24b),!![],0.1)));break;}}if(_0x112abb&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode==='coop'&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){const _0x51b705=[_0x37b699(0x2ef),_0x37b699(0x291),_0x37b699(0x2f0),_0x37b699(0x218)];if(_0x51b705['includes'](_0x112abb['state'])){let _0x10d258=[];if(isTwoPlayerMode&&selectedGameMode===_0x37b699(0x235)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x10d258[_0x37b699(0x2ae)]({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x10d258[_0x37b699(0x2ae)]({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isInvincible&&_0x10d258['push']({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(const _0x4d3cc5 of _0x10d258){const _0x2cc7e7=_0x4d3cc5['shipObj'],_0x5d75b1={'x':_0x112abb['x'],'y':_0x112abb['y'],'width':_0x11eaff,'height':_0x16cfb3},_0x5dfe39={'x':_0x2cc7e7['x'],'y':_0x2cc7e7['y'],'width':_0x2cc7e7[_0x37b699(0x2a8)],'height':_0x2cc7e7[_0x37b699(0x2de)]},_0x645058=_0x4d3cc5[_0x37b699(0x238)]?{'x':_0x2cc7e7['x']+DUAL_SHIP_OFFSET_X,'y':_0x2cc7e7['y'],'width':_0x2cc7e7[_0x37b699(0x2a8)],'height':_0x2cc7e7[_0x37b699(0x2de)]}:null;let _0x189c2e=![],_0x2d9048=![];if(checkCollision(_0x5d75b1,_0x5dfe39))_0x189c2e=!![];else _0x4d3cc5[_0x37b699(0x238)]&&_0x645058&&checkCollision(_0x5d75b1,_0x645058)&&(_0x189c2e=!![],_0x2d9048=!![]);if(_0x189c2e){createExplosion(_0x112abb['x']+_0x11eaff/0x2,_0x112abb['y']+_0x16cfb3/0x2),playSound(_0x37b699(0x2d7),![],0.6),enemies[_0x37b699(0x1fd)](_0x1b4ee9,0x1),_0x112abb=null,handlePlayerShipCollision(_0x4d3cc5['playerNum'],_0x2d9048,_0x453ef8,![]);if(_0x112abb===null)break;}}}}if(!_0x112abb)continue;}if(!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x37b699(0x235)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){let _0x20deb6=[];if(isTwoPlayerMode&&selectedGameMode===_0x37b699(0x235)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x20deb6[_0x37b699(0x2ae)]({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x20deb6[_0x37b699(0x2ae)]({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isInvincible&&_0x20deb6[_0x37b699(0x2ae)]({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(let _0x557f44=enemyBullets['length']-0x1;_0x557f44>=0x0;_0x557f44--){const _0x1dd045=enemyBullets[_0x557f44];if(!_0x1dd045){enemyBullets[_0x37b699(0x1fd)](_0x557f44,0x1);continue;}const _0x51e15a={'x':_0x1dd045['x'],'y':_0x1dd045['y'],'width':_0x1dd045[_0x37b699(0x2a8)],'height':_0x1dd045[_0x37b699(0x2de)]};let _0x2bed2f=![];for(const _0x3b0cff of _0x20deb6){const _0x71f63f=_0x3b0cff['shipObj'],_0x558899={'x':_0x71f63f['x'],'y':_0x71f63f['y'],'width':_0x71f63f['width'],'height':_0x71f63f[_0x37b699(0x2de)]},_0x10b4d0=_0x3b0cff['dual']?{'x':_0x71f63f['x']+DUAL_SHIP_OFFSET_X,'y':_0x71f63f['y'],'width':_0x71f63f[_0x37b699(0x2a8)],'height':_0x71f63f[_0x37b699(0x2de)]}:null;let _0x3609ac=![],_0x5490f2=![];if(checkCollision(_0x51e15a,_0x558899))_0x3609ac=!![];else _0x3b0cff[_0x37b699(0x238)]&&_0x10b4d0&&checkCollision(_0x51e15a,_0x10b4d0)&&(_0x3609ac=!![],_0x5490f2=!![]);if(_0x3609ac){playSound(_0x37b699(0x2d7),![],0.6),handlePlayerShipCollision(_0x3b0cff[_0x37b699(0x203)],_0x5490f2,_0x453ef8,![]),enemyBullets[_0x37b699(0x1fd)](_0x557f44,0x1),_0x2bed2f=!![];break;}}if(_0x2bed2f)continue;}}updateHitSparks();}catch(_0x192ea9){console['error'](_0x37b699(0x265),_0x192ea9,_0x192ea9[_0x37b699(0x245)]),isGridSoundPlaying=![],stopSound('gridBackgroundSound'),isEntrancePhaseActive=![],stopSound(_0x37b699(0x270)),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound('captureSound'),stopSound(_0x37b699(0x2a0)),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0x37b699(0x298))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert('Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.');}}function handlePlayerShipCollision(_0x534d72,_0x50a862,_0x4063f4,_0x4ba5e4=![]){const _0x40fc44=_0x4c0c0a,_0x21f841=_0x4063f4,_0x54e57b=gameCanvas?gameCanvas[_0x40fc44(0x2de)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;let _0x34f56a=0x0,_0x3a89d0=null;if(isTwoPlayerMode&&selectedGameMode===_0x40fc44(0x235)){_0x3a89d0=_0x534d72===0x1?ship1:ship2;if(_0x3a89d0){_0x34f56a=_0x3a89d0['x'];if(_0x4ba5e4){if(_0x534d72===0x1)player1CaptureRespawnX=_0x3a89d0['x'];else{if(_0x534d72===0x2)player2CaptureRespawnX=_0x3a89d0['x'];}}}else{if(_0x534d72===0x1&&typeof player1CaptureRespawnX===_0x40fc44(0x22b)&&player1CaptureRespawnX!==0x0)_0x34f56a=player1CaptureRespawnX;else{if(_0x534d72===0x2&&typeof player2CaptureRespawnX===_0x40fc44(0x22b)&&player2CaptureRespawnX!==0x0)_0x34f56a=player2CaptureRespawnX;else{if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40fc44(0x2fb))&&gameCanvas)_0x34f56a=_0x534d72===0x1?gameCanvas[_0x40fc44(0x2a8)]/0x2-gameCanvas[_0x40fc44(0x2a8)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2:gameCanvas[_0x40fc44(0x2a8)]/0x2+gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;else gameCanvas?_0x34f56a=gameCanvas[_0x40fc44(0x2a8)]/0x2-SHIP_WIDTH/0x2:_0x34f56a=0xc8;}}}}else{_0x3a89d0=ship;if(_0x3a89d0)_0x34f56a=_0x3a89d0['x'],_0x4ba5e4&&(capturedShipRespawnX_NormalMode=ship['x']);else _0x4ba5e4&&capturedShipRespawnX_NormalMode!==0x0?_0x34f56a=capturedShipRespawnX_NormalMode:_0x34f56a=gameCanvas?gameCanvas['width']/0x2-SHIP_WIDTH/0x2:0xc8;}if(isTwoPlayerMode&&selectedGameMode===_0x40fc44(0x235)){if(_0x534d72===0x1){if(_0x4ba5e4){isPlayer1ShipCaptured=!![],player1IsDualShipActive=![],player1Lives--;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40fc44(0x2fb))coopPartner1CapturedTime=_0x21f841;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0x21f841,playSound(_0x40fc44(0x242),![],0.4),ship1=null,player1NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;if(capturedBossIdWithMessage&&enemies[_0x40fc44(0x228)](_0x157f3a=>_0x157f3a['id']===capturedBossIdWithMessage)){const _0x1fa9d9=enemies[_0x40fc44(0x228)](_0x3ba0e2=>_0x3ba0e2['id']===capturedBossIdWithMessage);_0x1fa9d9&&(_0x1fa9d9['hasCapturedShip']=![],_0x1fa9d9[_0x40fc44(0x289)]=null);}}else player1NeedsRespawnAfterCapture=!![],ship1=null;}else{if(player1IsDualShipActive&&ship1){player1IsDualShipActive=![];const _0x3a4192=_0x50a862?ship1['x']+DUAL_SHIP_OFFSET_X+ship1[_0x40fc44(0x2a8)]/0x2:ship1['x']+ship1[_0x40fc44(0x2a8)]/0x2;createExplosion(_0x3a4192,ship1['y']+ship1[_0x40fc44(0x2de)]/0x2),ship1['x']=_0x34f56a,ship1['y']=_0x54e57b,ship1[_0x40fc44(0x1f9)]=ship1['x'],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x21f841+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0x21f841+RESPAWN_DELAY_MS;}else{if(ship1)createExplosion(ship1['x']+ship1['width']/0x2,ship1['y']+ship1[_0x40fc44(0x2de)]/0x2);player1Lives--;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0x21f841,playSound(_0x40fc44(0x242),![],0.4),ship1=null;if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;}else isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x21f841+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0x21f841+RESPAWN_DELAY_MS,ship1?(ship1['x']=_0x34f56a,ship1['y']=_0x54e57b,ship1[_0x40fc44(0x1f9)]=ship1['x']):ship1={'x':_0x34f56a,'y':_0x54e57b,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x34f56a,'id':'p1'};}}}else{if(_0x534d72===0x2){if(_0x4ba5e4){isPlayer2ShipCaptured=!![],player2IsDualShipActive=![],player2Lives--;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40fc44(0x2fb))coopPartner2CapturedTime=_0x21f841;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0x21f841,playSound(_0x40fc44(0x242),![],0.4),ship2=null,player2NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p2'||aiPlayerActivelySeekingCaptureById===_0x40fc44(0x2d1))aiPlayerActivelySeekingCaptureById=null;if(capturedBossIdWithMessage&&enemies[_0x40fc44(0x228)](_0x5070f4=>_0x5070f4['id']===capturedBossIdWithMessage)){const _0x1cf5c7=enemies[_0x40fc44(0x228)](_0x4f2212=>_0x4f2212['id']===capturedBossIdWithMessage);_0x1cf5c7&&(_0x1cf5c7[_0x40fc44(0x1dc)]=![],_0x1cf5c7['capturedShipDimensions']=null);}}else player2NeedsRespawnAfterCapture=!![],ship2=null;}else{if(player2IsDualShipActive&&ship2){player2IsDualShipActive=![];const _0x227f2a=_0x50a862?ship2['x']+DUAL_SHIP_OFFSET_X+ship2[_0x40fc44(0x2a8)]/0x2:ship2['x']+ship2['width']/0x2;createExplosion(_0x227f2a,ship2['y']+ship2[_0x40fc44(0x2de)]/0x2),ship2['x']=_0x34f56a,ship2['y']=_0x54e57b,ship2[_0x40fc44(0x1f9)]=ship2['x'],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x21f841+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0x21f841+RESPAWN_DELAY_MS;}else{if(ship2)createExplosion(ship2['x']+ship2['width']/0x2,ship2['y']+ship2[_0x40fc44(0x2de)]/0x2);player2Lives--;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0x21f841,playSound(_0x40fc44(0x242),![],0.4),ship2=null;if(aiPlayerActivelySeekingCaptureById==='p2'||aiPlayerActivelySeekingCaptureById===_0x40fc44(0x2d1))aiPlayerActivelySeekingCaptureById=null;}else isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x21f841+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0x21f841+RESPAWN_DELAY_MS,ship2?(ship2['x']=_0x34f56a,ship2['y']=_0x54e57b,ship2[_0x40fc44(0x1f9)]=_0x34f56a):ship2={'x':_0x34f56a,'y':_0x54e57b,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x34f56a,'id':'p2'};}}}}player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isDualShipActive&&!_0x4ba5e4&&_0x3a89d0){isDualShipActive=![];if(isTwoPlayerMode&&selectedGameMode==='normal'){if(_0x534d72===0x1)player1IsDualShipActive=![];else{if(_0x534d72===0x2)player2IsDualShipActive=![];}}else{if(!isTwoPlayerMode)player1IsDualShipActive=![];}const _0x43203d=_0x50a862?_0x34f56a+DUAL_SHIP_OFFSET_X+SHIP_WIDTH/0x2:_0x34f56a+SHIP_WIDTH/0x2;createExplosion(_0x43203d,_0x54e57b+SHIP_HEIGHT/0x2);ship&&(ship['x']=_0x34f56a,ship['y']=_0x54e57b,ship[_0x40fc44(0x1f9)]=ship['x']);isInvincible=!![],invincibilityEndTime=_0x21f841+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x21f841+RESPAWN_DELAY_MS;if(!isManualControl&&!isPlayerTwoAI)aiNeedsStabilization=!![];else{if(isPlayerTwoAI&&selectedGameMode===_0x40fc44(0x2f1)&&currentPlayer===0x2)aiNeedsStabilization=!![];}}else{if(!_0x4ba5e4&&_0x3a89d0)createExplosion(_0x34f56a+SHIP_WIDTH/0x2,_0x54e57b+SHIP_HEIGHT/0x2);if(_0x4ba5e4){isShipCaptured=!![];if(ship)ship=null;}playerLives--;if(playerLives<=0x0){playerLives=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x40fc44(0x2f1)){if(_0x534d72===0x1)player1Lives=0x0;else{if(_0x534d72===0x2)player2Lives=0x0;}isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x21f841,playerWhoIsGameOver=_0x534d72,playSound(_0x40fc44(0x242),![],0.4);const _0x21f245=_0x534d72===0x1?0x2:0x1,_0x13fbab=_0x21f245===0x1?player1Lives:player2Lives;_0x13fbab>0x0?nextActionAfterPlayerGameOver=_0x40fc44(0x23c):nextActionAfterPlayerGameOver=_0x40fc44(0x1f8);bullets=[],enemyBullets=[],explosions=[];if(!(_0x13fbab>0x0))ship=null;}else player1Lives=0x0,ship=null,playSound('gameOverSound',![],0.4),triggerFinalGameOverSequence();}else{if(isTwoPlayerMode&&selectedGameMode===_0x40fc44(0x2f1)){if(_0x534d72===0x1)player1Lives=playerLives;else player2Lives=playerLives;}if(!_0x4ba5e4){isInvincible=!![],invincibilityEndTime=_0x21f841+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x21f841+RESPAWN_DELAY_MS;if(ship&&gameCanvas){ship['x']=_0x34f56a,ship['y']=_0x54e57b,ship[_0x40fc44(0x1f9)]=ship['x'];if(!isManualControl&&!isPlayerTwoAI)aiNeedsStabilization=!![];else{if(isPlayerTwoAI&&selectedGameMode===_0x40fc44(0x2f1)&&currentPlayer===0x2)aiNeedsStabilization=!![];}}}if(_0x4ba5e4)isDualShipActive=![];}}}if(!_0x4ba5e4)fallingShips=[];}function switchPlayerTurn(){const _0x1b970d=_0x4c0c0a;if(!isTwoPlayerMode||selectedGameMode==='coop')return![];stopSound(_0x1b970d(0x2bd));if(currentPlayer===0x1){player1Score=score,player1IsDualShipActive=isDualShipActive;if(player1Score>highScore)highScore=player1Score;}else{player2Score=score,player2IsDualShipActive=isDualShipActive;if(player2Score>highScore)highScore=player2Score;}const _0x181ff7=currentPlayer===0x1?0x2:0x1,_0xe65c4d=_0x181ff7===0x1?player1Lives:player2Lives;if(_0xe65c4d<=0x0){const _0x5e9ee5=currentPlayer===0x1?player1Lives:player2Lives;return _0x5e9ee5<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x181ff7,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function _0x5706(){const _0x46159f=['CO-OP\x20GAME','\x20(invalid\x20attack\x20segment):','A\x20critical\x20error\x20occurred\x20in\x20the\x20game\x20loop.\x20Please\x20refresh.','height','max','CRITICAL:\x20Failed\x20to\x20define\x20CS\x20paths!','velocityX','CS:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','Invalid\x20next\x20Normal\x20Bezier\x20segment\x20',',\x20Path\x20','capturePrepareTimeout','\x20at\x20end\x20of\x20normal\x20path\x20','Error\x20during\x20post-landing\x20fire\x20for\x20','enemies','\x20path\x20index\x20','\x22\x20for\x20enemy\x20in\x20squadron\x20','alpha','error','now','entrance_flight_2','attacking','following_bezier_path','normal','enemy-grid-','\x20returning\x20without\x20target\x20coords.\x20Recalculating.','sign','Error\x20calculating\x20CS\x20Bezier\x20point\x20for\x20enemy\x20','\x20for\x20path\x20','1\x20PLAYER','round','Error\x20creating\x20player\x20bullet(s):','Error\x20in\x20triggerImmediateCaptureDive:','1P_VS_AI_COOP','Error\x20in\x20renderGame:','size','currentLives','GAME\x20EXIT','completed','initialCaptureAnimationY','totalRotation','returning','isDamaged','min','center','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20','forEach','CRITICAL:\x20Required\x20CS\x20path\x20\x22','isArray','generateWaveDefinition','NORMAL','findIndex','rotationDirection','290705PvBzMb','naturalHeight','\x20(state:\x20','duration','\x20missing\x20SHARED\x20path\x20','Full\x20Grid:\x20Error\x20placing\x20enemy\x20(Sq\x20','\x20for\x20SHARED\x20path\x20','NaN\x20detected\x20in\x20CS\x20path\x20calculation\x20for\x20enemy\x20','hasCapturedShip','in_grid','captureStartTime','squadronId','some','main','[Destroyed\x20Boss\x20Score\x20-\x20Attack]\x20Boss\x20destroyed\x20on\x20first\x20hit?\x20Awarding\x20','.\x20Skipping.','targetGridX','CS:\x20Error\x20setting\x20up\x20spawns\x20for\x20squadron\x20','length','Error\x20getting\x20grid\x20pos\x20after\x20bezier\x20error\x20for\x20','back','.\x20Switching\x20to\x20moving_to_grid.','clear','extraLifeSound','capturing','attackPathSegmentIndex','csClearSound','atan2','CS_LoopAttack_TR','\x20after\x20attack:','1UP','[Capture\x20Message\x20End]\x20Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','preparing_capture','landedTime','Failed\x20to\x20return\x20to\x20menu\x20after\x20critical\x20error:','\x20at\x20[','show_results','targetX','stringify','attackType','abs','splice','floor','\x20after\x20bad\x20next\x20segment','NORMAL\x20GAME','\x20after\x20bad\x20segment','grey','playerNum','rotationCompleted','rapid','moving_to_grid','full_grid','currentScore','sqrt','butterflyHitSound','resetWave','captureSound','isPreparingForImmediateCapture','Error\x20in\x20aiControl:','[scheduleSingleEntranceSquadron]\x20Firing\x20status\x20for\x20squadron\x20','attack-','Boss\x20','captureAnimationRotation','Invalid\x20start\x20segment\x20for\x20path\x20','state','hasFired','velocityY','capturedShipLastFiredTime','diving_to_capture_position','Full\x20Grid:\x20Error\x20getting\x20target\x20grid\x20pos\x20for\x20enemy\x20',').\x20Skipping.','targetPlayerId','diveStartTime','bossHit2Sound','playerShootSound','parse','player2','total','Error\x20getting\x20grid\x20pos\x20within\x20\x27in_grid\x27\x20for\x20','bossHit1Sound','tintProgress','explosionSound','undefined','single','find','Error\x20calculating\x20bezier\x20point\x20during\x20attack\x20for\x20','middle','number','Invalid\x20Normal\x20Bezier\x20segment\x20','\x20in\x20returning','Invalid\x20start\x20segment\x20for\x20squadron\x20path\x20','Error\x20getting\x20grid\x20pos\x20after\x20FINAL\x20bezier\x20error\x20for\x20','unknown','NaN\x20detected\x20in\x20Normal\x20path\x20calculation\x20for\x20enemy\x20','30px\x20Arial','Error\x20updating\x20explosions:','startSound','coop','CS_HorizontalFlyByR','sin','dual','Invalid\x20CS\x20Bezier\x20segment\x20','hasOwnProperty','CS:\x20Path\x20','switch_player','string','attackFormationOffsetX','preparing_attack','slice','hasFiredPostLanding','gameOverSound','complete','\x20attacking\x20without\x20path!\x20Returning.','stack','naturalWidth','player1','entrance_flight_1','Enemy\x20','left','gridBackgroundSound','1023376iqEeCz','pause','\x20out\x20of\x20bounds\x20(',')!\x20Returning.','102OArrnR','5510804OtyMaU','beeHitSound',',\x20index\x20','2604344atOqXu','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20','rotation','resultsMusicSound','\x20after\x20NaN','Error\x20calculating\x20Normal\x20Bezier\x20point\x20for\x20enemy\x20','Error\x20in\x20findAndDetachEnemy:','4842405pELYQS','\x20not\x20found.','Error\x20getting\x20grid\x20pos\x20after\x20invalid\x20NEXT\x20attack\x20segment\x20for\x20','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!','pathSegmentIndex','2\x20PLAYER','attackGroupId','random','speed','landed','FATAL\x20Error\x20in\x20moveEntities:','lastFiredTime','drawImage','toString','targetY','enemy-entr-','CS_LoopAttack_BL','keys','gridRow','save','Entrance\x20Wave:\x20Path\x20','entranceSound','1P_VS_AI_NORMAL','7037109TesvZf','Error\x20calculating\x20final\x20bezier\x20point\x20for\x20','type','attackPathT','\x20after\x20invalid\x20path\x20index','challenging_stage','capturedShipX','indexOf','csPerfectSound','!!!\x20CRITICAL\x20ERROR\x20IN\x20runSingleGameUpdate\x20!!!','showing_capture_message','creationTime','entrancePathId','getGamepads','[DEBUG]\x20Error\x20generating\x20attack\x20path\x20for\x20enemy\x20','sort','\x22\x20not\x20found!\x20Aborting\x20CS.','CS_LoopAttack_BR','playerId','bossGalagaDiveSound','enemyShootSound','buttons','Error\x20calculating\x20FINAL\x20bezier\x20point\x20for\x20attack\x20','capturedShipDimensions','gridCol','fillStyle','has','add','16JKzWrJ','health','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','following_entrance_path','newButtonStates','waveUpSound','.\x20Removing.','substring','Error\x20during\x20FIXED\x20enemy\x20burst\x20firing\x20(bullet\x20','.\x20Enemy\x20','function','\x20has\x20invalid\x20enemy\x20data.','object','right','restore','justReturned','\x20attacking,\x20invalid\x20segment\x20','\x20invalid!\x20Skipping.','shipCapturedSound','levelUpSound','\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!\x20Resetting\x20state\x20anyway.','boss_loop_left','cos','num',',\x20Idx\x20','CS3_DiveLoopR_Sharp','width','\x20(Path\x20','destroyed','2UP','Entrance\x20Wave:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','squadronEnemyIndex','push','\x20not\x20found.\x20Enemy\x20will\x20follow\x20squadron\x20path\x20\x22','warn','butterflyDiveSound','blue','Error\x20getting\x20grid\x20pos\x20for\x20','\x20attacking,\x20invalid\x20NEXT\x20segment\x20','START\x20GAME','994098BMhCHS','dualShipSound','attackPathSegments','map','!\x20Returning.','every','boss_loop_right','hiScoreSound','stopAllGameSounds','Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.','targetGridY','filter','resetGame','Error\x20handling\x20player\x20input:','Full\x20Grid:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','),\x20index\x20',',\x20isCS:\x20','pathId','Error\x20updating\x20target\x20grid\x20pos\x20for\x20enemy\x20','\x20attacking,\x20index\x20','shoot','capturedShipY','\x20points.\x20Health\x20was:\x20','fillRect','\x20is\x20empty\x20or\x20invalid.','thresholdsMet','pathT','ai_p2','Entrance\x20Wave:\x20No\x20squadrons\x20or\x20enemies\x20scheduled\x20for\x20level\x20','CS_HorizontalFlyByL','pressed','white','canFireThisDive','lostLifeSound',')\x20for\x20','Invalid\x20next\x20CS\x20Bezier\x20segment\x20','Entrance\x20Wave:\x20Assigned\x20entrance\x20path\x20\x22'];_0x5706=function(){return _0x46159f;};return _0x5706();}function triggerGridFiring(){const _0x3e948d=_0x4c0c0a;if(isPaused||!isInGameState||isChallengingStage||isWaveTransitioning)return;let _0x37df5e=![];isTwoPlayerMode&&selectedGameMode==='coop'?(player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)&&(_0x37df5e=!![]):playerLives>0x0&&ship&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(_0x37df5e=!![]);if(!_0x37df5e)return;const _0x334f59=enemies[_0x3e948d(0x2c1)](_0x55d885=>_0x55d885&&_0x55d885[_0x3e948d(0x214)]===_0x3e948d(0x1dd));if(_0x334f59[_0x3e948d(0x1e6)]===0x0)return;const _0x40ce44=Date[_0x3e948d(0x2ed)](),_0x5430c3=scaleValue(level,BASE_GRID_FIRE_INTERVAL,MIN_GRID_FIRE_INTERVAL);if(_0x40ce44-lastGridFireCheckTime<_0x5430c3)return;lastGridFireCheckTime=_0x40ce44;const _0x74d496=scaleValue(level,BASE_GRID_FIRE_PROBABILITY,MAX_GRID_FIRE_PROBABILITY),_0x4cca5d=Math[_0x3e948d(0x2f8)](scaleValue(level,BASE_GRID_MAX_FIRING_ENEMIES,MAX_GRID_MAX_FIRING_ENEMIES));let _0x4487d6=0x0;_0x334f59[_0x3e948d(0x281)](()=>Math['random']()-0.5);for(const _0x314206 of _0x334f59){if(_0x4487d6>=_0x4cca5d)break;if(_0x314206[_0x3e948d(0x274)]===ENEMY2_TYPE||_0x314206['type']===ENEMY3_TYPE){if(_0x314206['type']===ENEMY3_TYPE&&_0x314206[_0x3e948d(0x1dc)])continue;Math[_0x3e948d(0x262)]()<_0x74d496&&(createBulletSimple(_0x314206)&&(playSound('enemyShootSound',![],0.4),_0x314206['lastFiredTime']=_0x40ce44,_0x4487d6++));}}}function runSingleGameUpdate(_0x8ddba9){const _0xedd4f7=_0x4c0c0a;try{const _0x5a6c37=Date[_0xedd4f7(0x2ed)]();let _0x5a3b91=![];isTwoPlayerMode&&selectedGameMode===_0xedd4f7(0x235)?_0x5a3b91=player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture:_0x5a3b91=playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;let _0x3805d1=![];if(isManualControl&&connectedGamepadIndex!==null){if(isTwoPlayerMode&&selectedGameMode===_0xedd4f7(0x235)){if(player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage)_0x3805d1=!![];}else{if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1))_0x3805d1=!![];}}if(_0x3805d1&&gameOverSequenceStartTime===0x0&&!isPaused){const _0x595ddf=navigator[_0xedd4f7(0x27f)]();if(_0x595ddf?.[connectedGamepadIndex]){const _0x21038c=_0x595ddf[connectedGamepadIndex],_0x577788=processSingleController(_0x21038c,previousGameButtonStates);previousGameButtonStates=_0x577788[_0xedd4f7(0x292)][_0xedd4f7(0x240)]();if(_0x577788['back']){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates[_0xedd4f7(0x1e6)]>0x0)previousGameButtonStates=[];}}else connectedGamepadIndex===null&&previousGameButtonStates[_0xedd4f7(0x1e6)]>0x0&&(previousGameButtonStates=[]);let _0x3270d1=![];if(isManualControl&&isTwoPlayerMode&&selectedGameMode===_0xedd4f7(0x235)&&!isPlayerTwoAI&&connectedGamepadIndexP2!==null){if(player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage)_0x3270d1=!![];}else{if(isManualControl&&isTwoPlayerMode&&selectedGameMode===_0xedd4f7(0x2f1)&&!isPlayerTwoAI&&connectedGamepadIndexP2!==null){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&currentPlayer===0x2)_0x3270d1=!![];}}if(_0x3270d1&&gameOverSequenceStartTime===0x0&&!isPaused){const _0x128cdd=navigator[_0xedd4f7(0x27f)]();if(_0x128cdd?.[connectedGamepadIndexP2]){const _0x52f554=_0x128cdd[connectedGamepadIndexP2],_0x465eb7=processSingleController(_0x52f554,previousGameButtonStatesP2);previousGameButtonStatesP2=_0x465eb7[_0xedd4f7(0x292)][_0xedd4f7(0x240)]();if(_0x465eb7['back']){stopGameAndShowMenu();return;}}else{if(previousGameButtonStatesP2[_0xedd4f7(0x1e6)]>0x0)previousGameButtonStatesP2=[];}}else connectedGamepadIndexP2===null&&previousGameButtonStatesP2[_0xedd4f7(0x1e6)]>0x0&&(previousGameButtonStatesP2=[]);if(isPaused){renderGame();return;}const _0x205ea0=showCsBonusScoreMessage||showPerfectMessage;if(isCoopAIDemoActive&&_0x205ea0&&gameCanvas?.['width']>0x0){const _0x3c75c7=ship1&&player1Lives>0x0&&player2Lives<=0x0,_0x105b4a=ship2&&player2Lives>0x0&&player1Lives<=0x0;if(_0x3c75c7){const _0x28c5ca=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0xf2afe=Math['round'](gameCanvas[_0xedd4f7(0x2a8)]/0x2-_0x28c5ca/0x2);ship1['x']=_0xf2afe,ship1[_0xedd4f7(0x1f9)]=_0xf2afe,smoothedShip1X=_0xf2afe,ship2&&(ship2[_0xedd4f7(0x1f9)]=ship2['x'],smoothedShip2X=ship2['x']);}else{if(_0x105b4a){const _0x38ece6=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x50cbfe=Math[_0xedd4f7(0x2f8)](gameCanvas[_0xedd4f7(0x2a8)]/0x2-_0x38ece6/0x2);ship2['x']=_0x50cbfe,ship2[_0xedd4f7(0x1f9)]=_0x50cbfe,smoothedShip2X=_0x50cbfe,ship1&&(ship1[_0xedd4f7(0x1f9)]=ship1['x'],smoothedShip1X=ship1['x']);}else{if(ship1&&player1Lives>0x0&&ship2&&player2Lives>0x0){const _0x12d195=gameCanvas['width']/0x2-gameCanvas[_0xedd4f7(0x2a8)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1['x']=_0x12d195,ship1['targetX']=_0x12d195,smoothedShip1X=_0x12d195;const _0x437d17=gameCanvas['width']/0x2+gameCanvas[_0xedd4f7(0x2a8)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2['x']=_0x437d17,ship2[_0xedd4f7(0x1f9)]=_0x437d17,smoothedShip2X=_0x437d17;}}}}else{if(_0x205ea0&&gameCanvas?.[_0xedd4f7(0x2a8)]>0x0){if(isTwoPlayerMode&&selectedGameMode===_0xedd4f7(0x235)){const _0x1e109c=ship1&&player1Lives>0x0,_0x3a6942=ship2&&player2Lives>0x0;if(_0x1e109c&&_0x3a6942){if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xedd4f7(0x2fb)){const _0xc5b6d6=gameCanvas[_0xedd4f7(0x2a8)]/0x2-gameCanvas[_0xedd4f7(0x2a8)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x10c4bc=gameCanvas[_0xedd4f7(0x2a8)]/0x2+gameCanvas[_0xedd4f7(0x2a8)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2['x']=_0x10c4bc,ship2['targetX']=_0x10c4bc,smoothedShip2X=_0x10c4bc);}}else{if(_0x1e109c&&ship1){const _0x209947=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x31f58c=Math['round'](gameCanvas[_0xedd4f7(0x2a8)]/0x2-_0x209947/0x2);ship1['x']=_0x31f58c,ship1[_0xedd4f7(0x1f9)]=_0x31f58c,ship2&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'&&(ship2[_0xedd4f7(0x1f9)]=ship2['x'],smoothedShip2X=ship2['x']);}else{if(_0x3a6942&&ship2){const _0x585363=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x3c5459=Math['round'](gameCanvas[_0xedd4f7(0x2a8)]/0x2-_0x585363/0x2);ship2['x']=_0x3c5459,ship2[_0xedd4f7(0x1f9)]=_0x3c5459;if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xedd4f7(0x2fb))smoothedShip2X=_0x3c5459;ship1&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'&&(ship1[_0xedd4f7(0x1f9)]=ship1['x']);}}}}else{if((!isManualControl||isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)&&ship){const _0x2e403a=isDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH;ship['x']=Math[_0xedd4f7(0x2f8)](gameCanvas[_0xedd4f7(0x2a8)]/0x2-_0x2e403a/0x2),ship['targetX']=ship['x'];if(isPlayerTwoAI&&selectedGameMode===_0xedd4f7(0x2f1)&&currentPlayer===0x2)smoothedShipX=ship['x'];else{if(!isManualControl)smoothedShipX=ship['x'];}}}}}let _0xb8d05d=![];if(selectedGameMode===_0xedd4f7(0x235)&&level===0x1&&coopPlayersReadyStartTime>0x0){_0xb8d05d=!![];if(isShowingCoopPlayersReady){if(_0x5a6c37-coopPlayersReadyStartTime<0x64){explosions=[];if(typeof updateExplosions===_0xedd4f7(0x298))updateExplosions();}if(_0x5a6c37>=coopPlayersReadyStartTime+0xbb8){isShowingCoopPlayersReady=![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xedd4f7(0x2fb)?(isShowingIntro=!![],introStep=0x2,introDisplayStartTime=_0x5a6c37):(isShowingIntro=!![],introStep=0x1,introDisplayStartTime=_0x5a6c37);}}else{if(isShowingIntro){if(_0x5a6c37-introDisplayStartTime<0x64){explosions=[];if(typeof updateExplosions===_0xedd4f7(0x298))updateExplosions();}let _0x42e14e=INTRO_DURATION_PER_STEP;introStep===0x1&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xedd4f7(0x2fb))&&(_0x42e14e=TWO_PLAYER_STAGE_INTRO_DURATION);if(_0x5a6c37>=introDisplayStartTime+_0x42e14e){if(introStep===0x1&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xedd4f7(0x2fb))){introStep=0x2,introDisplayStartTime=_0x5a6c37,explosions=[];if(typeof updateExplosions===_0xedd4f7(0x298))updateExplosions();}else{isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();_0xb8d05d=![],coopPlayersReadyStartTime=0x0;}}}else _0xb8d05d=![],coopPlayersReadyStartTime=0x0;}if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xedd4f7(0x2fb))handlePlayerInput();if(typeof moveEntities===_0xedd4f7(0x298))moveEntities();renderGame();if(_0xb8d05d)return;}if(selectedGameMode===_0xedd4f7(0x235)&&level===0x1&&!gameJustStartedAndWaveLaunched&&coopPlayersReadyStartTime===0x0&&gameJustStarted){if(isFullGridWave)startFullGridWave();else{if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition['length']>0x0)scheduleEntranceFlightWave();else isWaveTransitioning=!![],readyForNextWaveReset=!![];}}gameJustStartedAndWaveLaunched=!![],gameJustStarted=![];}if(isShowingPlayerGameOverMessage&&isTwoPlayerMode&&selectedGameMode===_0xedd4f7(0x2f1)){if(_0x5a6c37-playerGameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0xedd4f7(0x298))updateExplosions();}if(_0x5a6c37-playerGameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION){isShowingPlayerGameOverMessage=![],explosions=[];if(typeof updateExplosions===_0xedd4f7(0x298))updateExplosions();const _0x164061=playerWhoIsGameOver;playerWhoIsGameOver=0x0;if(nextActionAfterPlayerGameOver===_0xedd4f7(0x23c))switchPlayerTurn()?(_0x164061===0x2&&currentPlayer===0x1&&player1CompletedLevel===level&&(level++,player1CompletedLevel=-0x1,player1MaxLevelReached=Math['max'](player1MaxLevelReached,level)),resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![]):triggerFinalGameOverSequence();else nextActionAfterPlayerGameOver===_0xedd4f7(0x1f8)?triggerFinalGameOverSequence():triggerFinalGameOverSequence();renderGame();return;}else{renderGame();return;}}if(isTwoPlayerMode&&selectedGameMode==='coop'){let _0xaf69e0=![],_0x3fee13=![];if(isPlayer1ShowingGameOverMessage){if(_0x5a6c37-player1GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0xedd4f7(0x298))updateExplosions();}if(_0x5a6c37-player1GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer1ShowingGameOverMessage=![],_0xaf69e0=!![],explosions=[];if(typeof updateExplosions===_0xedd4f7(0x298))updateExplosions();}}if(isPlayer2ShowingGameOverMessage){if(_0x5a6c37-player2GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(_0x5a6c37-player2GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer2ShowingGameOverMessage=![],_0x3fee13=!![],explosions=[];if(typeof updateExplosions===_0xedd4f7(0x298))updateExplosions();}}if(_0xaf69e0||_0x3fee13){player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xedd4f7(0x2fb))handlePlayerInput();if(typeof moveEntities===_0xedd4f7(0x298))moveEntities();renderGame();if(gameOverSequenceStartTime>0x0||player1Lives>0x0||player2Lives>0x0)return;}else{if(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage){if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')handlePlayerInput();if(typeof moveEntities===_0xedd4f7(0x298))moveEntities();renderGame();return;}}}if(isShowingCaptureMessage){if(_0x5a6c37-captureMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0xedd4f7(0x298))updateExplosions();}const _0x4f3f66=enemies[_0xedd4f7(0x228)](_0x2c506f=>_0x2c506f['id']===capturedBossIdWithMessage);if(_0x4f3f66&&_0x4f3f66['state']===_0xedd4f7(0x27c)){const _0x23a29d=_0x5a6c37-captureMessageStartTime,_0x4e0537=Math[_0xedd4f7(0x305)](0x1,_0x23a29d/CAPTURE_MESSAGE_DURATION);_0x4f3f66[_0xedd4f7(0x212)]=_0x4e0537*0x2*(0x2*Math['PI']);}else _0x4f3f66&&(_0x4f3f66[_0xedd4f7(0x212)]=0x0);if(isInGameState&&!isShowingPlayerGameOverMessage&&!isPlayer1ShowingGameOverMessage&&!isPlayer2ShowingGameOverMessage&&gameOverSequenceStartTime===0x0){if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xedd4f7(0x2fb))handlePlayerInput();if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')aiControlCoop();else isPlayerTwoAI&&selectedGameMode===_0xedd4f7(0x2f1)&&currentPlayer===0x2&&aiControl();if(typeof moveEntities===_0xedd4f7(0x298))moveEntities();updateExplosions(),updateFloatingScores();}if(_0x5a6c37-captureMessageStartTime>=CAPTURE_MESSAGE_DURATION){isShowingCaptureMessage=![],explosions=[];if(typeof updateExplosions===_0xedd4f7(0x298))updateExplosions();stopSound(_0xedd4f7(0x2a0)),captureBeamActive=![];if(_0x4f3f66&&_0x4f3f66[_0xedd4f7(0x214)]===_0xedd4f7(0x27c)){_0x4f3f66[_0xedd4f7(0x214)]='returning',_0x4f3f66[_0xedd4f7(0x212)]=0x0;try{const _0x4fd0da=_0x4f3f66[_0xedd4f7(0x274)]===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH,{x:_0x5aa7b2,y:_0xfe5a1a}=getCurrentGridSlotPosition(_0x4f3f66['gridRow'],_0x4f3f66[_0xedd4f7(0x28a)],_0x4fd0da);_0x4f3f66[_0xedd4f7(0x1e4)]=_0x5aa7b2,_0x4f3f66[_0xedd4f7(0x2c0)]=_0xfe5a1a;}catch(_0x47cc57){console[_0xedd4f7(0x2ec)](_0xedd4f7(0x1f3)+_0x4f3f66['id']+':',_0x47cc57),_0x4f3f66[_0xedd4f7(0x1e4)]=gameCanvas[_0xedd4f7(0x2a8)]/0x2,_0x4f3f66[_0xedd4f7(0x2c0)]=ENEMY_TOP_MARGIN;}}else _0x4f3f66&&(_0x4f3f66[_0xedd4f7(0x212)]=0x0);capturedBossIdWithMessage=null;const _0x4de25c=gameCanvas?gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;if(isTwoPlayerMode&&selectedGameMode===_0xedd4f7(0x235)){if(player1NeedsRespawnAfterCapture&&player1Lives>0x0){ship1={'x':player1CaptureRespawnX,'y':_0x4de25c,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player1CaptureRespawnX,'id':'p1'},isPlayer1ShipCaptured=![],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x5a6c37+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=![],player1NeedsRespawnAfterCapture=![],player1CaptureRespawnX=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')smoothedShip1X=ship1['x'];}if(player2NeedsRespawnAfterCapture&&player2Lives>0x0){ship2={'x':player2CaptureRespawnX,'y':_0x4de25c,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player2CaptureRespawnX,'id':'p2'},isPlayer2ShipCaptured=![],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x5a6c37+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=![],player2NeedsRespawnAfterCapture=![],player2CaptureRespawnX=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')smoothedShip2X=ship2['x'];}if(player1Lives<=0x0&&player2Lives<=0x0){if(gameOverSequenceStartTime===0x0)triggerFinalGameOverSequence();}}else{if(!isManualControl&&!isPlayerTwoAI){if(isShipCaptured&&playerLives>0x0){let _0x2164ad=gameCanvas?gameCanvas['width']/0x2-SHIP_WIDTH/0x2:0xc8;if(typeof smoothedShipX==='number')_0x2164ad=smoothedShipX;ship={'x':_0x2164ad,'y':_0x4de25c,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x2164ad,'id':'main'},isShipCaptured=![],isInvincible=!![],invincibilityEndTime=_0x5a6c37+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=![],aiNeedsStabilization=!![];if(smoothedShipX===undefined&&ship)smoothedShipX=ship['x'];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isManualControl){if(isShipCaptured&&playerLives>0x0){let _0x4ffd40=capturedShipRespawnX_NormalMode!==0x0?capturedShipRespawnX_NormalMode:gameCanvas?gameCanvas[_0xedd4f7(0x2a8)]/0x2-SHIP_WIDTH/0x2:0xc8;ship={'x':_0x4ffd40,'y':_0x4de25c,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x4ffd40,'id':_0xedd4f7(0x1e1)},isShipCaptured=![],capturedShipRespawnX_NormalMode=0x0,isInvincible=!![],invincibilityEndTime=_0x5a6c37+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x5a6c37+RESPAWN_DELAY_MS;if(isPlayerTwoAI&&selectedGameMode===_0xedd4f7(0x2f1)&&currentPlayer===0x2)aiNeedsStabilization=!![];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&((!isTwoPlayerMode||isTwoPlayerMode&&selectedGameMode==='normal'&&(currentPlayer===0x1&&player2Lives<=0x0||currentPlayer===0x2&&player1Lives<=0x0))&&triggerFinalGameOverSequence());}}}}renderGame();return;}const _0x20b2a5=!(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage||isShowingPlayerGameOverMessage),_0xd65e30=isShowingIntro&&!_0xb8d05d&&!(selectedGameMode===_0xedd4f7(0x235)&&level===0x1);if(!_0xb8d05d&&gameOverSequenceStartTime===0x0&&_0x5a3b91&&!isShowingCaptureMessage&&_0x20b2a5){if(isInGameState&&!_0xd65e30){if(!(_0x205ea0&&!isManualControl)){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xedd4f7(0x2fb))aiControlCoop();else{if(isPlayerTwoAI&&selectedGameMode===_0xedd4f7(0x2f1)&&currentPlayer===0x2)aiControl();else!isManualControl&&!isPlayerTwoAI&&aiControl();}}isManualControl&&handlePlayerInput();}}isTwoPlayerMode&&selectedGameMode===_0xedd4f7(0x235)?(isPlayer1Invincible&&_0x5a6c37>=player1InvincibilityEndTime&&(isPlayer1Invincible=![],player1InvincibilityEndTime=0x0),isPlayer2Invincible&&_0x5a6c37>=player2InvincibilityEndTime&&(isPlayer2Invincible=![],player2InvincibilityEndTime=0x0)):(isInvincible&&_0x5a6c37>=invincibilityEndTime&&(isInvincible=![],invincibilityEndTime=0x0),isWaitingForRespawn&&_0x5a6c37>=respawnTime&&(isWaitingForRespawn=![]));const _0x3d06fb=showExtraLifeMessage&&_0x5a6c37-extraLifeMessageStartTime<0x64;if(_0x3d06fb&&(isWaveTransitioning||isChallengingStage&&enemies[_0xedd4f7(0x1e6)]===0x0)){}if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xedd4f7(0x2fb))&&isChallengingStage&&enemies[_0xedd4f7(0x1e6)]===0x0&&!isCsCompletionDelayActive&&!showCsBonusScoreMessage&&!showPerfectMessage&&gameCanvas&&gameCanvas[_0xedd4f7(0x2a8)]>0x0){const _0xcf24e9=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage,_0x3a9e21=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage;if(_0xcf24e9&&!_0x3a9e21){const _0x2ef860=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x238c7=Math['round'](gameCanvas['width']/0x2-_0x2ef860/0x2);ship1['x']=_0x238c7,ship1[_0xedd4f7(0x1f9)]=_0x238c7,smoothedShip1X=_0x238c7;}else{if(_0x3a9e21&&!_0xcf24e9){const _0x10abb7=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x23eda6=Math['round'](gameCanvas['width']/0x2-_0x10abb7/0x2);ship2['x']=_0x23eda6,ship2[_0xedd4f7(0x1f9)]=_0x23eda6,smoothedShip2X=_0x23eda6;}}}if(isCsCompletionDelayActive&&_0x20b2a5&&gameOverSequenceStartTime===0x0){if(_0x5a6c37-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY+EXPLOSION_DURATION){isCsCompletionDelayActive=![],csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies;csCompletionResultIsPerfect?(playSound(_0xedd4f7(0x27a),![],0.6),showCsHitsMessage=!![],csHitsMessageStartTime=_0x5a6c37):(playSound(_0xedd4f7(0x1ee),![],0.6),showCSClearMessage=!![],csClearMessageStartTime=_0x5a6c37);bullets=[],enemyBullets=[],renderGame();return;}else{if(_0x5a6c37-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY&&explosions[_0xedd4f7(0x1e6)]>0x0){updateExplosions(),renderGame();return;}else{if(_0x5a6c37-csCompletionDelayStartTime<CS_COMPLETION_MESSAGE_DELAY){renderGame();return;}}}}let _0x1f4f4b=![],_0x359ab5=![];if(_0x20b2a5&&gameOverSequenceStartTime===0x0&&!isShowingCoopPlayersReady&&!_0xb8d05d){if(showCsHitsMessage){if(_0x5a6c37-csHitsMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0xedd4f7(0x298))updateExplosions();}if(Date['now']()-csHitsMessageStartTime>CS_HITS_MESSAGE_DURATION){showCsHitsMessage=![],showPerfectMessage=!![],perfectMessageStartTime=_0x5a6c37,explosions=[];if(typeof updateExplosions===_0xedd4f7(0x298))updateExplosions();}_0x359ab5=!![];}else{if(showPerfectMessage){if(_0x5a6c37-perfectMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0xedd4f7(0x298))updateExplosions();}if(Date['now']()-perfectMessageStartTime>CS_PERFECT_MESSAGE_DURATION){showPerfectMessage=![],showCsBonusScoreMessage=!![],csBonusScoreMessageStartTime=_0x5a6c37,explosions=[];if(typeof updateExplosions===_0xedd4f7(0x298))updateExplosions();}_0x359ab5=!![];}else{if(showCsBonusScoreMessage){if(_0x5a6c37-csBonusScoreMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0xedd4f7(0x298))updateExplosions();}if(Date['now']()-csBonusScoreMessageStartTime>CS_BONUS_MESSAGE_DURATION){showCsBonusScoreMessage=![],_0x1f4f4b=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions===_0xedd4f7(0x298))updateExplosions();}_0x359ab5=!![];}else{if(showCSClearMessage){if(_0x5a6c37-csClearMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0xedd4f7(0x298))updateExplosions();}Date[_0xedd4f7(0x2ed)]()-csClearMessageStartTime>=CS_CLEAR_HITS_DELAY&&!showCsHitsForClearMessage&&(showCsHitsForClearMessage=!![]);Date['now']()-csClearMessageStartTime>=CS_CLEAR_SCORE_DELAY&&!showCsScoreForClearMessage&&(showCsScoreForClearMessage=!![]);if(Date[_0xedd4f7(0x2ed)]()-csClearMessageStartTime>=CS_CLEAR_DELAY){showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],_0x1f4f4b=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();}_0x359ab5=!![];}else{if(showExtraLifeMessage)Date['now']()-extraLifeMessageStartTime>EXTRA_LIFE_MESSAGE_DURATION&&(showExtraLifeMessage=![]),_0x359ab5=!![];else{if(showReadyMessage){if(_0x5a6c37-readyMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0xedd4f7(0x298))updateExplosions();}if(Date[_0xedd4f7(0x2ed)]()-readyMessageStartTime>READY_MESSAGE_DURATION){showReadyMessage=![],_0x1f4f4b=!![],explosions=[];if(typeof updateExplosions===_0xedd4f7(0x298))updateExplosions();}_0x359ab5=!![];}}}}}}}if(_0x359ab5&&!_0x1f4f4b&&!isShowingCoopPlayersReady&&!_0xb8d05d&&!isShowingCaptureMessage&&_0x20b2a5){if(!((_0x205ea0||showCsHitsMessage||showCSClearMessage)&&isManualControl)&&!showExtraLifeMessage){renderGame();return;}}if(_0xd65e30&&_0x20b2a5&&gameOverSequenceStartTime===0x0){let _0x4a3560=![];const _0x469cfe=_0x5a6c37-introDisplayStartTime;let _0x3c72fb=INTRO_DURATION_PER_STEP;const _0x1cfdce=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xedd4f7(0x271),_0x41a702=isTwoPlayerMode&&selectedGameMode===_0xedd4f7(0x2f1)&&!isPlayerTwoAI;(_0x41a702||_0x1cfdce)&&(_0x3c72fb=TWO_PLAYER_STAGE_INTRO_DURATION);if(introStep===0x1){if(_0x469cfe<0x64){explosions=[];if(typeof updateExplosions===_0xedd4f7(0x298))updateExplosions();}let _0x5b35a6=null,_0x243665=0x1;if(!playerIntroSoundPlayed){const _0x52f6f1=_0x1cfdce||_0x41a702,_0xc48882=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xedd4f7(0x2fb)&&level>0x1;if(_0x52f6f1){if(currentPlayer===0x1&&level===0x1&&!initialGameStartSoundPlayedThisSession)_0x5b35a6=_0xedd4f7(0x234),_0x243665=0.4;else(currentPlayer===0x2||level>0x1)&&(_0x5b35a6=_0xedd4f7(0x2a1),_0x243665=0.2);}else{if(_0xc48882)_0x5b35a6=_0xedd4f7(0x2a1),_0x243665=0.2;else{if(!isTwoPlayerMode){if(level===0x1&&!initialGameStartSoundPlayedThisSession)_0x5b35a6=_0xedd4f7(0x234),_0x243665=0.4;else level>0x1&&(_0x5b35a6=_0xedd4f7(0x2a1),_0x243665=0.2);}}}}_0x5b35a6&&(playSound(_0x5b35a6,![],_0x243665),playerIntroSoundPlayed=!![],_0x5b35a6===_0xedd4f7(0x234)&&(initialGameStartSoundPlayedThisSession=!![]));if(_0x469cfe>=_0x3c72fb){if(isChallengingStage)introStep=0x3;else introStep=0x2;introDisplayStartTime=_0x5a6c37,explosions=[];if(typeof updateExplosions===_0xedd4f7(0x298))updateExplosions();}}else{if(introStep===0x2){if(_0x469cfe<0x64){explosions=[];if(typeof updateExplosions===_0xedd4f7(0x298))updateExplosions();}if(!stageIntroSoundPlayed){if(playLevelUpAfterCSBonus&&(isTwoPlayerMode&&selectedGameMode===_0xedd4f7(0x235)))playSound(_0xedd4f7(0x2a1),![],0.2),playLevelUpAfterCSBonus=![],stageIntroSoundPlayed=!![];else{if(isTwoPlayerMode&&selectedGameMode===_0xedd4f7(0x235)&&!isPlayerTwoAI&&!isCoopAIDemoActive)playSound(_0xedd4f7(0x2a1),![],0.2),stageIntroSoundPlayed=!![];else{if(selectedGameMode===_0xedd4f7(0x235)){if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&level>0x1)playSound(_0xedd4f7(0x2a1),![],0.2),stageIntroSoundPlayed=!![];else(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xedd4f7(0x2fb))&&level===0x1&&(stageIntroSoundPlayed=!![]);}else{if(!isTwoPlayerMode&&level>0x1)playSound(_0xedd4f7(0x2a1),![],0.2),stageIntroSoundPlayed=!![];else{if(level>0x1&&!playerIntroSoundPlayed&&!(isPlayerTwoAI&&selectedGameMode===_0xedd4f7(0x2f1))&&!initialGameStartSoundPlayedThisSession)playSound('levelUpSound',![],0.2),stageIntroSoundPlayed=!![];else level===0x1&&!isManualControl&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode===_0xedd4f7(0x235))&&!initialGameStartSoundPlayedThisSession&&(playSound('startSound',![],0.4),initialGameStartSoundPlayedThisSession=!![],stageIntroSoundPlayed=!![]);}}}}}if(_0x469cfe>=_0x3c72fb){_0x4a3560=!![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();}}else{if(introStep===0x3){if(_0x469cfe<0x64){explosions=[];if(typeof updateExplosions===_0xedd4f7(0x298))updateExplosions();}!csIntroSoundPlayed&&(playSound('entranceSound',![],0.4),csIntroSoundPlayed=!![],stageIntroSoundPlayed=!![]);if(_0x469cfe>=_0x3c72fb){_0x4a3560=!![],explosions=[];if(typeof updateExplosions===_0xedd4f7(0x298))updateExplosions();}}}}if(isInGameState&&_0x20b2a5&&gameOverSequenceStartTime===0x0&&gameCanvas){let _0x4653e7=null,_0x347f24=null;const _0x18b0e5=isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_NORMAL'&&currentPlayer===0x1&&isShowingIntro;if(_0x18b0e5){let _0x4da430=![],_0x2db232=![];const _0x3e326f=navigator[_0xedd4f7(0x27f)]();if(connectedGamepadIndex!==null&&_0x3e326f?.[connectedGamepadIndex]){const _0x46cc25=_0x3e326f[connectedGamepadIndex],_0x1d7c16=processSingleController(_0x46cc25,previousGameButtonStates);_0x4da430=_0x1d7c16[_0xedd4f7(0x24a)],_0x2db232=_0x1d7c16[_0xedd4f7(0x29b)];}_0x4653e7=keyboardP1LeftDown||_0x4da430,_0x347f24=keyboardP1RightDown||_0x2db232;}if(_0x1cfdce&&currentPlayer===0x2)aiControl();else{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xedd4f7(0x2fb))aiControlCoop();else!isManualControl&&!isPlayerTwoAI&&aiControl();}typeof moveEntities===_0xedd4f7(0x298)&&moveEntities(_0x4653e7,_0x347f24),updateExplosions(),updateFloatingScores();}if(_0x4a3560){isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![];isManualControl&&(isShowingDemoText=![]);if(!isChallengingStage)isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xedd4f7(0x2fb)?(aiShip1CanShootTime=Date[_0xedd4f7(0x2ed)]()+0x3e8,aiShip2CanShootTime=Date[_0xedd4f7(0x2ed)]()+0x4b0):aiCanShootTime=Date[_0xedd4f7(0x2ed)]()+(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xedd4f7(0x271)?0x3e8:0xbb8);else{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0;else aiCanShootTime=0x0;}const _0x1ba555=level===0x1&&selectedGameMode!==_0xedd4f7(0x235),_0x1bc8a0=level===0x1&&selectedGameMode===_0xedd4f7(0x235),_0x103e6c=_0x1ba555&&!gameJustStartedAndWaveLaunched||level>0x1||isChallengingStage||_0x1bc8a0&&!gameJustStartedAndWaveLaunched;if(_0x103e6c){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0xedd4f7(0x1e6)]>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound(_0xedd4f7(0x270),![],0.4);}else isEntrancePhaseActive=![],stopSound(_0xedd4f7(0x270)),isWaveTransitioning=!![],readyForNextWaveReset=!![],bullets=[],enemyBullets=[],explosions=[],setTimeout(()=>{const _0x520a12=_0xedd4f7,_0x3b9940=isTwoPlayerMode&&selectedGameMode===_0x520a12(0x235)?player1Lives>0x0||player2Lives>0x0:playerLives>0x0;if((isInGameState||!isInGameState&&_0x3b9940)&&typeof resetWaveInternal===_0x520a12(0x298)){if(_0x3b9940)resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![];else triggerFinalGameOverSequence();}},0x64);}if(_0x1ba555||level>0x1||isChallengingStage||_0x1bc8a0)gameJustStartedAndWaveLaunched=!![];}}isManualControl&&_0xd65e30&&_0x20b2a5&&gameOverSequenceStartTime===0x0&&handlePlayerInput();renderGame();return;}const _0x218f27=!_0xb8d05d&&!_0xd65e30&&!_0x1f4f4b&&!isShowingCaptureMessage;if(gameJustStarted&&_0x218f27){if(!gameJustStartedAndWaveLaunched){const _0x155dd9=selectedGameMode===_0xedd4f7(0x235)&&level===0x1&&coopPlayersReadyStartTime!==0x0;if(!_0x155dd9){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition['length']>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound(_0xedd4f7(0x270),![],0.4);}else isWaveTransitioning=!![],readyForNextWaveReset=!![];}gameJustStartedAndWaveLaunched=!![];}}gameJustStarted=![];}if(_0x218f27&&isInGameState&&_0x20b2a5&&gameOverSequenceStartTime===0x0){if(!_0x205ea0||_0x205ea0&&isManualControl){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xedd4f7(0x2fb))aiControlCoop();else{if(isPlayerTwoAI&&selectedGameMode===_0xedd4f7(0x2f1)&&currentPlayer===0x2)aiControl();else!isManualControl&&!isPlayerTwoAI&&aiControl();}isManualControl&&handlePlayerInput();if(typeof moveEntities===_0xedd4f7(0x298))moveEntities();updateExplosions(),updateFloatingScores();}else _0x205ea0&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&(updateExplosions(),updateFloatingScores());}if(_0x218f27&&_0x20b2a5&&gameOverSequenceStartTime===0x0){if(GRID_BREATH_ENABLED&&isInGameState&&!isChallengingStage&&!isWaveTransitioning&&_0x5a3b91){const _0xcd6b6=enemies['some'](_0x5d3b51=>_0x5d3b51?.[_0xedd4f7(0x214)]==='in_grid');if(_0xcd6b6&&isGridBreathingActive){const _0x3c320b=_0x5a6c37-gridBreathStartTime,_0x49b4bb=scaleValue(level,BASE_GRID_BREATH_CYCLE_MS,MIN_GRID_BREATH_CYCLE_MS),_0x41d7ab=_0x3c320b%_0x49b4bb;currentGridBreathFactor=(Math['sin'](_0x41d7ab/_0x49b4bb*Math['PI']*0x2-Math['PI']/0x2)+0x1)/0x2;}else{if(!_0xcd6b6&&isGridBreathingActive)isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0;else _0xcd6b6&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=_0x5a6c37,currentGridBreathFactor=0x0);}}else isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if(isEntrancePhaseActive){const _0x1a51cc=enemiesSpawnedThisWave>=totalEnemiesScheduledForWave,_0x7b4654=enemies[_0xedd4f7(0x1e0)](_0x435ef0=>_0x435ef0?.[_0xedd4f7(0x214)]===_0xedd4f7(0x291)||_0x435ef0?.[_0xedd4f7(0x214)]===_0xedd4f7(0x206)||_0x435ef0?.[_0xedd4f7(0x214)]==='following_bezier_path');if(totalEnemiesScheduledForWave>0x0&&_0x1a51cc&&!_0x7b4654){const _0xa936a7=isEntrancePhaseActive;isEntrancePhaseActive=![];if(_0xa936a7){stopSound(_0xedd4f7(0x270)),enemiesSpawnedThisWave=0x0,totalEnemiesScheduledForWave=0x0,enemySpawnTimeouts[_0xedd4f7(0x1cd)](clearTimeout),enemySpawnTimeouts=[],gridJustCompleted=!![];if(!isChallengingStage&&!isFullGridWave){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xedd4f7(0x2fb))coopAICaptureDiveAnticipationActive=!![],coopAICaptureDiveAnticipationEndTime=Date[_0xedd4f7(0x2ed)]()+COOP_AI_CAPTURE_DIVE_ANTICIPATION_DURATION_MS,typeof triggerImmediateCaptureDive===_0xedd4f7(0x298)&&triggerImmediateCaptureDive();else typeof triggerImmediateCaptureDive===_0xedd4f7(0x298)&&triggerImmediateCaptureDive();}}}}if(!isChallengingStage&&!_0xd65e30&&!isPaused&&!isWaveTransitioning)triggerGridFiring();if(!isWaveTransitioning&&_0x5a3b91&&!_0xd65e30&&!isShowingCaptureMessage&&!isEntrancePhaseActive){let _0x1641a0=enemies[_0xedd4f7(0x1e6)]===0x0,_0x2114af=fallingShips[_0xedd4f7(0x1e6)]===0x0,_0x33dbfe=![];if(isChallengingStage){if(_0x1641a0&&!isEntrancePhaseActive)_0x33dbfe=!![];}else{if(_0x1641a0&&!isEntrancePhaseActive&&_0x2114af)_0x33dbfe=!![];}if(_0x33dbfe){isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xedd4f7(0x2fb))&&gameCanvas&&gameCanvas['width']>0x0){const _0x37ce42=player1Lives,_0x32f3d1=player2Lives,_0x137491=gameCanvas[_0xedd4f7(0x2de)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(_0x37ce42>0x0&&_0x32f3d1<=0x0&&ship1){const _0x492b06=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x31c76f=Math[_0xedd4f7(0x2f8)](gameCanvas[_0xedd4f7(0x2a8)]/0x2-_0x492b06/0x2);ship1['x']=_0x31c76f,ship1['targetX']=_0x31c76f,smoothedShip1X=_0x31c76f,ship1['y']=_0x137491;}else{if(_0x32f3d1>0x0&&_0x37ce42<=0x0&&ship2){const _0x24df0c=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x61a0a3=Math[_0xedd4f7(0x2f8)](gameCanvas[_0xedd4f7(0x2a8)]/0x2-_0x24df0c/0x2);ship2['x']=_0x61a0a3,ship2[_0xedd4f7(0x1f9)]=_0x61a0a3,smoothedShip2X=_0x61a0a3,ship2['y']=_0x137491;}}}isWaveTransitioning=!![];isGridSoundPlaying&&(stopSound('gridBackgroundSound'),isGridSoundPlaying=![]);!isChallengingStage&&(bullets=[],enemyBullets=[]);floatingScores=[],enemySpawnTimeouts[_0xedd4f7(0x1cd)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;let _0x37105c;if(isChallengingStage){csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,setTimeout(()=>{const _0x37bc85=_0xedd4f7;if(isWaveTransitioning){explosions=[];if(typeof updateExplosions==='function')updateExplosions();isCsCompletionDelayActive=!![],csCompletionDelayStartTime=Date[_0x37bc85(0x2ed)]();}},EXPLOSION_DURATION);if(csCompletionResultIsPerfect){let _0xdd4044=0x2710;if(isTwoPlayerMode&&selectedGameMode===_0xedd4f7(0x235))(player1Lives>0x0||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xedd4f7(0x2fb))&&ship1)&&(player1Score+=_0xdd4044),(player2Lives>0x0||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xedd4f7(0x2fb))&&ship2)&&(player2Score+=_0xdd4044),highScore=Math[_0xedd4f7(0x2df)](highScore,player1Score,player2Score),checkAndAwardExtraLife(null);else{score+=_0xdd4044;if(!isTwoPlayerMode)player1Score=score;else{if(isTwoPlayerMode&&selectedGameMode===_0xedd4f7(0x2f1)){if(currentPlayer===0x1)player1Score=score;else player2Score=score;}}highScore=Math[_0xedd4f7(0x2df)](highScore,score,player1Score,player2Score),checkAndAwardExtraLife(currentPlayer);}_0x37105c=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_HITS_MESSAGE_DURATION+CS_PERFECT_MESSAGE_DURATION+CS_BONUS_MESSAGE_DURATION;}else isTwoPlayerMode&&selectedGameMode===_0xedd4f7(0x235)?checkAndAwardExtraLife(null):checkAndAwardExtraLife(currentPlayer),_0x37105c=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_CLEAR_DELAY;_0x37105c+=0x64;}else playSound(_0xedd4f7(0x293),![],0.8),normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,_0x37105c=POST_MESSAGE_RESET_DELAY;setTimeout(()=>{const _0x47110a=_0xedd4f7;let _0x1f5b57=![],_0x2be35d=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x47110a(0x2f1)){_0x2be35d=currentPlayer;_0x2be35d===0x1?player1MaxLevelReached=Math[_0x47110a(0x2df)](player1MaxLevelReached,level):player2MaxLevelReached=Math[_0x47110a(0x2df)](player2MaxLevelReached,level);const _0x521943=switchPlayerTurn();if(_0x521943){if(_0x2be35d===0x2&&currentPlayer===0x1&&player1CompletedLevel===level)_0x1f5b57=!![],player1CompletedLevel=-0x1;else _0x2be35d===0x1?(player1CompletedLevel=level,_0x1f5b57=![]):_0x1f5b57=![];}else _0x1f5b57=!![],player1CompletedLevel=-0x1;}else{_0x1f5b57=!![];if(!isTwoPlayerMode)player1MaxLevelReached=Math['max'](player1MaxLevelReached,level);else{if(isTwoPlayerMode&&selectedGameMode===_0x47110a(0x235)){if(player1Lives>0x0)player1MaxLevelReached=Math[_0x47110a(0x2df)](player1MaxLevelReached,level);if(player2Lives>0x0)player2MaxLevelReached=Math[_0x47110a(0x2df)](player2MaxLevelReached,level);}}}if(_0x1f5b57){level++;if(isTwoPlayerMode&&selectedGameMode===_0x47110a(0x235)){if(player1Lives>0x0)player1MaxLevelReached=Math[_0x47110a(0x2df)](player1MaxLevelReached,level);if(player2Lives>0x0)player2MaxLevelReached=Math[_0x47110a(0x2df)](player2MaxLevelReached,level);}else{if(isTwoPlayerMode&&selectedGameMode===_0x47110a(0x2f1)){if(currentPlayer===0x1&&player1Lives>0x0)player1MaxLevelReached=Math[_0x47110a(0x2df)](player1MaxLevelReached,level);else{if(currentPlayer===0x2&&player2Lives>0x0)player2MaxLevelReached=Math[_0x47110a(0x2df)](player2MaxLevelReached,level);}}else{if(playerLives>0x0)player1MaxLevelReached=Math[_0x47110a(0x2df)](player1MaxLevelReached,level);}}}let _0x572c5d=![];if(isTwoPlayerMode&&selectedGameMode===_0x47110a(0x235))_0x572c5d=player1Lives>0x0||player2Lives>0x0;else{if(isTwoPlayerMode&&selectedGameMode===_0x47110a(0x2f1))_0x572c5d=(currentPlayer===0x1?player1Lives:player2Lives)>0x0;else _0x572c5d=playerLives>0x0;}_0x572c5d?(resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![]):triggerFinalGameOverSequence();},_0x37105c),renderGame();return;}if(!isChallengingStage){if(enemies[_0xedd4f7(0x1e6)]>0x0){let _0x2b576b=null;const _0x1df98e=enemies[_0xedd4f7(0x2c1)](_0x4c6f58=>_0x4c6f58?.[_0xedd4f7(0x214)]===_0xedd4f7(0x1dd)),_0x3b6970=_0x1df98e[_0xedd4f7(0x1e6)]<=0x3,_0x4d959f=Math['max'](0x1,Math[_0xedd4f7(0x305)](level,LEVEL_CAP_FOR_SCALING)),_0x10f055=0x1068,_0x4e81a6=0x320,_0x3bd157=(_0x4d959f-0x1)*((_0x10f055-_0x4e81a6)/(LEVEL_CAP_FOR_SCALING-0x1)),_0x4ad408=Math[_0xedd4f7(0x2df)](_0x4e81a6,_0x10f055-_0x3bd157),_0x36513b=Math[_0xedd4f7(0x2f8)](scaleValue(level,BASE_MAX_ATTACKING_ENEMIES,MAX_MAX_ATTACKING_ENEMIES)),_0x481b26=enemies[_0xedd4f7(0x2c1)](_0x193422=>_0x193422?.[_0xedd4f7(0x214)]===_0xedd4f7(0x2ef)||_0x193422?.['state']===_0xedd4f7(0x23f))[_0xedd4f7(0x1e6)];if(_0x3b6970||_0x5a6c37-lastEnemyDetachTime>_0x4ad408&&_0x1df98e['length']>0x0&&_0x481b26<_0x36513b){_0x2b576b=findAndDetachEnemy();if(_0x2b576b&&_0x2b576b[_0xedd4f7(0x1e6)]>0x0){const _0x96dc97=_0x2b576b[_0xedd4f7(0x2b9)](_0x3a9f54=>enemies['find'](_0x3377b5=>_0x3377b5?.['id']===_0x3a9f54['id']))[_0xedd4f7(0x2c1)](_0x48af99=>_0x48af99&&_0x48af99[_0xedd4f7(0x214)]===_0xedd4f7(0x1dd));if(_0x96dc97[_0xedd4f7(0x1e6)]>0x0){const _0x549f49=_0x96dc97[0x0],_0x2258da=_0x549f49[_0xedd4f7(0x1fb)];if(!_0x3b6970)lastEnemyDetachTime=_0x5a6c37;if(_0x2258da===_0xedd4f7(0x2f1)){const _0x5530cf=generateAttackPathInternal(_0x549f49);if(_0x5530cf&&_0x5530cf[_0xedd4f7(0x1e6)]>0x0){if(_0x96dc97[_0xedd4f7(0x1e6)]===0x3&&_0x549f49['type']===ENEMY3_TYPE&&level!==0x1)playSound('tripleAttackSound',![],0.3);let _0x393058=[..._0x96dc97];const _0x25f2bd=_0x393058[_0xedd4f7(0x1e6)];if(_0x25f2bd>0x1){let _0x151299=null,_0x35d19b=[];_0x393058[_0xedd4f7(0x1cd)](_0x118bdc=>{const _0x1531cc=_0xedd4f7;if(_0x118bdc['type']===ENEMY3_TYPE)_0x151299=_0x118bdc;else _0x35d19b[_0x1531cc(0x2ae)](_0x118bdc);});if(_0x151299&&level!==0x1&&_0x25f2bd===0x3&&_0x35d19b[_0xedd4f7(0x1e6)]===0x2)_0x393058=[_0x35d19b[0x0],_0x151299,_0x35d19b[0x1]];else _0x393058[_0xedd4f7(0x281)]((_0x2be9f5,_0x3937af)=>(_0x2be9f5?.['gridCol']??0x0)-(_0x3937af?.[_0xedd4f7(0x28a)]??0x0));const _0x4c59d9=0x5;let _0x2f851d=0x0;_0x393058=_0x393058[_0xedd4f7(0x2c1)](_0x436ac1=>_0x436ac1&&typeof _0x436ac1['width']===_0xedd4f7(0x22b));const _0x237556=_0x393058[_0xedd4f7(0x1e6)];for(let _0x4e1738=0x0;_0x4e1738<_0x237556;_0x4e1738++){_0x2f851d+=_0x393058[_0x4e1738]['width'];if(_0x4e1738<_0x237556-0x1)_0x2f851d+=_0x4c59d9;}const _0x58c546=-_0x2f851d/0x2;let _0xa02436=_0x58c546;for(let _0x756882=0x0;_0x756882<_0x237556;_0x756882++){const _0x138ab7=_0x393058[_0x756882];_0x138ab7['attackFormationOffsetX']=_0xa02436+_0x138ab7[_0xedd4f7(0x2a8)]/0x2,_0xa02436+=_0x138ab7['width']+_0x4c59d9;}}else _0x393058[_0xedd4f7(0x1cd)](_0x11bcf9=>_0x11bcf9[_0xedd4f7(0x23e)]=0x0);const _0x35b246=_0xedd4f7(0x210)+_0x549f49['id']+'-'+_0x5a6c37;_0x393058['forEach'](_0x2a38ea=>{const _0x59788b=_0xedd4f7;if(_0x2a38ea)_0x2a38ea[_0x59788b(0x261)]=_0x35b246;});let _0x2499ec=![],_0x26fd55=GROUP_FIRE_BURST_DELAY;if(_0x549f49['type']===ENEMY2_TYPE||_0x549f49[_0xedd4f7(0x274)]===ENEMY3_TYPE){_0x2499ec=!![];if(_0x549f49[_0xedd4f7(0x274)]===ENEMY2_TYPE&&_0x25f2bd===0x1)_0x26fd55=SOLO_BUTTERFLY_FIRE_DELAY;}else{if(_0x549f49['type']===ENEMY1_TYPE)_0x2499ec=!![];}if(_0x3b6970&&level>0x1)_0x2499ec=![];_0x2499ec&&_0x393058[_0xedd4f7(0x1cd)](_0x175418=>{const _0x5013b9=_0xedd4f7,_0x32700e=_0x175418&&!(_0x175418[_0x5013b9(0x274)]===ENEMY3_TYPE&&_0x175418[_0x5013b9(0x1dc)]);if(_0x32700e)fireEnemyBurst(_0x175418['id'],_0x5013b9(0x2ef),_0x26fd55);}),_0x393058[_0xedd4f7(0x1cd)]((_0x28f41a,_0x19ce19)=>{const _0x1b19b5=_0xedd4f7;_0x28f41a&&_0x28f41a['state']===_0x1b19b5(0x1dd)&&(_0x28f41a['state']=_0x1b19b5(0x23f),_0x28f41a[_0x1b19b5(0x29d)]=![],_0x28f41a[_0x1b19b5(0x2e1)]=0x0,_0x28f41a[_0x1b19b5(0x216)]=0x0,_0x28f41a[_0x1b19b5(0x2d6)]=![],setTimeout(()=>{const _0x5a560d=_0x1b19b5;if(isPaused)return;const _0x55f34d=enemies['find'](_0xa584df=>_0xa584df?.['id']===_0x28f41a['id']);if(_0x55f34d&&_0x55f34d[_0x5a560d(0x214)]===_0x5a560d(0x23f))try{const _0x499911=scaleValue(level,BASE_ENEMY_ATTACK_SPEED,MAX_ENEMY_ATTACK_SPEED);let _0x12b8a3=0x1;if(_0x55f34d['type']===ENEMY1_TYPE)_0x12b8a3=ENEMY1_DIVE_SPEED_FACTOR;else{if(_0x55f34d[_0x5a560d(0x274)]===ENEMY2_TYPE)_0x12b8a3=ENEMY2_DIVE_SPEED_FACTOR;else{if(_0x55f34d[_0x5a560d(0x274)]===ENEMY3_TYPE)_0x12b8a3=ENEMY3_ATTACK_SPEED_FACTOR;}}if(_0x28f41a['type']===ENEMY3_TYPE)playSound(_0x5a560d(0x285),![],0.2);else playSound(_0x5a560d(0x2b1),![],0.2);_0x55f34d[_0x5a560d(0x214)]=_0x5a560d(0x2ef),_0x55f34d[_0x5a560d(0x2b8)]=_0x5530cf,_0x55f34d[_0x5a560d(0x1ed)]=0x0,_0x55f34d['attackPathT']=0x0,_0x55f34d['speed']=_0x499911*_0x12b8a3,_0x55f34d[_0x5a560d(0x266)]=0x0,_0x55f34d[_0x5a560d(0x2d6)]=!![];}catch(_0xa68b62){console[_0x5a560d(0x2ec)]('Error\x20starting\x20attack\x20for\x20'+_0x28f41a['id']+':',_0xa68b62);}},_0x19ce19*GROUP_DETACH_DELAY_MS));});}else _0x2b576b[_0xedd4f7(0x1cd)](_0x3d838f=>{const _0x260907=_0xedd4f7;if(_0x3d838f)_0x3d838f[_0x260907(0x29d)]=![];});}}}}}}enemies[_0xedd4f7(0x1cd)](_0x355216=>{const _0xcff17d=_0xedd4f7;if(_0x355216&&_0x355216[_0xcff17d(0x274)]===ENEMY3_TYPE&&_0x355216['hasCapturedShip']&&_0x355216[_0xcff17d(0x214)]==='attacking'&&_0x355216['capturedShipDimensions']&&typeof _0x355216[_0xcff17d(0x217)]===_0xcff17d(0x22b)){if(_0x5a6c37-_0x355216[_0xcff17d(0x217)]>CAPTURED_SHIP_FIRE_COOLDOWN_MS){const _0x3db17e=_0x355216['x']+_0x355216[_0xcff17d(0x2a8)]/0x2,_0x5ea818=_0x355216['y']+_0x355216['height']+_0x355216[_0xcff17d(0x289)]['height']*0.5,_0x5b543e={'x':_0x3db17e,'y':_0x5ea818};createBulletSimple(_0x355216,_0x5b543e)&&(_0x355216[_0xcff17d(0x217)]=_0x5a6c37,playSound(_0xcff17d(0x21e),![],0.4));}}});}}else{if(gameOverSequenceStartTime>0x0){const _0x22f3ac=_0x5a6c37-gameOverSequenceStartTime,_0x26c9f0=_0x22f3ac>=GAME_OVER_DURATION;if(_0x26c9f0&&!isShowingResultsScreen){isShowingResultsScreen=!![],stopSound(_0xedd4f7(0x242)),playSound(_0xedd4f7(0x257),!![],0.2),explosions=[];if(typeof updateExplosions===_0xedd4f7(0x298))updateExplosions();}}}!_0xb8d05d&&renderGame();}catch(_0x165688){console[_0xedd4f7(0x2ec)](_0xedd4f7(0x27b),_0x165688,_0x165688['stack']),isPaused=![];mainLoopId&&(cancelAnimationFrame(mainLoopId),mainLoopId=null);isInGameState=![],isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',alert(_0xedd4f7(0x2dd)),stopAllGameSoundsInternal(),isGridSoundPlaying=![],isInvincible=![],invincibilityEndTime=0x0;try{typeof showMenuState==='function'&&showMenuState();}catch(_0x9996c7){console[_0xedd4f7(0x2ec)](_0xedd4f7(0x1f6),_0x9996c7);}}}function checkAndAwardExtraLife(_0x3184e0=null){const _0x2ffd6c=_0x4c0c0a;try{const _0x53b033=[];if(_0x3184e0===0x1){const _0x27524d=isTwoPlayerMode&&selectedGameMode===_0x2ffd6c(0x235)?player1Lives:isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x1?playerLives:player1Lives,_0x3282a3=isTwoPlayerMode&&selectedGameMode==='coop'?player1Score:isTwoPlayerMode&&selectedGameMode===_0x2ffd6c(0x2f1)&&currentPlayer===0x1?score:player1Score;_0x53b033[_0x2ffd6c(0x2ae)]({'num':0x1,'currentLives':_0x27524d,'currentScore':_0x3282a3,'thresholdsMet':player1LifeThresholdsMet});}else{if(_0x3184e0===0x2&&isTwoPlayerMode){const _0xd79ca9=selectedGameMode===_0x2ffd6c(0x235)?player2Lives:selectedGameMode===_0x2ffd6c(0x2f1)&&currentPlayer===0x2?playerLives:player2Lives,_0x7213d0=selectedGameMode==='coop'?player2Score:selectedGameMode===_0x2ffd6c(0x2f1)&&currentPlayer===0x2?score:player2Score;_0x53b033['push']({'num':0x2,'currentLives':_0xd79ca9,'currentScore':_0x7213d0,'thresholdsMet':player2LifeThresholdsMet});}else{if(isTwoPlayerMode&&selectedGameMode===_0x2ffd6c(0x235)&&_0x3184e0===null)_0x53b033['push']({'num':0x1,'currentLives':player1Lives,'currentScore':player1Score,'thresholdsMet':player1LifeThresholdsMet}),_0x53b033[_0x2ffd6c(0x2ae)]({'num':0x2,'currentLives':player2Lives,'currentScore':player2Score,'thresholdsMet':player2LifeThresholdsMet});else{if(!isTwoPlayerMode&&(_0x3184e0===null||_0x3184e0===0x1))_0x53b033['push']({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet});else isTwoPlayerMode&&selectedGameMode===_0x2ffd6c(0x2f1)&&_0x3184e0===currentPlayer&&(currentPlayer===0x1?_0x53b033[_0x2ffd6c(0x2ae)]({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet}):_0x53b033['push']({'num':0x2,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player2LifeThresholdsMet}));}}}_0x53b033[_0x2ffd6c(0x1cd)](_0x24696d=>{const _0x149dea=_0x2ffd6c;let _0x4558c7=![];while(!![]){let _0x30ee37=![],_0x290096=-0x1;const _0xceeff9=_0x24696d[_0x149dea(0x2cf)][_0x149dea(0x2fd)];if(_0xceeff9===0x0)_0x290096=EXTRA_LIFE_THRESHOLD_1;else{if(_0xceeff9===0x1&&!_0x24696d[_0x149dea(0x2cf)][_0x149dea(0x28c)](EXTRA_LIFE_THRESHOLD_2))_0x290096=EXTRA_LIFE_THRESHOLD_2;else{if(_0xceeff9>=0x1&&_0x24696d['thresholdsMet'][_0x149dea(0x28c)](EXTRA_LIFE_THRESHOLD_1)&&_0x24696d['thresholdsMet'][_0x149dea(0x28c)](EXTRA_LIFE_THRESHOLD_2)){let _0x1feaa6=0x0;_0x24696d['thresholdsMet'][_0x149dea(0x1cd)](_0x348645=>{_0x348645>=EXTRA_LIFE_THRESHOLD_2&&(_0x348645-EXTRA_LIFE_THRESHOLD_2)%RECURRING_EXTRA_LIFE_INTERVAL===0x0&&_0x1feaa6++;}),_0x290096=EXTRA_LIFE_THRESHOLD_2+_0x1feaa6*RECURRING_EXTRA_LIFE_INTERVAL;}else{if(_0xceeff9===0x1&&_0x24696d[_0x149dea(0x2cf)][_0x149dea(0x28c)](EXTRA_LIFE_THRESHOLD_1)&&!_0x24696d[_0x149dea(0x2cf)][_0x149dea(0x28c)](EXTRA_LIFE_THRESHOLD_2))_0x290096=EXTRA_LIFE_THRESHOLD_2;else _0xceeff9===0x1&&_0x24696d[_0x149dea(0x2cf)]['has'](EXTRA_LIFE_THRESHOLD_2)&&!_0x24696d[_0x149dea(0x2cf)]['has'](EXTRA_LIFE_THRESHOLD_1)&&(_0x290096=EXTRA_LIFE_THRESHOLD_1);}}}if(_0x290096!==-0x1&&_0x24696d[_0x149dea(0x208)]>=_0x290096&&!_0x24696d[_0x149dea(0x2cf)][_0x149dea(0x28c)](_0x290096)){if(_0x24696d[_0x149dea(0x2a5)]===0x1){if(isTwoPlayerMode&&selectedGameMode==='coop')player1Lives++;else{if(isTwoPlayerMode&&selectedGameMode===_0x149dea(0x2f1)&&currentPlayer===0x1)playerLives++;else{if(!isTwoPlayerMode)playerLives++;}}player1Lives=isTwoPlayerMode&&selectedGameMode==='coop'?player1Lives:isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x1?playerLives:player1Lives,_0x24696d[_0x149dea(0x2fe)]=player1Lives;}else{if(_0x24696d['num']===0x2){if(isTwoPlayerMode&&selectedGameMode===_0x149dea(0x235))player2Lives++;else{if(isTwoPlayerMode&&selectedGameMode===_0x149dea(0x2f1)&&currentPlayer===0x2)playerLives++;}player2Lives=isTwoPlayerMode&&selectedGameMode===_0x149dea(0x235)?player2Lives:isTwoPlayerMode&&selectedGameMode===_0x149dea(0x2f1)&&currentPlayer===0x2?playerLives:player2Lives,_0x24696d['currentLives']=player2Lives;}}_0x24696d[_0x149dea(0x2cf)][_0x149dea(0x28d)](_0x290096),_0x4558c7=!![],_0x30ee37=!![];}if(!_0x30ee37)break;}_0x4558c7&&!showExtraLifeMessage&&!showCsBonusScoreMessage&&!showPerfectMessage&&!showCsHitsMessage&&!showCSClearMessage&&!showReadyMessage&&setTimeout(()=>{const _0x5c1918=_0x149dea;if(isInGameState){explosions=[];if(typeof updateExplosions===_0x5c1918(0x298))updateExplosions();showExtraLifeMessage=!![],extraLifeMessageStartTime=Date['now'](),playSound(_0x5c1918(0x1eb),![],0.5);}},EXPLOSION_DURATION);});}catch(_0x432fd5){console[_0x2ffd6c(0x2ec)]('Error\x20checking/awarding\x20extra\x20life:',_0x432fd5);}}