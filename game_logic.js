(function(_0x4982d3,_0x5cc598){const _0x102f47=_0x1065,_0x1ff147=_0x4982d3();while(!![]){try{const _0x103343=parseInt(_0x102f47(0x1bb))/0x1+-parseInt(_0x102f47(0x267))/0x2+parseInt(_0x102f47(0x17b))/0x3+-parseInt(_0x102f47(0x186))/0x4*(parseInt(_0x102f47(0x21b))/0x5)+-parseInt(_0x102f47(0x261))/0x6*(-parseInt(_0x102f47(0x170))/0x7)+-parseInt(_0x102f47(0x1de))/0x8+-parseInt(_0x102f47(0x234))/0x9;if(_0x103343===_0x5cc598)break;else _0x1ff147['push'](_0x1ff147['shift']());}catch(_0x28e3e7){_0x1ff147['push'](_0x1ff147['shift']());}}}(_0x329a,0x90b32));let currentWavePatternIndex=-0x1,aiNeedsStabilization=!![],aiStabilizationEndTime=0x0,smoothedShipX=undefined;function resetGame(){const _0x507354=_0x1065;try{level=0x1,currentWavePatternIndex=-0x1,isPaused=![],isShowingIntro=![],introStep=0x0,isWaveTransitioning=![],isGridSoundPlaying=![],isEntrancePhaseActive=![],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,enemySpawnTimeouts[_0x507354(0x1e0)](clearTimeout),enemySpawnTimeouts=[],squadronCompletionStatus={},squadronEntranceFiringStatus={},isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],gameOverSequenceStartTime=0x0,gameStartTime=0x0,stopAllGameSounds(),player1CompletedLevel=-0x1,forceCenterShipNextReset=![],isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],capturingBossId=null,captureBeamActive=![],captureBeamSource={'x':0x0,'y':0x0},captureBeamTargetY=0x0,captureBeamProgress=0x0,captureAttemptMadeThisLevel=![],isShowingCaptureMessage=![],captureMessageStartTime=0x0,capturedBossIdWithMessage=null,fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,player1Score=0x0,player2Score=0x0,player1Lives=0x3,player2Lives=0x3,player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1,lastGridFireCheckTime=0x0,firstEnemyLanded=![],player1LifeThresholdsMet=new Set(),player2LifeThresholdsMet=new Set(),currentPlayer=0x1,score=player1Score,playerLives=player1Lives,player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],scoreEarnedThisCS=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],resetAllMessages(),explosions=[],isChallengingStage=![],challengingStageEnemiesHit=0x0,isShowingResultsScreen=![],currentWaveDefinition=null,isFullGridWave=![],hitSparks=[],resetWave();}catch(_0x193815){console[_0x507354(0x23b)](_0x507354(0x24b),_0x193815),isWaveTransitioning=![],isGridSoundPlaying=![],isEntrancePhaseActive=![],isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],isPaused=![],currentWavePatternIndex=-0x1,player1CompletedLevel=-0x1,isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',squadronCompletionStatus={},squadronEntranceFiringStatus={},isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,resetAllMessages(),forceCenterShipNextReset=![],player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1,isShipCaptured=![],capturingBossId=null,captureBeamActive=![],captureBeamSource={'x':0x0,'y':0x0},captureBeamTargetY=0x0,captureBeamProgress=0x0,captureAttemptMadeThisLevel=![],isShowingCaptureMessage=![],captureMessageStartTime=0x0,capturedBossIdWithMessage=null,fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,isFullGridWave=![],hitSparks=[],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],lastGridFireCheckTime=0x0,firstEnemyLanded=![],player1LifeThresholdsMet=new Set(),player2LifeThresholdsMet=new Set(),playerIntroSoundPlayed=![],stageIntroSoundPlayed=![];typeof enemySpawnTimeouts!==_0x507354(0x1a2)&&Array[_0x507354(0x1c0)](enemySpawnTimeouts)&&enemySpawnTimeouts[_0x507354(0x1e0)](clearTimeout);enemySpawnTimeouts=[];if(typeof showMenuState===_0x507354(0x1b4))showMenuState();}}function resetAllMessages(){showCsHitsMessage=![],csHitsMessageStartTime=0x0,showPerfectMessage=![],perfectMessageStartTime=0x0,showCsBonusScoreMessage=![],csBonusScoreMessageStartTime=0x0,showCSClearMessage=![],csClearMessageStartTime=0x0,showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,showReadyMessage=![],readyMessageStartTime=0x0,readyForNextWave=![],readyForNextWaveReset=![];}function stopAllGameSounds(){const _0x4f6c72=[gridBackgroundSound,entranceSound,butterflyDiveSound,startSound,coinSound,bossGalagaDiveSound,enemyShootSound,levelUpSound,gameOverSound,playerShootSound,extraLifeSound,csPerfectSound,csClearSound,explosionSound,waveUpSound,readySound,tripleAttackSound,captureSound,shipCapturedSound,dualShipSound,resultsMusicSound,hiScoreSound];_0x4f6c72['forEach'](_0x293c84=>stopSound(_0x293c84)),isGridSoundPlaying=![];}function getWaveType(_0x314ec4){const _0x1f8992=_0x1065,_0x2ad55c=(_0x314ec4-0x1)%0x4;switch(_0x2ad55c){case 0x0:return'full_grid';case 0x1:return _0x1f8992(0x21d);case 0x2:return _0x1f8992(0x197);case 0x3:return _0x1f8992(0x17e);default:console[_0x1f8992(0x23b)]('Onbekend\x20wave\x20patroon\x20index\x20'+_0x2ad55c+_0x1f8992(0x220)+_0x314ec4);return _0x1f8992(0x203);}}function generateWaveDefinition(_0x14b49e){const _0x2af54e=_0x1065;let _0x59cb68=[];currentWavePatternIndex=-0x1;const _0xec717f=getWaveType(_0x14b49e);if(typeof waveEntrancePatterns==='undefined'||!Array[_0x2af54e(0x1c0)](waveEntrancePatterns)||waveEntrancePatterns['length']<0x2)return console['error']('CRITICAL:\x20waveEntrancePatterns\x20is\x20not\x20defined\x20or\x20invalid\x20in\x20generateWaveDefinition\x20(Level\x20'+_0x14b49e+')!'),[];if(_0xec717f==='challenging_stage')_0x59cb68=[];else{if(_0xec717f==='full_grid'){currentWavePatternIndex=0x0;const _0x1b0519=waveEntrancePatterns[0x0];if(!_0x1b0519||_0x1b0519['length']===0x0)console[_0x2af54e(0x23b)](_0x2af54e(0x26a)+_0x14b49e+_0x2af54e(0x19b)),_0x59cb68=[];else try{_0x59cb68=JSON[_0x2af54e(0x1f6)](JSON[_0x2af54e(0x1d7)](_0x1b0519),(_0x213549,_0x29266b)=>{const _0x31a5b0=_0x2af54e;return _0x29266b&&typeof _0x29266b===_0x31a5b0(0x1df)&&_0x29266b[_0x31a5b0(0x226)]===ENEMY3_TYPE&&typeof _0x29266b[_0x31a5b0(0x26f)]===_0x31a5b0(0x1a2)&&(_0x29266b[_0x31a5b0(0x26f)]=![]),_0x29266b;});}catch(_0x2efd40){console[_0x2af54e(0x23b)]('Error\x20deep\x20copying\x20selected\x20pattern\x200\x20for\x20Full\x20Grid:',_0x2efd40),_0x59cb68=[];}}else{if(_0xec717f===_0x2af54e(0x21d)){currentWavePatternIndex=0x0;const _0x499364=waveEntrancePatterns[0x0];if(!_0x499364||_0x499364['length']===0x0)console[_0x2af54e(0x23b)](_0x2af54e(0x26a)+_0x14b49e+_0x2af54e(0x23e)),_0x59cb68=[];else try{_0x59cb68=JSON[_0x2af54e(0x1f6)](JSON[_0x2af54e(0x1d7)](_0x499364),(_0x5a4c6b,_0x283f4a)=>{const _0x3751be=_0x2af54e;return _0x283f4a&&typeof _0x283f4a===_0x3751be(0x1df)&&_0x283f4a['type']===ENEMY3_TYPE&&typeof _0x283f4a[_0x3751be(0x26f)]===_0x3751be(0x1a2)&&(_0x283f4a[_0x3751be(0x26f)]=![]),_0x283f4a;});}catch(_0x53b9ae){console[_0x2af54e(0x23b)](_0x2af54e(0x19f),_0x53b9ae),_0x59cb68=[];}}else{if(_0xec717f===_0x2af54e(0x17e)){currentWavePatternIndex=0x1;const _0x1326ed=waveEntrancePatterns[0x1];if(!_0x1326ed||_0x1326ed[_0x2af54e(0x172)]===0x0)console['error']('Wave\x20'+_0x14b49e+_0x2af54e(0x19c)),_0x59cb68=[];else try{_0x59cb68=JSON[_0x2af54e(0x1f6)](JSON[_0x2af54e(0x1d7)](_0x1326ed),(_0x38acd0,_0x4037b4)=>{const _0x20adff=_0x2af54e;return _0x4037b4&&typeof _0x4037b4===_0x20adff(0x1df)&&_0x4037b4[_0x20adff(0x226)]===ENEMY3_TYPE&&typeof _0x4037b4[_0x20adff(0x26f)]===_0x20adff(0x1a2)&&(_0x4037b4[_0x20adff(0x26f)]=![]),_0x4037b4;});}catch(_0x342971){console['error'](_0x2af54e(0x1d8),_0x342971),_0x59cb68=[];}}else _0x59cb68=[];}}}if(_0xec717f!==_0x2af54e(0x197)){if(typeof normalWaveEntrancePaths==='undefined'||Object['keys'](normalWaveEntrancePaths)['length']===0x0)return console[_0x2af54e(0x23b)]('CRITICAL:\x20normalWaveEntrancePaths\x20is\x20not\x20defined\x20or\x20empty\x20in\x20generateWaveDefinition\x20(Level\x20'+_0x14b49e+_0x2af54e(0x1b0)),_0x59cb68;for(let _0x36ff4c=_0x59cb68[_0x2af54e(0x172)]-0x1;_0x36ff4c>=0x0;_0x36ff4c--){const _0x2c3a92=_0x59cb68[_0x36ff4c];if(!normalWaveEntrancePaths?.[_0x2c3a92[_0x2af54e(0x20c)]]){console['warn'](_0x2af54e(0x26a)+_0x14b49e+_0x2af54e(0x193)+currentWavePatternIndex+_0x2af54e(0x202)+_0x2c3a92[_0x2af54e(0x20c)]+_0x2af54e(0x25e)),_0x59cb68[_0x2af54e(0x19d)](_0x36ff4c,0x1);continue;}if(_0x2c3a92[_0x2af54e(0x1d4)]&&Array[_0x2af54e(0x1c0)](_0x2c3a92[_0x2af54e(0x1d4)])){for(let _0x54ca67=_0x2c3a92[_0x2af54e(0x1d4)][_0x2af54e(0x172)]-0x1;_0x54ca67>=0x0;_0x54ca67--){const _0x2680f7=_0x2c3a92[_0x2af54e(0x1d4)][_0x54ca67];(!_0x2680f7||!normalWaveEntrancePaths?.[_0x2680f7[_0x2af54e(0x22c)]])&&(console[_0x2af54e(0x16a)]('Wave\x20'+_0x14b49e+',\x20Pattern\x20'+currentWavePatternIndex+',\x20Squadron\x20'+_0x2c3a92[_0x2af54e(0x20c)]+_0x2af54e(0x1c4)+_0x2680f7?.[_0x2af54e(0x22c)]+'\x22\x20invalid\x20or\x20missing\x20in\x20normalWaveEntrancePaths!\x20Removing\x20enemy.'),_0x2c3a92[_0x2af54e(0x1d4)]['splice'](_0x54ca67,0x1)),_0x2680f7&&_0x2680f7[_0x2af54e(0x226)]===ENEMY3_TYPE&&typeof _0x2680f7['hasCapturedShip']===_0x2af54e(0x1a2)&&(_0x2680f7['hasCapturedShip']=![]);}_0x2c3a92['enemies'][_0x2af54e(0x172)]===0x0&&(console[_0x2af54e(0x16a)](_0x2af54e(0x26a)+_0x14b49e+_0x2af54e(0x193)+currentWavePatternIndex+_0x2af54e(0x26d)+_0x2c3a92[_0x2af54e(0x20c)]+'\x22\x20became\x20empty\x20after\x20enemy\x20path\x20validation.\x20Removing.'),_0x59cb68[_0x2af54e(0x19d)](_0x36ff4c,0x1));}else console[_0x2af54e(0x16a)](_0x2af54e(0x26a)+_0x14b49e+_0x2af54e(0x193)+currentWavePatternIndex+_0x2af54e(0x26d)+_0x2c3a92[_0x2af54e(0x20c)]+_0x2af54e(0x270)),_0x59cb68[_0x2af54e(0x19d)](_0x36ff4c,0x1);}}return _0x59cb68;}function resetWave(){const _0xeec855=_0x1065;stopAllGameSounds(),isWaveTransitioning=![],isGridSoundPlaying=![],scoreEarnedThisCS=0x0,resetAllMessages(),isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],isPaused=![],isShipCaptured=![],capturingBossId=null,captureBeamActive=![],captureBeamSource={'x':0x0,'y':0x0},captureBeamTargetY=0x0,captureBeamProgress=0x0,captureAttemptMadeThisLevel=![],isShowingCaptureMessage=![],captureMessageStartTime=0x0,capturedBossIdWithMessage=null,fallingShips=[],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],lastGridFireCheckTime=0x0,firstEnemyLanded=![];const _0x1baa20=player1Score,_0x105aa6=player2Score;_0x1baa20<highScore&&(player1TriggeredHighScoreSound=![]);_0x105aa6<highScore&&(player2TriggeredHighScoreSound=![]);bullets=[],enemyBullets=[],enemies=[],explosions=[],gridMoveDirection=0x1,lastEnemyDetachTime=0x0,currentGridOffsetX=0x0,isEntrancePhaseActive=![],currentWaveDefinition=null,currentWavePatternIndex=-0x1,enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={},isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,hitSparks=[],isFullGridWave=![],isChallengingStage=![];try{const _0x1b7abd=getWaveType(level);isChallengingStage=_0x1b7abd===_0xeec855(0x197),isFullGridWave=_0x1b7abd===_0xeec855(0x1e4),challengingStageEnemiesHit=0x0,isShowingIntro=!![],introDisplayStartTime=Date[_0xeec855(0x1e7)]();if(isChallengingStage)isTwoPlayerMode?introStep=0x1:introStep=0x3;else{if(isFullGridWave){if(isTwoPlayerMode)introStep=0x1;else level===0x1?introStep=0x1:introStep=0x2;}else isTwoPlayerMode?introStep=0x1:introStep=0x2;}level===0x1&&currentPlayer===0x1&&playSound(startSound),gameCanvas?.[_0xeec855(0x1ba)]>0x0&&ship?(ship['y']=gameCanvas[_0xeec855(0x16d)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,(!isManualControl||forceCenterShipNextReset)&&(isDualShipActive?ship['x']=gameCanvas[_0xeec855(0x1ba)]/0x2-ship[_0xeec855(0x1ba)]:ship['x']=gameCanvas['width']/0x2-ship[_0xeec855(0x1ba)]/0x2,ship[_0xeec855(0x17f)]=ship['x'],smoothedShipX=ship['x'],aiNeedsStabilization=!![])):console[_0xeec855(0x16a)](_0xeec855(0x1f8)),forceCenterShipNextReset=![];}catch(_0x25842b){console[_0xeec855(0x23b)](_0xeec855(0x1cd),_0x25842b),isWaveTransitioning=![],isGridSoundPlaying=![],isShowingIntro=![],introStep=0x0,isChallengingStage=![],isFullGridWave=![],resetAllMessages(),isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],isPaused=![],currentWavePatternIndex=-0x1,squadronCompletionStatus={},squadronEntranceFiringStatus={},isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,forceCenterShipNextReset=![],isShipCaptured=![],capturingBossId=null,captureBeamActive=![],captureBeamSource={'x':0x0,'y':0x0},captureBeamTargetY=0x0,captureBeamProgress=0x0,captureAttemptMadeThisLevel=![],isShowingCaptureMessage=![],captureMessageStartTime=0x0,capturedBossIdWithMessage=null,fallingShips=[],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,hitSparks=[],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],lastGridFireCheckTime=0x0,firstEnemyLanded=![],playerIntroSoundPlayed=![],stageIntroSoundPlayed=![];typeof enemySpawnTimeouts!==_0xeec855(0x1a2)&&Array['isArray'](enemySpawnTimeouts)&&enemySpawnTimeouts[_0xeec855(0x1e0)](clearTimeout);enemySpawnTimeouts=[];if(typeof showMenuState===_0xeec855(0x1b4))showMenuState();}}const createBulletSimple=(_0x354542,_0x55a771=null)=>{const _0x378f2a=_0x1065;if(!_0x354542||playerLives<=0x0||!isInGameState||!ship||isShipCaptured)return![];const _0x5920b2=scaleValue(level,BASE_ENEMY_BULLET_SPEED,MAX_ENEMY_BULLET_SPEED),_0x3ca768=_0x55a771?_0x55a771['x']:_0x354542['x']+_0x354542['width']/0x2,_0x291aa0=_0x55a771?_0x55a771['y']:_0x354542['y']+_0x354542[_0x378f2a(0x16d)]/0x2;let _0xc09ad4=0x0,_0x56e5da=_0x5920b2;const _0x3113d3=ship['x']+ship['width']/0x2-_0x3ca768,_0x19dc48=ship['y']+ship[_0x378f2a(0x16d)]/0x2-_0x291aa0,_0x2deeee=Math[_0x378f2a(0x1ac)](_0x3113d3*_0x3113d3+_0x19dc48*_0x19dc48);if(_0x2deeee>0x0){let _0xe98a5d=0x0;!isChallengingStage&&(_0xe98a5d=scaleValue(level,BASE_ENEMY_AIM_FACTOR,MAX_ENEMY_AIM_FACTOR));let _0x6a64ee=Math['atan2'](_0x19dc48,_0x3113d3);return _0xc09ad4=Math[_0x378f2a(0x1dc)](_0x6a64ee)*_0x5920b2*_0xe98a5d,_0x56e5da=Math[_0x378f2a(0x1ac)](_0x5920b2**0x2-_0xc09ad4**0x2),_0x56e5da=Math[_0x378f2a(0x225)](_0x5920b2*(0x1-_0xe98a5d)*0.5,_0x56e5da),_0x19dc48<0x0&&(_0x56e5da=Math[_0x378f2a(0x18e)](_0x56e5da)),enemyBullets[_0x378f2a(0x1b6)]({'x':_0x3ca768-ENEMY_BULLET_WIDTH/0x2,'y':_0x291aa0,'width':ENEMY_BULLET_WIDTH,'height':ENEMY_BULLET_HEIGHT,'vx':_0xc09ad4,'vy':_0x56e5da,'type':_0x354542[_0x378f2a(0x226)]}),!![];}return![];};function scheduleSingleEntranceSquadron(_0x28ad0e,_0x441ad5,_0x3da36d){const _0x2fd48b=_0x1065;if(isFullGridWave||isChallengingStage)return console[_0x2fd48b(0x16a)](_0x2fd48b(0x181)+level+_0x2fd48b(0x1a6)+isFullGridWave+_0x2fd48b(0x22d)+isChallengingStage+_0x2fd48b(0x196)),_0x28ad0e?.[_0x2fd48b(0x1d4)]?.[_0x2fd48b(0x172)]>0x0&&(enemiesSpawnedThisWave+=_0x28ad0e['enemies'][_0x2fd48b(0x172)],squadronCompletionStatus[_0x441ad5]&&(squadronCompletionStatus[_0x441ad5][_0x2fd48b(0x184)]=squadronCompletionStatus[_0x441ad5][_0x2fd48b(0x17a)])),![];const _0x895e57=normalWaveEntrancePaths,_0x5cb28b=_0x28ad0e['pathId'],_0x531852=_0x895e57[_0x5cb28b];if(!_0x531852||_0x531852[_0x2fd48b(0x172)]===0x0)return console['error'](_0x2fd48b(0x24c)+_0x5cb28b+_0x2fd48b(0x1e2)+_0x441ad5+_0x2fd48b(0x260)),_0x28ad0e?.['enemies']?.[_0x2fd48b(0x172)]>0x0&&(enemiesSpawnedThisWave+=_0x28ad0e[_0x2fd48b(0x1d4)][_0x2fd48b(0x172)],squadronCompletionStatus[_0x441ad5]&&(squadronCompletionStatus[_0x441ad5][_0x2fd48b(0x184)]=squadronCompletionStatus[_0x441ad5]['total'])),![];const _0x4bf9ef=setTimeout(()=>{const _0x5a4cae=_0x2fd48b,_0x41ea30=enemySpawnTimeouts[_0x5a4cae(0x223)](_0x4bf9ef);if(_0x41ea30>-0x1)enemySpawnTimeouts['splice'](_0x41ea30,0x1);if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||playerLives<=0x0||isShipCaptured||isFullGridWave){_0x28ad0e?.[_0x5a4cae(0x1d4)]?.[_0x5a4cae(0x172)]>0x0&&(enemiesSpawnedThisWave+=_0x28ad0e[_0x5a4cae(0x1d4)][_0x5a4cae(0x172)],squadronCompletionStatus[_0x441ad5]&&(squadronCompletionStatus[_0x441ad5][_0x5a4cae(0x184)]=squadronCompletionStatus[_0x441ad5][_0x5a4cae(0x17a)]));return;}try{squadronEntranceFiringStatus[_0x441ad5]?(squadronEntranceFiringStatus[_0x441ad5][_0x5a4cae(0x24d)]=Date[_0x5a4cae(0x1e7)]()+_0x3da36d,squadronEntranceFiringStatus[_0x441ad5]['hasFired']=![]):(console[_0x5a4cae(0x16a)](_0x5a4cae(0x1fb)+_0x441ad5+_0x5a4cae(0x26e)),squadronEntranceFiringStatus[_0x441ad5]={'hasFired':![],'scheduledStartTime':Date['now']()+_0x3da36d});const _0x12c769=ENEMY_SPAWN_DELAY_IN_SQUADRON,_0x20797d=_0x12c769*0x2,_0x3eba84=0x1;_0x28ad0e[_0x5a4cae(0x1d4)][_0x5a4cae(0x1e0)]((_0x139d1c,_0x4edb75)=>{const _0x5f572e=_0x5a4cae;if(!_0x139d1c||!_0x139d1c[_0x5f572e(0x226)]||typeof _0x139d1c[_0x5f572e(0x209)]==='undefined'||typeof _0x139d1c[_0x5f572e(0x1c8)]===_0x5f572e(0x1a2)||!_0x139d1c[_0x5f572e(0x22c)]){console[_0x5f572e(0x23b)](_0x5f572e(0x1a9)+_0x441ad5+_0x5f572e(0x25c)+_0x5cb28b+_0x5f572e(0x255)+_0x4edb75+'.\x20Skipping.'),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x441ad5]&&squadronCompletionStatus[_0x441ad5]['completed']++;return;}const _0x4aab01=_0x895e57[_0x139d1c[_0x5f572e(0x22c)]];(!_0x4aab01||_0x4aab01[_0x5f572e(0x172)]===0x0)&&console['warn'](_0x5f572e(0x26b)+_0x139d1c[_0x5f572e(0x22c)]+_0x5f572e(0x1a0)+_0x441ad5+',\x20index\x20'+_0x4edb75+_0x5f572e(0x22b)+_0x5cb28b+'\x22.');let _0x297a11=0x0;const _0x482d2b=getWaveType(level),_0x51f809=_0x482d2b===_0x5f572e(0x17e)&&(_0x441ad5===0x2||_0x441ad5===0x3);if(_0x51f809){const _0x5de1d4=Math[_0x5f572e(0x185)](_0x4edb75/0x2);_0x4edb75%0x2===0x0?_0x297a11=_0x5de1d4*_0x20797d:_0x297a11=_0x5de1d4*_0x20797d+_0x3eba84;}else _0x297a11=_0x4edb75*ENEMY_SPAWN_DELAY_IN_SQUADRON;const _0x21ef3a=setTimeout(()=>{const _0x5a752d=_0x5f572e,_0x4c6eae=enemySpawnTimeouts[_0x5a752d(0x223)](_0x21ef3a);if(_0x4c6eae>-0x1)enemySpawnTimeouts[_0x5a752d(0x19d)](_0x4c6eae,0x1);if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||playerLives<=0x0||isShipCaptured||isFullGridWave){enemiesSpawnedThisWave++;squadronCompletionStatus[_0x441ad5]&&squadronCompletionStatus[_0x441ad5]['completed']++;return;}try{let _0x4b0bbd=_0x139d1c['type'],_0x7d758e=_0x4b0bbd===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x508ce7,_0x2c3495;if(_0x4b0bbd===ENEMY1_TYPE)_0x508ce7=ENEMY1_WIDTH,_0x2c3495=ENEMY1_HEIGHT;else _0x4b0bbd===ENEMY3_TYPE?(_0x508ce7=BOSS_WIDTH,_0x2c3495=BOSS_HEIGHT):(_0x508ce7=ENEMY_WIDTH,_0x2c3495=ENEMY_HEIGHT);let _0x5d5318=0x0,_0x29a02f=0x0;if(_0x531852&&_0x531852[0x0]?.['p0'])_0x5d5318=_0x531852[0x0]['p0']['x'],_0x29a02f=_0x531852[0x0]['p0']['y'];else throw new Error(_0x5a752d(0x1ec)+_0x5cb28b);let _0x1437b9,_0x5795d8;try{const {x:_0x6f54b7,y:_0x3bf604}=getCurrentGridSlotPosition(_0x139d1c[_0x5a752d(0x209)],_0x139d1c[_0x5a752d(0x1c8)],_0x508ce7);_0x1437b9=_0x6f54b7,_0x5795d8=_0x3bf604;}catch(_0x2e5e0f){console[_0x5a752d(0x23b)](_0x5a752d(0x1b1)+_0x139d1c[_0x5a752d(0x226)]+'\x20at\x20['+_0x139d1c['gridRow']+','+_0x139d1c[_0x5a752d(0x1c8)]+']',_0x2e5e0f),_0x1437b9=gameCanvas?.['width']/0x2||0xc8,_0x5795d8=ENEMY_TOP_MARGIN+_0x139d1c['gridRow']*(ENEMY_HEIGHT+ENEMY_V_SPACING);}let _0x1798e3=0x0;const _0x4d142f=_0x51f809,_0x3fbadb=_0x4d142f&&_0x4edb75%0x2!==0x0;_0x3fbadb?_0x1798e3=-ENTRANCE_PAIR_PATH_T_OFFSET:_0x1798e3=-_0x4edb75*PATH_T_OFFSET_PER_ENEMY;const _0x4dfe05={'x':_0x5d5318,'y':_0x29a02f,'width':_0x508ce7,'height':_0x2c3495,'targetGridX':_0x1437b9,'targetGridY':_0x5795d8,'speed':0x0,'state':_0x5a752d(0x20a),'gridRow':_0x139d1c['gridRow'],'gridCol':_0x139d1c[_0x5a752d(0x1c8)],'type':_0x4b0bbd,'health':_0x7d758e,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x5cb28b,'pathSegmentIndex':0x0,'pathT':_0x1798e3,'squadronId':_0x441ad5,'squadronEnemyIndex':_0x4edb75,'id':_0x5a752d(0x165)+_0x441ad5+'-'+_0x4edb75+'-'+Date[_0x5a752d(0x1e7)]()+'-'+Math[_0x5a752d(0x1f7)]()[_0x5a752d(0x1c3)](0x24)[_0x5a752d(0x1da)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x5a752d(0x1d3),'hasCapturedShip':_0x4b0bbd===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x4b0bbd===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies[_0x5a752d(0x1b6)](_0x4dfe05),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x441ad5]&&squadronCompletionStatus[_0x441ad5][_0x5a752d(0x184)]++;if(_0x4edb75===0x0){let _0x28e5e8=0x5dc;(_0x441ad5===0x0||_0x441ad5===0x1)&&(_0x28e5e8=0xfa);const _0x2231ee=_0x4dfe05['id'],_0x103410=setTimeout(()=>{const _0x5164bc=_0x5a752d,_0x4b0dd8=enemySpawnTimeouts[_0x5164bc(0x223)](_0x103410);if(_0x4b0dd8>-0x1)enemySpawnTimeouts[_0x5164bc(0x19d)](_0x4b0dd8,0x1);if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured||isFullGridWave)return;fireFixedEnemyBurst(_0x2231ee,null,0x0,0x3);},_0x28e5e8);enemySpawnTimeouts[_0x5a752d(0x1b6)](_0x103410);}}catch(_0x30f756){console[_0x5a752d(0x23b)](_0x5a752d(0x187)+_0x441ad5+',\x20Idx\x20'+_0x4edb75+',\x20Path\x20'+_0x5cb28b+'):',_0x30f756),enemiesSpawnedThisWave++,squadronCompletionStatus[_0x441ad5]&&squadronCompletionStatus[_0x441ad5]['completed']++;}},_0x297a11);enemySpawnTimeouts[_0x5f572e(0x1b6)](_0x21ef3a);});}catch(_0x32ffb7){console['error']('Entrance\x20Wave:\x20Error\x20processing\x20enemies\x20for\x20squadron\x20'+_0x441ad5+_0x5a4cae(0x25c)+_0x5cb28b+'):',_0x32ffb7),_0x28ad0e?.['enemies']?.[_0x5a4cae(0x172)]>0x0&&(enemiesSpawnedThisWave+=_0x28ad0e[_0x5a4cae(0x1d4)][_0x5a4cae(0x172)],squadronCompletionStatus[_0x441ad5]&&(squadronCompletionStatus[_0x441ad5][_0x5a4cae(0x184)]=squadronCompletionStatus[_0x441ad5]['total']));}},_0x3da36d);return enemySpawnTimeouts['push'](_0x4bf9ef),!![];};function startChallengingStageSequence(){const _0x5bdad2=_0x1065;currentWaveDefinition=[],isEntrancePhaseActive=![],enemySpawnTimeouts[_0x5bdad2(0x1e0)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronEntranceFiringStatus={};Object[_0x5bdad2(0x1ea)](challengingStagePaths)[_0x5bdad2(0x172)]===0x0&&defineChallengingStagePaths();if(Object[_0x5bdad2(0x1ea)](challengingStagePaths)[_0x5bdad2(0x172)]===0x0){console[_0x5bdad2(0x23b)](_0x5bdad2(0x19e)),isWaveTransitioning=!![],setTimeout(()=>{(isInGameState||!isInGameState&&playerLives>0x0)&&typeof resetWave==='function'&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}const _0x2d70ef=['CS3_DiveLoopL_Sharp',_0x5bdad2(0x168),_0x5bdad2(0x17d),_0x5bdad2(0x258)],_0xcfe396=[_0x5bdad2(0x1c5),'CS_LoopAttack_TR',_0x5bdad2(0x1fc),_0x5bdad2(0x1c9)],_0x78058d=[..._0x2d70ef,..._0xcfe396];for(const _0xa7b969 of _0x78058d){if(!challengingStagePaths['hasOwnProperty'](_0xa7b969)){console['error'](_0x5bdad2(0x1ab)+_0xa7b969+_0x5bdad2(0x227)),isWaveTransitioning=!![],setTimeout(()=>{const _0x22fcfb=_0x5bdad2;(isInGameState||!isInGameState&&playerLives>0x0)&&typeof resetWave===_0x22fcfb(0x1b4)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}}let _0x329e85=[..._0x2d70ef],_0x43a49e=[..._0xcfe396]['sort'](()=>Math[_0x5bdad2(0x1f7)]()-0.5);_0x329e85[_0x5bdad2(0x1b6)](..._0x43a49e),currentWaveDefinition=[];for(let _0x39b4c8=0x0;_0x39b4c8<CHALLENGING_STAGE_SQUADRON_COUNT;_0x39b4c8++){const _0x5516c0=_0x329e85[_0x39b4c8],_0x5d20b6={'pathId':_0x5516c0,'enemies':[]};for(let _0x52a359=0x0;_0x52a359<CHALLENGING_STAGE_SQUADRON_SIZE;_0x52a359++){let _0x2e5fca=_0x52a359<Math[_0x5bdad2(0x185)](CHALLENGING_STAGE_SQUADRON_SIZE/0x2)?ENEMY1_TYPE:ENEMY2_TYPE;_0x5d20b6[_0x5bdad2(0x1d4)]['push']({'type':_0x2e5fca,'entrancePathId':_0x5516c0});}currentWaveDefinition[_0x5bdad2(0x1b6)](_0x5d20b6);}challengingStageTotalEnemies=CHALLENGING_STAGE_ENEMY_COUNT,totalEnemiesScheduledForWave=challengingStageTotalEnemies,enemiesSpawnedThisWave=0x0;if(currentWaveDefinition['length']>0x0){isEntrancePhaseActive=!![],enemySpawnTimeouts=[];let _0x4b9e97=0x0;const _0x53a5b7=-0x1c,_0x3f1662=Math[_0x5bdad2(0x185)](Math[_0x5bdad2(0x225)](0x0,level-0x3)/0x4)+0x1,_0x230f83=scaleValue(_0x3f1662,BASE_CS_SPEED_MULTIPLIER,MAX_CS_SPEED_MULTIPLIER);currentWaveDefinition['forEach']((_0xf7491a,_0x39a909)=>{let _0x1e4d7b=0x0;if(_0x39a909<=0x1)_0x1e4d7b=0x0;else _0x39a909<=0x3?_0x1e4d7b=CHALLENGING_STAGE_SQUADRON_INTERVAL:_0x1e4d7b=(_0x39a909-0x2)*CHALLENGING_STAGE_SQUADRON_INTERVAL;let _0x141e6f=_0x230f83;(_0x39a909===0x2||_0x39a909===0x3)&&(_0x141e6f*=CS_HORIZONTAL_FLYBY_SPEED_FACTOR);const _0x12757b=setTimeout(()=>{const _0x3f61ca=_0x1065,_0x2a0490=enemySpawnTimeouts['indexOf'](_0x12757b);if(_0x2a0490>-0x1)enemySpawnTimeouts[_0x3f61ca(0x19d)](_0x2a0490,0x1);if(!isPaused&&isInGameState&&isEntrancePhaseActive&&isChallengingStage&&!isWaveTransitioning&&playerLives>0x0)try{const _0x485955=_0xf7491a['pathId'],_0x2d4515=challengingStagePaths,_0x1e0f2e=_0x2d4515[_0x485955];if(!_0x1e0f2e||_0x1e0f2e[_0x3f61ca(0x172)]===0x0){console[_0x3f61ca(0x23b)](_0x3f61ca(0x1dd)+_0x485955+_0x3f61ca(0x1e2)+_0x39a909+_0x3f61ca(0x1b8)),enemiesSpawnedThisWave+=_0xf7491a[_0x3f61ca(0x1d4)]['length'];return;}let _0x26153f=CS_ENEMY_SPAWN_DELAY_IN_SQUADRON;if(_0x39a909>=0x2&&_0x39a909<=0x3)_0x26153f=CS_HORIZONTAL_FLYBY_SPAWN_DELAY;else _0x39a909>=0x4&&(_0x26153f=CS_LOOP_ATTACK_SPAWN_DELAY);_0xf7491a[_0x3f61ca(0x1d4)][_0x3f61ca(0x1e0)]((_0x403297,_0x1e7eb9)=>{const _0x3c700e=_0x3f61ca;if(!_0x403297||!_0x403297[_0x3c700e(0x226)]){console[_0x3c700e(0x23b)](_0x3c700e(0x15c)+_0x39a909+_0x3c700e(0x257)+_0x1e7eb9+_0x3c700e(0x175)),enemiesSpawnedThisWave++;return;}const _0x5575b0=_0x1e7eb9*_0x26153f,_0x3dc205=setTimeout(()=>{const _0x5a46b3=_0x3c700e,_0x24e2ad=enemySpawnTimeouts['indexOf'](_0x3dc205);if(_0x24e2ad>-0x1)enemySpawnTimeouts['splice'](_0x24e2ad,0x1);if(isPaused||!isInGameState||!isEntrancePhaseActive||!isChallengingStage||isWaveTransitioning||playerLives<=0x0){enemiesSpawnedThisWave++;return;}try{let _0x4408bf=_0x403297[_0x5a46b3(0x226)],_0x1dfa81=_0x4408bf===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x769542,_0x273098;if(_0x4408bf===ENEMY1_TYPE)_0x769542=ENEMY1_WIDTH,_0x273098=ENEMY1_HEIGHT;else _0x4408bf===ENEMY3_TYPE?(_0x769542=BOSS_WIDTH,_0x273098=BOSS_HEIGHT):(_0x769542=ENEMY_WIDTH,_0x273098=ENEMY_HEIGHT);let _0x354a56=0x0,_0x2b8374=0x0;if(_0x1e0f2e[0x0]?.['p0'])_0x354a56=_0x1e0f2e[0x0]['p0']['x'],_0x2b8374=_0x1e0f2e[0x0]['p0']['y'];else throw new Error(_0x5a46b3(0x1d6)+_0x485955);(_0x39a909===0x0||_0x39a909===0x1)&&(_0x354a56+=_0x53a5b7);const _0x25ecc0=-_0x1e7eb9*PATH_T_OFFSET_PER_ENEMY,_0x859a01={'x':_0x354a56,'y':_0x2b8374,'width':_0x769542,'height':_0x273098,'targetGridX':0x0,'targetGridY':0x0,'speed':0x0,'state':_0x5a46b3(0x174),'gridRow':-0x1,'gridCol':-0x1,'type':_0x4408bf,'health':_0x1dfa81,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x485955,'pathSegmentIndex':0x0,'pathT':_0x25ecc0,'squadronId':_0x39a909,'id':_0x5a46b3(0x241)+_0x39a909+'-'+_0x1e7eb9+'-'+Date[_0x5a46b3(0x1e7)]()+'-'+Math['random']()[_0x5a46b3(0x1c3)](0x24)[_0x5a46b3(0x1da)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':'normal','hasCapturedShip':_0x4408bf===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x4408bf===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':_0x141e6f};enemies[_0x5a46b3(0x1b6)](_0x859a01),enemiesSpawnedThisWave++;}catch(_0x46e7bc){console[_0x5a46b3(0x23b)]('CS:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20'+_0x39a909+_0x5a46b3(0x171)+_0x1e7eb9+_0x5a46b3(0x264)+_0x485955+'):',_0x46e7bc),enemiesSpawnedThisWave++;}},_0x5575b0);enemySpawnTimeouts[_0x3c700e(0x1b6)](_0x3dc205),_0x4b9e97++;});}catch(_0x26f19e){console[_0x3f61ca(0x23b)](_0x3f61ca(0x1b3)+_0x39a909+':',_0x26f19e),enemiesSpawnedThisWave+=_0xf7491a[_0x3f61ca(0x1d4)][_0x3f61ca(0x172)];}else _0xf7491a?.['enemies']?.['length']>0x0&&(enemiesSpawnedThisWave+=_0xf7491a['enemies'][_0x3f61ca(0x172)]);},_0x1e4d7b);enemySpawnTimeouts['push'](_0x12757b);});}else console['warn']('CS:\x20No\x20squadrons\x20generated.\x20Skipping\x20CS\x20sequence.'),isWaveTransitioning=!![],setTimeout(()=>{const _0x5aeb70=_0x5bdad2;(isInGameState||!isInGameState&&playerLives>0x0)&&typeof resetWave===_0x5aeb70(0x1b4)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);}function fireEnemyBurst(_0x46bbd9,_0x547a4a,_0x5620c3){const _0x4c2e7c=_0x1065;if(!_0x46bbd9||isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0xa121cf=Math[_0x4c2e7c(0x1a4)](scaleValue(level,BASE_ENEMY_BULLET_BURST_COUNT,MAX_ENEMY_BULLET_BURST_COUNT));for(let _0x43904a=0x0;_0x43904a<_0xa121cf;_0x43904a++){const _0x4c73fa=_0x5620c3+_0x43904a*ENTRANCE_FIRE_BURST_DELAY_MS,_0x955686=setTimeout(()=>{const _0x53ab8c=_0x4c2e7c;try{const _0x196a3e=enemySpawnTimeouts[_0x53ab8c(0x223)](_0x955686);_0x196a3e>-0x1&&enemySpawnTimeouts['splice'](_0x196a3e,0x1);if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x43aade=enemies['find'](_0x101e60=>_0x101e60&&_0x101e60['id']===_0x46bbd9);_0x43aade&&_0x43aade['state']===_0x547a4a&&(createBulletSimple(_0x43aade)&&(_0x43904a===0x0&&playSound(enemyShootSound),_0x43aade['lastFiredTime']=Date[_0x53ab8c(0x1e7)]()));}catch(_0x3ad2df){console[_0x53ab8c(0x23b)]('Error\x20during\x20enemy\x20burst\x20firing\x20(bullet\x20'+(_0x43904a+0x1)+'/'+_0xa121cf+_0x53ab8c(0x210)+_0x46bbd9+':',_0x3ad2df);}},_0x4c73fa);enemySpawnTimeouts['push'](_0x955686);}}function fireFixedEnemyBurst(_0x3208d9,_0x2aa8ec,_0x105964,_0x1ab4c7){if(!_0x3208d9||isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured||_0x1ab4c7<=0x0)return;for(let _0x7ebf9a=0x0;_0x7ebf9a<_0x1ab4c7;_0x7ebf9a++){const _0x1f3ded=_0x105964+_0x7ebf9a*ENTRANCE_FIRE_BURST_DELAY_MS,_0x29f84b=setTimeout(()=>{const _0x2e353a=_0x1065;try{const _0x22d38d=enemySpawnTimeouts[_0x2e353a(0x223)](_0x29f84b);_0x22d38d>-0x1&&enemySpawnTimeouts[_0x2e353a(0x19d)](_0x22d38d,0x1);if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x1d36a7=enemies[_0x2e353a(0x1e1)](_0x39476b=>_0x39476b&&_0x39476b['id']===_0x3208d9);if(_0x1d36a7)createBulletSimple(_0x1d36a7)&&(_0x7ebf9a===0x0&&playSound(enemyShootSound),_0x1d36a7[_0x2e353a(0x1ee)]=Date['now']());else{}}catch(_0x2ae2ef){console[_0x2e353a(0x23b)]('Error\x20during\x20FIXED\x20enemy\x20burst\x20firing\x20(bullet\x20'+(_0x7ebf9a+0x1)+'/'+_0x1ab4c7+_0x2e353a(0x210)+_0x3208d9+':',_0x2ae2ef);}},_0x1f3ded);enemySpawnTimeouts['push'](_0x29f84b);}}function startFullGridWave(){const _0x840ee7=_0x1065;if(!currentWaveDefinition||currentWaveDefinition[_0x840ee7(0x172)]===0x0||!isFullGridWave){console['error'](_0x840ee7(0x1a5)),isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}playSound(entranceSound),enemySpawnTimeouts[_0x840ee7(0x1e0)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x5b9fd5=0x0;currentWaveDefinition['forEach']((_0x35c981,_0x3ed1ae)=>{const _0x445640=_0x840ee7;let _0x5d89bc=0x0;_0x35c981&&_0x35c981[_0x445640(0x1d4)]&&Array[_0x445640(0x1c0)](_0x35c981[_0x445640(0x1d4)])?(_0x5d89bc=_0x35c981[_0x445640(0x1d4)][_0x445640(0x172)],_0x35c981[_0x445640(0x1d4)][_0x445640(0x1e0)]((_0x170d41,_0x17f0fd)=>{const _0x535a89=_0x445640;try{if(!_0x170d41||!_0x170d41[_0x535a89(0x226)]||typeof _0x170d41[_0x535a89(0x209)]===_0x535a89(0x1a2)||typeof _0x170d41[_0x535a89(0x1c8)]===_0x535a89(0x1a2)){console['error'](_0x535a89(0x266)+_0x3ed1ae+_0x535a89(0x257)+_0x17f0fd+_0x535a89(0x175));return;}let _0x3e0b94=_0x170d41['type'],_0x3d6891=_0x3e0b94===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x265495,_0x2e9d51;if(_0x3e0b94===ENEMY1_TYPE)_0x265495=ENEMY1_WIDTH,_0x2e9d51=ENEMY1_HEIGHT;else _0x3e0b94===ENEMY3_TYPE?(_0x265495=BOSS_WIDTH,_0x2e9d51=BOSS_HEIGHT):(_0x265495=ENEMY_WIDTH,_0x2e9d51=ENEMY_HEIGHT);let _0x544517,_0x3deb0a;try{const {x:_0x357ede,y:_0x26e09c}=getCurrentGridSlotPosition(_0x170d41['gridRow'],_0x170d41[_0x535a89(0x1c8)],_0x265495);_0x544517=_0x357ede,_0x3deb0a=_0x26e09c;}catch(_0x550f22){console[_0x535a89(0x23b)](_0x535a89(0x163)+_0x170d41['type']+'\x20at\x20['+_0x170d41[_0x535a89(0x209)]+','+_0x170d41[_0x535a89(0x1c8)]+']',_0x550f22),_0x544517=gameCanvas?.[_0x535a89(0x1ba)]/0x2||0xc8,_0x3deb0a=ENEMY_TOP_MARGIN+_0x170d41[_0x535a89(0x209)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x2fdf71={'x':_0x544517,'y':_0x3deb0a,'width':_0x265495,'height':_0x2e9d51,'targetGridX':_0x544517,'targetGridY':_0x3deb0a,'speed':0x0,'state':_0x535a89(0x1c1),'gridRow':_0x170d41['gridRow'],'gridCol':_0x170d41['gridCol'],'type':_0x3e0b94,'health':_0x3d6891,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':null,'pathSegmentIndex':0x0,'pathT':0x0,'squadronId':_0x3ed1ae,'squadronEnemyIndex':_0x17f0fd,'id':'enemy-grid-'+_0x3ed1ae+'-'+_0x17f0fd+'-'+Date[_0x535a89(0x1e7)]()+'-'+Math['random']()[_0x535a89(0x1c3)](0x24)['substring'](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x535a89(0x1d3),'hasCapturedShip':_0x3e0b94===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x3e0b94===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies[_0x535a89(0x1b6)](_0x2fdf71),_0x5b9fd5++;}catch(_0x25f6d7){console[_0x535a89(0x23b)]('Full\x20Grid:\x20Error\x20placing\x20enemy\x20(Sq\x20'+_0x3ed1ae+_0x535a89(0x171)+_0x17f0fd+'):',_0x25f6d7);}})):console[_0x445640(0x16a)](_0x445640(0x1bf)+_0x3ed1ae+_0x445640(0x1d0)),squadronCompletionStatus[_0x3ed1ae]={'completed':_0x5d89bc,'total':_0x5d89bc};}),totalEnemiesScheduledForWave=_0x5b9fd5,enemiesSpawnedThisWave=_0x5b9fd5,isEntrancePhaseActive=![],gridJustCompleted=!![],!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound)),GRID_BREATH_ENABLED&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=Date[_0x840ee7(0x1e7)](),currentGridBreathFactor=0x0),lastGridFireCheckTime=Date['now'](),firstEnemyLanded=!![];}function scheduleEntranceFlightWave(){const _0x44fe35=_0x1065;if(isFullGridWave||isChallengingStage){console[_0x44fe35(0x16a)](_0x44fe35(0x208)+level+',\x20isFullGrid:\x20'+isFullGridWave+_0x44fe35(0x22d)+isChallengingStage+_0x44fe35(0x196)),isEntrancePhaseActive=![];return;}if(!currentWaveDefinition||currentWaveDefinition['length']===0x0){console['warn'](_0x44fe35(0x204)),isEntrancePhaseActive=![],stopSound(entranceSound),isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}const _0xee769a=normalWaveEntrancePaths;if(Object[_0x44fe35(0x1ea)](_0xee769a)['length']===0x0){console[_0x44fe35(0x23b)]('CRITICAL:\x20Failed\x20to\x20define\x20Normal\x20Wave\x20entrance\x20paths!'),isEntrancePhaseActive=![],stopSound(entranceSound),isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}enemySpawnTimeouts[_0x44fe35(0x1e0)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,currentWaveDefinition[_0x44fe35(0x1e0)](_0x53879f=>totalEnemiesScheduledForWave+=_0x53879f['enemies'][_0x44fe35(0x172)]),enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={},isEntrancePhaseActive=!![],playSound(entranceSound),currentWaveDefinition[_0x44fe35(0x1e0)]((_0x55b56f,_0x528982)=>{const _0x5d69f5=_0x44fe35;squadronCompletionStatus[_0x528982]={'completed':0x0,'total':_0x55b56f[_0x5d69f5(0x1d4)]?.[_0x5d69f5(0x172)]||0x0,'hasFiredPostLanding':![]};const _0x1388eb=_0x528982*NORMAL_WAVE_SQUADRON_INTERVAL;squadronEntranceFiringStatus[_0x528982]={'hasFired':![],'scheduledStartTime':0x0},scheduleSingleEntranceSquadron(_0x55b56f,_0x528982,_0x1388eb);});}function checkAndScheduleNextSquadron(_0x2b704f){}function resetJustReturnedFlags(_0x46ccb8){enemies['forEach'](_0x300167=>{const _0x338b1b=_0x1065;let _0x114d4f=![];if(_0x46ccb8 instanceof Set)_0x114d4f=_0x46ccb8['has'](_0x300167['id']);else typeof _0x46ccb8==='string'&&(_0x114d4f=_0x300167['id']===_0x46ccb8);_0x300167&&_0x300167[_0x338b1b(0x180)]===_0x338b1b(0x1c1)&&_0x300167[_0x338b1b(0x201)]&&!_0x114d4f&&(_0x300167[_0x338b1b(0x201)]=![]);});}function generateAttackPath(_0x26dcad){const _0x51c84c=_0x1065;try{if(!_0x26dcad||!gameCanvas)return[];const _0x4c43b0=_0x26dcad[_0x51c84c(0x226)]===ENEMY3_TYPE?BOSS_WIDTH:_0x26dcad[_0x51c84c(0x226)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x1359da=_0x26dcad[_0x51c84c(0x226)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x26dcad[_0x51c84c(0x226)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x1b09e9=_0x4c43b0*0.5,_0x10e8a0=gameCanvas[_0x51c84c(0x1ba)],_0x810411=gameCanvas['height'];let _0x4cd0d8=[];const _0x4814d9={'x':_0x26dcad['x'],'y':_0x26dcad['y']},_0xbd6377=Math[_0x51c84c(0x1a1)](_0x810411*0.06,_0x1359da*1.8),_0x3ee740=Math[_0x51c84c(0x1a1)](_0x10e8a0*0.04,_0x4c43b0*1.2),_0x2f7491=_0x26dcad['x']+_0x4c43b0/0x2<_0x10e8a0/0x2?0x1:-0x1,_0x26400b={'x':_0x4814d9['x']-_0x2f7491*_0x3ee740*0.6,'y':_0x4814d9['y']-_0xbd6377};_0x26400b['x']=Math[_0x51c84c(0x225)](_0x1b09e9,Math[_0x51c84c(0x1a1)](_0x10e8a0-_0x1b09e9-_0x4c43b0,_0x26400b['x'])),_0x26400b['y']=Math[_0x51c84c(0x225)](_0x1b09e9,_0x26400b['y']);const _0x48d088={'x':_0x4814d9['x']+_0x2f7491*_0x3ee740*0.1,'y':_0x4814d9['y']-_0xbd6377*1.4},_0x4077af={'x':_0x26400b['x']+_0x2f7491*_0x3ee740*0.3,'y':_0x4814d9['y']-_0xbd6377*1.5},_0x120ca3={'p0':_0x4814d9,'p1':_0x48d088,'p2':_0x4077af,'p3':_0x26400b};_0x4cd0d8[_0x51c84c(0x1b6)](_0x120ca3);const _0x489d80=_0x26400b,_0x4170b3=_0x810411*0.45,_0x44272d=_0x10e8a0*0.22,_0x12484d=_0x810411*0.28,_0x5a0c60=0.5,_0x4756e6=0.6,_0x4c1e97=_0x810411*0.85,_0x131cff=Math[_0x51c84c(0x185)](Math[_0x51c84c(0x1f7)]()*0x3);let _0x11f45d=[];if(_0x131cff===0x0){const _0x4cf8e4=_0x4170b3+Math[_0x51c84c(0x1f7)]()*_0x810411*0.1,_0x4f4018=_0x44272d+Math[_0x51c84c(0x1f7)]()*_0x10e8a0*0.08,_0x29d0ed=_0x12484d+Math[_0x51c84c(0x1f7)]()*_0x810411*0.08,_0x277e0d=_0x489d80['x']+_0x2f7491*_0x4f4018*0.5,_0x392401=Math[_0x51c84c(0x1a1)](_0x4c1e97,_0x489d80['y']+_0x4cf8e4),_0x3fc77e=_0x277e0d+_0x2f7491*_0x4f4018*0.5,_0x43bca3=Math[_0x51c84c(0x225)](_0x489d80['y']+0x14,_0x392401-_0x29d0ed),_0x1cc6ae=_0x3fc77e-_0x2f7491*_0x4f4018*0.9,_0x2bde85=Math[_0x51c84c(0x225)](_0x489d80['y']+0x28,_0x43bca3+_0x29d0ed*0.6),_0x4ea43a=_0x1cc6ae-_0x2f7491*_0x4f4018*0.3,_0x1011f7=_0x810411+_0x1359da*0x2,_0x3d3448=Math[_0x51c84c(0x225)](_0x1b09e9,Math[_0x51c84c(0x1a1)](_0x10e8a0-_0x1b09e9-_0x4c43b0,_0x277e0d)),_0x266092=Math[_0x51c84c(0x225)](_0x1b09e9,Math[_0x51c84c(0x1a1)](_0x10e8a0-_0x1b09e9-_0x4c43b0,_0x3fc77e)),_0x43cbd2=Math['max'](_0x1b09e9,Math['min'](_0x10e8a0-_0x1b09e9-_0x4c43b0,_0x1cc6ae)),_0x4e72d2={'x':_0x489d80['x'],'y':_0x489d80['y']+_0x4cf8e4*_0x4756e6*0.5},_0x4f9e0b={'x':_0x3d3448-_0x2f7491*_0x4f4018*_0x5a0c60,'y':_0x392401},_0x28fea4={'x':_0x3d3448,'y':_0x392401},_0x2f7a07={'x':_0x3d3448+_0x2f7491*_0x4f4018*_0x5a0c60,'y':_0x392401},_0x2e0b99={'x':_0x266092,'y':_0x43bca3+_0x29d0ed*_0x4756e6},_0x3cb76c={'x':_0x266092,'y':_0x43bca3},_0x363624={'x':_0x266092,'y':_0x43bca3-_0x29d0ed*_0x4756e6*0.5},_0x2cf71c={'x':_0x43cbd2+_0x2f7491*_0x4f4018*_0x5a0c60,'y':_0x2bde85},_0x148aad={'x':_0x43cbd2,'y':_0x2bde85},_0x4be9d8={'x':_0x148aad['x'],'y':_0x148aad['y']+_0x810411*0.1},_0x39a902={'x':_0x4ea43a,'y':_0x1011f7-_0x810411*0.2},_0x2a159f={'x':_0x4ea43a,'y':_0x1011f7};_0x11f45d=[{'p0':_0x489d80,'p1':_0x4e72d2,'p2':_0x4f9e0b,'p3':_0x28fea4},{'p0':_0x28fea4,'p1':_0x2f7a07,'p2':_0x2e0b99,'p3':_0x3cb76c},{'p0':_0x3cb76c,'p1':_0x363624,'p2':_0x2cf71c,'p3':_0x148aad},{'p0':_0x148aad,'p1':_0x4be9d8,'p2':_0x39a902,'p3':_0x2a159f}];}else{if(_0x131cff===0x1){const _0x2879cf=_0x4170b3*0.8+Math[_0x51c84c(0x1f7)]()*_0x810411*0.1,_0x1b65c5=_0x44272d*1.2+Math[_0x51c84c(0x1f7)]()*_0x10e8a0*0.1,_0x37ae79=_0x12484d*0.7+Math[_0x51c84c(0x1f7)]()*_0x810411*0.1,_0x3a44c4=_0x489d80['x']+_0x2f7491*_0x1b65c5*0.4,_0x2a2aaa=Math['min'](_0x4c1e97-_0x37ae79*0.5,_0x489d80['y']+_0x2879cf*0.6),_0x1f8ddf=_0x3a44c4+_0x2f7491*_0x1b65c5*0.6,_0x10c66d=Math[_0x51c84c(0x1a1)](_0x4c1e97,_0x2a2aaa+_0x37ae79),_0x186672=_0x1f8ddf-_0x2f7491*_0x1b65c5*0.5,_0x36259a=_0x810411+_0x1359da*0x2,_0x168f98=Math[_0x51c84c(0x225)](_0x1b09e9,Math[_0x51c84c(0x1a1)](_0x10e8a0-_0x1b09e9-_0x4c43b0,_0x3a44c4)),_0x199f0c=Math[_0x51c84c(0x225)](_0x1b09e9,Math[_0x51c84c(0x1a1)](_0x10e8a0-_0x1b09e9-_0x4c43b0,_0x1f8ddf)),_0x592f89={'x':_0x489d80['x']-_0x2f7491*_0x1b65c5*0.1,'y':_0x489d80['y']+_0x2879cf*0.3},_0x110a07={'x':_0x168f98-_0x2f7491*_0x1b65c5*_0x5a0c60*0.8,'y':_0x2a2aaa+_0x37ae79*_0x4756e6*0.4},_0x48a49b={'x':_0x168f98,'y':_0x2a2aaa},_0x4a5e42={'x':_0x168f98+_0x2f7491*_0x1b65c5*_0x5a0c60*0.8,'y':_0x2a2aaa-_0x37ae79*_0x4756e6*0.4},_0x27d205={'x':_0x199f0c+_0x2f7491*_0x1b65c5*_0x5a0c60*0.6,'y':_0x10c66d+_0x37ae79*_0x4756e6*0.5},_0x19fce7={'x':_0x199f0c,'y':_0x10c66d},_0x1a0d61={'x':_0x199f0c-_0x2f7491*_0x1b65c5*0.2,'y':_0x10c66d+_0x810411*0.1},_0x26eef0={'x':_0x186672,'y':_0x36259a-_0x810411*0.3},_0x1b7abe={'x':_0x186672,'y':_0x36259a};_0x11f45d=[{'p0':_0x489d80,'p1':_0x592f89,'p2':_0x110a07,'p3':_0x48a49b},{'p0':_0x48a49b,'p1':_0x4a5e42,'p2':_0x27d205,'p3':_0x19fce7},{'p0':_0x19fce7,'p1':_0x1a0d61,'p2':_0x26eef0,'p3':_0x1b7abe}];}else{const _0x2c317c=_0x4170b3*0.6+Math[_0x51c84c(0x1f7)]()*_0x810411*0.05,_0x18dd07=_0x44272d*0.7+Math[_0x51c84c(0x1f7)]()*_0x10e8a0*0.05,_0x3871da=_0x12484d*0.6+Math['random']()*_0x810411*0.05,_0x22d087=_0x3871da*1.5,_0x5e1e20=_0x489d80['x']+_0x2f7491*_0x18dd07*0.5,_0xe592cc=Math[_0x51c84c(0x1a1)](_0x4c1e97-_0x22d087,_0x489d80['y']+_0x2c317c),_0x5246c5=_0x5e1e20+_0x2f7491*_0x18dd07*0.5,_0x146561=_0xe592cc+_0x3871da,_0x3353df=_0x5246c5-_0x2f7491*_0x18dd07*0.8,_0x19c3ea=Math[_0x51c84c(0x1a1)](_0x4c1e97,_0x146561+_0x22d087*0.7),_0x12fc3f=_0x3353df+_0x2f7491*_0x18dd07*0.4,_0x35aae9=_0x19c3ea+_0x3871da*0.8,_0x49557d=_0x12fc3f,_0x3f1969=_0x810411+_0x1359da*0x2,_0x826293=Math[_0x51c84c(0x225)](_0x1b09e9,Math['min'](_0x10e8a0-_0x1b09e9-_0x4c43b0,_0x5e1e20)),_0x244a12=Math[_0x51c84c(0x225)](_0x1b09e9,Math[_0x51c84c(0x1a1)](_0x10e8a0-_0x1b09e9-_0x4c43b0,_0x5246c5)),_0x26ba31=Math['max'](_0x1b09e9,Math[_0x51c84c(0x1a1)](_0x10e8a0-_0x1b09e9-_0x4c43b0,_0x3353df)),_0x5d587c=Math[_0x51c84c(0x225)](_0x1b09e9,Math[_0x51c84c(0x1a1)](_0x10e8a0-_0x1b09e9-_0x4c43b0,_0x12fc3f)),_0x1162db={'x':_0x489d80['x'],'y':_0x489d80['y']+_0x2c317c*0.5},_0xfd8d63={'x':_0x826293-_0x2f7491*_0x18dd07*_0x5a0c60,'y':_0xe592cc+_0x3871da*_0x4756e6*0.3},_0x1871b5={'x':_0x826293,'y':_0xe592cc},_0x1dc681={'x':_0x826293+_0x2f7491*_0x18dd07*_0x5a0c60,'y':_0xe592cc-_0x3871da*_0x4756e6*0.3},_0x45dd77={'x':_0x244a12+_0x2f7491*_0x18dd07*_0x5a0c60,'y':_0x146561+_0x3871da*_0x4756e6*0.5},_0x167bde={'x':_0x244a12,'y':_0x146561},_0x4fd6bd={'x':_0x244a12-_0x2f7491*_0x18dd07*_0x5a0c60,'y':_0x146561-_0x3871da*_0x4756e6*0.5},_0x2f0ff5={'x':_0x26ba31-_0x2f7491*_0x18dd07*_0x5a0c60,'y':_0x19c3ea+_0x3871da*_0x4756e6*0.4},_0x5649a2={'x':_0x26ba31,'y':_0x19c3ea},_0xef1208={'x':_0x26ba31+_0x2f7491*_0x18dd07*_0x5a0c60,'y':_0x19c3ea-_0x3871da*_0x4756e6*0.4},_0x22e9ad={'x':_0x5d587c+_0x2f7491*_0x18dd07*_0x5a0c60,'y':_0x35aae9+_0x3871da*_0x4756e6*0.6},_0x584ee0={'x':_0x5d587c,'y':_0x35aae9},_0xc1a768={'x':_0x5d587c-_0x2f7491*_0x18dd07*0.1,'y':_0x35aae9+_0x810411*0.05},_0x84790b={'x':_0x49557d,'y':_0x3f1969-_0x810411*0.2},_0x7ac629={'x':_0x49557d,'y':_0x3f1969};_0x11f45d=[{'p0':_0x489d80,'p1':_0x1162db,'p2':_0xfd8d63,'p3':_0x1871b5},{'p0':_0x1871b5,'p1':_0x1dc681,'p2':_0x45dd77,'p3':_0x167bde},{'p0':_0x167bde,'p1':_0x4fd6bd,'p2':_0x2f0ff5,'p3':_0x5649a2},{'p0':_0x5649a2,'p1':_0xef1208,'p2':_0x22e9ad,'p3':_0x584ee0},{'p0':_0x584ee0,'p1':_0xc1a768,'p2':_0x84790b,'p3':_0x7ac629}];}}return _0x4cd0d8['push'](..._0x11f45d),_0x4cd0d8;}catch(_0x244af2){return console[_0x51c84c(0x23b)]('[DEBUG]\x20Error\x20generating\x20attack\x20path\x20for\x20enemy\x20'+_0x26dcad?.['id']+':',_0x244af2),[];}}function handleEnemyHit(_0x7e6a4b){const _0x80fcb4=_0x1065;if(!_0x7e6a4b)return{'destroyed':![],'pointsAwarded':0x0};const _0x15cb1a=Date[_0x80fcb4(0x1e7)]();let _0x4cab69=0x0,_0x1e431a=![],_0x5aae8d=_0x7e6a4b[_0x80fcb4(0x18a)],_0x5b6532=null;const _0x46691e=_0x7e6a4b[_0x80fcb4(0x226)]===ENEMY3_TYPE?BOSS_WIDTH:_0x7e6a4b[_0x80fcb4(0x226)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x33524a=_0x7e6a4b[_0x80fcb4(0x226)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x7e6a4b[_0x80fcb4(0x226)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x52c50b=_0x7e6a4b[_0x80fcb4(0x226)]===ENEMY3_TYPE&&_0x7e6a4b[_0x80fcb4(0x26f)],_0x42190=_0x7e6a4b[_0x80fcb4(0x226)]===ENEMY3_TYPE&&_0x7e6a4b['capturedShipDimensions'],_0x4d521f=_0x7e6a4b['x']+_0x46691e/0x2,_0x575e48=_0x7e6a4b['y']+_0x33524a*0.2;createHitSparks(_0x4d521f,_0x575e48),_0x7e6a4b[_0x80fcb4(0x251)]--;_0x7e6a4b[_0x80fcb4(0x226)]===ENEMY3_TYPE&&(_0x7e6a4b[_0x80fcb4(0x18a)]=_0x7e6a4b[_0x80fcb4(0x251)]<ENEMY3_MAX_HITS);if(_0x7e6a4b[_0x80fcb4(0x251)]<=0x0){_0x1e431a=!![];if(_0x52c50b&&_0x42190){if(_0x7e6a4b['capturedShipDimensions']){const _0x44f4f7=_0x7e6a4b[_0x80fcb4(0x16c)]['width'],_0x2852d4=_0x7e6a4b[_0x80fcb4(0x16c)][_0x80fcb4(0x16d)],_0x5242d2=_0x7e6a4b['x']+(_0x46691e-_0x44f4f7)/0x2+CAPTURED_SHIP_OFFSET_X,_0x28f847=_0x7e6a4b['y']+CAPTURED_SHIP_OFFSET_Y,_0x1df729=fallingShips[_0x80fcb4(0x18d)](_0x2917ea=>Math['abs'](_0x2917ea['x']-_0x5242d2)<0x1&&Math[_0x80fcb4(0x18e)](_0x2917ea['y']-_0x28f847)<0x1);!_0x1df729?fallingShips[_0x80fcb4(0x1b6)]({'x':_0x5242d2,'y':_0x28f847,'width':_0x44f4f7,'height':_0x2852d4,'creationTime':_0x15cb1a,'tintProgress':0x1,'rotation':0x0}):console[_0x80fcb4(0x16a)](_0x80fcb4(0x25f));}else console['error'](_0x80fcb4(0x222));_0x7e6a4b[_0x80fcb4(0x26f)]=![],_0x7e6a4b[_0x80fcb4(0x16c)]=null;}else _0x52c50b&&!_0x42190&&(console['error'](_0x80fcb4(0x235)+_0x7e6a4b['id']+_0x80fcb4(0x250)),_0x7e6a4b['hasCapturedShip']=![],_0x7e6a4b[_0x80fcb4(0x16c)]=null);if(isChallengingStage){let _0x11025b=0x64;const _0x1a8e79=csLastHitTime;csLastHitTime=_0x15cb1a,csLastChainHitPosition={'x':_0x7e6a4b['x'],'y':_0x7e6a4b['y']},csCurrentChainHits>0x0&&_0x15cb1a-_0x1a8e79<CS_CHAIN_BREAK_TIME_MS?csCurrentChainHits++:(csCurrentChainHits=0x1,csCurrentChainScore=0x0),csCurrentChainHits>=CS_CHAIN_SCORE_THRESHOLD&&(_0x11025b*=0x2),_0x4cab69=_0x11025b,csCurrentChainScore+=_0x4cab69,scoreEarnedThisCS+=_0x4cab69,challengingStageEnemiesHit++,_0x5b6532=explosionSound;}else{if(_0x7e6a4b[_0x80fcb4(0x180)]===_0x80fcb4(0x1c1))_0x4cab69=_0x7e6a4b[_0x80fcb4(0x226)]===ENEMY1_TYPE?0x32:_0x7e6a4b[_0x80fcb4(0x226)]===ENEMY2_TYPE?0x50:0x0,_0x7e6a4b[_0x80fcb4(0x226)]===ENEMY3_TYPE&&(_0x4cab69=0x96),_0x5b6532=explosionSound;else{_0x4cab69=_0x7e6a4b[_0x80fcb4(0x226)]===ENEMY1_TYPE?0x64:_0x7e6a4b['type']===ENEMY2_TYPE?0xa0:0x0;if(_0x7e6a4b[_0x80fcb4(0x226)]===ENEMY3_TYPE){if(_0x52c50b){const _0x5ee219=[0x3e8,0x5dc,0x7d0,0xbb8];_0x4cab69=_0x5ee219[Math['floor'](Math[_0x80fcb4(0x1f7)]()*_0x5ee219[_0x80fcb4(0x172)])],_0x5b6532=bossHit2Sound;}else _0x5aae8d?(_0x4cab69=0x190,_0x5b6532=bossHit2Sound):(_0x4cab69=0x0,console[_0x80fcb4(0x16a)](_0x80fcb4(0x199)+_0x4cab69+'\x20points.\x20Health\x20was:\x20'+(_0x7e6a4b[_0x80fcb4(0x251)]+0x1)),_0x5b6532=explosionSound);}else _0x5b6532=explosionSound;if(_0x1e431a&&_0x4cab69>0x0){const _0xf237c6=normalWaveLastHitTime;normalWaveLastHitTime=_0x15cb1a,normalWaveLastChainHitPosition={'x':_0x7e6a4b['x'],'y':_0x7e6a4b['y']};normalWaveLastChainHitPosition&&_0x15cb1a-_0xf237c6<NORMAL_WAVE_CHAIN_BREAK_TIME_MS?normalWaveCurrentChainHits++:(normalWaveCurrentChainHits=0x1,normalWaveCurrentChainScore=0x0);if(NORMAL_WAVE_CHAIN_BONUS_ENABLED&&normalWaveCurrentChainHits>=NORMAL_WAVE_CHAIN_SCORE_THRESHOLD){const _0x4db293=[0x12c,0x258,0x3e8,0x5dc,0x7d0,0xbb8],_0x3fc224=Math['min'](_0x4db293[_0x80fcb4(0x172)]-0x1,normalWaveCurrentChainHits-NORMAL_WAVE_CHAIN_SCORE_THRESHOLD),_0x59101d=_0x4db293[_0x3fc224];_0x4cab69+=_0x59101d,normalWaveCurrentChainScore+=_0x59101d;}}}}if(_0x4cab69>0x0){score+=_0x4cab69,highScore=Math[_0x80fcb4(0x225)](highScore,score);let _0xf2a33f=![],_0x2eb803=null;if(!isManualControl)_0xf2a33f=player1TriggeredHighScoreSound,_0x2eb803=()=>{player1TriggeredHighScoreSound=!![];};else isTwoPlayerMode?currentPlayer===0x1?(_0xf2a33f=player1TriggeredHighScoreSound,_0x2eb803=()=>{player1TriggeredHighScoreSound=!![];}):(_0xf2a33f=player2TriggeredHighScoreSound,_0x2eb803=()=>{player2TriggeredHighScoreSound=!![];}):(_0xf2a33f=player1TriggeredHighScoreSound,_0x2eb803=()=>{player1TriggeredHighScoreSound=!![];});if(!_0xf2a33f){if(score>highScore-_0x4cab69){if(_0x2eb803)_0x2eb803();playSound(hiScoreSound);}}_0x1e431a&&(!isManualControl||currentPlayer===0x1||!isTwoPlayerMode?(player1Score=score,player1EnemiesHit++):(player2Score=score,player2EnemiesHit++));checkAndAwardExtraLife();const _0x2c4eb8=_0x7e6a4b[_0x80fcb4(0x180)]===_0x80fcb4(0x1c1)||isChallengingStage?FLOATING_SCORE_COLOR_GRID:FLOATING_SCORE_COLOR_ACTIVE;floatingScores['push']({'text':_0x4cab69[_0x80fcb4(0x1c3)](),'x':_0x7e6a4b['x']+_0x46691e/0x2,'y':_0x7e6a4b['y'],'color':_0x2c4eb8,'creationTime':_0x15cb1a,'displayStartTime':_0x15cb1a+FLOATING_SCORE_APPEAR_DELAY});}createExplosion(_0x7e6a4b['x']+_0x46691e/0x2,_0x7e6a4b['y']+_0x33524a/0x2);_0x7e6a4b['id']===capturingBossId&&stopSound(captureSound);if(_0x7e6a4b[_0x80fcb4(0x180)]===_0x80fcb4(0x253)||_0x7e6a4b[_0x80fcb4(0x180)]===_0x80fcb4(0x20a)||_0x7e6a4b[_0x80fcb4(0x180)]==='diving_to_capture_position'||_0x7e6a4b['state']===_0x80fcb4(0x174)||_0x7e6a4b[_0x80fcb4(0x180)]===_0x80fcb4(0x1db)||_0x7e6a4b[_0x80fcb4(0x180)]===_0x80fcb4(0x1fd)){if(_0x7e6a4b[_0x80fcb4(0x226)]===ENEMY3_TYPE)stopSound(bossGalagaDiveSound);else stopSound(butterflyDiveSound);}}else _0x1e431a=![],_0x7e6a4b[_0x80fcb4(0x226)]===ENEMY3_TYPE?(_0x5b6532=bossHit1Sound,_0x4cab69=0x0):_0x4cab69=0x0;return _0x5b6532&&playSound(_0x5b6532),{'destroyed':_0x1e431a,'pointsAwarded':_0x4cab69};}function createHitSparks(_0x2aa796,_0x4b1653){const _0x15e8bd=_0x1065;if(!gameCtx)return;const _0xd233f0=Date['now']();for(let _0x3b28e6=0x0;_0x3b28e6<HIT_SPARK_COUNT;_0x3b28e6++){const _0x48f13d=Math['random']()*Math['PI']*0x2,_0x4d08e2=HIT_SPARK_SPEED*(0.7+Math[_0x15e8bd(0x1f7)]()*0.6),_0x57fcb3=HIT_SPARK_LIFETIME*(0.8+Math[_0x15e8bd(0x1f7)]()*0.4);hitSparks[_0x15e8bd(0x1b6)]({'x':_0x2aa796,'y':_0x4b1653,'vx':Math[_0x15e8bd(0x1dc)](_0x48f13d)*_0x4d08e2,'vy':Math['sin'](_0x48f13d)*_0x4d08e2,'creationTime':_0xd233f0,'lifetime':_0x57fcb3,'size':HIT_SPARK_SIZE,'color':HIT_SPARK_COLOR});}}function updateHitSparks(){const _0x3aa102=_0x1065,_0x13a124=Date['now']();for(let _0x1332cb=hitSparks[_0x3aa102(0x172)]-0x1;_0x1332cb>=0x0;_0x1332cb--){const _0x1eab42=hitSparks[_0x1332cb],_0x39a5eb=_0x13a124-_0x1eab42['creationTime'];_0x39a5eb>=_0x1eab42[_0x3aa102(0x1b7)]?hitSparks[_0x3aa102(0x19d)](_0x1332cb,0x1):(_0x1eab42['vy']+=HIT_SPARK_GRAVITY,_0x1eab42['x']+=_0x1eab42['vx'],_0x1eab42['y']+=_0x1eab42['vy'],_0x1eab42[_0x3aa102(0x20b)]=Math[_0x3aa102(0x225)](0x0,0x1-_0x39a5eb*HIT_SPARK_FADE_SPEED));}}function moveEntities(){const _0x5c0a66=_0x1065;if(isPaused)return;try{if(ship&&isInGameState&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isWaitingForRespawn){let _0x5d8c29=ship[_0x5c0a66(0x1ba)];isDualShipActive&&(_0x5d8c29+=DUAL_SHIP_OFFSET_X);let _0x56f067=ship['x'];if(isManualControl){let _0x450336=![],_0x2329d9=![];currentPlayer===0x1||!isTwoPlayerMode?(_0x450336=leftPressed,_0x2329d9=rightPressed):(_0x450336=p2LeftPressed,_0x2329d9=p2RightPressed);if(_0x450336&&ship['x']>0x0)_0x56f067=ship['x']-ship[_0x5c0a66(0x166)];else _0x2329d9&&ship['x']<gameCanvas['width']-_0x5d8c29&&(_0x56f067=ship['x']+ship[_0x5c0a66(0x166)]);ship['x']=Math[_0x5c0a66(0x225)](0x0,Math[_0x5c0a66(0x1a1)](gameCanvas[_0x5c0a66(0x1ba)]-_0x5d8c29,_0x56f067)),ship['targetX']=ship['x'];}else{if(typeof smoothedShipX!==_0x5c0a66(0x1a2)){const _0x436ce4=0.1,_0x34d572=1.2;smoothedShipX+=(ship[_0x5c0a66(0x17f)]-smoothedShipX)*AI_SMOOTHING_FACTOR_MOVE;const _0x4e6f86=smoothedShipX-ship['x'],_0x2e6fd9=ship[_0x5c0a66(0x166)]*_0x34d572;let _0x1a11b0=0x0;if(Math[_0x5c0a66(0x18e)](_0x4e6f86)>_0x436ce4){const _0x3a8d4b=isChallengingStage?CS_AI_MOVE_FRACTION:NORMAL_MOVE_FRACTION;_0x1a11b0=_0x4e6f86*_0x3a8d4b,_0x1a11b0=Math[_0x5c0a66(0x225)](-_0x2e6fd9,Math[_0x5c0a66(0x1a1)](_0x2e6fd9,_0x1a11b0)),Math[_0x5c0a66(0x18e)](_0x1a11b0)>Math[_0x5c0a66(0x18e)](_0x4e6f86)&&(_0x1a11b0=_0x4e6f86),ship['x']+=_0x1a11b0,ship['x']=Math['max'](0x0,Math[_0x5c0a66(0x1a1)](gameCanvas[_0x5c0a66(0x1ba)]-_0x5d8c29,ship['x']));}}else ship['x']=Math['max'](0x0,Math[_0x5c0a66(0x1a1)](gameCanvas['width']-_0x5d8c29,ship[_0x5c0a66(0x17f)]));}}const _0x1362b6=Date[_0x5c0a66(0x1e7)]();for(let _0x27ef10=bullets['length']-0x1;_0x27ef10>=0x0;_0x27ef10--){const _0x31e38c=bullets[_0x27ef10];_0x31e38c?(_0x31e38c['y']-=_0x31e38c['speed'],_0x31e38c['y']+PLAYER_BULLET_HEIGHT<0x0&&bullets['splice'](_0x27ef10,0x1)):bullets[_0x5c0a66(0x19d)](_0x27ef10,0x1);}for(let _0x495d75=enemyBullets[_0x5c0a66(0x172)]-0x1;_0x495d75>=0x0;_0x495d75--){const _0x43fa42=enemyBullets[_0x495d75];if(!_0x43fa42){enemyBullets[_0x5c0a66(0x19d)](_0x495d75,0x1);continue;}_0x43fa42['x']+=_0x43fa42['vx'],_0x43fa42['y']+=_0x43fa42['vy'],(_0x43fa42['y']>gameCanvas['height']||_0x43fa42['y']<-ENEMY_BULLET_HEIGHT||_0x43fa42['x']<-ENEMY_BULLET_WIDTH||_0x43fa42['x']>gameCanvas[_0x5c0a66(0x1ba)])&&enemyBullets['splice'](_0x495d75,0x1);}for(let _0x232ba1=fallingShips[_0x5c0a66(0x172)]-0x1;_0x232ba1>=0x0;_0x232ba1--){const _0x1da9db=fallingShips[_0x232ba1];if(!_0x1da9db){fallingShips[_0x5c0a66(0x19d)](_0x232ba1,0x1);continue;}_0x1da9db['y']+=FALLING_SHIP_SPEED;const _0x3302b0=_0x1362b6-_0x1da9db[_0x5c0a66(0x1c7)];typeof _0x1da9db['tintProgress']===_0x5c0a66(0x212)?_0x1da9db[_0x5c0a66(0x169)]=Math[_0x5c0a66(0x225)](0x0,0x1-_0x3302b0/FALLING_SHIP_FADE_DURATION_MS):_0x1da9db[_0x5c0a66(0x169)]=0x0;if(typeof _0x1da9db[_0x5c0a66(0x190)]===_0x5c0a66(0x212)){const _0x232ab8=Math['min'](0x1,_0x3302b0/FALLING_SHIP_ROTATION_DURATION_MS);_0x1da9db['rotation']=_0x232ab8*0x2*(0x2*Math['PI']);}else _0x1da9db[_0x5c0a66(0x190)]=0x0;if(ship&&!isDualShipActive&&!isShipCaptured&&!isWaitingForRespawn&&_0x1da9db['y']+_0x1da9db[_0x5c0a66(0x16d)]>=gameCanvas[_0x5c0a66(0x16d)]-AUTO_DOCK_THRESHOLD){fallingShips[_0x5c0a66(0x19d)](_0x232ba1,0x1),isDualShipActive=!![];currentPlayer===0x1?player1IsDualShipActive=!![]:player2IsDualShipActive=!![];playSound(dualShipSound);continue;}_0x1da9db['y']>gameCanvas[_0x5c0a66(0x16d)]+_0x1da9db[_0x5c0a66(0x16d)]&&fallingShips[_0x5c0a66(0x19d)](_0x232ba1,0x1);}let _0x56e595=0x0;if(!isChallengingStage&&!isWaveTransitioning&&isGridSoundPlaying&&enemies[_0x5c0a66(0x18d)](_0x3bbceb=>_0x3bbceb?.[_0x5c0a66(0x180)]===_0x5c0a66(0x1c1))&&!isShowingPlayerGameOverMessage){const _0x3b7179=enemies[_0x5c0a66(0x189)](_0x191f4b=>_0x191f4b?.[_0x5c0a66(0x180)]===_0x5c0a66(0x1c1));if(_0x3b7179[_0x5c0a66(0x172)]>0x0){let _0x2367b5=gameCanvas[_0x5c0a66(0x1ba)],_0x58a4c4=0x0;_0x3b7179['forEach'](_0x356a27=>{const _0x3600f6=_0x5c0a66;_0x356a27&&(_0x2367b5=Math[_0x3600f6(0x1a1)](_0x2367b5,_0x356a27['x']),_0x58a4c4=Math[_0x3600f6(0x225)](_0x58a4c4,_0x356a27['x']+_0x356a27['width']));});const _0x48fe7f=gameCanvas[_0x5c0a66(0x1ba)]*GRID_HORIZONTAL_MARGIN_PERCENT,_0x486f86=gameCanvas[_0x5c0a66(0x1ba)]*(0x1-GRID_HORIZONTAL_MARGIN_PERCENT);if(gridMoveDirection===0x1&&_0x58a4c4>=_0x486f86)gridMoveDirection=-0x1;else gridMoveDirection===-0x1&&_0x2367b5<=_0x48fe7f&&(gridMoveDirection=0x1);const _0x223b4c=scaleValue(level,BASE_GRID_MOVE_SPEED,MAX_GRID_MOVE_SPEED);_0x56e595=_0x223b4c*gridMoveDirection,currentGridOffsetX+=_0x56e595,enemies[_0x5c0a66(0x1e0)](_0x48e547=>{const _0x2ead7a=_0x5c0a66;if(_0x48e547&&(_0x48e547[_0x2ead7a(0x180)]===_0x2ead7a(0x1db)||_0x48e547['state']===_0x2ead7a(0x1c1)||_0x48e547['state']===_0x2ead7a(0x271)))try{const _0x25afb1=_0x48e547[_0x2ead7a(0x226)]===ENEMY3_TYPE?BOSS_WIDTH:_0x48e547['type']===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0xbc9b60,y:_0x454c32}=getCurrentGridSlotPosition(_0x48e547[_0x2ead7a(0x209)],_0x48e547['gridCol'],_0x25afb1);_0x48e547[_0x2ead7a(0x1e5)]=_0xbc9b60,_0x48e547[_0x2ead7a(0x1cf)]=_0x454c32;}catch(_0x6dbb70){console[_0x2ead7a(0x23b)]('Error\x20updating\x20target\x20grid\x20pos\x20for\x20enemy\x20'+_0x48e547?.['id']+_0x2ead7a(0x1fe)+_0x48e547?.[_0x2ead7a(0x180)]+_0x2ead7a(0x16e),_0x6dbb70);}});}else isGridSoundPlaying&&(stopSound(gridBackgroundSound),isGridSoundPlaying=![]);}else isGridSoundPlaying&&(!enemies[_0x5c0a66(0x18d)](_0x33d403=>_0x33d403?.[_0x5c0a66(0x180)]===_0x5c0a66(0x1c1))||isChallengingStage||isWaveTransitioning||isShowingPlayerGameOverMessage)&&(stopSound(gridBackgroundSound),isGridSoundPlaying=![]);for(let _0x5413cc=enemies['length']-0x1;_0x5413cc>=0x0;_0x5413cc--){let _0xf3ae30=enemies[_0x5413cc];if(!_0xf3ae30)continue;const _0x7108cb=_0xf3ae30['id'];if(_0xf3ae30[_0x5c0a66(0x259)]&&_0xf3ae30[_0x5c0a66(0x180)]!=='preparing_capture'){clearTimeout(_0xf3ae30[_0x5c0a66(0x259)]);const _0x32c1c8=enemySpawnTimeouts[_0x5c0a66(0x223)](_0xf3ae30[_0x5c0a66(0x259)]);if(_0x32c1c8>-0x1)enemySpawnTimeouts['splice'](_0x32c1c8,0x1);_0xf3ae30['capturePrepareTimeout']=null;}const _0x5aeaac=_0xf3ae30['type']===ENEMY3_TYPE?BOSS_WIDTH:_0xf3ae30[_0x5c0a66(0x226)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x2f37b0=_0xf3ae30[_0x5c0a66(0x226)]===ENEMY3_TYPE?BOSS_HEIGHT:_0xf3ae30[_0x5c0a66(0x226)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT;switch(_0xf3ae30[_0x5c0a66(0x180)]){case _0x5c0a66(0x174):{let _0x244f69=CS_ENTRANCE_PATH_SPEED;const _0x4b1370=_0xf3ae30[_0x5c0a66(0x178)]||0x1;_0x244f69*=_0x4b1370;if(!isChallengingStage){enemies['splice'](_0x5413cc,0x1),_0xf3ae30=null;break;}let _0xd23e7b=challengingStagePaths,_0xde1c4c=_0xd23e7b[_0xf3ae30['entrancePathId']];if(!_0xde1c4c||_0xf3ae30[_0x5c0a66(0x26c)]>=_0xde1c4c[_0x5c0a66(0x172)]){enemies['splice'](_0x5413cc,0x1),_0xf3ae30=null;break;}const _0x15dcf1=_0xde1c4c[_0xf3ae30['pathSegmentIndex']];if(!_0x15dcf1||!_0x15dcf1['p0']||!_0x15dcf1['p1']||!_0x15dcf1['p2']||!_0x15dcf1['p3']){console['error'](_0x5c0a66(0x21f)+_0xf3ae30[_0x5c0a66(0x26c)]+_0x5c0a66(0x173)+_0xf3ae30[_0x5c0a66(0x22c)]+'.\x20Enemy\x20'+_0xf3ae30['id']),enemies[_0x5c0a66(0x19d)](_0x5413cc,0x1),_0xf3ae30=null;break;}_0xf3ae30[_0x5c0a66(0x177)]+=_0x244f69;let _0x2378b4,_0x3851d5,_0x5cf7b2=_0xf3ae30['x'],_0x3f0efe=_0xf3ae30['y'];if(_0xf3ae30['pathT']>=0x1){_0xf3ae30['pathT']=0x0,_0xf3ae30[_0x5c0a66(0x26c)]++;if(_0xf3ae30[_0x5c0a66(0x26c)]>=_0xde1c4c['length'])enemies[_0x5c0a66(0x19d)](_0x5413cc,0x1),_0xf3ae30=null;else{const _0x5e5fbe=_0xde1c4c[_0xf3ae30['pathSegmentIndex']];_0x5e5fbe?.['p0']?(_0x2378b4=_0x5e5fbe['p0']['x'],_0x3851d5=_0x5e5fbe['p0']['y']):(console[_0x5c0a66(0x23b)](_0x5c0a66(0x160)+_0xf3ae30[_0x5c0a66(0x26c)]+_0x5c0a66(0x173)+_0xf3ae30[_0x5c0a66(0x22c)]+_0x5c0a66(0x1a8)+_0x7108cb),enemies[_0x5c0a66(0x19d)](_0x5413cc,0x1),_0xf3ae30=null);}}else try{_0x2378b4=calculateBezierPoint(_0xf3ae30[_0x5c0a66(0x177)],_0x15dcf1['p0']['x'],_0x15dcf1['p1']['x'],_0x15dcf1['p2']['x'],_0x15dcf1['p3']['x']),_0x3851d5=calculateBezierPoint(_0xf3ae30['pathT'],_0x15dcf1['p0']['y'],_0x15dcf1['p1']['y'],_0x15dcf1['p2']['y'],_0x15dcf1['p3']['y']);}catch(_0x526474){console['error'](_0x5c0a66(0x214)+_0x7108cb+':',_0x526474),enemies['splice'](_0x5413cc,0x1),_0xf3ae30=null;}_0xf3ae30&&(isNaN(_0x2378b4)||isNaN(_0x3851d5)?(console[_0x5c0a66(0x23b)]('NaN\x20detected\x20in\x20CS\x20path\x20calculation\x20for\x20enemy\x20'+_0x7108cb+_0x5c0a66(0x262)),enemies[_0x5c0a66(0x19d)](_0x5413cc,0x1),_0xf3ae30=null):(_0xf3ae30[_0x5c0a66(0x1d1)]=_0x2378b4-_0x5cf7b2,_0xf3ae30[_0x5c0a66(0x15e)]=_0x3851d5-_0x3f0efe,_0xf3ae30['x']=_0x2378b4,_0xf3ae30['y']=_0x3851d5));break;}case _0x5c0a66(0x20a):{if(isChallengingStage){enemies['splice'](_0x5413cc,0x1),_0xf3ae30=null;break;}let _0x511ae7=normalWaveEntrancePaths,_0x37553c=_0x511ae7[_0xf3ae30[_0x5c0a66(0x22c)]],_0x15d457;_0xf3ae30[_0x5c0a66(0x22c)]===_0x5c0a66(0x20e)||_0xf3ae30['entrancePathId']===_0x5c0a66(0x1f5)?_0x15d457=BOSS_LOOP_ENTRANCE_PATH_SPEED:_0x15d457=NORMAL_ENTRANCE_PATH_SPEED;if(!_0x37553c){console[_0x5c0a66(0x16a)](_0x5c0a66(0x188)+_0x7108cb+_0x5c0a66(0x1fa)+_0xf3ae30[_0x5c0a66(0x22c)]+_0x5c0a66(0x162));try{_0xf3ae30['targetGridX']=_0xf3ae30[_0x5c0a66(0x1e5)]??gameCanvas[_0x5c0a66(0x1ba)]/0x2,_0xf3ae30[_0x5c0a66(0x1cf)]=_0xf3ae30[_0x5c0a66(0x1cf)]??ENEMY_TOP_MARGIN;}catch(_0x2a2c27){console['error'](_0x5c0a66(0x21e)+_0x7108cb+_0x5c0a66(0x1d5),_0x2a2c27),_0xf3ae30[_0x5c0a66(0x1e5)]=gameCanvas[_0x5c0a66(0x1ba)]/0x2,_0xf3ae30['targetGridY']=ENEMY_TOP_MARGIN;}_0xf3ae30[_0x5c0a66(0x180)]=_0x5c0a66(0x271),_0xf3ae30[_0x5c0a66(0x177)]=0x0,_0xf3ae30[_0x5c0a66(0x26c)]=0x0,_0xf3ae30[_0x5c0a66(0x1d1)]=0x0,_0xf3ae30[_0x5c0a66(0x15e)]=0x0;_0xf3ae30[_0x5c0a66(0x25a)]!==undefined&&squadronCompletionStatus[_0xf3ae30[_0x5c0a66(0x25a)]]&&squadronCompletionStatus[_0xf3ae30['squadronId']]['completed']++;break;}if(_0xf3ae30[_0x5c0a66(0x26c)]>=_0x37553c[_0x5c0a66(0x172)]){console['warn'](_0x5c0a66(0x188)+_0x7108cb+_0x5c0a66(0x16b)+_0xf3ae30['pathSegmentIndex']+_0x5c0a66(0x183)+_0xf3ae30[_0x5c0a66(0x22c)]+'.\x20Switching\x20to\x20moving_to_grid.');try{_0xf3ae30['targetGridX']=_0xf3ae30[_0x5c0a66(0x1e5)]??gameCanvas['width']/0x2,_0xf3ae30[_0x5c0a66(0x1cf)]=_0xf3ae30[_0x5c0a66(0x1cf)]??ENEMY_TOP_MARGIN;}catch(_0x486296){console['error'](_0x5c0a66(0x21e)+_0x7108cb+_0x5c0a66(0x254),_0x486296),_0xf3ae30[_0x5c0a66(0x1e5)]=gameCanvas[_0x5c0a66(0x1ba)]/0x2,_0xf3ae30[_0x5c0a66(0x1cf)]=ENEMY_TOP_MARGIN;}_0xf3ae30[_0x5c0a66(0x180)]=_0x5c0a66(0x271),_0xf3ae30['pathT']=0x0,_0xf3ae30['pathSegmentIndex']=0x0,_0xf3ae30[_0x5c0a66(0x1d1)]=0x0,_0xf3ae30[_0x5c0a66(0x15e)]=0x0;_0xf3ae30['squadronId']!==undefined&&squadronCompletionStatus[_0xf3ae30[_0x5c0a66(0x25a)]]&&squadronCompletionStatus[_0xf3ae30[_0x5c0a66(0x25a)]][_0x5c0a66(0x184)]++;break;}const _0x4b4ab2=_0x37553c[_0xf3ae30[_0x5c0a66(0x26c)]];if(!_0x4b4ab2||!_0x4b4ab2['p0']||!_0x4b4ab2['p1']||!_0x4b4ab2['p2']||!_0x4b4ab2['p3']){console[_0x5c0a66(0x23b)](_0x5c0a66(0x233)+_0xf3ae30['pathSegmentIndex']+_0x5c0a66(0x1b2)+_0xf3ae30['entrancePathId']+_0x5c0a66(0x1a8)+_0x7108cb+'.\x20Switching\x20to\x20moving_to_grid.');try{_0xf3ae30['targetGridX']=_0xf3ae30[_0x5c0a66(0x1e5)]??gameCanvas['width']/0x2,_0xf3ae30[_0x5c0a66(0x1cf)]=_0xf3ae30[_0x5c0a66(0x1cf)]??ENEMY_TOP_MARGIN+_0xf3ae30[_0x5c0a66(0x209)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}catch(_0x4bf2a1){console[_0x5c0a66(0x23b)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x7108cb+_0x5c0a66(0x243),_0x4bf2a1),_0xf3ae30[_0x5c0a66(0x1e5)]=gameCanvas[_0x5c0a66(0x1ba)]/0x2,_0xf3ae30['targetGridY']=ENEMY_TOP_MARGIN;}_0xf3ae30['state']=_0x5c0a66(0x271),_0xf3ae30[_0x5c0a66(0x177)]=0x0,_0xf3ae30[_0x5c0a66(0x26c)]=0x0,_0xf3ae30[_0x5c0a66(0x1d1)]=0x0,_0xf3ae30[_0x5c0a66(0x15e)]=0x0;_0xf3ae30[_0x5c0a66(0x25a)]!==undefined&&squadronCompletionStatus[_0xf3ae30[_0x5c0a66(0x25a)]]&&squadronCompletionStatus[_0xf3ae30['squadronId']][_0x5c0a66(0x184)]++;break;}_0xf3ae30['pathT']+=_0x15d457;let _0x232eb8,_0x346641,_0x5e5d9d=_0xf3ae30['x'],_0x5cc562=_0xf3ae30['y'];if(_0xf3ae30['pathT']>=0x1){_0xf3ae30[_0x5c0a66(0x177)]=0x0,_0xf3ae30[_0x5c0a66(0x26c)]++;if(_0xf3ae30[_0x5c0a66(0x26c)]>=_0x37553c['length']){let _0x3c3aa4,_0x4080b9;try{_0x3c3aa4=calculateBezierPoint(0x1,_0x4b4ab2['p0']['x'],_0x4b4ab2['p1']['x'],_0x4b4ab2['p2']['x'],_0x4b4ab2['p3']['x']),_0x4080b9=calculateBezierPoint(0x1,_0x4b4ab2['p0']['y'],_0x4b4ab2['p1']['y'],_0x4b4ab2['p2']['y'],_0x4b4ab2['p3']['y']);}catch(_0xe67f43){console[_0x5c0a66(0x23b)](_0x5c0a66(0x232)+_0x7108cb+_0x5c0a66(0x1f4)+_0xf3ae30[_0x5c0a66(0x22c)],_0xe67f43),_0x3c3aa4=_0x4b4ab2['p3']['x'],_0x4080b9=_0x4b4ab2['p3']['y'];}_0xf3ae30['x']=_0x3c3aa4,_0xf3ae30['y']=_0x4080b9;try{_0xf3ae30['targetGridX']=_0xf3ae30[_0x5c0a66(0x1e5)]??gameCanvas[_0x5c0a66(0x1ba)]/0x2,_0xf3ae30['targetGridY']=_0xf3ae30[_0x5c0a66(0x1cf)]??ENEMY_TOP_MARGIN;}catch(_0x5ae004){console[_0x5c0a66(0x23b)](_0x5c0a66(0x179)+_0x7108cb+_0x5c0a66(0x1f4)+_0xf3ae30[_0x5c0a66(0x22c)],_0x5ae004),_0xf3ae30['targetGridX']=_0xf3ae30['x'],_0xf3ae30[_0x5c0a66(0x1cf)]=ENEMY_TOP_MARGIN+_0xf3ae30[_0x5c0a66(0x209)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x4a838a=_0xf3ae30[_0x5c0a66(0x180)];_0xf3ae30[_0x5c0a66(0x180)]=_0x5c0a66(0x271),_0xf3ae30[_0x5c0a66(0x1d1)]=0x0,_0xf3ae30[_0x5c0a66(0x15e)]=0x0,_0xf3ae30[_0x5c0a66(0x26c)]=0x0;_0x4a838a===_0x5c0a66(0x20a)&&_0xf3ae30[_0x5c0a66(0x25a)]!==undefined&&squadronCompletionStatus[_0xf3ae30[_0x5c0a66(0x25a)]]&&squadronCompletionStatus[_0xf3ae30[_0x5c0a66(0x25a)]]['completed']++;break;}else{const _0x498740=_0x37553c[_0xf3ae30[_0x5c0a66(0x26c)]];if(_0x498740?.['p0'])_0x232eb8=_0x498740['p0']['x'],_0x346641=_0x498740['p0']['y'];else{console[_0x5c0a66(0x23b)](_0x5c0a66(0x224)+_0xf3ae30[_0x5c0a66(0x26c)]+_0x5c0a66(0x1b2)+_0xf3ae30[_0x5c0a66(0x22c)]+_0x5c0a66(0x1a8)+_0x7108cb+_0x5c0a66(0x162));try{_0xf3ae30[_0x5c0a66(0x1e5)]=_0xf3ae30['targetGridX']??gameCanvas[_0x5c0a66(0x1ba)]/0x2,_0xf3ae30['targetGridY']=_0xf3ae30[_0x5c0a66(0x1cf)]??ENEMY_TOP_MARGIN;}catch(_0x219aff){console[_0x5c0a66(0x23b)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x7108cb+'\x20after\x20bad\x20next\x20segment',_0x219aff),_0xf3ae30[_0x5c0a66(0x1e5)]=gameCanvas[_0x5c0a66(0x1ba)]/0x2,_0xf3ae30['targetGridY']=ENEMY_TOP_MARGIN;}_0xf3ae30[_0x5c0a66(0x180)]=_0x5c0a66(0x271),_0xf3ae30[_0x5c0a66(0x177)]=0x0,_0xf3ae30[_0x5c0a66(0x26c)]=0x0,_0xf3ae30['velocityX']=0x0,_0xf3ae30[_0x5c0a66(0x15e)]=0x0;_0xf3ae30[_0x5c0a66(0x25a)]!==undefined&&squadronCompletionStatus[_0xf3ae30[_0x5c0a66(0x25a)]]&&squadronCompletionStatus[_0xf3ae30['squadronId']][_0x5c0a66(0x184)]++;break;}}}else try{_0x232eb8=calculateBezierPoint(_0xf3ae30[_0x5c0a66(0x177)],_0x4b4ab2['p0']['x'],_0x4b4ab2['p1']['x'],_0x4b4ab2['p2']['x'],_0x4b4ab2['p3']['x']),_0x346641=calculateBezierPoint(_0xf3ae30['pathT'],_0x4b4ab2['p0']['y'],_0x4b4ab2['p1']['y'],_0x4b4ab2['p2']['y'],_0x4b4ab2['p3']['y']);}catch(_0x2bb992){console[_0x5c0a66(0x23b)](_0x5c0a66(0x18f)+_0x7108cb+':',_0x2bb992);try{_0xf3ae30[_0x5c0a66(0x1e5)]=_0xf3ae30['targetGridX']??gameCanvas['width']/0x2,_0xf3ae30[_0x5c0a66(0x1cf)]=_0xf3ae30[_0x5c0a66(0x1cf)]??ENEMY_TOP_MARGIN;}catch(_0x7894e7){console[_0x5c0a66(0x23b)](_0x5c0a66(0x21e)+_0x7108cb+_0x5c0a66(0x240),_0x7894e7),_0xf3ae30[_0x5c0a66(0x1e5)]=gameCanvas['width']/0x2,_0xf3ae30[_0x5c0a66(0x1cf)]=ENEMY_TOP_MARGIN;}_0xf3ae30['state']=_0x5c0a66(0x271),_0xf3ae30[_0x5c0a66(0x177)]=0x0,_0xf3ae30[_0x5c0a66(0x26c)]=0x0,_0xf3ae30[_0x5c0a66(0x1d1)]=0x0,_0xf3ae30[_0x5c0a66(0x15e)]=0x0;_0xf3ae30['squadronId']!==undefined&&squadronCompletionStatus[_0xf3ae30[_0x5c0a66(0x25a)]]&&squadronCompletionStatus[_0xf3ae30[_0x5c0a66(0x25a)]][_0x5c0a66(0x184)]++;break;}if(_0xf3ae30&&_0xf3ae30['state']===_0x5c0a66(0x20a)){if(isNaN(_0x232eb8)||isNaN(_0x346641)){console['error'](_0x5c0a66(0x244)+_0x7108cb+_0x5c0a66(0x162));try{_0xf3ae30[_0x5c0a66(0x1e5)]=_0xf3ae30[_0x5c0a66(0x1e5)]??gameCanvas[_0x5c0a66(0x1ba)]/0x2,_0xf3ae30[_0x5c0a66(0x1cf)]=_0xf3ae30[_0x5c0a66(0x1cf)]??ENEMY_TOP_MARGIN;}catch(_0x42c9d0){console['error']('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x7108cb+'\x20after\x20NaN',_0x42c9d0),_0xf3ae30[_0x5c0a66(0x1e5)]=gameCanvas[_0x5c0a66(0x1ba)]/0x2,_0xf3ae30[_0x5c0a66(0x1cf)]=ENEMY_TOP_MARGIN;}_0xf3ae30['state']=_0x5c0a66(0x271),_0xf3ae30[_0x5c0a66(0x177)]=0x0,_0xf3ae30[_0x5c0a66(0x26c)]=0x0,_0xf3ae30['velocityX']=0x0,_0xf3ae30[_0x5c0a66(0x15e)]=0x0,_0xf3ae30[_0x5c0a66(0x25a)]!==undefined&&squadronCompletionStatus[_0xf3ae30[_0x5c0a66(0x25a)]]&&squadronCompletionStatus[_0xf3ae30['squadronId']][_0x5c0a66(0x184)]++;}else{let _0x428724=_0x232eb8;const _0x33759d=currentWavePatternIndex===0x1&&(_0xf3ae30[_0x5c0a66(0x25a)]===0x2||_0xf3ae30['squadronId']===0x3),_0x577d81=typeof _0xf3ae30[_0x5c0a66(0x265)]===_0x5c0a66(0x212)&&_0xf3ae30[_0x5c0a66(0x265)]%0x2!==0x0;if(_0x33759d&&_0x577d81){const _0x5a9714=_0x5aeaac+ENTRANCE_PAIR_HORIZONTAL_GAP;_0x428724=_0x232eb8+_0x5a9714;}_0xf3ae30[_0x5c0a66(0x1d1)]=_0x428724-_0x5e5d9d,_0xf3ae30['velocityY']=_0x346641-_0x5cc562,_0xf3ae30['x']=_0x428724,_0xf3ae30['y']=_0x346641;}}break;}case _0x5c0a66(0x271):{if(_0xf3ae30['targetGridX']==null||_0xf3ae30['targetGridY']==null){console[_0x5c0a66(0x16a)](_0x5c0a66(0x188)+_0x7108cb+_0x5c0a66(0x228));try{const {x:_0x53f7ce,y:_0x562d70}=getCurrentGridSlotPosition(_0xf3ae30['gridRow'],_0xf3ae30[_0x5c0a66(0x1c8)],_0x5aeaac);_0xf3ae30[_0x5c0a66(0x1e5)]=_0x53f7ce,_0xf3ae30[_0x5c0a66(0x1cf)]=_0x562d70;}catch(_0x5d6f1c){console[_0x5c0a66(0x23b)](_0x5c0a66(0x21e)+_0x7108cb+_0x5c0a66(0x239),_0x5d6f1c),_0xf3ae30[_0x5c0a66(0x180)]='in_grid',_0xf3ae30['x']=gameCanvas['width']/0x2,_0xf3ae30['y']=ENEMY_TOP_MARGIN;break;}}const _0x2423b7=_0xf3ae30[_0x5c0a66(0x1e5)],_0x287766=_0xf3ae30[_0x5c0a66(0x1cf)],_0x78d3c7=_0x2423b7-_0xf3ae30['x'],_0x10cd06=_0x287766-_0xf3ae30['y'],_0x176011=Math[_0x5c0a66(0x1ac)](_0x78d3c7*_0x78d3c7+_0x10cd06*_0x10cd06),_0x499cd6=ENTRANCE_SPEED*1.2,_0x300880=_0x499cd6*0.5;if(_0x176011>_0x300880)_0xf3ae30[_0x5c0a66(0x1d1)]=_0x78d3c7/_0x176011*_0x499cd6,_0xf3ae30['velocityY']=_0x10cd06/_0x176011*_0x499cd6,_0xf3ae30['x']+=_0xf3ae30[_0x5c0a66(0x1d1)],_0xf3ae30['y']+=_0xf3ae30[_0x5c0a66(0x15e)];else{_0xf3ae30['x']=_0x2423b7,_0xf3ae30['y']=_0x287766,_0xf3ae30['velocityX']=0x0,_0xf3ae30[_0x5c0a66(0x15e)]=0x0;const _0x3b0908=_0xf3ae30[_0x5c0a66(0x180)];_0xf3ae30[_0x5c0a66(0x180)]=_0x5c0a66(0x1c1),_0xf3ae30[_0x5c0a66(0x201)]=![];!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound));GRID_BREATH_ENABLED&&!isGridBreathingActive&&!isChallengingStage&&(isGridBreathingActive=!![],gridBreathStartTime=_0x1362b6,currentGridBreathFactor=0x0);!firstEnemyLanded&&!isFullGridWave&&!isChallengingStage&&(lastGridFireCheckTime=Date[_0x5c0a66(0x1e7)](),firstEnemyLanded=!![]);if(_0x3b0908==='moving_to_grid'&&!isChallengingStage&&!isFullGridWave&&_0xf3ae30[_0x5c0a66(0x25a)]!==undefined){const _0x322e48=_0xf3ae30['squadronId'],_0x58ceb0=squadronCompletionStatus[_0x322e48];if(_0x58ceb0&&!_0x58ceb0[_0x5c0a66(0x256)]){const _0x1f8836=enemies[_0x5c0a66(0x1f2)](_0x32bc59=>{const _0x1d9833=_0x5c0a66;if(_0x32bc59&&_0x32bc59[_0x1d9833(0x25a)]===_0x322e48)return _0x32bc59[_0x1d9833(0x180)]==='in_grid'||!enemies[_0x1d9833(0x18d)](_0x12a5b2=>_0x12a5b2['id']===_0x32bc59['id']);return!![];});if(_0x1f8836){_0x58ceb0[_0x5c0a66(0x256)]=!![];const _0x40be88=enemies[_0x5c0a66(0x189)](_0x1c1662=>_0x1c1662&&_0x1c1662[_0x5c0a66(0x25a)]===_0x322e48&&_0x1c1662[_0x5c0a66(0x180)]==='in_grid'&&(_0x1c1662[_0x5c0a66(0x226)]===ENEMY2_TYPE||_0x1c1662['type']===ENEMY3_TYPE)&&!(_0x1c1662[_0x5c0a66(0x226)]===ENEMY3_TYPE&&_0x1c1662[_0x5c0a66(0x26f)]));if(_0x40be88[_0x5c0a66(0x172)]>0x0){const _0x5a6b0a=_0x40be88[Math[_0x5c0a66(0x185)](Math[_0x5c0a66(0x1f7)]()*_0x40be88['length'])],_0x55cd31=_0x5a6b0a['id'],_0x5d81d8=0xc8+Math[_0x5c0a66(0x1f7)]()*0x190,_0x231ec1=setTimeout(()=>{const _0x4126a2=_0x5c0a66;try{const _0x38fbd3=enemySpawnTimeouts[_0x4126a2(0x223)](_0x231ec1);if(_0x38fbd3>-0x1)enemySpawnTimeouts[_0x4126a2(0x19d)](_0x38fbd3,0x1);if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x322386=enemies[_0x4126a2(0x1e1)](_0x592477=>_0x592477&&_0x592477['id']===_0x55cd31);_0x322386&&_0x322386[_0x4126a2(0x180)]===_0x4126a2(0x1c1)&&(createBulletSimple(_0x322386)&&(playSound(enemyShootSound),_0x322386[_0x4126a2(0x1ee)]=Date['now']()));}catch(_0x1b8362){console[_0x4126a2(0x23b)](_0x4126a2(0x1cb)+_0x55cd31+':',_0x1b8362);}},_0x5d81d8);enemySpawnTimeouts[_0x5c0a66(0x1b6)](_0x231ec1);}}}}}break;}case'in_grid':{typeof _0xf3ae30['targetGridX']===_0x5c0a66(0x212)&&!isNaN(_0xf3ae30[_0x5c0a66(0x1e5)])&&(_0xf3ae30['x']=_0xf3ae30[_0x5c0a66(0x1e5)]);typeof _0xf3ae30['targetGridY']===_0x5c0a66(0x212)&&!isNaN(_0xf3ae30[_0x5c0a66(0x1cf)])&&(_0xf3ae30['y']=_0xf3ae30[_0x5c0a66(0x1cf)]);_0xf3ae30['velocityX']=isGridSoundPlaying?_0x56e595:0x0,_0xf3ae30[_0x5c0a66(0x15e)]=0x0;_0xf3ae30['type']===ENEMY3_TYPE&&_0xf3ae30[_0x5c0a66(0x26f)]&&_0xf3ae30[_0x5c0a66(0x16c)]&&(_0xf3ae30[_0x5c0a66(0x1ca)]=_0xf3ae30['x']+CAPTURED_SHIP_OFFSET_X,_0xf3ae30[_0x5c0a66(0x1eb)]=_0xf3ae30['y']+CAPTURED_SHIP_OFFSET_Y);break;}case _0x5c0a66(0x245):{_0xf3ae30[_0x5c0a66(0x1d1)]=0x0,_0xf3ae30[_0x5c0a66(0x15e)]=0x0;break;}case'preparing_capture':{_0xf3ae30[_0x5c0a66(0x1d1)]=0x0,_0xf3ae30[_0x5c0a66(0x15e)]=0x0;break;}case _0x5c0a66(0x1ed):{if(isShipCaptured){_0xf3ae30[_0x5c0a66(0x180)]='returning';try{const {x:_0x1cb7fd,y:_0x1ecbe5}=getCurrentGridSlotPosition(_0xf3ae30[_0x5c0a66(0x209)],_0xf3ae30[_0x5c0a66(0x1c8)],_0x5aeaac);_0xf3ae30[_0x5c0a66(0x1e5)]=_0x1cb7fd,_0xf3ae30[_0x5c0a66(0x1cf)]=_0x1ecbe5;}catch(_0x2bd122){console[_0x5c0a66(0x23b)](_0x5c0a66(0x24f)+_0xf3ae30['id']+':',_0x2bd122),_0xf3ae30[_0x5c0a66(0x1e5)]=gameCanvas['width']/0x2,_0xf3ae30[_0x5c0a66(0x1cf)]=ENEMY_TOP_MARGIN;}break;}const _0x3852e7=_0xf3ae30[_0x5c0a66(0x17f)],_0x5b6a1d=_0xf3ae30['targetY'];if(_0x3852e7==null||_0x5b6a1d==null){console[_0x5c0a66(0x23b)](_0x5c0a66(0x17c)+_0xf3ae30['id']+_0x5c0a66(0x22a)),_0xf3ae30['state']=_0x5c0a66(0x1db);try{const {x:_0x5c7d55,y:_0x50bdf4}=getCurrentGridSlotPosition(_0xf3ae30[_0x5c0a66(0x209)],_0xf3ae30[_0x5c0a66(0x1c8)],_0x5aeaac);_0xf3ae30[_0x5c0a66(0x1e5)]=_0x5c7d55,_0xf3ae30['targetGridY']=_0x50bdf4;}catch(_0xae6e4d){console[_0x5c0a66(0x23b)](_0x5c0a66(0x24f)+_0xf3ae30['id']+':',_0xae6e4d),_0xf3ae30[_0x5c0a66(0x1e5)]=gameCanvas[_0x5c0a66(0x1ba)]/0x2,_0xf3ae30[_0x5c0a66(0x1cf)]=ENEMY_TOP_MARGIN;}break;}const _0x643555=_0x3852e7-_0xf3ae30['x'],_0x4ac797=_0x5b6a1d-_0xf3ae30['y'],_0x477daa=Math[_0x5c0a66(0x1ac)](_0x643555*_0x643555+_0x4ac797*_0x4ac797),_0x28454c=BOSS_CAPTURE_DIVE_SPEED_FACTOR*BASE_ENEMY_ATTACK_SPEED,_0x526f54=_0x28454c*0.6;_0x477daa>_0x526f54?(_0xf3ae30['velocityX']=_0x643555/_0x477daa*_0x28454c,_0xf3ae30[_0x5c0a66(0x15e)]=_0x4ac797/_0x477daa*_0x28454c,_0xf3ae30['x']+=_0xf3ae30['velocityX'],_0xf3ae30['y']+=_0xf3ae30['velocityY']):(_0xf3ae30['x']=_0x3852e7,_0xf3ae30['y']=_0x5b6a1d,_0xf3ae30[_0x5c0a66(0x1d1)]=0x0,_0xf3ae30['velocityY']=0x0,_0xf3ae30[_0x5c0a66(0x180)]='capturing',_0xf3ae30[_0x5c0a66(0x237)]=_0x1362b6,capturingBossId=_0xf3ae30['id'],captureBeamActive=!![],captureBeamSource={'x':_0xf3ae30['x']+_0x5aeaac/0x2,'y':_0xf3ae30['y']+_0x2f37b0},captureBeamTargetY=_0xf3ae30['y'],captureBeamProgress=0x0,playSound(captureSound));break;}case _0x5c0a66(0x1ce):{_0xf3ae30[_0x5c0a66(0x1d1)]=0x0,_0xf3ae30['velocityY']=0x0;if(isShipCaptured&&_0xf3ae30['id']!==capturedBossIdWithMessage){console[_0x5c0a66(0x16a)](_0x5c0a66(0x1a3)+_0xf3ae30['id']+_0x5c0a66(0x248)+capturedBossIdWithMessage+_0x5c0a66(0x25d)),captureBeamActive=![];if(capturingBossId===_0xf3ae30['id'])capturingBossId=null;_0xf3ae30[_0x5c0a66(0x180)]=_0x5c0a66(0x1db);try{const {x:_0x3715c0,y:_0x1075d7}=getCurrentGridSlotPosition(_0xf3ae30[_0x5c0a66(0x209)],_0xf3ae30[_0x5c0a66(0x1c8)],_0x5aeaac);_0xf3ae30['targetGridX']=_0x3715c0,_0xf3ae30[_0x5c0a66(0x1cf)]=_0x1075d7;}catch(_0x572ba2){console[_0x5c0a66(0x23b)](_0x5c0a66(0x24f)+_0xf3ae30['id']+':',_0x572ba2),_0xf3ae30[_0x5c0a66(0x1e5)]=gameCanvas['width']/0x2,_0xf3ae30[_0x5c0a66(0x1cf)]=ENEMY_TOP_MARGIN;}stopSound(captureSound);break;}const _0x4ddc02=_0x1362b6-_0xf3ae30['captureStartTime'],_0x680d32=CAPTURE_BEAM_ANIMATION_DURATION_MS/0x2,_0x4251cc=CAPTURE_BEAM_DURATION_MS;if(_0x4ddc02<_0x680d32)captureBeamProgress=_0x4ddc02/_0x680d32;else{if(_0x4ddc02<_0x4251cc-_0x680d32)captureBeamProgress=0x1;else{if(_0x4ddc02<_0x4251cc)captureBeamProgress=0x1-(_0x4ddc02-(_0x4251cc-_0x680d32))/_0x680d32;else{captureBeamProgress=0x0,captureBeamActive=![],capturingBossId=null,stopSound(captureSound),_0xf3ae30['state']=_0x5c0a66(0x253),_0xf3ae30['attackPathSegments']=generateAttackPath(_0xf3ae30),_0xf3ae30[_0x5c0a66(0x218)]=0x0,_0xf3ae30[_0x5c0a66(0x238)]=0x0,_0xf3ae30['speed']=BASE_ENEMY_ATTACK_SPEED*ENEMY3_ATTACK_SPEED_FACTOR,_0xf3ae30[_0x5c0a66(0x1ee)]=0x0,_0xf3ae30[_0x5c0a66(0x1bd)]=!![],_0xf3ae30[_0x5c0a66(0x230)]=0x0,_0xf3ae30[_0x5c0a66(0x22e)]=null;break;}}}captureBeamProgress=Math[_0x5c0a66(0x225)](0x0,Math['min'](0x1,captureBeamProgress));if(ship&&captureBeamActive&&captureBeamProgress>=0.95&&!isShipCaptured&&!isInvincible){const _0x9b5f85=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x2460c9=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR,_0xeeced9=_0xf3ae30['x']+_0x5aeaac/0x2,_0x2cdc09=_0xf3ae30['y']+_0x2f37b0,_0x3a36f9=gameCanvas[_0x5c0a66(0x16d)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x3e3004=Math[_0x5c0a66(0x225)](_0x9b5f85,_0x2460c9),_0x2940c4=_0xeeced9-_0x3e3004/0x2,_0x3f72b8=_0x2cdc09,_0x39baec=_0x3a36f9-_0x2cdc09;if(_0x39baec>0x0){const _0x589e65={'x':_0x2940c4,'y':_0x3f72b8,'width':_0x3e3004,'height':_0x39baec},_0x104a16={'x':ship['x'],'y':ship['y'],'width':ship[_0x5c0a66(0x1ba)],'height':ship[_0x5c0a66(0x16d)]};if(checkCollision(_0x104a16,_0x589e65)){isShipCaptured=!![],_0xf3ae30[_0x5c0a66(0x16c)]={'width':ship['width'],'height':ship[_0x5c0a66(0x16d)]},_0xf3ae30[_0x5c0a66(0x26f)]=!![],stopSound(captureSound),_0xf3ae30[_0x5c0a66(0x180)]=_0x5c0a66(0x1fd),_0xf3ae30[_0x5c0a66(0x1e5)]=null,_0xf3ae30[_0x5c0a66(0x1cf)]=null,_0xf3ae30[_0x5c0a66(0x20f)]=ship['y'],_0xf3ae30[_0x5c0a66(0x268)]=0x0,isShowingCaptureMessage=!![],captureMessageStartTime=_0x1362b6,capturedBossIdWithMessage=_0xf3ae30['id'],playSound(shipCapturedSound);const _0x5dc57=currentPlayer;playerLives--,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![];if(playerLives<=0x0){if(_0x5dc57===0x1)player1Lives=0x0;if(_0x5dc57===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x1362b6,playerWhoIsGameOver=_0x5dc57;const _0x2a350b=_0x5dc57===0x1?0x2:0x1,_0x52ca38=_0x2a350b===0x1?player1Lives:player2Lives;_0x52ca38>0x0?nextActionAfterPlayerGameOver=_0x5c0a66(0x1ef):nextActionAfterPlayerGameOver=_0x5c0a66(0x15d);bullets=[],enemyBullets=[],explosions=[],fallingShips=[],isDualShipActive=![];if(_0x5dc57===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(_0x5dc57===0x1)player1Lives=playerLives;else player2Lives=playerLives;}ship&&gameCanvas&&(ship['y']=gameCanvas[_0x5c0a66(0x16d)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])),(!isManualControl||isTwoPlayerMode)&&(forceCenterShipNextReset=!![]),isShipCaptured=![],isInvincible=!![],invincibilityEndTime=_0x1362b6+INVINCIBILITY_DURATION_MS;}}}else console['warn']('Beam\x20collision\x20box\x20has\x20invalid\x20height:',_0x39baec);}break;}case _0x5c0a66(0x1fd):{_0xf3ae30[_0x5c0a66(0x1d1)]=0x0,_0xf3ae30[_0x5c0a66(0x15e)]=0x0;if(_0xf3ae30[_0x5c0a66(0x26f)]&&_0xf3ae30[_0x5c0a66(0x16c)]&&typeof _0xf3ae30[_0x5c0a66(0x20f)]===_0x5c0a66(0x212)){const _0x459e03=_0x1362b6-captureMessageStartTime,_0x71dcaa=Math[_0x5c0a66(0x1a1)](0x1,_0x459e03/CAPTURE_MESSAGE_DURATION),_0x22ef2d=_0xf3ae30['y']+CAPTURED_SHIP_OFFSET_Y,_0x5b1901=_0xf3ae30[_0x5c0a66(0x20f)];_0xf3ae30[_0x5c0a66(0x1eb)]=_0x5b1901+(_0x22ef2d-_0x5b1901)*_0x71dcaa,_0xf3ae30[_0x5c0a66(0x1ca)]=_0xf3ae30['x']+CAPTURED_SHIP_OFFSET_X;}else _0xf3ae30[_0x5c0a66(0x1ca)]=_0xf3ae30['x']+CAPTURED_SHIP_OFFSET_X,_0xf3ae30[_0x5c0a66(0x1eb)]=_0xf3ae30['y']+CAPTURED_SHIP_OFFSET_Y;break;}case _0x5c0a66(0x253):{if(isEntrancePhaseActive)break;const _0x364661=_0xf3ae30[_0x5c0a66(0x242)],_0x5072b5=3.8;if(!_0x364661||_0x364661[_0x5c0a66(0x172)]===0x0){console['error'](_0x5c0a66(0x188)+_0x7108cb+_0x5c0a66(0x1bc)),_0xf3ae30[_0x5c0a66(0x180)]=_0x5c0a66(0x1db);try{const {x:_0x347b68,y:_0x2e7fe7}=getCurrentGridSlotPosition(_0xf3ae30[_0x5c0a66(0x209)],_0xf3ae30['gridCol'],_0x5aeaac);_0xf3ae30[_0x5c0a66(0x1e5)]=_0x347b68,_0xf3ae30['targetGridY']=_0x2e7fe7;}catch(_0x458585){console[_0x5c0a66(0x23b)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x7108cb+_0x5c0a66(0x1c6),_0x458585),_0xf3ae30[_0x5c0a66(0x1e5)]=gameCanvas[_0x5c0a66(0x1ba)]/0x2,_0xf3ae30[_0x5c0a66(0x1cf)]=ENEMY_TOP_MARGIN;}break;}if(_0xf3ae30['attackPathSegmentIndex']>=_0x364661[_0x5c0a66(0x172)]){console[_0x5c0a66(0x16a)](_0x5c0a66(0x188)+_0x7108cb+'\x20attacking,\x20index\x20'+_0xf3ae30[_0x5c0a66(0x218)]+_0x5c0a66(0x195)+_0x364661['length']+_0x5c0a66(0x191)),_0xf3ae30[_0x5c0a66(0x180)]=_0x5c0a66(0x1db);try{const {x:_0x325d0b,y:_0x5e0ade}=getCurrentGridSlotPosition(_0xf3ae30[_0x5c0a66(0x209)],_0xf3ae30[_0x5c0a66(0x1c8)],_0x5aeaac);_0xf3ae30['targetGridX']=_0x325d0b,_0xf3ae30[_0x5c0a66(0x1cf)]=_0x5e0ade;}catch(_0x119f22){console[_0x5c0a66(0x23b)](_0x5c0a66(0x16f)+_0x7108cb+_0x5c0a66(0x23d),_0x119f22),_0xf3ae30[_0x5c0a66(0x1e5)]=gameCanvas[_0x5c0a66(0x1ba)]/0x2,_0xf3ae30[_0x5c0a66(0x1cf)]=ENEMY_TOP_MARGIN;}break;}const _0x117445=_0x364661[_0xf3ae30[_0x5c0a66(0x218)]];if(!_0x117445||!_0x117445['p0']||!_0x117445['p1']||!_0x117445['p2']||!_0x117445['p3']){console['error']('Enemy\x20'+_0x7108cb+'\x20attacking,\x20invalid\x20segment\x20'+_0xf3ae30[_0x5c0a66(0x218)]+_0x5c0a66(0x1f0)),_0xf3ae30[_0x5c0a66(0x180)]=_0x5c0a66(0x1db);try{const {x:_0x2b4801,y:_0x4f4c53}=getCurrentGridSlotPosition(_0xf3ae30[_0x5c0a66(0x209)],_0xf3ae30[_0x5c0a66(0x1c8)],_0x5aeaac);_0xf3ae30[_0x5c0a66(0x1e5)]=_0x2b4801,_0xf3ae30[_0x5c0a66(0x1cf)]=_0x4f4c53;}catch(_0x57be0d){console[_0x5c0a66(0x23b)](_0x5c0a66(0x16f)+_0x7108cb+_0x5c0a66(0x263),_0x57be0d),_0xf3ae30['targetGridX']=gameCanvas[_0x5c0a66(0x1ba)]/0x2,_0xf3ae30[_0x5c0a66(0x1cf)]=ENEMY_TOP_MARGIN;}break;}const _0x2f0c39=_0xf3ae30[_0x5c0a66(0x166)]/0x3e8*_0x5072b5;_0xf3ae30[_0x5c0a66(0x238)]+=_0x2f0c39;let _0x208dd5,_0x58a93e;const _0xa9bf4a=_0xf3ae30['x'],_0x5ddb68=_0xf3ae30['y'];if(_0xf3ae30[_0x5c0a66(0x238)]>=0x1){try{_0x208dd5=calculateBezierPoint(0x1,_0x117445['p0']['x'],_0x117445['p1']['x'],_0x117445['p2']['x'],_0x117445['p3']['x']),_0x58a93e=calculateBezierPoint(0x1,_0x117445['p0']['y'],_0x117445['p1']['y'],_0x117445['p2']['y'],_0x117445['p3']['y']);}catch(_0x51aeda){console[_0x5c0a66(0x23b)](_0x5c0a66(0x192)+_0xf3ae30['id']+':',_0x51aeda),_0x208dd5=_0xf3ae30['x'],_0x58a93e=_0xf3ae30['y'],_0xf3ae30[_0x5c0a66(0x180)]=_0x5c0a66(0x1db);try{const {x:_0xa0acfa,y:_0x23b05e}=getCurrentGridSlotPosition(_0xf3ae30[_0x5c0a66(0x209)],_0xf3ae30[_0x5c0a66(0x1c8)],_0x5aeaac);_0xf3ae30['targetGridX']=_0xa0acfa,_0xf3ae30[_0x5c0a66(0x1cf)]=_0x23b05e;}catch(_0xd2e556){console[_0x5c0a66(0x23b)]('Error\x20getting\x20grid\x20pos\x20after\x20FINAL\x20bezier\x20error\x20for\x20'+_0xf3ae30['id']+':',_0xd2e556),_0xf3ae30[_0x5c0a66(0x1e5)]=gameCanvas[_0x5c0a66(0x1ba)]/0x2,_0xf3ae30['targetGridY']=ENEMY_TOP_MARGIN;}break;}_0xf3ae30[_0x5c0a66(0x238)]=0x0,_0xf3ae30['attackPathSegmentIndex']++;if(_0xf3ae30[_0x5c0a66(0x218)]>=_0x364661[_0x5c0a66(0x172)]){_0xf3ae30[_0x5c0a66(0x180)]='returning',_0xf3ae30[_0x5c0a66(0x1ee)]=0x0,_0xf3ae30[_0x5c0a66(0x230)]=0x0,_0xf3ae30['attackGroupId']=null;try{const {x:_0x252ed3,y:_0x3fa1c0}=getCurrentGridSlotPosition(_0xf3ae30[_0x5c0a66(0x209)],_0xf3ae30[_0x5c0a66(0x1c8)],_0x5aeaac);_0xf3ae30[_0x5c0a66(0x1e5)]=_0x252ed3,_0xf3ae30[_0x5c0a66(0x1cf)]=_0x3fa1c0;}catch(_0x1f1191){console[_0x5c0a66(0x23b)](_0x5c0a66(0x16f)+_0x7108cb+_0x5c0a66(0x1d2),_0x1f1191),_0xf3ae30['targetGridX']=gameCanvas['width']/0x2,_0xf3ae30[_0x5c0a66(0x1cf)]=ENEMY_TOP_MARGIN;}}else{const _0x6d0f0d=_0x364661[_0xf3ae30[_0x5c0a66(0x218)]];if(!_0x6d0f0d?.['p0']){console[_0x5c0a66(0x23b)]('Enemy\x20'+_0x7108cb+_0x5c0a66(0x23a)+_0xf3ae30['attackPathSegmentIndex']+'!\x20Returning.'),_0x208dd5=_0xf3ae30['x'],_0x58a93e=_0xf3ae30['y'],_0xf3ae30[_0x5c0a66(0x180)]=_0x5c0a66(0x1db);try{const {x:_0x4809b9,y:_0x352397}=getCurrentGridSlotPosition(_0xf3ae30[_0x5c0a66(0x209)],_0xf3ae30[_0x5c0a66(0x1c8)],_0x5aeaac);_0xf3ae30[_0x5c0a66(0x1e5)]=_0x4809b9,_0xf3ae30[_0x5c0a66(0x1cf)]=_0x352397;}catch(_0x12f707){console[_0x5c0a66(0x23b)]('Error\x20getting\x20grid\x20pos\x20after\x20invalid\x20NEXT\x20attack\x20segment\x20for\x20'+_0xf3ae30['id']+':',_0x12f707),_0xf3ae30[_0x5c0a66(0x1e5)]=gameCanvas[_0x5c0a66(0x1ba)]/0x2,_0xf3ae30[_0x5c0a66(0x1cf)]=ENEMY_TOP_MARGIN;}break;}}}else try{_0x208dd5=calculateBezierPoint(_0xf3ae30[_0x5c0a66(0x238)],_0x117445['p0']['x'],_0x117445['p1']['x'],_0x117445['p2']['x'],_0x117445['p3']['x']),_0x58a93e=calculateBezierPoint(_0xf3ae30[_0x5c0a66(0x238)],_0x117445['p0']['y'],_0x117445['p1']['y'],_0x117445['p2']['y'],_0x117445['p3']['y']);}catch(_0x36da84){console[_0x5c0a66(0x23b)](_0x5c0a66(0x21a)+_0xf3ae30['id']+':',_0x36da84),_0x208dd5=_0xf3ae30['x'],_0x58a93e=_0xf3ae30['y'],_0xf3ae30['state']=_0x5c0a66(0x1db);try{const {x:_0x5430e8,y:_0x460fac}=getCurrentGridSlotPosition(_0xf3ae30['gridRow'],_0xf3ae30[_0x5c0a66(0x1c8)],_0x5aeaac);_0xf3ae30[_0x5c0a66(0x1e5)]=_0x5430e8,_0xf3ae30['targetGridY']=_0x460fac;}catch(_0x4577c7){console['error'](_0x5c0a66(0x20d)+_0xf3ae30['id']+':',_0x4577c7),_0xf3ae30[_0x5c0a66(0x1e5)]=gameCanvas[_0x5c0a66(0x1ba)]/0x2,_0xf3ae30[_0x5c0a66(0x1cf)]=ENEMY_TOP_MARGIN;}break;}if(_0xf3ae30&&_0xf3ae30['state']===_0x5c0a66(0x253)){const _0x5488a1=_0xf3ae30[_0x5c0a66(0x230)]||0x0,_0x41a0e2=_0x208dd5+_0x5488a1,_0x523380=_0x58a93e;_0xf3ae30[_0x5c0a66(0x1d1)]=_0x41a0e2-_0xa9bf4a,_0xf3ae30[_0x5c0a66(0x15e)]=_0x523380-_0x5ddb68,_0xf3ae30['x']=_0x41a0e2,_0xf3ae30['y']=_0x523380;if(_0xf3ae30['y']>gameCanvas[_0x5c0a66(0x16d)]+_0x2f37b0*1.5){_0xf3ae30[_0x5c0a66(0x180)]='returning',_0xf3ae30[_0x5c0a66(0x218)]=0x0,_0xf3ae30[_0x5c0a66(0x238)]=0x0,_0xf3ae30['lastFiredTime']=0x0,_0xf3ae30[_0x5c0a66(0x230)]=0x0,_0xf3ae30[_0x5c0a66(0x22e)]=null,_0xf3ae30['y']=-_0x2f37b0*(1.1+Math['random']()*0.4),_0xf3ae30['x']=Math[_0x5c0a66(0x1f7)]()*(gameCanvas[_0x5c0a66(0x1ba)]-_0x5aeaac),_0xf3ae30[_0x5c0a66(0x1d1)]=0x0,_0xf3ae30[_0x5c0a66(0x15e)]=0x0;try{const {x:_0xc23a15,y:_0x2ecddf}=getCurrentGridSlotPosition(_0xf3ae30['gridRow'],_0xf3ae30[_0x5c0a66(0x1c8)],_0x5aeaac);_0xf3ae30[_0x5c0a66(0x1e5)]=_0xc23a15,_0xf3ae30[_0x5c0a66(0x1cf)]=_0x2ecddf;}catch(_0x400247){console[_0x5c0a66(0x23b)](_0x5c0a66(0x16f)+_0x7108cb+_0x5c0a66(0x1e9),_0x400247),_0xf3ae30[_0x5c0a66(0x1e5)]=gameCanvas[_0x5c0a66(0x1ba)]/0x2,_0xf3ae30[_0x5c0a66(0x1cf)]=ENEMY_TOP_MARGIN;}}}break;}case _0x5c0a66(0x1db):{if(isEntrancePhaseActive)break;if(_0xf3ae30[_0x5c0a66(0x1e5)]==null||_0xf3ae30[_0x5c0a66(0x1cf)]==null){console[_0x5c0a66(0x16a)](_0x5c0a66(0x188)+_0x7108cb+_0x5c0a66(0x24e));try{const {x:_0x4a1b54,y:_0x594fa3}=getCurrentGridSlotPosition(_0xf3ae30[_0x5c0a66(0x209)],_0xf3ae30[_0x5c0a66(0x1c8)],_0x5aeaac);_0xf3ae30[_0x5c0a66(0x1e5)]=_0x4a1b54,_0xf3ae30[_0x5c0a66(0x1cf)]=_0x594fa3;}catch(_0x25b802){console[_0x5c0a66(0x23b)](_0x5c0a66(0x21e)+_0x7108cb+_0x5c0a66(0x1f1),_0x25b802),_0xf3ae30[_0x5c0a66(0x180)]=_0x5c0a66(0x1c1),_0xf3ae30['x']=gameCanvas[_0x5c0a66(0x1ba)]/0x2,_0xf3ae30['y']=ENEMY_TOP_MARGIN;break;}}const _0xfc18ec=_0xf3ae30[_0x5c0a66(0x1e5)],_0x13a2a1=_0xf3ae30[_0x5c0a66(0x1cf)],_0x45afca=_0xfc18ec-_0xf3ae30['x'],_0x281846=_0x13a2a1-_0xf3ae30['y'],_0x2f5387=Math[_0x5c0a66(0x1ac)](_0x45afca*_0x45afca+_0x281846*_0x281846),_0x97704b=scaleValue(level,BASE_RETURN_SPEED_FACTOR,MAX_RETURN_SPEED_FACTOR),_0x46dd0f=BASE_RETURN_SPEED*_0x97704b,_0x76f681=_0x46dd0f*0.5;_0x2f5387>_0x76f681?(_0xf3ae30[_0x5c0a66(0x1d1)]=_0x45afca/_0x2f5387*_0x46dd0f,_0xf3ae30[_0x5c0a66(0x15e)]=_0x281846/_0x2f5387*_0x46dd0f,_0xf3ae30['x']+=_0xf3ae30[_0x5c0a66(0x1d1)],_0xf3ae30['y']+=_0xf3ae30[_0x5c0a66(0x15e)]):(_0xf3ae30['x']=_0xfc18ec,_0xf3ae30['y']=_0x13a2a1,_0xf3ae30['velocityX']=0x0,_0xf3ae30[_0x5c0a66(0x15e)]=0x0,_0xf3ae30[_0x5c0a66(0x180)]=_0x5c0a66(0x1c1),_0xf3ae30[_0x5c0a66(0x201)]=!![],_0xf3ae30['attackFormationOffsetX']=0x0,_0xf3ae30[_0x5c0a66(0x22e)]=null,_0xf3ae30[_0x5c0a66(0x164)](_0x5c0a66(0x167))&&delete _0xf3ae30[_0x5c0a66(0x167)],!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound)));break;}}if(_0xf3ae30&&!isShowingPlayerGameOverMessage&&!(isShipCaptured&&_0xf3ae30[_0x5c0a66(0x180)]==='capturing')){const _0x22452b={'x':0x0,'y':0x0,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT},_0x392d57={'x':_0xf3ae30['x'],'y':_0xf3ae30['y'],'width':_0x5aeaac,'height':_0x2f37b0};for(let _0x1ba779=bullets[_0x5c0a66(0x172)]-0x1;_0x1ba779>=0x0;_0x1ba779--){const _0x19d2a7=bullets[_0x1ba779];if(!_0x19d2a7)continue;_0x22452b['x']=_0x19d2a7['x'],_0x22452b['y']=_0x19d2a7['y'];if(checkCollision(_0x22452b,_0x392d57)){const _0x4b18e8=handleEnemyHit(_0xf3ae30);bullets['splice'](_0x1ba779,0x1);if(_0x4b18e8['destroyed']){enemies[_0x5c0a66(0x19d)](_0x5413cc,0x1),_0xf3ae30=null;break;}}}}if(_0xf3ae30&&ship&&!isShipCaptured&&!isWaitingForRespawn&&!isShowingPlayerGameOverMessage&&!isInvincible){const _0x92a811=[_0x5c0a66(0x253),_0x5c0a66(0x20a),_0x5c0a66(0x174),_0x5c0a66(0x1ed)];if(_0x92a811[_0x5c0a66(0x1be)](_0xf3ae30[_0x5c0a66(0x180)])){const _0x2aa8ef={'x':_0xf3ae30['x'],'y':_0xf3ae30['y'],'width':_0x5aeaac,'height':_0x2f37b0},_0x33cb67={'x':ship['x'],'y':ship['y'],'width':ship[_0x5c0a66(0x1ba)],'height':ship[_0x5c0a66(0x16d)]},_0x5cc011=isDualShipActive?{'x':ship['x']+DUAL_SHIP_OFFSET_X,'y':ship['y'],'width':ship[_0x5c0a66(0x1ba)],'height':ship[_0x5c0a66(0x16d)]}:null;let _0x3c7f68=![],_0x5499b7=![];if(checkCollision(_0x2aa8ef,_0x33cb67))_0x3c7f68=!![],_0x5499b7=![];else _0x5cc011&&checkCollision(_0x2aa8ef,_0x5cc011)&&(_0x3c7f68=!![],_0x5499b7=!![]);if(_0x3c7f68){createExplosion(_0xf3ae30['x']+_0x5aeaac/0x2,_0xf3ae30['y']+_0x2f37b0/0x2),playSound(lostLifeSound),enemies['splice'](_0x5413cc,0x1),_0xf3ae30=null;if(isDualShipActive){isDualShipActive=![];if(currentPlayer===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];_0x5499b7?createExplosion(_0x5cc011['x']+ship[_0x5c0a66(0x1ba)]/0x2,_0x5cc011['y']+ship['height']/0x2):createExplosion(_0x33cb67['x']+ship[_0x5c0a66(0x1ba)]/0x2,_0x33cb67['y']+ship[_0x5c0a66(0x16d)]/0x2),isInvincible=!![],invincibilityEndTime=_0x1362b6+INVINCIBILITY_DURATION_MS;}else{playerLives--,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],fallingShips=[],isInvincible=!![],invincibilityEndTime=_0x1362b6+INVINCIBILITY_DURATION_MS;ship&&gameCanvas?(ship['y']=gameCanvas[_0x5c0a66(0x16d)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])):console[_0x5c0a66(0x23b)]('Cannot\x20reposition\x20ship\x20Y\x20-\x20ship\x20or\x20canvas\x20not\x20ready.');if(playerLives<=0x0){const _0x104f64=currentPlayer;if(_0x104f64===0x1)player1Lives=0x0;if(_0x104f64===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x1362b6,playerWhoIsGameOver=_0x104f64;const _0xaeced0=_0x104f64===0x1?0x2:0x1,_0x51f989=_0xaeced0===0x1?player1Lives:player2Lives;_0x51f989>0x0?nextActionAfterPlayerGameOver=_0x5c0a66(0x1ef):nextActionAfterPlayerGameOver=_0x5c0a66(0x15d),bullets=[],enemyBullets=[],explosions=[],playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}break;}}}}}}if(ship&&!isShowingPlayerGameOverMessage&&!isShipCaptured&&!isWaitingForRespawn&&!isInvincible){const _0x339819={'x':ship['x'],'y':ship['y'],'width':ship[_0x5c0a66(0x1ba)],'height':ship['height']},_0x3760d1=isDualShipActive?{'x':ship['x']+DUAL_SHIP_OFFSET_X,'y':ship['y'],'width':ship['width'],'height':ship[_0x5c0a66(0x16d)]}:null;for(let _0x1f1aba=enemyBullets[_0x5c0a66(0x172)]-0x1;_0x1f1aba>=0x0;_0x1f1aba--){const _0x2e5986=enemyBullets[_0x1f1aba];if(!_0x2e5986){enemyBullets[_0x5c0a66(0x19d)](_0x1f1aba,0x1);continue;}const _0x5c409c={'x':_0x2e5986['x'],'y':_0x2e5986['y'],'width':_0x2e5986[_0x5c0a66(0x1ba)],'height':_0x2e5986[_0x5c0a66(0x16d)]};let _0x3db457=checkCollision(_0x339819,_0x5c409c),_0x369d94=0x0;!_0x3db457&&_0x3760d1&&checkCollision(_0x3760d1,_0x5c409c)&&(_0x3db457=!![],_0x369d94=0x1);if(_0x3db457){enemyBullets[_0x5c0a66(0x19d)](_0x1f1aba,0x1);if(isDualShipActive){isDualShipActive=![];if(currentPlayer===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];_0x369d94===0x1?createExplosion(_0x3760d1['x']+ship['width']/0x2,_0x3760d1['y']+ship[_0x5c0a66(0x16d)]/0x2):createExplosion(_0x339819['x']+ship[_0x5c0a66(0x1ba)]/0x2,_0x339819['y']+ship[_0x5c0a66(0x16d)]/0x2),playSound(lostLifeSound),isInvincible=!![],invincibilityEndTime=_0x1362b6+INVINCIBILITY_DURATION_MS;}else{playerLives--,playSound(lostLifeSound),createExplosion(ship['x']+ship[_0x5c0a66(0x1ba)]/0x2,ship['y']+ship['height']/0x2),csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],fallingShips=[],isInvincible=!![],invincibilityEndTime=_0x1362b6+INVINCIBILITY_DURATION_MS;ship&&gameCanvas?(ship['y']=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])):console['error'](_0x5c0a66(0x15f));if(playerLives<=0x0){const _0x3bbc64=currentPlayer;if(_0x3bbc64===0x1)player1Lives=0x0;if(_0x3bbc64===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x1362b6,playerWhoIsGameOver=_0x3bbc64;const _0x112fcb=_0x3bbc64===0x1?0x2:0x1,_0x374223=_0x112fcb===0x1?player1Lives:player2Lives;_0x374223>0x0?nextActionAfterPlayerGameOver=_0x5c0a66(0x1ef):nextActionAfterPlayerGameOver=_0x5c0a66(0x15d),bullets=[],enemyBullets=[],explosions=[],playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}break;}}}}}if(ship&&!isShipCaptured&&!isWaitingForRespawn&&!isDualShipActive&&fallingShips['length']>0x0&&!isInvincible){const _0x1c7b43={'x':ship['x'],'y':ship['y'],'width':ship[_0x5c0a66(0x1ba)],'height':ship[_0x5c0a66(0x16d)]};for(let _0x2dcf48=fallingShips[_0x5c0a66(0x172)]-0x1;_0x2dcf48>=0x0;_0x2dcf48--){const _0x1b2b58=fallingShips[_0x2dcf48];if(!_0x1b2b58)continue;const _0x2dedc8={'x':_0x1b2b58['x'],'y':_0x1b2b58['y'],'width':_0x1b2b58[_0x5c0a66(0x1ba)],'height':_0x1b2b58['height']};if(checkCollision(_0x1c7b43,_0x2dedc8)){fallingShips[_0x5c0a66(0x19d)](_0x2dcf48,0x1),isDualShipActive=!![];if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];playSound(dualShipSound);break;}}}updateHitSparks();}catch(_0x1ebc43){console['error']('FATAL\x20Error\x20in\x20moveEntities:',_0x1ebc43,_0x1ebc43[_0x5c0a66(0x206)]),isGridSoundPlaying=![],stopSound(gridBackgroundSound),isEntrancePhaseActive=![],stopSound(entranceSound),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(captureSound),stopSound(shipCapturedSound),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0x5c0a66(0x1b4))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x5c0a66(0x1af));}}function _0x329a(){const _0x114562=['Wave\x20','Entrance\x20Wave:\x20Assigned\x20entrance\x20path\x20\x22','pathSegmentIndex',':\x20Squadron\x20\x22','\x20not\x20found.','hasCapturedShip','\x22\x20has\x20no\x20valid\x20enemies\x20array.\x20Removing.','moving_to_grid','\x20after\x20NaN','single','CS:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','show_results','velocityY','Cannot\x20reposition\x20ship\x20Y\x20-\x20ship\x20or\x20canvas\x20not\x20ready.','Invalid\x20next\x20CS\x20Bezier\x20segment\x20','\x20after\x20bad\x20next\x20segment','.\x20Switching\x20to\x20moving_to_grid.','Full\x20Grid:\x20Error\x20getting\x20target\x20grid\x20pos\x20for\x20enemy\x20','hasOwnProperty','enemy-entr-','speed','returnLogDone','CS3_DiveLoopR_Sharp','tintProgress','warn','\x20path\x20index\x20','capturedShipDimensions','height',')\x20during\x20shift:','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20','120470PfzlHg',',\x20Idx\x20','length','\x20for\x20path\x20','following_bezier_path','.\x20Skipping.','\x20state\x20changed\x20unexpectedly.\x20Resetting\x20rotation.','pathT','pathSpeedMultiplier','Error\x20getting\x20target\x20grid\x20pos\x20for\x20','total','502473Lojgtg','Boss\x20','CS_HorizontalFlyByL','entrance_flight_2','targetX','state','[scheduleSingleEntranceSquadron]\x20Called\x20inappropriately\x20for\x20non-entrance\x20wave\x20type\x20(Level\x20','\x20for\x20MUST\x20DIVE\x20(Normal\x20attack).','\x20out\x20of\x20bounds\x20for\x20SHARED\x20path\x20','completed','floor','1841920ZEXHIb','Entrance\x20Wave:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','Enemy\x20','filter','isDamaged','\x20definition\x20failed.\x20Transitioning\x20immediately.','A\x20critical\x20error\x20occurred\x20in\x20the\x20game\x20loop.\x20Please\x20refresh.','some','abs','Error\x20calculating\x20Normal\x20Bezier\x20point\x20for\x20enemy\x20','rotation',')!\x20Returning.','Error\x20calculating\x20FINAL\x20bezier\x20point\x20for\x20attack\x20',',\x20Pattern\x20','Error:\x20Tried\x20to\x20start\x20wave\x20for\x20player\x20with\x200\x20lives.\x20Triggering\x20Game\x20Over.','\x20out\x20of\x20bounds\x20(',').\x20Skipping.','challenging_stage','sort','[Destroyed\x20Boss\x20Score\x20-\x20Attack]\x20Boss\x20destroyed\x20on\x20first\x20hit?\x20Awarding\x20','diveStartTime','\x20(Full\x20Grid):\x20Basis\x20patroon\x200\x20is\x20ongeldig\x20of\x20leeg!','\x20(Entrance\x202):\x20Basis\x20patroon\x201\x20is\x20ongeldig\x20of\x20leeg!','splice','CRITICAL:\x20Failed\x20to\x20define\x20CS\x20paths!','Error\x20deep\x20copying\x20selected\x20pattern\x200\x20for\x20Entrance\x201:','\x22\x20for\x20enemy\x20in\x20squadron\x20','min','undefined','[Capture\x20State]\x20Boss\x20','round','Attempted\x20to\x20start\x20Full\x20Grid\x20wave\x20without\x20valid\x20definition\x20or\x20when\x20not\x20in\x20Full\x20Grid\x20mode.',',\x20isFullGrid:\x20','Error\x20starting\x20attack\x20for\x20','.\x20Enemy\x20','Entrance\x20Wave:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','Error\x20creating\x20player\x20bullet(s):','CRITICAL:\x20Required\x20CS\x20path\x20\x22','sqrt','[Capture\x20Message\x20End]\x20Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','Error\x20updating\x20explosions:','Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.',')!\x20Cannot\x20validate\x20paths.','Error\x20getting\x20target\x20grid\x20pos\x20for\x20new\x20enemy\x20','\x20for\x20SHARED\x20path\x20','CS:\x20Error\x20setting\x20up\x20spawns\x20for\x20squadron\x20','function','destroyed','push','lifetime','\x20invalid!\x20Skipping.','sin','width','1031212ZPzkZV','\x20attacking\x20without\x20path!\x20Returning.','canFireThisDive','includes','Full\x20Grid:\x20Squadron\x20','isArray','in_grid','\x20attacking,\x20invalid\x20segment\x20','toString',':\x20Enemy\x20entrancePathId\x20\x22','CS_LoopAttack_TL','\x20(no\x20attack\x20path):','creationTime','gridCol','CS_LoopAttack_BR','capturedShipX','Error\x20during\x20post-landing\x20fire\x20for\x20','Error\x20updating\x20floating\x20scores:','FATAL\x20Error\x20in\x20resetWave:','capturing','targetGridY','\x20has\x20invalid\x20enemy\x20data.','velocityX','\x20after\x20attack:','normal','enemies','\x20after\x20missing\x20path','Invalid\x20start\x20segment\x20for\x20path\x20','stringify','Error\x20deep\x20copying\x20selected\x20pattern\x201\x20for\x20Entrance\x202:','Error\x20handling\x20player\x20input:','substring','returning','cos','CS:\x20Path\x20','4941632CEXPMy','object','forEach','find','\x20for\x20squadron\x20','Failed\x20to\x20return\x20to\x20menu\x20after\x20critical\x20error:','full_grid','targetGridX','preparing_capture','now','shoot','\x20off\x20screen:','keys','capturedShipY','Invalid\x20start\x20segment\x20for\x20squadron\x20path\x20','diving_to_capture_position','lastFiredTime','switch_player','!\x20Returning.','\x20in\x20returning','every','add','\x20at\x20end\x20of\x20normal\x20path\x20','boss_loop_right','parse','random','Canvas/ship\x20not\x20ready\x20in\x20resetWave.','Error\x20in\x20aiControl:','\x20missing\x20SHARED\x20path\x20','[scheduleSingleEntranceSquadron]\x20Firing\x20status\x20for\x20squadron\x20','CS_LoopAttack_BL','showing_capture_message','\x20(state:\x20','\x20to\x20reset\x20state/rotation.','pause','justReturned',':\x20Squadron\x20pathId\x20\x22','unknown','Attempted\x20to\x20schedule\x20entrance\x20flight\x20wave\x20without\x20valid\x20definition.','attackType','stack','particles','[scheduleEntranceFlightWave]\x20Called\x20inappropriately\x20for\x20non-entrance\x20wave\x20type\x20(Level\x20','gridRow','following_entrance_path','alpha','pathId','Error\x20getting\x20grid\x20pos\x20after\x20bezier\x20error\x20for\x20','boss_loop_left','initialCaptureAnimationY',')\x20for\x20','.\x20Skipping\x20attack.','number','left','Error\x20calculating\x20CS\x20Bezier\x20point\x20for\x20enemy\x20','Beam\x20collision\x20box\x20has\x20invalid\x20height:','Error\x20checking/awarding\x20extra\x20life:','[Capture\x20Message\x20End]\x20Could\x20not\x20find\x20Boss\x20','attackPathSegmentIndex','right','Error\x20calculating\x20bezier\x20point\x20during\x20attack\x20for\x20','5zZIJer','Error\x20in\x20triggerImmediateCaptureDive:','entrance_flight_1','Error\x20getting\x20grid\x20pos\x20for\x20','Invalid\x20CS\x20Bezier\x20segment\x20','\x20voor\x20level\x20','slice','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!','indexOf','Invalid\x20next\x20Normal\x20Bezier\x20segment\x20','max','type','\x22\x20not\x20found!\x20Aborting\x20CS.','\x20in\x20moving_to_grid\x20state\x20without\x20target.\x20Recalculating.','targetY','\x20diving\x20to\x20capture\x20without\x20targetX/Y!\x20Aborting.','\x20not\x20found.\x20Enemy\x20will\x20follow\x20squadron\x20path\x20\x22','entrancePathId',',\x20isCS:\x20','attackGroupId','duration','attackFormationOffsetX','newButtonStates','Error\x20calculating\x20final\x20bezier\x20point\x20for\x20','Invalid\x20Normal\x20Bezier\x20segment\x20','2140254cqWcYN','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20','back','captureStartTime','attackPathT','\x20in\x20moving_to_grid','\x20attacking,\x20invalid\x20NEXT\x20segment\x20','error','Error\x20getting\x20grid\x20pos\x20after\x20FINAL\x20bezier\x20error\x20for\x20','\x20(invalid\x20attack\x20index):','\x20(Entrance\x201):\x20Basis\x20patroon\x200\x20is\x20ongeldig\x20of\x20leeg!','capturedShipLastFiredTime','\x20after\x20bezier\x20error','enemy-cs-','attackPathSegments','\x20after\x20bad\x20segment','NaN\x20detected\x20in\x20Normal\x20path\x20calculation\x20for\x20enemy\x20','preparing_attack','attack-','map','\x20was\x20in\x20\x27capturing\x27,\x20but\x20another\x20ship\x20(','[findAndDetachEnemy\x20-\x20PRIORITY]\x20Ship\x20captured.\x20Selecting\x20Boss\x20','getGamepads','FATAL\x20Error\x20in\x20resetGame:','Entrance\x20Wave:\x20Path\x20','scheduledStartTime','\x20returning\x20without\x20target\x20coords.\x20Recalculating.','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!\x20Resetting\x20state\x20anyway.','health','has','attacking','\x20after\x20invalid\x20path\x20index','),\x20index\x20','hasFiredPostLanding',',\x20index\x20','CS_HorizontalFlyByR','capturePrepareTimeout','squadronId','FATAL\x20Error\x20in\x20moveEntities:','\x20(Path\x20',')\x20was\x20already\x20captured.\x20Returning.','\x22\x20does\x20not\x20exist\x20in\x20normalWaveEntrancePaths!\x20Removing\x20squadron.','[handleEnemyHit]\x20Attempted\x20to\x20create\x20falling\x20ship,\x20but\x20similar\x20one\x20already\x20exists.\x20Skipping.','\x20invalid!\x20Skipping\x20squadron.','258PnoGOI','.\x20Removing.','\x20(invalid\x20attack\x20segment):',',\x20Path\x20','squadronEnemyIndex','Full\x20Grid:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','60106lGBwnW','captureAnimationRotation','[Capture\x20Message\x20End]\x20Boss\x20'];_0x329a=function(){return _0x114562;};return _0x329a();}function switchPlayerTurn(){const _0x16f0a2=_0x1065;if(!isTwoPlayerMode)return![];stopSound(hiScoreSound),highScore=Math[_0x16f0a2(0x225)](highScore,score);currentPlayer===0x1?(player1Score=score,player1IsDualShipActive=isDualShipActive):(player2Score=score,player2IsDualShipActive=isDualShipActive);const _0x24247a=currentPlayer===0x1?0x2:0x1,_0x3559fb=_0x24247a===0x1?player1Lives:player2Lives;if(_0x3559fb<=0x0){const _0x2dcbf8=currentPlayer===0x1?player1Lives:player2Lives;return _0x2dcbf8<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x24247a,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],captureBeamActive=![],capturingBossId=null,isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function firePlayerBullet(_0x3700f3=![]){const _0x5c9edf=_0x1065;let _0x685b48=_0x3700f3?0x1:currentPlayer,_0x382de5=selectedFiringMode==='single',_0x2694f2=!_0x3700f3&&isTwoPlayerMode&&currentPlayer===0x2;if(isPaused||!isInGameState||playerLives<=0x0||gameOverSequenceStartTime>0x0||!ship||isShipCaptured||isWaitingForRespawn||isShowingIntro||showReadyMessage||isCsCompletionDelayActive||showCsHitsMessage||showPerfectMessage||showCsBonusScoreMessage||showCSClearMessage||isShowingPlayerGameOverMessage)return![];try{const _0x135668=ship['y'];let _0x1b3a09=0x0;if(isDualShipActive){const _0x5dfd5a=ship['x']+ship[_0x5c9edf(0x1ba)]/0x2,_0x269079=ship['x']+DUAL_SHIP_OFFSET_X+ship[_0x5c9edf(0x1ba)]/0x2,_0x2949e1=_0x5dfd5a-PLAYER_BULLET_WIDTH/0x2,_0x426e63=_0x269079-PLAYER_BULLET_WIDTH/0x2;bullets[_0x5c9edf(0x1b6)]({'x':_0x2949e1,'y':_0x135668,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED}),bullets[_0x5c9edf(0x1b6)]({'x':_0x426e63,'y':_0x135668,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED}),_0x1b3a09=0x2;}else{const _0x4db77c=ship['x']+ship[_0x5c9edf(0x1ba)]/0x2-PLAYER_BULLET_WIDTH/0x2;bullets['push']({'x':_0x4db77c,'y':_0x135668,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED}),_0x1b3a09=0x1;}_0x382de5&&!_0x3700f3&&(_0x2694f2?p2JustFiredSingle=!![]:p1JustFiredSingle=!![]);playSound(playerShootSound);if(_0x685b48===0x1||_0x3700f3)player1ShotsFired+=_0x1b3a09;else _0x685b48===0x2&&(player2ShotsFired+=_0x1b3a09);return!![];}catch(_0x4e5191){return console[_0x5c9edf(0x23b)](_0x5c9edf(0x1aa),_0x4e5191),![];}}function handlePlayerInput(){const _0x23d32b=_0x1065;try{if(isPaused||!isManualControl||playerLives<=0x0||!ship||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isWaitingForRespawn){leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![];return;}leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![];let _0x9fbdcc=keyboardP1LeftDown,_0x419992=keyboardP1RightDown,_0x24cf53=keyboardP1ShootDown,_0x5c05d1=keyboardP2LeftDown,_0x489604=keyboardP2RightDown,_0xe99941=keyboardP2ShootDown,_0x25faa0=![],_0x35e0e7=![],_0x23b8ff=![],_0x7899ce=![],_0x5649ce=![],_0x4fe9c5=![];const _0x2bf084=selectedFiringMode===_0x23d32b(0x15b);if(connectedGamepadIndex!==null){const _0x3c1ccf=navigator[_0x23d32b(0x24a)]();if(_0x3c1ccf?.[connectedGamepadIndex]){const _0x3296b9=_0x3c1ccf[connectedGamepadIndex],_0x38feff=processSingleController(_0x3296b9,previousGameButtonStates);_0x25faa0=_0x38feff['left'],_0x35e0e7=_0x38feff[_0x23d32b(0x219)],_0x23b8ff=_0x38feff['shoot'];const _0x138b9f=previousGameButtonStates[PS5_BUTTON_CROSS]??![],_0x2e7bff=!_0x23b8ff&&_0x138b9f;if(_0x2e7bff&&_0x2bf084)p1JustFiredSingle=![];previousButtonStates=_0x38feff[_0x23d32b(0x231)];if(_0x38feff[_0x23d32b(0x200)]){togglePause();return;}if(_0x38feff[_0x23d32b(0x236)]){stopGameAndShowMenu();return;}}else{if(previousButtonStates[_0x23d32b(0x172)]>0x0)previousButtonStates=[];if(_0x2bf084)p1JustFiredSingle=![];p1FireInputWasDown=![];}}else{if(previousButtonStates[_0x23d32b(0x172)]>0x0)previousButtonStates=[];}if(isTwoPlayerMode&&connectedGamepadIndexP2!==null){const _0x3f7150=navigator[_0x23d32b(0x24a)]();if(_0x3f7150?.[connectedGamepadIndexP2]){const _0x361b19=_0x3f7150[connectedGamepadIndexP2],_0x2650f0=processSingleController(_0x361b19,previousGameButtonStatesP2);_0x7899ce=_0x2650f0[_0x23d32b(0x213)],_0x5649ce=_0x2650f0[_0x23d32b(0x219)],_0x4fe9c5=_0x2650f0[_0x23d32b(0x1e8)];const _0x47e208=previousGameButtonStatesP2[PS5_BUTTON_CROSS]??![],_0x58b704=!_0x4fe9c5&&_0x47e208;if(_0x58b704&&_0x2bf084)p2JustFiredSingle=![];previousGameButtonStatesP2=_0x2650f0[_0x23d32b(0x231)];}else{if(previousGameButtonStatesP2['length']>0x0)previousGameButtonStatesP2=[];if(_0x2bf084)p2JustFiredSingle=![];p2FireInputWasDown=![];}}else{if(previousGameButtonStatesP2[_0x23d32b(0x172)]>0x0)previousGameButtonStatesP2=[];}let _0x18af06=![],_0x43c33a=![];const _0x4467b6=Date['now']();let _0x4d1bc8=_0x24cf53||_0x23b8ff,_0x223953=![];const _0x5c1d11=isTwoPlayerMode&&connectedGamepadIndexP2===null&&connectedGamepadIndex!==null;isTwoPlayerMode&&(_0x223953=_0xe99941||_0x4fe9c5||_0x5c1d11&&_0x23b8ff);const _0x498b46=_0x4d1bc8&&!p1FireInputWasDown,_0x16a607=!_0x4d1bc8&&p1FireInputWasDown,_0xc4b6e9=_0x223953&&!p2FireInputWasDown,_0x5df330=!_0x223953&&p2FireInputWasDown;if(currentPlayer===0x1||!isTwoPlayerMode)leftPressed=_0x9fbdcc||_0x25faa0,rightPressed=_0x419992||_0x35e0e7,_0x2bf084?(_0x498b46&&!p1JustFiredSingle&&(_0x18af06=!![]),_0x16a607&&(p1JustFiredSingle=![])):_0x4d1bc8&&_0x4467b6-playerLastShotTime>=SHOOT_COOLDOWN&&(_0x18af06=!![]),shootPressed=_0x18af06;else{if(isTwoPlayerMode&&currentPlayer===0x2){p2LeftPressed=_0x5c05d1||_0x7899ce||_0x5c1d11&&_0x25faa0,p2RightPressed=_0x489604||_0x5649ce||_0x5c1d11&&_0x35e0e7;const _0x38d547=_0x5c1d11&&(!_0x23b8ff&&(previousGameButtonStates[PS5_BUTTON_CROSS]??![]));_0x2bf084?(_0xc4b6e9&&!p2JustFiredSingle&&(_0x43c33a=!![]),(_0x5df330||_0x38d547)&&(p2JustFiredSingle=![])):_0x223953&&_0x4467b6-playerLastShotTime>=SHOOT_COOLDOWN&&(_0x43c33a=!![]),p2ShootPressed=_0x43c33a;}}(_0x18af06||_0x43c33a)&&(firePlayerBullet(![])&&(!_0x2bf084&&(playerLastShotTime=_0x4467b6))),p1FireInputWasDown=_0x4d1bc8,p2FireInputWasDown=_0x223953;}catch(_0x3f0253){console[_0x23d32b(0x23b)](_0x23d32b(0x1d9),_0x3f0253),leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![];}}function aiControl(){const _0x546d84=_0x1065;try{if(isPaused||isManualControl||playerLives<=0x0||!ship||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isShipCaptured||isWaitingForRespawn){if(ship)ship[_0x546d84(0x17f)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=undefined;return;}smoothedShipX===undefined&&(smoothedShipX=ship['x']);const _0x5c490d=Date[_0x546d84(0x1e7)](),_0x1c2110=gameCanvas['width'],_0x630625=gameCanvas[_0x546d84(0x16d)];let _0x48adf9=ship['width'];isDualShipActive&&(_0x48adf9=DUAL_SHIP_OFFSET_X+ship['width']);const _0x233722=ship['x']+_0x48adf9/0x2,_0x4280d1=ship['y'],_0x4c561c=_0x1c2110/0x2;let _0xc65c3a;isDualShipActive?_0xc65c3a=_0x4c561c-_0x48adf9/0x2:_0xc65c3a=_0x4c561c-ship[_0x546d84(0x1ba)]/0x2;const _0x5b8101=showReadyMessage||showCSClearMessage||showCsHitsMessage||showPerfectMessage||showCsBonusScoreMessage||showExtraLifeMessage||isCsCompletionDelayActive;let _0x41cd0c=smoothedShipX,_0x3238f4=![],_0x47332f=![],_0x3306fb=smoothedShipX,_0x273051=null,_0x3f16b6=![];aiNeedsStabilization&&!_0x5b8101&&(aiStabilizationEndTime=_0x5c490d+AI_STABILIZATION_DURATION,aiNeedsStabilization=![],smoothedShipX=ship['x']);if(_0x5c490d<aiStabilizationEndTime&&!_0x5b8101)_0x41cd0c=_0xc65c3a;else{_0x47332f=![],_0x3306fb=smoothedShipX;if(!isInvincible){let _0x118aaf=[];const _0x22c12b=isChallengingStage?FINAL_DODGE_LOOKAHEAD*0.8:isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_LOOKAHEAD:FINAL_DODGE_LOOKAHEAD,_0x2cd9c4=isChallengingStage?FINAL_DODGE_BUFFER_BASE*0.8:isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_BUFFER:FINAL_DODGE_BUFFER_BASE,_0x51ae4a={'x':ship['x']-_0x2cd9c4/0x2,'y':ship['y']-_0x22c12b,'width':_0x48adf9+_0x2cd9c4,'height':_0x22c12b+ship[_0x546d84(0x16d)]};for(const _0x46cb6b of enemyBullets){if(_0x46cb6b&&_0x46cb6b['y']+_0x46cb6b[_0x546d84(0x16d)]>0x0&&_0x46cb6b['y']<_0x630625){const _0x310e61={'x':_0x46cb6b['x'],'y':_0x46cb6b['y'],'width':_0x46cb6b[_0x546d84(0x1ba)],'height':_0x46cb6b[_0x546d84(0x16d)]};checkCollision(_0x51ae4a,_0x310e61)&&_0x118aaf[_0x546d84(0x1b6)](_0x46cb6b);}}if(_0x118aaf[_0x546d84(0x172)]>0x0){_0x47332f=!![];let _0x3747ca=_0x1c2110,_0x7ca2=0x0,_0x59f53c=Infinity;_0x118aaf[_0x546d84(0x1e0)](_0x58d351=>{const _0x4499ed=_0x546d84;_0x3747ca=Math[_0x4499ed(0x1a1)](_0x3747ca,_0x58d351['x']),_0x7ca2=Math[_0x4499ed(0x225)](_0x7ca2,_0x58d351['x']+_0x58d351['width']),_0x59f53c=Math[_0x4499ed(0x1a1)](_0x59f53c,_0x4280d1-(_0x58d351['y']+_0x58d351['height']));});const _0x46f4c4=(_0x3747ca+_0x7ca2)/0x2,_0x4862b1=_0x233722<_0x46f4c4?-0x1:0x1,_0x33d581=0x1-Math[_0x546d84(0x1a1)](0x1,Math[_0x546d84(0x225)](0x0,_0x59f53c)/_0x22c12b),_0x15bacb=isChallengingStage?1.6:isEntrancePhaseActive?2.2:1.8,_0x230252=isChallengingStage?1.3:isEntrancePhaseActive?1.8:1.5,_0x1e5c91=Math['max'](0x0,_0x118aaf[_0x546d84(0x172)]-0x1)*_0x48adf9*0.3,_0x562949=_0x48adf9*(_0x15bacb+_0x33d581*_0x230252)+_0x1e5c91;_0x3306fb=smoothedShipX+_0x4862b1*_0x562949;}if(!_0x47332f&&!isChallengingStage&&!isFullGridWave){let _0xaee7ce=![],_0x139ea3=Infinity;for(const _0x380863 of enemies){if(_0x380863&&_0x380863[_0x546d84(0x226)]===ENEMY3_TYPE&&_0x380863['state']===_0x546d84(0x1ed)&&_0x380863['targetX']!=null){const _0x13dea0=AI_COLLISION_LOOKAHEAD*1.5,_0x1e9858=FINAL_DODGE_BUFFER_BASE*1.8,_0x38eeb4=0.2,_0x21e3db=_0x380863['x']+(_0x380863[_0x546d84(0x17f)]-_0x380863['x'])*_0x38eeb4,_0x59fa2f={'x':_0x21e3db,'y':_0x380863['y'],'width':_0x380863[_0x546d84(0x1ba)],'height':_0x380863[_0x546d84(0x16d)]},_0x174e9b={'x':ship['x']-_0x1e9858/0x2,'y':ship['y']-_0x13dea0,'width':_0x48adf9+_0x1e9858,'height':_0x13dea0+ship['height']};if(checkCollision(_0x174e9b,_0x59fa2f)){const _0x13e27b=_0x4280d1-(_0x380863['y']+_0x380863['height']);if(_0x13e27b<_0x139ea3){_0x139ea3=_0x13e27b,_0x47332f=!![],_0xaee7ce=!![];const _0x1d0d10=_0x380863[_0x546d84(0x17f)]+_0x380863[_0x546d84(0x1ba)]/0x2,_0x240fb5=_0x1c2110/0x2,_0xf9888c=_0x1d0d10<_0x240fb5?0x1:-0x1,_0x19f5cf=0x1-Math[_0x546d84(0x1a1)](0x1,Math[_0x546d84(0x225)](0x0,_0x13e27b)/_0x13dea0),_0x44b851=_0x48adf9*(2.5+_0x19f5cf*0x2);_0x3306fb=smoothedShipX+_0xf9888c*_0x44b851;}}}}}if(!_0x47332f){const _0x3e826a=AI_COLLISION_LOOKAHEAD,_0xa1308b=NORMAL_WAVE_ATTACKING_DODGE_BUFFER_MULTIPLIER,_0x2c4ea7=BEE_DODGE_BUFFER_HORIZONTAL_FACTOR;let _0x1fcfac=Infinity;for(const _0x36f815 of enemies){if(_0x36f815&&_0x36f815[_0x546d84(0x180)]===_0x546d84(0x253)&&_0x36f815['y']+_0x36f815[_0x546d84(0x16d)]>0x0&&_0x36f815['y']<_0x630625){let _0x1a7b83=FINAL_DODGE_BUFFER_BASE*_0xa1308b;_0x36f815[_0x546d84(0x226)]===ENEMY1_TYPE&&(_0x1a7b83*=_0x2c4ea7);const _0x15f206={'x':ship['x']-_0x1a7b83/0x2,'y':ship['y']-_0x3e826a,'width':_0x48adf9+_0x1a7b83,'height':_0x3e826a+ship[_0x546d84(0x16d)]},_0x29e9a2={'x':_0x36f815['x'],'y':_0x36f815['y'],'width':_0x36f815['width'],'height':_0x36f815[_0x546d84(0x16d)]};if(checkCollision(_0x15f206,_0x29e9a2)){const _0x33980e=_0x4280d1-(_0x36f815['y']+_0x36f815[_0x546d84(0x16d)]);if(_0x33980e<_0x1fcfac){_0x1fcfac=_0x33980e,_0x47332f=!![];const _0x4f4ee4=_0x36f815['x']+_0x36f815['width']/0x2,_0x265657=_0x233722<_0x4f4ee4?-0x1:0x1,_0x1ba72b=0x1-Math['min'](0x1,Math['max'](0x0,_0x33980e)/_0x3e826a),_0x50a3f2=_0x48adf9*(0x2+_0x1ba72b*1.8);_0x3306fb=smoothedShipX+_0x265657*_0x50a3f2;}}}}}if(!_0x47332f&&!isFullGridWave){const _0x22babb=AI_COLLISION_LOOKAHEAD;let _0x15f782=Infinity;for(const _0x2ed816 of enemies){const _0x3c65f0=_0x2ed816&&(_0x2ed816['state']===_0x546d84(0x20a)||_0x2ed816['state']===_0x546d84(0x1db));if(_0x3c65f0&&_0x2ed816['y']+_0x2ed816[_0x546d84(0x16d)]>0x0&&_0x2ed816['y']<_0x630625){let _0xc96c07=FINAL_DODGE_BUFFER_BASE;_0x2ed816['type']===ENEMY1_TYPE&&(_0xc96c07*=BEE_DODGE_BUFFER_HORIZONTAL_FACTOR);const _0x5d8807={'x':ship['x']-_0xc96c07/0x2,'y':ship['y']-_0x22babb,'width':_0x48adf9+_0xc96c07,'height':_0x22babb+ship[_0x546d84(0x16d)]},_0x4ad513={'x':_0x2ed816['x'],'y':_0x2ed816['y'],'width':_0x2ed816[_0x546d84(0x1ba)],'height':_0x2ed816[_0x546d84(0x16d)]};if(checkCollision(_0x5d8807,_0x4ad513)){const _0x13a74b=_0x4280d1-(_0x2ed816['y']+_0x2ed816[_0x546d84(0x16d)]);if(_0x13a74b<_0x15f782){_0x15f782=_0x13a74b,_0x47332f=!![];const _0x30fc6f=_0x2ed816['x']+_0x2ed816[_0x546d84(0x1ba)]/0x2,_0x4f2e4f=_0x233722<_0x30fc6f?-0x1:0x1,_0x46f9b1=0x1-Math[_0x546d84(0x1a1)](0x1,Math[_0x546d84(0x225)](0x0,_0x13a74b)/_0x22babb),_0x2070e4=_0x48adf9*(0x2+_0x46f9b1*1.8);_0x3306fb=smoothedShipX+_0x4f2e4f*_0x2070e4;}}}}}}if(_0x47332f&&!isInvincible){const _0x314e4a=Math[_0x546d84(0x225)](AI_ANTI_CORNER_BUFFER,Math['min'](_0x1c2110-_0x48adf9-AI_ANTI_CORNER_BUFFER,_0x3306fb));_0x41cd0c=_0x314e4a,_0x273051=null,_0x3238f4=![];}else{if(fallingShips[_0x546d84(0x172)]>0x0&&!isShipCaptured&&!isWaitingForRespawn){const _0x2182a1=fallingShips[0x0];if(_0x2182a1){const _0x4a4674=_0x2182a1['x']+_0x2182a1[_0x546d84(0x1ba)]/0x2;_0x41cd0c=_0x4a4674-_0x48adf9/0x2,_0x41cd0c=Math[_0x546d84(0x225)](AI_EDGE_BUFFER,Math[_0x546d84(0x1a1)](_0x1c2110-_0x48adf9-AI_EDGE_BUFFER,_0x41cd0c)),_0x273051=null;let _0x2b6c61=-Infinity,_0x4f3aa2=null;for(const _0x4d6357 of enemies){if(_0x4d6357&&_0x4d6357['y']<_0x4280d1){const _0x1d8054=_0x4d6357['x']+_0x4d6357[_0x546d84(0x1ba)]/0x2,_0x108364=Math[_0x546d84(0x18e)](_0x1d8054-_0x233722),_0x43675a=_0x4280d1-(_0x4d6357['y']+_0x4d6357['height']);if(_0x108364<_0x48adf9*1.5&&_0x43675a>0x0){const _0x383ac9=_0x630625-_0x4d6357['y']-_0x108364*0x2-_0x43675a;_0x383ac9>_0x2b6c61&&(_0x2b6c61=_0x383ac9,_0x4f3aa2=_0x4d6357);}}}if(_0x4f3aa2){let _0x320317=!![];const _0x488e50={'x':ship['x']-ENTRANCE_SHOOT_BULLET_CHECK_BUFFER/0x2,'y':ship['y']-ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD,'width':_0x48adf9+ENTRANCE_SHOOT_BULLET_CHECK_BUFFER,'height':ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD+ship[_0x546d84(0x16d)]};for(const _0x573ecd of enemyBullets){if(_0x573ecd&&_0x573ecd['y']+_0x573ecd[_0x546d84(0x16d)]>0x0&&_0x573ecd['y']<_0x630625){const _0x3839c3={'x':_0x573ecd['x'],'y':_0x573ecd['y'],'width':_0x573ecd[_0x546d84(0x1ba)],'height':_0x573ecd[_0x546d84(0x16d)]};if(checkCollision(_0x488e50,_0x3839c3)){_0x320317=![];break;}}}_0x320317&&!(_0x4f3aa2[_0x546d84(0x226)]===ENEMY3_TYPE&&_0x4f3aa2[_0x546d84(0x180)]==='preparing_capture')&&(_0x3238f4=!![],_0x273051=_0x4f3aa2);}}}else{let _0x5adc67=![],_0x327da3=null;if(!isFullGridWave&&!isManualControl&&captureBeamActive&&capturingBossId&&playerLives>0x1&&!isShipCaptured&&!isInvincible){_0x327da3=enemies['find'](_0x2d0431=>_0x2d0431['id']===capturingBossId);if(_0x327da3&&_0x327da3[_0x546d84(0x180)]===_0x546d84(0x1ce)){_0x5adc67=!![];const _0x520d49=_0x5c490d-_0x327da3[_0x546d84(0x237)];if(_0x520d49>=AI_CAPTURE_WAIT_DURATION_MS){_0x3f16b6=!![];const _0x1464c8=_0x327da3['x']+_0x327da3[_0x546d84(0x1ba)]/0x2;_0x41cd0c=_0x1464c8-_0x48adf9/0x2,_0x273051=null,_0x3238f4=![];}}}if(!_0x3f16b6){_0x273051=null;if(isEntrancePhaseActive&&!isChallengingStage&&!isFullGridWave){_0x41cd0c=_0xc65c3a;let _0x2f462b=-Infinity,_0x5a6bcb=null;for(const _0x2c8462 of enemies){if(_0x2c8462&&(_0x2c8462['state']==='following_entrance_path'||_0x2c8462['state']===_0x546d84(0x271))&&_0x2c8462['y']<_0x4280d1){const _0x2f4830=_0x2c8462['x']+_0x2c8462[_0x546d84(0x1ba)]/0x2,_0x103329=_0x2c8462['y']+_0x2c8462['height']/0x2,_0x475fcd=_0x2f4830-_0x233722,_0x3a058a=_0x4280d1-_0x103329,_0x45d129=Math['sqrt'](_0x475fcd*_0x475fcd+_0x3a058a*_0x3a058a),_0x56bb3b=Math[_0x546d84(0x225)](0x0,_0x48adf9*1.5-Math[_0x546d84(0x18e)](_0x475fcd)),_0x13ab89=(_0x630625-_0x2c8462['y'])*1.5+_0x56bb3b-_0x45d129*0.5;_0x13ab89>_0x2f462b&&(_0x2f462b=_0x13ab89,_0x5a6bcb=_0x2c8462);}}if(_0x5a6bcb){_0x273051=_0x5a6bcb;const _0x27a39b=_0x273051['x']+_0x273051[_0x546d84(0x1ba)]/0x2,_0x3ab309=Math[_0x546d84(0x18e)](_0x233722-_0x27a39b),_0x153688=_0x48adf9*ENTRANCE_SHOOT_ALIGNMENT_FACTOR;let _0x2f56ff=!![];const _0x411154={'x':ship['x']-ENTRANCE_SHOOT_BULLET_CHECK_BUFFER/0x2,'y':ship['y']-ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD,'width':_0x48adf9+ENTRANCE_SHOOT_BULLET_CHECK_BUFFER,'height':ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD+ship['height']};for(const _0x58742f of enemyBullets){if(_0x58742f&&_0x58742f['y']+_0x58742f[_0x546d84(0x16d)]>0x0&&_0x58742f['y']<_0x630625){const _0x52a030={'x':_0x58742f['x'],'y':_0x58742f['y'],'width':_0x58742f['width'],'height':_0x58742f[_0x546d84(0x16d)]};if(checkCollision(_0x411154,_0x52a030)){_0x2f56ff=![];break;}}}_0x2f56ff&&_0x3ab309<_0x153688&&((isDualShipActive||_0x273051[_0x546d84(0x226)]!==ENEMY3_TYPE||captureAttemptMadeThisLevel||isShipCaptured)&&(_0x3238f4=!![]));}}else{if(isChallengingStage){let _0x391bea=Infinity;_0x273051=null;for(const _0xbeda83 of enemies){if(_0xbeda83&&_0xbeda83['state']===_0x546d84(0x174)&&_0xbeda83['y']<_0x4280d1){const _0x4081e3=_0xbeda83['x']+_0xbeda83[_0x546d84(0x1ba)]/0x2,_0x101835=Math['abs'](_0x4081e3-_0x233722),_0xc55843=(0x1-Math[_0x546d84(0x1a1)](0x1,_0xbeda83['y']/_0x4280d1))*0x2,_0x19f145=_0x101835/_0x1c2110*0.5,_0x37770c=_0xc55843+_0x19f145;_0x37770c<_0x391bea&&(_0x391bea=_0x37770c,_0x273051=_0xbeda83);}}let _0xbb2a4f=_0x233722;if(_0x273051){const _0xa5d863=_0x273051['x']+_0x273051[_0x546d84(0x1ba)]/0x2,_0x1ec622=_0x273051['y']+_0x273051[_0x546d84(0x16d)]/0x2,_0x16a497=_0x4280d1-_0x1ec622;let _0x52bdbe=_0xa5d863;const _0x31f4a0=_0x273051['squadronId']===0x2||_0x273051[_0x546d84(0x25a)]===0x3;if(!_0x31f4a0&&_0x16a497>0x0&&PLAYER_BULLET_SPEED>0.1){const _0x4facd8=Math[_0x546d84(0x1a1)](MAX_PREDICTION_TIME_CS,_0x16a497/PLAYER_BULLET_SPEED),_0x35b4fe=0.4,_0x4c0700=(_0x273051[_0x546d84(0x1d1)]||0x0)*_0x4facd8;_0x52bdbe=_0xa5d863+_0x4c0700*_0x35b4fe,_0x52bdbe=Math[_0x546d84(0x225)](_0x273051[_0x546d84(0x1ba)]/0x2,Math[_0x546d84(0x1a1)](_0x1c2110-_0x273051[_0x546d84(0x1ba)]/0x2,_0x52bdbe));}_0xbb2a4f=_0x52bdbe,_0x41cd0c=_0xbb2a4f-_0x48adf9/0x2,_0x41cd0c=Math[_0x546d84(0x225)](AI_EDGE_BUFFER,Math[_0x546d84(0x1a1)](_0x1c2110-_0x48adf9-AI_EDGE_BUFFER,_0x41cd0c));const _0x4922e8=_0x48adf9*1.5,_0x227f6d=Math[_0x546d84(0x18e)](_0x233722-_0xbb2a4f);_0x227f6d<_0x4922e8&&(_0x3238f4=!![]);}else{const _0x229d25=Math[_0x546d84(0x1b9)](_0x5c490d/AI_WIGGLE_PERIOD*0x2*Math['PI'])*AI_WIGGLE_AMPLITUDE*0.5;_0x41cd0c=_0xc65c3a+_0x229d25,_0x41cd0c=Math[_0x546d84(0x225)](AI_EDGE_BUFFER,Math[_0x546d84(0x1a1)](_0x1c2110-_0x48adf9-AI_EDGE_BUFFER,_0x41cd0c));}}else{let _0x5d110b=-Infinity;_0x273051=null;const _0xfd45aa=_0x5adc67&&!_0x3f16b6;for(const _0x438397 of enemies){if(!_0x438397)continue;if(_0xfd45aa&&_0x438397['id']===capturingBossId)continue;let _0x4e0aa9=![],_0xeee489=0x0;switch(_0x438397[_0x546d84(0x180)]){case _0x546d84(0x1c1):_0x4e0aa9=!![],_0xeee489=_0xfd45aa?0x4e20:0x4650;break;case _0x546d84(0x271):case _0x546d84(0x1db):_0x4e0aa9=!![],_0xeee489=0x2328;break;case'preparing_attack':_0x4e0aa9=!![],_0xeee489=0x1b58;break;case _0x546d84(0x253):_0x4e0aa9=!![],_0xeee489=0x1770;break;case _0x546d84(0x1e6):_0x4e0aa9=!![],_0xeee489=0x61a8;break;}if(_0x4e0aa9){let _0x6ae21=_0xeee489,_0x26d5f6=_0x438397[_0x546d84(0x18a)]&&_0x438397[_0x546d84(0x226)]===ENEMY3_TYPE?0x1388:0x0,_0x555a91=(_0x630625-_0x438397['y'])*0x2,_0x2a25cd=Math['max'](0x0,_0x48adf9*0x1-Math[_0x546d84(0x18e)](_0x438397['x']+_0x438397['width']/0x2-_0x233722))*0x1;_0x6ae21+=_0x555a91+_0x26d5f6+_0x2a25cd,_0x6ae21>_0x5d110b&&(_0x5d110b=_0x6ae21,_0x273051=_0x438397);}}let _0x1cd59f=_0xc65c3a+_0x48adf9/0x2;if(_0x273051){const _0x1b1dc1=_0x273051['x']+_0x273051['width']/0x2,_0x5ab83d=_0x273051['y']+_0x273051[_0x546d84(0x16d)]/0x2,_0x33efbb=_0x4280d1-_0x5ab83d;let _0x5bc817=_0x1b1dc1;if(_0x273051['state']!==_0x546d84(0x1c1)&&_0x273051[_0x546d84(0x180)]!==_0x546d84(0x1e6)){if(_0x33efbb>0x0&&PLAYER_BULLET_SPEED>0.1){const _0x1af630=Math[_0x546d84(0x1a1)](MAX_PREDICTION_TIME,_0x33efbb/PLAYER_BULLET_SPEED);let _0x2041a3=_0x1b1dc1+(_0x273051[_0x546d84(0x1d1)]||0x0)*_0x1af630;_0x5bc817=Math['max'](_0x273051[_0x546d84(0x1ba)]/0x2,Math[_0x546d84(0x1a1)](_0x1c2110-_0x273051[_0x546d84(0x1ba)]/0x2,_0x2041a3));}}_0x1cd59f=_0x5bc817,_0x41cd0c=_0x1cd59f-_0x48adf9/0x2;if(_0x273051[_0x546d84(0x180)]===_0x546d84(0x1c1)||_0x273051[_0x546d84(0x180)]===_0x546d84(0x1e6))_0x41cd0c=Math[_0x546d84(0x225)](AI_EDGE_BUFFER,Math['min'](_0x1c2110-_0x48adf9-AI_EDGE_BUFFER,_0x41cd0c));else{const _0x260cd3=_0x1c2110*0.6/0x2,_0x3ac063=_0x4c561c-_0x260cd3,_0x13f57a=_0x4c561c+_0x260cd3-_0x48adf9;_0x41cd0c=Math['max'](_0x3ac063,Math['min'](_0x13f57a,_0x41cd0c)),_0x41cd0c=Math[_0x546d84(0x225)](AI_EDGE_BUFFER,Math['min'](_0x1c2110-_0x48adf9-AI_EDGE_BUFFER,_0x41cd0c));}let _0x31b5a2=![],_0x41b030=Math[_0x546d84(0x18e)](_0x233722-_0x1cd59f),_0x12ca08=_0x273051[_0x546d84(0x180)]===_0x546d84(0x1c1)||_0x273051['state']===_0x546d84(0x1e6)?_0x48adf9*GRID_SHOOT_ALIGNMENT_FACTOR:_0x48adf9*FINAL_SHOOT_ALIGNMENT_THRESHOLD;const _0x39076a=ship['x']<AI_EDGE_BUFFER*AI_EDGE_SHOOT_BUFFER_FACTOR,_0x5c9dee=ship['x']>_0x1c2110-_0x48adf9-AI_EDGE_SHOOT_BUFFER_FACTOR,_0x14f59d=_0x1cd59f>_0x1c2110*AI_EDGE_SHOOT_TARGET_THRESHOLD_FACTOR,_0x28b34b=_0x1cd59f<_0x1c2110*(0x1-AI_EDGE_SHOOT_TARGET_THRESHOLD_FACTOR);(_0x39076a&&_0x14f59d||_0x5c9dee&&_0x28b34b)&&(_0x31b5a2=!![]);if(!_0x31b5a2&&_0x41b030<_0x12ca08){let _0x4f7244=![];if(_0x273051['state']!==_0x546d84(0x1c1)&&_0x273051[_0x546d84(0x180)]!==_0x546d84(0x1e6))for(const _0x1573ce of enemies){if(!_0x1573ce||_0x1573ce===_0x273051)continue;if(_0xfd45aa&&_0x1573ce['id']===capturingBossId)continue;if(_0x1573ce['y']<_0x4280d1&&_0x1573ce['y']+_0x1573ce[_0x546d84(0x16d)]>_0x273051['y']){const _0x450b2c=_0x1573ce['x']-AI_SHOT_CLEARANCE_BUFFER,_0x397e2c=_0x1573ce['x']+_0x1573ce[_0x546d84(0x1ba)]+AI_SHOT_CLEARANCE_BUFFER;if(_0x1cd59f>_0x450b2c&&_0x1cd59f<_0x397e2c){_0x4f7244=!![];break;}}}!_0x4f7244&&((!_0xfd45aa||_0x273051['id']!==capturingBossId)&&(_0x3238f4=!![]));}}else{const _0x2c4849=Math['sin'](_0x5c490d/AI_WIGGLE_PERIOD*0x2*Math['PI'])*AI_WIGGLE_AMPLITUDE;_0x41cd0c=_0xc65c3a+_0x2c4849,_0x41cd0c=Math[_0x546d84(0x225)](AI_EDGE_BUFFER,Math[_0x546d84(0x1a1)](_0x1c2110-_0x48adf9-AI_EDGE_BUFFER,_0x41cd0c));}}}}}}}ship[_0x546d84(0x17f)]=_0x41cd0c;if(_0x3238f4&&!_0x47332f&&!_0x3f16b6){let _0x1d040d=!![];!isChallengingStage&&(_0x1d040d=_0x5c490d>=aiCanShootTime),_0x1d040d&&_0x5c490d-aiLastShotTime>=AI_SHOOT_COOLDOWN&&(firePlayerBullet(!![])&&(aiLastShotTime=_0x5c490d));}}catch(_0x59f2da){console[_0x546d84(0x23b)](_0x546d84(0x1f9),_0x59f2da,_0x59f2da['stack']);if(ship)ship[_0x546d84(0x17f)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=undefined;}}function findAndDetachEnemy(){const _0x1886e4=_0x1065;try{if(!isFullGridWave&&isShipCaptured){const _0x1bfab8=enemies[_0x1886e4(0x1e1)](_0x1c8fd8=>_0x1c8fd8&&_0x1c8fd8[_0x1886e4(0x226)]===ENEMY3_TYPE&&_0x1c8fd8[_0x1886e4(0x26f)]&&_0x1c8fd8[_0x1886e4(0x180)]===_0x1886e4(0x1c1));if(_0x1bfab8){console['log'](_0x1886e4(0x249)+_0x1bfab8['id']+_0x1886e4(0x182)),_0x1bfab8[_0x1886e4(0x201)]=!![],_0x1bfab8[_0x1886e4(0x205)]='normal';const _0xb0e97c=new Set([_0x1bfab8['id']]);return resetJustReturnedFlags(_0xb0e97c),[_0x1bfab8];}}if(isEntrancePhaseActive)return null;let _0x84c30f=enemies[_0x1886e4(0x189)](_0x4fa1f9=>_0x4fa1f9&&_0x4fa1f9[_0x1886e4(0x180)]===_0x1886e4(0x1c1)&&!_0x4fa1f9['justReturned']);if(_0x84c30f['length']===0x0){_0x84c30f=enemies[_0x1886e4(0x189)](_0x3d67b0=>_0x3d67b0&&_0x3d67b0[_0x1886e4(0x180)]===_0x1886e4(0x1c1));if(_0x84c30f[_0x1886e4(0x172)]===0x0)return null;}if(_0x84c30f['length']===0x0)return null;_0x84c30f[_0x1886e4(0x198)]((_0x41e612,_0x35b1d7)=>(_0x35b1d7['gridRow']||0x0)-(_0x41e612[_0x1886e4(0x209)]||0x0));const _0x46e7b9=_0x84c30f[_0x1886e4(0x172)]<=0x3;let _0x534069=[];const _0x64ba33=_0x1886e4(0x1d3);gridJustCompleted&&(gridJustCompleted=![]);let _0x4061fd=![];if(level>0x1&&!_0x46e7b9&&_0x84c30f[_0x1886e4(0x172)]>=0x3){const _0x2e262a=_0x84c30f[_0x1886e4(0x189)](_0x169339=>_0x169339[_0x1886e4(0x226)]===ENEMY3_TYPE&&!_0x169339[_0x1886e4(0x26f)]);for(const _0x59939b of _0x2e262a){const _0x23dec5=_0x84c30f[_0x1886e4(0x1e1)](_0x292e79=>_0x292e79[_0x1886e4(0x226)]===ENEMY2_TYPE&&_0x292e79[_0x1886e4(0x209)]===_0x59939b[_0x1886e4(0x209)]&&_0x292e79['gridCol']===_0x59939b[_0x1886e4(0x1c8)]-0x1),_0x2b99e7=_0x84c30f[_0x1886e4(0x1e1)](_0x2dfd3f=>_0x2dfd3f[_0x1886e4(0x226)]===ENEMY2_TYPE&&_0x2dfd3f[_0x1886e4(0x209)]===_0x59939b[_0x1886e4(0x209)]&&_0x2dfd3f[_0x1886e4(0x1c8)]===_0x59939b[_0x1886e4(0x1c8)]+0x1);if(_0x23dec5&&_0x2b99e7){_0x534069=[_0x59939b,_0x23dec5,_0x2b99e7],_0x4061fd=!![];break;}}}if(!_0x4061fd&&!_0x46e7b9){const _0x50c771=_0x84c30f[_0x1886e4(0x189)](_0x21e8e6=>_0x21e8e6[_0x1886e4(0x226)]===ENEMY1_TYPE),_0x1abad3=scaleValue(level,BASE_BEE_GROUP_ATTACK_PROBABILITY,MAX_BEE_GROUP_ATTACK_PROBABILITY)*1.2;if(_0x50c771[_0x1886e4(0x172)]>=0x2&&Math[_0x1886e4(0x1f7)]()<_0x1abad3){const _0x197209=scaleValue(level,BASE_BEE_TRIPLE_ATTACK_PROBABILITY,MAX_BEE_TRIPLE_ATTACK_PROBABILITY)*1.1,_0x2e6d08=_0x50c771[_0x1886e4(0x172)]>=0x3&&Math[_0x1886e4(0x1f7)]()<_0x197209?0x3:0x2;let _0x26a94e=![];_0x50c771[_0x1886e4(0x198)](()=>Math['random']()-0.5);for(let _0x268b5e=0x0;_0x268b5e<_0x50c771[_0x1886e4(0x172)];_0x268b5e++){const _0x164a9a=_0x50c771[_0x268b5e];let _0x1d5c6b=[_0x164a9a];const _0x260325=_0x50c771[_0x1886e4(0x189)](_0x3b7345=>_0x3b7345['id']!==_0x164a9a['id']&&_0x3b7345[_0x1886e4(0x209)]===_0x164a9a[_0x1886e4(0x209)]);_0x260325[_0x1886e4(0x198)]((_0x217954,_0x2d45a7)=>Math[_0x1886e4(0x18e)](_0x217954[_0x1886e4(0x1c8)]-_0x164a9a['gridCol'])-Math['abs'](_0x2d45a7[_0x1886e4(0x1c8)]-_0x164a9a[_0x1886e4(0x1c8)]));for(let _0x51119b=0x0;_0x51119b<_0x260325[_0x1886e4(0x172)]&&_0x1d5c6b['length']<_0x2e6d08;_0x51119b++){_0x1d5c6b[_0x1886e4(0x1b6)](_0x260325[_0x51119b]);}if(_0x1d5c6b['length']===_0x2e6d08){_0x534069=_0x1d5c6b,_0x4061fd=!![],_0x26a94e=!![];break;}}!_0x26a94e&&_0x50c771[_0x1886e4(0x172)]>=_0x2e6d08&&(_0x534069=_0x50c771[_0x1886e4(0x221)](0x0,_0x2e6d08),_0x4061fd=!![]);}}if(!_0x4061fd&&!_0x46e7b9){const _0x1ae4a5=_0x84c30f['filter'](_0x4eaaa=>_0x4eaaa[_0x1886e4(0x226)]===ENEMY2_TYPE),_0x1ae1bc=0.2;if(_0x1ae4a5['length']>=0x2&&Math[_0x1886e4(0x1f7)]()<_0x1ae1bc){const _0x126e98=0x2;let _0x3a514a=![];_0x1ae4a5[_0x1886e4(0x198)](()=>Math['random']()-0.5);for(let _0x1a56de=0x0;_0x1a56de<_0x1ae4a5[_0x1886e4(0x172)];_0x1a56de++){const _0x35092c=_0x1ae4a5[_0x1a56de];let _0x2f4db6=[_0x35092c];const _0xcd6e9=_0x1ae4a5[_0x1886e4(0x189)](_0x32671a=>_0x32671a['id']!==_0x35092c['id']&&_0x32671a[_0x1886e4(0x209)]===_0x35092c[_0x1886e4(0x209)]);_0xcd6e9[_0x1886e4(0x198)]((_0x29bd5d,_0x177f18)=>Math[_0x1886e4(0x18e)](_0x29bd5d[_0x1886e4(0x1c8)]-_0x35092c[_0x1886e4(0x1c8)])-Math['abs'](_0x177f18[_0x1886e4(0x1c8)]-_0x35092c[_0x1886e4(0x1c8)]));for(let _0x115f95=0x0;_0x115f95<_0xcd6e9[_0x1886e4(0x172)]&&_0x2f4db6[_0x1886e4(0x172)]<_0x126e98;_0x115f95++){_0x2f4db6[_0x1886e4(0x1b6)](_0xcd6e9[_0x115f95]);}if(_0x2f4db6[_0x1886e4(0x172)]===_0x126e98){_0x534069=_0x2f4db6,_0x4061fd=!![],_0x3a514a=!![];break;}}!_0x3a514a&&_0x1ae4a5[_0x1886e4(0x172)]>=_0x126e98&&(_0x534069=_0x1ae4a5[_0x1886e4(0x221)](0x0,_0x126e98),_0x4061fd=!![]);}}if(!_0x4061fd&&_0x84c30f[_0x1886e4(0x172)]>0x0){const _0x47d3f8=_0x84c30f[0x0];_0x534069[_0x1886e4(0x1b6)](_0x47d3f8);if(_0x84c30f[_0x1886e4(0x172)]>0x1&&!_0x46e7b9&&Math[_0x1886e4(0x1f7)]()<0.2){const _0xe10b1e=_0x84c30f['find'](_0xddd159=>_0xddd159['id']!==_0x47d3f8['id']&&_0xddd159['gridRow']===_0x47d3f8[_0x1886e4(0x209)]&&_0xddd159[_0x1886e4(0x1c8)]===_0x47d3f8[_0x1886e4(0x1c8)]-0x1),_0x3970fa=_0x84c30f[_0x1886e4(0x1e1)](_0x34761c=>_0x34761c['id']!==_0x47d3f8['id']&&_0x34761c[_0x1886e4(0x209)]===_0x47d3f8[_0x1886e4(0x209)]&&_0x34761c[_0x1886e4(0x1c8)]===_0x47d3f8['gridCol']+0x1),_0x339b27=_0xe10b1e||_0x3970fa;if(_0x339b27){const _0x282c6e=_0x47d3f8['type']===ENEMY3_TYPE&&_0x339b27[_0x1886e4(0x226)]===ENEMY3_TYPE;!_0x282c6e&&_0x534069[_0x1886e4(0x1b6)](_0x339b27);}}_0x4061fd=!![];}if(_0x534069['length']>0x0){_0x534069=_0x534069[_0x1886e4(0x189)](_0x4bd9c9=>_0x4bd9c9);if(_0x534069['length']===0x0)return null;_0x534069[_0x1886e4(0x1e0)](_0x918dc3=>{const _0x4e7192=_0x1886e4;_0x918dc3&&(_0x918dc3[_0x4e7192(0x201)]=!![],_0x918dc3['attackType']=_0x64ba33);});const _0x1c86fb=new Set(_0x534069[_0x1886e4(0x247)](_0x57d262=>_0x57d262['id']));return resetJustReturnedFlags(_0x1c86fb),_0x534069;}return null;}catch(_0x23272a){return console[_0x1886e4(0x23b)]('Error\x20in\x20findAndDetachEnemy:',_0x23272a),null;}}function _0x1065(_0x3b97b4,_0x161c57){const _0x329a92=_0x329a();return _0x1065=function(_0x1065bb,_0x504c8f){_0x1065bb=_0x1065bb-0x15a;let _0x24f556=_0x329a92[_0x1065bb];return _0x24f556;},_0x1065(_0x3b97b4,_0x161c57);}function triggerImmediateCaptureDive(){const _0x36ebd7=_0x1065;try{if(playerLives<=0x1||isChallengingStage||isShipCaptured||isDualShipActive||captureAttemptMadeThisLevel)return;const _0x217f70=enemies['filter'](_0x580cd9=>_0x580cd9&&_0x580cd9[_0x36ebd7(0x180)]===_0x36ebd7(0x1c1)&&_0x580cd9[_0x36ebd7(0x226)]===ENEMY3_TYPE&&!_0x580cd9[_0x36ebd7(0x26f)]);if(_0x217f70[_0x36ebd7(0x172)]>0x0){const _0x46ff96=_0x217f70[Math[_0x36ebd7(0x185)](Math['random']()*_0x217f70[_0x36ebd7(0x172)])],_0x9dacf5=Date[_0x36ebd7(0x1e7)]();captureAttemptMadeThisLevel=!![],_0x46ff96[_0x36ebd7(0x201)]=!![];const _0x3e769e=new Set([_0x46ff96['id']]);resetJustReturnedFlags(_0x3e769e);const _0x532497=Math[_0x36ebd7(0x1f7)]()<0.5?'left':_0x36ebd7(0x219),_0x1aaca2=_0x532497==='left'?gameCanvas[_0x36ebd7(0x1ba)]*CAPTURE_DIVE_SIDE_MARGIN_FACTOR:gameCanvas['width']*(0x1-CAPTURE_DIVE_SIDE_MARGIN_FACTOR)-BOSS_WIDTH,_0x461b8f=gameCanvas[_0x36ebd7(0x16d)]*CAPTURE_DIVE_BOTTOM_HOVER_Y_FACTOR;_0x46ff96['state']=_0x36ebd7(0x1e6),_0x46ff96[_0x36ebd7(0x17f)]=_0x1aaca2,_0x46ff96[_0x36ebd7(0x229)]=_0x461b8f,_0x46ff96[_0x36ebd7(0x19a)]=_0x9dacf5,playSound(bossGalagaDiveSound);const _0x403b6f=_0x46ff96['id'];_0x46ff96[_0x36ebd7(0x259)]=setTimeout(()=>{const _0x253367=_0x36ebd7,_0x96f7cd=enemies[_0x253367(0x1e1)](_0x38efb1=>_0x38efb1?.['id']===_0x403b6f);_0x96f7cd&&_0x96f7cd[_0x253367(0x180)]===_0x253367(0x1e6)&&(_0x96f7cd[_0x253367(0x180)]=_0x253367(0x1ed));if(_0x96f7cd)_0x96f7cd[_0x253367(0x259)]=null;const _0x13f470=enemySpawnTimeouts['findIndex'](_0xa69f89=>_0xa69f89===_0x46ff96[_0x253367(0x259)]);if(_0x13f470>-0x1)enemySpawnTimeouts[_0x253367(0x19d)](_0x13f470,0x1);},0x12c),enemySpawnTimeouts[_0x36ebd7(0x1b6)](_0x46ff96[_0x36ebd7(0x259)]);}else{}}catch(_0x25e8ba){console['error'](_0x36ebd7(0x21c),_0x25e8ba);}}function resetJustReturnedFlags(_0x300fc8){const _0x3699ab=_0x1065;enemies[_0x3699ab(0x1e0)](_0x2a4bca=>{const _0x3ab587=_0x3699ab;let _0x3ed329=![];if(_0x300fc8 instanceof Set)_0x3ed329=_0x300fc8[_0x3ab587(0x252)](_0x2a4bca['id']);else typeof _0x300fc8==='string'&&(_0x3ed329=_0x2a4bca['id']===_0x300fc8);_0x2a4bca&&_0x2a4bca[_0x3ab587(0x180)]===_0x3ab587(0x1c1)&&_0x2a4bca[_0x3ab587(0x201)]&&!_0x3ed329&&(_0x2a4bca[_0x3ab587(0x201)]=![]);});}function updateFloatingScores(){const _0x302395=_0x1065;if(isPaused)return;try{const _0xa636c6=Date[_0x302395(0x1e7)]();floatingScores=floatingScores['filter'](_0x1b53c0=>_0xa636c6-_0x1b53c0['creationTime']<FLOATING_SCORE_DURATION+FLOATING_SCORE_APPEAR_DELAY);}catch(_0x185f8f){console[_0x302395(0x23b)](_0x302395(0x1cc),_0x185f8f),floatingScores=[];}}function updateExplosions(){const _0x4dca16=_0x1065;if(isPaused)return;try{const _0x4f31d1=Date[_0x4dca16(0x1e7)]();for(let _0x22ce26=explosions['length']-0x1;_0x22ce26>=0x0;_0x22ce26--){const _0x1b8e85=explosions[_0x22ce26],_0xb9ddba=_0x4f31d1-_0x1b8e85[_0x4dca16(0x1c7)];if(_0xb9ddba>_0x1b8e85[_0x4dca16(0x22f)]){explosions[_0x4dca16(0x19d)](_0x22ce26,0x1);continue;}_0x1b8e85[_0x4dca16(0x207)][_0x4dca16(0x1e0)](_0x1314dd=>{const _0x294ed1=_0x4dca16;_0x1314dd['x']+=_0x1314dd['vx'],_0x1314dd['y']+=_0x1314dd['vy'],_0x1314dd[_0x294ed1(0x20b)]=Math[_0x294ed1(0x225)](0x0,0x1-_0xb9ddba/_0x1b8e85[_0x294ed1(0x22f)]*EXPLOSION_FADE_SPEED);});}}catch(_0x21917d){console['error'](_0x4dca16(0x1ae),_0x21917d),explosions=[];}}function moveEntities(){const _0xca82ac=_0x1065;if(isPaused)return;try{if(ship&&isInGameState&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isWaitingForRespawn){let _0x30c239=ship['width'];isDualShipActive&&(_0x30c239+=DUAL_SHIP_OFFSET_X);let _0x242e6d=ship['x'];if(isManualControl){let _0x3ed2d5=![],_0x20c48b=![];currentPlayer===0x1||!isTwoPlayerMode?(_0x3ed2d5=leftPressed,_0x20c48b=rightPressed):(_0x3ed2d5=p2LeftPressed,_0x20c48b=p2RightPressed);if(_0x3ed2d5&&ship['x']>0x0)_0x242e6d=ship['x']-ship[_0xca82ac(0x166)];else _0x20c48b&&ship['x']<gameCanvas[_0xca82ac(0x1ba)]-_0x30c239&&(_0x242e6d=ship['x']+ship[_0xca82ac(0x166)]);ship['x']=Math['max'](0x0,Math[_0xca82ac(0x1a1)](gameCanvas['width']-_0x30c239,_0x242e6d)),ship['targetX']=ship['x'];}else{if(typeof smoothedShipX!==_0xca82ac(0x1a2)){const _0x55800c=0.1,_0x2faf5c=1.2;smoothedShipX+=(ship['targetX']-smoothedShipX)*AI_SMOOTHING_FACTOR_MOVE;const _0x5c478c=smoothedShipX-ship['x'],_0x5b2bf9=ship['speed']*_0x2faf5c;let _0x5793d2=0x0;if(Math[_0xca82ac(0x18e)](_0x5c478c)>_0x55800c){const _0x126a5e=isChallengingStage?CS_AI_MOVE_FRACTION:NORMAL_MOVE_FRACTION;_0x5793d2=_0x5c478c*_0x126a5e,_0x5793d2=Math[_0xca82ac(0x225)](-_0x5b2bf9,Math[_0xca82ac(0x1a1)](_0x5b2bf9,_0x5793d2)),Math[_0xca82ac(0x18e)](_0x5793d2)>Math[_0xca82ac(0x18e)](_0x5c478c)&&(_0x5793d2=_0x5c478c),ship['x']+=_0x5793d2,ship['x']=Math[_0xca82ac(0x225)](0x0,Math[_0xca82ac(0x1a1)](gameCanvas[_0xca82ac(0x1ba)]-_0x30c239,ship['x']));}}else ship['x']=Math[_0xca82ac(0x225)](0x0,Math[_0xca82ac(0x1a1)](gameCanvas[_0xca82ac(0x1ba)]-_0x30c239,ship[_0xca82ac(0x17f)]));}}const _0x2e8c88=Date['now']();for(let _0x4ae877=bullets[_0xca82ac(0x172)]-0x1;_0x4ae877>=0x0;_0x4ae877--){const _0x5a92c5=bullets[_0x4ae877];_0x5a92c5?(_0x5a92c5['y']-=_0x5a92c5[_0xca82ac(0x166)],_0x5a92c5['y']+PLAYER_BULLET_HEIGHT<0x0&&bullets['splice'](_0x4ae877,0x1)):bullets['splice'](_0x4ae877,0x1);}for(let _0x344da9=enemyBullets['length']-0x1;_0x344da9>=0x0;_0x344da9--){const _0x23ae16=enemyBullets[_0x344da9];if(!_0x23ae16){enemyBullets[_0xca82ac(0x19d)](_0x344da9,0x1);continue;}_0x23ae16['x']+=_0x23ae16['vx'],_0x23ae16['y']+=_0x23ae16['vy'],(_0x23ae16['y']>gameCanvas[_0xca82ac(0x16d)]||_0x23ae16['y']<-ENEMY_BULLET_HEIGHT||_0x23ae16['x']<-ENEMY_BULLET_WIDTH||_0x23ae16['x']>gameCanvas['width'])&&enemyBullets[_0xca82ac(0x19d)](_0x344da9,0x1);}for(let _0x441033=fallingShips[_0xca82ac(0x172)]-0x1;_0x441033>=0x0;_0x441033--){const _0x4e1f3b=fallingShips[_0x441033];if(!_0x4e1f3b){fallingShips[_0xca82ac(0x19d)](_0x441033,0x1);continue;}_0x4e1f3b['y']+=FALLING_SHIP_SPEED;const _0x2a4337=_0x2e8c88-_0x4e1f3b[_0xca82ac(0x1c7)];typeof _0x4e1f3b[_0xca82ac(0x169)]==='number'?_0x4e1f3b[_0xca82ac(0x169)]=Math[_0xca82ac(0x225)](0x0,0x1-_0x2a4337/FALLING_SHIP_FADE_DURATION_MS):_0x4e1f3b[_0xca82ac(0x169)]=0x0;if(typeof _0x4e1f3b['rotation']===_0xca82ac(0x212)){const _0x4eb713=Math['min'](0x1,_0x2a4337/FALLING_SHIP_ROTATION_DURATION_MS);_0x4e1f3b[_0xca82ac(0x190)]=_0x4eb713*0x2*(0x2*Math['PI']);}else _0x4e1f3b[_0xca82ac(0x190)]=0x0;if(ship&&!isDualShipActive&&!isShipCaptured&&!isWaitingForRespawn&&_0x4e1f3b['y']+_0x4e1f3b[_0xca82ac(0x16d)]>=gameCanvas[_0xca82ac(0x16d)]-AUTO_DOCK_THRESHOLD){fallingShips['splice'](_0x441033,0x1),isDualShipActive=!![];currentPlayer===0x1?player1IsDualShipActive=!![]:player2IsDualShipActive=!![];playSound(dualShipSound);continue;}_0x4e1f3b['y']>gameCanvas[_0xca82ac(0x16d)]+_0x4e1f3b[_0xca82ac(0x16d)]&&fallingShips['splice'](_0x441033,0x1);}let _0x36ca5d=0x0;const _0xc14e30=enemies['some'](_0x19bf28=>_0x19bf28?.[_0xca82ac(0x180)]===_0xca82ac(0x1c1)),_0x218475=!isChallengingStage&&!isWaveTransitioning&&_0xc14e30&&!isShowingPlayerGameOverMessage;if(_0x218475){!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound));const _0x2c6c20=enemies[_0xca82ac(0x189)](_0x8cf87e=>_0x8cf87e?.[_0xca82ac(0x180)]===_0xca82ac(0x1c1));if(_0x2c6c20['length']>0x0){let _0x576fc2=gameCanvas[_0xca82ac(0x1ba)],_0x151507=0x0;_0x2c6c20[_0xca82ac(0x1e0)](_0xafc5e6=>{const _0x52b2bf=_0xca82ac;_0xafc5e6&&(_0x576fc2=Math['min'](_0x576fc2,_0xafc5e6['x']),_0x151507=Math[_0x52b2bf(0x225)](_0x151507,_0xafc5e6['x']+_0xafc5e6['width']));});const _0x3350aa=gameCanvas['width']*GRID_HORIZONTAL_MARGIN_PERCENT,_0x3ea9e8=gameCanvas[_0xca82ac(0x1ba)]*(0x1-GRID_HORIZONTAL_MARGIN_PERCENT);if(gridMoveDirection===0x1&&_0x151507>=_0x3ea9e8)gridMoveDirection=-0x1;else gridMoveDirection===-0x1&&_0x576fc2<=_0x3350aa&&(gridMoveDirection=0x1);const _0x1217d6=scaleValue(level,BASE_GRID_MOVE_SPEED,MAX_GRID_MOVE_SPEED);_0x36ca5d=_0x1217d6*gridMoveDirection,currentGridOffsetX+=_0x36ca5d,enemies[_0xca82ac(0x1e0)](_0x375fe0=>{const _0x4e55e9=_0xca82ac;if(_0x375fe0&&(_0x375fe0[_0x4e55e9(0x180)]===_0x4e55e9(0x1db)||_0x375fe0['state']==='in_grid'||_0x375fe0[_0x4e55e9(0x180)]===_0x4e55e9(0x271)))try{const _0x21a5cc=_0x375fe0[_0x4e55e9(0x226)]===ENEMY3_TYPE?BOSS_WIDTH:_0x375fe0[_0x4e55e9(0x226)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0xf618b5,y:_0x32d8a5}=getCurrentGridSlotPosition(_0x375fe0[_0x4e55e9(0x209)],_0x375fe0[_0x4e55e9(0x1c8)],_0x21a5cc);_0x375fe0['targetGridX']=_0xf618b5,_0x375fe0[_0x4e55e9(0x1cf)]=_0x32d8a5;}catch(_0x21d6f5){console[_0x4e55e9(0x23b)]('Error\x20updating\x20target\x20grid\x20pos\x20for\x20enemy\x20'+_0x375fe0?.['id']+_0x4e55e9(0x1fe)+_0x375fe0?.['state']+_0x4e55e9(0x16e),_0x21d6f5);}});}}else isGridSoundPlaying&&(stopSound(gridBackgroundSound),isGridSoundPlaying=![]),_0x36ca5d=0x0;for(let _0x56a3e7=enemies['length']-0x1;_0x56a3e7>=0x0;_0x56a3e7--){let _0x4e0e54=enemies[_0x56a3e7];if(!_0x4e0e54)continue;const _0x1af3c5=_0x4e0e54['id'];if(_0x4e0e54['capturePrepareTimeout']&&_0x4e0e54[_0xca82ac(0x180)]!==_0xca82ac(0x1e6)){clearTimeout(_0x4e0e54[_0xca82ac(0x259)]);const _0xda8e35=enemySpawnTimeouts[_0xca82ac(0x223)](_0x4e0e54[_0xca82ac(0x259)]);if(_0xda8e35>-0x1)enemySpawnTimeouts[_0xca82ac(0x19d)](_0xda8e35,0x1);_0x4e0e54[_0xca82ac(0x259)]=null;}const _0x5dc727=_0x4e0e54[_0xca82ac(0x226)]===ENEMY3_TYPE?BOSS_WIDTH:_0x4e0e54[_0xca82ac(0x226)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x12bcfc=_0x4e0e54[_0xca82ac(0x226)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x4e0e54[_0xca82ac(0x226)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT;switch(_0x4e0e54[_0xca82ac(0x180)]){case'following_bezier_path':{let _0x811ab7=CS_ENTRANCE_PATH_SPEED;const _0x1b22bd=_0x4e0e54[_0xca82ac(0x178)]||0x1;_0x811ab7*=_0x1b22bd;if(!isChallengingStage){enemies[_0xca82ac(0x19d)](_0x56a3e7,0x1),_0x4e0e54=null;break;}let _0x1ad213=challengingStagePaths,_0x3622c8=_0x1ad213[_0x4e0e54[_0xca82ac(0x22c)]];if(!_0x3622c8||_0x4e0e54['pathSegmentIndex']>=_0x3622c8['length']){enemies[_0xca82ac(0x19d)](_0x56a3e7,0x1),_0x4e0e54=null;break;}const _0x576791=_0x3622c8[_0x4e0e54[_0xca82ac(0x26c)]];if(!_0x576791||!_0x576791['p0']||!_0x576791['p1']||!_0x576791['p2']||!_0x576791['p3']){console[_0xca82ac(0x23b)](_0xca82ac(0x21f)+_0x4e0e54[_0xca82ac(0x26c)]+_0xca82ac(0x173)+_0x4e0e54['entrancePathId']+'.\x20Enemy\x20'+_0x4e0e54['id']),enemies[_0xca82ac(0x19d)](_0x56a3e7,0x1),_0x4e0e54=null;break;}_0x4e0e54['pathT']+=_0x811ab7;let _0x68e303,_0x1ac805,_0x851490=_0x4e0e54['x'],_0x3fba42=_0x4e0e54['y'];if(_0x4e0e54['pathT']>=0x1){_0x4e0e54['pathT']=0x0,_0x4e0e54[_0xca82ac(0x26c)]++;if(_0x4e0e54[_0xca82ac(0x26c)]>=_0x3622c8['length'])enemies[_0xca82ac(0x19d)](_0x56a3e7,0x1),_0x4e0e54=null;else{const _0x5950af=_0x3622c8[_0x4e0e54[_0xca82ac(0x26c)]];_0x5950af?.['p0']?(_0x68e303=_0x5950af['p0']['x'],_0x1ac805=_0x5950af['p0']['y']):(console['error'](_0xca82ac(0x160)+_0x4e0e54[_0xca82ac(0x26c)]+_0xca82ac(0x173)+_0x4e0e54['entrancePathId']+_0xca82ac(0x1a8)+_0x1af3c5),enemies[_0xca82ac(0x19d)](_0x56a3e7,0x1),_0x4e0e54=null);}}else try{_0x68e303=calculateBezierPoint(_0x4e0e54[_0xca82ac(0x177)],_0x576791['p0']['x'],_0x576791['p1']['x'],_0x576791['p2']['x'],_0x576791['p3']['x']),_0x1ac805=calculateBezierPoint(_0x4e0e54[_0xca82ac(0x177)],_0x576791['p0']['y'],_0x576791['p1']['y'],_0x576791['p2']['y'],_0x576791['p3']['y']);}catch(_0x277e53){console[_0xca82ac(0x23b)](_0xca82ac(0x214)+_0x1af3c5+':',_0x277e53),enemies[_0xca82ac(0x19d)](_0x56a3e7,0x1),_0x4e0e54=null;}_0x4e0e54&&(isNaN(_0x68e303)||isNaN(_0x1ac805)?(console['error']('NaN\x20detected\x20in\x20CS\x20path\x20calculation\x20for\x20enemy\x20'+_0x1af3c5+_0xca82ac(0x262)),enemies[_0xca82ac(0x19d)](_0x56a3e7,0x1),_0x4e0e54=null):(_0x4e0e54[_0xca82ac(0x1d1)]=_0x68e303-_0x851490,_0x4e0e54[_0xca82ac(0x15e)]=_0x1ac805-_0x3fba42,_0x4e0e54['x']=_0x68e303,_0x4e0e54['y']=_0x1ac805));break;}case _0xca82ac(0x20a):{if(isChallengingStage){enemies[_0xca82ac(0x19d)](_0x56a3e7,0x1),_0x4e0e54=null;break;}let _0x264475=normalWaveEntrancePaths,_0x2dc5c7=_0x264475[_0x4e0e54[_0xca82ac(0x22c)]],_0x6732b8;_0x4e0e54['entrancePathId']===_0xca82ac(0x20e)||_0x4e0e54[_0xca82ac(0x22c)]===_0xca82ac(0x1f5)?_0x6732b8=BOSS_LOOP_ENTRANCE_PATH_SPEED:_0x6732b8=NORMAL_ENTRANCE_PATH_SPEED;if(!_0x2dc5c7){console[_0xca82ac(0x16a)]('Enemy\x20'+_0x1af3c5+_0xca82ac(0x1fa)+_0x4e0e54['entrancePathId']+_0xca82ac(0x162));try{_0x4e0e54[_0xca82ac(0x1e5)]=_0x4e0e54[_0xca82ac(0x1e5)]??gameCanvas[_0xca82ac(0x1ba)]/0x2,_0x4e0e54['targetGridY']=_0x4e0e54[_0xca82ac(0x1cf)]??ENEMY_TOP_MARGIN;}catch(_0x962867){console[_0xca82ac(0x23b)](_0xca82ac(0x21e)+_0x1af3c5+'\x20after\x20missing\x20path',_0x962867),_0x4e0e54[_0xca82ac(0x1e5)]=gameCanvas[_0xca82ac(0x1ba)]/0x2,_0x4e0e54[_0xca82ac(0x1cf)]=ENEMY_TOP_MARGIN;}_0x4e0e54[_0xca82ac(0x180)]=_0xca82ac(0x271),_0x4e0e54[_0xca82ac(0x177)]=0x0,_0x4e0e54[_0xca82ac(0x26c)]=0x0,_0x4e0e54[_0xca82ac(0x1d1)]=0x0,_0x4e0e54[_0xca82ac(0x15e)]=0x0;_0x4e0e54[_0xca82ac(0x25a)]!==undefined&&squadronCompletionStatus[_0x4e0e54['squadronId']]&&squadronCompletionStatus[_0x4e0e54[_0xca82ac(0x25a)]][_0xca82ac(0x184)]++;break;}if(_0x4e0e54['pathSegmentIndex']>=_0x2dc5c7[_0xca82ac(0x172)]){console[_0xca82ac(0x16a)](_0xca82ac(0x188)+_0x1af3c5+'\x20path\x20index\x20'+_0x4e0e54['pathSegmentIndex']+_0xca82ac(0x183)+_0x4e0e54[_0xca82ac(0x22c)]+_0xca82ac(0x162));try{_0x4e0e54[_0xca82ac(0x1e5)]=_0x4e0e54[_0xca82ac(0x1e5)]??gameCanvas[_0xca82ac(0x1ba)]/0x2,_0x4e0e54[_0xca82ac(0x1cf)]=_0x4e0e54[_0xca82ac(0x1cf)]??ENEMY_TOP_MARGIN;}catch(_0x4166e5){console['error'](_0xca82ac(0x21e)+_0x1af3c5+_0xca82ac(0x254),_0x4166e5),_0x4e0e54[_0xca82ac(0x1e5)]=gameCanvas[_0xca82ac(0x1ba)]/0x2,_0x4e0e54[_0xca82ac(0x1cf)]=ENEMY_TOP_MARGIN;}_0x4e0e54[_0xca82ac(0x180)]=_0xca82ac(0x271),_0x4e0e54[_0xca82ac(0x177)]=0x0,_0x4e0e54[_0xca82ac(0x26c)]=0x0,_0x4e0e54['velocityX']=0x0,_0x4e0e54[_0xca82ac(0x15e)]=0x0;_0x4e0e54[_0xca82ac(0x25a)]!==undefined&&squadronCompletionStatus[_0x4e0e54['squadronId']]&&squadronCompletionStatus[_0x4e0e54[_0xca82ac(0x25a)]][_0xca82ac(0x184)]++;break;}const _0x2aa860=_0x2dc5c7[_0x4e0e54[_0xca82ac(0x26c)]];if(!_0x2aa860||!_0x2aa860['p0']||!_0x2aa860['p1']||!_0x2aa860['p2']||!_0x2aa860['p3']){console[_0xca82ac(0x23b)]('Invalid\x20Normal\x20Bezier\x20segment\x20'+_0x4e0e54[_0xca82ac(0x26c)]+'\x20for\x20SHARED\x20path\x20'+_0x4e0e54[_0xca82ac(0x22c)]+_0xca82ac(0x1a8)+_0x1af3c5+_0xca82ac(0x162));try{_0x4e0e54['targetGridX']=_0x4e0e54['targetGridX']??gameCanvas[_0xca82ac(0x1ba)]/0x2,_0x4e0e54['targetGridY']=_0x4e0e54[_0xca82ac(0x1cf)]??ENEMY_TOP_MARGIN+_0x4e0e54[_0xca82ac(0x209)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}catch(_0x31bc43){console['error'](_0xca82ac(0x21e)+_0x1af3c5+'\x20after\x20bad\x20segment',_0x31bc43),_0x4e0e54['targetGridX']=gameCanvas['width']/0x2,_0x4e0e54['targetGridY']=ENEMY_TOP_MARGIN;}_0x4e0e54[_0xca82ac(0x180)]=_0xca82ac(0x271),_0x4e0e54[_0xca82ac(0x177)]=0x0,_0x4e0e54[_0xca82ac(0x26c)]=0x0,_0x4e0e54[_0xca82ac(0x1d1)]=0x0,_0x4e0e54[_0xca82ac(0x15e)]=0x0;_0x4e0e54[_0xca82ac(0x25a)]!==undefined&&squadronCompletionStatus[_0x4e0e54['squadronId']]&&squadronCompletionStatus[_0x4e0e54[_0xca82ac(0x25a)]]['completed']++;break;}_0x4e0e54[_0xca82ac(0x177)]+=_0x6732b8;let _0x113101,_0x555b70,_0x228f4b=_0x4e0e54['x'],_0x5439c5=_0x4e0e54['y'];if(_0x4e0e54['pathT']>=0x1){_0x4e0e54['pathT']=0x0,_0x4e0e54[_0xca82ac(0x26c)]++;if(_0x4e0e54[_0xca82ac(0x26c)]>=_0x2dc5c7[_0xca82ac(0x172)]){let _0x2838e9,_0x19f4b2;try{_0x2838e9=calculateBezierPoint(0x1,_0x2aa860['p0']['x'],_0x2aa860['p1']['x'],_0x2aa860['p2']['x'],_0x2aa860['p3']['x']),_0x19f4b2=calculateBezierPoint(0x1,_0x2aa860['p0']['y'],_0x2aa860['p1']['y'],_0x2aa860['p2']['y'],_0x2aa860['p3']['y']);}catch(_0x53277c){console[_0xca82ac(0x23b)](_0xca82ac(0x232)+_0x1af3c5+_0xca82ac(0x1f4)+_0x4e0e54[_0xca82ac(0x22c)],_0x53277c),_0x2838e9=_0x2aa860['p3']['x'],_0x19f4b2=_0x2aa860['p3']['y'];}_0x4e0e54['x']=_0x2838e9,_0x4e0e54['y']=_0x19f4b2;try{_0x4e0e54[_0xca82ac(0x1e5)]=_0x4e0e54[_0xca82ac(0x1e5)]??gameCanvas[_0xca82ac(0x1ba)]/0x2,_0x4e0e54[_0xca82ac(0x1cf)]=_0x4e0e54[_0xca82ac(0x1cf)]??ENEMY_TOP_MARGIN;}catch(_0x5abdb6){console[_0xca82ac(0x23b)](_0xca82ac(0x179)+_0x1af3c5+_0xca82ac(0x1f4)+_0x4e0e54['entrancePathId'],_0x5abdb6),_0x4e0e54[_0xca82ac(0x1e5)]=_0x4e0e54['x'],_0x4e0e54['targetGridY']=ENEMY_TOP_MARGIN+_0x4e0e54[_0xca82ac(0x209)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x56d221=_0x4e0e54[_0xca82ac(0x180)];_0x4e0e54[_0xca82ac(0x180)]=_0xca82ac(0x271),_0x4e0e54[_0xca82ac(0x1d1)]=0x0,_0x4e0e54[_0xca82ac(0x15e)]=0x0,_0x4e0e54[_0xca82ac(0x26c)]=0x0;_0x56d221===_0xca82ac(0x20a)&&_0x4e0e54[_0xca82ac(0x25a)]!==undefined&&squadronCompletionStatus[_0x4e0e54[_0xca82ac(0x25a)]]&&squadronCompletionStatus[_0x4e0e54['squadronId']][_0xca82ac(0x184)]++;break;}else{const _0x46ca5b=_0x2dc5c7[_0x4e0e54[_0xca82ac(0x26c)]];if(_0x46ca5b?.['p0'])_0x113101=_0x46ca5b['p0']['x'],_0x555b70=_0x46ca5b['p0']['y'];else{console['error'](_0xca82ac(0x224)+_0x4e0e54['pathSegmentIndex']+_0xca82ac(0x1b2)+_0x4e0e54[_0xca82ac(0x22c)]+_0xca82ac(0x1a8)+_0x1af3c5+'.\x20Switching\x20to\x20moving_to_grid.');try{_0x4e0e54[_0xca82ac(0x1e5)]=_0x4e0e54[_0xca82ac(0x1e5)]??gameCanvas[_0xca82ac(0x1ba)]/0x2,_0x4e0e54['targetGridY']=_0x4e0e54[_0xca82ac(0x1cf)]??ENEMY_TOP_MARGIN;}catch(_0x584a33){console['error'](_0xca82ac(0x21e)+_0x1af3c5+_0xca82ac(0x161),_0x584a33),_0x4e0e54[_0xca82ac(0x1e5)]=gameCanvas[_0xca82ac(0x1ba)]/0x2,_0x4e0e54[_0xca82ac(0x1cf)]=ENEMY_TOP_MARGIN;}_0x4e0e54[_0xca82ac(0x180)]=_0xca82ac(0x271),_0x4e0e54[_0xca82ac(0x177)]=0x0,_0x4e0e54[_0xca82ac(0x26c)]=0x0,_0x4e0e54[_0xca82ac(0x1d1)]=0x0,_0x4e0e54['velocityY']=0x0;_0x4e0e54['squadronId']!==undefined&&squadronCompletionStatus[_0x4e0e54[_0xca82ac(0x25a)]]&&squadronCompletionStatus[_0x4e0e54[_0xca82ac(0x25a)]]['completed']++;break;}}}else try{_0x113101=calculateBezierPoint(_0x4e0e54[_0xca82ac(0x177)],_0x2aa860['p0']['x'],_0x2aa860['p1']['x'],_0x2aa860['p2']['x'],_0x2aa860['p3']['x']),_0x555b70=calculateBezierPoint(_0x4e0e54[_0xca82ac(0x177)],_0x2aa860['p0']['y'],_0x2aa860['p1']['y'],_0x2aa860['p2']['y'],_0x2aa860['p3']['y']);}catch(_0x411228){console[_0xca82ac(0x23b)](_0xca82ac(0x18f)+_0x1af3c5+':',_0x411228);try{_0x4e0e54['targetGridX']=_0x4e0e54['targetGridX']??gameCanvas[_0xca82ac(0x1ba)]/0x2,_0x4e0e54[_0xca82ac(0x1cf)]=_0x4e0e54['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x5eefbb){console[_0xca82ac(0x23b)](_0xca82ac(0x21e)+_0x1af3c5+_0xca82ac(0x240),_0x5eefbb),_0x4e0e54[_0xca82ac(0x1e5)]=gameCanvas[_0xca82ac(0x1ba)]/0x2,_0x4e0e54[_0xca82ac(0x1cf)]=ENEMY_TOP_MARGIN;}_0x4e0e54[_0xca82ac(0x180)]=_0xca82ac(0x271),_0x4e0e54[_0xca82ac(0x177)]=0x0,_0x4e0e54[_0xca82ac(0x26c)]=0x0,_0x4e0e54[_0xca82ac(0x1d1)]=0x0,_0x4e0e54[_0xca82ac(0x15e)]=0x0;_0x4e0e54['squadronId']!==undefined&&squadronCompletionStatus[_0x4e0e54[_0xca82ac(0x25a)]]&&squadronCompletionStatus[_0x4e0e54[_0xca82ac(0x25a)]][_0xca82ac(0x184)]++;break;}if(_0x4e0e54&&_0x4e0e54['state']==='following_entrance_path'){if(isNaN(_0x113101)||isNaN(_0x555b70)){console[_0xca82ac(0x23b)]('NaN\x20detected\x20in\x20Normal\x20path\x20calculation\x20for\x20enemy\x20'+_0x1af3c5+_0xca82ac(0x162));try{_0x4e0e54[_0xca82ac(0x1e5)]=_0x4e0e54['targetGridX']??gameCanvas[_0xca82ac(0x1ba)]/0x2,_0x4e0e54[_0xca82ac(0x1cf)]=_0x4e0e54[_0xca82ac(0x1cf)]??ENEMY_TOP_MARGIN;}catch(_0x432d5a){console[_0xca82ac(0x23b)](_0xca82ac(0x21e)+_0x1af3c5+_0xca82ac(0x15a),_0x432d5a),_0x4e0e54[_0xca82ac(0x1e5)]=gameCanvas[_0xca82ac(0x1ba)]/0x2,_0x4e0e54[_0xca82ac(0x1cf)]=ENEMY_TOP_MARGIN;}_0x4e0e54[_0xca82ac(0x180)]=_0xca82ac(0x271),_0x4e0e54[_0xca82ac(0x177)]=0x0,_0x4e0e54[_0xca82ac(0x26c)]=0x0,_0x4e0e54[_0xca82ac(0x1d1)]=0x0,_0x4e0e54[_0xca82ac(0x15e)]=0x0,_0x4e0e54[_0xca82ac(0x25a)]!==undefined&&squadronCompletionStatus[_0x4e0e54[_0xca82ac(0x25a)]]&&squadronCompletionStatus[_0x4e0e54[_0xca82ac(0x25a)]][_0xca82ac(0x184)]++;}else{let _0x4839ad=_0x113101;const _0x378d4f=currentWavePatternIndex===0x1&&(_0x4e0e54[_0xca82ac(0x25a)]===0x2||_0x4e0e54['squadronId']===0x3),_0x69aa5f=typeof _0x4e0e54['squadronEnemyIndex']==='number'&&_0x4e0e54['squadronEnemyIndex']%0x2!==0x0;if(_0x378d4f&&_0x69aa5f){const _0xf8b14e=_0x5dc727+ENTRANCE_PAIR_HORIZONTAL_GAP;_0x4839ad=_0x113101+_0xf8b14e;}_0x4e0e54[_0xca82ac(0x1d1)]=_0x4839ad-_0x228f4b,_0x4e0e54['velocityY']=_0x555b70-_0x5439c5,_0x4e0e54['x']=_0x4839ad,_0x4e0e54['y']=_0x555b70;}}break;}case _0xca82ac(0x271):{if(_0x4e0e54[_0xca82ac(0x1e5)]==null||_0x4e0e54[_0xca82ac(0x1cf)]==null){console['warn'](_0xca82ac(0x188)+_0x1af3c5+_0xca82ac(0x228));try{const {x:_0x467a4f,y:_0x5c153b}=getCurrentGridSlotPosition(_0x4e0e54[_0xca82ac(0x209)],_0x4e0e54[_0xca82ac(0x1c8)],_0x5dc727);_0x4e0e54[_0xca82ac(0x1e5)]=_0x467a4f,_0x4e0e54[_0xca82ac(0x1cf)]=_0x5c153b;}catch(_0x5e399f){console['error'](_0xca82ac(0x21e)+_0x1af3c5+_0xca82ac(0x239),_0x5e399f),_0x4e0e54[_0xca82ac(0x180)]=_0xca82ac(0x1c1),_0x4e0e54['x']=gameCanvas['width']/0x2,_0x4e0e54['y']=ENEMY_TOP_MARGIN;break;}}const _0x41026c=_0x4e0e54[_0xca82ac(0x1e5)],_0x486a2f=_0x4e0e54[_0xca82ac(0x1cf)],_0x5db92e=_0x41026c-_0x4e0e54['x'],_0x1238b8=_0x486a2f-_0x4e0e54['y'],_0x1ffa04=Math[_0xca82ac(0x1ac)](_0x5db92e*_0x5db92e+_0x1238b8*_0x1238b8),_0x3bff10=ENTRANCE_SPEED*1.2,_0x2dcf18=_0x3bff10*0.5;if(_0x1ffa04>_0x2dcf18)_0x4e0e54[_0xca82ac(0x1d1)]=_0x5db92e/_0x1ffa04*_0x3bff10,_0x4e0e54[_0xca82ac(0x15e)]=_0x1238b8/_0x1ffa04*_0x3bff10,_0x4e0e54['x']+=_0x4e0e54[_0xca82ac(0x1d1)],_0x4e0e54['y']+=_0x4e0e54['velocityY'];else{_0x4e0e54['x']=_0x41026c,_0x4e0e54['y']=_0x486a2f,_0x4e0e54[_0xca82ac(0x1d1)]=0x0,_0x4e0e54[_0xca82ac(0x15e)]=0x0;const _0x348d13=_0x4e0e54[_0xca82ac(0x180)];_0x4e0e54['state']=_0xca82ac(0x1c1),_0x4e0e54[_0xca82ac(0x201)]=![];!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound));GRID_BREATH_ENABLED&&!isGridBreathingActive&&!isChallengingStage&&(isGridBreathingActive=!![],gridBreathStartTime=_0x2e8c88,currentGridBreathFactor=0x0);!firstEnemyLanded&&!isFullGridWave&&!isChallengingStage&&(lastGridFireCheckTime=Date[_0xca82ac(0x1e7)](),firstEnemyLanded=!![]);if(_0x348d13===_0xca82ac(0x271)&&!isChallengingStage&&!isFullGridWave&&_0x4e0e54[_0xca82ac(0x25a)]!==undefined){const _0x5d4658=_0x4e0e54[_0xca82ac(0x25a)],_0x1a2ee6=squadronCompletionStatus[_0x5d4658];if(_0x1a2ee6&&!_0x1a2ee6[_0xca82ac(0x256)]){const _0x4ff160=enemies['every'](_0x223523=>{const _0x36e429=_0xca82ac;if(_0x223523&&_0x223523[_0x36e429(0x25a)]===_0x5d4658)return _0x223523[_0x36e429(0x180)]==='in_grid'||!enemies[_0x36e429(0x18d)](_0x455352=>_0x455352['id']===_0x223523['id']);return!![];});if(_0x4ff160){_0x1a2ee6['hasFiredPostLanding']=!![];const _0x55c064=enemies['filter'](_0x18ce07=>_0x18ce07&&_0x18ce07[_0xca82ac(0x25a)]===_0x5d4658&&_0x18ce07[_0xca82ac(0x180)]==='in_grid'&&(_0x18ce07[_0xca82ac(0x226)]===ENEMY2_TYPE||_0x18ce07[_0xca82ac(0x226)]===ENEMY3_TYPE)&&!(_0x18ce07[_0xca82ac(0x226)]===ENEMY3_TYPE&&_0x18ce07[_0xca82ac(0x26f)]));if(_0x55c064[_0xca82ac(0x172)]>0x0){const _0x290eb8=_0x55c064[Math['floor'](Math[_0xca82ac(0x1f7)]()*_0x55c064[_0xca82ac(0x172)])],_0x5b386e=_0x290eb8['id'],_0x43db3b=0xc8+Math[_0xca82ac(0x1f7)]()*0x190,_0x16a553=setTimeout(()=>{const _0x21593b=_0xca82ac;try{const _0x10c883=enemySpawnTimeouts[_0x21593b(0x223)](_0x16a553);if(_0x10c883>-0x1)enemySpawnTimeouts[_0x21593b(0x19d)](_0x10c883,0x1);if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x25a42e=enemies[_0x21593b(0x1e1)](_0x48d206=>_0x48d206&&_0x48d206['id']===_0x5b386e);_0x25a42e&&_0x25a42e[_0x21593b(0x180)]===_0x21593b(0x1c1)&&(createBulletSimple(_0x25a42e)&&(playSound(enemyShootSound),_0x25a42e[_0x21593b(0x1ee)]=Date['now']()));}catch(_0x1fa21c){console[_0x21593b(0x23b)](_0x21593b(0x1cb)+_0x5b386e+':',_0x1fa21c);}},_0x43db3b);enemySpawnTimeouts['push'](_0x16a553);}}}}}break;}case _0xca82ac(0x1c1):{try{const _0x268b1a=_0x4e0e54['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x4e0e54[_0xca82ac(0x226)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x2283d9,y:_0x1645f0}=getCurrentGridSlotPosition(_0x4e0e54[_0xca82ac(0x209)],_0x4e0e54[_0xca82ac(0x1c8)],_0x268b1a);typeof _0x2283d9==='number'&&!isNaN(_0x2283d9)&&(_0x4e0e54['x']=_0x2283d9),typeof _0x1645f0===_0xca82ac(0x212)&&!isNaN(_0x1645f0)&&(_0x4e0e54['y']=_0x1645f0),_0x4e0e54[_0xca82ac(0x1e5)]=_0x2283d9,_0x4e0e54[_0xca82ac(0x1cf)]=_0x1645f0;}catch(_0x25ad85){console[_0xca82ac(0x23b)]('Error\x20getting\x20grid\x20pos\x20within\x20\x27in_grid\x27\x20for\x20'+_0x4e0e54['id']+':',_0x25ad85);}_0x4e0e54['velocityX']=_0x218475?_0x36ca5d:0x0,_0x4e0e54[_0xca82ac(0x15e)]=0x0;_0x4e0e54['type']===ENEMY3_TYPE&&_0x4e0e54[_0xca82ac(0x26f)]&&_0x4e0e54[_0xca82ac(0x16c)]&&(_0x4e0e54[_0xca82ac(0x1ca)]=_0x4e0e54['x']+CAPTURED_SHIP_OFFSET_X,_0x4e0e54['capturedShipY']=_0x4e0e54['y']+CAPTURED_SHIP_OFFSET_Y);break;}case'preparing_attack':{_0x4e0e54[_0xca82ac(0x1d1)]=0x0,_0x4e0e54['velocityY']=0x0;break;}case _0xca82ac(0x1e6):{_0x4e0e54[_0xca82ac(0x1d1)]=0x0,_0x4e0e54[_0xca82ac(0x15e)]=0x0;break;}case'diving_to_capture_position':{if(isShipCaptured){_0x4e0e54['state']=_0xca82ac(0x1db);try{const {x:_0x18060d,y:_0xa050ee}=getCurrentGridSlotPosition(_0x4e0e54['gridRow'],_0x4e0e54[_0xca82ac(0x1c8)],_0x5dc727);_0x4e0e54[_0xca82ac(0x1e5)]=_0x18060d,_0x4e0e54[_0xca82ac(0x1cf)]=_0xa050ee;}catch(_0x3c66ad){console[_0xca82ac(0x23b)](_0xca82ac(0x24f)+_0x4e0e54['id']+':',_0x3c66ad),_0x4e0e54[_0xca82ac(0x1e5)]=gameCanvas['width']/0x2,_0x4e0e54[_0xca82ac(0x1cf)]=ENEMY_TOP_MARGIN;}break;}const _0x26966d=_0x4e0e54[_0xca82ac(0x17f)],_0x314982=_0x4e0e54[_0xca82ac(0x229)];if(_0x26966d==null||_0x314982==null){console[_0xca82ac(0x23b)](_0xca82ac(0x17c)+_0x4e0e54['id']+'\x20diving\x20to\x20capture\x20without\x20targetX/Y!\x20Aborting.'),_0x4e0e54[_0xca82ac(0x180)]='returning';try{const {x:_0x4607d7,y:_0x5dad5e}=getCurrentGridSlotPosition(_0x4e0e54[_0xca82ac(0x209)],_0x4e0e54[_0xca82ac(0x1c8)],_0x5dc727);_0x4e0e54[_0xca82ac(0x1e5)]=_0x4607d7,_0x4e0e54[_0xca82ac(0x1cf)]=_0x5dad5e;}catch(_0x455668){console[_0xca82ac(0x23b)](_0xca82ac(0x24f)+_0x4e0e54['id']+':',_0x455668),_0x4e0e54[_0xca82ac(0x1e5)]=gameCanvas[_0xca82ac(0x1ba)]/0x2,_0x4e0e54[_0xca82ac(0x1cf)]=ENEMY_TOP_MARGIN;}break;}const _0x5616d9=_0x26966d-_0x4e0e54['x'],_0x1018da=_0x314982-_0x4e0e54['y'],_0xab770b=Math[_0xca82ac(0x1ac)](_0x5616d9*_0x5616d9+_0x1018da*_0x1018da),_0x13fa05=BOSS_CAPTURE_DIVE_SPEED_FACTOR*BASE_ENEMY_ATTACK_SPEED,_0x2c8d66=_0x13fa05*0.6;_0xab770b>_0x2c8d66?(_0x4e0e54[_0xca82ac(0x1d1)]=_0x5616d9/_0xab770b*_0x13fa05,_0x4e0e54['velocityY']=_0x1018da/_0xab770b*_0x13fa05,_0x4e0e54['x']+=_0x4e0e54[_0xca82ac(0x1d1)],_0x4e0e54['y']+=_0x4e0e54['velocityY']):(_0x4e0e54['x']=_0x26966d,_0x4e0e54['y']=_0x314982,_0x4e0e54[_0xca82ac(0x1d1)]=0x0,_0x4e0e54[_0xca82ac(0x15e)]=0x0,_0x4e0e54['state']=_0xca82ac(0x1ce),_0x4e0e54['captureStartTime']=_0x2e8c88,capturingBossId=_0x4e0e54['id'],captureBeamActive=!![],captureBeamSource={'x':_0x4e0e54['x']+_0x5dc727/0x2,'y':_0x4e0e54['y']+_0x12bcfc},captureBeamTargetY=_0x4e0e54['y'],captureBeamProgress=0x0,playSound(captureSound));break;}case _0xca82ac(0x1ce):{_0x4e0e54['velocityX']=0x0,_0x4e0e54[_0xca82ac(0x15e)]=0x0;if(isShipCaptured&&_0x4e0e54['id']!==capturedBossIdWithMessage){console[_0xca82ac(0x16a)](_0xca82ac(0x1a3)+_0x4e0e54['id']+'\x20was\x20in\x20\x27capturing\x27,\x20but\x20another\x20ship\x20('+capturedBossIdWithMessage+_0xca82ac(0x25d)),captureBeamActive=![];if(capturingBossId===_0x4e0e54['id'])capturingBossId=null;_0x4e0e54[_0xca82ac(0x180)]=_0xca82ac(0x1db);try{const {x:_0x5c3269,y:_0x4c2a68}=getCurrentGridSlotPosition(_0x4e0e54[_0xca82ac(0x209)],_0x4e0e54[_0xca82ac(0x1c8)],_0x5dc727);_0x4e0e54[_0xca82ac(0x1e5)]=_0x5c3269,_0x4e0e54[_0xca82ac(0x1cf)]=_0x4c2a68;}catch(_0x377025){console[_0xca82ac(0x23b)](_0xca82ac(0x24f)+_0x4e0e54['id']+':',_0x377025),_0x4e0e54[_0xca82ac(0x1e5)]=gameCanvas[_0xca82ac(0x1ba)]/0x2,_0x4e0e54[_0xca82ac(0x1cf)]=ENEMY_TOP_MARGIN;}stopSound(captureSound);break;}const _0x888c66=_0x2e8c88-_0x4e0e54['captureStartTime'],_0x234735=CAPTURE_BEAM_ANIMATION_DURATION_MS/0x2,_0x4f6416=CAPTURE_BEAM_DURATION_MS;if(_0x888c66<_0x234735)captureBeamProgress=_0x888c66/_0x234735;else{if(_0x888c66<_0x4f6416-_0x234735)captureBeamProgress=0x1;else{if(_0x888c66<_0x4f6416)captureBeamProgress=0x1-(_0x888c66-(_0x4f6416-_0x234735))/_0x234735;else{captureBeamProgress=0x0,captureBeamActive=![],capturingBossId=null,stopSound(captureSound),_0x4e0e54[_0xca82ac(0x180)]=_0xca82ac(0x253),_0x4e0e54['attackPathSegments']=generateAttackPath(_0x4e0e54),_0x4e0e54[_0xca82ac(0x218)]=0x0,_0x4e0e54[_0xca82ac(0x238)]=0x0,_0x4e0e54[_0xca82ac(0x166)]=BASE_ENEMY_ATTACK_SPEED*ENEMY3_ATTACK_SPEED_FACTOR,_0x4e0e54[_0xca82ac(0x1ee)]=0x0,_0x4e0e54[_0xca82ac(0x1bd)]=!![],_0x4e0e54[_0xca82ac(0x230)]=0x0,_0x4e0e54[_0xca82ac(0x22e)]=null;break;}}}captureBeamProgress=Math[_0xca82ac(0x225)](0x0,Math['min'](0x1,captureBeamProgress));if(ship&&captureBeamActive&&captureBeamProgress>=0.95&&!isShipCaptured&&!isInvincible){const _0x58831d=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x3802c4=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR,_0x52b997=_0x4e0e54['x']+_0x5dc727/0x2,_0x3f2463=_0x4e0e54['y']+_0x12bcfc,_0x8f8717=gameCanvas['height']-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x3cf15c=Math[_0xca82ac(0x225)](_0x58831d,_0x3802c4),_0x158b25=_0x52b997-_0x3cf15c/0x2,_0x36e466=_0x3f2463,_0x192f5b=_0x8f8717-_0x3f2463;if(_0x192f5b>0x0){const _0x3300cd={'x':_0x158b25,'y':_0x36e466,'width':_0x3cf15c,'height':_0x192f5b},_0x1a4c1e={'x':ship['x'],'y':ship['y'],'width':ship[_0xca82ac(0x1ba)],'height':ship[_0xca82ac(0x16d)]};if(checkCollision(_0x1a4c1e,_0x3300cd)){isShipCaptured=!![],_0x4e0e54[_0xca82ac(0x16c)]={'width':ship[_0xca82ac(0x1ba)],'height':ship['height']},_0x4e0e54[_0xca82ac(0x26f)]=!![],stopSound(captureSound),_0x4e0e54[_0xca82ac(0x180)]=_0xca82ac(0x1fd),_0x4e0e54[_0xca82ac(0x1e5)]=null,_0x4e0e54[_0xca82ac(0x1cf)]=null,_0x4e0e54['initialCaptureAnimationY']=ship['y'],_0x4e0e54[_0xca82ac(0x268)]=0x0,isShowingCaptureMessage=!![],captureMessageStartTime=_0x2e8c88,capturedBossIdWithMessage=_0x4e0e54['id'],playSound(shipCapturedSound);const _0x2097c8=currentPlayer;playerLives--,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![];if(playerLives<=0x0){if(_0x2097c8===0x1)player1Lives=0x0;if(_0x2097c8===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x2e8c88,playerWhoIsGameOver=_0x2097c8;const _0x33c403=_0x2097c8===0x1?0x2:0x1,_0x2408de=_0x33c403===0x1?player1Lives:player2Lives;_0x2408de>0x0?nextActionAfterPlayerGameOver='switch_player':nextActionAfterPlayerGameOver=_0xca82ac(0x15d);bullets=[],enemyBullets=[],explosions=[],fallingShips=[],isDualShipActive=![];if(_0x2097c8===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(_0x2097c8===0x1)player1Lives=playerLives;else player2Lives=playerLives;}ship&&gameCanvas&&(ship['y']=gameCanvas[_0xca82ac(0x16d)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])),(!isManualControl||isTwoPlayerMode)&&(forceCenterShipNextReset=!![]),isShipCaptured=![],isInvincible=!![],invincibilityEndTime=_0x2e8c88+INVINCIBILITY_DURATION_MS;}}}else console[_0xca82ac(0x16a)](_0xca82ac(0x215),_0x192f5b);}break;}case _0xca82ac(0x1fd):{_0x4e0e54['velocityX']=0x0,_0x4e0e54[_0xca82ac(0x15e)]=0x0;if(_0x4e0e54[_0xca82ac(0x26f)]&&_0x4e0e54[_0xca82ac(0x16c)]&&typeof _0x4e0e54[_0xca82ac(0x20f)]==='number'){const _0x582182=_0x2e8c88-captureMessageStartTime,_0x2dae9c=Math['min'](0x1,_0x582182/CAPTURE_MESSAGE_DURATION),_0x141483=_0x4e0e54['y']+CAPTURED_SHIP_OFFSET_Y,_0x5bd703=_0x4e0e54[_0xca82ac(0x20f)];_0x4e0e54[_0xca82ac(0x1eb)]=_0x5bd703+(_0x141483-_0x5bd703)*_0x2dae9c,_0x4e0e54[_0xca82ac(0x1ca)]=_0x4e0e54['x']+CAPTURED_SHIP_OFFSET_X;}else _0x4e0e54[_0xca82ac(0x1ca)]=_0x4e0e54['x']+CAPTURED_SHIP_OFFSET_X,_0x4e0e54[_0xca82ac(0x1eb)]=_0x4e0e54['y']+CAPTURED_SHIP_OFFSET_Y;break;}case'attacking':{if(isEntrancePhaseActive)break;const _0x51fada=_0x4e0e54[_0xca82ac(0x242)],_0xfc55e8=3.8;if(!_0x51fada||_0x51fada[_0xca82ac(0x172)]===0x0){console[_0xca82ac(0x23b)](_0xca82ac(0x188)+_0x1af3c5+_0xca82ac(0x1bc)),_0x4e0e54[_0xca82ac(0x180)]=_0xca82ac(0x1db);try{const {x:_0xa3cee,y:_0x1d1321}=getCurrentGridSlotPosition(_0x4e0e54[_0xca82ac(0x209)],_0x4e0e54['gridCol'],_0x5dc727);_0x4e0e54['targetGridX']=_0xa3cee,_0x4e0e54[_0xca82ac(0x1cf)]=_0x1d1321;}catch(_0x86f2bd){console[_0xca82ac(0x23b)](_0xca82ac(0x16f)+_0x1af3c5+_0xca82ac(0x1c6),_0x86f2bd),_0x4e0e54[_0xca82ac(0x1e5)]=gameCanvas[_0xca82ac(0x1ba)]/0x2,_0x4e0e54[_0xca82ac(0x1cf)]=ENEMY_TOP_MARGIN;}break;}if(_0x4e0e54[_0xca82ac(0x218)]>=_0x51fada[_0xca82ac(0x172)]){console[_0xca82ac(0x16a)]('Enemy\x20'+_0x1af3c5+'\x20attacking,\x20index\x20'+_0x4e0e54['attackPathSegmentIndex']+_0xca82ac(0x195)+_0x51fada[_0xca82ac(0x172)]+_0xca82ac(0x191)),_0x4e0e54[_0xca82ac(0x180)]='returning';try{const {x:_0x48a420,y:_0x1be5b3}=getCurrentGridSlotPosition(_0x4e0e54['gridRow'],_0x4e0e54[_0xca82ac(0x1c8)],_0x5dc727);_0x4e0e54[_0xca82ac(0x1e5)]=_0x48a420,_0x4e0e54[_0xca82ac(0x1cf)]=_0x1be5b3;}catch(_0x2463d2){console[_0xca82ac(0x23b)](_0xca82ac(0x16f)+_0x1af3c5+'\x20(invalid\x20attack\x20index):',_0x2463d2),_0x4e0e54[_0xca82ac(0x1e5)]=gameCanvas[_0xca82ac(0x1ba)]/0x2,_0x4e0e54[_0xca82ac(0x1cf)]=ENEMY_TOP_MARGIN;}break;}const _0x263960=_0x51fada[_0x4e0e54[_0xca82ac(0x218)]];if(!_0x263960||!_0x263960['p0']||!_0x263960['p1']||!_0x263960['p2']||!_0x263960['p3']){console['error']('Enemy\x20'+_0x1af3c5+_0xca82ac(0x1c2)+_0x4e0e54['attackPathSegmentIndex']+_0xca82ac(0x1f0)),_0x4e0e54[_0xca82ac(0x180)]='returning';try{const {x:_0x46e090,y:_0x58967d}=getCurrentGridSlotPosition(_0x4e0e54[_0xca82ac(0x209)],_0x4e0e54[_0xca82ac(0x1c8)],_0x5dc727);_0x4e0e54[_0xca82ac(0x1e5)]=_0x46e090,_0x4e0e54[_0xca82ac(0x1cf)]=_0x58967d;}catch(_0x255eb0){console[_0xca82ac(0x23b)](_0xca82ac(0x16f)+_0x1af3c5+'\x20(invalid\x20attack\x20segment):',_0x255eb0),_0x4e0e54[_0xca82ac(0x1e5)]=gameCanvas[_0xca82ac(0x1ba)]/0x2,_0x4e0e54[_0xca82ac(0x1cf)]=ENEMY_TOP_MARGIN;}break;}const _0x33188c=_0x4e0e54[_0xca82ac(0x166)]/0x3e8*_0xfc55e8;_0x4e0e54[_0xca82ac(0x238)]+=_0x33188c;let _0x46cc86,_0x936c15;const _0x4d1b65=_0x4e0e54['x'],_0x30a5dd=_0x4e0e54['y'];if(_0x4e0e54[_0xca82ac(0x238)]>=0x1){try{_0x46cc86=calculateBezierPoint(0x1,_0x263960['p0']['x'],_0x263960['p1']['x'],_0x263960['p2']['x'],_0x263960['p3']['x']),_0x936c15=calculateBezierPoint(0x1,_0x263960['p0']['y'],_0x263960['p1']['y'],_0x263960['p2']['y'],_0x263960['p3']['y']);}catch(_0x4abc0a){console[_0xca82ac(0x23b)](_0xca82ac(0x192)+_0x4e0e54['id']+':',_0x4abc0a),_0x46cc86=_0x4e0e54['x'],_0x936c15=_0x4e0e54['y'],_0x4e0e54[_0xca82ac(0x180)]=_0xca82ac(0x1db);try{const {x:_0x5c2cec,y:_0x350707}=getCurrentGridSlotPosition(_0x4e0e54[_0xca82ac(0x209)],_0x4e0e54[_0xca82ac(0x1c8)],_0x5dc727);_0x4e0e54[_0xca82ac(0x1e5)]=_0x5c2cec,_0x4e0e54[_0xca82ac(0x1cf)]=_0x350707;}catch(_0x3f6510){console[_0xca82ac(0x23b)](_0xca82ac(0x23c)+_0x4e0e54['id']+':',_0x3f6510),_0x4e0e54[_0xca82ac(0x1e5)]=gameCanvas[_0xca82ac(0x1ba)]/0x2,_0x4e0e54[_0xca82ac(0x1cf)]=ENEMY_TOP_MARGIN;}break;}_0x4e0e54[_0xca82ac(0x238)]=0x0,_0x4e0e54[_0xca82ac(0x218)]++;if(_0x4e0e54[_0xca82ac(0x218)]>=_0x51fada['length']){_0x4e0e54[_0xca82ac(0x180)]=_0xca82ac(0x1db),_0x4e0e54[_0xca82ac(0x1ee)]=0x0,_0x4e0e54[_0xca82ac(0x230)]=0x0,_0x4e0e54[_0xca82ac(0x22e)]=null;try{const {x:_0x5321c9,y:_0x1d18be}=getCurrentGridSlotPosition(_0x4e0e54['gridRow'],_0x4e0e54[_0xca82ac(0x1c8)],_0x5dc727);_0x4e0e54['targetGridX']=_0x5321c9,_0x4e0e54['targetGridY']=_0x1d18be;}catch(_0x58ccc0){console[_0xca82ac(0x23b)](_0xca82ac(0x16f)+_0x1af3c5+_0xca82ac(0x1d2),_0x58ccc0),_0x4e0e54[_0xca82ac(0x1e5)]=gameCanvas[_0xca82ac(0x1ba)]/0x2,_0x4e0e54[_0xca82ac(0x1cf)]=ENEMY_TOP_MARGIN;}}else{const _0x27baca=_0x51fada[_0x4e0e54[_0xca82ac(0x218)]];if(!_0x27baca?.['p0']){console[_0xca82ac(0x23b)](_0xca82ac(0x188)+_0x1af3c5+'\x20attacking,\x20invalid\x20NEXT\x20segment\x20'+_0x4e0e54['attackPathSegmentIndex']+'!\x20Returning.'),_0x46cc86=_0x4e0e54['x'],_0x936c15=_0x4e0e54['y'],_0x4e0e54['state']='returning';try{const {x:_0x4bd954,y:_0x330622}=getCurrentGridSlotPosition(_0x4e0e54[_0xca82ac(0x209)],_0x4e0e54[_0xca82ac(0x1c8)],_0x5dc727);_0x4e0e54[_0xca82ac(0x1e5)]=_0x4bd954,_0x4e0e54[_0xca82ac(0x1cf)]=_0x330622;}catch(_0x422419){console['error']('Error\x20getting\x20grid\x20pos\x20after\x20invalid\x20NEXT\x20attack\x20segment\x20for\x20'+_0x4e0e54['id']+':',_0x422419),_0x4e0e54[_0xca82ac(0x1e5)]=gameCanvas[_0xca82ac(0x1ba)]/0x2,_0x4e0e54[_0xca82ac(0x1cf)]=ENEMY_TOP_MARGIN;}break;}}}else try{_0x46cc86=calculateBezierPoint(_0x4e0e54['attackPathT'],_0x263960['p0']['x'],_0x263960['p1']['x'],_0x263960['p2']['x'],_0x263960['p3']['x']),_0x936c15=calculateBezierPoint(_0x4e0e54[_0xca82ac(0x238)],_0x263960['p0']['y'],_0x263960['p1']['y'],_0x263960['p2']['y'],_0x263960['p3']['y']);}catch(_0x1a914f){console['error'](_0xca82ac(0x21a)+_0x4e0e54['id']+':',_0x1a914f),_0x46cc86=_0x4e0e54['x'],_0x936c15=_0x4e0e54['y'],_0x4e0e54[_0xca82ac(0x180)]='returning';try{const {x:_0x4f4c10,y:_0x12a6ce}=getCurrentGridSlotPosition(_0x4e0e54['gridRow'],_0x4e0e54[_0xca82ac(0x1c8)],_0x5dc727);_0x4e0e54[_0xca82ac(0x1e5)]=_0x4f4c10,_0x4e0e54['targetGridY']=_0x12a6ce;}catch(_0x4fad66){console[_0xca82ac(0x23b)](_0xca82ac(0x20d)+_0x4e0e54['id']+':',_0x4fad66),_0x4e0e54[_0xca82ac(0x1e5)]=gameCanvas[_0xca82ac(0x1ba)]/0x2,_0x4e0e54[_0xca82ac(0x1cf)]=ENEMY_TOP_MARGIN;}break;}if(_0x4e0e54&&_0x4e0e54[_0xca82ac(0x180)]===_0xca82ac(0x253)){const _0x527254=_0x4e0e54[_0xca82ac(0x230)]||0x0,_0x22cb14=_0x46cc86+_0x527254,_0x53cc96=_0x936c15;_0x4e0e54[_0xca82ac(0x1d1)]=_0x22cb14-_0x4d1b65,_0x4e0e54[_0xca82ac(0x15e)]=_0x53cc96-_0x30a5dd,_0x4e0e54['x']=_0x22cb14,_0x4e0e54['y']=_0x53cc96;if(_0x4e0e54['y']>gameCanvas[_0xca82ac(0x16d)]+_0x12bcfc*1.5){_0x4e0e54[_0xca82ac(0x180)]=_0xca82ac(0x1db),_0x4e0e54[_0xca82ac(0x218)]=0x0,_0x4e0e54[_0xca82ac(0x238)]=0x0,_0x4e0e54[_0xca82ac(0x1ee)]=0x0,_0x4e0e54[_0xca82ac(0x230)]=0x0,_0x4e0e54['attackGroupId']=null,_0x4e0e54['y']=-_0x12bcfc*(1.1+Math['random']()*0.4),_0x4e0e54['x']=Math[_0xca82ac(0x1f7)]()*(gameCanvas[_0xca82ac(0x1ba)]-_0x5dc727),_0x4e0e54[_0xca82ac(0x1d1)]=0x0,_0x4e0e54[_0xca82ac(0x15e)]=0x0;try{const {x:_0x4c46fe,y:_0x364518}=getCurrentGridSlotPosition(_0x4e0e54[_0xca82ac(0x209)],_0x4e0e54['gridCol'],_0x5dc727);_0x4e0e54[_0xca82ac(0x1e5)]=_0x4c46fe,_0x4e0e54['targetGridY']=_0x364518;}catch(_0x19aae8){console[_0xca82ac(0x23b)](_0xca82ac(0x16f)+_0x1af3c5+_0xca82ac(0x1e9),_0x19aae8),_0x4e0e54['targetGridX']=gameCanvas[_0xca82ac(0x1ba)]/0x2,_0x4e0e54[_0xca82ac(0x1cf)]=ENEMY_TOP_MARGIN;}}}break;}case _0xca82ac(0x1db):{if(isEntrancePhaseActive)break;if(_0x4e0e54[_0xca82ac(0x1e5)]==null||_0x4e0e54[_0xca82ac(0x1cf)]==null){console[_0xca82ac(0x16a)](_0xca82ac(0x188)+_0x1af3c5+_0xca82ac(0x24e));try{const {x:_0x13428c,y:_0x13e797}=getCurrentGridSlotPosition(_0x4e0e54[_0xca82ac(0x209)],_0x4e0e54['gridCol'],_0x5dc727);_0x4e0e54[_0xca82ac(0x1e5)]=_0x13428c,_0x4e0e54['targetGridY']=_0x13e797;}catch(_0x90b800){console[_0xca82ac(0x23b)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x1af3c5+_0xca82ac(0x1f1),_0x90b800),_0x4e0e54[_0xca82ac(0x180)]=_0xca82ac(0x1c1),_0x4e0e54['x']=gameCanvas['width']/0x2,_0x4e0e54['y']=ENEMY_TOP_MARGIN;break;}}const _0x1e9769=_0x4e0e54[_0xca82ac(0x1e5)],_0x5bdfe0=_0x4e0e54[_0xca82ac(0x1cf)],_0x5cfe71=_0x1e9769-_0x4e0e54['x'],_0x3a2bb6=_0x5bdfe0-_0x4e0e54['y'],_0x1b7ba2=Math['sqrt'](_0x5cfe71*_0x5cfe71+_0x3a2bb6*_0x3a2bb6),_0x37ef0e=scaleValue(level,BASE_RETURN_SPEED_FACTOR,MAX_RETURN_SPEED_FACTOR),_0x442831=BASE_RETURN_SPEED*_0x37ef0e,_0x4fb462=_0x442831*0.5;_0x1b7ba2>_0x4fb462?(_0x4e0e54['velocityX']=_0x5cfe71/_0x1b7ba2*_0x442831,_0x4e0e54['velocityY']=_0x3a2bb6/_0x1b7ba2*_0x442831,_0x4e0e54['x']+=_0x4e0e54['velocityX'],_0x4e0e54['y']+=_0x4e0e54[_0xca82ac(0x15e)]):(_0x4e0e54['x']=_0x1e9769,_0x4e0e54['y']=_0x5bdfe0,_0x4e0e54[_0xca82ac(0x1d1)]=0x0,_0x4e0e54[_0xca82ac(0x15e)]=0x0,_0x4e0e54['state']='in_grid',_0x4e0e54['justReturned']=!![],_0x4e0e54[_0xca82ac(0x230)]=0x0,_0x4e0e54[_0xca82ac(0x22e)]=null,_0x4e0e54[_0xca82ac(0x164)](_0xca82ac(0x167))&&delete _0x4e0e54[_0xca82ac(0x167)],!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound)));break;}}if(_0x4e0e54&&!isShowingPlayerGameOverMessage&&!(isShipCaptured&&_0x4e0e54[_0xca82ac(0x180)]===_0xca82ac(0x1ce))){const _0x3c3235={'x':0x0,'y':0x0,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT},_0x336e33={'x':_0x4e0e54['x'],'y':_0x4e0e54['y'],'width':_0x5dc727,'height':_0x12bcfc};for(let _0x57fa95=bullets[_0xca82ac(0x172)]-0x1;_0x57fa95>=0x0;_0x57fa95--){const _0x96d447=bullets[_0x57fa95];if(!_0x96d447)continue;_0x3c3235['x']=_0x96d447['x'],_0x3c3235['y']=_0x96d447['y'];if(checkCollision(_0x3c3235,_0x336e33)){const _0x24b122=handleEnemyHit(_0x4e0e54);bullets[_0xca82ac(0x19d)](_0x57fa95,0x1);if(_0x24b122[_0xca82ac(0x1b5)]){enemies['splice'](_0x56a3e7,0x1),_0x4e0e54=null;break;}}}}if(_0x4e0e54&&ship&&!isShipCaptured&&!isWaitingForRespawn&&!isShowingPlayerGameOverMessage&&!isInvincible){const _0xba04fb=[_0xca82ac(0x253),_0xca82ac(0x20a),_0xca82ac(0x174),_0xca82ac(0x1ed)];if(_0xba04fb[_0xca82ac(0x1be)](_0x4e0e54[_0xca82ac(0x180)])){const _0x3b26ed={'x':_0x4e0e54['x'],'y':_0x4e0e54['y'],'width':_0x5dc727,'height':_0x12bcfc},_0x1130cb={'x':ship['x'],'y':ship['y'],'width':ship[_0xca82ac(0x1ba)],'height':ship[_0xca82ac(0x16d)]},_0x336463=isDualShipActive?{'x':ship['x']+DUAL_SHIP_OFFSET_X,'y':ship['y'],'width':ship['width'],'height':ship[_0xca82ac(0x16d)]}:null;let _0x4fb449=![],_0x92bf40=![];if(checkCollision(_0x3b26ed,_0x1130cb))_0x4fb449=!![],_0x92bf40=![];else _0x336463&&checkCollision(_0x3b26ed,_0x336463)&&(_0x4fb449=!![],_0x92bf40=!![]);if(_0x4fb449){createExplosion(_0x4e0e54['x']+_0x5dc727/0x2,_0x4e0e54['y']+_0x12bcfc/0x2),playSound(lostLifeSound),enemies[_0xca82ac(0x19d)](_0x56a3e7,0x1),_0x4e0e54=null;if(isDualShipActive){isDualShipActive=![];if(currentPlayer===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];_0x92bf40?createExplosion(_0x336463['x']+ship[_0xca82ac(0x1ba)]/0x2,_0x336463['y']+ship[_0xca82ac(0x16d)]/0x2):createExplosion(_0x1130cb['x']+ship[_0xca82ac(0x1ba)]/0x2,_0x1130cb['y']+ship[_0xca82ac(0x16d)]/0x2),isInvincible=!![],invincibilityEndTime=_0x2e8c88+INVINCIBILITY_DURATION_MS;}else{playerLives--,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],fallingShips=[],isInvincible=!![],invincibilityEndTime=_0x2e8c88+INVINCIBILITY_DURATION_MS;ship&&gameCanvas?(ship['y']=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])):console[_0xca82ac(0x23b)]('Cannot\x20reposition\x20ship\x20Y\x20-\x20ship\x20or\x20canvas\x20not\x20ready.');if(playerLives<=0x0){const _0x7d87c6=currentPlayer;if(_0x7d87c6===0x1)player1Lives=0x0;if(_0x7d87c6===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x2e8c88,playerWhoIsGameOver=_0x7d87c6;const _0x3a182f=_0x7d87c6===0x1?0x2:0x1,_0x331ca5=_0x3a182f===0x1?player1Lives:player2Lives;_0x331ca5>0x0?nextActionAfterPlayerGameOver=_0xca82ac(0x1ef):nextActionAfterPlayerGameOver=_0xca82ac(0x15d),bullets=[],enemyBullets=[],explosions=[],playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}break;}}}}}}if(ship&&!isShowingPlayerGameOverMessage&&!isShipCaptured&&!isWaitingForRespawn&&!isInvincible){const _0x4edabe={'x':ship['x'],'y':ship['y'],'width':ship[_0xca82ac(0x1ba)],'height':ship[_0xca82ac(0x16d)]},_0xdc777=isDualShipActive?{'x':ship['x']+DUAL_SHIP_OFFSET_X,'y':ship['y'],'width':ship[_0xca82ac(0x1ba)],'height':ship['height']}:null;for(let _0x1a7043=enemyBullets[_0xca82ac(0x172)]-0x1;_0x1a7043>=0x0;_0x1a7043--){const _0x40040c=enemyBullets[_0x1a7043];if(!_0x40040c){enemyBullets[_0xca82ac(0x19d)](_0x1a7043,0x1);continue;}const _0x17e00f={'x':_0x40040c['x'],'y':_0x40040c['y'],'width':_0x40040c[_0xca82ac(0x1ba)],'height':_0x40040c[_0xca82ac(0x16d)]};let _0x5b8e64=checkCollision(_0x4edabe,_0x17e00f),_0x471923=0x0;!_0x5b8e64&&_0xdc777&&checkCollision(_0xdc777,_0x17e00f)&&(_0x5b8e64=!![],_0x471923=0x1);if(_0x5b8e64){enemyBullets[_0xca82ac(0x19d)](_0x1a7043,0x1);if(isDualShipActive){isDualShipActive=![];if(currentPlayer===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];_0x471923===0x1?createExplosion(_0xdc777['x']+ship['width']/0x2,_0xdc777['y']+ship['height']/0x2):createExplosion(_0x4edabe['x']+ship['width']/0x2,_0x4edabe['y']+ship[_0xca82ac(0x16d)]/0x2),playSound(lostLifeSound),isInvincible=!![],invincibilityEndTime=_0x2e8c88+INVINCIBILITY_DURATION_MS;}else{playerLives--,playSound(lostLifeSound),createExplosion(ship['x']+ship[_0xca82ac(0x1ba)]/0x2,ship['y']+ship[_0xca82ac(0x16d)]/0x2),csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],fallingShips=[],isInvincible=!![],invincibilityEndTime=_0x2e8c88+INVINCIBILITY_DURATION_MS;ship&&gameCanvas?(ship['y']=gameCanvas[_0xca82ac(0x16d)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])):console['error'](_0xca82ac(0x15f));if(playerLives<=0x0){const _0x5d3422=currentPlayer;if(_0x5d3422===0x1)player1Lives=0x0;if(_0x5d3422===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x2e8c88,playerWhoIsGameOver=_0x5d3422;const _0x28dec8=_0x5d3422===0x1?0x2:0x1,_0x3c393f=_0x28dec8===0x1?player1Lives:player2Lives;_0x3c393f>0x0?nextActionAfterPlayerGameOver=_0xca82ac(0x1ef):nextActionAfterPlayerGameOver='show_results',bullets=[],enemyBullets=[],explosions=[],playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}break;}}}}}if(ship&&!isShipCaptured&&!isWaitingForRespawn&&!isDualShipActive&&fallingShips[_0xca82ac(0x172)]>0x0&&!isInvincible){const _0x227a4a={'x':ship['x'],'y':ship['y'],'width':ship[_0xca82ac(0x1ba)],'height':ship[_0xca82ac(0x16d)]};for(let _0x1d4e90=fallingShips[_0xca82ac(0x172)]-0x1;_0x1d4e90>=0x0;_0x1d4e90--){const _0x1aa366=fallingShips[_0x1d4e90];if(!_0x1aa366)continue;const _0x4f7e5f={'x':_0x1aa366['x'],'y':_0x1aa366['y'],'width':_0x1aa366[_0xca82ac(0x1ba)],'height':_0x1aa366['height']};if(checkCollision(_0x227a4a,_0x4f7e5f)){fallingShips[_0xca82ac(0x19d)](_0x1d4e90,0x1),isDualShipActive=!![];if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];playSound(dualShipSound);break;}}}updateHitSparks();}catch(_0x148578){console['error'](_0xca82ac(0x25b),_0x148578,_0x148578[_0xca82ac(0x206)]),isGridSoundPlaying=![],stopSound(gridBackgroundSound),isEntrancePhaseActive=![],stopSound(entranceSound),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(captureSound),stopSound(shipCapturedSound),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0xca82ac(0x1b4))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0xca82ac(0x1af));}}function switchPlayerTurn(){if(!isTwoPlayerMode)return![];stopSound(hiScoreSound),highScore=Math['max'](highScore,score);currentPlayer===0x1?(player1Score=score,player1IsDualShipActive=isDualShipActive):(player2Score=score,player2IsDualShipActive=isDualShipActive);const _0x468c2a=currentPlayer===0x1?0x2:0x1,_0x118090=_0x468c2a===0x1?player1Lives:player2Lives;if(_0x118090<=0x0){const _0x503475=currentPlayer===0x1?player1Lives:player2Lives;return _0x503475<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x468c2a,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],captureBeamActive=![],capturingBossId=null,isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function triggerGridFiring(){const _0xc13f63=_0x1065;if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x4ff0b3=enemies[_0xc13f63(0x189)](_0x5cd0f6=>_0x5cd0f6&&_0x5cd0f6['state']===_0xc13f63(0x1c1));if(_0x4ff0b3[_0xc13f63(0x172)]===0x0)return;const _0x274a4c=Date[_0xc13f63(0x1e7)](),_0x5d8a81=scaleValue(level,BASE_GRID_FIRE_INTERVAL,MIN_GRID_FIRE_INTERVAL);if(_0x274a4c-lastGridFireCheckTime<_0x5d8a81)return;lastGridFireCheckTime=_0x274a4c;const _0x4cade7=scaleValue(level,BASE_GRID_FIRE_PROBABILITY,MAX_GRID_FIRE_PROBABILITY),_0x144c63=Math[_0xc13f63(0x1a4)](scaleValue(level,BASE_GRID_MAX_FIRING_ENEMIES,MAX_GRID_MAX_FIRING_ENEMIES));let _0x286777=0x0;_0x4ff0b3['sort'](()=>Math[_0xc13f63(0x1f7)]()-0.5);for(const _0x299114 of _0x4ff0b3){if(_0x286777>=_0x144c63)break;if(_0x299114['type']===ENEMY2_TYPE||_0x299114['type']===ENEMY3_TYPE){if(_0x299114[_0xc13f63(0x226)]===ENEMY3_TYPE&&_0x299114['hasCapturedShip'])continue;Math[_0xc13f63(0x1f7)]()<_0x4cade7&&(createBulletSimple(_0x299114)&&(playSound(enemyShootSound),_0x299114[_0xc13f63(0x1ee)]=_0x274a4c,_0x286777++));}}}function runSingleGameUpdate(_0x3e1669){const _0x104add=_0x1065;try{const _0x5b65ff=Date[_0x104add(0x1e7)]();if(isManualControl&&connectedGamepadIndex!==null&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isPaused&&!isShipCaptured){const _0x38f704=navigator[_0x104add(0x24a)]();if(_0x38f704?.[connectedGamepadIndex]){const _0x3e07a8=_0x38f704[connectedGamepadIndex],_0x3985e1=processSingleController(_0x3e07a8,previousButtonStates);previousButtonStates=_0x3985e1[_0x104add(0x231)];if(_0x3985e1['back']){stopGameAndShowMenu();return;}}else{if(previousButtonStates[_0x104add(0x172)]>0x0)previousButtonStates=[];}}else{if(connectedGamepadIndex===null){if(previousButtonStates[_0x104add(0x172)]>0x0)previousButtonStates=[];}}if(connectedGamepadIndexP2===null){if(previousGameButtonStatesP2[_0x104add(0x172)]>0x0)previousGameButtonStatesP2=[];}if(isPaused){renderGame();return;}if(isShowingPlayerGameOverMessage&&isTwoPlayerMode){if(_0x5b65ff-playerGameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION){isShowingPlayerGameOverMessage=![];if(nextActionAfterPlayerGameOver==='switch_player'){if(switchPlayerTurn()){let _0x4db946=level;if(playerWhoIsGameOver===0x1&&currentPlayer===0x2){}else playerWhoIsGameOver===0x2&&currentPlayer===0x1&&player1CompletedLevel===level&&(level++,player1CompletedLevel=-0x1,_0x4db946=level);currentPlayer===0x1?player1MaxLevelReached=Math['max'](player1MaxLevelReached,level):player2MaxLevelReached=Math[_0x104add(0x225)](player2MaxLevelReached,level),resetWave();}else triggerFinalGameOverSequence();}else nextActionAfterPlayerGameOver==='show_results'?triggerFinalGameOverSequence():(console[_0x104add(0x23b)]('[Player\x20GO\x20Delay\x20End]\x20Invalid\x20next\x20action:',nextActionAfterPlayerGameOver),triggerFinalGameOverSequence());renderGame();return;}else{renderGame();return;}}if(isShowingCaptureMessage){const _0x4070a3=enemies[_0x104add(0x1e1)](_0xca9db3=>_0xca9db3['id']===capturedBossIdWithMessage);if(_0x4070a3&&_0x4070a3[_0x104add(0x180)]==='showing_capture_message'){const _0x1b52e7=_0x5b65ff-captureMessageStartTime,_0x3bfaff=Math[_0x104add(0x1a1)](0x1,_0x1b52e7/CAPTURE_MESSAGE_DURATION);_0x4070a3[_0x104add(0x268)]=_0x3bfaff*0x2*(0x2*Math['PI']);}else _0x4070a3&&(_0x4070a3[_0x104add(0x268)]=0x0);if(_0x5b65ff-captureMessageStartTime>=CAPTURE_MESSAGE_DURATION){isShowingCaptureMessage=![],stopSound(shipCapturedSound),captureBeamActive=![],capturingBossId=null;if(_0x4070a3&&_0x4070a3[_0x104add(0x180)]==='showing_capture_message'){_0x4070a3['state']=_0x104add(0x1db),_0x4070a3[_0x104add(0x268)]=0x0;try{const _0x9e0cb6=_0x4070a3[_0x104add(0x226)]===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH,{x:_0x2cec5d,y:_0x1343b3}=getCurrentGridSlotPosition(_0x4070a3[_0x104add(0x209)],_0x4070a3[_0x104add(0x1c8)],_0x9e0cb6);_0x4070a3[_0x104add(0x1e5)]=_0x2cec5d,_0x4070a3[_0x104add(0x1cf)]=_0x1343b3;}catch(_0x34f638){console[_0x104add(0x23b)](_0x104add(0x1ad)+_0x4070a3['id']+':',_0x34f638),_0x4070a3[_0x104add(0x1e5)]=gameCanvas[_0x104add(0x1ba)]/0x2,_0x4070a3[_0x104add(0x1cf)]=ENEMY_TOP_MARGIN;}}else _0x4070a3?(console['warn'](_0x104add(0x269)+capturedBossIdWithMessage+_0x104add(0x176)),_0x4070a3[_0x104add(0x268)]=0x0):console['warn'](_0x104add(0x217)+capturedBossIdWithMessage+_0x104add(0x1ff));capturedBossIdWithMessage=null;}isInGameState&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&(moveEntities(),updateExplosions(),updateFloatingScores());renderGame();return;}!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&!isShipCaptured&&!isShowingCaptureMessage&&(!isManualControl&&isInGameState&&playerLives>0x0&&aiControl(),isInGameState&&isManualControl&&playerLives>0x0&&handlePlayerInput());isInGameState&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&!isShowingCaptureMessage&&(moveEntities(),updateExplosions(),updateFloatingScores());isInvincible&&_0x5b65ff>=invincibilityEndTime&&(isInvincible=![],invincibilityEndTime=0x0);if(isCsCompletionDelayActive&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(_0x5b65ff-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY){isCsCompletionDelayActive=![];csCompletionResultIsPerfect?(playSound(csPerfectSound),showCsHitsMessage=!![],csHitsMessageStartTime=_0x5b65ff):(playSound(csClearSound),showCSClearMessage=!![],csClearMessageStartTime=_0x5b65ff);renderGame();return;}else{renderGame();return;}}let _0x5c8164=![],_0x6b20ba=![];if(!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(showCsHitsMessage)Date['now']()-csHitsMessageStartTime>CS_HITS_MESSAGE_DURATION&&(showCsHitsMessage=![],showPerfectMessage=!![],perfectMessageStartTime=_0x5b65ff),_0x6b20ba=!![];else{if(showPerfectMessage)Date[_0x104add(0x1e7)]()-perfectMessageStartTime>CS_PERFECT_MESSAGE_DURATION&&(showPerfectMessage=![],showCsBonusScoreMessage=!![],csBonusScoreMessageStartTime=_0x5b65ff),_0x6b20ba=!![];else{if(showCsBonusScoreMessage)Date[_0x104add(0x1e7)]()-csBonusScoreMessageStartTime>CS_BONUS_MESSAGE_DURATION&&(showCsBonusScoreMessage=![],_0x5c8164=!![]),_0x6b20ba=!![];else{if(showCSClearMessage)Date['now']()-csClearMessageStartTime>=CS_CLEAR_HITS_DELAY&&!showCsHitsForClearMessage&&(showCsHitsForClearMessage=!![]),Date[_0x104add(0x1e7)]()-csClearMessageStartTime>=CS_CLEAR_SCORE_DELAY&&!showCsScoreForClearMessage&&(showCsScoreForClearMessage=!![]),Date[_0x104add(0x1e7)]()-csClearMessageStartTime>=CS_CLEAR_DELAY&&(showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],_0x5c8164=!![]),_0x6b20ba=!![];else{if(showExtraLifeMessage)Date[_0x104add(0x1e7)]()-extraLifeMessageStartTime>EXTRA_LIFE_MESSAGE_DURATION&&(showExtraLifeMessage=![],_0x5c8164=!![]),_0x6b20ba=!![];else showReadyMessage&&(Date[_0x104add(0x1e7)]()-readyMessageStartTime>READY_MESSAGE_DURATION&&(showReadyMessage=![],_0x5c8164=!![]),_0x6b20ba=!![]);}}}}}if(_0x6b20ba){renderGame();return;}if(isShowingIntro&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){let _0xfa388f=![];const _0x180c76=_0x5b65ff-introDisplayStartTime,_0x2e9005=0xbb8,_0xe3de68=INTRO_DURATION_PER_STEP;if(introStep===0x1)isTwoPlayerMode&&!playerIntroSoundPlayed&&(playSound(levelUpSound),playerIntroSoundPlayed=!![]),level===0x1&&currentPlayer===0x1&&!playerIntroSoundPlayed&&(playSound(startSound),playerIntroSoundPlayed=!![]);else{if(introStep===0x2)!isTwoPlayerMode&&level>0x1&&!isChallengingStage&&!stageIntroSoundPlayed&&(playSound(levelUpSound),stageIntroSoundPlayed=!![]);else introStep===0x3&&(!csIntroSoundPlayed&&(playSound(entranceSound),csIntroSoundPlayed=!![]));}if(introStep===0x1){let _0x4abbdf=isTwoPlayerMode?_0x2e9005:_0xe3de68;if(level===0x1&&!isTwoPlayerMode)_0x4abbdf=_0xe3de68;_0x180c76>=_0x4abbdf&&(isChallengingStage?introStep=0x3:introStep=0x2,introDisplayStartTime=_0x5b65ff);}else{if(introStep===0x2){const _0x1184ff=_0xe3de68;_0x180c76>=_0x1184ff&&(_0xfa388f=!![]);}else introStep===0x3&&(_0x180c76>=_0xe3de68&&(_0xfa388f=!![]));}if(_0xfa388f){isShowingIntro=![],introStep=0x0;!isChallengingStage?aiCanShootTime=Date['now']()+0xbb8:aiCanShootTime=0x0;if(isChallengingStage)startChallengingStageSequence();else{currentWaveDefinition=generateWaveDefinition(level);if(currentWaveDefinition&&currentWaveDefinition[_0x104add(0x172)]>0x0)isFullGridWave?startFullGridWave():scheduleEntranceFlightWave();else{console[_0x104add(0x16a)](_0x104add(0x26a)+level+_0x104add(0x18b)),isEntrancePhaseActive=![],stopSound(entranceSound),isWaveTransitioning=!![],readyForNextWaveReset=!![];const _0x2ee2d9=0x64;setTimeout(()=>{(isInGameState||!isInGameState&&playerLives>0x0)&&typeof resetWave==='function'&&(playerLives>0x0?resetWave():triggerFinalGameOverSequence());},_0x2ee2d9);}}}renderGame();return;}gameJustStarted&&(gameJustStarted=![]);if(!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(GRID_BREATH_ENABLED&&isInGameState&&!isChallengingStage&&!isWaveTransitioning&&playerLives>0x0){const _0x25e0f5=enemies[_0x104add(0x18d)](_0xafbf8=>_0xafbf8?.[_0x104add(0x180)]==='in_grid');if(_0x25e0f5&&isGridBreathingActive){const _0x4b062e=_0x5b65ff-gridBreathStartTime,_0x11f9e2=scaleValue(level,BASE_GRID_BREATH_CYCLE_MS,MIN_GRID_BREATH_CYCLE_MS),_0x118854=_0x4b062e%_0x11f9e2;currentGridBreathFactor=(Math[_0x104add(0x1b9)](_0x118854/_0x11f9e2*Math['PI']*0x2-Math['PI']/0x2)+0x1)/0x2;}else{if(!_0x25e0f5&&isGridBreathingActive)isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0;else _0x25e0f5&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=_0x5b65ff,currentGridBreathFactor=0x0);}}else isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if(isEntrancePhaseActive){const _0x351c2b=enemiesSpawnedThisWave>=totalEnemiesScheduledForWave,_0x3b3696=enemies['some'](_0x28f13d=>_0x28f13d?.[_0x104add(0x180)]===_0x104add(0x20a)||_0x28f13d?.[_0x104add(0x180)]===_0x104add(0x271)||_0x28f13d?.['state']===_0x104add(0x174));if(totalEnemiesScheduledForWave>0x0&&_0x351c2b&&!_0x3b3696){const _0x5d13a5=isEntrancePhaseActive;isEntrancePhaseActive=![],_0x5d13a5&&(stopSound(entranceSound),enemiesSpawnedThisWave=0x0,totalEnemiesScheduledForWave=0x0,enemySpawnTimeouts[_0x104add(0x1e0)](clearTimeout),enemySpawnTimeouts=[],gridJustCompleted=!![],!isChallengingStage&&typeof triggerImmediateCaptureDive===_0x104add(0x1b4)&&triggerImmediateCaptureDive());}}!isChallengingStage&&!isShowingIntro&&!isPaused&&!isWaveTransitioning&&triggerGridFiring();if(!isWaveTransitioning&&playerLives>0x0&&!isShowingIntro&&!isShipCaptured&&!isShowingCaptureMessage&&!isEntrancePhaseActive){let _0x282caa=enemies['length']===0x0,_0x5c6e62=fallingShips[_0x104add(0x172)]===0x0,_0x246951=![];isChallengingStage?_0x282caa&&!isEntrancePhaseActive&&(_0x246951=!![]):_0x282caa&&!isEntrancePhaseActive&&_0x5c6e62&&(_0x246951=!![]);if(_0x246951){isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);!isManualControl&&ship&&gameCanvas?.['width']>0x0&&(ship['x']=Math[_0x104add(0x1a4)](gameCanvas[_0x104add(0x1ba)]/0x2-ship['width']/0x2),ship[_0x104add(0x17f)]=ship['x']);isWaveTransitioning=!![];isGridSoundPlaying&&(stopSound(gridBackgroundSound),isGridSoundPlaying=![]);bullets=[],enemyBullets=[],explosions=[],enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,floatingScores=[];const _0x2ee2d4=currentPlayer;isTwoPlayerMode&&_0x2ee2d4===0x1&&(player1CompletedLevel=level);let _0x5cac8e;if(isChallengingStage){csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,isCsCompletionDelayActive=!![],csCompletionDelayStartTime=_0x5b65ff;if(csCompletionResultIsPerfect){const _0x53a406=score;score+=0x2710,highScore=Math[_0x104add(0x225)](highScore,score);let _0x5ad99d=![],_0x3b977d=null;if(!isManualControl)_0x5ad99d=player1TriggeredHighScoreSound,_0x3b977d=()=>{player1TriggeredHighScoreSound=!![];};else isTwoPlayerMode?currentPlayer===0x1?(_0x5ad99d=player1TriggeredHighScoreSound,_0x3b977d=()=>{player1TriggeredHighScoreSound=!![];}):(_0x5ad99d=player2TriggeredHighScoreSound,_0x3b977d=()=>{player2TriggeredHighScoreSound=!![];}):(_0x5ad99d=player1TriggeredHighScoreSound,_0x3b977d=()=>{player1TriggeredHighScoreSound=!![];});if(!_0x5ad99d&&score>highScore-0x2710){if(_0x3b977d)_0x3b977d();playSound(hiScoreSound);}if(currentPlayer===0x1)player1Score=score;else player2Score=score;checkAndAwardExtraLife(),_0x5cac8e=CS_COMPLETION_MESSAGE_DELAY+CS_HITS_MESSAGE_DURATION+CS_PERFECT_MESSAGE_DURATION+CS_BONUS_MESSAGE_DURATION;}else checkAndAwardExtraLife(),_0x5cac8e=CS_COMPLETION_MESSAGE_DELAY+CS_CLEAR_DELAY;_0x5cac8e+=0x64;}else playSound(waveUpSound),normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,_0x5cac8e=POST_MESSAGE_RESET_DELAY;setTimeout(()=>{const _0x41abe4=_0x104add;let _0x55c42b=![],_0x1f9143=currentPlayer;if(isTwoPlayerMode){if(currentPlayer===0x1)player1Score=score;else player2Score=score;const _0x4de98a=switchPlayerTurn();_0x4de98a?(_0x1f9143=currentPlayer,_0x2ee2d4===0x2&&player1CompletedLevel===level?(_0x55c42b=!![],player1CompletedLevel=-0x1):_0x55c42b=![]):(_0x1f9143=_0x2ee2d4,_0x55c42b=!![],player1CompletedLevel=-0x1);}else _0x1f9143=0x1,_0x55c42b=!![];_0x55c42b&&level++;const _0x5f393f=_0x1f9143===0x1?player1Lives:player2Lives;_0x5f393f>0x0?(_0x1f9143===0x1?player1MaxLevelReached=Math[_0x41abe4(0x225)](player1MaxLevelReached,level):player2MaxLevelReached=Math[_0x41abe4(0x225)](player2MaxLevelReached,level),resetWave()):(console[_0x41abe4(0x23b)](_0x41abe4(0x194)),triggerFinalGameOverSequence());},_0x5cac8e),renderGame();return;}if(!isChallengingStage){if(enemies[_0x104add(0x172)]>0x0){let _0x51044d=null;const _0x2ce2cb=enemies[_0x104add(0x189)](_0x450c35=>_0x450c35?.['state']===_0x104add(0x1c1)),_0x55e5fa=_0x2ce2cb[_0x104add(0x172)]<=0x3,_0x152b3d=Math[_0x104add(0x225)](0x1,Math[_0x104add(0x1a1)](level,LEVEL_CAP_FOR_SCALING)),_0x543948=0x1068,_0x5e6e81=0x320,_0xc5fc51=(_0x152b3d-0x1)*((_0x543948-_0x5e6e81)/(LEVEL_CAP_FOR_SCALING-0x1)),_0x474300=Math[_0x104add(0x225)](_0x5e6e81,_0x543948-_0xc5fc51),_0x30c4bb=Math[_0x104add(0x1a4)](scaleValue(level,BASE_MAX_ATTACKING_ENEMIES,MAX_MAX_ATTACKING_ENEMIES)),_0x321149=enemies[_0x104add(0x189)](_0x3dc440=>_0x3dc440?.[_0x104add(0x180)]==='attacking'||_0x3dc440?.[_0x104add(0x180)]===_0x104add(0x245))[_0x104add(0x172)];if(_0x55e5fa||_0x5b65ff-lastEnemyDetachTime>_0x474300&&_0x2ce2cb[_0x104add(0x172)]>0x0&&_0x321149<_0x30c4bb){_0x51044d=findAndDetachEnemy();if(_0x51044d&&_0x51044d['length']>0x0){const _0x1d72ae=_0x51044d['map'](_0x208f2e=>enemies['find'](_0x3d1c95=>_0x3d1c95?.['id']===_0x208f2e['id']))[_0x104add(0x189)](_0x2311dd=>_0x2311dd&&_0x2311dd[_0x104add(0x180)]==='in_grid');if(_0x1d72ae['length']>0x0){const _0x24546e=_0x1d72ae[0x0],_0x3aeffd=_0x24546e[_0x104add(0x205)];!_0x55e5fa&&(lastEnemyDetachTime=_0x5b65ff);if(_0x3aeffd===_0x104add(0x1d3)){const _0x25627e=generateAttackPath(_0x24546e);if(_0x25627e&&_0x25627e[_0x104add(0x172)]>0x0){_0x1d72ae[_0x104add(0x172)]===0x3&&_0x24546e[_0x104add(0x226)]===ENEMY3_TYPE&&level!==0x1&&playSound(tripleAttackSound);let _0x370471=[..._0x1d72ae];const _0x16f70b=_0x370471[_0x104add(0x172)];if(_0x16f70b>0x1){let _0x1e9114=null,_0x37624b=[];_0x370471['forEach'](_0x3c1f42=>{const _0x55f5cc=_0x104add;if(_0x3c1f42[_0x55f5cc(0x226)]===ENEMY3_TYPE)_0x1e9114=_0x3c1f42;else _0x37624b['push'](_0x3c1f42);});_0x1e9114&&level!==0x1&&_0x16f70b===0x3&&_0x37624b[_0x104add(0x172)]===0x2?_0x370471=[_0x37624b[0x0],_0x1e9114,_0x37624b[0x1]]:_0x370471[_0x104add(0x198)]((_0x391d5b,_0x37d0c3)=>(_0x391d5b?.['gridCol']??0x0)-(_0x37d0c3?.[_0x104add(0x1c8)]??0x0));const _0x2fdd82=0x5;let _0xcdcd48=0x0;_0x370471=_0x370471['filter'](_0x4edefe=>_0x4edefe&&typeof _0x4edefe[_0x104add(0x1ba)]===_0x104add(0x212));const _0x821f84=_0x370471['length'];for(let _0x312dfe=0x0;_0x312dfe<_0x821f84;_0x312dfe++){_0xcdcd48+=_0x370471[_0x312dfe][_0x104add(0x1ba)];if(_0x312dfe<_0x821f84-0x1)_0xcdcd48+=_0x2fdd82;}const _0x4b5047=-_0xcdcd48/0x2;let _0x1ee426=_0x4b5047;for(let _0x321800=0x0;_0x321800<_0x821f84;_0x321800++){const _0x344995=_0x370471[_0x321800];_0x344995[_0x104add(0x230)]=_0x1ee426+_0x344995[_0x104add(0x1ba)]/0x2,_0x1ee426+=_0x344995[_0x104add(0x1ba)]+_0x2fdd82;}}else _0x370471[_0x104add(0x1e0)](_0x5b215f=>_0x5b215f['attackFormationOffsetX']=0x0);const _0x54f8e0=_0x104add(0x246)+_0x24546e['id']+'-'+_0x5b65ff;_0x370471[_0x104add(0x1e0)](_0x56b1ee=>{const _0x582222=_0x104add;if(_0x56b1ee)_0x56b1ee[_0x582222(0x22e)]=_0x54f8e0;});let _0xa2a0e0=![],_0x11c93d=GROUP_FIRE_BURST_DELAY;if(_0x24546e['type']===ENEMY2_TYPE||_0x24546e['type']===ENEMY3_TYPE)_0xa2a0e0=!![],_0x24546e[_0x104add(0x226)]===ENEMY2_TYPE&&_0x16f70b===0x1&&(_0x11c93d=SOLO_BUTTERFLY_FIRE_DELAY);else _0x24546e[_0x104add(0x226)]===ENEMY1_TYPE&&(_0xa2a0e0=!![]);_0x55e5fa&&level>0x1&&(_0xa2a0e0=![]),_0xa2a0e0&&_0x370471[_0x104add(0x1e0)](_0x3f27b7=>{const _0x21ec8d=_0x104add,_0x3a3e7d=_0x3f27b7&&!(_0x3f27b7[_0x21ec8d(0x226)]===ENEMY3_TYPE&&_0x3f27b7['hasCapturedShip']);_0x3a3e7d&&fireEnemyBurst(_0x3f27b7['id'],'attacking',_0x11c93d);}),_0x370471[_0x104add(0x1e0)]((_0x3f56d4,_0x392179)=>{const _0x18c2af=_0x104add;_0x3f56d4&&_0x3f56d4['state']===_0x18c2af(0x1c1)&&(_0x3f56d4['state']=_0x18c2af(0x245),_0x3f56d4['justReturned']=![],_0x3f56d4[_0x18c2af(0x1d1)]=0x0,_0x3f56d4['velocityY']=0x0,_0x3f56d4[_0x18c2af(0x1bd)]=![],setTimeout(()=>{const _0x21cb11=_0x18c2af;if(isPaused)return;const _0x18f5b8=enemies[_0x21cb11(0x1e1)](_0x44787c=>_0x44787c?.['id']===_0x3f56d4['id']);if(_0x18f5b8&&_0x18f5b8[_0x21cb11(0x180)]===_0x21cb11(0x245))try{const _0x4898c7=scaleValue(level,BASE_ENEMY_ATTACK_SPEED,MAX_ENEMY_ATTACK_SPEED);let _0x5d01f0=0x1;if(_0x18f5b8['type']===ENEMY1_TYPE)_0x5d01f0=ENEMY1_DIVE_SPEED_FACTOR;else{if(_0x18f5b8[_0x21cb11(0x226)]===ENEMY2_TYPE)_0x5d01f0=ENEMY2_DIVE_SPEED_FACTOR;else{if(_0x18f5b8[_0x21cb11(0x226)]===ENEMY3_TYPE)_0x5d01f0=ENEMY3_ATTACK_SPEED_FACTOR;}}if(_0x3f56d4[_0x21cb11(0x226)]===ENEMY3_TYPE)playSound(bossGalagaDiveSound);else playSound(butterflyDiveSound);_0x18f5b8[_0x21cb11(0x180)]='attacking',_0x18f5b8[_0x21cb11(0x242)]=_0x25627e,_0x18f5b8['attackPathSegmentIndex']=0x0,_0x18f5b8['attackPathT']=0x0,_0x18f5b8[_0x21cb11(0x166)]=_0x4898c7*_0x5d01f0,_0x18f5b8[_0x21cb11(0x1ee)]=0x0,_0x18f5b8[_0x21cb11(0x1bd)]=!![];}catch(_0x2b4a82){console[_0x21cb11(0x23b)](_0x21cb11(0x1a7)+_0x3f56d4['id']+':',_0x2b4a82);}},_0x392179*GROUP_DETACH_DELAY_MS));});}else console[_0x104add(0x16a)]('[DEBUG\x20Attack\x20Path\x20Failed]\x20Could\x20not\x20generate\x20path\x20for\x20leader\x20'+_0x24546e?.['id']+_0x104add(0x211)),_0x51044d['forEach'](_0x44c450=>{if(_0x44c450)_0x44c450['justReturned']=![];});}}}}}}enemies[_0x104add(0x1e0)](_0xbcf164=>{const _0x426b8c=_0x104add;if(_0xbcf164&&_0xbcf164[_0x426b8c(0x226)]===ENEMY3_TYPE&&_0xbcf164[_0x426b8c(0x26f)]&&_0xbcf164[_0x426b8c(0x180)]===_0x426b8c(0x253)&&_0xbcf164[_0x426b8c(0x16c)]&&typeof _0xbcf164[_0x426b8c(0x23f)]==='number'){if(_0x5b65ff-_0xbcf164['capturedShipLastFiredTime']>CAPTURED_SHIP_FIRE_COOLDOWN_MS){const _0xfd6061=_0xbcf164['x']+_0xbcf164[_0x426b8c(0x1ba)]/0x2,_0x47d635=_0xbcf164['y']+_0xbcf164[_0x426b8c(0x16d)]+_0xbcf164[_0x426b8c(0x16c)][_0x426b8c(0x16d)]*0.5,_0x31298d={'x':_0xfd6061,'y':_0x47d635};createBulletSimple(_0xbcf164,_0x31298d)&&(_0xbcf164[_0x426b8c(0x23f)]=_0x5b65ff,playSound(playerShootSound));}}});}}else{if(gameOverSequenceStartTime>0x0){const _0x20fd97=_0x5b65ff-gameOverSequenceStartTime,_0x4a5e36=_0x20fd97>=GAME_OVER_DURATION;_0x4a5e36&&!isShowingResultsScreen&&(isShowingResultsScreen=!![],stopSound(gameOverSound),playSound(resultsMusicSound));}}renderGame();}catch(_0x30d97a){console[_0x104add(0x23b)]('!!!\x20CRITICAL\x20ERROR\x20IN\x20runSingleGameUpdate\x20!!!',_0x30d97a,_0x30d97a[_0x104add(0x206)]),isPaused=![];mainLoopId&&(cancelAnimationFrame(mainLoopId),mainLoopId=null);isInGameState=![],isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',alert(_0x104add(0x18c)),stopAllGameSounds(),isGridSoundPlaying=![],isInvincible=![],invincibilityEndTime=0x0;try{typeof showMenuState===_0x104add(0x1b4)&&showMenuState();}catch(_0x50b26d){console[_0x104add(0x23b)](_0x104add(0x1e3),_0x50b26d);}}}function checkAndAwardExtraLife(){const _0x667f9b=_0x1065;try{let _0x11688b;!isManualControl||!isTwoPlayerMode?_0x11688b=player1LifeThresholdsMet:_0x11688b=currentPlayer===0x1?player1LifeThresholdsMet:player2LifeThresholdsMet;let _0x12b22e=![];while(!![]){let _0x3eb46a=![],_0x4b9a9a=-0x1;const _0x33d4cc=_0x11688b['size'];_0x33d4cc===0x0?_0x4b9a9a=EXTRA_LIFE_THRESHOLD_1:_0x4b9a9a=EXTRA_LIFE_THRESHOLD_2+(_0x33d4cc-0x1)*RECURRING_EXTRA_LIFE_INTERVAL;if(_0x4b9a9a!==-0x1&&score>=_0x4b9a9a&&!_0x11688b[_0x667f9b(0x252)](_0x4b9a9a)){playerLives++,_0x11688b[_0x667f9b(0x1f3)](_0x4b9a9a),_0x12b22e=!![],_0x3eb46a=!![];if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}}if(!_0x3eb46a)break;}_0x12b22e&&!showExtraLifeMessage&&(showExtraLifeMessage=!![],extraLifeMessageStartTime=Date[_0x667f9b(0x1e7)](),playSound(extraLifeSound));}catch(_0x277f5c){console[_0x667f9b(0x23b)](_0x667f9b(0x216),_0x277f5c);}}