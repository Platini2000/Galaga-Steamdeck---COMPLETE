const _0x236fd5=_0xf0bc;(function(_0x4a088f,_0x32fb88){const _0x45d5ec=_0xf0bc,_0x2ce764=_0x4a088f();while(!![]){try{const _0x9ea0ec=-parseInt(_0x45d5ec(0x1ff))/0x1+-parseInt(_0x45d5ec(0x274))/0x2+-parseInt(_0x45d5ec(0x24b))/0x3*(-parseInt(_0x45d5ec(0x1be))/0x4)+parseInt(_0x45d5ec(0x276))/0x5*(parseInt(_0x45d5ec(0x1fa))/0x6)+-parseInt(_0x45d5ec(0x229))/0x7*(parseInt(_0x45d5ec(0x1fe))/0x8)+-parseInt(_0x45d5ec(0x259))/0x9+parseInt(_0x45d5ec(0x1d0))/0xa;if(_0x9ea0ec===_0x32fb88)break;else _0x2ce764['push'](_0x2ce764['shift']());}catch(_0x3f60e5){_0x2ce764['push'](_0x2ce764['shift']());}}}(_0x1b2a,0x6de09));function generateAttackPathInternal(_0xf4a0a2){const _0xe3eca1=_0xf0bc;try{if(!_0xf4a0a2||!gameCanvas)return[];const _0x2f533c=_0xf4a0a2[_0xe3eca1(0x14f)]===ENEMY3_TYPE?BOSS_WIDTH:_0xf4a0a2['type']===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x540988=_0xf4a0a2['type']===ENEMY3_TYPE?BOSS_HEIGHT:_0xf4a0a2[_0xe3eca1(0x14f)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x28f968=_0x2f533c*0.5,_0xa9924a=gameCanvas[_0xe3eca1(0x218)],_0x5e86e3=gameCanvas[_0xe3eca1(0x25d)];let _0x1886b1=[];const _0x521a39={'x':_0xf4a0a2['x'],'y':_0xf4a0a2['y']},_0x2d0cb7=Math[_0xe3eca1(0x156)](_0x5e86e3*0.06,_0x540988*1.8),_0x5b21c2=Math['min'](_0xa9924a*0.04,_0x2f533c*1.2),_0x176e22=_0xf4a0a2['x']+_0x2f533c/0x2<_0xa9924a/0x2?0x1:-0x1,_0x4b7673={'x':_0x521a39['x']-_0x176e22*_0x5b21c2*0.6,'y':_0x521a39['y']-_0x2d0cb7};_0x4b7673['x']=Math[_0xe3eca1(0x26c)](_0x28f968,Math[_0xe3eca1(0x156)](_0xa9924a-_0x28f968-_0x2f533c,_0x4b7673['x'])),_0x4b7673['y']=Math[_0xe3eca1(0x26c)](_0x28f968,_0x4b7673['y']);const _0x13b5e1={'x':_0x521a39['x']+_0x176e22*_0x5b21c2*0.1,'y':_0x521a39['y']-_0x2d0cb7*1.4},_0x211ab8={'x':_0x4b7673['x']+_0x176e22*_0x5b21c2*0.3,'y':_0x521a39['y']-_0x2d0cb7*1.5},_0x57e212={'p0':_0x521a39,'p1':_0x13b5e1,'p2':_0x211ab8,'p3':_0x4b7673};_0x1886b1['push'](_0x57e212);const _0x167ecb=_0x4b7673,_0x5bc328=_0x5e86e3*0.45,_0x3faeb9=_0xa9924a*0.22,_0x160d8c=_0x5e86e3*0.28,_0x2518cf=0.5,_0x25f1d2=0.6,_0x5cd0ee=_0x5e86e3*0.85,_0x3559a7=Math[_0xe3eca1(0x15d)](Math['random']()*0x3);let _0x48956f=[];if(_0x3559a7===0x0){const _0x12c3ae=_0x5bc328+Math['random']()*_0x5e86e3*0.1,_0x594b5=_0x3faeb9+Math[_0xe3eca1(0x237)]()*_0xa9924a*0.08,_0x4ef696=_0x160d8c+Math[_0xe3eca1(0x237)]()*_0x5e86e3*0.08,_0x4e71d5=_0x167ecb['x']+_0x176e22*_0x594b5*0.5,_0x28cf4f=Math[_0xe3eca1(0x156)](_0x5cd0ee,_0x167ecb['y']+_0x12c3ae),_0x867871=_0x4e71d5+_0x176e22*_0x594b5*0.5,_0x8e3af4=Math[_0xe3eca1(0x26c)](_0x167ecb['y']+0x14,_0x28cf4f-_0x4ef696),_0x3e7888=_0x867871-_0x176e22*_0x594b5*0.9,_0x21e5b1=Math[_0xe3eca1(0x26c)](_0x167ecb['y']+0x28,_0x8e3af4+_0x4ef696*0.6),_0x48df24=_0x3e7888-_0x176e22*_0x594b5*0.3,_0x3f8418=_0x5e86e3+_0x540988*0x2,_0x46fb1d=Math[_0xe3eca1(0x26c)](_0x28f968,Math[_0xe3eca1(0x156)](_0xa9924a-_0x28f968-_0x2f533c,_0x4e71d5)),_0x57d061=Math[_0xe3eca1(0x26c)](_0x28f968,Math[_0xe3eca1(0x156)](_0xa9924a-_0x28f968-_0x2f533c,_0x867871)),_0x2f2c06=Math['max'](_0x28f968,Math[_0xe3eca1(0x156)](_0xa9924a-_0x28f968-_0x2f533c,_0x3e7888)),_0x4f7ff0={'x':_0x167ecb['x'],'y':_0x167ecb['y']+_0x12c3ae*_0x25f1d2*0.5},_0x21dc03={'x':_0x46fb1d-_0x176e22*_0x594b5*_0x2518cf,'y':_0x28cf4f},_0x563b8c={'x':_0x46fb1d,'y':_0x28cf4f},_0x1224c9={'x':_0x46fb1d+_0x176e22*_0x594b5*_0x2518cf,'y':_0x28cf4f},_0x269ea6={'x':_0x57d061,'y':_0x8e3af4+_0x4ef696*_0x25f1d2},_0x460529={'x':_0x57d061,'y':_0x8e3af4},_0x4d6706={'x':_0x57d061,'y':_0x8e3af4-_0x4ef696*_0x25f1d2*0.5},_0x3ddc44={'x':_0x2f2c06+_0x176e22*_0x594b5*_0x2518cf,'y':_0x21e5b1},_0x262ce0={'x':_0x2f2c06,'y':_0x21e5b1},_0x359b6d={'x':_0x262ce0['x'],'y':_0x262ce0['y']+_0x5e86e3*0.1},_0x29edb0={'x':_0x48df24,'y':_0x3f8418-_0x5e86e3*0.2},_0x5c2dcf={'x':_0x48df24,'y':_0x3f8418};_0x48956f=[{'p0':_0x167ecb,'p1':_0x4f7ff0,'p2':_0x21dc03,'p3':_0x563b8c},{'p0':_0x563b8c,'p1':_0x1224c9,'p2':_0x269ea6,'p3':_0x460529},{'p0':_0x460529,'p1':_0x4d6706,'p2':_0x3ddc44,'p3':_0x262ce0},{'p0':_0x262ce0,'p1':_0x359b6d,'p2':_0x29edb0,'p3':_0x5c2dcf}];}else{if(_0x3559a7===0x1){const _0x10dd7b=_0x5bc328*0.8+Math['random']()*_0x5e86e3*0.1,_0x56616b=_0x3faeb9*1.2+Math[_0xe3eca1(0x237)]()*_0xa9924a*0.1,_0x5361ef=_0x160d8c*0.7+Math['random']()*_0x5e86e3*0.1,_0x96d791=_0x167ecb['x']+_0x176e22*_0x56616b*0.4,_0x2f7210=Math['min'](_0x5cd0ee-_0x5361ef*0.5,_0x167ecb['y']+_0x10dd7b*0.6),_0x104a98=_0x96d791+_0x176e22*_0x56616b*0.6,_0x25c194=Math[_0xe3eca1(0x156)](_0x5cd0ee,_0x2f7210+_0x5361ef),_0x40afcc=_0x104a98-_0x176e22*_0x56616b*0.5,_0x24800b=_0x5e86e3+_0x540988*0x2,_0x16351a=Math['max'](_0x28f968,Math[_0xe3eca1(0x156)](_0xa9924a-_0x28f968-_0x2f533c,_0x96d791)),_0x1ca5d6=Math[_0xe3eca1(0x26c)](_0x28f968,Math[_0xe3eca1(0x156)](_0xa9924a-_0x28f968-_0x2f533c,_0x104a98)),_0x3de34b={'x':_0x167ecb['x']-_0x176e22*_0x56616b*0.1,'y':_0x167ecb['y']+_0x10dd7b*0.3},_0x1982ab={'x':_0x16351a-_0x176e22*_0x56616b*_0x2518cf*0.8,'y':_0x2f7210+_0x5361ef*_0x25f1d2*0.4},_0x15e546={'x':_0x16351a,'y':_0x2f7210},_0x2d33de={'x':_0x16351a+_0x176e22*_0x56616b*_0x2518cf*0.8,'y':_0x2f7210-_0x5361ef*_0x25f1d2*0.4},_0x40490b={'x':_0x1ca5d6+_0x176e22*_0x56616b*_0x2518cf*0.6,'y':_0x25c194+_0x5361ef*_0x25f1d2*0.5},_0x314611={'x':_0x1ca5d6,'y':_0x25c194},_0xb852ab={'x':_0x1ca5d6-_0x176e22*_0x56616b*0.2,'y':_0x25c194+_0x5e86e3*0.1},_0x3bdeb9={'x':_0x40afcc,'y':_0x24800b-_0x5e86e3*0.3},_0x15b5e4={'x':_0x40afcc,'y':_0x24800b};_0x48956f=[{'p0':_0x167ecb,'p1':_0x3de34b,'p2':_0x1982ab,'p3':_0x15e546},{'p0':_0x15e546,'p1':_0x2d33de,'p2':_0x40490b,'p3':_0x314611},{'p0':_0x314611,'p1':_0xb852ab,'p2':_0x3bdeb9,'p3':_0x15b5e4}];}else{const _0xfcce92=_0x5bc328*0.6+Math['random']()*_0x5e86e3*0.05,_0x11f1dc=_0x3faeb9*0.7+Math[_0xe3eca1(0x237)]()*_0xa9924a*0.05,_0x326509=_0x160d8c*0.6+Math[_0xe3eca1(0x237)]()*_0x5e86e3*0.05,_0xb7e22c=_0x326509*1.5,_0x40c572=_0x167ecb['x']+_0x176e22*_0x11f1dc*0.5,_0x47d6cf=Math[_0xe3eca1(0x156)](_0x5cd0ee-_0xb7e22c,_0x167ecb['y']+_0xfcce92),_0xfaf7f1=_0x40c572+_0x176e22*_0x11f1dc*0.5,_0x4b0d50=_0x47d6cf+_0x326509,_0x41aa3a=_0xfaf7f1-_0x176e22*_0x11f1dc*0.8,_0x2baf62=Math['min'](_0x5cd0ee,_0x4b0d50+_0xb7e22c*0.7),_0x585491=_0x41aa3a+_0x176e22*_0x11f1dc*0.4,_0xfd9348=_0x2baf62+_0x326509*0.8,_0x452b73=_0x585491,_0x496ae9=_0x5e86e3+_0x540988*0x2,_0x3bab25=Math['max'](_0x28f968,Math['min'](_0xa9924a-_0x28f968-_0x2f533c,_0x40c572)),_0x132341=Math['max'](_0x28f968,Math[_0xe3eca1(0x156)](_0xa9924a-_0x28f968-_0x2f533c,_0xfaf7f1)),_0x11beac=Math[_0xe3eca1(0x26c)](_0x28f968,Math[_0xe3eca1(0x156)](_0xa9924a-_0x28f968-_0x2f533c,_0x41aa3a)),_0x4f815f=Math[_0xe3eca1(0x26c)](_0x28f968,Math[_0xe3eca1(0x156)](_0xa9924a-_0x28f968-_0x2f533c,_0x585491)),_0x39f996={'x':_0x167ecb['x'],'y':_0x167ecb['y']+_0xfcce92*0.5},_0x82e9ab={'x':_0x3bab25-_0x176e22*_0x11f1dc*_0x2518cf,'y':_0x47d6cf+_0x326509*_0x25f1d2*0.3},_0x1a1025={'x':_0x3bab25,'y':_0x47d6cf},_0x56d264={'x':_0x3bab25+_0x176e22*_0x11f1dc*_0x2518cf,'y':_0x47d6cf-_0x326509*_0x25f1d2*0.3},_0x110095={'x':_0x132341+_0x176e22*_0x11f1dc*_0x2518cf,'y':_0x4b0d50+_0x326509*_0x25f1d2*0.5},_0x23388c={'x':_0x132341,'y':_0x4b0d50},_0x5e2453={'x':_0x132341-_0x176e22*_0x11f1dc*_0x2518cf,'y':_0x4b0d50-_0x326509*_0x25f1d2*0.5},_0x3b28f1={'x':_0x11beac-_0x176e22*_0x11f1dc*_0x2518cf,'y':_0x2baf62+_0x326509*_0x25f1d2*0.4},_0x346ffe={'x':_0x11beac,'y':_0x2baf62},_0x33b6d5={'x':_0x11beac+_0x176e22*_0x11f1dc*_0x2518cf,'y':_0x2baf62-_0x326509*_0x25f1d2*0.4},_0x179beb={'x':_0x4f815f+_0x176e22*_0x11f1dc*_0x2518cf,'y':_0xfd9348+_0x326509*_0x25f1d2*0.6},_0x4d806f={'x':_0x4f815f,'y':_0xfd9348},_0x22e883={'x':_0x4f815f-_0x176e22*_0x11f1dc*0.1,'y':_0xfd9348+_0x5e86e3*0.05},_0x1b8e67={'x':_0x452b73,'y':_0x496ae9-_0x5e86e3*0.2},_0x59c255={'x':_0x452b73,'y':_0x496ae9};_0x48956f=[{'p0':_0x167ecb,'p1':_0x39f996,'p2':_0x82e9ab,'p3':_0x1a1025},{'p0':_0x1a1025,'p1':_0x56d264,'p2':_0x110095,'p3':_0x23388c},{'p0':_0x23388c,'p1':_0x5e2453,'p2':_0x3b28f1,'p3':_0x346ffe},{'p0':_0x346ffe,'p1':_0x33b6d5,'p2':_0x179beb,'p3':_0x4d806f},{'p0':_0x4d806f,'p1':_0x22e883,'p2':_0x1b8e67,'p3':_0x59c255}];}}return _0x1886b1[_0xe3eca1(0x20a)](..._0x48956f),_0x1886b1;}catch(_0x25a453){return console[_0xe3eca1(0x1d2)](_0xe3eca1(0x236)+_0xf4a0a2?.['id']+':',_0x25a453),[];}}window[_0x236fd5(0x174)]=generateAttackPathInternal;function resetAllMessagesInternal(){showReadyMessage=![],isShowingIntro=![],showCsHitsMessage=![],showPerfectMessage=![],showCsBonusScoreMessage=![],showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showExtraLifeMessage=![],isShowingCaptureMessage=![],isShowingPlayerGameOverMessage=![],isShowingCoopPlayersReady=![],csHitsMessageStartTime=0x0,perfectMessageStartTime=0x0,csBonusScoreMessageStartTime=0x0,csClearMessageStartTime=0x0,extraLifeMessageStartTime=0x0,readyMessageStartTime=0x0,captureMessageStartTime=0x0,playerGameOverMessageStartTime=0x0,csCompletionDelayStartTime=0x0,introDisplayStartTime=0x0,coopPlayersReadyStartTime=0x0;}window['resetAllMessages']=resetAllMessagesInternal;function stopAllGameSoundsInternal(){const _0x20e487=_0x236fd5;if(typeof soundPaths===_0x20e487(0x1f0)&&soundPaths!==null&&typeof stopSound===_0x20e487(0x243))for(const _0x85a762 in soundPaths){stopSound(_0x85a762);}isGridSoundPlaying=![];}function _0x1b2a(){const _0x1bc46f=['[handleEnemyHit]\x20CRITICAL:\x20Boss\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!','\x20after\x20invalid\x20path\x20index','isPreparingForImmediateCapture','rotationCompleted','speed','capturedShipDimensions',',\x20Path\x20','moving_to_grid','targetPlayerId','red','.\x20Enemy\x20','Error\x20creating\x20CO-OP\x20AI\x20bullet\x20for\x20','CRITICAL:\x20Failed\x20to\x20define\x20CS\x20paths!',')\x20for\x20','targetGridY','back',')!\x20Returning.','\x20attacking,\x20index\x20','CS_HorizontalFlyByR','\x20path\x20index\x20','returnLogDone','NORMAL\x20GAME','Full\x20Grid:\x20Error\x20placing\x20enemy\x20(Sq\x20','complete','shoot','.\x20Skipping.','574048DHyFBw','csClearSound','hiScoreSound','entrance_flight_1','entranceSound','\x20attacking,\x20invalid\x20NEXT\x20segment\x20','sign','!\x20Returning.','sin','NaN\x20detected\x20in\x20CS\x20path\x20calculation\x20for\x20enemy\x20','enemy-entr-','lastFiredTime','START\x20GAME','right','pause','explosionSound','round','CS:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','6469840dGtCcr','enemy-grid-','error','Entrance\x20Wave:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','clear','stopAllGameSounds','beeHitSound','pathT','thresholdsMet','atan2','[scheduleSingleEntranceSquadron]\x20Called\x20inappropriately\x20for\x20non-entrance\x20wave\x20type\x20(Level\x20','.\x20Transitioning.','grey','duration','captureSound','boss_loop_right','keys','sqrt','tintProgress','includes','entrance_flight_2','has','drawImage','\x20returning\x20without\x20target\x20coords.\x20Recalculating.','Error\x20starting\x20attack\x20for\x20','),\x20index\x20','normal','filter','Attempted\x20to\x20start\x20Full\x20Grid\x20wave\x20without\x20valid\x20definition\x20or\x20when\x20not\x20in\x20Full\x20Grid\x20mode.','destroyed','CS:\x20Path\x20','findIndex','object','csPerfectSound','naturalHeight','undefined','2UP','\x20in\x20returning','clearRect','fillStyle','diveStartTime','\x20missing\x20SHARED\x20path\x20','4386YnspBi','attackGroupId','particles','GAME\x20EXIT','3136UtKrXt','87118xjONUX','now','attackPathSegmentIndex','30px\x20Arial','shipObj','Error\x20creating\x20player\x20bullet(s):','show_results','1\x20PLAYER','Entrance\x20Wave:\x20Squadron\x20','2\x20PLAYER','string','push','challenging_stage','velocityY','Error\x20checking/awarding\x20extra\x20life:','Error\x20getting\x20target\x20grid\x20pos\x20for\x20','Error\x20in\x20aiControl:','\x20attacking,\x20invalid\x20segment\x20','\x20in\x20moving_to_grid\x20state\x20without\x20target.\x20Recalculating.','substring','save','targetGridX',',\x20isFullGrid:\x20','captureStartTime','[scheduleEntranceFlightWave]\x20Called\x20inappropriately\x20or\x20with\x20no\x20definition.\x20Level\x20','width','indexOf','dual','enemies','\x20(state:\x20','coop','CS_LoopAttack_TR','\x22\x20not\x20found!\x20Aborting\x20CS.','landed','Error\x20updating\x20explosions:','rotationDirection','stringify','\x20out\x20of\x20bounds\x20for\x20SHARED\x20path\x20','switch_player','FATAL\x20Error\x20in\x20moveEntities\x20(Restored\x20Conditions):','dualShipSound','single','1316uRsOci','in_grid','enemy-cs-','length','\x20after\x20attack:','playerId','squadronEnemyIndex','NaN\x20detected\x20in\x20Normal\x20path\x20calculation\x20for\x20enemy\x20','canFireThisDive','white','pathId','fillRect','lostLifeSound','[DEBUG]\x20Error\x20generating\x20attack\x20path\x20for\x20enemy\x20','random','.\x20Switching\x20to\x20moving_to_grid.','Error\x20calculating\x20final\x20bezier\x20point\x20for\x20','\x20after\x20NaN','gridCol','middle','levelUpSound','startSound','velocityX','pathSegmentIndex','!!!\x20CRITICAL\x20ERROR\x20IN\x20runSingleGameUpdate\x20!!!','diving_to_capture_position','function','capturedShipLastFiredTime','rotation','size','\x20invalid!\x20Skipping\x20squadron.','bossGalagaDiveSound','naturalWidth','\x20for\x20SHARED\x20path\x20','3XMIxuj','hasFired','getGamepads','attackType','scheduledStartTime','1P_VS_AI_NORMAL','Entrance\x20Wave:\x20Assigned\x20entrance\x20path\x20\x22','20px\x20\x27Press\x20Start\x202P\x27','CS3_DiveLoopL_Sharp','Error\x20in\x20triggerImmediateCaptureDive:',',\x20isCS:\x20','Full\x20Grid:\x20Squadron\x20','sort','tripleAttackSound','1290276ecxCwC','Error\x20calculating\x20FINAL\x20bezier\x20point\x20for\x20attack\x20','Full\x20Grid:\x20Error\x20getting\x20target\x20grid\x20pos\x20for\x20enemy\x20','entrancePathId','height','1UP','attackPathSegments','returning','resetGame','totalRotation','left','toString','gridRow','buttons','resetWave','health','isDamaged','creationTime','Error\x20getting\x20grid\x20pos\x20after\x20bezier\x20error\x20for\x20','max','Error\x20during\x20post-landing\x20fire\x20for\x20','getWaveType','EASY','generateWaveDefinition','abs','CS3_DiveLoopR_Sharp','full_grid','714340mksrRt','stack','2195PfsDNj','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20','following_entrance_path','squadronId','Error\x20updating\x20target\x20grid\x20pos\x20for\x20enemy\x20','gameOverSound','\x22\x20for\x20enemy\x20in\x20squadron\x20','preparing_capture','every','playerNum','player1','captureAnimationRotation','\x20(invalid\x20attack\x20index):','hasOwnProperty','initialCaptureAnimationY','Invalid\x20next\x20Normal\x20Bezier\x20segment\x20','\x20has\x20invalid\x20enemy\x20data.','number','Error\x20in\x20renderGame:','\x20at\x20end\x20of\x20normal\x20path\x20','capturedShipY','1P_VS_AI_COOP','attackPathT','CS:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','capturing','shipCapturedSound','LOGO','type','newButtonStates','pressed','attacking','extraLifeSound','green','currentLives','min','find','\x20off\x20screen:','capturedShipX','capturePrepareTimeout','CS_LoopAttack_TL','following_bezier_path','floor','butterflyDiveSound',')\x20during\x20shift:','NORMAL','num','\x20for\x20path\x20','FATAL\x20Error\x20in\x20moveEntities:','some','rapid','map','ai_p2','Error\x20during\x20FIXED\x20enemy\x20burst\x20firing\x20(bullet\x20','slice','CS_LoopAttack_BR','bossHit2Sound','Error\x20getting\x20grid\x20pos\x20after\x20FINAL\x20bezier\x20error\x20for\x20','targetX','hasCapturedShip','total','justReturned','\x20diving\x20to\x20capture\x20without\x20targetX/Y!\x20Aborting.','splice','\x20(invalid\x20attack\x20segment):','generateAttackPath','landedTime','isArray','attackFormationOffsetX','currentScore','\x20in\x20moving_to_grid','warn','enemyShootSound','player2','\x20out\x20of\x20bounds\x20(','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','state','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20','cos','Error\x20handling\x20player\x20input:','Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.','Enemy\x20','CS_HorizontalFlyByL','Error\x20getting\x20target\x20grid\x20pos\x20for\x20new\x20enemy\x20','forEach','Error\x20calculating\x20Normal\x20Bezier\x20point\x20for\x20enemy\x20','lifetime',').\x20Skipping.','unknown','Error\x20getting\x20grid\x20pos\x20within\x20\x27in_grid\x27\x20for\x20','Error\x20calculating\x20CS\x20Bezier\x20point\x20for\x20enemy\x20',',\x20Idx\x20','targetY','parse','[Capture\x20Message\x20End]\x20Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','Error\x20getting\x20grid\x20pos\x20for\x20','\x20(Path\x20','center','preparing_attack','main','\x20not\x20found.','alpha','Error\x20getting\x20grid\x20pos\x20after\x20invalid\x20NEXT\x20attack\x20segment\x20for\x20','Invalid\x20next\x20CS\x20Bezier\x20segment\x20','showing_capture_message','completed','playerShootSound','A\x20critical\x20error\x20occurred\x20in\x20the\x20game\x20loop.\x20Please\x20refresh.','Entrance\x20Wave:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','hasFiredPostLanding','gridBackgroundSound','attack-','restore'];_0x1b2a=function(){return _0x1bc46f;};return _0x1b2a();}window[_0x236fd5(0x1d5)]=stopAllGameSoundsInternal;function resetGameInternal(){const _0x33d444=_0x236fd5;score=0x0,level=0x1,playerLives=0x3;if(isTwoPlayerMode){player1Lives=0x3,player2Lives=0x3,player1Score=0x0,player2Score=0x0,currentPlayer=0x1,player1CompletedLevel=-0x1,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet[_0x33d444(0x1d4)]();else player1LifeThresholdsMet=new Set();if(player2LifeThresholdsMet instanceof Set)player2LifeThresholdsMet[_0x33d444(0x1d4)]();else player2LifeThresholdsMet=new Set();player1IsDualShipActive=![],player2IsDualShipActive=![],isPlayer1ShipCaptured=![],isPlayer2ShipCaptured=![],isPlayer1WaitingForRespawn=![],isPlayer2WaitingForRespawn=![],isPlayer1Invincible=![],isPlayer2Invincible=![],player1RespawnTime=0x0,player2RespawnTime=0x0,player1InvincibilityEndTime=0x0,player2InvincibilityEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![];if(selectedGameMode===_0x33d444(0x21d)){playerLives=0x0;if(gameCanvas&&gameCanvas[_0x33d444(0x218)]>0x0&&gameCanvas[_0x33d444(0x25d)]>0x0){const _0x2e4d92=gameCanvas[_0x33d444(0x218)]/0x2-gameCanvas[_0x33d444(0x218)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x3624b0=gameCanvas[_0x33d444(0x218)]/0x2+gameCanvas[_0x33d444(0x218)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x380104=gameCanvas[_0x33d444(0x25d)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;ship1={'x':_0x2e4d92,'y':_0x380104,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x2e4d92,'id':'p1'},ship2={'x':_0x3624b0,'y':_0x380104,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x3624b0,'id':'p2'},(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&(smoothedShip1X=_0x2e4d92,smoothedShip2X=_0x3624b0,aiShip1TargetEnemy=null,aiShip2TargetEnemy=null,aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0,aiShip1LastShotTime=0x0,aiShip2LastShotTime=0x0,aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0);}ship=null;}else{if(!ship&&gameCanvas&&gameCanvas[_0x33d444(0x218)]>0x0&&gameCanvas[_0x33d444(0x25d)]>0x0)ship={'x':Math['round'](gameCanvas[_0x33d444(0x218)]/0x2-SHIP_WIDTH/0x2),'y':gameCanvas[_0x33d444(0x25d)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':_0x33d444(0x196)},ship[_0x33d444(0x16d)]=ship['x'];else ship&&gameCanvas&&gameCanvas['width']>0x0&&gameCanvas[_0x33d444(0x25d)]>0x0&&(ship['x']=Math['round'](gameCanvas['width']/0x2-SHIP_WIDTH/0x2),ship[_0x33d444(0x16d)]=ship['x'],ship['y']=gameCanvas[_0x33d444(0x25d)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}}else{player1Lives=0x3,player1Score=0x0,player1MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet[_0x33d444(0x1d4)]();else player1LifeThresholdsMet=new Set();if(!ship&&gameCanvas&&gameCanvas['width']>0x0&&gameCanvas['height']>0x0)ship={'x':Math[_0x33d444(0x1ce)](gameCanvas[_0x33d444(0x218)]/0x2-SHIP_WIDTH/0x2),'y':gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':'main'},ship[_0x33d444(0x16d)]=ship['x'];else ship&&gameCanvas&&gameCanvas['width']>0x0&&gameCanvas[_0x33d444(0x25d)]>0x0&&(ship['x']=Math['round'](gameCanvas[_0x33d444(0x218)]/0x2-SHIP_WIDTH/0x2),ship[_0x33d444(0x16d)]=ship['x'],ship['y']=gameCanvas[_0x33d444(0x25d)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,isDualShipActive=![];if(!isTwoPlayerMode)player1IsDualShipActive=![];fallingShips=[],visualOffsetX=-0x14,gameOverSequenceStartTime=0x0,isShowingResultsScreen=![],gameStartTime=Date[_0x33d444(0x200)](),gameJustStarted=!![],gameJustStartedAndWaveLaunched=![],currentGridOffsetX=0x0,gridMoveDirection=0x1,gridJustCompleted=![],isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,lastGridFireCheckTime=0x0,player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,scoreEarnedThisCS=0x0,challengingStageEnemiesHit=0x0,aiNeedsStabilization=!![],aiStabilizationEndTime=0x0,smoothedShipX=undefined,aiCanShootTime=0x0,aiLastShotTime=0x0,!(selectedGameMode==='coop'&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x33d444(0x149)))&&(aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0),playerLastShotTime=0x0,player1LastShotTime=0x0,player2LastShotTime=0x0,p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],isShowingCoopPlayersReady=![],coopPlayersReadyStartTime=0x0,resetWaveInternal();}window[_0x236fd5(0x261)]=resetGameInternal;function resetWaveInternal(){const _0x2ffda1=_0x236fd5;isWaveTransitioning=![],readyForNextWave=![],readyForNextWaveReset=![],isEntrancePhaseActive=!![],firstEnemyLanded=![],captureAttemptMadeThisLevel=![],gameJustStartedAndWaveLaunched=![],aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![],enemies=[],bullets=[],enemyBullets=[],explosions=[],floatingScores=[],hitSparks=[];Array[_0x2ffda1(0x176)](enemySpawnTimeouts)&&enemySpawnTimeouts[_0x2ffda1(0x187)](clearTimeout);enemySpawnTimeouts=[],squadronCompletionStatus={},squadronEntranceFiringStatus={},totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;const _0x135e31=getWaveTypeInternal(level);isChallengingStage=_0x135e31===_0x2ffda1(0x20b),isFullGridWave=_0x135e31===_0x2ffda1(0x273),challengingStageEnemiesHit=0x0,scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null;(isFullGridWave||isChallengingStage)&&(isEntrancePhaseActive=![]);const _0x580d49=isShowingDemoText;resetAllMessagesInternal();_0x580d49&&(isShowingDemoText=!![]);if(selectedGameMode===_0x2ffda1(0x21d)&&level===0x1)isShowingIntro=![],introStep=0x2;else{if(isTwoPlayerMode&&selectedGameMode===_0x2ffda1(0x1ea)||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2ffda1(0x250)){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(isChallengingStage){introStep=0x3,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(level===0x1&&!isTwoPlayerMode){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{introStep=0x2,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}}}}isShowingIntro&&!(selectedGameMode===_0x2ffda1(0x21d)&&level===0x1)&&(introDisplayStartTime=Date[_0x2ffda1(0x200)]());playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],currentWaveDefinition=generateWaveDefinitionInternal(level);if(selectedGameMode===_0x2ffda1(0x21d)){if(gameCanvas&&gameCanvas[_0x2ffda1(0x218)]>0x0&&gameCanvas[_0x2ffda1(0x25d)]>0x0){const _0x1650a1=ship1&&player1Lives>0x0,_0x288221=ship2&&player2Lives>0x0,_0x4da10c=gameCanvas[_0x2ffda1(0x25d)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(_0x1650a1&&_0x288221){const _0x53da74=gameCanvas[_0x2ffda1(0x218)]/0x2-gameCanvas[_0x2ffda1(0x218)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1&&(ship1[_0x2ffda1(0x16d)]=_0x53da74,ship1['x']=_0x53da74,smoothedShip1X=_0x53da74,ship1['y']=_0x4da10c);const _0x2efdbc=gameCanvas['width']/0x2+gameCanvas[_0x2ffda1(0x218)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2['targetX']=_0x2efdbc,ship2['x']=_0x2efdbc,smoothedShip2X=_0x2efdbc,ship2['y']=_0x4da10c);}else{if(_0x1650a1&&ship1){const _0x1875a4=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x5843a0=Math['round'](gameCanvas[_0x2ffda1(0x218)]/0x2-_0x1875a4/0x2);ship1['targetX']=_0x5843a0,ship1['x']=_0x5843a0,smoothedShip1X=_0x5843a0,ship1['y']=_0x4da10c;}else{if(_0x288221&&ship2){const _0x35fc91=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x9cd3c6=Math[_0x2ffda1(0x1ce)](gameCanvas[_0x2ffda1(0x218)]/0x2-_0x35fc91/0x2);ship2[_0x2ffda1(0x16d)]=_0x9cd3c6,ship2['x']=_0x9cd3c6,smoothedShip2X=_0x9cd3c6,ship2['y']=_0x4da10c;}}}}else{if(_0x1650a1&&ship1)ship1['y']=_0x4da10c;if(_0x288221&&ship2)ship2['y']=_0x4da10c;}}}else{if(ship&&gameCanvas&&gameCanvas['width']>0x0&&gameCanvas[_0x2ffda1(0x25d)]>0x0&&(forceCenterShipNextReset||!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x2ffda1(0x1ea)&&currentPlayer===0x2)){let _0x3b3b3d=ship[_0x2ffda1(0x218)];if(isDualShipActive)_0x3b3b3d=DUAL_SHIP_OFFSET_X+SHIP_WIDTH;ship['x']=Math[_0x2ffda1(0x1ce)](gameCanvas[_0x2ffda1(0x218)]/0x2-_0x3b3b3d/0x2),ship['targetX']=ship['x'],ship['y']=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)smoothedShipX=ship['x'];}else ship&&gameCanvas&&gameCanvas['width']>0x0&&(ship['y']=gameCanvas[_0x2ffda1(0x25d)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);}forceCenterShipNextReset=![];if(!isManualControl&&aiNeedsStabilization&&selectedGameMode!==_0x2ffda1(0x21d)&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)){aiStabilizationEndTime=Date['now']()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}else{if(isPlayerTwoAI&&selectedGameMode===_0x2ffda1(0x1ea)&&currentPlayer===0x2&&aiNeedsStabilization){aiStabilizationEndTime=Date['now']()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}}}window[_0x236fd5(0x267)]=resetWaveInternal;function getWaveTypeInternal(_0x4db5ca){const _0x6f7612=_0x236fd5,_0x1f7d7e=(_0x4db5ca-0x1)%0x4;switch(_0x1f7d7e){case 0x0:return'full_grid';case 0x1:return'entrance_flight_1';case 0x2:return _0x6f7612(0x20b);case 0x3:return _0x6f7612(0x1e4);default:return _0x6f7612(0x18b);}}window[_0x236fd5(0x26e)]=getWaveTypeInternal;function generateWaveDefinitionInternal(_0x9aae9e){const _0x339aac=_0x236fd5;let _0x4d12b0=[];currentWavePatternIndex=-0x1;const _0x5ed930=getWaveTypeInternal(_0x9aae9e);if(typeof waveEntrancePatterns===_0x339aac(0x1f3)||!Array[_0x339aac(0x176)](waveEntrancePatterns)||waveEntrancePatterns[_0x339aac(0x22c)]<0x2)return[];if(_0x5ed930===_0x339aac(0x20b))_0x4d12b0=[];else{if(_0x5ed930==='full_grid'){currentWavePatternIndex=0x0;const _0x4f6ead=waveEntrancePatterns[0x0];if(!_0x4f6ead||_0x4f6ead[_0x339aac(0x22c)]===0x0)_0x4d12b0=[];else try{_0x4d12b0=JSON[_0x339aac(0x190)](JSON[_0x339aac(0x223)](_0x4f6ead),(_0x5653e9,_0x73d9ab)=>{const _0x5b448a=_0x339aac;return _0x73d9ab&&typeof _0x73d9ab==='object'&&_0x73d9ab['type']===ENEMY3_TYPE&&typeof _0x73d9ab[_0x5b448a(0x16e)]===_0x5b448a(0x1f3)&&(_0x73d9ab['hasCapturedShip']=![]),_0x73d9ab;});}catch(_0x39ffa){_0x4d12b0=[];}}else{if(_0x5ed930===_0x339aac(0x1c1)){currentWavePatternIndex=0x0;const _0x41d3d7=waveEntrancePatterns[0x0];if(!_0x41d3d7||_0x41d3d7['length']===0x0)_0x4d12b0=[];else try{_0x4d12b0=JSON[_0x339aac(0x190)](JSON['stringify'](_0x41d3d7),(_0x1bcf62,_0x687de1)=>{const _0x2b1ddf=_0x339aac;return _0x687de1&&typeof _0x687de1===_0x2b1ddf(0x1f0)&&_0x687de1[_0x2b1ddf(0x14f)]===ENEMY3_TYPE&&typeof _0x687de1[_0x2b1ddf(0x16e)]===_0x2b1ddf(0x1f3)&&(_0x687de1[_0x2b1ddf(0x16e)]=![]),_0x687de1;});}catch(_0x4a407c){_0x4d12b0=[];}}else{if(_0x5ed930===_0x339aac(0x1e4)){currentWavePatternIndex=0x1;const _0x53e535=waveEntrancePatterns[0x1];if(!_0x53e535||_0x53e535['length']===0x0)_0x4d12b0=[];else try{_0x4d12b0=JSON['parse'](JSON[_0x339aac(0x223)](_0x53e535),(_0x44099c,_0x318140)=>{const _0x295750=_0x339aac;return _0x318140&&typeof _0x318140===_0x295750(0x1f0)&&_0x318140['type']===ENEMY3_TYPE&&typeof _0x318140[_0x295750(0x16e)]===_0x295750(0x1f3)&&(_0x318140[_0x295750(0x16e)]=![]),_0x318140;});}catch(_0x30e05e){_0x4d12b0=[];}}else _0x4d12b0=[];}}}if(_0x5ed930!==_0x339aac(0x20b)){if(typeof normalWaveEntrancePaths===_0x339aac(0x1f3)||Object[_0x339aac(0x1e0)](normalWaveEntrancePaths)[_0x339aac(0x22c)]===0x0)return _0x4d12b0;for(let _0x4ee497=_0x4d12b0['length']-0x1;_0x4ee497>=0x0;_0x4ee497--){const _0x106e15=_0x4d12b0[_0x4ee497];if(!normalWaveEntrancePaths?.[_0x106e15[_0x339aac(0x233)]]){_0x4d12b0[_0x339aac(0x172)](_0x4ee497,0x1);continue;}if(_0x106e15['enemies']&&Array['isArray'](_0x106e15[_0x339aac(0x21b)])){for(let _0x39c2d1=_0x106e15[_0x339aac(0x21b)][_0x339aac(0x22c)]-0x1;_0x39c2d1>=0x0;_0x39c2d1--){const _0x496a55=_0x106e15[_0x339aac(0x21b)][_0x39c2d1];(!_0x496a55||!normalWaveEntrancePaths?.[_0x496a55['entrancePathId']])&&_0x106e15[_0x339aac(0x21b)][_0x339aac(0x172)](_0x39c2d1,0x1),_0x496a55&&_0x496a55[_0x339aac(0x14f)]===ENEMY3_TYPE&&typeof _0x496a55[_0x339aac(0x16e)]===_0x339aac(0x1f3)&&(_0x496a55[_0x339aac(0x16e)]=![]);}_0x106e15[_0x339aac(0x21b)][_0x339aac(0x22c)]===0x0&&_0x4d12b0['splice'](_0x4ee497,0x1);}else _0x4d12b0[_0x339aac(0x172)](_0x4ee497,0x1);}}return _0x4d12b0;}window[_0x236fd5(0x270)]=generateWaveDefinitionInternal;const createBulletSimple=(_0x9653e4,_0x3be4d0=null)=>{const _0x1162e8=_0x236fd5;let _0x296aa7=null,_0x424e31=![];if(isTwoPlayerMode&&selectedGameMode==='coop'){const _0x196d33=ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured,_0x1d035d=ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured;if(_0x196d33&&_0x1d035d)_0x296aa7=Math[_0x1162e8(0x237)]()<0.5?ship1:ship2,_0x424e31=!![];else{if(_0x196d33)_0x296aa7=ship1,_0x424e31=!![];else _0x1d035d&&(_0x296aa7=ship2,_0x424e31=!![]);}}else ship&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn&&(_0x296aa7=ship,_0x424e31=!![]);if(!_0x9653e4||!isInGameState||!_0x424e31||!_0x296aa7)return![];const _0x29355=scaleValue(level,BASE_ENEMY_BULLET_SPEED,MAX_ENEMY_BULLET_SPEED),_0x1c5c97=_0x3be4d0?_0x3be4d0['x']:_0x9653e4['x']+_0x9653e4['width']/0x2,_0x1e2c4d=_0x3be4d0?_0x3be4d0['y']:_0x9653e4['y']+_0x9653e4[_0x1162e8(0x25d)]/0x2;let _0x2faed5=0x0,_0x5017b1=_0x29355;const _0x3af62b=_0x296aa7['x']+_0x296aa7[_0x1162e8(0x218)]/0x2-_0x1c5c97,_0x1625b7=_0x296aa7['y']+_0x296aa7[_0x1162e8(0x25d)]/0x2-_0x1e2c4d,_0x527ccc=Math['sqrt'](_0x3af62b*_0x3af62b+_0x1625b7*_0x1625b7);if(_0x527ccc>0x0){let _0xa2a8d4=0x0;!isChallengingStage&&(_0xa2a8d4=scaleValue(level,BASE_ENEMY_AIM_FACTOR,MAX_ENEMY_AIM_FACTOR));let _0x22fba7=Math[_0x1162e8(0x1d9)](_0x1625b7,_0x3af62b);_0x2faed5=Math['cos'](_0x22fba7)*_0x29355*_0xa2a8d4,_0x5017b1=Math[_0x1162e8(0x1e1)](_0x29355**0x2-_0x2faed5**0x2),_0x5017b1=Math[_0x1162e8(0x26c)](_0x29355*(0x1-_0xa2a8d4)*0.5,_0x5017b1);if(_0x1625b7<0x0&&_0x5017b1>0x0){}if(_0x1625b7<0x0)_0x5017b1=Math[_0x1162e8(0x271)](_0x5017b1);return enemyBullets[_0x1162e8(0x20a)]({'x':_0x1c5c97-ENEMY_BULLET_WIDTH/0x2,'y':_0x1e2c4d,'width':ENEMY_BULLET_WIDTH,'height':ENEMY_BULLET_HEIGHT,'vx':_0x2faed5,'vy':_0x5017b1,'type':_0x9653e4[_0x1162e8(0x14f)]}),!![];}return![];};function _0xf0bc(_0x2bd4ef,_0x4ada3c){const _0x1b2a56=_0x1b2a();return _0xf0bc=function(_0xf0bcb0,_0x20e65b){_0xf0bcb0=_0xf0bcb0-0x145;let _0x31150a=_0x1b2a56[_0xf0bcb0];return _0x31150a;},_0xf0bc(_0x2bd4ef,_0x4ada3c);}function scheduleSingleEntranceSquadron(_0x2339cf,_0x53112f,_0xde32c9){const _0x50a5c9=_0x236fd5;if(isFullGridWave||isChallengingStage)return console[_0x50a5c9(0x17a)](_0x50a5c9(0x1da)+level+_0x50a5c9(0x215)+isFullGridWave+_0x50a5c9(0x255)+isChallengingStage+_0x50a5c9(0x18a)),_0x2339cf?.[_0x50a5c9(0x21b)]?.[_0x50a5c9(0x22c)]>0x0&&(enemiesSpawnedThisWave+=_0x2339cf[_0x50a5c9(0x21b)]['length'],squadronCompletionStatus[_0x53112f]&&(squadronCompletionStatus[_0x53112f][_0x50a5c9(0x19c)]=squadronCompletionStatus[_0x53112f][_0x50a5c9(0x16f)])),![];const _0x266b08=normalWaveEntrancePaths,_0x5af5d6=_0x2339cf[_0x50a5c9(0x233)],_0x1dcf55=_0x266b08[_0x5af5d6];if(!_0x1dcf55||_0x1dcf55[_0x50a5c9(0x22c)]===0x0)return console[_0x50a5c9(0x1d2)]('Entrance\x20Wave:\x20Path\x20'+_0x5af5d6+'\x20for\x20squadron\x20'+_0x53112f+_0x50a5c9(0x247)),_0x2339cf?.[_0x50a5c9(0x21b)]?.[_0x50a5c9(0x22c)]>0x0&&(enemiesSpawnedThisWave+=_0x2339cf[_0x50a5c9(0x21b)][_0x50a5c9(0x22c)],squadronCompletionStatus[_0x53112f]&&(squadronCompletionStatus[_0x53112f]['completed']=squadronCompletionStatus[_0x53112f][_0x50a5c9(0x16f)])),![];const _0x208617=setTimeout(()=>{const _0x371930=_0x50a5c9,_0x13b6bd=enemySpawnTimeouts[_0x371930(0x219)](_0x208617);if(_0x13b6bd>-0x1)enemySpawnTimeouts['splice'](_0x13b6bd,0x1);let _0x1c9bf2=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x1c9bf2=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x1c9bf2=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0x1c9bf2||isFullGridWave){_0x2339cf?.[_0x371930(0x21b)]?.['length']>0x0&&(enemiesSpawnedThisWave+=_0x2339cf[_0x371930(0x21b)][_0x371930(0x22c)],squadronCompletionStatus[_0x53112f]&&(squadronCompletionStatus[_0x53112f]['completed']=squadronCompletionStatus[_0x53112f][_0x371930(0x16f)]));return;}try{squadronEntranceFiringStatus[_0x53112f]?(squadronEntranceFiringStatus[_0x53112f][_0x371930(0x24f)]=Date['now']()+_0xde32c9,squadronEntranceFiringStatus[_0x53112f][_0x371930(0x24c)]=![]):(console[_0x371930(0x17a)]('[scheduleSingleEntranceSquadron]\x20Firing\x20status\x20for\x20squadron\x20'+_0x53112f+_0x371930(0x197)),squadronEntranceFiringStatus[_0x53112f]={'hasFired':![],'scheduledStartTime':Date[_0x371930(0x200)]()+_0xde32c9});const _0x5d06a8=ENEMY_SPAWN_DELAY_IN_SQUADRON,_0x4115e3=_0x5d06a8*0x2,_0xaec00c=0x1;_0x2339cf[_0x371930(0x21b)]['forEach']((_0x45dd8b,_0x5da6d1)=>{const _0x5e2849=_0x371930;if(!_0x45dd8b||!_0x45dd8b['type']||typeof _0x45dd8b[_0x5e2849(0x265)]===_0x5e2849(0x1f3)||typeof _0x45dd8b[_0x5e2849(0x23b)]===_0x5e2849(0x1f3)||!_0x45dd8b[_0x5e2849(0x25c)]){console['error'](_0x5e2849(0x1d3)+_0x53112f+_0x5e2849(0x193)+_0x5af5d6+_0x5e2849(0x1e9)+_0x5da6d1+_0x5e2849(0x1bd)),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x53112f]&&squadronCompletionStatus[_0x53112f][_0x5e2849(0x19c)]++;return;}const _0x2751e5=_0x266b08[_0x45dd8b[_0x5e2849(0x25c)]];(!_0x2751e5||_0x2751e5[_0x5e2849(0x22c)]===0x0)&&console[_0x5e2849(0x17a)](_0x5e2849(0x251)+_0x45dd8b[_0x5e2849(0x25c)]+_0x5e2849(0x27c)+_0x53112f+',\x20index\x20'+_0x5da6d1+'\x20not\x20found.\x20Enemy\x20will\x20follow\x20squadron\x20path\x20\x22'+_0x5af5d6+'\x22.');let _0x27b707=0x0;const _0x35463c=getWaveType(level),_0x2c29c9=_0x35463c==='entrance_flight_2'&&(_0x53112f===0x2||_0x53112f===0x3);if(_0x2c29c9){const _0x22a03b=Math[_0x5e2849(0x15d)](_0x5da6d1/0x2);_0x5da6d1%0x2===0x0?_0x27b707=_0x22a03b*_0x4115e3:_0x27b707=_0x22a03b*_0x4115e3+_0xaec00c;}else _0x27b707=_0x5da6d1*ENEMY_SPAWN_DELAY_IN_SQUADRON;const _0x36cfa4=setTimeout(()=>{const _0x3f0f37=_0x5e2849,_0x4b7e43=enemySpawnTimeouts[_0x3f0f37(0x219)](_0x36cfa4);if(_0x4b7e43>-0x1)enemySpawnTimeouts[_0x3f0f37(0x172)](_0x4b7e43,0x1);let _0xa56599=![];isTwoPlayerMode&&selectedGameMode===_0x3f0f37(0x21d)?_0xa56599=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0xa56599=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0xa56599||isFullGridWave){enemiesSpawnedThisWave++;squadronCompletionStatus[_0x53112f]&&squadronCompletionStatus[_0x53112f][_0x3f0f37(0x19c)]++;return;}try{let _0x2cb931=_0x45dd8b['type'],_0x4bf876=_0x2cb931===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x3d67b2,_0x1cbb17;if(_0x2cb931===ENEMY1_TYPE)_0x3d67b2=ENEMY1_WIDTH,_0x1cbb17=ENEMY1_HEIGHT;else _0x2cb931===ENEMY3_TYPE?(_0x3d67b2=BOSS_WIDTH,_0x1cbb17=BOSS_HEIGHT):(_0x3d67b2=ENEMY_WIDTH,_0x1cbb17=ENEMY_HEIGHT);let _0x37a0dd=0x0,_0xcbdfc7=0x0;if(_0x1dcf55&&_0x1dcf55[0x0]?.['p0'])_0x37a0dd=_0x1dcf55[0x0]['p0']['x'],_0xcbdfc7=_0x1dcf55[0x0]['p0']['y'];else throw new Error('Invalid\x20start\x20segment\x20for\x20squadron\x20path\x20'+_0x5af5d6);let _0x9f3f32,_0x310f9e;try{const {x:_0x2ffe9a,y:_0x3cb034}=getCurrentGridSlotPosition(_0x45dd8b[_0x3f0f37(0x265)],_0x45dd8b[_0x3f0f37(0x23b)],_0x3d67b2);_0x9f3f32=_0x2ffe9a,_0x310f9e=_0x3cb034;}catch(_0x243191){console[_0x3f0f37(0x1d2)](_0x3f0f37(0x186)+_0x45dd8b['type']+'\x20at\x20['+_0x45dd8b[_0x3f0f37(0x265)]+','+_0x45dd8b[_0x3f0f37(0x23b)]+']',_0x243191),_0x9f3f32=gameCanvas?.[_0x3f0f37(0x218)]/0x2||0xc8,_0x310f9e=ENEMY_TOP_MARGIN+_0x45dd8b[_0x3f0f37(0x265)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}let _0xc6ecc2=0x0;const _0x1e17ae=_0x2c29c9,_0xf8ddf6=_0x1e17ae&&_0x5da6d1%0x2!==0x0;_0xf8ddf6?_0xc6ecc2=-ENTRANCE_PAIR_PATH_T_OFFSET:_0xc6ecc2=-_0x5da6d1*PATH_T_OFFSET_PER_ENEMY;const _0x469b1f={'x':_0x37a0dd,'y':_0xcbdfc7,'width':_0x3d67b2,'height':_0x1cbb17,'targetGridX':_0x9f3f32,'targetGridY':_0x310f9e,'speed':0x0,'state':_0x3f0f37(0x278),'gridRow':_0x45dd8b[_0x3f0f37(0x265)],'gridCol':_0x45dd8b[_0x3f0f37(0x23b)],'type':_0x2cb931,'health':_0x4bf876,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x5af5d6,'pathSegmentIndex':0x0,'pathT':_0xc6ecc2,'squadronId':_0x53112f,'squadronEnemyIndex':_0x5da6d1,'id':_0x3f0f37(0x1c8)+_0x53112f+'-'+_0x5da6d1+'-'+Date['now']()+'-'+Math[_0x3f0f37(0x237)]()[_0x3f0f37(0x264)](0x24)[_0x3f0f37(0x212)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x3f0f37(0x1ea),'hasCapturedShip':_0x2cb931===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x2cb931===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies[_0x3f0f37(0x20a)](_0x469b1f),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x53112f]&&squadronCompletionStatus[_0x53112f][_0x3f0f37(0x19c)]++;if(_0x5da6d1===0x0){let _0x47b0e1=0x5dc;(_0x53112f===0x0||_0x53112f===0x1)&&(_0x47b0e1=0xfa);const _0x2781e6=_0x469b1f['id'],_0x5cb567=setTimeout(()=>{const _0x245a17=_0x3f0f37,_0x4c9c84=enemySpawnTimeouts[_0x245a17(0x219)](_0x5cb567);if(_0x4c9c84>-0x1)enemySpawnTimeouts[_0x245a17(0x172)](_0x4c9c84,0x1);let _0x17eaf3=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x17eaf3=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x17eaf3=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x17eaf3||isChallengingStage||isWaveTransitioning||isFullGridWave)return;fireFixedEnemyBurst(_0x2781e6,null,0x0,0x3);},_0x47b0e1);enemySpawnTimeouts[_0x3f0f37(0x20a)](_0x5cb567);}}catch(_0x4a7280){console[_0x3f0f37(0x1d2)](_0x3f0f37(0x19f)+_0x53112f+_0x3f0f37(0x18e)+_0x5da6d1+_0x3f0f37(0x1aa)+_0x5af5d6+'):',_0x4a7280),enemiesSpawnedThisWave++,squadronCompletionStatus[_0x53112f]&&squadronCompletionStatus[_0x53112f][_0x3f0f37(0x19c)]++;}},_0x27b707);enemySpawnTimeouts[_0x5e2849(0x20a)](_0x36cfa4);});}catch(_0x7cfc30){console[_0x371930(0x1d2)]('Entrance\x20Wave:\x20Error\x20processing\x20enemies\x20for\x20squadron\x20'+_0x53112f+_0x371930(0x193)+_0x5af5d6+'):',_0x7cfc30),_0x2339cf?.[_0x371930(0x21b)]?.[_0x371930(0x22c)]>0x0&&(enemiesSpawnedThisWave+=_0x2339cf[_0x371930(0x21b)][_0x371930(0x22c)],squadronCompletionStatus[_0x53112f]&&(squadronCompletionStatus[_0x53112f][_0x371930(0x19c)]=squadronCompletionStatus[_0x53112f]['total']));}},_0xde32c9);return enemySpawnTimeouts['push'](_0x208617),!![];};function scheduleEntranceFlightWave(){const _0xc41c4=_0x236fd5;if(isFullGridWave||isChallengingStage||!currentWaveDefinition||currentWaveDefinition[_0xc41c4(0x22c)]===0x0){console[_0xc41c4(0x17a)](_0xc41c4(0x217)+level+_0xc41c4(0x215)+isFullGridWave+_0xc41c4(0x255)+isChallengingStage+',\x20def\x20length:\x20'+currentWaveDefinition?.[_0xc41c4(0x22c)]),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}enemySpawnTimeouts[_0xc41c4(0x187)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x5ebffe=0x0,_0x1403d8=0x0;currentWaveDefinition['forEach']((_0x2c4b02,_0x232876)=>{const _0x433621=_0xc41c4;_0x2c4b02&&_0x2c4b02[_0x433621(0x21b)]&&Array[_0x433621(0x176)](_0x2c4b02[_0x433621(0x21b)])&&_0x2c4b02['enemies'][_0x433621(0x22c)]>0x0?(totalEnemiesScheduledForWave+=_0x2c4b02[_0x433621(0x21b)]['length'],squadronCompletionStatus[_0x232876]={'completed':0x0,'total':_0x2c4b02[_0x433621(0x21b)][_0x433621(0x22c)],'hasFiredPostLanding':![]},squadronEntranceFiringStatus[_0x232876]={'hasFired':![],'scheduledStartTime':0x0},scheduleSingleEntranceSquadron(_0x2c4b02,_0x232876,_0x5ebffe)&&_0x1403d8++,_0x5ebffe+=NORMAL_WAVE_SQUADRON_INTERVAL):console[_0x433621(0x17a)](_0x433621(0x207)+_0x232876+'\x20is\x20empty\x20or\x20invalid.');}),_0x1403d8===0x0&&totalEnemiesScheduledForWave===0x0?(console[_0xc41c4(0x17a)]('Entrance\x20Wave:\x20No\x20squadrons\x20or\x20enemies\x20scheduled\x20for\x20level\x20'+level+_0xc41c4(0x1db)),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![]):isEntrancePhaseActive=!![];}function startChallengingStageSequence(){const _0x4bce35=_0x236fd5;currentWaveDefinition=[],isEntrancePhaseActive=![],enemySpawnTimeouts[_0x4bce35(0x187)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronEntranceFiringStatus={};Object[_0x4bce35(0x1e0)](challengingStagePaths)[_0x4bce35(0x22c)]===0x0&&defineChallengingStagePaths();if(Object[_0x4bce35(0x1e0)](challengingStagePaths)[_0x4bce35(0x22c)]===0x0){console[_0x4bce35(0x1d2)](_0x4bce35(0x1b0)),isWaveTransitioning=!![],setTimeout(()=>{(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode==='coop'&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave==='function'&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}const _0x42e341=[_0x4bce35(0x253),_0x4bce35(0x272),_0x4bce35(0x185),_0x4bce35(0x1b6)],_0x369340=[_0x4bce35(0x15b),_0x4bce35(0x21e),'CS_LoopAttack_BL',_0x4bce35(0x16a)],_0x371940=[..._0x42e341,..._0x369340];for(const _0x3a81e4 of _0x371940){if(!challengingStagePaths[_0x4bce35(0x283)](_0x3a81e4)){console[_0x4bce35(0x1d2)]('CRITICAL:\x20Required\x20CS\x20path\x20\x22'+_0x3a81e4+_0x4bce35(0x21f)),isWaveTransitioning=!![],setTimeout(()=>{const _0xf28dba=_0x4bce35;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0xf28dba(0x21d)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0xf28dba(0x243)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}}let _0x25136c=[..._0x42e341],_0x3601c3=[..._0x369340][_0x4bce35(0x257)](()=>Math[_0x4bce35(0x237)]()-0.5);_0x25136c[_0x4bce35(0x20a)](..._0x3601c3),currentWaveDefinition=[];for(let _0x3a34aa=0x0;_0x3a34aa<CHALLENGING_STAGE_SQUADRON_COUNT;_0x3a34aa++){const _0x4d5e78=_0x25136c[_0x3a34aa],_0x899b05={'pathId':_0x4d5e78,'enemies':[]};for(let _0x2ad988=0x0;_0x2ad988<CHALLENGING_STAGE_SQUADRON_SIZE;_0x2ad988++){let _0x554aea=_0x2ad988<Math[_0x4bce35(0x15d)](CHALLENGING_STAGE_SQUADRON_SIZE/0x2)?ENEMY1_TYPE:ENEMY2_TYPE;_0x899b05[_0x4bce35(0x21b)]['push']({'type':_0x554aea,'entrancePathId':_0x4d5e78});}currentWaveDefinition[_0x4bce35(0x20a)](_0x899b05);}challengingStageTotalEnemies=CHALLENGING_STAGE_ENEMY_COUNT,totalEnemiesScheduledForWave=challengingStageTotalEnemies,enemiesSpawnedThisWave=0x0;if(currentWaveDefinition[_0x4bce35(0x22c)]>0x0){isEntrancePhaseActive=!![],enemySpawnTimeouts=[];let _0x15589b=0x0;const _0x3e604f=-0x1c,_0x14316b=Math[_0x4bce35(0x15d)](Math[_0x4bce35(0x26c)](0x0,level-0x3)/0x4)+0x1,_0x1dce0d=scaleValue(_0x14316b,BASE_CS_SPEED_MULTIPLIER,MAX_CS_SPEED_MULTIPLIER);currentWaveDefinition[_0x4bce35(0x187)]((_0x2bf795,_0x4a0ad3)=>{const _0x4732b2=_0x4bce35;let _0x5039ef=0x0;if(_0x4a0ad3<=0x1)_0x5039ef=0x0;else _0x4a0ad3<=0x3?_0x5039ef=CHALLENGING_STAGE_SQUADRON_INTERVAL:_0x5039ef=(_0x4a0ad3-0x2)*CHALLENGING_STAGE_SQUADRON_INTERVAL;let _0x1f06d8=_0x1dce0d;(_0x4a0ad3===0x2||_0x4a0ad3===0x3)&&(_0x1f06d8*=CS_HORIZONTAL_FLYBY_SPEED_FACTOR);const _0x59767c=setTimeout(()=>{const _0x1d4869=_0xf0bc,_0x56810e=enemySpawnTimeouts[_0x1d4869(0x219)](_0x59767c);if(_0x56810e>-0x1)enemySpawnTimeouts[_0x1d4869(0x172)](_0x56810e,0x1);let _0x2e6b5f=![];isTwoPlayerMode&&selectedGameMode===_0x1d4869(0x21d)?_0x2e6b5f=player1Lives>0x0||player2Lives>0x0:_0x2e6b5f=playerLives>0x0;if(!isPaused&&isInGameState&&isEntrancePhaseActive&&isChallengingStage&&!isWaveTransitioning&&_0x2e6b5f)try{const _0x1467a3=_0x2bf795[_0x1d4869(0x233)],_0x730f6e=challengingStagePaths,_0x24a554=_0x730f6e[_0x1467a3];if(!_0x24a554||_0x24a554[_0x1d4869(0x22c)]===0x0){console[_0x1d4869(0x1d2)](_0x1d4869(0x1ee)+_0x1467a3+'\x20for\x20squadron\x20'+_0x4a0ad3+'\x20invalid!\x20Skipping.'),enemiesSpawnedThisWave+=_0x2bf795['enemies']['length'];return;}let _0x296f47=CS_ENEMY_SPAWN_DELAY_IN_SQUADRON;if(_0x4a0ad3>=0x2&&_0x4a0ad3<=0x3)_0x296f47=CS_HORIZONTAL_FLYBY_SPAWN_DELAY;else _0x4a0ad3>=0x4&&(_0x296f47=CS_LOOP_ATTACK_SPAWN_DELAY);_0x2bf795[_0x1d4869(0x21b)][_0x1d4869(0x187)]((_0x31ef95,_0x210bbb)=>{const _0x5e4c4b=_0x1d4869;if(!_0x31ef95||!_0x31ef95[_0x5e4c4b(0x14f)]){console['error'](_0x5e4c4b(0x14b)+_0x4a0ad3+',\x20index\x20'+_0x210bbb+_0x5e4c4b(0x1bd)),enemiesSpawnedThisWave++;return;}const _0x1da009=_0x210bbb*_0x296f47,_0x28d0b5=setTimeout(()=>{const _0x307560=_0x5e4c4b,_0x2fe585=enemySpawnTimeouts[_0x307560(0x219)](_0x28d0b5);if(_0x2fe585>-0x1)enemySpawnTimeouts[_0x307560(0x172)](_0x2fe585,0x1);let _0x6a0741=![];isTwoPlayerMode&&selectedGameMode===_0x307560(0x21d)?_0x6a0741=player1Lives>0x0||player2Lives>0x0:_0x6a0741=playerLives>0x0;if(isPaused||!isInGameState||!isEntrancePhaseActive||!isChallengingStage||isWaveTransitioning||!_0x6a0741){enemiesSpawnedThisWave++;return;}try{let _0x4b002e=_0x31ef95['type'],_0x1ad727=_0x4b002e===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x1ce027,_0x1597fe;if(_0x4b002e===ENEMY1_TYPE)_0x1ce027=ENEMY1_WIDTH,_0x1597fe=ENEMY1_HEIGHT;else _0x4b002e===ENEMY3_TYPE?(_0x1ce027=BOSS_WIDTH,_0x1597fe=BOSS_HEIGHT):(_0x1ce027=ENEMY_WIDTH,_0x1597fe=ENEMY_HEIGHT);let _0x44020c=0x0,_0x12b8f6=0x0;if(_0x24a554[0x0]?.['p0'])_0x44020c=_0x24a554[0x0]['p0']['x'],_0x12b8f6=_0x24a554[0x0]['p0']['y'];else throw new Error('Invalid\x20start\x20segment\x20for\x20path\x20'+_0x1467a3);(_0x4a0ad3===0x0||_0x4a0ad3===0x1)&&(_0x44020c+=_0x3e604f);const _0x52a931=-_0x210bbb*PATH_T_OFFSET_PER_ENEMY,_0x19f400={'x':_0x44020c,'y':_0x12b8f6,'width':_0x1ce027,'height':_0x1597fe,'targetGridX':0x0,'targetGridY':0x0,'speed':0x0,'state':_0x307560(0x15c),'gridRow':-0x1,'gridCol':-0x1,'type':_0x4b002e,'health':_0x1ad727,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x1467a3,'pathSegmentIndex':0x0,'pathT':_0x52a931,'squadronId':_0x4a0ad3,'id':_0x307560(0x22b)+_0x4a0ad3+'-'+_0x210bbb+'-'+Date[_0x307560(0x200)]()+'-'+Math['random']()[_0x307560(0x264)](0x24)['substring'](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x307560(0x1ea),'hasCapturedShip':_0x4b002e===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x4b002e===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':_0x1f06d8};enemies[_0x307560(0x20a)](_0x19f400),enemiesSpawnedThisWave++;}catch(_0x426579){console[_0x307560(0x1d2)](_0x307560(0x1cf)+_0x4a0ad3+',\x20Idx\x20'+_0x210bbb+',\x20Path\x20'+_0x1467a3+'):',_0x426579),enemiesSpawnedThisWave++;}},_0x1da009);enemySpawnTimeouts[_0x5e4c4b(0x20a)](_0x28d0b5),_0x15589b++;});}catch(_0x17ecc2){console[_0x1d4869(0x1d2)]('CS:\x20Error\x20setting\x20up\x20spawns\x20for\x20squadron\x20'+_0x4a0ad3+':',_0x17ecc2),enemiesSpawnedThisWave+=_0x2bf795['enemies'][_0x1d4869(0x22c)];}else _0x2bf795?.[_0x1d4869(0x21b)]?.[_0x1d4869(0x22c)]>0x0&&(enemiesSpawnedThisWave+=_0x2bf795['enemies'][_0x1d4869(0x22c)]);},_0x5039ef);enemySpawnTimeouts[_0x4732b2(0x20a)](_0x59767c);});}else console[_0x4bce35(0x17a)]('CS:\x20No\x20squadrons\x20generated.\x20Skipping\x20CS\x20sequence.'),isWaveTransitioning=!![],setTimeout(()=>{const _0x35f99e=_0x4bce35;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x35f99e(0x21d)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave==='function'&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);}function fireEnemyBurst(_0x5368d2,_0x52d2ea,_0x5e920a){const _0x153b1b=_0x236fd5;let _0x99d55a=![];isTwoPlayerMode&&selectedGameMode===_0x153b1b(0x21d)?_0x99d55a=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x99d55a=playerLives>0x0&&!isShipCaptured;if(!_0x5368d2||isPaused||!isInGameState||!_0x99d55a||isChallengingStage||isWaveTransitioning)return;const _0x34e2c1=Math[_0x153b1b(0x1ce)](scaleValue(level,BASE_ENEMY_BULLET_BURST_COUNT,MAX_ENEMY_BULLET_BURST_COUNT));for(let _0x5bd8d5=0x0;_0x5bd8d5<_0x34e2c1;_0x5bd8d5++){const _0x13dc58=_0x5e920a+_0x5bd8d5*ENTRANCE_FIRE_BURST_DELAY_MS,_0x2fde17=setTimeout(()=>{const _0x29d9a2=_0x153b1b;try{const _0x46d6cc=enemySpawnTimeouts['indexOf'](_0x2fde17);_0x46d6cc>-0x1&&enemySpawnTimeouts[_0x29d9a2(0x172)](_0x46d6cc,0x1);let _0x5da99f=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x5da99f=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x5da99f=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x5da99f||isChallengingStage||isWaveTransitioning)return;const _0x2a1e34=enemies[_0x29d9a2(0x157)](_0x3dfbe0=>_0x3dfbe0&&_0x3dfbe0['id']===_0x5368d2);_0x2a1e34&&_0x2a1e34[_0x29d9a2(0x17f)]===_0x52d2ea&&(createBulletSimple(_0x2a1e34)&&(_0x5bd8d5===0x0&&playSound('enemyShootSound',![],0.4),_0x2a1e34[_0x29d9a2(0x1c9)]=Date['now']()));}catch(_0x18d487){console[_0x29d9a2(0x1d2)]('Error\x20during\x20enemy\x20burst\x20firing\x20(bullet\x20'+(_0x5bd8d5+0x1)+'/'+_0x34e2c1+')\x20for\x20'+_0x5368d2+':',_0x18d487);}},_0x13dc58);enemySpawnTimeouts[_0x153b1b(0x20a)](_0x2fde17);}}function fireFixedEnemyBurst(_0x1eb75e,_0x243949,_0xd8e8f8,_0x539621){const _0x1742bb=_0x236fd5;let _0x43b56d=![];isTwoPlayerMode&&selectedGameMode===_0x1742bb(0x21d)?_0x43b56d=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x43b56d=playerLives>0x0&&!isShipCaptured;if(!_0x1eb75e||isPaused||!isInGameState||!_0x43b56d||isChallengingStage||isWaveTransitioning||_0x539621<=0x0)return;for(let _0x38c67a=0x0;_0x38c67a<_0x539621;_0x38c67a++){const _0x294732=_0xd8e8f8+_0x38c67a*ENTRANCE_FIRE_BURST_DELAY_MS,_0x222426=setTimeout(()=>{const _0x39d190=_0x1742bb;try{const _0x15aae1=enemySpawnTimeouts[_0x39d190(0x219)](_0x222426);_0x15aae1>-0x1&&enemySpawnTimeouts[_0x39d190(0x172)](_0x15aae1,0x1);let _0x10432a=![];isTwoPlayerMode&&selectedGameMode===_0x39d190(0x21d)?_0x10432a=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x10432a=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x10432a||isChallengingStage||isWaveTransitioning)return;const _0x4d9c4c=enemies[_0x39d190(0x157)](_0x369464=>_0x369464&&_0x369464['id']===_0x1eb75e);if(_0x4d9c4c)createBulletSimple(_0x4d9c4c)&&(_0x38c67a===0x0&&playSound(_0x39d190(0x17b),![],0.4),_0x4d9c4c[_0x39d190(0x1c9)]=Date['now']());else{}}catch(_0x4b5af3){console[_0x39d190(0x1d2)](_0x39d190(0x168)+(_0x38c67a+0x1)+'/'+_0x539621+_0x39d190(0x1b1)+_0x1eb75e+':',_0x4b5af3);}},_0x294732);enemySpawnTimeouts[_0x1742bb(0x20a)](_0x222426);}}function startFullGridWave(){const _0x599204=_0x236fd5;if(!currentWaveDefinition||currentWaveDefinition['length']===0x0||!isFullGridWave){console[_0x599204(0x1d2)](_0x599204(0x1ec)),isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}playSound(_0x599204(0x1c2),![],0.4),enemySpawnTimeouts[_0x599204(0x187)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x3e82b5=0x0;currentWaveDefinition[_0x599204(0x187)]((_0xaaac77,_0x1c9e46)=>{const _0x4b2bc6=_0x599204;let _0x481b87=0x0;_0xaaac77&&_0xaaac77['enemies']&&Array['isArray'](_0xaaac77[_0x4b2bc6(0x21b)])?(_0x481b87=_0xaaac77['enemies']['length'],_0xaaac77['enemies'][_0x4b2bc6(0x187)]((_0x3ae557,_0x267170)=>{const _0x39b82a=_0x4b2bc6;try{if(!_0x3ae557||!_0x3ae557[_0x39b82a(0x14f)]||typeof _0x3ae557[_0x39b82a(0x265)]===_0x39b82a(0x1f3)||typeof _0x3ae557['gridCol']===_0x39b82a(0x1f3)){console[_0x39b82a(0x1d2)]('Full\x20Grid:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20'+_0x1c9e46+',\x20index\x20'+_0x267170+_0x39b82a(0x1bd));return;}let _0x43c2be=_0x3ae557['type'],_0x3fa362=_0x43c2be===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x5452f6,_0x47da98;if(_0x43c2be===ENEMY1_TYPE)_0x5452f6=ENEMY1_WIDTH,_0x47da98=ENEMY1_HEIGHT;else _0x43c2be===ENEMY3_TYPE?(_0x5452f6=BOSS_WIDTH,_0x47da98=BOSS_HEIGHT):(_0x5452f6=ENEMY_WIDTH,_0x47da98=ENEMY_HEIGHT);let _0x27bf02,_0x4b8b37;try{const {x:_0x25efff,y:_0x3bd30b}=getCurrentGridSlotPosition(_0x3ae557[_0x39b82a(0x265)],_0x3ae557[_0x39b82a(0x23b)],_0x5452f6);_0x27bf02=_0x25efff,_0x4b8b37=_0x3bd30b;}catch(_0x38579d){console['error'](_0x39b82a(0x25b)+_0x3ae557['type']+'\x20at\x20['+_0x3ae557[_0x39b82a(0x265)]+','+_0x3ae557[_0x39b82a(0x23b)]+']',_0x38579d),_0x27bf02=gameCanvas?.[_0x39b82a(0x218)]/0x2||0xc8,_0x4b8b37=ENEMY_TOP_MARGIN+_0x3ae557[_0x39b82a(0x265)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x56c7f7={'x':_0x27bf02,'y':_0x4b8b37,'width':_0x5452f6,'height':_0x47da98,'targetGridX':_0x27bf02,'targetGridY':_0x4b8b37,'speed':0x0,'state':_0x39b82a(0x22a),'gridRow':_0x3ae557[_0x39b82a(0x265)],'gridCol':_0x3ae557[_0x39b82a(0x23b)],'type':_0x43c2be,'health':_0x3fa362,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':null,'pathSegmentIndex':0x0,'pathT':0x0,'squadronId':_0x1c9e46,'squadronEnemyIndex':_0x267170,'id':_0x39b82a(0x1d1)+_0x1c9e46+'-'+_0x267170+'-'+Date[_0x39b82a(0x200)]()+'-'+Math[_0x39b82a(0x237)]()[_0x39b82a(0x264)](0x24)[_0x39b82a(0x212)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':'normal','hasCapturedShip':_0x43c2be===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x43c2be===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies[_0x39b82a(0x20a)](_0x56c7f7),_0x3e82b5++;}catch(_0x34b259){console['error'](_0x39b82a(0x1ba)+_0x1c9e46+_0x39b82a(0x18e)+_0x267170+'):',_0x34b259);}})):console[_0x4b2bc6(0x17a)](_0x4b2bc6(0x256)+_0x1c9e46+_0x4b2bc6(0x286)),squadronCompletionStatus[_0x1c9e46]={'completed':_0x481b87,'total':_0x481b87};}),totalEnemiesScheduledForWave=_0x3e82b5,enemiesSpawnedThisWave=_0x3e82b5,isEntrancePhaseActive=![],gridJustCompleted=!![],!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound('gridBackgroundSound',!![],0.1)),GRID_BREATH_ENABLED&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=Date[_0x599204(0x200)](),currentGridBreathFactor=0x0),lastGridFireCheckTime=Date[_0x599204(0x200)](),firstEnemyLanded=!![];}function renderGame(){const _0x4248b0=_0x236fd5;try{if(!gameCtx||!gameCanvas){if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null;return;}gameCtx[_0x4248b0(0x1f6)](0x0,0x0,gameCanvas[_0x4248b0(0x218)],gameCanvas[_0x4248b0(0x25d)]);const _0x4aa757=Date[_0x4248b0(0x200)]();gameCtx[_0x4248b0(0x213)]();const _0x21eb77=_0x4248b0(0x252),_0x394824=_0x4248b0(0x1ad),_0xc7e810=_0x4248b0(0x232);let _0x35f238,_0x27bbdf,_0x32eb1e,_0xcebadb,_0x1cf968=![],_0x40d995=![],_0x2da172=![];if(isShowingResultsScreen){}else{if(gameOverSequenceStartTime>0x0&&!isShowingPlayerGameOverMessage){}else{if(isShowingPlayerGameOverMessage){}else{if(!isInGameState){}else{_0x32eb1e=highScore||0x0;if(!isManualControl){}else{if(isTwoPlayerMode&&selectedGameMode==='coop'){_0x35f238=player1Score,_0x27bbdf=player2Score,_0x32eb1e=Math[_0x4248b0(0x26c)](highScore,player1Score,player2Score),_0xcebadb=_0x4248b0(0x25e),_0x1cf968=!isShowingIntro&&!isPaused&&player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn,_0x40d995=!isShowingIntro&&!isPaused&&player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn;if(player1Score>=_0x32eb1e&&player1Score>0x0)_0x2da172=_0x1cf968;if(player2Score>=_0x32eb1e&&player2Score>0x0&&player2Score>player1Score)_0x2da172=_0x40d995;}else isTwoPlayerMode&&selectedGameMode==='normal'?(_0x35f238=currentPlayer===0x1?score:player1Score,_0x27bbdf=currentPlayer===0x2?score:player2Score,_0x32eb1e=Math[_0x4248b0(0x26c)](highScore,player1Score,player2Score,score),_0xcebadb=_0x4248b0(0x25e),_0x1cf968=!isShowingIntro&&!isPaused&&currentPlayer===0x1&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x40d995=!isShowingIntro&&!isPaused&&currentPlayer===0x2&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x2da172=!isPaused&&!isShowingIntro&&score>0x0&&_0x32eb1e>0x0&&score>=_0x32eb1e):(_0x35f238=score,_0x27bbdf=0x0,_0xcebadb=_0x4248b0(0x25e));}}}}}let _0x5d95bb=![];if(_0x2da172){}typeof MARGIN_SIDE!=='undefined'&&typeof MARGIN_TOP!==_0x4248b0(0x1f3)&&typeof SCORE_OFFSET_Y!==_0x4248b0(0x1f3)&&(drawTopUiElement(_0xcebadb,_0x35f238,'left',MARGIN_SIDE,_0x1cf968),drawTopUiElement('HIGH\x20SCORE',_0x32eb1e,_0x4248b0(0x194),gameCanvas[_0x4248b0(0x218)]/0x2,_0x5d95bb),drawTopUiElement(_0x4248b0(0x1f4),_0x27bbdf,'right',gameCanvas[_0x4248b0(0x218)]-MARGIN_SIDE,_0x40d995));if(typeof shipImage!==_0x4248b0(0x1f3)&&typeof LIFE_ICON_MARGIN_BOTTOM!=='undefined'&&typeof LIFE_ICON_SIZE!==_0x4248b0(0x1f3)&&typeof LIFE_ICON_MARGIN_LEFT!=='undefined'&&typeof LIFE_ICON_SPACING!==_0x4248b0(0x1f3)){if(shipImage[_0x4248b0(0x1bb)]&&shipImage[_0x4248b0(0x1f2)]!==0x0){const _0xd5faef=gameCanvas[_0x4248b0(0x25d)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE;let _0x3433e0=0x0,_0x27fb4e=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x4248b0(0x21d)){if(player1Lives>0x0)_0x3433e0=Math['max'](0x0,player1Lives-0x1);if(player2Lives>0x0)_0x27fb4e=Math[_0x4248b0(0x26c)](0x0,player2Lives-0x1);}else{if(playerLives>0x0)_0x3433e0=Math[_0x4248b0(0x26c)](0x0,playerLives-0x1);}const _0x5af1cf=0x5;for(let _0x4499f1=0x0;_0x4499f1<Math[_0x4248b0(0x156)](_0x3433e0,_0x5af1cf);_0x4499f1++){const _0x1be9c1=LIFE_ICON_MARGIN_LEFT+_0x4499f1*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx[_0x4248b0(0x1e6)](shipImage,Math[_0x4248b0(0x1ce)](_0x1be9c1),Math[_0x4248b0(0x1ce)](_0xd5faef),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}if(isTwoPlayerMode&&selectedGameMode===_0x4248b0(0x21d)){const _0x132bcc=gameCanvas[_0x4248b0(0x218)]-LIFE_ICON_MARGIN_RIGHT-Math[_0x4248b0(0x156)](_0x27fb4e,_0x5af1cf)*(LIFE_ICON_SIZE+LIFE_ICON_SPACING)+LIFE_ICON_SPACING;for(let _0x5a6107=0x0;_0x5a6107<Math[_0x4248b0(0x156)](_0x27fb4e,_0x5af1cf);_0x5a6107++){const _0xb5521b=_0x132bcc+_0x5a6107*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx[_0x4248b0(0x1e6)](shipImage,Math[_0x4248b0(0x1ce)](_0xb5521b),Math['round'](_0xd5faef),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}}}}gameCtx[_0x4248b0(0x1a3)](),gameCtx[_0x4248b0(0x213)]();if(isTwoPlayerMode&&selectedGameMode===_0x4248b0(0x21d)){if(ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured){let _0x383437=!![];if(isPlayer1Invincible){const _0x4a3386=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x4aa757%_0x4a3386>=INVINCIBILITY_BLINK_ON_MS)_0x383437=![];}if(_0x383437){const _0x1eb666=ship1['x'],_0xdb076d=ship1['y'];typeof shipImage!==_0x4248b0(0x1f3)&&shipImage[_0x4248b0(0x1bb)]?(gameCtx['drawImage'](shipImage,Math[_0x4248b0(0x1ce)](_0x1eb666),Math['round'](_0xdb076d),ship1[_0x4248b0(0x218)],ship1[_0x4248b0(0x25d)]),player1IsDualShipActive&&gameCtx['drawImage'](shipImage,Math[_0x4248b0(0x1ce)](_0x1eb666+DUAL_SHIP_OFFSET_X),Math[_0x4248b0(0x1ce)](_0xdb076d),ship1[_0x4248b0(0x218)],ship1[_0x4248b0(0x25d)])):(gameCtx[_0x4248b0(0x1f7)]='blue',gameCtx[_0x4248b0(0x234)](Math[_0x4248b0(0x1ce)](_0x1eb666),Math[_0x4248b0(0x1ce)](_0xdb076d),ship1[_0x4248b0(0x218)],ship1[_0x4248b0(0x25d)]));}}if(ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured){let _0x101d6e=!![];if(isPlayer2Invincible){const _0x428fa9=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x4aa757%_0x428fa9>=INVINCIBILITY_BLINK_ON_MS)_0x101d6e=![];}if(_0x101d6e){const _0x4d77c5=ship2['x'],_0x20cee4=ship2['y'];typeof shipImage!==_0x4248b0(0x1f3)&&shipImage['complete']?(gameCtx[_0x4248b0(0x1e6)](shipImage,Math[_0x4248b0(0x1ce)](_0x4d77c5),Math[_0x4248b0(0x1ce)](_0x20cee4),ship2[_0x4248b0(0x218)],ship2[_0x4248b0(0x25d)]),player2IsDualShipActive&&gameCtx['drawImage'](shipImage,Math[_0x4248b0(0x1ce)](_0x4d77c5+DUAL_SHIP_OFFSET_X),Math[_0x4248b0(0x1ce)](_0x20cee4),ship2['width'],ship2['height'])):(gameCtx[_0x4248b0(0x1f7)]=_0x4248b0(0x154),gameCtx['fillRect'](Math['round'](_0x4d77c5),Math[_0x4248b0(0x1ce)](_0x20cee4),ship2[_0x4248b0(0x218)],ship2['height']));}}}else{if(ship&&!isShowingCaptureMessage){let _0x2b482d=!![];if(isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isInvincible){const _0xd8d405=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x4aa757%_0xd8d405>=INVINCIBILITY_BLINK_ON_MS)_0x2b482d=![];}if(_0x2b482d){let _0xa1515b=ship['x'],_0x1604bb=(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0||!isInGameState||isShowingScoreScreen||isInGameState&&isShowingIntro&&!isManualControl&&(introStep===0x1||introStep===0x2||introStep===0x3))&&!isDualShipActive;_0x1604bb&&(_0xa1515b=Math[_0x4248b0(0x1ce)](gameCanvas[_0x4248b0(0x218)]/0x2-ship[_0x4248b0(0x218)]/0x2));const _0x1637d3=ship['y'];typeof shipImage!==_0x4248b0(0x1f3)&&shipImage[_0x4248b0(0x1bb)]?(gameCtx[_0x4248b0(0x1e6)](shipImage,Math[_0x4248b0(0x1ce)](_0xa1515b),Math[_0x4248b0(0x1ce)](_0x1637d3),ship['width'],ship[_0x4248b0(0x25d)]),isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isDualShipActive&&!isShipCaptured&&gameCtx[_0x4248b0(0x1e6)](shipImage,Math['round'](_0xa1515b+DUAL_SHIP_OFFSET_X),Math[_0x4248b0(0x1ce)](_0x1637d3),ship['width'],ship[_0x4248b0(0x25d)])):(gameCtx[_0x4248b0(0x1f7)]='blue',gameCtx[_0x4248b0(0x234)](Math[_0x4248b0(0x1ce)](_0xa1515b),Math[_0x4248b0(0x1ce)](_0x1637d3),ship['width'],ship[_0x4248b0(0x25d)]));}}}if(fallingShips['length']>0x0&&typeof shipImage!=='undefined'&&shipImage[_0x4248b0(0x1bb)]){}gameCtx[_0x4248b0(0x1a3)]();if(!isInGameState){if(isShowingScoreScreen){}else{gameCtx['save']();const _0x42cc81=gameCanvas['width'],_0x41c6a0=gameCanvas[_0x4248b0(0x25d)],_0x23d13a=_0x42cc81/0x2;selectedButtonIndex===-0x1&&(isPlayerSelectMode||isFiringModeSelectMode||isGameModeSelectMode||!isPlayerSelectMode&&!isFiringModeSelectMode&&!isGameModeSelectMode)&&(selectedButtonIndex=0x0);let _0x3c8294=MENU_LOGO_APPROX_HEIGHT,_0x419bdb=_0x3c8294*(logoImage[_0x4248b0(0x249)]/logoImage[_0x4248b0(0x1f2)]||0x1);typeof logoImage!==_0x4248b0(0x1f3)&&logoImage[_0x4248b0(0x1bb)]&&logoImage[_0x4248b0(0x1f2)]!==0x0&&(_0x3c8294=logoImage[_0x4248b0(0x1f2)]*LOGO_SCALE_FACTOR,_0x419bdb=logoImage['naturalWidth']*LOGO_SCALE_FACTOR);const _0x17709e=getSubtitleApproxHeight(MENU_SUBTITLE_FONT),_0x5b92fc=_0x3c8294+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0x17709e;let _0x866f75=(_0x41c6a0-_0x5b92fc)/0x2-0x46;_0x866f75+=MENU_GENERAL_Y_OFFSET;const _0x18d5f9=_0x23d13a-_0x419bdb/0x2,_0x494694=_0x866f75+MENU_LOGO_EXTRA_Y_OFFSET;typeof logoImage!==_0x4248b0(0x1f3)&&logoImage[_0x4248b0(0x1bb)]&&logoImage[_0x4248b0(0x1f2)]!==0x0?gameCtx[_0x4248b0(0x1e6)](logoImage,Math['round'](_0x18d5f9),Math[_0x4248b0(0x1ce)](_0x494694),_0x419bdb,_0x3c8294):drawCanvasText(_0x4248b0(0x14e),_0x23d13a,_0x494694+_0x3c8294/0x2,_0x4248b0(0x202),_0x4248b0(0x1dc));if(isGameModeSelectMode)drawCanvasButton(_0x4248b0(0x1b9),0x0,selectedButtonIndex===0x0),drawCanvasButton('CO-OP\x20GAME',0x1,selectedButtonIndex===0x1);else{if(isFiringModeSelectMode)drawCanvasButton(_0x4248b0(0x26f),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x4248b0(0x160),0x1,selectedButtonIndex===0x1);else isPlayerSelectMode?(drawCanvasButton(_0x4248b0(0x206),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x4248b0(0x208),0x1,selectedButtonIndex===0x1)):(drawCanvasButton(_0x4248b0(0x1ca),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x4248b0(0x1fd),0x1,selectedButtonIndex===0x1));}const _0x582ac9=getMenuButtonRect(0x1);let _0x35175a;_0x582ac9?_0x35175a=_0x582ac9['y']+_0x582ac9[_0x4248b0(0x25d)]+MENU_BUTTON_SUBTITLE_V_GAP+_0x17709e/0x2:_0x35175a=_0x866f75+_0x3c8294+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0x17709e/0x2,drawCanvasText(MENU_SUBTITLE_TEXT,_0x23d13a-0x1,Math[_0x4248b0(0x1ce)](_0x35175a),MENU_SUBTITLE_FONT,MENU_SUBTITLE_COLOR,_0x4248b0(0x194),_0x4248b0(0x23c),!![]),gameCtx[_0x4248b0(0x1a3)]();}}else{if(gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){gameCtx[_0x4248b0(0x213)]();let _0x4f8fcc=!showReadyMessage&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!isCsCompletionDelayActive&&!isShowingIntro&&!isShowingCaptureMessage;_0x4f8fcc&&(bullets[_0x4248b0(0x187)](_0x59c168=>{}),enemyBullets['forEach'](_0x3c4435=>{}));enemies['forEach'](_0x52d5b2=>{});if(captureBeamActive&&capturingBossId&&captureBeamProgress>0x0){}renderExplosions(),renderFloatingScores(),renderHitSparks();let _0x56fcf7=![];const _0xe2fae5=gameCanvas[_0x4248b0(0x25d)]/0x2;if(isPaused){}else{if(isShowingCaptureMessage){}}gameCtx['restore']();}else{if(isShowingPlayerGameOverMessage){}else{if(gameOverSequenceStartTime>0x0){}}}}}catch(_0x392989){console['error'](_0x4248b0(0x146),_0x392989,_0x392989['stack']);}}function handleEnemyHit(_0xe83032,_0x30770d=null){const _0x527a4e=_0x236fd5;if(!_0xe83032)return{'destroyed':![],'pointsAwarded':0x0};const _0x1037d8=Date[_0x527a4e(0x200)]();let _0x3579ae=0x0,_0x19b603=![],_0xd4f51a=_0xe83032[_0x527a4e(0x269)],_0x1ba4b4=null,_0xa398f1=0x1;const _0x367951=_0xe83032[_0x527a4e(0x14f)]===ENEMY3_TYPE?BOSS_WIDTH:_0xe83032['type']===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x235739=_0xe83032[_0x527a4e(0x14f)]===ENEMY3_TYPE?BOSS_HEIGHT:_0xe83032[_0x527a4e(0x14f)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x17b639=_0xe83032[_0x527a4e(0x14f)]===ENEMY3_TYPE&&_0xe83032[_0x527a4e(0x16e)],_0x37b117=_0xe83032['type']===ENEMY3_TYPE&&_0xe83032['capturedShipDimensions'];let _0x3307de=![],_0x52b7e2=null;if(_0x17b639){if(isTwoPlayerMode&&selectedGameMode==='coop'){if(isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0xe83032['id'])_0x3307de=!![],_0x52b7e2=_0x527a4e(0x280);else isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0xe83032['id']&&(_0x3307de=!![],_0x52b7e2=_0x527a4e(0x17c));}else!isTwoPlayerMode&&isShipCaptured&&capturedBossIdWithMessage===_0xe83032['id']&&(_0x3307de=!![]);}const _0x4ee624=_0xe83032['x']+_0x367951/0x2,_0x2af168=_0xe83032['y']+_0x235739*0.2;createHitSparks(_0x4ee624,_0x2af168),_0xe83032[_0x527a4e(0x268)]--;_0xe83032['type']===ENEMY3_TYPE&&(_0xe83032[_0x527a4e(0x269)]=_0xe83032['health']<ENEMY3_MAX_HITS);if(_0xe83032[_0x527a4e(0x268)]<=0x0){_0x19b603=!![];isChallengingStage&&challengingStageEnemiesHit++;if(_0x17b639&&_0x37b117){let _0x9fa9e3=null;if(_0x3307de&&_0x52b7e2)_0x9fa9e3=_0x52b7e2;else{let _0x569443=![];if(isCoopAIDemoActive){if(_0x30770d===_0x527a4e(0x280)&&player1IsDualShipActive)_0x9fa9e3=_0x527a4e(0x17c),_0x569443=!![];else _0x30770d==='player2'&&player2IsDualShipActive&&(_0x9fa9e3=_0x527a4e(0x280),_0x569443=!![]);}else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x527a4e(0x149)){if(_0x30770d===_0x527a4e(0x167)&&player2IsDualShipActive)_0x9fa9e3='player1',_0x569443=!![];else _0x30770d==='player1'&&player1IsDualShipActive&&(_0x9fa9e3='ai_p2',_0x569443=!![]);}}!_0x569443&&(_0x9fa9e3=_0x30770d);}_0x9fa9e3===null&&_0x30770d&&(_0x9fa9e3=_0x30770d);if(_0xe83032[_0x527a4e(0x1a9)]){const _0x3fbdb4=_0xe83032[_0x527a4e(0x1a9)][_0x527a4e(0x218)],_0x4680e5=_0xe83032[_0x527a4e(0x1a9)][_0x527a4e(0x25d)],_0x1c8dbb=_0xe83032['x']+(_0x367951-_0x3fbdb4)/0x2+CAPTURED_SHIP_OFFSET_X,_0x5f522b=_0xe83032['y']+CAPTURED_SHIP_OFFSET_Y,_0x30e648=fallingShips[_0x527a4e(0x164)](_0x577e71=>Math['abs'](_0x577e71['x']-_0x1c8dbb)<0x1&&Math['abs'](_0x577e71['y']-_0x5f522b)<0x1);!_0x30e648&&fallingShips[_0x527a4e(0x20a)]({'x':_0x1c8dbb,'y':_0x5f522b,'width':_0x3fbdb4,'height':_0x4680e5,'creationTime':_0x1037d8,'tintProgress':0x1,'rotation':0x0,'rotationDirection':Math[_0x527a4e(0x237)]()<0.5?-0x1:0x1,'totalRotation':0x0,'rotationCompleted':![],'targetPlayerId':_0x9fa9e3});}else console[_0x527a4e(0x1d2)](_0x527a4e(0x1a4));_0xe83032[_0x527a4e(0x16e)]=![],_0xe83032['capturedShipDimensions']=null;}else _0x17b639&&!_0x37b117&&(console[_0x527a4e(0x1d2)](_0x527a4e(0x180)+_0xe83032['id']+'\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!\x20Resetting\x20state\x20anyway.'),_0xe83032[_0x527a4e(0x16e)]=![],_0xe83032[_0x527a4e(0x1a9)]=null);if(isChallengingStage){let _0x5c0a9a=0x64;const _0x456bb7=csLastHitTime;csLastHitTime=_0x1037d8,csLastChainHitPosition={'x':_0xe83032['x'],'y':_0xe83032['y']},csCurrentChainHits>0x0&&_0x1037d8-_0x456bb7<CS_CHAIN_BREAK_TIME_MS?csCurrentChainHits++:(csCurrentChainHits=0x1,csCurrentChainScore=0x0),csCurrentChainHits>=CS_CHAIN_SCORE_THRESHOLD&&(_0x5c0a9a*=0x2),_0x3579ae=_0x5c0a9a,csCurrentChainScore+=_0x3579ae,scoreEarnedThisCS+=_0x3579ae,_0x1ba4b4='explosionSound',_0xa398f1=0.4;}else{if(_0xe83032[_0x527a4e(0x17f)]===_0x527a4e(0x22a))_0x3579ae=_0xe83032[_0x527a4e(0x14f)]===ENEMY1_TYPE?0x32:_0xe83032['type']===ENEMY2_TYPE?0x50:0x0,_0xe83032[_0x527a4e(0x14f)]===ENEMY3_TYPE&&(_0x3579ae=0x96),_0x1ba4b4=_0x527a4e(0x1cd),_0xa398f1=0.4;else{_0x3579ae=_0xe83032[_0x527a4e(0x14f)]===ENEMY1_TYPE?0x64:_0xe83032[_0x527a4e(0x14f)]===ENEMY2_TYPE?0xa0:0x0;if(_0xe83032[_0x527a4e(0x14f)]===ENEMY3_TYPE){if(_0x17b639){const _0x400199=[0x3e8,0x5dc,0x7d0,0xbb8];_0x3579ae=_0x400199[Math[_0x527a4e(0x15d)](Math['random']()*_0x400199[_0x527a4e(0x22c)])],_0x1ba4b4=_0x527a4e(0x16b),_0xa398f1=0.4;}else _0xd4f51a?(_0x3579ae=0x190,_0x1ba4b4='bossHit2Sound',_0xa398f1=0.4):(_0x3579ae=0x0,console[_0x527a4e(0x17a)]('[Destroyed\x20Boss\x20Score\x20-\x20Attack]\x20Boss\x20destroyed\x20on\x20first\x20hit?\x20Awarding\x20'+_0x3579ae+'\x20points.\x20Health\x20was:\x20'+(_0xe83032['health']+0x1)),_0x1ba4b4=_0x527a4e(0x1cd),_0xa398f1=0.4);}else _0x1ba4b4=_0x527a4e(0x1cd),_0xa398f1=0.4;if(_0x19b603&&_0x3579ae>0x0){const _0x30f7c2=normalWaveLastHitTime;normalWaveLastHitTime=_0x1037d8,normalWaveLastChainHitPosition={'x':_0xe83032['x'],'y':_0xe83032['y']};normalWaveLastChainHitPosition&&_0x1037d8-_0x30f7c2<NORMAL_WAVE_CHAIN_BREAK_TIME_MS?normalWaveCurrentChainHits++:(normalWaveCurrentChainHits=0x1,normalWaveCurrentChainScore=0x0);if(NORMAL_WAVE_CHAIN_BONUS_ENABLED&&normalWaveCurrentChainHits>=NORMAL_WAVE_CHAIN_SCORE_THRESHOLD){const _0x2c5586=[0x12c,0x258,0x3e8,0x5dc,0x7d0,0xbb8],_0x2df101=Math[_0x527a4e(0x156)](_0x2c5586[_0x527a4e(0x22c)]-0x1,normalWaveCurrentChainHits-NORMAL_WAVE_CHAIN_SCORE_THRESHOLD),_0x511dbc=_0x2c5586[_0x2df101];_0x3579ae+=_0x511dbc,normalWaveCurrentChainScore+=_0x511dbc;}}}}if(_0x3579ae>0x0){let _0x4bb3da=null;if(isCoopAIDemoActive){if(_0x30770d==='player1')player1Score+=_0x3579ae,_0x4bb3da=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(_0x527a4e(0x1c0),![],0.2))),checkAndAwardExtraLife(0x1);else{if(_0x30770d===_0x527a4e(0x17c))player2Score+=_0x3579ae,_0x4bb3da=()=>player2EnemiesHit++,player2Score>highScore&&(highScore=player2Score,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound(_0x527a4e(0x1c0),![],0.2))),checkAndAwardExtraLife(0x2);else{player1Score+=_0x3579ae,_0x4bb3da=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score;checkAndAwardExtraLife(0x1);}}}else{if(!isManualControl)score+=_0x3579ae,player1Score=score,_0x4bb3da=()=>player1EnemiesHit++,score>highScore&&(highScore=score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(_0x527a4e(0x1c0),![],0.2))),checkAndAwardExtraLife(0x1);else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(_0x30770d==='player1')player1Score+=_0x3579ae,_0x4bb3da=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(_0x527a4e(0x1c0),![],0.2))),checkAndAwardExtraLife(0x1);else{if(_0x30770d===_0x527a4e(0x167))player2Score+=_0x3579ae,_0x4bb3da=()=>player2EnemiesHit++,player2Score>highScore&&(highScore=player2Score,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound('hiScoreSound',![],0.2))),checkAndAwardExtraLife(0x2);else{player1Score+=_0x3579ae,_0x4bb3da=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score;checkAndAwardExtraLife(0x1);}}}else{if(isTwoPlayerMode&&selectedGameMode===_0x527a4e(0x21d)){if(_0x30770d===_0x527a4e(0x280))player1Score+=_0x3579ae,_0x4bb3da=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(_0x527a4e(0x1c0),![],0.2))),checkAndAwardExtraLife(0x1);else _0x30770d==='player2'?(player2Score+=_0x3579ae,_0x4bb3da=()=>player2EnemiesHit++,player2Score>highScore&&(highScore=player2Score,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound(_0x527a4e(0x1c0),![],0.2))),checkAndAwardExtraLife(0x2)):(player1Score+=_0x3579ae,_0x4bb3da=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(_0x527a4e(0x1c0),![],0.2))),checkAndAwardExtraLife(0x1));}else{score+=_0x3579ae;let _0x30ae2c=score,_0x34e393=null,_0x305391=currentPlayer;currentPlayer===0x1||!isTwoPlayerMode?(player1Score=score,_0x4bb3da=()=>player1EnemiesHit++,_0x34e393=()=>{player1TriggeredHighScoreSound=!![];}):(player2Score=score,_0x4bb3da=()=>player2EnemiesHit++,_0x34e393=()=>{player2TriggeredHighScoreSound=!![];});if(_0x30ae2c>highScore){highScore=_0x30ae2c;const _0xb4a47d=currentPlayer===0x1||!isTwoPlayerMode?player1TriggeredHighScoreSound:player2TriggeredHighScoreSound;!_0xb4a47d&&_0x34e393&&(_0x34e393(),playSound('hiScoreSound',![],0.2));}checkAndAwardExtraLife(_0x305391);}}}}_0x4bb3da&&!isChallengingStage&&_0x4bb3da();const _0x46ad84=_0xe83032[_0x527a4e(0x17f)]===_0x527a4e(0x22a)||isChallengingStage?FLOATING_SCORE_COLOR_GRID:FLOATING_SCORE_COLOR_ACTIVE;floatingScores[_0x527a4e(0x20a)]({'text':_0x3579ae[_0x527a4e(0x264)](),'x':_0xe83032['x']+_0x367951/0x2,'y':_0xe83032['y'],'color':_0x46ad84,'creationTime':_0x1037d8,'displayStartTime':_0x1037d8+FLOATING_SCORE_APPEAR_DELAY});}createExplosion(_0xe83032['x']+_0x367951/0x2,_0xe83032['y']+_0x235739/0x2);_0xe83032['id']===capturingBossId&&stopSound(_0x527a4e(0x1de));if(_0xe83032['state']===_0x527a4e(0x152)||_0xe83032[_0x527a4e(0x17f)]===_0x527a4e(0x278)||_0xe83032[_0x527a4e(0x17f)]===_0x527a4e(0x242)||_0xe83032[_0x527a4e(0x17f)]===_0x527a4e(0x15c)||_0xe83032[_0x527a4e(0x17f)]===_0x527a4e(0x260)||_0xe83032[_0x527a4e(0x17f)]===_0x527a4e(0x19b)){if(_0xe83032[_0x527a4e(0x14f)]===ENEMY3_TYPE)stopSound(_0x527a4e(0x248));else stopSound(_0x527a4e(0x15e));}}else{_0x19b603=![];if(_0xe83032['type']===ENEMY3_TYPE)_0x1ba4b4='bossHit1Sound',_0xa398f1=0.6,_0x3579ae=0x0;else{_0x3579ae=0x0;if(_0xe83032['type']===ENEMY1_TYPE)_0x1ba4b4=_0x527a4e(0x1d6),_0xa398f1=0.3;else _0xe83032[_0x527a4e(0x14f)]===ENEMY2_TYPE&&(_0x1ba4b4='butterflyHitSound',_0xa398f1=0.3);}}return _0x1ba4b4&&playSound(_0x1ba4b4,![],_0xa398f1),{'destroyed':_0x19b603,'pointsAwarded':_0x3579ae};}function createHitSparks(_0x3f30c8,_0x506ea7){const _0x21d5c1=_0x236fd5;if(!gameCtx)return;const _0x4ac569=Date['now']();for(let _0x56e9b9=0x0;_0x56e9b9<HIT_SPARK_COUNT;_0x56e9b9++){const _0x59b231=Math[_0x21d5c1(0x237)]()*Math['PI']*0x2,_0x597dc3=HIT_SPARK_SPEED*(0.7+Math['random']()*0.6),_0x15ca97=HIT_SPARK_LIFETIME*(0.8+Math[_0x21d5c1(0x237)]()*0.4);hitSparks[_0x21d5c1(0x20a)]({'x':_0x3f30c8,'y':_0x506ea7,'vx':Math[_0x21d5c1(0x181)](_0x59b231)*_0x597dc3,'vy':Math[_0x21d5c1(0x1c6)](_0x59b231)*_0x597dc3,'creationTime':_0x4ac569,'lifetime':_0x15ca97,'size':HIT_SPARK_SIZE,'color':HIT_SPARK_COLOR});}}function updateHitSparks(){const _0x997b23=_0x236fd5,_0x473ff4=Date[_0x997b23(0x200)]();for(let _0x5ca9a8=hitSparks[_0x997b23(0x22c)]-0x1;_0x5ca9a8>=0x0;_0x5ca9a8--){const _0x30806c=hitSparks[_0x5ca9a8],_0x3f7a08=_0x473ff4-_0x30806c['creationTime'];_0x3f7a08>=_0x30806c[_0x997b23(0x189)]?hitSparks[_0x997b23(0x172)](_0x5ca9a8,0x1):(_0x30806c['vy']+=HIT_SPARK_GRAVITY,_0x30806c['x']+=_0x30806c['vx'],_0x30806c['y']+=_0x30806c['vy'],_0x30806c[_0x997b23(0x198)]=Math[_0x997b23(0x26c)](0x0,0x1-_0x3f7a08*HIT_SPARK_FADE_SPEED));}}function moveEntities(){const _0x393e2a=_0x236fd5;try{if(isPaused)return;const _0xad753f=Date['now']();}catch(_0x339d61){console[_0x393e2a(0x1d2)](_0x393e2a(0x226),_0x339d61,_0x339d61['stack']),isGridSoundPlaying=![],stopSound(_0x393e2a(0x1a1)),isEntrancePhaseActive=![],stopSound(_0x393e2a(0x1c2)),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(_0x393e2a(0x1de)),stopSound(_0x393e2a(0x14d)),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState==='function')showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x393e2a(0x183));}}function switchPlayerTurn(){const _0x46bb94=_0x236fd5;if(!isTwoPlayerMode||selectedGameMode===_0x46bb94(0x21d))return![];stopSound(_0x46bb94(0x1c0));if(currentPlayer===0x1){player1Score=score,player1IsDualShipActive=isDualShipActive,player1MaxLevelReached=Math[_0x46bb94(0x26c)](player1MaxLevelReached,level);if(player1Score>highScore)highScore=player1Score;}else{player2Score=score,player2IsDualShipActive=isDualShipActive,player2MaxLevelReached=Math[_0x46bb94(0x26c)](player2MaxLevelReached,level);if(player2Score>highScore)highScore=player2Score;}const _0x2497c6=currentPlayer===0x1?0x2:0x1,_0x57ec9f=_0x2497c6===0x1?player1Lives:player2Lives;if(_0x57ec9f<=0x0){const _0x1da036=currentPlayer===0x1?player1Lives:player2Lives;return _0x1da036<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x2497c6,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function firePlayerBullet(_0x3e8e5e=null,_0x24e248=![]){const _0x547508=_0x236fd5,_0x5526e5=Date['now'](),_0x4f066a=isTwoPlayerMode&&selectedGameMode===_0x547508(0x21d)&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x5526e5<coopPlayersReadyStartTime+0x1f40;if(_0x4f066a)return![];let _0x5d54ed=![],_0x3acf50=null,_0x410fc8=![],_0x12f82c=0x0,_0x1a8618=_0x4692ab=>{},_0x54e7f2=_0x125606=>{},_0x371e92=![],_0x207f30=()=>![],_0x5b2fcb=_0x156325=>{},_0x58a955=_0x3e8e5e;const _0x4a6bdf=!isPaused&&isInGameState&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!showReadyMessage&&!isCsCompletionDelayActive&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x547508(0x21d)&&(_0x3e8e5e==='player1'&&isPlayer1ShowingGameOverMessage||_0x3e8e5e===_0x547508(0x17c)&&isPlayer2ShowingGameOverMessage));if(!_0x4a6bdf)return![];if(_0x58a955){let _0x2b2774=![];if(_0x58a955==='ai'&&isShipCaptured)_0x2b2774=!![];else{if(_0x58a955==='ai_p2'&&isTwoPlayerMode&&selectedGameMode===_0x547508(0x1ea)&&isShipCaptured)_0x2b2774=!![];else{if(_0x58a955===_0x547508(0x280)&&isCoopAIDemoActive&&isPlayer1ShipCaptured)_0x2b2774=!![];else{if(_0x58a955===_0x547508(0x17c)&&isCoopAIDemoActive&&isPlayer2ShipCaptured)_0x2b2774=!![];else{if(_0x58a955===_0x547508(0x167)&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x547508(0x149)&&isPlayer2ShipCaptured)_0x2b2774=!![];}}}}if(_0x2b2774)return![];}if(isTwoPlayerMode&&selectedGameMode===_0x547508(0x21d)){if(_0x3e8e5e==='player1'&&ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!player1NeedsRespawnAfterCapture)(!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer1ShipCaptured)&&(_0x3acf50=ship1,_0x410fc8=player1IsDualShipActive,_0x12f82c=player1LastShotTime,_0x1a8618=_0x4d34d0=>{player1LastShotTime=_0x4d34d0;},_0x54e7f2=_0x4cca8e=>{player1ShotsFired+=_0x4cca8e;},_0x371e92=selectedFiringMode===_0x547508(0x228),_0x207f30=()=>p1JustFiredSingle,_0x5b2fcb=_0x3c1feb=>{p1JustFiredSingle=_0x3c1feb;},_0x5d54ed=!![]);else _0x3e8e5e===_0x547508(0x17c)&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!player2NeedsRespawnAfterCapture&&((!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer2ShipCaptured)&&(_0x3acf50=ship2,_0x410fc8=player2IsDualShipActive,_0x12f82c=player2LastShotTime,_0x1a8618=_0x20dee0=>{player2LastShotTime=_0x20dee0;},_0x54e7f2=_0x203dd9=>{player2ShotsFired+=_0x203dd9;},isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x547508(0x149)?_0x371e92=![]:(_0x371e92=selectedFiringMode===_0x547508(0x228),_0x207f30=()=>p2JustFiredSingle,_0x5b2fcb=_0x36a3df=>{p2JustFiredSingle=_0x36a3df;}),_0x5d54ed=!![]));}else{if(ship&&playerLives>0x0&&!isShipCaptured){_0x3acf50=ship,_0x410fc8=isDualShipActive;if(isTwoPlayerMode&&selectedGameMode==='normal'){if(currentPlayer===0x1){_0x12f82c=player1LastShotTime,_0x1a8618=_0x2d65bb=>{player1LastShotTime=_0x2d65bb;},_0x54e7f2=_0x23b768=>{player1ShotsFired+=_0x23b768;},_0x371e92=selectedFiringMode===_0x547508(0x228),_0x207f30=()=>p1JustFiredSingle,_0x5b2fcb=_0x4993ca=>{p1JustFiredSingle=_0x4993ca;};if(!_0x58a955)_0x58a955=_0x547508(0x280);}else{_0x12f82c=player2LastShotTime,_0x1a8618=_0x335d61=>{player2LastShotTime=_0x335d61;},_0x54e7f2=_0x94beb0=>{player2ShotsFired+=_0x94beb0;};if(isPlayerTwoAI){_0x371e92=![];if(!_0x58a955)_0x58a955='ai_p2';}else{_0x371e92=selectedFiringMode===_0x547508(0x228);connectedGamepadIndexP2===null&&connectedGamepadIndex!==null?(_0x207f30=()=>p1JustFiredSingle,_0x5b2fcb=_0x478191=>{p1JustFiredSingle=_0x478191;}):(_0x207f30=()=>p2JustFiredSingle,_0x5b2fcb=_0x42e047=>{p2JustFiredSingle=_0x42e047;});if(!_0x58a955)_0x58a955=_0x547508(0x17c);}}}else{_0x12f82c=player1LastShotTime,_0x1a8618=_0x3e64c3=>{player1LastShotTime=_0x3e64c3;},_0x54e7f2=_0x3eb0b4=>{player1ShotsFired+=_0x3eb0b4;},_0x371e92=selectedFiringMode===_0x547508(0x228),_0x207f30=()=>p1JustFiredSingle,_0x5b2fcb=_0x453a7e=>{p1JustFiredSingle=_0x453a7e;};if(!_0x58a955)_0x58a955=_0x547508(0x280);}_0x5d54ed=!![];}}_0x3e8e5e===null&&!isManualControl&&!isCoopAIDemoActive&&ship&&playerLives>0x0&&!isShipCaptured&&!isShowingCaptureMessage&&(_0x3acf50=ship,_0x410fc8=isDualShipActive,_0x12f82c=aiLastShotTime,_0x1a8618=_0x1dbc73=>{aiLastShotTime=_0x1dbc73;},_0x54e7f2=_0x3cd5e4=>{player1ShotsFired+=_0x3cd5e4;},_0x371e92=![],_0x5d54ed=!![],_0x58a955='ai');if(!_0x5d54ed||!_0x3acf50)return![];const _0x2cfa9b=isManualControl||isPlayerTwoAI&&selectedGameMode===_0x547508(0x1ea)&&currentPlayer===0x2||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x547508(0x149)&&_0x3e8e5e===_0x547508(0x280);if(_0x371e92){if(_0x24e248){if(_0x5526e5-_0x12f82c<SHOOT_COOLDOWN)return![];}else{let _0xd5b877=![];if(_0x58a955==='player1'||!isTwoPlayerMode&&_0x58a955==='player1')_0xd5b877=keyboardP1ShootDown||connectedGamepadIndex!==null&&navigator[_0x547508(0x24d)]()?.[connectedGamepadIndex]?.[_0x547508(0x266)][PS5_BUTTON_CROSS]?.['pressed'];else{if(_0x58a955===_0x547508(0x17c)&&!isPlayerTwoAI){if(connectedGamepadIndexP2!==null)_0xd5b877=keyboardP2ShootDown||connectedGamepadIndexP2!==null&&navigator[_0x547508(0x24d)]()?.[connectedGamepadIndexP2]?.['buttons'][PS5_BUTTON_CROSS]?.[_0x547508(0x151)];else connectedGamepadIndex!==null?_0xd5b877=keyboardP2ShootDown||connectedGamepadIndex!==null&&navigator[_0x547508(0x24d)]()?.[connectedGamepadIndex]?.['buttons'][PS5_BUTTON_CROSS]?.[_0x547508(0x151)]:_0xd5b877=keyboardP2ShootDown;}}if(_0x207f30()){if(_0xd5b877)return![];else _0x5b2fcb(![]);}if(_0x5526e5-_0x12f82c<SHOOT_COOLDOWN)return![];}}else{if(_0x5526e5-_0x12f82c<SHOOT_COOLDOWN)return![];}try{const _0x4f9e3f=_0x3acf50['y'];let _0xf536a=0x0;if(_0x410fc8){const _0x5d3073=_0x3acf50['x']+_0x3acf50[_0x547508(0x218)]/0x2,_0xe38a08=_0x3acf50['x']+DUAL_SHIP_OFFSET_X+_0x3acf50[_0x547508(0x218)]/0x2,_0x2a9498=_0x5d3073-PLAYER_BULLET_WIDTH/0x2,_0x386b0d=_0xe38a08-PLAYER_BULLET_WIDTH/0x2;bullets['push']({'x':_0x2a9498,'y':_0x4f9e3f,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x58a955}),bullets['push']({'x':_0x386b0d,'y':_0x4f9e3f,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x58a955}),_0xf536a=0x2;}else{const _0x141d28=_0x3acf50['x']+_0x3acf50[_0x547508(0x218)]/0x2-PLAYER_BULLET_WIDTH/0x2;bullets['push']({'x':_0x141d28,'y':_0x4f9e3f,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x58a955}),_0xf536a=0x1;}if(_0x371e92&&!_0x24e248)_0x5b2fcb(!![]);return playSound('playerShootSound',![],0.4),_0x54e7f2(_0xf536a),_0x1a8618(_0x5526e5),!![];}catch(_0x480000){return console[_0x547508(0x1d2)](_0x547508(0x204),_0x480000),![];}}function handlePlayerInput(){const _0x525a65=_0x236fd5;try{const _0x19f36d=Date[_0x525a65(0x200)](),_0x58e658=isTwoPlayerMode&&selectedGameMode===_0x525a65(0x21d)&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x19f36d<coopPlayersReadyStartTime+0x1f40;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedGameMode===_0x525a65(0x1ea)&&currentPlayer===0x2&&!isManualControl){isCoopAIDemoActive&&(leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![]);return;}let _0x1c398a=isPaused||!isManualControl||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isTwoPlayerMode&&selectedGameMode===_0x525a65(0x21d)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage);if(_0x1c398a){keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![];return;}let _0x13d877=0x0;if(isTouchActiveGame&&gameCanvas&&gameCanvas[_0x525a65(0x218)]>0x0){const _0x29d539=gameCanvas['getBoundingClientRect'](),_0x32f14c=gameCanvas['width']/_0x29d539[_0x525a65(0x218)];_0x13d877=(touchCurrentX-_0x29d539['left'])*_0x32f14c;}let _0xe7fe4e=![],_0x37942b=![],_0x2a029d=![],_0xf61598=![],_0x12e70f=![],_0x43d633=![];if(connectedGamepadIndex!==null){const _0x13e021=navigator[_0x525a65(0x24d)]();if(_0x13e021?.[connectedGamepadIndex]){const _0x362632=_0x13e021[connectedGamepadIndex],_0x424641=processSingleController(_0x362632,previousGameButtonStates);_0xe7fe4e=_0x424641[_0x525a65(0x263)],_0x37942b=_0x424641[_0x525a65(0x1cb)],_0x2a029d=_0x424641[_0x525a65(0x1bc)],previousGameButtonStates=_0x424641[_0x525a65(0x150)][_0x525a65(0x169)]();if(_0x424641[_0x525a65(0x1cc)]&&!isShowingCaptureMessage){togglePause();return;}if(_0x424641[_0x525a65(0x1b3)]&&!isShowingCaptureMessage){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates[_0x525a65(0x22c)]>0x0)previousGameButtonStates=[];}}else{if(previousGameButtonStates[_0x525a65(0x22c)]>0x0)previousGameButtonStates=[];}if(!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x525a65(0x149))){if(isTwoPlayerMode&&connectedGamepadIndexP2!==null&&connectedGamepadIndexP2!==connectedGamepadIndex){const _0x397397=navigator[_0x525a65(0x24d)]();if(_0x397397?.[connectedGamepadIndexP2]){const _0x54d041=_0x397397[connectedGamepadIndexP2],_0x188d67=processSingleController(_0x54d041,previousGameButtonStatesP2);_0xf61598=_0x188d67[_0x525a65(0x263)],_0x12e70f=_0x188d67['right'],_0x43d633=_0x188d67[_0x525a65(0x1bc)],previousGameButtonStatesP2=_0x188d67[_0x525a65(0x150)][_0x525a65(0x169)]();}else{if(previousGameButtonStatesP2['length']>0x0)previousGameButtonStatesP2=[];}}else{if(previousGameButtonStatesP2[_0x525a65(0x22c)]>0x0)previousGameButtonStatesP2=[];}}const _0x6d5344=p1FireInputWasDown;p1FireInputWasDown=keyboardP1ShootDown||_0x2a029d;let _0x4da263=![];if(!(isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')){_0x4da263=p2FireInputWasDown;if(isTwoPlayerMode&&selectedGameMode===_0x525a65(0x1ea)&&currentPlayer===0x2&&!isPlayerTwoAI){if(connectedGamepadIndexP2!==null)p2FireInputWasDown=keyboardP2ShootDown||_0x43d633;else connectedGamepadIndex!==null?p2FireInputWasDown=keyboardP2ShootDown||_0x2a029d:p2FireInputWasDown=keyboardP2ShootDown;}else p2FireInputWasDown=keyboardP2ShootDown||_0x43d633;}else p2FireInputWasDown=![];if(selectedFiringMode===_0x525a65(0x228)){if(isTwoPlayerMode&&selectedGameMode===_0x525a65(0x21d)){if(!isTouchActiveGame){if(_0x6d5344&&!p1FireInputWasDown)p1JustFiredSingle=![];if(!isPlayerTwoAI&&_0x4da263&&!p2FireInputWasDown)p2JustFiredSingle=![];}}else{if(isTwoPlayerMode&&selectedGameMode==='normal'){if(!isTouchActiveGame){if(currentPlayer===0x1&&_0x6d5344&&!p1FireInputWasDown)p1JustFiredSingle=![];else{if(currentPlayer===0x2&&!isPlayerTwoAI){let _0x5af5bd=connectedGamepadIndexP2===null&&connectedGamepadIndex!==null,_0x1988bd=connectedGamepadIndexP2===null&&connectedGamepadIndex!==null;_0x5af5bd&&_0x1988bd?_0x6d5344&&!p1FireInputWasDown&&(p1JustFiredSingle=![]):_0x4da263&&!p2FireInputWasDown&&(p2JustFiredSingle=![]);}}}}else{if(!isTouchActiveGame){if(_0x6d5344&&!p1FireInputWasDown)p1JustFiredSingle=![];}}}}leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![];let _0xaa03b0=![];if(isTouchActiveGame&&gameCanvas){if(isTwoPlayerMode&&selectedGameMode===_0x525a65(0x21d)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x294185=ship1[_0x525a65(0x218)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x4a0c95=_0x13d877-_0x294185/0x2;_0x4a0c95=Math[_0x525a65(0x26c)](0x0,Math['min'](gameCanvas[_0x525a65(0x218)]-_0x294185,_0x4a0c95)),ship1['x']=_0x4a0c95,ship1[_0x525a65(0x16d)]=_0x4a0c95,_0xaa03b0=!![];}}else{if(ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1)){const _0x5eaee6=ship[_0x525a65(0x218)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x10eef3=_0x13d877-_0x5eaee6/0x2;_0x10eef3=Math[_0x525a65(0x26c)](0x0,Math['min'](gameCanvas[_0x525a65(0x218)]-_0x5eaee6,_0x10eef3)),ship['x']=_0x10eef3,ship[_0x525a65(0x16d)]=_0x10eef3,_0xaa03b0=!![];}}}if(isTwoPlayerMode&&selectedGameMode===_0x525a65(0x21d)){if(!_0xaa03b0){const _0x166ec1=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture;_0x166ec1&&(leftPressed=keyboardP1LeftDown||_0xe7fe4e,rightPressed=keyboardP1RightDown||_0x37942b);}if(!isPlayerTwoAI){const _0x52f922=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture;_0x52f922&&(p2LeftPressed=keyboardP2LeftDown||_0xf61598,p2RightPressed=keyboardP2RightDown||_0x12e70f);}}else{if(!_0xaa03b0){const _0xaf5caf=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;if(_0xaf5caf){if(currentPlayer===0x1||!isTwoPlayerMode)leftPressed=keyboardP1LeftDown||_0xe7fe4e,rightPressed=keyboardP1RightDown||_0x37942b;else{if(currentPlayer===0x2&&!isPlayerTwoAI&&selectedGameMode==='normal'){if(connectedGamepadIndexP2!==null)leftPressed=keyboardP2LeftDown||_0xf61598,rightPressed=keyboardP2RightDown||_0x12e70f;else connectedGamepadIndex!==null?(leftPressed=keyboardP2LeftDown||_0xe7fe4e,rightPressed=keyboardP2RightDown||_0x37942b):(leftPressed=keyboardP2LeftDown,rightPressed=keyboardP2RightDown);}}}}}if(isTwoPlayerMode&&selectedGameMode===_0x525a65(0x21d)){const _0x5d5546=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture&&!_0x58e658;if(_0x5d5546){shootPressed=isTouchActiveGame&&selectedFiringMode===_0x525a65(0x165)&&(!isPlayerTwoAI||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'&&_0x13d877<=gameCanvas['width']/0x2)||p1FireInputWasDown;if(isShowingCaptureMessage&&isPlayer1ShipCaptured)shootPressed=![];}if(!isPlayerTwoAI){const _0x1d7bc2=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture&&!_0x58e658;if(_0x1d7bc2){p2ShootPressed=isTouchActiveGame&&selectedFiringMode===_0x525a65(0x165)&&_0x13d877>gameCanvas['width']/0x2||p2FireInputWasDown;if(isShowingCaptureMessage&&isPlayer2ShipCaptured)p2ShootPressed=![];}}}else{const _0x28fe61=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!_0x58e658;if(_0x28fe61){let _0x614469=![];if(currentPlayer===0x1||!isTwoPlayerMode)_0x614469=p1FireInputWasDown;else currentPlayer===0x2&&!isPlayerTwoAI&&selectedGameMode===_0x525a65(0x1ea)&&(_0x614469=p2FireInputWasDown);shootPressed=isTouchActiveGame&&selectedFiringMode===_0x525a65(0x165)||_0x614469;if(isShowingCaptureMessage&&isShipCaptured)shootPressed=![];}}if(isManualControl){if(isTwoPlayerMode&&selectedGameMode===_0x525a65(0x21d))shootPressed&&firePlayerBullet(_0x525a65(0x280),![]),!isPlayerTwoAI&&p2ShootPressed&&firePlayerBullet(_0x525a65(0x17c),![]);else{if(shootPressed){if(isPlayerTwoAI&&selectedGameMode===_0x525a65(0x1ea)&&currentPlayer===0x2){}else firePlayerBullet(currentPlayer===0x1||!isTwoPlayerMode?_0x525a65(0x280):_0x525a65(0x17c),![]);}}}}catch(_0x549b4d){console[_0x525a65(0x1d2)](_0x525a65(0x182),_0x549b4d),leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![];}}let aiIsCurrentlyTargetingCaptureBoss=![];function aiControl(){const _0x3217ab=_0x236fd5;try{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3217ab(0x149))return;let _0x407552=null,_0x1cf976=null,_0x41434c=![],_0xc2d10b=![],_0x285ad0=![],_0x10829a=0x0,_0x485b0d='ai',_0x5ea02f=![],_0x32cdc8=![];if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2){if(!ship||playerLives<=0x0||isShipCaptured||isShowingPlayerGameOverMessage){if(ship)ship[_0x3217ab(0x16d)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x3217ab(0x218)]/0x2:0x0;return;}_0x407552=ship,_0x1cf976=smoothedShipX,_0x41434c=isDualShipActive,_0xc2d10b=isShipCaptured,_0x285ad0=isInvincible,_0x10829a=playerLives,_0x485b0d=_0x3217ab(0x167),_0x5ea02f=!![],_0x32cdc8=![];}else{if(!isManualControl&&!isPlayerTwoAI){if(playerLives<=0x0||!ship||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage){if(ship)ship[_0x3217ab(0x16d)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x3217ab(0x218)]/0x2:0x0;if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}if(isShipCaptured||isShowingCaptureMessage){if(ship)ship[_0x3217ab(0x16d)]=ship['x'];else{if(_0x407552)_0x407552['targetX']=_0x407552['x'];}if(smoothedShipX!==undefined&&ship)smoothedShipX=ship['x'];else{if(smoothedShipX!==undefined&&_0x407552)smoothedShipX=_0x407552['x'];}aiIsCurrentlyTargetingCaptureBoss=![];return;}_0x407552=ship,_0x1cf976=smoothedShipX,_0x41434c=isDualShipActive,_0xc2d10b=isShipCaptured,_0x285ad0=isInvincible,_0x10829a=playerLives,_0x32cdc8=playerLives>0x1&&!isDualShipActive;}else{if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}}if(_0x1cf976===undefined&&_0x407552)_0x1cf976=_0x407552['x'],(_0x5ea02f||!isManualControl&&!isPlayerTwoAI)&&(smoothedShipX=_0x1cf976);else{if(_0x1cf976===undefined&&!_0x407552){_0x1cf976=gameCanvas?gameCanvas[_0x3217ab(0x218)]/0x2:0x0;(_0x5ea02f||!isManualControl&&!isPlayerTwoAI)&&(smoothedShipX=_0x1cf976);if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}}const _0x56010e=Date['now'](),_0x318163=gameCanvas[_0x3217ab(0x218)],_0x5be3fa=gameCanvas[_0x3217ab(0x25d)];let _0x7f3c8b=_0x407552[_0x3217ab(0x218)];_0x41434c&&(_0x7f3c8b=DUAL_SHIP_OFFSET_X+_0x407552[_0x3217ab(0x218)]);const _0x1af298=_0x407552['x']+_0x7f3c8b/0x2,_0x50b264=_0x407552['y'],_0x49d75b=_0x318163/0x2,_0x20db93=_0x49d75b-_0x7f3c8b/0x2,_0x5a80a5=showReadyMessage||showCSClearMessage||showCsHitsMessage||showPerfectMessage||showCsBonusScoreMessage||showExtraLifeMessage||isCsCompletionDelayActive||isShowingCaptureMessage||isShowingIntro;let _0x2e67a6=_0x1cf976,_0x4b3e26=![],_0x1feb6c=![],_0x3e93c1=_0x1cf976,_0x13dfe5=null,_0x7c4461=![];aiNeedsStabilization&&!_0x5a80a5&&(aiStabilizationEndTime=_0x56010e+AI_STABILIZATION_DURATION,aiNeedsStabilization=![],_0x1cf976=_0x407552['x'],(_0x5ea02f||!isManualControl&&!isPlayerTwoAI)&&(smoothedShipX=_0x1cf976));const _0x34d643=enemies[_0x3217ab(0x157)](_0x1e271f=>_0x1e271f['id']===capturingBossId&&_0x1e271f[_0x3217ab(0x14f)]===ENEMY3_TYPE);if(!isManualControl&&!isPlayerTwoAI&&_0x32cdc8&&captureBeamActive&&_0x34d643&&_0x34d643['state']===_0x3217ab(0x14c)&&!_0xc2d10b&&!isWaitingForRespawn){aiIsCurrentlyTargetingCaptureBoss=!![],_0x4b3e26=![],_0x13dfe5=null;const _0x40641e=_0x34d643['x']+_0x34d643[_0x3217ab(0x218)]/0x2;_0x56010e-(_0x34d643[_0x3217ab(0x216)]||0x0)>=AI_CAPTURE_BEAM_APPROACH_DELAY_MS?(_0x2e67a6=_0x40641e-_0x7f3c8b/0x2,_0x7c4461=!![]):(_0x2e67a6=_0x20db93,_0x7c4461=![]);}else aiIsCurrentlyTargetingCaptureBoss&&(!captureBeamActive||!_0x34d643||_0x34d643[_0x3217ab(0x17f)]!==_0x3217ab(0x14c))&&(aiIsCurrentlyTargetingCaptureBoss=![]);if(_0x56010e<aiStabilizationEndTime&&!_0x5a80a5&&!aiIsCurrentlyTargetingCaptureBoss)_0x2e67a6=_0x20db93;else{if(!_0x5a80a5&&!aiIsCurrentlyTargetingCaptureBoss){_0x1feb6c=![],_0x3e93c1=_0x1cf976;if(!_0x285ad0){let _0x303791=[];const _0x2383f0=isChallengingStage?FINAL_DODGE_LOOKAHEAD*0.9:isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_LOOKAHEAD*1.1:FINAL_DODGE_LOOKAHEAD*1.2,_0x4f1f1b=isChallengingStage?FINAL_DODGE_BUFFER_BASE*0.9:isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_BUFFER*1.1:FINAL_DODGE_BUFFER_BASE*1.2,_0xee002c={'x':_0x407552['x']-_0x4f1f1b,'y':_0x407552['y']-_0x2383f0,'width':_0x7f3c8b+_0x4f1f1b*0x2,'height':_0x2383f0+_0x407552[_0x3217ab(0x25d)]};for(const _0x51caf6 of enemyBullets){if(_0x51caf6&&_0x51caf6['y']+_0x51caf6[_0x3217ab(0x25d)]>_0x407552['y']-_0x407552[_0x3217ab(0x25d)]*0x2&&_0x51caf6['y']<_0x5be3fa){const _0x3959b9={'x':_0x51caf6['x'],'y':_0x51caf6['y'],'width':_0x51caf6['width'],'height':_0x51caf6[_0x3217ab(0x25d)]};checkCollision(_0xee002c,_0x3959b9)&&_0x303791[_0x3217ab(0x20a)](_0x51caf6);}}if(_0x303791[_0x3217ab(0x22c)]>0x0){_0x1feb6c=!![];let _0xd3fd28=_0x1cf976,_0x7695ad=-Infinity;for(let _0x3d42b6=-0x1;_0x3d42b6<=0x1;_0x3d42b6+=0x2){const _0x51f626=_0x7f3c8b*(0x2+Math[_0x3217ab(0x237)]()*0.5)+(_0x303791[_0x3217ab(0x22c)]>0x1?_0x7f3c8b*0.5:0x0);let _0x348521=_0x1cf976+_0x3d42b6*_0x51f626;_0x348521=Math[_0x3217ab(0x26c)](AI_ANTI_CORNER_BUFFER,Math[_0x3217ab(0x156)](_0x318163-_0x7f3c8b-AI_ANTI_CORNER_BUFFER,_0x348521));let _0x1ea75a=0x0;const _0x2dae6f={'x':_0x348521-_0x4f1f1b/0x2,'y':_0x407552['y']-_0x2383f0,'width':_0x7f3c8b+_0x4f1f1b,'height':_0x2383f0+_0x407552[_0x3217ab(0x25d)]};for(const _0x34f05c of _0x303791){checkCollision(_0x2dae6f,{'x':_0x34f05c['x'],'y':_0x34f05c['y'],'width':_0x34f05c[_0x3217ab(0x218)],'height':_0x34f05c['height']})&&_0x1ea75a++;}let _0x12b4e7=-_0x1ea75a;if(Math[_0x3217ab(0x271)](_0x348521-_0x1cf976)<_0x7f3c8b*0.5)_0x12b4e7-=0xa;_0x12b4e7>_0x7695ad&&(_0x7695ad=_0x12b4e7,_0xd3fd28=_0x348521);}_0x3e93c1=_0xd3fd28;}if(!_0x1feb6c){const _0x4245eb=AI_COLLISION_LOOKAHEAD*1.5,_0x11896b=FINAL_DODGE_BUFFER_BASE*1.5;for(const _0xaff9dd of enemies){if(_0xaff9dd&&(_0xaff9dd['state']===_0x3217ab(0x152)||_0xaff9dd[_0x3217ab(0x17f)]===_0x3217ab(0x242)||_0xaff9dd[_0x3217ab(0x17f)]==='following_entrance_path'||_0xaff9dd[_0x3217ab(0x17f)]===_0x3217ab(0x15c))&&_0xaff9dd['y']+_0xaff9dd['height']>_0x407552['y']-_0x4245eb/0x2&&_0xaff9dd['y']<_0x407552['y']+_0x407552[_0x3217ab(0x25d)]){const _0xe7b709={'x':_0x407552['x']-_0x11896b,'y':_0x407552['y']-_0x4245eb,'width':_0x7f3c8b+_0x11896b*0x2,'height':_0x4245eb+_0x407552['height']},_0x24513f={'x':_0xaff9dd['x'],'y':_0xaff9dd['y'],'width':_0xaff9dd[_0x3217ab(0x218)],'height':_0xaff9dd['height']};if(checkCollision(_0xe7b709,_0x24513f)){_0x1feb6c=!![];const _0x18fe10=_0xaff9dd['x']+_0xaff9dd[_0x3217ab(0x218)]/0x2,_0x358366=_0x1af298<_0x18fe10?-0x1:0x1,_0x4b3ab0=_0x7f3c8b*(2.2+Math['random']()*0.6);_0x3e93c1=_0x1cf976+_0x358366*_0x4b3ab0;break;}}}}}if(_0x1feb6c)_0x2e67a6=Math['max'](AI_ANTI_CORNER_BUFFER,Math[_0x3217ab(0x156)](_0x318163-_0x7f3c8b-AI_ANTI_CORNER_BUFFER,_0x3e93c1)),_0x13dfe5=null,_0x4b3e26=![];else{if(fallingShips[_0x3217ab(0x22c)]>0x0&&!_0xc2d10b&&!isWaitingForRespawn&&!_0x41434c){let _0x209448=null,_0x209209=Infinity;for(const _0xeb8d99 of fallingShips){if(_0xeb8d99&&!_0xeb8d99['landed']){const _0x1b204d=Math[_0x3217ab(0x271)](_0xeb8d99['x']+_0xeb8d99[_0x3217ab(0x218)]/0x2-_0x1af298)+Math['abs'](_0xeb8d99['y']-_0x407552['y']);_0x1b204d<_0x209209&&(_0x209209=_0x1b204d,_0x209448=_0xeb8d99);}}_0x209448&&(_0x2e67a6=_0x209448['x']+_0x209448[_0x3217ab(0x218)]/0x2-_0x7f3c8b/0x2,_0x4b3e26=![],_0x13dfe5=null);}else{if(!_0x7c4461){_0x13dfe5=null;let _0x337a1c=-Infinity;for(const _0x197a6d of enemies){if(!_0x197a6d)continue;if(aiIsCurrentlyTargetingCaptureBoss&&_0x197a6d['id']===capturingBossId)continue;let _0x53b50e=0x0;const _0x206241=_0x197a6d['x']+_0x197a6d[_0x3217ab(0x218)]/0x2,_0x45e485=_0x206241-_0x1af298,_0x53226f=_0x50b264-(_0x197a6d['y']+_0x197a6d[_0x3217ab(0x25d)]);if(_0x53226f<0x0&&_0x197a6d['state']!==_0x3217ab(0x152)&&_0x197a6d[_0x3217ab(0x17f)]!==_0x3217ab(0x242)&&_0x197a6d[_0x3217ab(0x17f)]!==_0x3217ab(0x15c))continue;_0x53b50e=(_0x5be3fa-_0x197a6d['y'])*0x2-Math[_0x3217ab(0x271)](_0x45e485)*0x3-_0x53226f;if(_0x197a6d[_0x3217ab(0x17f)]===_0x3217ab(0x152)||_0x197a6d['state']===_0x3217ab(0x242))_0x53b50e+=0xbb8;if(_0x197a6d[_0x3217ab(0x14f)]===ENEMY3_TYPE&&!_0x197a6d[_0x3217ab(0x269)])_0x53b50e+=0x7d0;if(_0x197a6d[_0x3217ab(0x14f)]===ENEMY3_TYPE&&_0x197a6d[_0x3217ab(0x269)])_0x53b50e+=0xfa0;if(_0x197a6d[_0x3217ab(0x14f)]===ENEMY3_TYPE&&_0x197a6d[_0x3217ab(0x16e)])_0x53b50e+=0x1388;_0x53b50e>_0x337a1c&&(_0x337a1c=_0x53b50e,_0x13dfe5=_0x197a6d);}if(_0x13dfe5){const _0x50321f=_0x13dfe5['x']+_0x13dfe5[_0x3217ab(0x218)]/0x2;_0x2e67a6=_0x50321f-_0x7f3c8b/0x2;const _0x5b3212=1.8;let _0x392945;if(isChallengingStage)_0x392945=_0x7f3c8b*2.5;else _0x13dfe5[_0x3217ab(0x17f)]===_0x3217ab(0x22a)||_0x13dfe5[_0x3217ab(0x17f)]===_0x3217ab(0x27d)?_0x392945=_0x7f3c8b*(GRID_SHOOT_ALIGNMENT_FACTOR*_0x5b3212):_0x392945=_0x7f3c8b*(FINAL_SHOOT_ALIGNMENT_THRESHOLD*_0x5b3212);const _0x1bdd43=Math[_0x3217ab(0x271)](_0x1af298-_0x50321f);if(_0x1bdd43<_0x392945){let _0x19be82=![];if(aiIsCurrentlyTargetingCaptureBoss&&_0x13dfe5['id']===capturingBossId)_0x19be82=!![];else _0x32cdc8&&_0x13dfe5[_0x3217ab(0x14f)]===ENEMY3_TYPE&&!_0x13dfe5[_0x3217ab(0x16e)]&&!captureAttemptMadeThisLevel&&!isFullGridWave&&(_0x13dfe5['state']===_0x3217ab(0x22a)||_0x13dfe5[_0x3217ab(0x17f)]===_0x3217ab(0x27d)||_0x13dfe5['state']===_0x3217ab(0x242)||_0x13dfe5[_0x3217ab(0x17f)]===_0x3217ab(0x14c)&&_0x13dfe5['id']===capturingBossId)&&(_0x19be82=!![]);!_0x19be82&&(_0x4b3e26=!![]);}}else _0x2e67a6=_0x20db93,_0x4b3e26=![];}}}}else aiIsCurrentlyTargetingCaptureBoss&&_0x5a80a5&&(_0x4b3e26=![],_0x13dfe5=null);}if(_0x407552){_0x1cf976+=(_0x2e67a6-_0x1cf976)*AI_SMOOTHING_FACTOR_MOVE,_0x407552[_0x3217ab(0x16d)]=_0x1cf976;if(_0x5ea02f)smoothedShipX=_0x1cf976;else!isManualControl&&!isPlayerTwoAI&&(smoothedShipX=_0x1cf976);}aiIsCurrentlyTargetingCaptureBoss&&(_0x4b3e26=![]);if(_0x4b3e26&&!_0x1feb6c&&!_0x7c4461&&!_0x5a80a5){let _0x38c0a1=![];_0x5ea02f?_0x38c0a1=!![]:_0x56010e>=aiCanShootTime&&(_0x38c0a1=!![]),_0x38c0a1&&!isShowingIntro&&(firePlayerBullet(_0x485b0d,![])&&(!_0x5ea02f&&(aiCanShootTime=_0x56010e+SHOOT_COOLDOWN)));}}catch(_0x1625dd){console[_0x3217ab(0x1d2)](_0x3217ab(0x20f),_0x1625dd,_0x1625dd['stack']);ship&&(ship[_0x3217ab(0x16d)]=ship['x']);aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas['width']/0x2:0x0;if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];}}function aiControlCoop(){const _0x3b58b7=_0x236fd5;if(!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3b58b7(0x149))||isPaused||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0){if(ship1)ship1[_0x3b58b7(0x16d)]=ship1['x'];if(ship2)ship2[_0x3b58b7(0x16d)]=ship2['x'];return;}const _0x411c3c=Date['now'](),_0x1ed4bb=gameCanvas[_0x3b58b7(0x218)],_0x5278bc=isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP',_0x3fa035=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture,_0x5f480c=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture,_0x1abd1b=_0x55a9e5=>{const _0x4ae3a4=_0x3b58b7,_0x188897=_0x55a9e5==='p1'&&isPlayer1ShowingGameOverMessage||_0x55a9e5==='p2'&&isPlayer2ShowingGameOverMessage;return _0x188897||showReadyMessage||isCsCompletionDelayActive||isShowingIntro&&!(level===0x1&&coopPlayersReadyStartTime>0x0&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4ae3a4(0x149)));};let _0x24a357=!![],_0x2a0407=!![];if(coopAICaptureDiveAnticipationActive&&_0x411c3c<coopAICaptureDiveAnticipationEndTime){if(!_0x5278bc)_0x24a357=![];_0x2a0407=![];}else coopAICaptureDiveAnticipationActive&&(coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0);if(_0x3fa035&&ship1&&!_0x5278bc){if(smoothedShip1X===undefined)smoothedShip1X=ship1['x'];const _0x12ff27=_0x1abd1b('p1');let {desiredTargetX:_0x3a9bf3,shouldTryShoot:_0x464891,targetEnemyForAI:_0x4a1381}=calculateAIDesiredState(ship1,smoothedShip1X,player1IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer1Invincible,isPlayer1ShipCaptured,isPlayer1WaitingForRespawn,_0x411c3c,_0x1ed4bb,_0x12ff27,'p1');aiShip1TargetEnemy=_0x4a1381,smoothedShip1X+=(_0x3a9bf3-smoothedShip1X)*AI_SMOOTHING_FACTOR_MOVE,ship1['targetX']=smoothedShip1X;const _0x37d55a=_0x4a1381&&_0x4a1381['type']===ENEMY3_TYPE&&_0x4a1381[_0x3b58b7(0x16e)]&&_0x4a1381['id']===capturedBossIdWithMessage&&isPlayer2ShipCaptured;if(_0x464891&&_0x24a357&&!(isShowingCaptureMessage&&isPlayer1ShipCaptured)){if(_0x37d55a||_0x411c3c>=aiShip1CanShootTime){fireCoopAIBullet(ship1,player1IsDualShipActive,_0x3b58b7(0x280));if(!_0x37d55a)aiShip1CanShootTime=_0x411c3c+SHOOT_COOLDOWN;else aiShip1CanShootTime=_0x411c3c+SHOOT_COOLDOWN/0x2;}}}if(_0x5f480c&&ship2){if(smoothedShip2X===undefined)smoothedShip2X=ship2['x'];const _0x44ab81=_0x1abd1b('p2');let {desiredTargetX:_0xc2b3ba,shouldTryShoot:_0x39324c,targetEnemyForAI:_0x178d14}=calculateAIDesiredState(ship2,smoothedShip2X,player2IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer2Invincible,isPlayer2ShipCaptured,isPlayer2WaitingForRespawn,_0x411c3c,_0x1ed4bb,_0x44ab81,'p2');aiShip2TargetEnemy=_0x178d14,smoothedShip2X+=(_0xc2b3ba-smoothedShip2X)*AI_SMOOTHING_FACTOR_MOVE,ship2[_0x3b58b7(0x16d)]=smoothedShip2X;const _0x379085=_0x178d14&&_0x178d14[_0x3b58b7(0x14f)]===ENEMY3_TYPE&&_0x178d14[_0x3b58b7(0x16e)]&&_0x178d14['id']===capturedBossIdWithMessage&&isPlayer1ShipCaptured;if(_0x39324c&&_0x2a0407&&!(isShowingCaptureMessage&&isPlayer2ShipCaptured)){if(_0x379085||_0x411c3c>=aiShip2CanShootTime){fireCoopAIBullet(ship2,player2IsDualShipActive,isCoopAIDemoActive?_0x3b58b7(0x17c):_0x3b58b7(0x167));if(!_0x379085)aiShip2CanShootTime=_0x411c3c+SHOOT_COOLDOWN;else aiShip2CanShootTime=_0x411c3c+SHOOT_COOLDOWN/0x2;}}}}function fireCoopAIBullet(_0x3baaa0,_0x364b69,_0x52b597){const _0x39b0d9=_0x236fd5;if(!_0x3baaa0)return![];const _0x1d12e7=Date[_0x39b0d9(0x200)]();let _0x1cfd56=![];if(_0x52b597===_0x39b0d9(0x280)&&isPlayer1ShowingGameOverMessage)_0x1cfd56=!![];if((_0x52b597===_0x39b0d9(0x17c)||_0x52b597===_0x39b0d9(0x167))&&isPlayer2ShowingGameOverMessage)_0x1cfd56=!![];let _0x32da68=isPaused||!isInGameState||gameOverSequenceStartTime>0x0||_0x1cfd56;if(_0x32da68)return![];if(_0x52b597==='player1'&&isPlayer1ShipCaptured)return![];if((_0x52b597===_0x39b0d9(0x17c)||_0x52b597===_0x39b0d9(0x167))&&isPlayer2ShipCaptured)return![];try{const _0x4d4147=_0x3baaa0['y'];let _0x984b70=0x0;const _0x4ed97b=_0x52b597;if(_0x364b69){const _0x54f08d=_0x3baaa0['x']+_0x3baaa0[_0x39b0d9(0x218)]/0x2,_0x59bff5=_0x3baaa0['x']+DUAL_SHIP_OFFSET_X+_0x3baaa0[_0x39b0d9(0x218)]/0x2,_0x446d20=_0x54f08d-PLAYER_BULLET_WIDTH/0x2,_0x343fd3=_0x59bff5-PLAYER_BULLET_WIDTH/0x2;bullets['push']({'x':_0x446d20,'y':_0x4d4147,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x4ed97b}),bullets[_0x39b0d9(0x20a)]({'x':_0x343fd3,'y':_0x4d4147,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x4ed97b}),_0x984b70=0x2;}else{const _0x1911f9=_0x3baaa0['x']+_0x3baaa0['width']/0x2-PLAYER_BULLET_WIDTH/0x2;bullets['push']({'x':_0x1911f9,'y':_0x4d4147,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x4ed97b}),_0x984b70=0x1;}playSound(_0x39b0d9(0x19d),![],0.4);if(_0x52b597==='player1')player1ShotsFired+=_0x984b70,player1LastShotTime=_0x1d12e7,aiShip1LastShotTime=_0x1d12e7;else(_0x52b597==='player2'||_0x52b597===_0x39b0d9(0x167))&&(player2ShotsFired+=_0x984b70,player2LastShotTime=_0x1d12e7,aiShip2LastShotTime=_0x1d12e7);return!![];}catch(_0x379921){return console[_0x39b0d9(0x1d2)](_0x39b0d9(0x1af)+_0x52b597+':',_0x379921),![];}}function calculateAIDesiredState(_0x2bdd4f,_0x27e79d,_0x57cac3,_0x39efbc,_0x5a66ff,_0x18cccc,_0x5a8fe0,_0x127387,_0x8d027a,_0x4c1003,_0x2366d2,_0x4799bf,_0x4acc08){const _0x3a4890=_0x236fd5;let _0x4f819d=_0x27e79d,_0x1a114b=![],_0x15f74f=null,_0x554ead=![],_0x39ca9c=![],_0x2cd4f1=![],_0x45b2f8=![];const _0x35354b=gameCanvas[_0x3a4890(0x25d)],_0x228a81=_0x2bdd4f['width']+(_0x57cac3?DUAL_SHIP_OFFSET_X:0x0),_0x319998=_0x2bdd4f['x']+_0x228a81/0x2,_0x560035=_0x2bdd4f['y'],_0x7209d7=_0x4acc08==='p1'?player1Lives:_0x4acc08==='ai_p2'||_0x4acc08==='p2'?player2Lives:0x0,_0x112fd7=_0x7209d7>0x1&&!_0x57cac3;let _0x47376b=_0x2366d2/0x2;const _0x5700c0=isShowingIntro||isShowingCoopPlayersReady,_0x1f43c3=isCoopAIDemoActive&&_0x5700c0&&!(isChallengingStage&&isEntrancePhaseActive),_0x4fbdbc=isCoopAIDemoActive&&(_0x4acc08==='p1'&&player1Lives>0x0&&player2Lives<=0x0||(_0x4acc08==='p2'||_0x4acc08===_0x3a4890(0x167))&&player2Lives>0x0&&player1Lives<=0x0);if(_0x1f43c3&&_0x4fbdbc)_0x47376b=_0x2366d2/0x2;else{if(_0x4acc08==='p1')_0x47376b=_0x2366d2*0.25+Math['sin'](_0x4c1003/(AI_WIGGLE_PERIOD*1.1))*(AI_WIGGLE_AMPLITUDE*0.8);else(_0x4acc08==='p2'||_0x4acc08==='ai_p2')&&(_0x47376b=_0x2366d2*0.75+Math['cos'](_0x4c1003/(AI_WIGGLE_PERIOD*0.9))*(AI_WIGGLE_AMPLITUDE*0.8));}let _0x3797a1=_0x47376b-_0x228a81/0x2;if(_0x4799bf||_0x127387||_0x8d027a||_0x4acc08==='p1'&&player1NeedsRespawnAfterCapture||(_0x4acc08==='p2'||_0x4acc08===_0x3a4890(0x167))&&player2NeedsRespawnAfterCapture)return _0x1f43c3&&_0x4fbdbc?_0x4f819d=_0x3797a1:_0x4f819d=_0x3797a1,(_0x127387||_0x8d027a||_0x4acc08==='p1'&&player1NeedsRespawnAfterCapture||(_0x4acc08==='p2'||_0x4acc08===_0x3a4890(0x167))&&player2NeedsRespawnAfterCapture)&&(_0x4f819d=_0x2bdd4f['x']),{'desiredTargetX':_0x4f819d,'shouldTryShoot':![],'targetEnemyForAI':null};const _0x5b1c5c=_0x4acc08==='p1'?'p2':'p1',_0x4215b=_0x5b1c5c==='p1'&&isPlayer1ShipCaptured||_0x5b1c5c==='p2'&&isPlayer2ShipCaptured,_0xa328db=_0x5b1c5c==='p1'&&isPlayer1ShowingGameOverMessage||_0x5b1c5c==='p2'&&isPlayer2ShowingGameOverMessage;let _0x1a5a02=null,_0x122f02=!![];if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(_0x4215b&&!_0xa328db&&capturedBossIdWithMessage){const _0x395d4a=_0x5b1c5c==='p1'?coopPartner1CapturedTime:coopPartner2CapturedTime;_0x395d4a>0x0&&_0x4c1003-_0x395d4a<COOP_AI_SAVE_PARTNER_DELAY_MS&&(_0x122f02=![]),_0x1a5a02=_0x39efbc['find'](_0x2b4fc9=>_0x2b4fc9['id']===capturedBossIdWithMessage&&_0x2b4fc9['type']===ENEMY3_TYPE&&_0x2b4fc9[_0x3a4890(0x16e)]);}}if(_0x1a5a02&&!_0x57cac3&&_0x122f02){_0x2cd4f1=!![],_0x15f74f=_0x1a5a02;const _0x862aec=_0x1a5a02['x']+_0x1a5a02[_0x3a4890(0x218)]/0x2;_0x4f819d=_0x862aec-_0x228a81/0x2,_0x1a114b=!![],_0x554ead=![];if(!_0x5a8fe0){let _0x5955b4=[];const _0x49cc90=FINAL_DODGE_LOOKAHEAD*0.4,_0x56713a=FINAL_DODGE_BUFFER_BASE*0.3,_0xacf5b5={'x':Math[_0x3a4890(0x156)](_0x319998,_0x862aec)-_0x56713a,'y':_0x2bdd4f['y']-_0x49cc90,'width':Math[_0x3a4890(0x271)](_0x319998-_0x862aec)+_0x228a81+_0x56713a*0x2,'height':_0x49cc90+_0x2bdd4f[_0x3a4890(0x25d)]};for(const _0x55c958 of _0x5a66ff){if(_0x55c958&&_0x55c958['y']+_0x55c958['height']>_0x2bdd4f['y']-_0x2bdd4f[_0x3a4890(0x25d)]&&_0x55c958['y']<_0x35354b){const _0x4a76a4={'x':_0x55c958['x'],'y':_0x55c958['y'],'width':_0x55c958[_0x3a4890(0x218)],'height':_0x55c958[_0x3a4890(0x25d)]};checkCollision(_0xacf5b5,_0x4a76a4)&&_0x5955b4[_0x3a4890(0x20a)](_0x55c958);}}if(_0x5955b4[_0x3a4890(0x22c)]>0x0){_0x554ead=!![];const _0x2d7f2b=_0x27e79d<_0x2366d2/0x2?-0x1:0x1;_0x4f819d=_0x27e79d+_0x2d7f2b*(_0x228a81*0.6),_0x1a114b=![];}}return _0x4f819d=Math[_0x3a4890(0x26c)](AI_EDGE_BUFFER,Math['min'](_0x2366d2-_0x228a81-AI_EDGE_BUFFER,_0x4f819d)),{'desiredTargetX':_0x4f819d,'shouldTryShoot':_0x1a114b,'targetEnemyForAI':_0x15f74f};}if(!_0x5a8fe0){let _0x2a7092=[];const _0x49a1cf=FINAL_DODGE_LOOKAHEAD*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3a4890(0x149)?1.6:0.8),_0x57cb57=FINAL_DODGE_BUFFER_BASE*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3a4890(0x149)?1.7:0.8),_0x5a60ac={'x':_0x2bdd4f['x']-_0x57cb57,'y':_0x2bdd4f['y']-_0x49a1cf,'width':_0x228a81+_0x57cb57*0x2,'height':_0x49a1cf+_0x2bdd4f[_0x3a4890(0x25d)]};for(const _0x34b5a7 of _0x5a66ff){if(_0x34b5a7&&_0x34b5a7['y']+_0x34b5a7[_0x3a4890(0x25d)]>_0x2bdd4f['y']-_0x2bdd4f[_0x3a4890(0x25d)]*1.5&&_0x34b5a7['y']<_0x35354b){const _0x23ad61={'x':_0x34b5a7['x'],'y':_0x34b5a7['y'],'width':_0x34b5a7[_0x3a4890(0x218)],'height':_0x34b5a7['height']};checkCollision(_0x5a60ac,_0x23ad61)&&_0x2a7092[_0x3a4890(0x20a)](_0x34b5a7);}}if(_0x2a7092[_0x3a4890(0x22c)]>0x0){_0x554ead=!![];let _0x18ad6b=_0x27e79d;const _0x1c9753=_0x228a81*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3a4890(0x149)?0x3:0x2);let _0x504e40=0x0,_0x229c86=0x0,_0xca23d2=0x0;const _0x181d3e=_0x2bdd4f['x']+_0x228a81/0x2;for(const _0x5b673f of _0x2a7092){if(_0x5b673f['x']<_0x181d3e-_0x228a81*0.5)_0x229c86++;else{if(_0x5b673f['x']>_0x181d3e+_0x228a81*0.5)_0xca23d2++;else _0x504e40++;}}if(_0x229c86<=_0xca23d2&&_0x229c86<=_0x504e40)_0x18ad6b=_0x27e79d-_0x1c9753-Math[_0x3a4890(0x237)]()*_0x228a81*0.4;else{if(_0xca23d2<=_0x229c86&&_0xca23d2<=_0x504e40)_0x18ad6b=_0x27e79d+_0x1c9753+Math[_0x3a4890(0x237)]()*_0x228a81*0.4;else{if(_0x27e79d<_0x47376b)_0x18ad6b=_0x47376b+_0x1c9753+Math[_0x3a4890(0x237)]()*_0x228a81*0.7;else _0x18ad6b=_0x47376b-_0x1c9753-Math['random']()*_0x228a81*0.7;}}_0x4f819d=_0x18ad6b;}if(!_0x554ead){const _0x1d3727=AI_COLLISION_LOOKAHEAD*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'?0x1:0.75),_0x447d53=AI_COLLISION_BUFFER*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'?0x1:0.8);for(const _0x589d3e of _0x39efbc){if(!_0x589d3e)continue;if(!_0x122f02&&_0x1a5a02&&_0x589d3e['id']===_0x1a5a02['id'])continue;if((_0x589d3e[_0x3a4890(0x17f)]==='attacking'||_0x589d3e['state']===_0x3a4890(0x242))&&_0x589d3e['y']+_0x589d3e[_0x3a4890(0x25d)]>_0x560035-_0x1d3727&&_0x589d3e['y']<_0x560035+_0x2bdd4f[_0x3a4890(0x25d)]*1.5){const _0x564e37={'x':_0x2bdd4f['x']-_0x447d53,'y':_0x2bdd4f['y']-_0x1d3727,'width':_0x228a81+_0x447d53*0x2,'height':_0x1d3727+_0x2bdd4f['height']},_0x41d091={'x':_0x589d3e['x'],'y':_0x589d3e['y'],'width':_0x589d3e[_0x3a4890(0x218)],'height':_0x589d3e[_0x3a4890(0x25d)]};if(checkCollision(_0x564e37,_0x41d091)){_0x554ead=!![],_0x15f74f=null,_0x1a114b=![];const _0x2c64e1=_0x589d3e['x']+_0x589d3e['width']/0x2;_0x4f819d=_0x27e79d+(_0x319998<_0x2c64e1?-0x1:0x1)*(_0x228a81*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'?2.2:1.9));break;}}}}}if(!_0x554ead&&_0x112fd7&&captureBeamActive&&capturingBossId&&!_0x127387){if(aiPlayerActivelySeekingCaptureById===null||aiPlayerActivelySeekingCaptureById===_0x4acc08){const _0x2948db=_0x39efbc[_0x3a4890(0x157)](_0xe55fb7=>_0xe55fb7['id']===capturingBossId);if(_0x2948db&&_0x2948db['state']===_0x3a4890(0x14c)){aiPlayerActivelySeekingCaptureById===null&&(aiPlayerActivelySeekingCaptureById=_0x4acc08);if(aiPlayerActivelySeekingCaptureById===_0x4acc08){if(_0x4c1003-(_0x2948db[_0x3a4890(0x216)]||0x0)>=AI_CAPTURE_BEAM_APPROACH_DELAY_MS){_0x45b2f8=!![];const _0x172a98=_0x2948db['x']+(_0x2948db['type']===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH)/0x2;_0x4f819d=_0x172a98-_0x228a81/0x2,_0x1a114b=![],_0x15f74f=null;}else _0x4f819d=_0x3797a1,_0x1a114b=![],_0x15f74f=null;}}else aiPlayerActivelySeekingCaptureById===_0x4acc08&&(aiPlayerActivelySeekingCaptureById=null);}}else aiPlayerActivelySeekingCaptureById===_0x4acc08&&!(_0x112fd7&&captureBeamActive&&capturingBossId&&!_0x127387)&&(aiPlayerActivelySeekingCaptureById=null);if(!_0x554ead&&!_0x45b2f8&&!_0x57cac3){const _0x579fa8=_0x18cccc[_0x3a4890(0x157)](_0x37c579=>_0x37c579['targetPlayerId']===_0x4acc08&&!_0x37c579['landed']);_0x579fa8&&(_0x39ca9c=!![],_0x4f819d=_0x579fa8['x']+_0x579fa8[_0x3a4890(0x218)]/0x2-_0x228a81/0x2,_0x1a114b=![],_0x15f74f=null);}if(!_0x554ead&&!_0x45b2f8&&!_0x39ca9c&&!_0x2cd4f1){let _0x30c38d=-Infinity,_0x28328b=![],_0x3d777e=null;for(const _0x2c000f of _0x39efbc){if(!_0x2c000f)continue;if(!_0x122f02&&_0x1a5a02&&_0x2c000f['id']===_0x1a5a02['id'])continue;if(aiIsCurrentlyTargetingCaptureBoss&&!isCoopAIDemoActive&&!isPlayerTwoAI&&_0x2c000f['id']===capturingBossId||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3a4890(0x149))&&aiPlayerActivelySeekingCaptureById===_0x4acc08&&_0x2c000f['id']===capturingBossId)continue;let _0x53314c=![];if(_0x2c000f[_0x3a4890(0x14f)]===ENEMY3_TYPE&&_0x2c000f['hasCapturedShip']&&_0x7209d7<=0x1){const _0x52d730=(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3a4890(0x149))&&_0x2c000f['id']===capturedBossIdWithMessage&&_0x4215b;!_0x52d730&&(_0x53314c=!![]);}let _0x3e9eb4=0x0;const _0x473933=_0x2c000f['x']+_0x2c000f[_0x3a4890(0x218)]/0x2,_0xd62235=_0x473933-_0x319998,_0x4197c5=_0x560035-(_0x2c000f['y']+_0x2c000f[_0x3a4890(0x25d)]);if(_0x4197c5<0x0&&_0x2c000f['state']!==_0x3a4890(0x152)&&_0x2c000f[_0x3a4890(0x17f)]!==_0x3a4890(0x242)&&_0x2c000f['state']!==_0x3a4890(0x15c))continue;let _0x2235f3=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3a4890(0x149)){if(_0x4acc08==='p1'&&_0x473933<_0x2366d2/0x2)_0x2235f3=0x1388;else{if((_0x4acc08==='p2'||_0x4acc08===_0x3a4890(0x167))&&_0x473933>=_0x2366d2/0x2)_0x2235f3=0x1388;}}_0x3e9eb4=_0x2235f3+(_0x35354b-_0x2c000f['y'])*0x2-Math[_0x3a4890(0x271)](_0xd62235)*0x3-_0x4197c5;if(_0x2c000f['state']==='attacking'||_0x2c000f[_0x3a4890(0x17f)]===_0x3a4890(0x242))_0x3e9eb4+=0xbb8;if(_0x2c000f[_0x3a4890(0x14f)]===ENEMY3_TYPE&&!_0x2c000f[_0x3a4890(0x269)])_0x3e9eb4+=0x7d0;if(_0x2c000f[_0x3a4890(0x14f)]===ENEMY3_TYPE&&_0x2c000f['isDamaged'])_0x3e9eb4+=0xfa0;_0x2c000f['type']===ENEMY3_TYPE&&_0x2c000f[_0x3a4890(0x16e)]&&(!_0x53314c?_0x3e9eb4+=0x1388:_0x3e9eb4-=0x2710);if(_0x3e9eb4>_0x30c38d){_0x30c38d=_0x3e9eb4,_0x3d777e=_0x2c000f;let _0x166a26=![];if(_0x3d777e[_0x3a4890(0x14f)]===ENEMY3_TYPE&&!_0x3d777e['hasCapturedShip']&&!isFullGridWave){_0x112fd7&&!captureAttemptMadeThisLevel&&(_0x3d777e[_0x3a4890(0x17f)]==='in_grid'||_0x3d777e[_0x3a4890(0x17f)]===_0x3a4890(0x27d)||_0x3d777e['state']===_0x3a4890(0x242)||_0x3d777e['state']===_0x3a4890(0x14c))&&(_0x166a26=!![]);if(_0x57cac3){const _0x806f31=_0x4acc08==='p1'?'p2':'p1';let _0x29332f=![];_0x806f31==='p1'?ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture&&!player1IsDualShipActive&&(_0x29332f=!![]):ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture&&!player2IsDualShipActive&&(_0x29332f=!![]),_0x29332f&&(_0x166a26=!![]);}}if(_0x53314c&&_0x3d777e===_0x2c000f)Math[_0x3a4890(0x271)](_0x319998-(_0x3d777e['x']+_0x3d777e[_0x3a4890(0x218)]/0x2))<_0x228a81*1.1?_0x28328b=!![]:_0x28328b=![];else{if(_0x166a26)_0x28328b=![];else Math[_0x3a4890(0x271)](_0x319998-(_0x3d777e['x']+_0x3d777e[_0x3a4890(0x218)]/0x2))<_0x228a81*0.9?_0x28328b=!![]:_0x28328b=![];}}}_0x15f74f=_0x3d777e,_0x1a114b=_0x28328b;if(_0x15f74f){let _0x8269d6=![];if(_0x15f74f[_0x3a4890(0x14f)]===ENEMY3_TYPE&&_0x15f74f[_0x3a4890(0x16e)]&&_0x7209d7<=0x1){const _0x3785ff=(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&_0x15f74f['id']===capturedBossIdWithMessage&&_0x4215b;!_0x3785ff&&(_0x8269d6=!![]);}if(_0x8269d6)_0x4f819d=_0x3797a1;else{const _0x42d446=_0x15f74f['x']+_0x15f74f[_0x3a4890(0x218)]/0x2;_0x4f819d=_0x42d446-_0x228a81/0x2;}}else _0x4f819d=_0x3797a1,_0x1a114b=![];}return(aiIsCurrentlyTargetingCaptureBoss&&!isCoopAIDemoActive&&!isPlayerTwoAI||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3a4890(0x149))&&aiPlayerActivelySeekingCaptureById===_0x4acc08&&_0x45b2f8)&&(_0x1a114b=![],_0x15f74f=null),_0x4f819d=Math[_0x3a4890(0x26c)](AI_EDGE_BUFFER,Math[_0x3a4890(0x156)](_0x2366d2-_0x228a81-AI_EDGE_BUFFER,_0x4f819d)),{'desiredTargetX':_0x4f819d,'shouldTryShoot':_0x1a114b,'targetEnemyForAI':_0x15f74f};}function findAndDetachEnemy(){const _0xce8dcb=_0x236fd5;try{let _0x4c1b5f=![];isTwoPlayerMode&&selectedGameMode===_0xce8dcb(0x21d)?_0x4c1b5f=isPlayer1ShipCaptured||isPlayer2ShipCaptured:_0x4c1b5f=isShipCaptured;if(!isFullGridWave&&_0x4c1b5f){const _0x3c40f2=enemies[_0xce8dcb(0x157)](_0x416f17=>_0x416f17&&_0x416f17[_0xce8dcb(0x14f)]===ENEMY3_TYPE&&_0x416f17['hasCapturedShip']&&_0x416f17['state']===_0xce8dcb(0x22a));if(_0x3c40f2){_0x3c40f2[_0xce8dcb(0x170)]=!![],_0x3c40f2['attackType']=_0xce8dcb(0x1ea);const _0x2d24df=new Set([_0x3c40f2['id']]);return resetJustReturnedFlags(_0x2d24df),[_0x3c40f2];}}if(isEntrancePhaseActive)return null;let _0x7b5a97=enemies[_0xce8dcb(0x1eb)](_0x108930=>_0x108930&&_0x108930['state']===_0xce8dcb(0x22a)&&!_0x108930[_0xce8dcb(0x170)]);if(_0x7b5a97[_0xce8dcb(0x22c)]===0x0){_0x7b5a97=enemies[_0xce8dcb(0x1eb)](_0x2f667e=>_0x2f667e&&_0x2f667e[_0xce8dcb(0x17f)]===_0xce8dcb(0x22a));if(_0x7b5a97['length']===0x0)return null;}if(_0x7b5a97[_0xce8dcb(0x22c)]===0x0)return null;_0x7b5a97[_0xce8dcb(0x257)]((_0x15a890,_0x31c29b)=>(_0x31c29b['gridRow']||0x0)-(_0x15a890[_0xce8dcb(0x265)]||0x0));const _0x1f06d1=_0x7b5a97[_0xce8dcb(0x22c)]<=0x3;let _0x19ef9a=[];const _0x18b64b=_0xce8dcb(0x1ea);gridJustCompleted&&(gridJustCompleted=![]);let _0x4a4d3b=![];if(level>0x1&&!_0x1f06d1&&_0x7b5a97['length']>=0x3){const _0x211f89=_0x7b5a97[_0xce8dcb(0x1eb)](_0x35006e=>_0x35006e['type']===ENEMY3_TYPE&&!_0x35006e[_0xce8dcb(0x16e)]);for(const _0x5d2ae5 of _0x211f89){const _0x2905fc=_0x7b5a97['find'](_0x5d8590=>_0x5d8590[_0xce8dcb(0x14f)]===ENEMY2_TYPE&&_0x5d8590[_0xce8dcb(0x265)]===_0x5d2ae5['gridRow']&&_0x5d8590[_0xce8dcb(0x23b)]===_0x5d2ae5['gridCol']-0x1),_0x2a6eb9=_0x7b5a97[_0xce8dcb(0x157)](_0x1cdde8=>_0x1cdde8[_0xce8dcb(0x14f)]===ENEMY2_TYPE&&_0x1cdde8[_0xce8dcb(0x265)]===_0x5d2ae5[_0xce8dcb(0x265)]&&_0x1cdde8[_0xce8dcb(0x23b)]===_0x5d2ae5[_0xce8dcb(0x23b)]+0x1);if(_0x2905fc&&_0x2a6eb9){_0x19ef9a=[_0x5d2ae5,_0x2905fc,_0x2a6eb9],_0x4a4d3b=!![];break;}}}if(!_0x4a4d3b&&!_0x1f06d1){const _0x59d06d=_0x7b5a97[_0xce8dcb(0x1eb)](_0x29822a=>_0x29822a[_0xce8dcb(0x14f)]===ENEMY1_TYPE),_0x2bff41=scaleValue(level,BASE_BEE_GROUP_ATTACK_PROBABILITY,MAX_BEE_GROUP_ATTACK_PROBABILITY)*1.2;if(_0x59d06d[_0xce8dcb(0x22c)]>=0x2&&Math[_0xce8dcb(0x237)]()<_0x2bff41){const _0x38e120=scaleValue(level,BASE_BEE_TRIPLE_ATTACK_PROBABILITY,MAX_BEE_TRIPLE_ATTACK_PROBABILITY)*1.1,_0x516760=_0x59d06d['length']>=0x3&&Math[_0xce8dcb(0x237)]()<_0x38e120?0x3:0x2;let _0x59023a=![];_0x59d06d[_0xce8dcb(0x257)](()=>Math[_0xce8dcb(0x237)]()-0.5);for(let _0x41a10c=0x0;_0x41a10c<_0x59d06d[_0xce8dcb(0x22c)];_0x41a10c++){const _0xf2305c=_0x59d06d[_0x41a10c];let _0x2a09c3=[_0xf2305c];const _0x1b32a3=_0x59d06d['filter'](_0x4f12b3=>_0x4f12b3['id']!==_0xf2305c['id']&&_0x4f12b3[_0xce8dcb(0x265)]===_0xf2305c[_0xce8dcb(0x265)]);_0x1b32a3[_0xce8dcb(0x257)]((_0x52f7d8,_0x231746)=>Math[_0xce8dcb(0x271)](_0x52f7d8[_0xce8dcb(0x23b)]-_0xf2305c[_0xce8dcb(0x23b)])-Math[_0xce8dcb(0x271)](_0x231746[_0xce8dcb(0x23b)]-_0xf2305c[_0xce8dcb(0x23b)]));for(let _0x345611=0x0;_0x345611<_0x1b32a3[_0xce8dcb(0x22c)]&&_0x2a09c3['length']<_0x516760;_0x345611++){_0x2a09c3[_0xce8dcb(0x20a)](_0x1b32a3[_0x345611]);}if(_0x2a09c3[_0xce8dcb(0x22c)]===_0x516760){_0x19ef9a=_0x2a09c3,_0x4a4d3b=!![],_0x59023a=!![];break;}}!_0x59023a&&_0x59d06d['length']>=_0x516760&&(_0x19ef9a=_0x59d06d[_0xce8dcb(0x169)](0x0,_0x516760),_0x4a4d3b=!![]);}}if(!_0x4a4d3b&&!_0x1f06d1){const _0x56d017=_0x7b5a97[_0xce8dcb(0x1eb)](_0xfd9048=>_0xfd9048[_0xce8dcb(0x14f)]===ENEMY2_TYPE),_0xce6473=0.2;if(_0x56d017[_0xce8dcb(0x22c)]>=0x2&&Math[_0xce8dcb(0x237)]()<_0xce6473){const _0x29df97=0x2;let _0x56698f=![];_0x56d017[_0xce8dcb(0x257)](()=>Math[_0xce8dcb(0x237)]()-0.5);for(let _0x2da94a=0x0;_0x2da94a<_0x56d017[_0xce8dcb(0x22c)];_0x2da94a++){const _0x4a3663=_0x56d017[_0x2da94a];let _0x2e1a1a=[_0x4a3663];const _0x5a1215=_0x56d017[_0xce8dcb(0x1eb)](_0x192b0c=>_0x192b0c['id']!==_0x4a3663['id']&&_0x192b0c[_0xce8dcb(0x265)]===_0x4a3663[_0xce8dcb(0x265)]);_0x5a1215[_0xce8dcb(0x257)]((_0x489893,_0x531efe)=>Math[_0xce8dcb(0x271)](_0x489893[_0xce8dcb(0x23b)]-_0x4a3663[_0xce8dcb(0x23b)])-Math[_0xce8dcb(0x271)](_0x531efe[_0xce8dcb(0x23b)]-_0x4a3663['gridCol']));for(let _0x58ebe3=0x0;_0x58ebe3<_0x5a1215[_0xce8dcb(0x22c)]&&_0x2e1a1a[_0xce8dcb(0x22c)]<_0x29df97;_0x58ebe3++){_0x2e1a1a[_0xce8dcb(0x20a)](_0x5a1215[_0x58ebe3]);}if(_0x2e1a1a[_0xce8dcb(0x22c)]===_0x29df97){_0x19ef9a=_0x2e1a1a,_0x4a4d3b=!![],_0x56698f=!![];break;}}!_0x56698f&&_0x56d017[_0xce8dcb(0x22c)]>=_0x29df97&&(_0x19ef9a=_0x56d017[_0xce8dcb(0x169)](0x0,_0x29df97),_0x4a4d3b=!![]);}}if(!_0x4a4d3b&&_0x7b5a97[_0xce8dcb(0x22c)]>0x0){const _0x19f7dd=_0x7b5a97[0x0];_0x19ef9a[_0xce8dcb(0x20a)](_0x19f7dd);if(_0x7b5a97[_0xce8dcb(0x22c)]>0x1&&!_0x1f06d1&&Math['random']()<0.2){const _0x1183da=_0x7b5a97[_0xce8dcb(0x157)](_0x59d1f6=>_0x59d1f6['id']!==_0x19f7dd['id']&&_0x59d1f6[_0xce8dcb(0x265)]===_0x19f7dd[_0xce8dcb(0x265)]&&_0x59d1f6[_0xce8dcb(0x23b)]===_0x19f7dd[_0xce8dcb(0x23b)]-0x1),_0x32de43=_0x7b5a97['find'](_0x44ca39=>_0x44ca39['id']!==_0x19f7dd['id']&&_0x44ca39[_0xce8dcb(0x265)]===_0x19f7dd[_0xce8dcb(0x265)]&&_0x44ca39['gridCol']===_0x19f7dd[_0xce8dcb(0x23b)]+0x1),_0xdb854d=_0x1183da||_0x32de43;if(_0xdb854d){const _0x4bc0d4=_0x19f7dd[_0xce8dcb(0x14f)]===ENEMY3_TYPE&&_0xdb854d[_0xce8dcb(0x14f)]===ENEMY3_TYPE;!_0x4bc0d4&&_0x19ef9a[_0xce8dcb(0x20a)](_0xdb854d);}}_0x4a4d3b=!![];}if(_0x19ef9a[_0xce8dcb(0x22c)]>0x0){_0x19ef9a=_0x19ef9a['filter'](_0x17a27d=>_0x17a27d);if(_0x19ef9a[_0xce8dcb(0x22c)]===0x0)return null;_0x19ef9a['forEach'](_0x209c29=>{const _0x524b6a=_0xce8dcb;_0x209c29&&(_0x209c29['justReturned']=!![],_0x209c29[_0x524b6a(0x24e)]=_0x18b64b);});const _0x2f68ef=new Set(_0x19ef9a['map'](_0x1bed42=>_0x1bed42['id']));return resetJustReturnedFlags(_0x2f68ef),_0x19ef9a;}return null;}catch(_0x3c08c0){return console['error']('Error\x20in\x20findAndDetachEnemy:',_0x3c08c0),null;}}function triggerImmediateCaptureDive(){const _0x351636=_0x236fd5;try{let _0x2718f6=![],_0x75b231=null;if(isTwoPlayerMode&&selectedGameMode===_0x351636(0x21d)){const _0x49bdaf=ship1&&player1Lives>0x1&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn,_0x247fc5=ship2&&player2Lives>0x1&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn;if((_0x49bdaf||_0x247fc5)&&!captureAttemptMadeThisLevel){_0x2718f6=!![];if(_0x49bdaf&&_0x247fc5)_0x75b231=Math[_0x351636(0x237)]()<0.5?ship1:ship2;else{if(_0x49bdaf)_0x75b231=ship1;else _0x247fc5&&(_0x75b231=ship2);}}}else playerLives>0x1&&ship&&!isShipCaptured&&!isWaitingForRespawn&&!captureAttemptMadeThisLevel&&(_0x2718f6=!![],_0x75b231=ship);if(isChallengingStage||!_0x2718f6||!_0x75b231)return;const _0x575218=enemies['filter'](_0x35f77d=>_0x35f77d&&_0x35f77d[_0x351636(0x17f)]===_0x351636(0x22a)&&_0x35f77d[_0x351636(0x14f)]===ENEMY3_TYPE&&!_0x35f77d[_0x351636(0x16e)]&&!_0x35f77d[_0x351636(0x1a6)]);if(_0x575218['length']>0x0){const _0x6f8456=_0x575218[Math['floor'](Math[_0x351636(0x237)]()*_0x575218[_0x351636(0x22c)])],_0x2c9fed=Date[_0x351636(0x200)]();_0x6f8456[_0x351636(0x1a6)]=!![],_0x6f8456[_0x351636(0x170)]=!![];const _0x1fe273=new Set([_0x6f8456['id']]);resetJustReturnedFlags(_0x1fe273);const _0x13156c=_0x75b231['x']+_0x75b231[_0x351636(0x218)]/0x2,_0x6fc088=_0x13156c<gameCanvas[_0x351636(0x218)]/0x2?'right':_0x351636(0x263),_0x3910ee=_0x6fc088===_0x351636(0x263)?gameCanvas[_0x351636(0x218)]*CAPTURE_DIVE_SIDE_MARGIN_FACTOR:gameCanvas[_0x351636(0x218)]*(0x1-CAPTURE_DIVE_SIDE_MARGIN_FACTOR)-BOSS_WIDTH,_0x287c45=gameCanvas[_0x351636(0x25d)]*CAPTURE_DIVE_BOTTOM_HOVER_Y_FACTOR;_0x6f8456[_0x351636(0x17f)]='preparing_capture',_0x6f8456['targetX']=_0x3910ee,_0x6f8456[_0x351636(0x18f)]=_0x287c45,_0x6f8456[_0x351636(0x1f8)]=_0x2c9fed,playSound('bossGalagaDiveSound',![],0.2);const _0x183555=_0x6f8456['id'];_0x6f8456[_0x351636(0x15a)]=setTimeout(()=>{const _0x11403a=_0x351636,_0x4984a8=enemies[_0x11403a(0x157)](_0x1f5e3d=>_0x1f5e3d?.['id']===_0x183555);_0x4984a8&&_0x4984a8[_0x11403a(0x17f)]===_0x11403a(0x27d)&&(_0x4984a8['state']=_0x11403a(0x242));if(_0x4984a8)_0x4984a8[_0x11403a(0x15a)]=null;const _0x337f3c=enemySpawnTimeouts[_0x11403a(0x1ef)](_0x293257=>_0x293257===_0x6f8456[_0x11403a(0x15a)]);if(_0x337f3c>-0x1)enemySpawnTimeouts['splice'](_0x337f3c,0x1);},0x12c),enemySpawnTimeouts[_0x351636(0x20a)](_0x6f8456[_0x351636(0x15a)]);}}catch(_0x1919d3){console['error'](_0x351636(0x254),_0x1919d3);}}function resetJustReturnedFlags(_0x4ea9ce){const _0x215e68=_0x236fd5;enemies[_0x215e68(0x187)](_0xda4c3d=>{const _0x1e76aa=_0x215e68;let _0x3bdfcd=![];if(_0x4ea9ce instanceof Set)_0x3bdfcd=_0x4ea9ce['has'](_0xda4c3d['id']);else typeof _0x4ea9ce===_0x1e76aa(0x209)&&(_0x3bdfcd=_0xda4c3d['id']===_0x4ea9ce);_0xda4c3d&&_0xda4c3d[_0x1e76aa(0x17f)]===_0x1e76aa(0x22a)&&_0xda4c3d[_0x1e76aa(0x170)]&&!_0x3bdfcd&&(_0xda4c3d[_0x1e76aa(0x170)]=![]);});}function updateFloatingScores(){const _0x2f9eb0=_0x236fd5;if(isPaused)return;try{const _0xd5fabb=Date[_0x2f9eb0(0x200)]();floatingScores=floatingScores[_0x2f9eb0(0x1eb)](_0x553433=>_0xd5fabb-_0x553433['creationTime']<FLOATING_SCORE_DURATION+FLOATING_SCORE_APPEAR_DELAY);}catch(_0x46e4e8){console[_0x2f9eb0(0x1d2)]('Error\x20updating\x20floating\x20scores:',_0x46e4e8),floatingScores=[];}}function updateExplosions(){const _0xe01078=_0x236fd5;if(isPaused)return;try{const _0x23c37a=Date[_0xe01078(0x200)]();for(let _0x5f5bae=explosions[_0xe01078(0x22c)]-0x1;_0x5f5bae>=0x0;_0x5f5bae--){const _0x110c8e=explosions[_0x5f5bae],_0x101c8d=_0x23c37a-_0x110c8e[_0xe01078(0x26a)];if(_0x101c8d>_0x110c8e[_0xe01078(0x1dd)]){explosions[_0xe01078(0x172)](_0x5f5bae,0x1);continue;}_0x110c8e[_0xe01078(0x1fc)][_0xe01078(0x187)](_0x391e68=>{const _0x1471d9=_0xe01078;_0x391e68['x']+=_0x391e68['vx'],_0x391e68['y']+=_0x391e68['vy'],_0x391e68[_0x1471d9(0x198)]=Math[_0x1471d9(0x26c)](0x0,0x1-_0x101c8d/_0x110c8e['duration']*EXPLOSION_FADE_SPEED);});}}catch(_0x1fd076){console[_0xe01078(0x1d2)](_0xe01078(0x221),_0x1fd076),explosions=[];}}function moveEntities(_0x21d38f=null,_0x2076cf=null){const _0x590c6c=_0x236fd5;if(isPaused)return;try{const _0x27b280=Date['now'](),_0x4703c2=gameCanvas?gameCanvas[_0x590c6c(0x25d)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;if(gameCanvas&&!isTouchActiveGame){if(isManualControl){if(isTwoPlayerMode&&selectedGameMode===_0x590c6c(0x21d)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x1fe998=ship1[_0x590c6c(0x218)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(leftPressed)ship1['x']-=ship1['speed'];if(rightPressed)ship1['x']+=ship1['speed'];ship1['x']=Math['max'](0x0,Math[_0x590c6c(0x156)](gameCanvas[_0x590c6c(0x218)]-_0x1fe998,ship1['x'])),ship1['targetX']=ship1['x'];}if(!isPlayerTwoAI&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x3f8665=ship2[_0x590c6c(0x218)]+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(p2LeftPressed)ship2['x']-=ship2[_0x590c6c(0x1a8)];if(p2RightPressed)ship2['x']+=ship2[_0x590c6c(0x1a8)];ship2['x']=Math[_0x590c6c(0x26c)](0x0,Math[_0x590c6c(0x156)](gameCanvas[_0x590c6c(0x218)]-_0x3f8665,ship2['x'])),ship2[_0x590c6c(0x16d)]=ship2['x'];}}else{if(ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1){const _0x24aeab=ship[_0x590c6c(0x218)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x5addb6=![],_0x45c9f1=![];if(isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_NORMAL'&&currentPlayer===0x1&&isShowingIntro){if(_0x21d38f!==null)_0x5addb6=_0x21d38f;if(_0x2076cf!==null)_0x45c9f1=_0x2076cf;}if(_0x5addb6||leftPressed)ship['x']-=ship[_0x590c6c(0x1a8)];if(_0x45c9f1||rightPressed)ship['x']+=ship[_0x590c6c(0x1a8)];ship['x']=Math[_0x590c6c(0x26c)](0x0,Math['min'](gameCanvas[_0x590c6c(0x218)]-_0x24aeab,ship['x'])),ship['targetX']=ship['x'];}}}}}if(!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x590c6c(0x1ea)&&currentPlayer===0x2||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x590c6c(0x149)){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x590c6c(0x149)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x4302c6=ship1['targetX']-ship1['x'];let _0x154a98=ship1[_0x590c6c(0x1a8)]*AI_POSITION_MOVE_SPEED_FACTOR;if(Math['abs'](_0x4302c6)>AI_MOVEMENT_DEADZONE)ship1['x']+=Math['sign'](_0x4302c6)*Math['min'](Math[_0x590c6c(0x271)](_0x4302c6),_0x154a98);const _0x416d72=ship1['width']+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship1['x']=Math[_0x590c6c(0x26c)](0x0,Math[_0x590c6c(0x156)](gameCanvas[_0x590c6c(0x218)]-_0x416d72,ship1['x']));}if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x508eea=ship2[_0x590c6c(0x16d)]-ship2['x'];let _0x3d92a2=ship2[_0x590c6c(0x1a8)]*AI_POSITION_MOVE_SPEED_FACTOR;if(Math[_0x590c6c(0x271)](_0x508eea)>AI_MOVEMENT_DEADZONE)ship2['x']+=Math[_0x590c6c(0x1c4)](_0x508eea)*Math[_0x590c6c(0x156)](Math[_0x590c6c(0x271)](_0x508eea),_0x3d92a2);const _0x2548a5=ship2[_0x590c6c(0x218)]+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship2['x']=Math[_0x590c6c(0x26c)](0x0,Math[_0x590c6c(0x156)](gameCanvas[_0x590c6c(0x218)]-_0x2548a5,ship2['x']));}}else{if(ship){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){const _0xac65a8=ship[_0x590c6c(0x16d)]-ship['x'];let _0x118407=ship['speed']*AI_POSITION_MOVE_SPEED_FACTOR;isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2&&(_0x118407=ship['speed']*(AI_POSITION_MOVE_SPEED_FACTOR*1.15));Math[_0x590c6c(0x271)](_0xac65a8)>AI_MOVEMENT_DEADZONE&&(ship['x']+=Math[_0x590c6c(0x1c4)](_0xac65a8)*Math[_0x590c6c(0x156)](Math['abs'](_0xac65a8),_0x118407));const _0x2f76a2=ship['width']+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship['x']=Math['max'](0x0,Math[_0x590c6c(0x156)](gameCanvas[_0x590c6c(0x218)]-_0x2f76a2,ship['x']));}}}}if(isTwoPlayerMode&&selectedGameMode===_0x590c6c(0x21d)){if(isPlayer1WaitingForRespawn&&_0x27b280>=player1RespawnTime)isPlayer1WaitingForRespawn=![];if(isPlayer1Invincible&&_0x27b280>=player1InvincibilityEndTime)isPlayer1Invincible=![];if(isPlayer2WaitingForRespawn&&_0x27b280>=player2RespawnTime)isPlayer2WaitingForRespawn=![];if(isPlayer2Invincible&&_0x27b280>=player2InvincibilityEndTime)isPlayer2Invincible=![];}else{if(isWaitingForRespawn&&_0x27b280>=respawnTime)isWaitingForRespawn=![];if(isInvincible&&_0x27b280>=invincibilityEndTime)isInvincible=![];}for(let _0x4b347c=bullets['length']-0x1;_0x4b347c>=0x0;_0x4b347c--){const _0xb1018e=bullets[_0x4b347c];if(!_0xb1018e){bullets[_0x590c6c(0x172)](_0x4b347c,0x1);continue;}_0xb1018e['y']-=_0xb1018e[_0x590c6c(0x1a8)];if(_0xb1018e['y']+PLAYER_BULLET_HEIGHT<0x0){bullets[_0x590c6c(0x172)](_0x4b347c,0x1);continue;}for(let _0x3ac7cb=enemies[_0x590c6c(0x22c)]-0x1;_0x3ac7cb>=0x0;_0x3ac7cb--){const _0x5cddb1=enemies[_0x3ac7cb];if(!_0x5cddb1){enemies[_0x590c6c(0x172)](_0x3ac7cb,0x1);continue;}const _0xab11ad={'x':_0x5cddb1['x'],'y':_0x5cddb1['y'],'width':_0x5cddb1[_0x590c6c(0x14f)]===ENEMY3_TYPE?BOSS_WIDTH:_0x5cddb1[_0x590c6c(0x14f)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,'height':_0x5cddb1[_0x590c6c(0x14f)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x5cddb1[_0x590c6c(0x14f)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT},_0x24072a={'x':_0xb1018e['x'],'y':_0xb1018e['y'],'width':_0xb1018e[_0x590c6c(0x218)],'height':_0xb1018e[_0x590c6c(0x25d)]};if(checkCollision(_0x24072a,_0xab11ad)){bullets[_0x590c6c(0x172)](_0x4b347c,0x1);const _0x48d58f=handleEnemyHit(_0x5cddb1,_0xb1018e[_0x590c6c(0x22e)]);if(_0x48d58f[_0x590c6c(0x1ed)])enemies[_0x590c6c(0x172)](_0x3ac7cb,0x1);break;}}}for(let _0x47b1a9=enemyBullets[_0x590c6c(0x22c)]-0x1;_0x47b1a9>=0x0;_0x47b1a9--){const _0x3b8c47=enemyBullets[_0x47b1a9];if(!_0x3b8c47){enemyBullets['splice'](_0x47b1a9,0x1);continue;}_0x3b8c47['x']+=_0x3b8c47['vx'],_0x3b8c47['y']+=_0x3b8c47['vy'],(_0x3b8c47['y']>gameCanvas['height']||_0x3b8c47['y']<-ENEMY_BULLET_HEIGHT||_0x3b8c47['x']<-ENEMY_BULLET_WIDTH||_0x3b8c47['x']>gameCanvas[_0x590c6c(0x218)])&&enemyBullets['splice'](_0x47b1a9,0x1);}const _0x53de0c=gameCanvas?gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4,_0x54101b=0x2;for(let _0x5e3c56=fallingShips[_0x590c6c(0x22c)]-0x1;_0x5e3c56>=0x0;_0x5e3c56--){const _0x232e17=fallingShips[_0x5e3c56];if(!_0x232e17){fallingShips['splice'](_0x5e3c56,0x1);continue;}let _0x351781=![];if(!_0x232e17[_0x590c6c(0x220)]){_0x232e17['y']+=FALLING_SHIP_SPEED;if(_0x232e17['y']>=_0x53de0c){_0x232e17['y']=_0x53de0c,_0x232e17['landed']=!![],_0x232e17[_0x590c6c(0x175)]=_0x27b280;!_0x232e17['rotationCompleted']&&(_0x232e17[_0x590c6c(0x245)]=0x0,_0x232e17[_0x590c6c(0x1a7)]=!![]);let _0x3d9d2a=null,_0x2be759=()=>{},_0x59e7a3=![],_0x13ccfc=![],_0x3df690=![],_0x4f82c5=null;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x590c6c(0x149)){if(_0x232e17['targetPlayerId']==='player1'&&ship1&&player1Lives>0x0)_0x3d9d2a=ship1,_0x59e7a3=player1IsDualShipActive,_0x2be759=()=>{player1IsDualShipActive=!![];},_0x3df690=!![],_0x4f82c5=_0x590c6c(0x280);else(_0x232e17['targetPlayerId']==='player2'||_0x232e17['targetPlayerId']===_0x590c6c(0x167))&&ship2&&player2Lives>0x0&&(_0x3d9d2a=ship2,_0x59e7a3=player2IsDualShipActive,_0x2be759=()=>{player2IsDualShipActive=!![];},_0x3df690=!![],_0x4f82c5=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x590c6c(0x149)?_0x590c6c(0x167):_0x590c6c(0x17c));}else{if(isTwoPlayerMode&&selectedGameMode===_0x590c6c(0x21d)){if(_0x232e17[_0x590c6c(0x1ac)]===_0x590c6c(0x280)&&ship1&&player1Lives>0x0)_0x3d9d2a=ship1,_0x59e7a3=player1IsDualShipActive,_0x13ccfc=isPlayer1ShipCaptured,_0x2be759=()=>{player1IsDualShipActive=!![],isPlayer1ShipCaptured=![];},_0x3df690=!![],_0x4f82c5=_0x590c6c(0x280);else _0x232e17[_0x590c6c(0x1ac)]===_0x590c6c(0x17c)&&ship2&&player2Lives>0x0&&(_0x3d9d2a=ship2,_0x59e7a3=player2IsDualShipActive,_0x13ccfc=isPlayer2ShipCaptured,_0x2be759=()=>{player2IsDualShipActive=!![],isPlayer2ShipCaptured=![];},_0x3df690=!![],_0x4f82c5='player2');}else ship&&playerLives>0x0&&(_0x3d9d2a=ship,_0x59e7a3=isDualShipActive,_0x13ccfc=isShipCaptured,_0x2be759=()=>{const _0x2f0ad9=_0x590c6c;isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode===_0x2f0ad9(0x1ea)){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}isShipCaptured=![];},_0x3df690=!![],_0x4f82c5=isTwoPlayerMode&&selectedGameMode===_0x590c6c(0x1ea)?String(currentPlayer):_0x590c6c(0x280));}if(_0x3df690&&!_0x59e7a3){_0x2be759(),playSound(_0x590c6c(0x227),![],0.4);if(_0x13ccfc&&!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x590c6c(0x149))){if(_0x4f82c5===_0x590c6c(0x280)&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x27b280+INVINCIBILITY_DURATION_MS;else{if(_0x4f82c5===_0x590c6c(0x17c)&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x27b280+INVINCIBILITY_DURATION_MS;else ship&&(isInvincible=!![],invincibilityEndTime=_0x27b280+INVINCIBILITY_DURATION_MS);}}fallingShips['splice'](_0x5e3c56,0x1),_0x351781=!![];continue;}else{if(_0x3df690&&_0x59e7a3){fallingShips['splice'](_0x5e3c56,0x1),_0x351781=!![];continue;}else{fallingShips['splice'](_0x5e3c56,0x1),_0x351781=!![];continue;}}}}if(_0x351781)continue;const _0x48005f=_0x27b280-_0x232e17[_0x590c6c(0x26a)];if(_0x48005f<FALLING_SHIP_FADE_DURATION_MS)_0x232e17[_0x590c6c(0x1e2)]=Math[_0x590c6c(0x26c)](0x0,0x1-_0x48005f/FALLING_SHIP_FADE_DURATION_MS);else _0x232e17[_0x590c6c(0x1e2)]=0x0;if(_0x232e17[_0x590c6c(0x1a7)])_0x232e17[_0x590c6c(0x245)]=0x0;else{if(!_0x232e17['landed']&&typeof _0x232e17[_0x590c6c(0x222)]==='number'&&typeof FALLING_SHIP_ROTATION_SPEED===_0x590c6c(0x145)&&FALLING_SHIP_ROTATION_SPEED>0x0){const _0x207987=FALLING_SHIP_ROTATION_SPEED*_0x232e17['rotationDirection'];_0x232e17[_0x590c6c(0x245)]+=_0x207987,_0x232e17['totalRotation']+=Math['abs'](_0x207987);if(_0x232e17[_0x590c6c(0x262)]>=_0x54101b*0x2*Math['PI'])_0x232e17[_0x590c6c(0x245)]=0x0,_0x232e17[_0x590c6c(0x1a7)]=!![];else{if(_0x232e17[_0x590c6c(0x245)]>Math['PI']*0x2)_0x232e17[_0x590c6c(0x245)]-=Math['PI']*0x2;if(_0x232e17[_0x590c6c(0x245)]<0x0)_0x232e17[_0x590c6c(0x245)]+=Math['PI']*0x2;}}else _0x232e17[_0x590c6c(0x245)]=_0x232e17[_0x590c6c(0x245)]||0x0;}if(!_0x232e17[_0x590c6c(0x220)]){let _0x188325=null,_0x4e1ca7=()=>{},_0x34bb84=0x0,_0x40b738=![],_0x9cc0c8=![];if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x590c6c(0x149)){if(_0x232e17['targetPlayerId']===_0x590c6c(0x280)&&ship1&&player1Lives>0x0)_0x188325=ship1,_0x9cc0c8=player1IsDualShipActive,_0x4e1ca7=()=>{if(!_0x9cc0c8)player1IsDualShipActive=!![];},_0x34bb84=0x1;else(_0x232e17['targetPlayerId']===_0x590c6c(0x17c)||_0x232e17[_0x590c6c(0x1ac)]==='ai_p2')&&ship2&&player2Lives>0x0&&(_0x188325=ship2,_0x9cc0c8=player2IsDualShipActive,_0x4e1ca7=()=>{if(!_0x9cc0c8)player2IsDualShipActive=!![];},_0x34bb84=0x2);}else{if(isTwoPlayerMode&&selectedGameMode===_0x590c6c(0x21d)){if(_0x232e17[_0x590c6c(0x1ac)]===_0x590c6c(0x280)&&ship1&&player1Lives>0x0)_0x188325=ship1,_0x40b738=isPlayer1ShipCaptured,_0x9cc0c8=player1IsDualShipActive,_0x4e1ca7=()=>{if(!_0x9cc0c8)player1IsDualShipActive=!![];isPlayer1ShipCaptured=![];},_0x34bb84=0x1;else _0x232e17[_0x590c6c(0x1ac)]===_0x590c6c(0x17c)&&ship2&&player2Lives>0x0&&(_0x188325=ship2,_0x40b738=isPlayer2ShipCaptured,_0x9cc0c8=player2IsDualShipActive,_0x4e1ca7=()=>{if(!_0x9cc0c8)player2IsDualShipActive=!![];isPlayer2ShipCaptured=![];},_0x34bb84=0x2);}else ship&&playerLives>0x0&&(_0x188325=ship,_0x40b738=isShipCaptured,_0x9cc0c8=isDualShipActive,_0x4e1ca7=()=>{const _0x395d03=_0x590c6c;if(!_0x9cc0c8){isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode===_0x395d03(0x1ea)){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}}isShipCaptured=![];},_0x34bb84=isTwoPlayerMode&&selectedGameMode==='normal'?currentPlayer:0x1);}if(_0x188325&&!_0x9cc0c8){const _0x40d0a4={'x':_0x232e17['x'],'y':_0x232e17['y'],'width':_0x232e17['width'],'height':_0x232e17[_0x590c6c(0x25d)]},_0x362079={'x':_0x188325['x'],'y':_0x188325['y'],'width':_0x188325[_0x590c6c(0x218)],'height':_0x188325[_0x590c6c(0x25d)]};if(checkCollision(_0x40d0a4,_0x362079)){_0x4e1ca7();if(_0x40b738&&!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x590c6c(0x149))){playSound(_0x590c6c(0x227),![],0.4);if(_0x34bb84===0x1&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x27b280+INVINCIBILITY_DURATION_MS;else{if(_0x34bb84===0x2&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x27b280+INVINCIBILITY_DURATION_MS;else _0x34bb84!==0x0&&ship&&(isInvincible=!![],invincibilityEndTime=_0x27b280+INVINCIBILITY_DURATION_MS);}}else playSound(_0x590c6c(0x227),![],0.4);fallingShips['splice'](_0x5e3c56,0x1);continue;}}}if(!_0x232e17['landed']&&_0x232e17['y']>=gameCanvas['height'])fallingShips[_0x590c6c(0x172)](_0x5e3c56,0x1);}let _0x216d18=0x0;const _0x39c166=enemies[_0x590c6c(0x164)](_0x1837be=>_0x1837be?.[_0x590c6c(0x17f)]===_0x590c6c(0x22a)),_0x5e233b=!isChallengingStage&&!isWaveTransitioning&&_0x39c166&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x590c6c(0x21d)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage));if(_0x5e233b){!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(_0x590c6c(0x1a1),!![],0.1));const _0x212747=enemies[_0x590c6c(0x1eb)](_0x4b0d8c=>_0x4b0d8c?.['state']===_0x590c6c(0x22a));if(_0x212747['length']>0x0){let _0x2ef9af=gameCanvas[_0x590c6c(0x218)],_0x43e47d=0x0;_0x212747[_0x590c6c(0x187)](_0x5bb848=>{const _0x10826c=_0x590c6c;_0x5bb848&&(_0x2ef9af=Math['min'](_0x2ef9af,_0x5bb848['x']),_0x43e47d=Math[_0x10826c(0x26c)](_0x43e47d,_0x5bb848['x']+_0x5bb848['width']));});const _0x12e4bb=gameCanvas[_0x590c6c(0x218)]*GRID_HORIZONTAL_MARGIN_PERCENT,_0x466e4e=gameCanvas[_0x590c6c(0x218)]*(0x1-GRID_HORIZONTAL_MARGIN_PERCENT);if(gridMoveDirection===0x1&&_0x43e47d>=_0x466e4e)gridMoveDirection=-0x1;else{if(gridMoveDirection===-0x1&&_0x2ef9af<=_0x12e4bb)gridMoveDirection=0x1;}const _0x465307=scaleValue(level,BASE_GRID_MOVE_SPEED,MAX_GRID_MOVE_SPEED);_0x216d18=_0x465307*gridMoveDirection,currentGridOffsetX+=_0x216d18,enemies[_0x590c6c(0x187)](_0x4f908a=>{const _0x25df5a=_0x590c6c;if(_0x4f908a&&(_0x4f908a['state']===_0x25df5a(0x260)||_0x4f908a['state']===_0x25df5a(0x22a)||_0x4f908a[_0x25df5a(0x17f)]==='moving_to_grid'))try{const _0x3c097f=_0x4f908a['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x4f908a[_0x25df5a(0x14f)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x41d649,y:_0x99497e}=getCurrentGridSlotPosition(_0x4f908a[_0x25df5a(0x265)],_0x4f908a['gridCol'],_0x3c097f);_0x4f908a[_0x25df5a(0x214)]=_0x41d649,_0x4f908a[_0x25df5a(0x1b2)]=_0x99497e;}catch(_0x520304){console['error'](_0x25df5a(0x27a)+_0x4f908a?.['id']+_0x25df5a(0x21c)+_0x4f908a?.['state']+_0x25df5a(0x15f),_0x520304);}});}}else isGridSoundPlaying&&(stopSound(_0x590c6c(0x1a1)),isGridSoundPlaying=![]),_0x216d18=0x0;for(let _0xd4f448=enemies[_0x590c6c(0x22c)]-0x1;_0xd4f448>=0x0;_0xd4f448--){let _0x320bda=enemies[_0xd4f448];if(!_0x320bda){enemies[_0x590c6c(0x172)](_0xd4f448,0x1);continue;}const _0x41f3c8=_0x320bda['id'];if(_0x320bda['capturePrepareTimeout']&&_0x320bda[_0x590c6c(0x17f)]!==_0x590c6c(0x27d)){clearTimeout(_0x320bda[_0x590c6c(0x15a)]);const _0x246226=enemySpawnTimeouts[_0x590c6c(0x219)](_0x320bda[_0x590c6c(0x15a)]);if(_0x246226>-0x1)enemySpawnTimeouts[_0x590c6c(0x172)](_0x246226,0x1);_0x320bda[_0x590c6c(0x15a)]=null;}const _0x1cf3f8=_0x320bda[_0x590c6c(0x14f)]===ENEMY3_TYPE?BOSS_WIDTH:_0x320bda[_0x590c6c(0x14f)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0xcf54f8=_0x320bda['type']===ENEMY3_TYPE?BOSS_HEIGHT:_0x320bda[_0x590c6c(0x14f)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT;switch(_0x320bda[_0x590c6c(0x17f)]){case'following_bezier_path':{let _0x32e33d=CS_ENTRANCE_PATH_SPEED;const _0x291682=_0x320bda['pathSpeedMultiplier']||0x1;_0x32e33d*=_0x291682;if(!isChallengingStage){enemies[_0x590c6c(0x172)](_0xd4f448,0x1),_0x320bda=null;break;}let _0x4df75d=challengingStagePaths,_0x2f983f=_0x4df75d[_0x320bda['entrancePathId']];if(!_0x2f983f||_0x320bda[_0x590c6c(0x240)]>=_0x2f983f[_0x590c6c(0x22c)]){enemies[_0x590c6c(0x172)](_0xd4f448,0x1),_0x320bda=null;break;}const _0x21cb6a=_0x2f983f[_0x320bda['pathSegmentIndex']];if(!_0x21cb6a||!_0x21cb6a['p0']||!_0x21cb6a['p1']||!_0x21cb6a['p2']||!_0x21cb6a['p3']){console[_0x590c6c(0x1d2)]('Invalid\x20CS\x20Bezier\x20segment\x20'+_0x320bda[_0x590c6c(0x240)]+_0x590c6c(0x162)+_0x320bda[_0x590c6c(0x25c)]+_0x590c6c(0x1ae)+_0x320bda['id']),enemies['splice'](_0xd4f448,0x1),_0x320bda=null;break;}_0x320bda[_0x590c6c(0x1d7)]+=_0x32e33d;let _0x66a5c1,_0x24760e,_0x305cc2=_0x320bda['x'],_0x3bf6dc=_0x320bda['y'];if(_0x320bda[_0x590c6c(0x1d7)]>=0x1){_0x320bda[_0x590c6c(0x1d7)]=0x0,_0x320bda[_0x590c6c(0x240)]++;if(_0x320bda['pathSegmentIndex']>=_0x2f983f['length'])enemies[_0x590c6c(0x172)](_0xd4f448,0x1),_0x320bda=null;else{const _0x4a23ce=_0x2f983f[_0x320bda['pathSegmentIndex']];_0x4a23ce?.['p0']?(_0x66a5c1=_0x4a23ce['p0']['x'],_0x24760e=_0x4a23ce['p0']['y']):(console[_0x590c6c(0x1d2)](_0x590c6c(0x19a)+_0x320bda[_0x590c6c(0x240)]+_0x590c6c(0x162)+_0x320bda[_0x590c6c(0x25c)]+'.\x20Enemy\x20'+_0x41f3c8),enemies['splice'](_0xd4f448,0x1),_0x320bda=null);}}else try{_0x66a5c1=calculateBezierPoint(_0x320bda[_0x590c6c(0x1d7)],_0x21cb6a['p0']['x'],_0x21cb6a['p1']['x'],_0x21cb6a['p2']['x'],_0x21cb6a['p3']['x']),_0x24760e=calculateBezierPoint(_0x320bda[_0x590c6c(0x1d7)],_0x21cb6a['p0']['y'],_0x21cb6a['p1']['y'],_0x21cb6a['p2']['y'],_0x21cb6a['p3']['y']);}catch(_0x4a764d){console[_0x590c6c(0x1d2)](_0x590c6c(0x18d)+_0x41f3c8+':',_0x4a764d),enemies[_0x590c6c(0x172)](_0xd4f448,0x1),_0x320bda=null;}_0x320bda&&(isNaN(_0x66a5c1)||isNaN(_0x24760e)?(console[_0x590c6c(0x1d2)](_0x590c6c(0x1c7)+_0x41f3c8+'.\x20Removing.'),enemies[_0x590c6c(0x172)](_0xd4f448,0x1),_0x320bda=null):(_0x320bda[_0x590c6c(0x23f)]=_0x66a5c1-_0x305cc2,_0x320bda[_0x590c6c(0x20c)]=_0x24760e-_0x3bf6dc,_0x320bda['x']=_0x66a5c1,_0x320bda['y']=_0x24760e));break;}case _0x590c6c(0x278):{if(isChallengingStage){enemies[_0x590c6c(0x172)](_0xd4f448,0x1),_0x320bda=null;break;}let _0x48065c=normalWaveEntrancePaths,_0x512df5=_0x48065c[_0x320bda[_0x590c6c(0x25c)]],_0x52527c;_0x320bda[_0x590c6c(0x25c)]==='boss_loop_left'||_0x320bda['entrancePathId']===_0x590c6c(0x1df)?_0x52527c=BOSS_LOOP_ENTRANCE_PATH_SPEED:_0x52527c=NORMAL_ENTRANCE_PATH_SPEED;if(!_0x512df5){console[_0x590c6c(0x17a)](_0x590c6c(0x184)+_0x41f3c8+_0x590c6c(0x1f9)+_0x320bda[_0x590c6c(0x25c)]+_0x590c6c(0x238));try{_0x320bda[_0x590c6c(0x214)]=_0x320bda[_0x590c6c(0x214)]??gameCanvas[_0x590c6c(0x218)]/0x2,_0x320bda[_0x590c6c(0x1b2)]=_0x320bda[_0x590c6c(0x1b2)]??ENEMY_TOP_MARGIN;}catch(_0x5ab4ea){console[_0x590c6c(0x1d2)](_0x590c6c(0x192)+_0x41f3c8+'\x20after\x20missing\x20path',_0x5ab4ea),_0x320bda[_0x590c6c(0x214)]=gameCanvas[_0x590c6c(0x218)]/0x2,_0x320bda[_0x590c6c(0x1b2)]=ENEMY_TOP_MARGIN;}_0x320bda['state']=_0x590c6c(0x1ab),_0x320bda[_0x590c6c(0x1d7)]=0x0,_0x320bda[_0x590c6c(0x240)]=0x0,_0x320bda[_0x590c6c(0x23f)]=0x0,_0x320bda[_0x590c6c(0x20c)]=0x0;_0x320bda[_0x590c6c(0x279)]!==undefined&&squadronCompletionStatus[_0x320bda[_0x590c6c(0x279)]]&&squadronCompletionStatus[_0x320bda[_0x590c6c(0x279)]][_0x590c6c(0x19c)]++;break;}if(_0x320bda['pathSegmentIndex']>=_0x512df5[_0x590c6c(0x22c)]){console[_0x590c6c(0x17a)](_0x590c6c(0x184)+_0x41f3c8+_0x590c6c(0x1b7)+_0x320bda[_0x590c6c(0x240)]+_0x590c6c(0x224)+_0x320bda[_0x590c6c(0x25c)]+_0x590c6c(0x238));try{_0x320bda[_0x590c6c(0x214)]=_0x320bda[_0x590c6c(0x214)]??gameCanvas[_0x590c6c(0x218)]/0x2,_0x320bda[_0x590c6c(0x1b2)]=_0x320bda[_0x590c6c(0x1b2)]??ENEMY_TOP_MARGIN;}catch(_0x1926d4){console[_0x590c6c(0x1d2)](_0x590c6c(0x192)+_0x41f3c8+_0x590c6c(0x1a5),_0x1926d4),_0x320bda['targetGridX']=gameCanvas[_0x590c6c(0x218)]/0x2,_0x320bda[_0x590c6c(0x1b2)]=ENEMY_TOP_MARGIN;}_0x320bda[_0x590c6c(0x17f)]=_0x590c6c(0x1ab),_0x320bda['pathT']=0x0,_0x320bda[_0x590c6c(0x240)]=0x0,_0x320bda[_0x590c6c(0x23f)]=0x0,_0x320bda[_0x590c6c(0x20c)]=0x0;_0x320bda['squadronId']!==undefined&&squadronCompletionStatus[_0x320bda['squadronId']]&&squadronCompletionStatus[_0x320bda[_0x590c6c(0x279)]][_0x590c6c(0x19c)]++;break;}const _0x2308d5=_0x512df5[_0x320bda[_0x590c6c(0x240)]];if(!_0x2308d5||!_0x2308d5['p0']||!_0x2308d5['p1']||!_0x2308d5['p2']||!_0x2308d5['p3']){console[_0x590c6c(0x1d2)]('Invalid\x20Normal\x20Bezier\x20segment\x20'+_0x320bda[_0x590c6c(0x240)]+_0x590c6c(0x24a)+_0x320bda['entrancePathId']+_0x590c6c(0x1ae)+_0x41f3c8+_0x590c6c(0x238));try{_0x320bda[_0x590c6c(0x214)]=_0x320bda[_0x590c6c(0x214)]??gameCanvas[_0x590c6c(0x218)]/0x2,_0x320bda['targetGridY']=_0x320bda['targetGridY']??ENEMY_TOP_MARGIN+_0x320bda[_0x590c6c(0x265)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}catch(_0x5a10e8){console[_0x590c6c(0x1d2)](_0x590c6c(0x192)+_0x41f3c8+'\x20after\x20bad\x20segment',_0x5a10e8),_0x320bda[_0x590c6c(0x214)]=gameCanvas[_0x590c6c(0x218)]/0x2,_0x320bda['targetGridY']=ENEMY_TOP_MARGIN;}_0x320bda[_0x590c6c(0x17f)]=_0x590c6c(0x1ab),_0x320bda[_0x590c6c(0x1d7)]=0x0,_0x320bda['pathSegmentIndex']=0x0,_0x320bda[_0x590c6c(0x23f)]=0x0,_0x320bda[_0x590c6c(0x20c)]=0x0;_0x320bda['squadronId']!==undefined&&squadronCompletionStatus[_0x320bda[_0x590c6c(0x279)]]&&squadronCompletionStatus[_0x320bda[_0x590c6c(0x279)]][_0x590c6c(0x19c)]++;break;}_0x320bda[_0x590c6c(0x1d7)]+=_0x52527c;let _0x21b316,_0x2dacdf,_0x2d5dcd=_0x320bda['x'],_0x4344d9=_0x320bda['y'];if(_0x320bda[_0x590c6c(0x1d7)]>=0x1){_0x320bda['pathT']=0x0,_0x320bda[_0x590c6c(0x240)]++;if(_0x320bda['pathSegmentIndex']>=_0x512df5['length']){let _0x3f6dad,_0x2bd741;try{_0x3f6dad=calculateBezierPoint(0x1,_0x2308d5['p0']['x'],_0x2308d5['p1']['x'],_0x2308d5['p2']['x'],_0x2308d5['p3']['x']),_0x2bd741=calculateBezierPoint(0x1,_0x2308d5['p0']['y'],_0x2308d5['p1']['y'],_0x2308d5['p2']['y'],_0x2308d5['p3']['y']);}catch(_0x527e8f){console[_0x590c6c(0x1d2)](_0x590c6c(0x239)+_0x41f3c8+_0x590c6c(0x147)+_0x320bda[_0x590c6c(0x25c)],_0x527e8f),_0x3f6dad=_0x2308d5['p3']['x'],_0x2bd741=_0x2308d5['p3']['y'];}_0x320bda['x']=_0x3f6dad,_0x320bda['y']=_0x2bd741;try{_0x320bda[_0x590c6c(0x214)]=_0x320bda['targetGridX']??gameCanvas[_0x590c6c(0x218)]/0x2,_0x320bda[_0x590c6c(0x1b2)]=_0x320bda[_0x590c6c(0x1b2)]??ENEMY_TOP_MARGIN;}catch(_0x1d37f1){console[_0x590c6c(0x1d2)](_0x590c6c(0x20e)+_0x41f3c8+_0x590c6c(0x147)+_0x320bda[_0x590c6c(0x25c)],_0x1d37f1),_0x320bda[_0x590c6c(0x214)]=_0x320bda['x'],_0x320bda['targetGridY']=ENEMY_TOP_MARGIN+_0x320bda[_0x590c6c(0x265)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x5b24ad=_0x320bda[_0x590c6c(0x17f)];_0x320bda['state']=_0x590c6c(0x1ab),_0x320bda['velocityX']=0x0,_0x320bda['velocityY']=0x0,_0x320bda[_0x590c6c(0x240)]=0x0;_0x5b24ad==='following_entrance_path'&&_0x320bda[_0x590c6c(0x279)]!==undefined&&squadronCompletionStatus[_0x320bda['squadronId']]&&squadronCompletionStatus[_0x320bda[_0x590c6c(0x279)]][_0x590c6c(0x19c)]++;break;}else{const _0x1109a1=_0x512df5[_0x320bda['pathSegmentIndex']];if(_0x1109a1?.['p0'])_0x21b316=_0x1109a1['p0']['x'],_0x2dacdf=_0x1109a1['p0']['y'];else{console[_0x590c6c(0x1d2)](_0x590c6c(0x285)+_0x320bda[_0x590c6c(0x240)]+_0x590c6c(0x24a)+_0x320bda[_0x590c6c(0x25c)]+_0x590c6c(0x1ae)+_0x41f3c8+_0x590c6c(0x238));try{_0x320bda['targetGridX']=_0x320bda[_0x590c6c(0x214)]??gameCanvas[_0x590c6c(0x218)]/0x2,_0x320bda['targetGridY']=_0x320bda[_0x590c6c(0x1b2)]??ENEMY_TOP_MARGIN;}catch(_0x1781bc){console['error']('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x41f3c8+'\x20after\x20bad\x20next\x20segment',_0x1781bc),_0x320bda[_0x590c6c(0x214)]=gameCanvas[_0x590c6c(0x218)]/0x2,_0x320bda[_0x590c6c(0x1b2)]=ENEMY_TOP_MARGIN;}_0x320bda[_0x590c6c(0x17f)]=_0x590c6c(0x1ab),_0x320bda[_0x590c6c(0x1d7)]=0x0,_0x320bda[_0x590c6c(0x240)]=0x0,_0x320bda[_0x590c6c(0x23f)]=0x0,_0x320bda['velocityY']=0x0;_0x320bda[_0x590c6c(0x279)]!==undefined&&squadronCompletionStatus[_0x320bda['squadronId']]&&squadronCompletionStatus[_0x320bda[_0x590c6c(0x279)]][_0x590c6c(0x19c)]++;break;}}}else try{_0x21b316=calculateBezierPoint(_0x320bda['pathT'],_0x2308d5['p0']['x'],_0x2308d5['p1']['x'],_0x2308d5['p2']['x'],_0x2308d5['p3']['x']),_0x2dacdf=calculateBezierPoint(_0x320bda[_0x590c6c(0x1d7)],_0x2308d5['p0']['y'],_0x2308d5['p1']['y'],_0x2308d5['p2']['y'],_0x2308d5['p3']['y']);}catch(_0x5ce831){console[_0x590c6c(0x1d2)](_0x590c6c(0x188)+_0x41f3c8+':',_0x5ce831);try{_0x320bda[_0x590c6c(0x214)]=_0x320bda[_0x590c6c(0x214)]??gameCanvas['width']/0x2,_0x320bda['targetGridY']=_0x320bda['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x375b52){console[_0x590c6c(0x1d2)](_0x590c6c(0x192)+_0x41f3c8+'\x20after\x20bezier\x20error',_0x375b52),_0x320bda['targetGridX']=gameCanvas[_0x590c6c(0x218)]/0x2,_0x320bda['targetGridY']=ENEMY_TOP_MARGIN;}_0x320bda['state']=_0x590c6c(0x1ab),_0x320bda[_0x590c6c(0x1d7)]=0x0,_0x320bda[_0x590c6c(0x240)]=0x0,_0x320bda[_0x590c6c(0x23f)]=0x0,_0x320bda[_0x590c6c(0x20c)]=0x0;_0x320bda['squadronId']!==undefined&&squadronCompletionStatus[_0x320bda['squadronId']]&&squadronCompletionStatus[_0x320bda[_0x590c6c(0x279)]]['completed']++;break;}if(_0x320bda&&_0x320bda[_0x590c6c(0x17f)]===_0x590c6c(0x278)){if(isNaN(_0x21b316)||isNaN(_0x2dacdf)){console[_0x590c6c(0x1d2)](_0x590c6c(0x230)+_0x41f3c8+'.\x20Switching\x20to\x20moving_to_grid.');try{_0x320bda[_0x590c6c(0x214)]=_0x320bda[_0x590c6c(0x214)]??gameCanvas[_0x590c6c(0x218)]/0x2,_0x320bda[_0x590c6c(0x1b2)]=_0x320bda[_0x590c6c(0x1b2)]??ENEMY_TOP_MARGIN;}catch(_0x1e6a71){console['error'](_0x590c6c(0x192)+_0x41f3c8+_0x590c6c(0x23a),_0x1e6a71),_0x320bda[_0x590c6c(0x214)]=gameCanvas['width']/0x2,_0x320bda[_0x590c6c(0x1b2)]=ENEMY_TOP_MARGIN;}_0x320bda[_0x590c6c(0x17f)]='moving_to_grid',_0x320bda[_0x590c6c(0x1d7)]=0x0,_0x320bda[_0x590c6c(0x240)]=0x0,_0x320bda[_0x590c6c(0x23f)]=0x0,_0x320bda['velocityY']=0x0,_0x320bda[_0x590c6c(0x279)]!==undefined&&squadronCompletionStatus[_0x320bda[_0x590c6c(0x279)]]&&squadronCompletionStatus[_0x320bda[_0x590c6c(0x279)]][_0x590c6c(0x19c)]++;}else{let _0x1f08f4=_0x21b316;const _0x3d6302=currentWavePatternIndex===0x1&&(_0x320bda[_0x590c6c(0x279)]===0x2||_0x320bda[_0x590c6c(0x279)]===0x3),_0x50f19e=typeof _0x320bda['squadronEnemyIndex']===_0x590c6c(0x145)&&_0x320bda[_0x590c6c(0x22f)]%0x2!==0x0;if(_0x3d6302&&_0x50f19e){const _0x2468fb=_0x1cf3f8+ENTRANCE_PAIR_HORIZONTAL_GAP;_0x1f08f4=_0x21b316+_0x2468fb;}_0x320bda[_0x590c6c(0x23f)]=_0x1f08f4-_0x2d5dcd,_0x320bda['velocityY']=_0x2dacdf-_0x4344d9,_0x320bda['x']=_0x1f08f4,_0x320bda['y']=_0x2dacdf;}}break;}case _0x590c6c(0x1ab):{if(_0x320bda[_0x590c6c(0x214)]==null||_0x320bda[_0x590c6c(0x1b2)]==null){console[_0x590c6c(0x17a)](_0x590c6c(0x184)+_0x41f3c8+_0x590c6c(0x211));try{const {x:_0x5b0869,y:_0x204f46}=getCurrentGridSlotPosition(_0x320bda['gridRow'],_0x320bda['gridCol'],_0x1cf3f8);_0x320bda['targetGridX']=_0x5b0869,_0x320bda[_0x590c6c(0x1b2)]=_0x204f46;}catch(_0x511f7b){console[_0x590c6c(0x1d2)](_0x590c6c(0x192)+_0x41f3c8+_0x590c6c(0x179),_0x511f7b),_0x320bda['state']=_0x590c6c(0x22a),_0x320bda['x']=gameCanvas[_0x590c6c(0x218)]/0x2,_0x320bda['y']=ENEMY_TOP_MARGIN;break;}}const _0x1c1f4a=_0x320bda['targetGridX'],_0x6d00ae=_0x320bda['targetGridY'],_0x87b2f=_0x1c1f4a-_0x320bda['x'],_0x421af9=_0x6d00ae-_0x320bda['y'],_0x54db20=Math['sqrt'](_0x87b2f*_0x87b2f+_0x421af9*_0x421af9),_0x3f28b0=ENTRANCE_SPEED*1.2,_0x368b40=_0x3f28b0*0.5;if(_0x54db20>_0x368b40)_0x320bda[_0x590c6c(0x23f)]=_0x87b2f/_0x54db20*_0x3f28b0,_0x320bda[_0x590c6c(0x20c)]=_0x421af9/_0x54db20*_0x3f28b0,_0x320bda['x']+=_0x320bda[_0x590c6c(0x23f)],_0x320bda['y']+=_0x320bda['velocityY'];else{_0x320bda['x']=_0x1c1f4a,_0x320bda['y']=_0x6d00ae,_0x320bda[_0x590c6c(0x23f)]=0x0,_0x320bda[_0x590c6c(0x20c)]=0x0;const _0x4e6eb3=_0x320bda['state'];_0x320bda['state']=_0x590c6c(0x22a),_0x320bda[_0x590c6c(0x170)]=![];!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(_0x590c6c(0x1a1),!![],0.1));GRID_BREATH_ENABLED&&!isGridBreathingActive&&!isChallengingStage&&(isGridBreathingActive=!![],gridBreathStartTime=_0x27b280,currentGridBreathFactor=0x0);!firstEnemyLanded&&!isFullGridWave&&!isChallengingStage&&(lastGridFireCheckTime=Date[_0x590c6c(0x200)](),firstEnemyLanded=!![]);if(_0x4e6eb3===_0x590c6c(0x1ab)&&!isChallengingStage&&!isFullGridWave&&_0x320bda[_0x590c6c(0x279)]!==undefined){const _0x3422e8=_0x320bda[_0x590c6c(0x279)],_0x38240f=squadronCompletionStatus[_0x3422e8];if(_0x38240f&&!_0x38240f[_0x590c6c(0x1a0)]){const _0x4bab55=enemies[_0x590c6c(0x27e)](_0x4d6197=>{const _0x103c4a=_0x590c6c;if(_0x4d6197&&_0x4d6197[_0x103c4a(0x279)]===_0x3422e8)return _0x4d6197['state']===_0x103c4a(0x22a)||!enemies[_0x103c4a(0x164)](_0x5d0864=>_0x5d0864['id']===_0x4d6197['id']);return!![];});if(_0x4bab55){_0x38240f[_0x590c6c(0x1a0)]=!![];const _0x1a28fb=enemies[_0x590c6c(0x1eb)](_0x2c770c=>_0x2c770c&&_0x2c770c[_0x590c6c(0x279)]===_0x3422e8&&_0x2c770c[_0x590c6c(0x17f)]===_0x590c6c(0x22a)&&(_0x2c770c[_0x590c6c(0x14f)]===ENEMY2_TYPE||_0x2c770c['type']===ENEMY3_TYPE)&&!(_0x2c770c[_0x590c6c(0x14f)]===ENEMY3_TYPE&&_0x2c770c['hasCapturedShip']));if(_0x1a28fb[_0x590c6c(0x22c)]>0x0){const _0x4dba16=_0x1a28fb[Math[_0x590c6c(0x15d)](Math[_0x590c6c(0x237)]()*_0x1a28fb[_0x590c6c(0x22c)])],_0x439a8d=_0x4dba16['id'],_0x3e8ab0=0xc8+Math[_0x590c6c(0x237)]()*0x190,_0x4ea337=setTimeout(()=>{const _0xd60de3=_0x590c6c;try{const _0x373941=enemySpawnTimeouts[_0xd60de3(0x219)](_0x4ea337);if(_0x373941>-0x1)enemySpawnTimeouts[_0xd60de3(0x172)](_0x373941,0x1);if(isPaused||!isInGameState||playerLives<=0x0&&(!isTwoPlayerMode||player1Lives<=0x0&&player2Lives<=0x0)||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x2d92e8=enemies['find'](_0x57ecce=>_0x57ecce&&_0x57ecce['id']===_0x439a8d);_0x2d92e8&&_0x2d92e8['state']==='in_grid'&&(createBulletSimple(_0x2d92e8)&&(playSound(_0xd60de3(0x17b),![],0.4),_0x2d92e8['lastFiredTime']=Date['now']()));}catch(_0x11488b){console[_0xd60de3(0x1d2)](_0xd60de3(0x26d)+_0x439a8d+':',_0x11488b);}},_0x3e8ab0);enemySpawnTimeouts[_0x590c6c(0x20a)](_0x4ea337);}}}}}break;}case _0x590c6c(0x22a):{try{const _0x4b1d42=_0x320bda[_0x590c6c(0x14f)]===ENEMY3_TYPE?BOSS_WIDTH:_0x320bda[_0x590c6c(0x14f)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x2ed6b4,y:_0x3a2cc8}=getCurrentGridSlotPosition(_0x320bda[_0x590c6c(0x265)],_0x320bda[_0x590c6c(0x23b)],_0x4b1d42);typeof _0x2ed6b4===_0x590c6c(0x145)&&!isNaN(_0x2ed6b4)&&(_0x320bda['x']=_0x2ed6b4),typeof _0x3a2cc8===_0x590c6c(0x145)&&!isNaN(_0x3a2cc8)&&(_0x320bda['y']=_0x3a2cc8),_0x320bda[_0x590c6c(0x214)]=_0x2ed6b4,_0x320bda[_0x590c6c(0x1b2)]=_0x3a2cc8;}catch(_0x2d2d84){console[_0x590c6c(0x1d2)](_0x590c6c(0x18c)+_0x320bda['id']+':',_0x2d2d84);}_0x320bda[_0x590c6c(0x23f)]=_0x5e233b?_0x216d18:0x0,_0x320bda[_0x590c6c(0x20c)]=0x0;_0x320bda[_0x590c6c(0x14f)]===ENEMY3_TYPE&&_0x320bda['hasCapturedShip']&&_0x320bda[_0x590c6c(0x1a9)]&&(_0x320bda['capturedShipX']=_0x320bda['x']+CAPTURED_SHIP_OFFSET_X,_0x320bda[_0x590c6c(0x148)]=_0x320bda['y']+CAPTURED_SHIP_OFFSET_Y);break;}case _0x590c6c(0x195):{_0x320bda[_0x590c6c(0x23f)]=0x0,_0x320bda[_0x590c6c(0x20c)]=0x0;break;}case _0x590c6c(0x27d):{_0x320bda[_0x590c6c(0x23f)]=0x0,_0x320bda[_0x590c6c(0x20c)]=0x0;break;}case _0x590c6c(0x242):{let _0x29693f=isTwoPlayerMode&&selectedGameMode===_0x590c6c(0x21d)?isPlayer1ShipCaptured||isPlayer2ShipCaptured:isShipCaptured;if(_0x29693f){_0x320bda[_0x590c6c(0x17f)]=_0x590c6c(0x260);try{const {x:_0x480d5a,y:_0x28ea31}=getCurrentGridSlotPosition(_0x320bda[_0x590c6c(0x265)],_0x320bda[_0x590c6c(0x23b)],_0x1cf3f8);_0x320bda[_0x590c6c(0x214)]=_0x480d5a,_0x320bda[_0x590c6c(0x1b2)]=_0x28ea31;}catch(_0x38174d){console[_0x590c6c(0x1d2)](_0x590c6c(0x17e)+_0x320bda['id']+':',_0x38174d),_0x320bda[_0x590c6c(0x214)]=gameCanvas[_0x590c6c(0x218)]/0x2,_0x320bda['targetGridY']=ENEMY_TOP_MARGIN;}break;}const _0x57706a=_0x320bda[_0x590c6c(0x16d)],_0x12f6a6=_0x320bda[_0x590c6c(0x18f)];if(_0x57706a==null||_0x12f6a6==null){console[_0x590c6c(0x1d2)]('Boss\x20'+_0x320bda['id']+_0x590c6c(0x171)),_0x320bda['state']=_0x590c6c(0x260);try{const {x:_0x3a619c,y:_0x36d054}=getCurrentGridSlotPosition(_0x320bda[_0x590c6c(0x265)],_0x320bda[_0x590c6c(0x23b)],_0x1cf3f8);_0x320bda[_0x590c6c(0x214)]=_0x3a619c,_0x320bda[_0x590c6c(0x1b2)]=_0x36d054;}catch(_0x2501ec){console[_0x590c6c(0x1d2)](_0x590c6c(0x17e)+_0x320bda['id']+':',_0x2501ec),_0x320bda[_0x590c6c(0x214)]=gameCanvas[_0x590c6c(0x218)]/0x2,_0x320bda[_0x590c6c(0x1b2)]=ENEMY_TOP_MARGIN;}break;}const _0x3161ec=_0x57706a-_0x320bda['x'],_0x4b5c2d=_0x12f6a6-_0x320bda['y'],_0x234bc5=Math[_0x590c6c(0x1e1)](_0x3161ec*_0x3161ec+_0x4b5c2d*_0x4b5c2d),_0x1a175b=BOSS_CAPTURE_DIVE_SPEED_FACTOR*BASE_ENEMY_ATTACK_SPEED,_0x2ff551=_0x1a175b*0.6;_0x234bc5>_0x2ff551?(_0x320bda[_0x590c6c(0x23f)]=_0x3161ec/_0x234bc5*_0x1a175b,_0x320bda[_0x590c6c(0x20c)]=_0x4b5c2d/_0x234bc5*_0x1a175b,_0x320bda['x']+=_0x320bda[_0x590c6c(0x23f)],_0x320bda['y']+=_0x320bda[_0x590c6c(0x20c)]):(_0x320bda['x']=_0x57706a,_0x320bda['y']=_0x12f6a6,_0x320bda[_0x590c6c(0x23f)]=0x0,_0x320bda['velocityY']=0x0,_0x320bda[_0x590c6c(0x17f)]='capturing',_0x320bda[_0x590c6c(0x216)]=_0x27b280,capturingBossId=_0x320bda['id'],captureBeamActive=!![],captureBeamSource={'x':_0x320bda['x']+_0x1cf3f8/0x2,'y':_0x320bda['y']+_0xcf54f8},captureBeamTargetY=_0x320bda['y'],captureBeamProgress=0x0,playSound('captureSound',![],0.6),_0x320bda[_0x590c6c(0x1a6)]&&(captureAttemptMadeThisLevel=!![],delete _0x320bda[_0x590c6c(0x1a6)]));break;}case _0x590c6c(0x14c):{_0x320bda[_0x590c6c(0x23f)]=0x0,_0x320bda[_0x590c6c(0x20c)]=0x0;_0x320bda['isPreparingForImmediateCapture']&&!captureAttemptMadeThisLevel&&(captureAttemptMadeThisLevel=!![],delete _0x320bda[_0x590c6c(0x1a6)]);let _0x1ebe33=![];isTwoPlayerMode&&selectedGameMode===_0x590c6c(0x21d)?_0x1ebe33=isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x320bda['id']||isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x320bda['id']:_0x1ebe33=isShipCaptured&&capturedBossIdWithMessage===_0x320bda['id'];if(_0x1ebe33){captureBeamActive=![];if(capturingBossId===_0x320bda['id'])capturingBossId=null;_0x320bda[_0x590c6c(0x17f)]='returning',stopSound(_0x590c6c(0x1de));break;}const _0x2d4366=_0x27b280-_0x320bda['captureStartTime'],_0x1bcc83=CAPTURE_BEAM_ANIMATION_DURATION_MS/0x2,_0x4a188f=CAPTURE_BEAM_DURATION_MS;if(_0x2d4366<_0x1bcc83)captureBeamProgress=_0x2d4366/_0x1bcc83;else{if(_0x2d4366<_0x4a188f-_0x1bcc83)captureBeamProgress=0x1;else{if(_0x2d4366<_0x4a188f)captureBeamProgress=0x1-(_0x2d4366-(_0x4a188f-_0x1bcc83))/_0x1bcc83;else{captureBeamProgress=0x0,captureBeamActive=![],capturingBossId=null,stopSound('captureSound'),_0x320bda[_0x590c6c(0x17f)]=_0x590c6c(0x152),_0x320bda[_0x590c6c(0x25f)]=generateAttackPathInternal(_0x320bda),_0x320bda[_0x590c6c(0x201)]=0x0,_0x320bda[_0x590c6c(0x14a)]=0x0,_0x320bda[_0x590c6c(0x1a8)]=BASE_ENEMY_ATTACK_SPEED*ENEMY3_ATTACK_SPEED_FACTOR,_0x320bda[_0x590c6c(0x1c9)]=0x0,_0x320bda[_0x590c6c(0x231)]=!![],_0x320bda[_0x590c6c(0x177)]=0x0,_0x320bda['attackGroupId']=null;break;}}}captureBeamProgress=Math['max'](0x0,Math[_0x590c6c(0x156)](0x1,captureBeamProgress));if(captureBeamActive&&captureBeamProgress>=0.95){const _0x52e18a=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x14cd83=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR,_0x3a7b33=_0x320bda['x']+_0x1cf3f8/0x2,_0x2ead68=_0x320bda['y']+_0xcf54f8,_0x3733f4=gameCanvas[_0x590c6c(0x25d)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x50ce1c=Math['max'](_0x52e18a,_0x14cd83),_0x347f43=_0x3a7b33-_0x50ce1c/0x2,_0x3a5e39=_0x2ead68,_0x157ee5=_0x3733f4-_0x2ead68;if(_0x157ee5>0x0){const _0x2d3fb2={'x':_0x347f43,'y':_0x3a5e39,'width':_0x50ce1c,'height':_0x157ee5};let _0x2406cc=null,_0x4c4cab=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x590c6c(0x21d)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&checkCollision(ship1,_0x2d3fb2))_0x2406cc=ship1,_0x4c4cab=0x1;else ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&checkCollision(ship2,_0x2d3fb2)&&(_0x2406cc=ship2,_0x4c4cab=0x2);}else ship&&playerLives>0x0&&!isShipCaptured&&checkCollision(ship,_0x2d3fb2)&&(_0x2406cc=ship,_0x4c4cab=currentPlayer);if(_0x2406cc){_0x320bda[_0x590c6c(0x1a9)]={'width':_0x2406cc['width'],'height':_0x2406cc[_0x590c6c(0x25d)]},_0x320bda[_0x590c6c(0x16e)]=!![],stopSound(_0x590c6c(0x1de)),_0x320bda['state']=_0x590c6c(0x19b),_0x320bda['targetGridX']=null,_0x320bda[_0x590c6c(0x1b2)]=null,_0x320bda[_0x590c6c(0x284)]=_0x2406cc['y'],_0x320bda[_0x590c6c(0x281)]=0x0,isShowingCaptureMessage=!![],captureMessageStartTime=_0x27b280,capturedBossIdWithMessage=_0x320bda['id'],playSound(_0x590c6c(0x14d),![],0.3),csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,handlePlayerShipCollision(_0x4c4cab,![],_0x27b280,!![]);if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&aiPlayerActivelySeekingCaptureById)aiPlayerActivelySeekingCaptureById=null;break;}}}break;}case _0x590c6c(0x19b):{_0x320bda[_0x590c6c(0x23f)]=0x0,_0x320bda['velocityY']=0x0;if(_0x320bda[_0x590c6c(0x16e)]&&_0x320bda[_0x590c6c(0x1a9)]&&typeof _0x320bda[_0x590c6c(0x284)]===_0x590c6c(0x145)){const _0x31125a=_0x27b280-captureMessageStartTime,_0x2595de=Math[_0x590c6c(0x156)](0x1,_0x31125a/CAPTURE_MESSAGE_DURATION),_0x4d9286=_0x320bda['y']+CAPTURED_SHIP_OFFSET_Y,_0xbee305=_0x320bda[_0x590c6c(0x284)];_0x320bda[_0x590c6c(0x148)]=_0xbee305+(_0x4d9286-_0xbee305)*_0x2595de,_0x320bda[_0x590c6c(0x159)]=_0x320bda['x']+CAPTURED_SHIP_OFFSET_X;}else _0x320bda[_0x590c6c(0x159)]=_0x320bda['x']+CAPTURED_SHIP_OFFSET_X,_0x320bda[_0x590c6c(0x148)]=_0x320bda['y']+CAPTURED_SHIP_OFFSET_Y;break;}case'attacking':{if(isEntrancePhaseActive)break;const _0xcf5a20=_0x320bda[_0x590c6c(0x25f)],_0x56d6be=3.8;if(!_0xcf5a20||_0xcf5a20[_0x590c6c(0x22c)]===0x0){console['error'](_0x590c6c(0x184)+_0x41f3c8+'\x20attacking\x20without\x20path!\x20Returning.'),_0x320bda[_0x590c6c(0x17f)]=_0x590c6c(0x260);try{const {x:_0x5be954,y:_0x294fca}=getCurrentGridSlotPosition(_0x320bda[_0x590c6c(0x265)],_0x320bda['gridCol'],_0x1cf3f8);_0x320bda[_0x590c6c(0x214)]=_0x5be954,_0x320bda[_0x590c6c(0x1b2)]=_0x294fca;}catch(_0x26903c){console[_0x590c6c(0x1d2)](_0x590c6c(0x277)+_0x41f3c8+'\x20(no\x20attack\x20path):',_0x26903c),_0x320bda[_0x590c6c(0x214)]=gameCanvas['width']/0x2,_0x320bda[_0x590c6c(0x1b2)]=ENEMY_TOP_MARGIN;}break;}if(_0x320bda[_0x590c6c(0x201)]>=_0xcf5a20['length']){console[_0x590c6c(0x17a)]('Enemy\x20'+_0x41f3c8+_0x590c6c(0x1b5)+_0x320bda['attackPathSegmentIndex']+_0x590c6c(0x17d)+_0xcf5a20[_0x590c6c(0x22c)]+_0x590c6c(0x1b4)),_0x320bda['state']=_0x590c6c(0x260);try{const {x:_0x29ed01,y:_0x2ecc81}=getCurrentGridSlotPosition(_0x320bda[_0x590c6c(0x265)],_0x320bda[_0x590c6c(0x23b)],_0x1cf3f8);_0x320bda[_0x590c6c(0x214)]=_0x29ed01,_0x320bda[_0x590c6c(0x1b2)]=_0x2ecc81;}catch(_0x13b4ae){console[_0x590c6c(0x1d2)](_0x590c6c(0x277)+_0x41f3c8+_0x590c6c(0x282),_0x13b4ae),_0x320bda[_0x590c6c(0x214)]=gameCanvas[_0x590c6c(0x218)]/0x2,_0x320bda[_0x590c6c(0x1b2)]=ENEMY_TOP_MARGIN;}break;}const _0x2d1143=_0xcf5a20[_0x320bda[_0x590c6c(0x201)]];if(!_0x2d1143||!_0x2d1143['p0']||!_0x2d1143['p1']||!_0x2d1143['p2']||!_0x2d1143['p3']){console[_0x590c6c(0x1d2)](_0x590c6c(0x184)+_0x41f3c8+_0x590c6c(0x210)+_0x320bda[_0x590c6c(0x201)]+_0x590c6c(0x1c5)),_0x320bda[_0x590c6c(0x17f)]=_0x590c6c(0x260);try{const {x:_0x1f4ddc,y:_0x19c4bf}=getCurrentGridSlotPosition(_0x320bda[_0x590c6c(0x265)],_0x320bda[_0x590c6c(0x23b)],_0x1cf3f8);_0x320bda[_0x590c6c(0x214)]=_0x1f4ddc,_0x320bda[_0x590c6c(0x1b2)]=_0x19c4bf;}catch(_0x294657){console[_0x590c6c(0x1d2)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x41f3c8+_0x590c6c(0x173),_0x294657),_0x320bda['targetGridX']=gameCanvas['width']/0x2,_0x320bda[_0x590c6c(0x1b2)]=ENEMY_TOP_MARGIN;}break;}const _0x2a1675=_0x320bda['speed']/0x3e8*_0x56d6be;_0x320bda[_0x590c6c(0x14a)]+=_0x2a1675;let _0x3df0f6,_0x33b2e5;const _0x2a4675=_0x320bda['x'],_0x1d7a15=_0x320bda['y'];if(_0x320bda[_0x590c6c(0x14a)]>=0x1){try{_0x3df0f6=calculateBezierPoint(0x1,_0x2d1143['p0']['x'],_0x2d1143['p1']['x'],_0x2d1143['p2']['x'],_0x2d1143['p3']['x']),_0x33b2e5=calculateBezierPoint(0x1,_0x2d1143['p0']['y'],_0x2d1143['p1']['y'],_0x2d1143['p2']['y'],_0x2d1143['p3']['y']);}catch(_0x5bcf14){console['error'](_0x590c6c(0x25a)+_0x320bda['id']+':',_0x5bcf14),_0x3df0f6=_0x320bda['x'],_0x33b2e5=_0x320bda['y'],_0x320bda[_0x590c6c(0x17f)]=_0x590c6c(0x260);try{const {x:_0x2d1b04,y:_0x4afd5f}=getCurrentGridSlotPosition(_0x320bda[_0x590c6c(0x265)],_0x320bda['gridCol'],_0x1cf3f8);_0x320bda[_0x590c6c(0x214)]=_0x2d1b04,_0x320bda[_0x590c6c(0x1b2)]=_0x4afd5f;}catch(_0x43e37e){console['error'](_0x590c6c(0x16c)+_0x320bda['id']+':',_0x43e37e),_0x320bda[_0x590c6c(0x214)]=gameCanvas[_0x590c6c(0x218)]/0x2,_0x320bda[_0x590c6c(0x1b2)]=ENEMY_TOP_MARGIN;}break;}_0x320bda[_0x590c6c(0x14a)]=0x0,_0x320bda[_0x590c6c(0x201)]++;if(_0x320bda[_0x590c6c(0x201)]>=_0xcf5a20[_0x590c6c(0x22c)]){_0x320bda[_0x590c6c(0x17f)]=_0x590c6c(0x260),_0x320bda[_0x590c6c(0x1c9)]=0x0,_0x320bda[_0x590c6c(0x177)]=0x0,_0x320bda[_0x590c6c(0x1fb)]=null;try{const {x:_0x131af4,y:_0x3984e0}=getCurrentGridSlotPosition(_0x320bda[_0x590c6c(0x265)],_0x320bda[_0x590c6c(0x23b)],_0x1cf3f8);_0x320bda[_0x590c6c(0x214)]=_0x131af4,_0x320bda[_0x590c6c(0x1b2)]=_0x3984e0;}catch(_0x1b73bb){console[_0x590c6c(0x1d2)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x41f3c8+_0x590c6c(0x22d),_0x1b73bb),_0x320bda['targetGridX']=gameCanvas[_0x590c6c(0x218)]/0x2,_0x320bda[_0x590c6c(0x1b2)]=ENEMY_TOP_MARGIN;}}else{const _0x5a58d5=_0xcf5a20[_0x320bda[_0x590c6c(0x201)]];if(!_0x5a58d5?.['p0']){console[_0x590c6c(0x1d2)]('Enemy\x20'+_0x41f3c8+_0x590c6c(0x1c3)+_0x320bda[_0x590c6c(0x201)]+_0x590c6c(0x1c5)),_0x3df0f6=_0x320bda['x'],_0x33b2e5=_0x320bda['y'],_0x320bda[_0x590c6c(0x17f)]=_0x590c6c(0x260);try{const {x:_0x132e4f,y:_0x1c1433}=getCurrentGridSlotPosition(_0x320bda[_0x590c6c(0x265)],_0x320bda[_0x590c6c(0x23b)],_0x1cf3f8);_0x320bda[_0x590c6c(0x214)]=_0x132e4f,_0x320bda[_0x590c6c(0x1b2)]=_0x1c1433;}catch(_0x518848){console['error'](_0x590c6c(0x199)+_0x320bda['id']+':',_0x518848),_0x320bda['targetGridX']=gameCanvas[_0x590c6c(0x218)]/0x2,_0x320bda['targetGridY']=ENEMY_TOP_MARGIN;}break;}}}else try{_0x3df0f6=calculateBezierPoint(_0x320bda[_0x590c6c(0x14a)],_0x2d1143['p0']['x'],_0x2d1143['p1']['x'],_0x2d1143['p2']['x'],_0x2d1143['p3']['x']),_0x33b2e5=calculateBezierPoint(_0x320bda[_0x590c6c(0x14a)],_0x2d1143['p0']['y'],_0x2d1143['p1']['y'],_0x2d1143['p2']['y'],_0x2d1143['p3']['y']);}catch(_0x2077e4){console['error']('Error\x20calculating\x20bezier\x20point\x20during\x20attack\x20for\x20'+_0x320bda['id']+':',_0x2077e4),_0x3df0f6=_0x320bda['x'],_0x33b2e5=_0x320bda['y'],_0x320bda['state']=_0x590c6c(0x260);try{const {x:_0x24e3b8,y:_0x34b22c}=getCurrentGridSlotPosition(_0x320bda['gridRow'],_0x320bda[_0x590c6c(0x23b)],_0x1cf3f8);_0x320bda[_0x590c6c(0x214)]=_0x24e3b8,_0x320bda[_0x590c6c(0x1b2)]=_0x34b22c;}catch(_0x1370f4){console[_0x590c6c(0x1d2)](_0x590c6c(0x26b)+_0x320bda['id']+':',_0x1370f4),_0x320bda[_0x590c6c(0x214)]=gameCanvas[_0x590c6c(0x218)]/0x2,_0x320bda[_0x590c6c(0x1b2)]=ENEMY_TOP_MARGIN;}break;}if(_0x320bda&&_0x320bda['state']==='attacking'){const _0x78dee9=_0x320bda[_0x590c6c(0x177)]||0x0,_0x4d7301=_0x3df0f6+_0x78dee9,_0x2d020e=_0x33b2e5;_0x320bda[_0x590c6c(0x23f)]=_0x4d7301-_0x2a4675,_0x320bda[_0x590c6c(0x20c)]=_0x2d020e-_0x1d7a15,_0x320bda['x']=_0x4d7301,_0x320bda['y']=_0x2d020e;if(_0x320bda['y']>gameCanvas['height']+_0xcf54f8*1.5){_0x320bda['state']=_0x590c6c(0x260),_0x320bda[_0x590c6c(0x201)]=0x0,_0x320bda[_0x590c6c(0x14a)]=0x0,_0x320bda[_0x590c6c(0x1c9)]=0x0,_0x320bda[_0x590c6c(0x177)]=0x0,_0x320bda['attackGroupId']=null,_0x320bda['y']=-_0xcf54f8*(1.1+Math[_0x590c6c(0x237)]()*0.4),_0x320bda['x']=Math[_0x590c6c(0x237)]()*(gameCanvas['width']-_0x1cf3f8),_0x320bda[_0x590c6c(0x23f)]=0x0,_0x320bda[_0x590c6c(0x20c)]=0x0;try{const {x:_0x378a05,y:_0x185bfc}=getCurrentGridSlotPosition(_0x320bda[_0x590c6c(0x265)],_0x320bda[_0x590c6c(0x23b)],_0x1cf3f8);_0x320bda['targetGridX']=_0x378a05,_0x320bda[_0x590c6c(0x1b2)]=_0x185bfc;}catch(_0x150db0){console['error'](_0x590c6c(0x277)+_0x41f3c8+_0x590c6c(0x158),_0x150db0),_0x320bda[_0x590c6c(0x214)]=gameCanvas[_0x590c6c(0x218)]/0x2,_0x320bda[_0x590c6c(0x1b2)]=ENEMY_TOP_MARGIN;}}}break;}case'returning':{if(isEntrancePhaseActive)break;if(_0x320bda[_0x590c6c(0x214)]==null||_0x320bda[_0x590c6c(0x1b2)]==null){console[_0x590c6c(0x17a)]('Enemy\x20'+_0x41f3c8+_0x590c6c(0x1e7));try{const {x:_0x173366,y:_0x27bebf}=getCurrentGridSlotPosition(_0x320bda['gridRow'],_0x320bda['gridCol'],_0x1cf3f8);_0x320bda[_0x590c6c(0x214)]=_0x173366,_0x320bda['targetGridY']=_0x27bebf;}catch(_0x5e2b22){console[_0x590c6c(0x1d2)](_0x590c6c(0x192)+_0x41f3c8+_0x590c6c(0x1f5),_0x5e2b22),_0x320bda[_0x590c6c(0x17f)]=_0x590c6c(0x22a),_0x320bda['x']=gameCanvas[_0x590c6c(0x218)]/0x2,_0x320bda['y']=ENEMY_TOP_MARGIN;break;}}const _0x2604ca=_0x320bda[_0x590c6c(0x214)],_0x2053e6=_0x320bda['targetGridY'],_0x5f0525=_0x2604ca-_0x320bda['x'],_0x5441a9=_0x2053e6-_0x320bda['y'],_0x41e8be=Math[_0x590c6c(0x1e1)](_0x5f0525*_0x5f0525+_0x5441a9*_0x5441a9),_0x5019b8=scaleValue(level,BASE_RETURN_SPEED_FACTOR,MAX_RETURN_SPEED_FACTOR),_0x23c646=BASE_RETURN_SPEED*_0x5019b8,_0x4c3d6d=_0x23c646*0.5;_0x41e8be>_0x4c3d6d?(_0x320bda['velocityX']=_0x5f0525/_0x41e8be*_0x23c646,_0x320bda[_0x590c6c(0x20c)]=_0x5441a9/_0x41e8be*_0x23c646,_0x320bda['x']+=_0x320bda['velocityX'],_0x320bda['y']+=_0x320bda['velocityY']):(_0x320bda['x']=_0x2604ca,_0x320bda['y']=_0x2053e6,_0x320bda[_0x590c6c(0x23f)]=0x0,_0x320bda[_0x590c6c(0x20c)]=0x0,_0x320bda[_0x590c6c(0x17f)]=_0x590c6c(0x22a),_0x320bda[_0x590c6c(0x170)]=!![],_0x320bda['attackFormationOffsetX']=0x0,_0x320bda['attackGroupId']=null,_0x320bda[_0x590c6c(0x283)]('returnLogDone')&&delete _0x320bda[_0x590c6c(0x1b8)],!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(_0x590c6c(0x1a1),!![],0.1)));break;}}if(_0x320bda&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode==='coop'&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){const _0x54c7ad=[_0x590c6c(0x152),'following_entrance_path',_0x590c6c(0x15c),'diving_to_capture_position'];if(_0x54c7ad[_0x590c6c(0x1e3)](_0x320bda['state'])){let _0x5598e8=[];if(isTwoPlayerMode&&selectedGameMode==='coop'){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x5598e8[_0x590c6c(0x20a)]({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x5598e8[_0x590c6c(0x20a)]({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isInvincible&&_0x5598e8['push']({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(const _0x3a6089 of _0x5598e8){const _0x29370e=_0x3a6089[_0x590c6c(0x203)],_0x414935={'x':_0x320bda['x'],'y':_0x320bda['y'],'width':_0x1cf3f8,'height':_0xcf54f8},_0x361e4e={'x':_0x29370e['x'],'y':_0x29370e['y'],'width':_0x29370e[_0x590c6c(0x218)],'height':_0x29370e[_0x590c6c(0x25d)]},_0x21e8eb=_0x3a6089[_0x590c6c(0x21a)]?{'x':_0x29370e['x']+DUAL_SHIP_OFFSET_X,'y':_0x29370e['y'],'width':_0x29370e['width'],'height':_0x29370e['height']}:null;let _0x328731=![],_0x57d7d9=![];if(checkCollision(_0x414935,_0x361e4e))_0x328731=!![];else _0x3a6089['dual']&&_0x21e8eb&&checkCollision(_0x414935,_0x21e8eb)&&(_0x328731=!![],_0x57d7d9=!![]);if(_0x328731){createExplosion(_0x320bda['x']+_0x1cf3f8/0x2,_0x320bda['y']+_0xcf54f8/0x2),playSound(_0x590c6c(0x235),![],0.6),enemies[_0x590c6c(0x172)](_0xd4f448,0x1),_0x320bda=null,handlePlayerShipCollision(_0x3a6089[_0x590c6c(0x27f)],_0x57d7d9,_0x27b280,![]);if(_0x320bda===null)break;}}}}if(!_0x320bda)continue;}if(!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode==='coop'&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){let _0x5b28f2=[];if(isTwoPlayerMode&&selectedGameMode===_0x590c6c(0x21d)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x5b28f2['push']({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x5b28f2[_0x590c6c(0x20a)]({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isInvincible&&_0x5b28f2[_0x590c6c(0x20a)]({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(let _0x5e2a70=enemyBullets['length']-0x1;_0x5e2a70>=0x0;_0x5e2a70--){const _0x259913=enemyBullets[_0x5e2a70];if(!_0x259913){enemyBullets[_0x590c6c(0x172)](_0x5e2a70,0x1);continue;}const _0x532dea={'x':_0x259913['x'],'y':_0x259913['y'],'width':_0x259913[_0x590c6c(0x218)],'height':_0x259913[_0x590c6c(0x25d)]};let _0x47d605=![];for(const _0x5a0f3b of _0x5b28f2){const _0x411c2a=_0x5a0f3b[_0x590c6c(0x203)],_0x557452={'x':_0x411c2a['x'],'y':_0x411c2a['y'],'width':_0x411c2a[_0x590c6c(0x218)],'height':_0x411c2a[_0x590c6c(0x25d)]},_0x4c8c7d=_0x5a0f3b[_0x590c6c(0x21a)]?{'x':_0x411c2a['x']+DUAL_SHIP_OFFSET_X,'y':_0x411c2a['y'],'width':_0x411c2a[_0x590c6c(0x218)],'height':_0x411c2a[_0x590c6c(0x25d)]}:null;let _0x393a5d=![],_0x190762=![];if(checkCollision(_0x532dea,_0x557452))_0x393a5d=!![];else _0x5a0f3b['dual']&&_0x4c8c7d&&checkCollision(_0x532dea,_0x4c8c7d)&&(_0x393a5d=!![],_0x190762=!![]);if(_0x393a5d){playSound('lostLifeSound',![],0.6),handlePlayerShipCollision(_0x5a0f3b['playerNum'],_0x190762,_0x27b280,![]),enemyBullets[_0x590c6c(0x172)](_0x5e2a70,0x1),_0x47d605=!![];break;}}if(_0x47d605)continue;}}updateHitSparks();}catch(_0x9f0c05){console[_0x590c6c(0x1d2)](_0x590c6c(0x163),_0x9f0c05,_0x9f0c05[_0x590c6c(0x275)]),isGridSoundPlaying=![],stopSound('gridBackgroundSound'),isEntrancePhaseActive=![],stopSound(_0x590c6c(0x1c2)),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(_0x590c6c(0x1de)),stopSound(_0x590c6c(0x14d)),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0x590c6c(0x243))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x590c6c(0x183));}}function handlePlayerShipCollision(_0x3a6f43,_0x51e1d9,_0x3ca462,_0x145f35=![]){const _0x239240=_0x236fd5,_0x40c1e9=_0x3ca462,_0x46d6fd=gameCanvas?gameCanvas[_0x239240(0x25d)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;let _0x5a639d=0x0,_0x39f017=null;if(isTwoPlayerMode&&selectedGameMode===_0x239240(0x21d)){_0x39f017=_0x3a6f43===0x1?ship1:ship2;if(_0x39f017){_0x5a639d=_0x39f017['x'];if(_0x145f35){if(_0x3a6f43===0x1)player1CaptureRespawnX=_0x39f017['x'];else{if(_0x3a6f43===0x2)player2CaptureRespawnX=_0x39f017['x'];}}}else{if(_0x3a6f43===0x1&&typeof player1CaptureRespawnX===_0x239240(0x145)&&player1CaptureRespawnX!==0x0)_0x5a639d=player1CaptureRespawnX;else{if(_0x3a6f43===0x2&&typeof player2CaptureRespawnX===_0x239240(0x145)&&player2CaptureRespawnX!==0x0)_0x5a639d=player2CaptureRespawnX;else{if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&gameCanvas)_0x5a639d=_0x3a6f43===0x1?gameCanvas[_0x239240(0x218)]/0x2-gameCanvas[_0x239240(0x218)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2:gameCanvas[_0x239240(0x218)]/0x2+gameCanvas[_0x239240(0x218)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;else gameCanvas?_0x5a639d=gameCanvas[_0x239240(0x218)]/0x2-SHIP_WIDTH/0x2:_0x5a639d=0xc8;}}}}else{_0x39f017=ship;if(_0x39f017)_0x5a639d=_0x39f017['x'],_0x145f35&&(capturedShipRespawnX_NormalMode=ship['x']);else _0x145f35&&capturedShipRespawnX_NormalMode!==0x0?_0x5a639d=capturedShipRespawnX_NormalMode:_0x5a639d=gameCanvas?gameCanvas['width']/0x2-SHIP_WIDTH/0x2:0xc8;}if(isTwoPlayerMode&&selectedGameMode==='coop'){if(_0x3a6f43===0x1){if(_0x145f35){isPlayer1ShipCaptured=!![],player1IsDualShipActive=![],player1Lives--;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')coopPartner1CapturedTime=_0x40c1e9;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0x40c1e9,playSound(_0x239240(0x27b),![],0.4),ship1=null,player1NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;if(capturedBossIdWithMessage&&enemies[_0x239240(0x157)](_0x2f159e=>_0x2f159e['id']===capturedBossIdWithMessage)){const _0x1c603f=enemies['find'](_0x3aeeaa=>_0x3aeeaa['id']===capturedBossIdWithMessage);_0x1c603f&&(_0x1c603f[_0x239240(0x16e)]=![],_0x1c603f['capturedShipDimensions']=null);}}else player1NeedsRespawnAfterCapture=!![],ship1=null;}else{if(player1IsDualShipActive&&ship1){player1IsDualShipActive=![];const _0x46861f=_0x51e1d9?ship1['x']+DUAL_SHIP_OFFSET_X+ship1[_0x239240(0x218)]/0x2:ship1['x']+ship1[_0x239240(0x218)]/0x2;createExplosion(_0x46861f,ship1['y']+ship1[_0x239240(0x25d)]/0x2),ship1['x']=_0x5a639d,ship1['y']=_0x46d6fd,ship1[_0x239240(0x16d)]=ship1['x'],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x40c1e9+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0x40c1e9+RESPAWN_DELAY_MS;}else{if(ship1)createExplosion(ship1['x']+ship1[_0x239240(0x218)]/0x2,ship1['y']+ship1[_0x239240(0x25d)]/0x2);player1Lives--;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0x40c1e9,playSound('gameOverSound',![],0.4),ship1=null;if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;}else isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x40c1e9+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0x40c1e9+RESPAWN_DELAY_MS,ship1?(ship1['x']=_0x5a639d,ship1['y']=_0x46d6fd,ship1[_0x239240(0x16d)]=ship1['x']):ship1={'x':_0x5a639d,'y':_0x46d6fd,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x5a639d,'id':'p1'};}}}else{if(_0x3a6f43===0x2){if(_0x145f35){isPlayer2ShipCaptured=!![],player2IsDualShipActive=![],player2Lives--;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x239240(0x149))coopPartner2CapturedTime=_0x40c1e9;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0x40c1e9,playSound('gameOverSound',![],0.4),ship2=null,player2NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p2'||aiPlayerActivelySeekingCaptureById===_0x239240(0x167))aiPlayerActivelySeekingCaptureById=null;if(capturedBossIdWithMessage&&enemies['find'](_0x529724=>_0x529724['id']===capturedBossIdWithMessage)){const _0x5c369c=enemies['find'](_0x308d70=>_0x308d70['id']===capturedBossIdWithMessage);_0x5c369c&&(_0x5c369c[_0x239240(0x16e)]=![],_0x5c369c['capturedShipDimensions']=null);}}else player2NeedsRespawnAfterCapture=!![],ship2=null;}else{if(player2IsDualShipActive&&ship2){player2IsDualShipActive=![];const _0x22a90c=_0x51e1d9?ship2['x']+DUAL_SHIP_OFFSET_X+ship2[_0x239240(0x218)]/0x2:ship2['x']+ship2[_0x239240(0x218)]/0x2;createExplosion(_0x22a90c,ship2['y']+ship2[_0x239240(0x25d)]/0x2),ship2['x']=_0x5a639d,ship2['y']=_0x46d6fd,ship2[_0x239240(0x16d)]=ship2['x'],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x40c1e9+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0x40c1e9+RESPAWN_DELAY_MS;}else{if(ship2)createExplosion(ship2['x']+ship2[_0x239240(0x218)]/0x2,ship2['y']+ship2['height']/0x2);player2Lives--;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0x40c1e9,playSound(_0x239240(0x27b),![],0.4),ship2=null;if(aiPlayerActivelySeekingCaptureById==='p2'||aiPlayerActivelySeekingCaptureById==='ai_p2')aiPlayerActivelySeekingCaptureById=null;}else isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x40c1e9+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0x40c1e9+RESPAWN_DELAY_MS,ship2?(ship2['x']=_0x5a639d,ship2['y']=_0x46d6fd,ship2[_0x239240(0x16d)]=_0x5a639d):ship2={'x':_0x5a639d,'y':_0x46d6fd,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x5a639d,'id':'p2'};}}}}player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isDualShipActive&&!_0x145f35&&_0x39f017){isDualShipActive=![];if(isTwoPlayerMode&&selectedGameMode===_0x239240(0x1ea)){if(_0x3a6f43===0x1)player1IsDualShipActive=![];else{if(_0x3a6f43===0x2)player2IsDualShipActive=![];}}else{if(!isTwoPlayerMode)player1IsDualShipActive=![];}const _0x41b564=_0x51e1d9?_0x5a639d+DUAL_SHIP_OFFSET_X+SHIP_WIDTH/0x2:_0x5a639d+SHIP_WIDTH/0x2;createExplosion(_0x41b564,_0x46d6fd+SHIP_HEIGHT/0x2);ship&&(ship['x']=_0x5a639d,ship['y']=_0x46d6fd,ship[_0x239240(0x16d)]=ship['x']);isInvincible=!![],invincibilityEndTime=_0x40c1e9+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x40c1e9+RESPAWN_DELAY_MS;if(!isManualControl&&!isPlayerTwoAI)aiNeedsStabilization=!![];else{if(isPlayerTwoAI&&selectedGameMode===_0x239240(0x1ea)&&currentPlayer===0x2)aiNeedsStabilization=!![];}}else{if(!_0x145f35&&_0x39f017)createExplosion(_0x5a639d+SHIP_WIDTH/0x2,_0x46d6fd+SHIP_HEIGHT/0x2);if(_0x145f35){isShipCaptured=!![];if(ship)ship=null;}playerLives--;if(playerLives<=0x0){playerLives=0x0;if(isTwoPlayerMode&&selectedGameMode==='normal'){if(_0x3a6f43===0x1)player1Lives=0x0;else{if(_0x3a6f43===0x2)player2Lives=0x0;}isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x40c1e9,playerWhoIsGameOver=_0x3a6f43,playSound('gameOverSound',![],0.4);const _0x2621a5=_0x3a6f43===0x1?0x2:0x1,_0x5c87e6=_0x2621a5===0x1?player1Lives:player2Lives;_0x5c87e6>0x0?nextActionAfterPlayerGameOver=_0x239240(0x225):nextActionAfterPlayerGameOver=_0x239240(0x205);bullets=[],enemyBullets=[],explosions=[];if(!(_0x5c87e6>0x0))ship=null;}else player1Lives=0x0,ship=null,playSound(_0x239240(0x27b),![],0.4),triggerFinalGameOverSequence();}else{if(isTwoPlayerMode&&selectedGameMode===_0x239240(0x1ea)){if(_0x3a6f43===0x1)player1Lives=playerLives;else player2Lives=playerLives;}if(!_0x145f35){isInvincible=!![],invincibilityEndTime=_0x40c1e9+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x40c1e9+RESPAWN_DELAY_MS;if(ship&&gameCanvas){ship['x']=_0x5a639d,ship['y']=_0x46d6fd,ship[_0x239240(0x16d)]=ship['x'];if(!isManualControl&&!isPlayerTwoAI)aiNeedsStabilization=!![];else{if(isPlayerTwoAI&&selectedGameMode===_0x239240(0x1ea)&&currentPlayer===0x2)aiNeedsStabilization=!![];}}}if(_0x145f35)isDualShipActive=![];}}}if(!_0x145f35)fallingShips=[];}function switchPlayerTurn(){const _0x52047a=_0x236fd5;if(!isTwoPlayerMode||selectedGameMode===_0x52047a(0x21d))return![];stopSound('hiScoreSound');if(currentPlayer===0x1){player1Score=score,player1IsDualShipActive=isDualShipActive;if(player1Score>highScore)highScore=player1Score;}else{player2Score=score,player2IsDualShipActive=isDualShipActive;if(player2Score>highScore)highScore=player2Score;}const _0x43208a=currentPlayer===0x1?0x2:0x1,_0x2092fd=_0x43208a===0x1?player1Lives:player2Lives;if(_0x2092fd<=0x0){const _0x41ae8e=currentPlayer===0x1?player1Lives:player2Lives;return _0x41ae8e<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x43208a,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function triggerGridFiring(){const _0x301a81=_0x236fd5;if(isPaused||!isInGameState||isChallengingStage||isWaveTransitioning)return;let _0x969888=![];isTwoPlayerMode&&selectedGameMode===_0x301a81(0x21d)?(player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)&&(_0x969888=!![]):playerLives>0x0&&ship&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(_0x969888=!![]);if(!_0x969888)return;const _0xa61a84=enemies[_0x301a81(0x1eb)](_0x519a1d=>_0x519a1d&&_0x519a1d[_0x301a81(0x17f)]===_0x301a81(0x22a));if(_0xa61a84[_0x301a81(0x22c)]===0x0)return;const _0x290e10=Date[_0x301a81(0x200)](),_0x1e1835=scaleValue(level,BASE_GRID_FIRE_INTERVAL,MIN_GRID_FIRE_INTERVAL);if(_0x290e10-lastGridFireCheckTime<_0x1e1835)return;lastGridFireCheckTime=_0x290e10;const _0x3bcd02=scaleValue(level,BASE_GRID_FIRE_PROBABILITY,MAX_GRID_FIRE_PROBABILITY),_0x1c8215=Math['round'](scaleValue(level,BASE_GRID_MAX_FIRING_ENEMIES,MAX_GRID_MAX_FIRING_ENEMIES));let _0x2be824=0x0;_0xa61a84[_0x301a81(0x257)](()=>Math[_0x301a81(0x237)]()-0.5);for(const _0x34a91a of _0xa61a84){if(_0x2be824>=_0x1c8215)break;if(_0x34a91a[_0x301a81(0x14f)]===ENEMY2_TYPE||_0x34a91a['type']===ENEMY3_TYPE){if(_0x34a91a[_0x301a81(0x14f)]===ENEMY3_TYPE&&_0x34a91a[_0x301a81(0x16e)])continue;Math['random']()<_0x3bcd02&&(createBulletSimple(_0x34a91a)&&(playSound(_0x301a81(0x17b),![],0.4),_0x34a91a[_0x301a81(0x1c9)]=_0x290e10,_0x2be824++));}}}function runSingleGameUpdate(_0x39590d){const _0x45800e=_0x236fd5;try{const _0x3ec281=Date[_0x45800e(0x200)]();let _0x35b016=![];isTwoPlayerMode&&selectedGameMode===_0x45800e(0x21d)?_0x35b016=player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture:_0x35b016=playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;let _0x1adaf2=![];if(isManualControl&&connectedGamepadIndex!==null){if(isTwoPlayerMode&&selectedGameMode===_0x45800e(0x21d)){if(player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage)_0x1adaf2=!![];}else{if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1))_0x1adaf2=!![];}}if(_0x1adaf2&&gameOverSequenceStartTime===0x0&&!isPaused){const _0x58336f=navigator[_0x45800e(0x24d)]();if(_0x58336f?.[connectedGamepadIndex]){const _0x39d490=_0x58336f[connectedGamepadIndex],_0x2fc7a3=processSingleController(_0x39d490,previousGameButtonStates);previousGameButtonStates=_0x2fc7a3[_0x45800e(0x150)][_0x45800e(0x169)]();if(_0x2fc7a3['back']){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates[_0x45800e(0x22c)]>0x0)previousGameButtonStates=[];}}else connectedGamepadIndex===null&&previousGameButtonStates[_0x45800e(0x22c)]>0x0&&(previousGameButtonStates=[]);let _0x27cc80=![];if(isManualControl&&isTwoPlayerMode&&selectedGameMode===_0x45800e(0x21d)&&!isPlayerTwoAI&&connectedGamepadIndexP2!==null){if(player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage)_0x27cc80=!![];}else{if(isManualControl&&isTwoPlayerMode&&selectedGameMode===_0x45800e(0x1ea)&&!isPlayerTwoAI&&connectedGamepadIndexP2!==null){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&currentPlayer===0x2)_0x27cc80=!![];}}if(_0x27cc80&&gameOverSequenceStartTime===0x0&&!isPaused){const _0x688286=navigator[_0x45800e(0x24d)]();if(_0x688286?.[connectedGamepadIndexP2]){const _0x160e84=_0x688286[connectedGamepadIndexP2],_0x1e801b=processSingleController(_0x160e84,previousGameButtonStatesP2);previousGameButtonStatesP2=_0x1e801b[_0x45800e(0x150)][_0x45800e(0x169)]();if(_0x1e801b['back']){stopGameAndShowMenu();return;}}else{if(previousGameButtonStatesP2[_0x45800e(0x22c)]>0x0)previousGameButtonStatesP2=[];}}else connectedGamepadIndexP2===null&&previousGameButtonStatesP2[_0x45800e(0x22c)]>0x0&&(previousGameButtonStatesP2=[]);if(isPaused){renderGame();return;}const _0x1711f1=showCsBonusScoreMessage||showPerfectMessage;if(isCoopAIDemoActive&&_0x1711f1&&gameCanvas?.[_0x45800e(0x218)]>0x0){const _0x223a1c=ship1&&player1Lives>0x0&&player2Lives<=0x0,_0x494efc=ship2&&player2Lives>0x0&&player1Lives<=0x0;if(_0x223a1c){const _0x13155b=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x47b23f=Math[_0x45800e(0x1ce)](gameCanvas[_0x45800e(0x218)]/0x2-_0x13155b/0x2);ship1['x']=_0x47b23f,ship1[_0x45800e(0x16d)]=_0x47b23f,smoothedShip1X=_0x47b23f,ship2&&(ship2[_0x45800e(0x16d)]=ship2['x'],smoothedShip2X=ship2['x']);}else{if(_0x494efc){const _0x4a5d05=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x1d0258=Math['round'](gameCanvas[_0x45800e(0x218)]/0x2-_0x4a5d05/0x2);ship2['x']=_0x1d0258,ship2['targetX']=_0x1d0258,smoothedShip2X=_0x1d0258,ship1&&(ship1[_0x45800e(0x16d)]=ship1['x'],smoothedShip1X=ship1['x']);}else{if(ship1&&player1Lives>0x0&&ship2&&player2Lives>0x0){const _0x5341e6=gameCanvas[_0x45800e(0x218)]/0x2-gameCanvas[_0x45800e(0x218)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1['x']=_0x5341e6,ship1[_0x45800e(0x16d)]=_0x5341e6,smoothedShip1X=_0x5341e6;const _0x25c88f=gameCanvas['width']/0x2+gameCanvas[_0x45800e(0x218)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2['x']=_0x25c88f,ship2[_0x45800e(0x16d)]=_0x25c88f,smoothedShip2X=_0x25c88f;}}}}else{if(_0x1711f1&&gameCanvas?.[_0x45800e(0x218)]>0x0){if(isTwoPlayerMode&&selectedGameMode===_0x45800e(0x21d)){const _0x1d925e=ship1&&player1Lives>0x0,_0x614a14=ship2&&player2Lives>0x0;if(_0x1d925e&&_0x614a14){if(isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){const _0x2762c6=gameCanvas[_0x45800e(0x218)]/0x2-gameCanvas[_0x45800e(0x218)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x221dfa=gameCanvas[_0x45800e(0x218)]/0x2+gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2['x']=_0x221dfa,ship2[_0x45800e(0x16d)]=_0x221dfa,smoothedShip2X=_0x221dfa);}}else{if(_0x1d925e&&ship1){const _0x5175ec=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x591c00=Math[_0x45800e(0x1ce)](gameCanvas[_0x45800e(0x218)]/0x2-_0x5175ec/0x2);ship1['x']=_0x591c00,ship1[_0x45800e(0x16d)]=_0x591c00,ship2&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x45800e(0x149)&&(ship2[_0x45800e(0x16d)]=ship2['x'],smoothedShip2X=ship2['x']);}else{if(_0x614a14&&ship2){const _0x212779=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x1e046b=Math['round'](gameCanvas['width']/0x2-_0x212779/0x2);ship2['x']=_0x1e046b,ship2[_0x45800e(0x16d)]=_0x1e046b;if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x45800e(0x149))smoothedShip2X=_0x1e046b;ship1&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'&&(ship1['targetX']=ship1['x']);}}}}else{if((!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x45800e(0x1ea)&&currentPlayer===0x2)&&ship){const _0x7e07e4=isDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH;ship['x']=Math[_0x45800e(0x1ce)](gameCanvas[_0x45800e(0x218)]/0x2-_0x7e07e4/0x2),ship[_0x45800e(0x16d)]=ship['x'];if(isPlayerTwoAI&&selectedGameMode===_0x45800e(0x1ea)&&currentPlayer===0x2)smoothedShipX=ship['x'];else{if(!isManualControl)smoothedShipX=ship['x'];}}}}}let _0x4ef150=![];if(selectedGameMode===_0x45800e(0x21d)&&level===0x1&&coopPlayersReadyStartTime>0x0){_0x4ef150=!![];if(isShowingCoopPlayersReady){if(_0x3ec281-coopPlayersReadyStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(_0x3ec281>=coopPlayersReadyStartTime+0xbb8){isShowingCoopPlayersReady=![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x45800e(0x149)?(isShowingIntro=!![],introStep=0x2,introDisplayStartTime=_0x3ec281):(isShowingIntro=!![],introStep=0x1,introDisplayStartTime=_0x3ec281);}}else{if(isShowingIntro){if(_0x3ec281-introDisplayStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}let _0x2da16b=INTRO_DURATION_PER_STEP;introStep===0x1&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&(_0x2da16b=TWO_PLAYER_STAGE_INTRO_DURATION);if(_0x3ec281>=introDisplayStartTime+_0x2da16b){if(introStep===0x1&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')){introStep=0x2,introDisplayStartTime=_0x3ec281,explosions=[];if(typeof updateExplosions===_0x45800e(0x243))updateExplosions();}else{isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();_0x4ef150=![],coopPlayersReadyStartTime=0x0;}}}else _0x4ef150=![],coopPlayersReadyStartTime=0x0;}if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x45800e(0x149))handlePlayerInput();if(typeof moveEntities===_0x45800e(0x243))moveEntities();renderGame();if(_0x4ef150)return;}if(selectedGameMode===_0x45800e(0x21d)&&level===0x1&&!gameJustStartedAndWaveLaunched&&coopPlayersReadyStartTime===0x0&&gameJustStarted){if(isFullGridWave)startFullGridWave();else{if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition['length']>0x0)scheduleEntranceFlightWave();else isWaveTransitioning=!![],readyForNextWaveReset=!![];}}gameJustStartedAndWaveLaunched=!![],gameJustStarted=![];}if(isShowingPlayerGameOverMessage&&isTwoPlayerMode&&selectedGameMode==='normal'){if(_0x3ec281-playerGameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x45800e(0x243))updateExplosions();}if(_0x3ec281-playerGameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION){isShowingPlayerGameOverMessage=![],explosions=[];if(typeof updateExplosions===_0x45800e(0x243))updateExplosions();const _0x5a696=playerWhoIsGameOver;playerWhoIsGameOver=0x0;if(nextActionAfterPlayerGameOver===_0x45800e(0x225))switchPlayerTurn()?(_0x5a696===0x2&&currentPlayer===0x1&&player1CompletedLevel===level&&(level++,player1CompletedLevel=-0x1,player1MaxLevelReached=Math[_0x45800e(0x26c)](player1MaxLevelReached,level)),resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![]):triggerFinalGameOverSequence();else nextActionAfterPlayerGameOver===_0x45800e(0x205)?triggerFinalGameOverSequence():triggerFinalGameOverSequence();renderGame();return;}else{renderGame();return;}}if(isTwoPlayerMode&&selectedGameMode===_0x45800e(0x21d)){let _0x4af0a8=![],_0x4e37f1=![];if(isPlayer1ShowingGameOverMessage){if(_0x3ec281-player1GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x45800e(0x243))updateExplosions();}if(_0x3ec281-player1GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer1ShowingGameOverMessage=![],_0x4af0a8=!![],explosions=[];if(typeof updateExplosions===_0x45800e(0x243))updateExplosions();}}if(isPlayer2ShowingGameOverMessage){if(_0x3ec281-player2GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(_0x3ec281-player2GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer2ShowingGameOverMessage=![],_0x4e37f1=!![],explosions=[];if(typeof updateExplosions===_0x45800e(0x243))updateExplosions();}}if(_0x4af0a8||_0x4e37f1){player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')handlePlayerInput();if(typeof moveEntities===_0x45800e(0x243))moveEntities();renderGame();if(gameOverSequenceStartTime>0x0||player1Lives>0x0||player2Lives>0x0)return;}else{if(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage){if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x45800e(0x149))handlePlayerInput();if(typeof moveEntities===_0x45800e(0x243))moveEntities();renderGame();return;}}}if(isShowingCaptureMessage){if(_0x3ec281-captureMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}const _0x9de547=enemies[_0x45800e(0x157)](_0x48d080=>_0x48d080['id']===capturedBossIdWithMessage);if(_0x9de547&&_0x9de547[_0x45800e(0x17f)]===_0x45800e(0x19b)){const _0x17961b=_0x3ec281-captureMessageStartTime,_0x539bb3=Math['min'](0x1,_0x17961b/CAPTURE_MESSAGE_DURATION);_0x9de547[_0x45800e(0x281)]=_0x539bb3*0x2*(0x2*Math['PI']);}else _0x9de547&&(_0x9de547[_0x45800e(0x281)]=0x0);if(isInGameState&&!isShowingPlayerGameOverMessage&&!isPlayer1ShowingGameOverMessage&&!isPlayer2ShowingGameOverMessage&&gameOverSequenceStartTime===0x0){if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')handlePlayerInput();if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x45800e(0x149))aiControlCoop();else isPlayerTwoAI&&selectedGameMode===_0x45800e(0x1ea)&&currentPlayer===0x2&&aiControl();if(typeof moveEntities===_0x45800e(0x243))moveEntities();updateExplosions(),updateFloatingScores();}if(_0x3ec281-captureMessageStartTime>=CAPTURE_MESSAGE_DURATION){isShowingCaptureMessage=![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();stopSound(_0x45800e(0x14d)),captureBeamActive=![];if(_0x9de547&&_0x9de547[_0x45800e(0x17f)]==='showing_capture_message'){_0x9de547[_0x45800e(0x17f)]=_0x45800e(0x260),_0x9de547['captureAnimationRotation']=0x0;try{const _0x37d02b=_0x9de547[_0x45800e(0x14f)]===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH,{x:_0x340405,y:_0x3d9f3d}=getCurrentGridSlotPosition(_0x9de547[_0x45800e(0x265)],_0x9de547[_0x45800e(0x23b)],_0x37d02b);_0x9de547[_0x45800e(0x214)]=_0x340405,_0x9de547[_0x45800e(0x1b2)]=_0x3d9f3d;}catch(_0x648ca3){console[_0x45800e(0x1d2)](_0x45800e(0x191)+_0x9de547['id']+':',_0x648ca3),_0x9de547[_0x45800e(0x214)]=gameCanvas[_0x45800e(0x218)]/0x2,_0x9de547[_0x45800e(0x1b2)]=ENEMY_TOP_MARGIN;}}else _0x9de547&&(_0x9de547['captureAnimationRotation']=0x0);capturedBossIdWithMessage=null;const _0x5e653c=gameCanvas?gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;if(isTwoPlayerMode&&selectedGameMode===_0x45800e(0x21d)){if(player1NeedsRespawnAfterCapture&&player1Lives>0x0){ship1={'x':player1CaptureRespawnX,'y':_0x5e653c,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player1CaptureRespawnX,'id':'p1'},isPlayer1ShipCaptured=![],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x3ec281+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=![],player1NeedsRespawnAfterCapture=![],player1CaptureRespawnX=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x45800e(0x149))smoothedShip1X=ship1['x'];}if(player2NeedsRespawnAfterCapture&&player2Lives>0x0){ship2={'x':player2CaptureRespawnX,'y':_0x5e653c,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player2CaptureRespawnX,'id':'p2'},isPlayer2ShipCaptured=![],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x3ec281+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=![],player2NeedsRespawnAfterCapture=![],player2CaptureRespawnX=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')smoothedShip2X=ship2['x'];}if(player1Lives<=0x0&&player2Lives<=0x0){if(gameOverSequenceStartTime===0x0)triggerFinalGameOverSequence();}}else{if(!isManualControl&&!isPlayerTwoAI){if(isShipCaptured&&playerLives>0x0){let _0x1e5618=gameCanvas?gameCanvas[_0x45800e(0x218)]/0x2-SHIP_WIDTH/0x2:0xc8;if(typeof smoothedShipX==='number')_0x1e5618=smoothedShipX;ship={'x':_0x1e5618,'y':_0x5e653c,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x1e5618,'id':_0x45800e(0x196)},isShipCaptured=![],isInvincible=!![],invincibilityEndTime=_0x3ec281+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=![],aiNeedsStabilization=!![];if(smoothedShipX===undefined&&ship)smoothedShipX=ship['x'];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isManualControl){if(isShipCaptured&&playerLives>0x0){let _0x147f19=capturedShipRespawnX_NormalMode!==0x0?capturedShipRespawnX_NormalMode:gameCanvas?gameCanvas[_0x45800e(0x218)]/0x2-SHIP_WIDTH/0x2:0xc8;ship={'x':_0x147f19,'y':_0x5e653c,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x147f19,'id':_0x45800e(0x196)},isShipCaptured=![],capturedShipRespawnX_NormalMode=0x0,isInvincible=!![],invincibilityEndTime=_0x3ec281+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x3ec281+RESPAWN_DELAY_MS;if(isPlayerTwoAI&&selectedGameMode===_0x45800e(0x1ea)&&currentPlayer===0x2)aiNeedsStabilization=!![];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&((!isTwoPlayerMode||isTwoPlayerMode&&selectedGameMode===_0x45800e(0x1ea)&&(currentPlayer===0x1&&player2Lives<=0x0||currentPlayer===0x2&&player1Lives<=0x0))&&triggerFinalGameOverSequence());}}}}renderGame();return;}const _0x1c9a03=!(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage||isShowingPlayerGameOverMessage),_0xc8b52=isShowingIntro&&!_0x4ef150&&!(selectedGameMode==='coop'&&level===0x1);if(!_0x4ef150&&gameOverSequenceStartTime===0x0&&_0x35b016&&!isShowingCaptureMessage&&_0x1c9a03){if(isInGameState&&!_0xc8b52){if(!(_0x1711f1&&!isManualControl)){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x45800e(0x149))aiControlCoop();else{if(isPlayerTwoAI&&selectedGameMode===_0x45800e(0x1ea)&&currentPlayer===0x2)aiControl();else!isManualControl&&!isPlayerTwoAI&&aiControl();}}isManualControl&&handlePlayerInput();}}isTwoPlayerMode&&selectedGameMode===_0x45800e(0x21d)?(isPlayer1Invincible&&_0x3ec281>=player1InvincibilityEndTime&&(isPlayer1Invincible=![],player1InvincibilityEndTime=0x0),isPlayer2Invincible&&_0x3ec281>=player2InvincibilityEndTime&&(isPlayer2Invincible=![],player2InvincibilityEndTime=0x0)):(isInvincible&&_0x3ec281>=invincibilityEndTime&&(isInvincible=![],invincibilityEndTime=0x0),isWaitingForRespawn&&_0x3ec281>=respawnTime&&(isWaitingForRespawn=![]));const _0x524d4d=showExtraLifeMessage&&_0x3ec281-extraLifeMessageStartTime<0x64;if(_0x524d4d&&(isWaveTransitioning||isChallengingStage&&enemies['length']===0x0)){}if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x45800e(0x149))&&isChallengingStage&&enemies[_0x45800e(0x22c)]===0x0&&!isCsCompletionDelayActive&&!showCsBonusScoreMessage&&!showPerfectMessage&&gameCanvas&&gameCanvas[_0x45800e(0x218)]>0x0){const _0x47eaca=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage,_0x13b045=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage;if(_0x47eaca&&!_0x13b045){const _0x110e93=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x19bf86=Math[_0x45800e(0x1ce)](gameCanvas[_0x45800e(0x218)]/0x2-_0x110e93/0x2);ship1['x']=_0x19bf86,ship1['targetX']=_0x19bf86,smoothedShip1X=_0x19bf86;}else{if(_0x13b045&&!_0x47eaca){const _0x55be6c=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x1f263d=Math[_0x45800e(0x1ce)](gameCanvas[_0x45800e(0x218)]/0x2-_0x55be6c/0x2);ship2['x']=_0x1f263d,ship2[_0x45800e(0x16d)]=_0x1f263d,smoothedShip2X=_0x1f263d;}}}if(isCsCompletionDelayActive&&_0x1c9a03&&gameOverSequenceStartTime===0x0){if(_0x3ec281-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY+EXPLOSION_DURATION){isCsCompletionDelayActive=![],csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies;csCompletionResultIsPerfect?(playSound(_0x45800e(0x1f1),![],0.6),showCsHitsMessage=!![],csHitsMessageStartTime=_0x3ec281):(playSound(_0x45800e(0x1bf),![],0.6),showCSClearMessage=!![],csClearMessageStartTime=_0x3ec281);bullets=[],enemyBullets=[],renderGame();return;}else{if(_0x3ec281-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY&&explosions[_0x45800e(0x22c)]>0x0){updateExplosions(),renderGame();return;}else{if(_0x3ec281-csCompletionDelayStartTime<CS_COMPLETION_MESSAGE_DELAY){renderGame();return;}}}}let _0x4241e0=![],_0x4afd83=![];if(_0x1c9a03&&gameOverSequenceStartTime===0x0&&!isShowingCoopPlayersReady&&!_0x4ef150){if(showCsHitsMessage){if(_0x3ec281-csHitsMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x45800e(0x243))updateExplosions();}if(Date[_0x45800e(0x200)]()-csHitsMessageStartTime>CS_HITS_MESSAGE_DURATION){showCsHitsMessage=![],showPerfectMessage=!![],perfectMessageStartTime=_0x3ec281,explosions=[];if(typeof updateExplosions===_0x45800e(0x243))updateExplosions();}_0x4afd83=!![];}else{if(showPerfectMessage){if(_0x3ec281-perfectMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(Date[_0x45800e(0x200)]()-perfectMessageStartTime>CS_PERFECT_MESSAGE_DURATION){showPerfectMessage=![],showCsBonusScoreMessage=!![],csBonusScoreMessageStartTime=_0x3ec281,explosions=[];if(typeof updateExplosions===_0x45800e(0x243))updateExplosions();}_0x4afd83=!![];}else{if(showCsBonusScoreMessage){if(_0x3ec281-csBonusScoreMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x45800e(0x243))updateExplosions();}if(Date[_0x45800e(0x200)]()-csBonusScoreMessageStartTime>CS_BONUS_MESSAGE_DURATION){showCsBonusScoreMessage=![],_0x4241e0=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions===_0x45800e(0x243))updateExplosions();}_0x4afd83=!![];}else{if(showCSClearMessage){if(_0x3ec281-csClearMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}Date[_0x45800e(0x200)]()-csClearMessageStartTime>=CS_CLEAR_HITS_DELAY&&!showCsHitsForClearMessage&&(showCsHitsForClearMessage=!![]);Date[_0x45800e(0x200)]()-csClearMessageStartTime>=CS_CLEAR_SCORE_DELAY&&!showCsScoreForClearMessage&&(showCsScoreForClearMessage=!![]);if(Date[_0x45800e(0x200)]()-csClearMessageStartTime>=CS_CLEAR_DELAY){showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],_0x4241e0=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions===_0x45800e(0x243))updateExplosions();}_0x4afd83=!![];}else{if(showExtraLifeMessage)Date[_0x45800e(0x200)]()-extraLifeMessageStartTime>EXTRA_LIFE_MESSAGE_DURATION&&(showExtraLifeMessage=![]),_0x4afd83=!![];else{if(showReadyMessage){if(_0x3ec281-readyMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(Date['now']()-readyMessageStartTime>READY_MESSAGE_DURATION){showReadyMessage=![],_0x4241e0=!![],explosions=[];if(typeof updateExplosions===_0x45800e(0x243))updateExplosions();}_0x4afd83=!![];}}}}}}}if(_0x4afd83&&!_0x4241e0&&!isShowingCoopPlayersReady&&!_0x4ef150&&!isShowingCaptureMessage&&_0x1c9a03){if(!((_0x1711f1||showCsHitsMessage||showCSClearMessage)&&isManualControl)&&!showExtraLifeMessage){renderGame();return;}}if(_0xc8b52&&_0x1c9a03&&gameOverSequenceStartTime===0x0){let _0x38bffb=![];const _0x2e8083=_0x3ec281-introDisplayStartTime;let _0x2bf1c3=INTRO_DURATION_PER_STEP;const _0x367b62=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x45800e(0x250),_0x1708f3=isTwoPlayerMode&&selectedGameMode===_0x45800e(0x1ea)&&!isPlayerTwoAI;(_0x1708f3||_0x367b62)&&(_0x2bf1c3=TWO_PLAYER_STAGE_INTRO_DURATION);if(introStep===0x1){if(_0x2e8083<0x64){explosions=[];if(typeof updateExplosions===_0x45800e(0x243))updateExplosions();}let _0xd51b3b=null,_0x4c8127=0x1;if(!playerIntroSoundPlayed){const _0x22d201=_0x367b62||_0x1708f3,_0x59418f=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x45800e(0x149)&&level>0x1;if(_0x22d201){if(currentPlayer===0x1&&level===0x1&&!initialGameStartSoundPlayedThisSession)_0xd51b3b='startSound',_0x4c8127=0.4;else(currentPlayer===0x2||level>0x1)&&(_0xd51b3b=_0x45800e(0x23d),_0x4c8127=0.2);}else{if(_0x59418f)_0xd51b3b=_0x45800e(0x23d),_0x4c8127=0.2;else{if(!isTwoPlayerMode){if(level===0x1&&!initialGameStartSoundPlayedThisSession)_0xd51b3b=_0x45800e(0x23e),_0x4c8127=0.4;else level>0x1&&(_0xd51b3b=_0x45800e(0x23d),_0x4c8127=0.2);}}}}_0xd51b3b&&(playSound(_0xd51b3b,![],_0x4c8127),playerIntroSoundPlayed=!![],_0xd51b3b==='startSound'&&(initialGameStartSoundPlayedThisSession=!![]));if(_0x2e8083>=_0x2bf1c3){if(isChallengingStage)introStep=0x3;else introStep=0x2;introDisplayStartTime=_0x3ec281,explosions=[];if(typeof updateExplosions===_0x45800e(0x243))updateExplosions();}}else{if(introStep===0x2){if(_0x2e8083<0x64){explosions=[];if(typeof updateExplosions===_0x45800e(0x243))updateExplosions();}if(!stageIntroSoundPlayed){if(playLevelUpAfterCSBonus&&(isTwoPlayerMode&&selectedGameMode==='coop'))playSound(_0x45800e(0x23d),![],0.2),playLevelUpAfterCSBonus=![],stageIntroSoundPlayed=!![];else{if(isTwoPlayerMode&&selectedGameMode===_0x45800e(0x21d)&&!isPlayerTwoAI&&!isCoopAIDemoActive)playSound(_0x45800e(0x23d),![],0.2),stageIntroSoundPlayed=!![];else{if(selectedGameMode==='coop'){if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x45800e(0x149))&&level>0x1)playSound(_0x45800e(0x23d),![],0.2),stageIntroSoundPlayed=!![];else(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x45800e(0x149))&&level===0x1&&(stageIntroSoundPlayed=!![]);}else{if(!isTwoPlayerMode&&level>0x1)playSound(_0x45800e(0x23d),![],0.2),stageIntroSoundPlayed=!![];else{if(level>0x1&&!playerIntroSoundPlayed&&!(isPlayerTwoAI&&selectedGameMode===_0x45800e(0x1ea))&&!initialGameStartSoundPlayedThisSession)playSound('levelUpSound',![],0.2),stageIntroSoundPlayed=!![];else level===0x1&&!isManualControl&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode===_0x45800e(0x21d))&&!initialGameStartSoundPlayedThisSession&&(playSound(_0x45800e(0x23e),![],0.4),initialGameStartSoundPlayedThisSession=!![],stageIntroSoundPlayed=!![]);}}}}}if(_0x2e8083>=_0x2bf1c3){_0x38bffb=!![],explosions=[];if(typeof updateExplosions===_0x45800e(0x243))updateExplosions();}}else{if(introStep===0x3){if(_0x2e8083<0x64){explosions=[];if(typeof updateExplosions===_0x45800e(0x243))updateExplosions();}!csIntroSoundPlayed&&(playSound(_0x45800e(0x1c2),![],0.4),csIntroSoundPlayed=!![],stageIntroSoundPlayed=!![]);if(_0x2e8083>=_0x2bf1c3){_0x38bffb=!![],explosions=[];if(typeof updateExplosions===_0x45800e(0x243))updateExplosions();}}}}if(isInGameState&&_0x1c9a03&&gameOverSequenceStartTime===0x0&&gameCanvas){let _0x163a7c=null,_0x50c5c1=null;const _0x524a00=isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x45800e(0x250)&&currentPlayer===0x1&&isShowingIntro;if(_0x524a00){let _0x1580ff=![],_0x2d7f9d=![];const _0x1e00b6=navigator[_0x45800e(0x24d)]();if(connectedGamepadIndex!==null&&_0x1e00b6?.[connectedGamepadIndex]){const _0x15a82c=_0x1e00b6[connectedGamepadIndex],_0x257d50=processSingleController(_0x15a82c,previousGameButtonStates);_0x1580ff=_0x257d50[_0x45800e(0x263)],_0x2d7f9d=_0x257d50[_0x45800e(0x1cb)];}_0x163a7c=keyboardP1LeftDown||_0x1580ff,_0x50c5c1=keyboardP1RightDown||_0x2d7f9d;}if(_0x367b62&&currentPlayer===0x2)aiControl();else{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x45800e(0x149))aiControlCoop();else!isManualControl&&!isPlayerTwoAI&&aiControl();}typeof moveEntities===_0x45800e(0x243)&&moveEntities(_0x163a7c,_0x50c5c1),updateExplosions(),updateFloatingScores();}if(_0x38bffb){isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![];isManualControl&&(isShowingDemoText=![]);if(!isChallengingStage)isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x45800e(0x149)?(aiShip1CanShootTime=Date['now']()+0x3e8,aiShip2CanShootTime=Date[_0x45800e(0x200)]()+0x4b0):aiCanShootTime=Date[_0x45800e(0x200)]()+(isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_NORMAL'?0x3e8:0xbb8);else{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x45800e(0x149))aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0;else aiCanShootTime=0x0;}const _0x4e76da=level===0x1&&selectedGameMode!=='coop',_0x513981=level===0x1&&selectedGameMode==='coop',_0x12f162=_0x4e76da&&!gameJustStartedAndWaveLaunched||level>0x1||isChallengingStage||_0x513981&&!gameJustStartedAndWaveLaunched;if(_0x12f162){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x45800e(0x22c)]>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound(_0x45800e(0x1c2),![],0.4);}else isEntrancePhaseActive=![],stopSound(_0x45800e(0x1c2)),isWaveTransitioning=!![],readyForNextWaveReset=!![],bullets=[],enemyBullets=[],explosions=[],setTimeout(()=>{const _0x218e68=_0x45800e,_0x21e2df=isTwoPlayerMode&&selectedGameMode===_0x218e68(0x21d)?player1Lives>0x0||player2Lives>0x0:playerLives>0x0;if((isInGameState||!isInGameState&&_0x21e2df)&&typeof resetWaveInternal===_0x218e68(0x243)){if(_0x21e2df)resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![];else triggerFinalGameOverSequence();}},0x64);}if(_0x4e76da||level>0x1||isChallengingStage||_0x513981)gameJustStartedAndWaveLaunched=!![];}}isManualControl&&_0xc8b52&&_0x1c9a03&&gameOverSequenceStartTime===0x0&&handlePlayerInput();renderGame();return;}const _0x401573=!_0x4ef150&&!_0xc8b52&&!_0x4241e0&&!isShowingCaptureMessage;if(gameJustStarted&&_0x401573){if(!gameJustStartedAndWaveLaunched){const _0x2f4fa3=selectedGameMode===_0x45800e(0x21d)&&level===0x1&&coopPlayersReadyStartTime!==0x0;if(!_0x2f4fa3){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x45800e(0x22c)]>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound(_0x45800e(0x1c2),![],0.4);}else isWaveTransitioning=!![],readyForNextWaveReset=!![];}gameJustStartedAndWaveLaunched=!![];}}gameJustStarted=![];}if(_0x401573&&isInGameState&&_0x1c9a03&&gameOverSequenceStartTime===0x0){if(!_0x1711f1||_0x1711f1&&isManualControl){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x45800e(0x149))aiControlCoop();else{if(isPlayerTwoAI&&selectedGameMode===_0x45800e(0x1ea)&&currentPlayer===0x2)aiControl();else!isManualControl&&!isPlayerTwoAI&&aiControl();}isManualControl&&handlePlayerInput();if(typeof moveEntities==='function')moveEntities();updateExplosions(),updateFloatingScores();}else _0x1711f1&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x45800e(0x149))&&(updateExplosions(),updateFloatingScores());}if(_0x401573&&_0x1c9a03&&gameOverSequenceStartTime===0x0){if(GRID_BREATH_ENABLED&&isInGameState&&!isChallengingStage&&!isWaveTransitioning&&_0x35b016){const _0x16b254=enemies[_0x45800e(0x164)](_0x23ebb1=>_0x23ebb1?.['state']===_0x45800e(0x22a));if(_0x16b254&&isGridBreathingActive){const _0x215cd6=_0x3ec281-gridBreathStartTime,_0x2988de=scaleValue(level,BASE_GRID_BREATH_CYCLE_MS,MIN_GRID_BREATH_CYCLE_MS),_0x3dbab3=_0x215cd6%_0x2988de;currentGridBreathFactor=(Math['sin'](_0x3dbab3/_0x2988de*Math['PI']*0x2-Math['PI']/0x2)+0x1)/0x2;}else{if(!_0x16b254&&isGridBreathingActive)isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0;else _0x16b254&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=_0x3ec281,currentGridBreathFactor=0x0);}}else isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if(isEntrancePhaseActive){const _0x491337=enemiesSpawnedThisWave>=totalEnemiesScheduledForWave,_0x26ae4b=enemies[_0x45800e(0x164)](_0x58262b=>_0x58262b?.[_0x45800e(0x17f)]===_0x45800e(0x278)||_0x58262b?.['state']==='moving_to_grid'||_0x58262b?.['state']===_0x45800e(0x15c));if(totalEnemiesScheduledForWave>0x0&&_0x491337&&!_0x26ae4b){const _0xc397bd=isEntrancePhaseActive;isEntrancePhaseActive=![];if(_0xc397bd){stopSound('entranceSound'),enemiesSpawnedThisWave=0x0,totalEnemiesScheduledForWave=0x0,enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],gridJustCompleted=!![];if(!isChallengingStage&&!isFullGridWave){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')coopAICaptureDiveAnticipationActive=!![],coopAICaptureDiveAnticipationEndTime=Date['now']()+COOP_AI_CAPTURE_DIVE_ANTICIPATION_DURATION_MS,typeof triggerImmediateCaptureDive==='function'&&triggerImmediateCaptureDive();else typeof triggerImmediateCaptureDive==='function'&&triggerImmediateCaptureDive();}}}}if(!isChallengingStage&&!_0xc8b52&&!isPaused&&!isWaveTransitioning)triggerGridFiring();if(!isWaveTransitioning&&_0x35b016&&!_0xc8b52&&!isShowingCaptureMessage&&!isEntrancePhaseActive){let _0x1761d5=enemies[_0x45800e(0x22c)]===0x0,_0x2b17c2=fallingShips[_0x45800e(0x22c)]===0x0,_0x2c0bbd=![];if(isChallengingStage){if(_0x1761d5&&!isEntrancePhaseActive)_0x2c0bbd=!![];}else{if(_0x1761d5&&!isEntrancePhaseActive&&_0x2b17c2)_0x2c0bbd=!![];}if(_0x2c0bbd){isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x45800e(0x149))&&gameCanvas&&gameCanvas[_0x45800e(0x218)]>0x0){const _0x331599=player1Lives,_0x27b3ac=player2Lives,_0x467698=gameCanvas[_0x45800e(0x25d)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(_0x331599>0x0&&_0x27b3ac<=0x0&&ship1){const _0x238b2c=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x2e8f5e=Math[_0x45800e(0x1ce)](gameCanvas['width']/0x2-_0x238b2c/0x2);ship1['x']=_0x2e8f5e,ship1[_0x45800e(0x16d)]=_0x2e8f5e,smoothedShip1X=_0x2e8f5e,ship1['y']=_0x467698;}else{if(_0x27b3ac>0x0&&_0x331599<=0x0&&ship2){const _0x1d4e2f=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x359940=Math[_0x45800e(0x1ce)](gameCanvas[_0x45800e(0x218)]/0x2-_0x1d4e2f/0x2);ship2['x']=_0x359940,ship2[_0x45800e(0x16d)]=_0x359940,smoothedShip2X=_0x359940,ship2['y']=_0x467698;}}}isWaveTransitioning=!![];isGridSoundPlaying&&(stopSound(_0x45800e(0x1a1)),isGridSoundPlaying=![]);!isChallengingStage&&(bullets=[],enemyBullets=[]);floatingScores=[],enemySpawnTimeouts[_0x45800e(0x187)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;let _0x344443;if(isChallengingStage){csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,setTimeout(()=>{const _0x49b0df=_0x45800e;if(isWaveTransitioning){explosions=[];if(typeof updateExplosions===_0x49b0df(0x243))updateExplosions();isCsCompletionDelayActive=!![],csCompletionDelayStartTime=Date[_0x49b0df(0x200)]();}},EXPLOSION_DURATION);if(csCompletionResultIsPerfect){let _0xd072de=0x2710;if(isTwoPlayerMode&&selectedGameMode===_0x45800e(0x21d))(player1Lives>0x0||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x45800e(0x149))&&ship1)&&(player1Score+=_0xd072de),(player2Lives>0x0||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x45800e(0x149))&&ship2)&&(player2Score+=_0xd072de),highScore=Math[_0x45800e(0x26c)](highScore,player1Score,player2Score),checkAndAwardExtraLife(null);else{score+=_0xd072de;if(!isTwoPlayerMode)player1Score=score;else{if(isTwoPlayerMode&&selectedGameMode==='normal'){if(currentPlayer===0x1)player1Score=score;else player2Score=score;}}highScore=Math['max'](highScore,score,player1Score,player2Score),checkAndAwardExtraLife(currentPlayer);}_0x344443=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_HITS_MESSAGE_DURATION+CS_PERFECT_MESSAGE_DURATION+CS_BONUS_MESSAGE_DURATION;}else isTwoPlayerMode&&selectedGameMode===_0x45800e(0x21d)?checkAndAwardExtraLife(null):checkAndAwardExtraLife(currentPlayer),_0x344443=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_CLEAR_DELAY;_0x344443+=0x64;}else playSound('waveUpSound',![],0.8),normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,_0x344443=POST_MESSAGE_RESET_DELAY;setTimeout(()=>{const _0x213e8b=_0x45800e;let _0x4c19ef=![],_0x187cd0=0x0;if(isTwoPlayerMode&&selectedGameMode==='normal'){_0x187cd0=currentPlayer;_0x187cd0===0x1?player1MaxLevelReached=Math['max'](player1MaxLevelReached,level):player2MaxLevelReached=Math[_0x213e8b(0x26c)](player2MaxLevelReached,level);const _0x5ec5a9=switchPlayerTurn();if(_0x5ec5a9){if(_0x187cd0===0x2&&currentPlayer===0x1&&player1CompletedLevel===level)_0x4c19ef=!![],player1CompletedLevel=-0x1;else _0x187cd0===0x1?(player1CompletedLevel=level,_0x4c19ef=![]):_0x4c19ef=![];}else _0x4c19ef=!![],player1CompletedLevel=-0x1;}else{_0x4c19ef=!![];if(!isTwoPlayerMode)player1MaxLevelReached=Math['max'](player1MaxLevelReached,level);else{if(isTwoPlayerMode&&selectedGameMode===_0x213e8b(0x21d)){if(player1Lives>0x0)player1MaxLevelReached=Math[_0x213e8b(0x26c)](player1MaxLevelReached,level);if(player2Lives>0x0)player2MaxLevelReached=Math[_0x213e8b(0x26c)](player2MaxLevelReached,level);}}}if(_0x4c19ef){level++;if(isTwoPlayerMode&&selectedGameMode===_0x213e8b(0x21d)){if(player1Lives>0x0)player1MaxLevelReached=Math['max'](player1MaxLevelReached,level);if(player2Lives>0x0)player2MaxLevelReached=Math[_0x213e8b(0x26c)](player2MaxLevelReached,level);}else{if(isTwoPlayerMode&&selectedGameMode===_0x213e8b(0x1ea)){if(currentPlayer===0x1&&player1Lives>0x0)player1MaxLevelReached=Math[_0x213e8b(0x26c)](player1MaxLevelReached,level);else{if(currentPlayer===0x2&&player2Lives>0x0)player2MaxLevelReached=Math[_0x213e8b(0x26c)](player2MaxLevelReached,level);}}else{if(playerLives>0x0)player1MaxLevelReached=Math['max'](player1MaxLevelReached,level);}}}let _0x55408d=![];if(isTwoPlayerMode&&selectedGameMode===_0x213e8b(0x21d))_0x55408d=player1Lives>0x0||player2Lives>0x0;else{if(isTwoPlayerMode&&selectedGameMode==='normal')_0x55408d=(currentPlayer===0x1?player1Lives:player2Lives)>0x0;else _0x55408d=playerLives>0x0;}_0x55408d?(resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![]):triggerFinalGameOverSequence();},_0x344443),renderGame();return;}if(!isChallengingStage){if(enemies['length']>0x0){let _0x279ed6=null;const _0x367975=enemies[_0x45800e(0x1eb)](_0x41e68f=>_0x41e68f?.[_0x45800e(0x17f)]==='in_grid'),_0x1dd5c2=_0x367975[_0x45800e(0x22c)]<=0x3,_0x590e83=Math[_0x45800e(0x26c)](0x1,Math[_0x45800e(0x156)](level,LEVEL_CAP_FOR_SCALING)),_0x477abb=0x1068,_0x23d33c=0x320,_0x42a7be=(_0x590e83-0x1)*((_0x477abb-_0x23d33c)/(LEVEL_CAP_FOR_SCALING-0x1)),_0x286670=Math[_0x45800e(0x26c)](_0x23d33c,_0x477abb-_0x42a7be),_0x111022=Math['round'](scaleValue(level,BASE_MAX_ATTACKING_ENEMIES,MAX_MAX_ATTACKING_ENEMIES)),_0x5b9208=enemies[_0x45800e(0x1eb)](_0x5d0de9=>_0x5d0de9?.[_0x45800e(0x17f)]==='attacking'||_0x5d0de9?.[_0x45800e(0x17f)]===_0x45800e(0x195))[_0x45800e(0x22c)];if(_0x1dd5c2||_0x3ec281-lastEnemyDetachTime>_0x286670&&_0x367975[_0x45800e(0x22c)]>0x0&&_0x5b9208<_0x111022){_0x279ed6=findAndDetachEnemy();if(_0x279ed6&&_0x279ed6[_0x45800e(0x22c)]>0x0){const _0x8a3081=_0x279ed6[_0x45800e(0x166)](_0x31c43d=>enemies[_0x45800e(0x157)](_0x35472f=>_0x35472f?.['id']===_0x31c43d['id']))['filter'](_0x5cd65a=>_0x5cd65a&&_0x5cd65a['state']===_0x45800e(0x22a));if(_0x8a3081['length']>0x0){const _0x3fa089=_0x8a3081[0x0],_0x5350af=_0x3fa089[_0x45800e(0x24e)];if(!_0x1dd5c2)lastEnemyDetachTime=_0x3ec281;if(_0x5350af==='normal'){const _0x420234=generateAttackPathInternal(_0x3fa089);if(_0x420234&&_0x420234['length']>0x0){if(_0x8a3081[_0x45800e(0x22c)]===0x3&&_0x3fa089['type']===ENEMY3_TYPE&&level!==0x1)playSound(_0x45800e(0x258),![],0.3);let _0x29ab32=[..._0x8a3081];const _0x144174=_0x29ab32[_0x45800e(0x22c)];if(_0x144174>0x1){let _0x5538e3=null,_0x14681e=[];_0x29ab32['forEach'](_0x2991b2=>{const _0x627e32=_0x45800e;if(_0x2991b2['type']===ENEMY3_TYPE)_0x5538e3=_0x2991b2;else _0x14681e[_0x627e32(0x20a)](_0x2991b2);});if(_0x5538e3&&level!==0x1&&_0x144174===0x3&&_0x14681e[_0x45800e(0x22c)]===0x2)_0x29ab32=[_0x14681e[0x0],_0x5538e3,_0x14681e[0x1]];else _0x29ab32['sort']((_0x49142e,_0xd30462)=>(_0x49142e?.[_0x45800e(0x23b)]??0x0)-(_0xd30462?.[_0x45800e(0x23b)]??0x0));const _0x2ad683=0x5;let _0x2cd28b=0x0;_0x29ab32=_0x29ab32[_0x45800e(0x1eb)](_0x4565a7=>_0x4565a7&&typeof _0x4565a7['width']===_0x45800e(0x145));const _0x3e7649=_0x29ab32[_0x45800e(0x22c)];for(let _0x18fb87=0x0;_0x18fb87<_0x3e7649;_0x18fb87++){_0x2cd28b+=_0x29ab32[_0x18fb87][_0x45800e(0x218)];if(_0x18fb87<_0x3e7649-0x1)_0x2cd28b+=_0x2ad683;}const _0x835431=-_0x2cd28b/0x2;let _0x422ad5=_0x835431;for(let _0x555dd9=0x0;_0x555dd9<_0x3e7649;_0x555dd9++){const _0x424924=_0x29ab32[_0x555dd9];_0x424924[_0x45800e(0x177)]=_0x422ad5+_0x424924[_0x45800e(0x218)]/0x2,_0x422ad5+=_0x424924['width']+_0x2ad683;}}else _0x29ab32[_0x45800e(0x187)](_0x314e54=>_0x314e54[_0x45800e(0x177)]=0x0);const _0x99fb4b=_0x45800e(0x1a2)+_0x3fa089['id']+'-'+_0x3ec281;_0x29ab32[_0x45800e(0x187)](_0x52a34d=>{const _0x26ef9e=_0x45800e;if(_0x52a34d)_0x52a34d[_0x26ef9e(0x1fb)]=_0x99fb4b;});let _0xa87c8b=![],_0xb6305f=GROUP_FIRE_BURST_DELAY;if(_0x3fa089[_0x45800e(0x14f)]===ENEMY2_TYPE||_0x3fa089[_0x45800e(0x14f)]===ENEMY3_TYPE){_0xa87c8b=!![];if(_0x3fa089[_0x45800e(0x14f)]===ENEMY2_TYPE&&_0x144174===0x1)_0xb6305f=SOLO_BUTTERFLY_FIRE_DELAY;}else{if(_0x3fa089[_0x45800e(0x14f)]===ENEMY1_TYPE)_0xa87c8b=!![];}if(_0x1dd5c2&&level>0x1)_0xa87c8b=![];_0xa87c8b&&_0x29ab32[_0x45800e(0x187)](_0x35fc96=>{const _0x284eb9=_0x45800e,_0x49309e=_0x35fc96&&!(_0x35fc96[_0x284eb9(0x14f)]===ENEMY3_TYPE&&_0x35fc96[_0x284eb9(0x16e)]);if(_0x49309e)fireEnemyBurst(_0x35fc96['id'],_0x284eb9(0x152),_0xb6305f);}),_0x29ab32[_0x45800e(0x187)]((_0x50e749,_0x424eef)=>{const _0x6367dd=_0x45800e;_0x50e749&&_0x50e749[_0x6367dd(0x17f)]===_0x6367dd(0x22a)&&(_0x50e749['state']=_0x6367dd(0x195),_0x50e749['justReturned']=![],_0x50e749['velocityX']=0x0,_0x50e749['velocityY']=0x0,_0x50e749[_0x6367dd(0x231)]=![],setTimeout(()=>{const _0x4f671c=_0x6367dd;if(isPaused)return;const _0x4af284=enemies['find'](_0x5f19d0=>_0x5f19d0?.['id']===_0x50e749['id']);if(_0x4af284&&_0x4af284['state']==='preparing_attack')try{const _0x493760=scaleValue(level,BASE_ENEMY_ATTACK_SPEED,MAX_ENEMY_ATTACK_SPEED);let _0x1724c2=0x1;if(_0x4af284[_0x4f671c(0x14f)]===ENEMY1_TYPE)_0x1724c2=ENEMY1_DIVE_SPEED_FACTOR;else{if(_0x4af284[_0x4f671c(0x14f)]===ENEMY2_TYPE)_0x1724c2=ENEMY2_DIVE_SPEED_FACTOR;else{if(_0x4af284[_0x4f671c(0x14f)]===ENEMY3_TYPE)_0x1724c2=ENEMY3_ATTACK_SPEED_FACTOR;}}if(_0x50e749[_0x4f671c(0x14f)]===ENEMY3_TYPE)playSound(_0x4f671c(0x248),![],0.2);else playSound(_0x4f671c(0x15e),![],0.2);_0x4af284[_0x4f671c(0x17f)]='attacking',_0x4af284[_0x4f671c(0x25f)]=_0x420234,_0x4af284[_0x4f671c(0x201)]=0x0,_0x4af284[_0x4f671c(0x14a)]=0x0,_0x4af284['speed']=_0x493760*_0x1724c2,_0x4af284['lastFiredTime']=0x0,_0x4af284[_0x4f671c(0x231)]=!![];}catch(_0x4f0722){console[_0x4f671c(0x1d2)](_0x4f671c(0x1e8)+_0x50e749['id']+':',_0x4f0722);}},_0x424eef*GROUP_DETACH_DELAY_MS));});}else _0x279ed6[_0x45800e(0x187)](_0x110b77=>{const _0x347d5e=_0x45800e;if(_0x110b77)_0x110b77[_0x347d5e(0x170)]=![];});}}}}}}enemies['forEach'](_0x3fd65f=>{const _0x501b82=_0x45800e;if(_0x3fd65f&&_0x3fd65f[_0x501b82(0x14f)]===ENEMY3_TYPE&&_0x3fd65f[_0x501b82(0x16e)]&&_0x3fd65f[_0x501b82(0x17f)]===_0x501b82(0x152)&&_0x3fd65f[_0x501b82(0x1a9)]&&typeof _0x3fd65f[_0x501b82(0x244)]===_0x501b82(0x145)){if(_0x3ec281-_0x3fd65f[_0x501b82(0x244)]>CAPTURED_SHIP_FIRE_COOLDOWN_MS){const _0x43f452=_0x3fd65f['x']+_0x3fd65f[_0x501b82(0x218)]/0x2,_0x71a59a=_0x3fd65f['y']+_0x3fd65f['height']+_0x3fd65f[_0x501b82(0x1a9)][_0x501b82(0x25d)]*0.5,_0x154354={'x':_0x43f452,'y':_0x71a59a};createBulletSimple(_0x3fd65f,_0x154354)&&(_0x3fd65f[_0x501b82(0x244)]=_0x3ec281,playSound(_0x501b82(0x19d),![],0.4));}}});}}else{if(gameOverSequenceStartTime>0x0){const _0x18b927=_0x3ec281-gameOverSequenceStartTime,_0x2cb3e0=_0x18b927>=GAME_OVER_DURATION;if(_0x2cb3e0&&!isShowingResultsScreen){isShowingResultsScreen=!![],stopSound(_0x45800e(0x27b)),playSound('resultsMusicSound',!![],0.2),explosions=[];if(typeof updateExplosions===_0x45800e(0x243))updateExplosions();}}}!_0x4ef150&&renderGame();}catch(_0x2a5eb7){console[_0x45800e(0x1d2)](_0x45800e(0x241),_0x2a5eb7,_0x2a5eb7[_0x45800e(0x275)]),isPaused=![];mainLoopId&&(cancelAnimationFrame(mainLoopId),mainLoopId=null);isInGameState=![],isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',alert(_0x45800e(0x19e)),stopAllGameSoundsInternal(),isGridSoundPlaying=![],isInvincible=![],invincibilityEndTime=0x0;try{typeof showMenuState===_0x45800e(0x243)&&showMenuState();}catch(_0xb5763d){console['error']('Failed\x20to\x20return\x20to\x20menu\x20after\x20critical\x20error:',_0xb5763d);}}}function checkAndAwardExtraLife(_0x3fdc75=null){const _0x4b7f66=_0x236fd5;try{const _0x451952=[];if(_0x3fdc75===0x1){const _0x53a12b=isTwoPlayerMode&&selectedGameMode===_0x4b7f66(0x21d)?player1Lives:isTwoPlayerMode&&selectedGameMode===_0x4b7f66(0x1ea)&&currentPlayer===0x1?playerLives:player1Lives,_0x2d340b=isTwoPlayerMode&&selectedGameMode===_0x4b7f66(0x21d)?player1Score:isTwoPlayerMode&&selectedGameMode===_0x4b7f66(0x1ea)&&currentPlayer===0x1?score:player1Score;_0x451952[_0x4b7f66(0x20a)]({'num':0x1,'currentLives':_0x53a12b,'currentScore':_0x2d340b,'thresholdsMet':player1LifeThresholdsMet});}else{if(_0x3fdc75===0x2&&isTwoPlayerMode){const _0x436621=selectedGameMode===_0x4b7f66(0x21d)?player2Lives:selectedGameMode===_0x4b7f66(0x1ea)&&currentPlayer===0x2?playerLives:player2Lives,_0x4bcd9e=selectedGameMode===_0x4b7f66(0x21d)?player2Score:selectedGameMode===_0x4b7f66(0x1ea)&&currentPlayer===0x2?score:player2Score;_0x451952[_0x4b7f66(0x20a)]({'num':0x2,'currentLives':_0x436621,'currentScore':_0x4bcd9e,'thresholdsMet':player2LifeThresholdsMet});}else{if(isTwoPlayerMode&&selectedGameMode==='coop'&&_0x3fdc75===null)_0x451952['push']({'num':0x1,'currentLives':player1Lives,'currentScore':player1Score,'thresholdsMet':player1LifeThresholdsMet}),_0x451952[_0x4b7f66(0x20a)]({'num':0x2,'currentLives':player2Lives,'currentScore':player2Score,'thresholdsMet':player2LifeThresholdsMet});else{if(!isTwoPlayerMode&&(_0x3fdc75===null||_0x3fdc75===0x1))_0x451952[_0x4b7f66(0x20a)]({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet});else isTwoPlayerMode&&selectedGameMode==='normal'&&_0x3fdc75===currentPlayer&&(currentPlayer===0x1?_0x451952['push']({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet}):_0x451952[_0x4b7f66(0x20a)]({'num':0x2,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player2LifeThresholdsMet}));}}}_0x451952[_0x4b7f66(0x187)](_0x3c9426=>{const _0x347f29=_0x4b7f66;let _0x5c5ef5=![];while(!![]){let _0x1ed921=![],_0x14c150=-0x1;const _0x2fb3c=_0x3c9426[_0x347f29(0x1d8)][_0x347f29(0x246)];if(_0x2fb3c===0x0)_0x14c150=EXTRA_LIFE_THRESHOLD_1;else{if(_0x2fb3c===0x1&&!_0x3c9426[_0x347f29(0x1d8)]['has'](EXTRA_LIFE_THRESHOLD_2))_0x14c150=EXTRA_LIFE_THRESHOLD_2;else{if(_0x2fb3c>=0x1&&_0x3c9426[_0x347f29(0x1d8)][_0x347f29(0x1e5)](EXTRA_LIFE_THRESHOLD_1)&&_0x3c9426[_0x347f29(0x1d8)][_0x347f29(0x1e5)](EXTRA_LIFE_THRESHOLD_2)){let _0x2d13af=0x0;_0x3c9426['thresholdsMet'][_0x347f29(0x187)](_0x303569=>{_0x303569>=EXTRA_LIFE_THRESHOLD_2&&(_0x303569-EXTRA_LIFE_THRESHOLD_2)%RECURRING_EXTRA_LIFE_INTERVAL===0x0&&_0x2d13af++;}),_0x14c150=EXTRA_LIFE_THRESHOLD_2+_0x2d13af*RECURRING_EXTRA_LIFE_INTERVAL;}else{if(_0x2fb3c===0x1&&_0x3c9426['thresholdsMet'][_0x347f29(0x1e5)](EXTRA_LIFE_THRESHOLD_1)&&!_0x3c9426[_0x347f29(0x1d8)][_0x347f29(0x1e5)](EXTRA_LIFE_THRESHOLD_2))_0x14c150=EXTRA_LIFE_THRESHOLD_2;else _0x2fb3c===0x1&&_0x3c9426[_0x347f29(0x1d8)]['has'](EXTRA_LIFE_THRESHOLD_2)&&!_0x3c9426[_0x347f29(0x1d8)][_0x347f29(0x1e5)](EXTRA_LIFE_THRESHOLD_1)&&(_0x14c150=EXTRA_LIFE_THRESHOLD_1);}}}if(_0x14c150!==-0x1&&_0x3c9426[_0x347f29(0x178)]>=_0x14c150&&!_0x3c9426[_0x347f29(0x1d8)]['has'](_0x14c150)){if(_0x3c9426[_0x347f29(0x161)]===0x1){if(isTwoPlayerMode&&selectedGameMode==='coop')player1Lives++;else{if(isTwoPlayerMode&&selectedGameMode===_0x347f29(0x1ea)&&currentPlayer===0x1)playerLives++;else{if(!isTwoPlayerMode)playerLives++;}}player1Lives=isTwoPlayerMode&&selectedGameMode===_0x347f29(0x21d)?player1Lives:isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x1?playerLives:player1Lives,_0x3c9426['currentLives']=player1Lives;}else{if(_0x3c9426['num']===0x2){if(isTwoPlayerMode&&selectedGameMode==='coop')player2Lives++;else{if(isTwoPlayerMode&&selectedGameMode===_0x347f29(0x1ea)&&currentPlayer===0x2)playerLives++;}player2Lives=isTwoPlayerMode&&selectedGameMode===_0x347f29(0x21d)?player2Lives:isTwoPlayerMode&&selectedGameMode===_0x347f29(0x1ea)&&currentPlayer===0x2?playerLives:player2Lives,_0x3c9426[_0x347f29(0x155)]=player2Lives;}}_0x3c9426['thresholdsMet']['add'](_0x14c150),_0x5c5ef5=!![],_0x1ed921=!![];}if(!_0x1ed921)break;}_0x5c5ef5&&!showExtraLifeMessage&&!showCsBonusScoreMessage&&!showPerfectMessage&&!showCsHitsMessage&&!showCSClearMessage&&!showReadyMessage&&setTimeout(()=>{const _0x1ced31=_0x347f29;if(isInGameState){explosions=[];if(typeof updateExplosions==='function')updateExplosions();showExtraLifeMessage=!![],extraLifeMessageStartTime=Date[_0x1ced31(0x200)](),playSound(_0x1ced31(0x153),![],0.5);}},EXPLOSION_DURATION);});}catch(_0x5208e2){console['error'](_0x4b7f66(0x20d),_0x5208e2);}}