const _0x20bf56=_0x2cf7;(function(_0x42314b,_0x1cc9fe){const _0x5c524a=_0x2cf7,_0x59a0c1=_0x42314b();while(!![]){try{const _0x168b94=-parseInt(_0x5c524a(0x28e))/0x1+-parseInt(_0x5c524a(0x263))/0x2*(parseInt(_0x5c524a(0x1ff))/0x3)+-parseInt(_0x5c524a(0x297))/0x4+-parseInt(_0x5c524a(0x203))/0x5*(-parseInt(_0x5c524a(0x1cd))/0x6)+parseInt(_0x5c524a(0x293))/0x7+-parseInt(_0x5c524a(0x1e2))/0x8+-parseInt(_0x5c524a(0x24b))/0x9*(-parseInt(_0x5c524a(0x259))/0xa);if(_0x168b94===_0x1cc9fe)break;else _0x59a0c1['push'](_0x59a0c1['shift']());}catch(_0x34b6ae){_0x59a0c1['push'](_0x59a0c1['shift']());}}}(_0x42e1,0xb6030));function generateAttackPathInternal(_0x13cb22){const _0x3a91be=_0x2cf7;try{if(!_0x13cb22||!gameCanvas)return[];const _0x53d1fc=_0x13cb22['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x13cb22[_0x3a91be(0x239)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x3b69d3=_0x13cb22[_0x3a91be(0x239)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x13cb22[_0x3a91be(0x239)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x4445d1=_0x53d1fc*0.5,_0x38846c=gameCanvas[_0x3a91be(0x1b1)],_0x3cc944=gameCanvas[_0x3a91be(0x276)];let _0x55ef0b=[];const _0x420720={'x':_0x13cb22['x'],'y':_0x13cb22['y']},_0x4c80dc=Math['min'](_0x3cc944*0.06,_0x3b69d3*1.8),_0x73740c=Math[_0x3a91be(0x204)](_0x38846c*0.04,_0x53d1fc*1.2),_0xdf2181=_0x13cb22['x']+_0x53d1fc/0x2<_0x38846c/0x2?0x1:-0x1,_0x2d757c={'x':_0x420720['x']-_0xdf2181*_0x73740c*0.6,'y':_0x420720['y']-_0x4c80dc};_0x2d757c['x']=Math[_0x3a91be(0x27d)](_0x4445d1,Math['min'](_0x38846c-_0x4445d1-_0x53d1fc,_0x2d757c['x'])),_0x2d757c['y']=Math[_0x3a91be(0x27d)](_0x4445d1,_0x2d757c['y']);const _0x44d076={'x':_0x420720['x']+_0xdf2181*_0x73740c*0.1,'y':_0x420720['y']-_0x4c80dc*1.4},_0x4eb1eb={'x':_0x2d757c['x']+_0xdf2181*_0x73740c*0.3,'y':_0x420720['y']-_0x4c80dc*1.5},_0x27bd27={'p0':_0x420720,'p1':_0x44d076,'p2':_0x4eb1eb,'p3':_0x2d757c};_0x55ef0b['push'](_0x27bd27);const _0xd276be=_0x2d757c,_0x2f8e8d=_0x3cc944*0.45,_0x161f47=_0x38846c*0.22,_0x2332ca=_0x3cc944*0.28,_0x3640ce=0.5,_0x48e258=0.6,_0x2e9a59=_0x3cc944*0.85,_0x238abc=Math[_0x3a91be(0x27a)](Math['random']()*0x3);let _0x1e3692=[];if(_0x238abc===0x0){const _0x5a24b7=_0x2f8e8d+Math[_0x3a91be(0x1bf)]()*_0x3cc944*0.1,_0x10b4a7=_0x161f47+Math[_0x3a91be(0x1bf)]()*_0x38846c*0.08,_0x2e630f=_0x2332ca+Math[_0x3a91be(0x1bf)]()*_0x3cc944*0.08,_0x6ce155=_0xd276be['x']+_0xdf2181*_0x10b4a7*0.5,_0x1b457f=Math[_0x3a91be(0x204)](_0x2e9a59,_0xd276be['y']+_0x5a24b7),_0xdfbea7=_0x6ce155+_0xdf2181*_0x10b4a7*0.5,_0x3c993c=Math[_0x3a91be(0x27d)](_0xd276be['y']+0x14,_0x1b457f-_0x2e630f),_0x10e938=_0xdfbea7-_0xdf2181*_0x10b4a7*0.9,_0x8e60b7=Math[_0x3a91be(0x27d)](_0xd276be['y']+0x28,_0x3c993c+_0x2e630f*0.6),_0x29ffc8=_0x10e938-_0xdf2181*_0x10b4a7*0.3,_0xccd3b=_0x3cc944+_0x3b69d3*0x2,_0x459703=Math[_0x3a91be(0x27d)](_0x4445d1,Math['min'](_0x38846c-_0x4445d1-_0x53d1fc,_0x6ce155)),_0x251f1f=Math[_0x3a91be(0x27d)](_0x4445d1,Math[_0x3a91be(0x204)](_0x38846c-_0x4445d1-_0x53d1fc,_0xdfbea7)),_0x2f745c=Math[_0x3a91be(0x27d)](_0x4445d1,Math[_0x3a91be(0x204)](_0x38846c-_0x4445d1-_0x53d1fc,_0x10e938)),_0x3e7d06={'x':_0xd276be['x'],'y':_0xd276be['y']+_0x5a24b7*_0x48e258*0.5},_0x3fa47a={'x':_0x459703-_0xdf2181*_0x10b4a7*_0x3640ce,'y':_0x1b457f},_0x58b218={'x':_0x459703,'y':_0x1b457f},_0x144f44={'x':_0x459703+_0xdf2181*_0x10b4a7*_0x3640ce,'y':_0x1b457f},_0x586f7c={'x':_0x251f1f,'y':_0x3c993c+_0x2e630f*_0x48e258},_0x306daf={'x':_0x251f1f,'y':_0x3c993c},_0x1ff01c={'x':_0x251f1f,'y':_0x3c993c-_0x2e630f*_0x48e258*0.5},_0x5d928b={'x':_0x2f745c+_0xdf2181*_0x10b4a7*_0x3640ce,'y':_0x8e60b7},_0x3b8d78={'x':_0x2f745c,'y':_0x8e60b7},_0x2189a2={'x':_0x3b8d78['x'],'y':_0x3b8d78['y']+_0x3cc944*0.1},_0x473b13={'x':_0x29ffc8,'y':_0xccd3b-_0x3cc944*0.2},_0x5a22fc={'x':_0x29ffc8,'y':_0xccd3b};_0x1e3692=[{'p0':_0xd276be,'p1':_0x3e7d06,'p2':_0x3fa47a,'p3':_0x58b218},{'p0':_0x58b218,'p1':_0x144f44,'p2':_0x586f7c,'p3':_0x306daf},{'p0':_0x306daf,'p1':_0x1ff01c,'p2':_0x5d928b,'p3':_0x3b8d78},{'p0':_0x3b8d78,'p1':_0x2189a2,'p2':_0x473b13,'p3':_0x5a22fc}];}else{if(_0x238abc===0x1){const _0x446a3b=_0x2f8e8d*0.8+Math['random']()*_0x3cc944*0.1,_0x4a884d=_0x161f47*1.2+Math[_0x3a91be(0x1bf)]()*_0x38846c*0.1,_0x3ae09c=_0x2332ca*0.7+Math['random']()*_0x3cc944*0.1,_0x191c1a=_0xd276be['x']+_0xdf2181*_0x4a884d*0.4,_0x58deba=Math[_0x3a91be(0x204)](_0x2e9a59-_0x3ae09c*0.5,_0xd276be['y']+_0x446a3b*0.6),_0x59ecfe=_0x191c1a+_0xdf2181*_0x4a884d*0.6,_0x37bd71=Math[_0x3a91be(0x204)](_0x2e9a59,_0x58deba+_0x3ae09c),_0x573844=_0x59ecfe-_0xdf2181*_0x4a884d*0.5,_0x2ac437=_0x3cc944+_0x3b69d3*0x2,_0x5cdeee=Math[_0x3a91be(0x27d)](_0x4445d1,Math['min'](_0x38846c-_0x4445d1-_0x53d1fc,_0x191c1a)),_0xbe6ee0=Math[_0x3a91be(0x27d)](_0x4445d1,Math['min'](_0x38846c-_0x4445d1-_0x53d1fc,_0x59ecfe)),_0x251799={'x':_0xd276be['x']-_0xdf2181*_0x4a884d*0.1,'y':_0xd276be['y']+_0x446a3b*0.3},_0x24bd5e={'x':_0x5cdeee-_0xdf2181*_0x4a884d*_0x3640ce*0.8,'y':_0x58deba+_0x3ae09c*_0x48e258*0.4},_0x531332={'x':_0x5cdeee,'y':_0x58deba},_0x1bc644={'x':_0x5cdeee+_0xdf2181*_0x4a884d*_0x3640ce*0.8,'y':_0x58deba-_0x3ae09c*_0x48e258*0.4},_0x428080={'x':_0xbe6ee0+_0xdf2181*_0x4a884d*_0x3640ce*0.6,'y':_0x37bd71+_0x3ae09c*_0x48e258*0.5},_0x750392={'x':_0xbe6ee0,'y':_0x37bd71},_0x392178={'x':_0xbe6ee0-_0xdf2181*_0x4a884d*0.2,'y':_0x37bd71+_0x3cc944*0.1},_0x3fc62f={'x':_0x573844,'y':_0x2ac437-_0x3cc944*0.3},_0x405edd={'x':_0x573844,'y':_0x2ac437};_0x1e3692=[{'p0':_0xd276be,'p1':_0x251799,'p2':_0x24bd5e,'p3':_0x531332},{'p0':_0x531332,'p1':_0x1bc644,'p2':_0x428080,'p3':_0x750392},{'p0':_0x750392,'p1':_0x392178,'p2':_0x3fc62f,'p3':_0x405edd}];}else{const _0x195c41=_0x2f8e8d*0.6+Math[_0x3a91be(0x1bf)]()*_0x3cc944*0.05,_0x39ee55=_0x161f47*0.7+Math[_0x3a91be(0x1bf)]()*_0x38846c*0.05,_0x4f4df0=_0x2332ca*0.6+Math[_0x3a91be(0x1bf)]()*_0x3cc944*0.05,_0x2b7b55=_0x4f4df0*1.5,_0x48cb26=_0xd276be['x']+_0xdf2181*_0x39ee55*0.5,_0xcba86f=Math['min'](_0x2e9a59-_0x2b7b55,_0xd276be['y']+_0x195c41),_0x2fd691=_0x48cb26+_0xdf2181*_0x39ee55*0.5,_0x218400=_0xcba86f+_0x4f4df0,_0x3ea619=_0x2fd691-_0xdf2181*_0x39ee55*0.8,_0x275976=Math[_0x3a91be(0x204)](_0x2e9a59,_0x218400+_0x2b7b55*0.7),_0x30b7b4=_0x3ea619+_0xdf2181*_0x39ee55*0.4,_0x4d5d9c=_0x275976+_0x4f4df0*0.8,_0x4285ba=_0x30b7b4,_0xea5845=_0x3cc944+_0x3b69d3*0x2,_0x18bfc=Math[_0x3a91be(0x27d)](_0x4445d1,Math[_0x3a91be(0x204)](_0x38846c-_0x4445d1-_0x53d1fc,_0x48cb26)),_0x544ba9=Math[_0x3a91be(0x27d)](_0x4445d1,Math[_0x3a91be(0x204)](_0x38846c-_0x4445d1-_0x53d1fc,_0x2fd691)),_0x29f3e5=Math[_0x3a91be(0x27d)](_0x4445d1,Math['min'](_0x38846c-_0x4445d1-_0x53d1fc,_0x3ea619)),_0x8dec1d=Math[_0x3a91be(0x27d)](_0x4445d1,Math['min'](_0x38846c-_0x4445d1-_0x53d1fc,_0x30b7b4)),_0x4d27bd={'x':_0xd276be['x'],'y':_0xd276be['y']+_0x195c41*0.5},_0x720e7f={'x':_0x18bfc-_0xdf2181*_0x39ee55*_0x3640ce,'y':_0xcba86f+_0x4f4df0*_0x48e258*0.3},_0x543f46={'x':_0x18bfc,'y':_0xcba86f},_0x56aba2={'x':_0x18bfc+_0xdf2181*_0x39ee55*_0x3640ce,'y':_0xcba86f-_0x4f4df0*_0x48e258*0.3},_0x2dfd69={'x':_0x544ba9+_0xdf2181*_0x39ee55*_0x3640ce,'y':_0x218400+_0x4f4df0*_0x48e258*0.5},_0x3ee85f={'x':_0x544ba9,'y':_0x218400},_0x17780d={'x':_0x544ba9-_0xdf2181*_0x39ee55*_0x3640ce,'y':_0x218400-_0x4f4df0*_0x48e258*0.5},_0x324ef6={'x':_0x29f3e5-_0xdf2181*_0x39ee55*_0x3640ce,'y':_0x275976+_0x4f4df0*_0x48e258*0.4},_0x58e617={'x':_0x29f3e5,'y':_0x275976},_0x533a04={'x':_0x29f3e5+_0xdf2181*_0x39ee55*_0x3640ce,'y':_0x275976-_0x4f4df0*_0x48e258*0.4},_0xe90859={'x':_0x8dec1d+_0xdf2181*_0x39ee55*_0x3640ce,'y':_0x4d5d9c+_0x4f4df0*_0x48e258*0.6},_0x199300={'x':_0x8dec1d,'y':_0x4d5d9c},_0x3f1cab={'x':_0x8dec1d-_0xdf2181*_0x39ee55*0.1,'y':_0x4d5d9c+_0x3cc944*0.05},_0x5616de={'x':_0x4285ba,'y':_0xea5845-_0x3cc944*0.2},_0x28ff03={'x':_0x4285ba,'y':_0xea5845};_0x1e3692=[{'p0':_0xd276be,'p1':_0x4d27bd,'p2':_0x720e7f,'p3':_0x543f46},{'p0':_0x543f46,'p1':_0x56aba2,'p2':_0x2dfd69,'p3':_0x3ee85f},{'p0':_0x3ee85f,'p1':_0x17780d,'p2':_0x324ef6,'p3':_0x58e617},{'p0':_0x58e617,'p1':_0x533a04,'p2':_0xe90859,'p3':_0x199300},{'p0':_0x199300,'p1':_0x3f1cab,'p2':_0x5616de,'p3':_0x28ff03}];}}return _0x55ef0b[_0x3a91be(0x2cf)](..._0x1e3692),_0x55ef0b;}catch(_0x4651c4){return console[_0x3a91be(0x1a4)](_0x3a91be(0x1ee)+_0x13cb22?.['id']+':',_0x4651c4),[];}}window[_0x20bf56(0x22b)]=generateAttackPathInternal;function resetAllMessagesInternal(){showReadyMessage=![],isShowingIntro=![],showCsHitsMessage=![],showPerfectMessage=![],showCsBonusScoreMessage=![],showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showExtraLifeMessage=![],isShowingCaptureMessage=![],isShowingPlayerGameOverMessage=![],isShowingCoopPlayersReady=![],csHitsMessageStartTime=0x0,perfectMessageStartTime=0x0,csBonusScoreMessageStartTime=0x0,csClearMessageStartTime=0x0,extraLifeMessageStartTime=0x0,readyMessageStartTime=0x0,captureMessageStartTime=0x0,playerGameOverMessageStartTime=0x0,csCompletionDelayStartTime=0x0,introDisplayStartTime=0x0,coopPlayersReadyStartTime=0x0;}function _0x2cf7(_0x9b304d,_0x16a48b){const _0x42e144=_0x42e1();return _0x2cf7=function(_0x2cf7aa,_0x1be4a6){_0x2cf7aa=_0x2cf7aa-0x199;let _0x4a7e1c=_0x42e144[_0x2cf7aa];return _0x4a7e1c;},_0x2cf7(_0x9b304d,_0x16a48b);}function _0x42e1(){const _0xecc86a=['2XHIIRy','attackFormationOffsetX','thresholdsMet','bossHit1Sound','splice','drawImage','levelUpSound','boss_loop_right','extraLifeSound','NORMAL','gridCol','lifetime','1P_VS_AI_NORMAL','capturedShipLastFiredTime','canFireThisDive','beeHitSound','coop','speed','\x20after\x20bezier\x20error','height','Entrance\x20Wave:\x20Squadron\x20','undefined','health','floor','landed','capturedShipY','max','add','size','\x20(state:\x20','rotationDirection','right','show_results','\x20after\x20NaN','Entrance\x20Wave:\x20Assigned\x20entrance\x20path\x20\x22','Enemy\x20','attacking','save','sin','Full\x20Grid:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','1P_VS_AI_COOP','initialCaptureAnimationY','Error\x20updating\x20explosions:','386228imIvAm','CS_LoopAttack_TL','capturing','middle','CS:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','3534510MLXyTM','HIGH\x20SCORE','clear','CS:\x20Path\x20','1136148ZvdyTQ','warn',')\x20during\x20shift:','hiScoreSound','pathId','entrance_flight_2','enemy-entr-','moving_to_grid','round','grey','\x20diving\x20to\x20capture\x20without\x20targetX/Y!\x20Aborting.','filter','Error\x20handling\x20player\x20input:',',\x20isFullGrid:\x20','indexOf','\x20attacking,\x20invalid\x20NEXT\x20segment\x20','showing_capture_message','Error\x20getting\x20grid\x20pos\x20after\x20invalid\x20NEXT\x20attack\x20segment\x20for\x20','targetPlayerId','\x20for\x20path\x20','captureAnimationRotation','\x20has\x20invalid\x20enemy\x20data.',',\x20isCS:\x20','map','CS3_DiveLoopL_Sharp','blue','player2','isArray','gameOverSound','!!!\x20CRITICAL\x20ERROR\x20IN\x20runSingleGameUpdate\x20!!!','CS_HorizontalFlyByR','entrancePathId','fillRect','findIndex','returnLogDone','\x20after\x20bad\x20next\x20segment','restore','sign','rotationCompleted','Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.','num','playerShootSound','red','totalRotation','naturalHeight','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','length','1UP','now','Entrance\x20Wave:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20','pathSegmentIndex','complete','\x20for\x20squadron\x20','total','playerId','push','Error\x20during\x20post-landing\x20fire\x20for\x20','getGamepads','lostLifeSound','\x20in\x20returning','targetGridX','butterflyDiveSound','slice','enemy-grid-','startSound','Error\x20during\x20enemy\x20burst\x20firing\x20(bullet\x20','Error\x20in\x20findAndDetachEnemy:','CO-OP\x20GAME','attackType','error','cos','Error\x20getting\x20grid\x20pos\x20after\x20bezier\x20error\x20for\x20','captureStartTime','bossHit2Sound','attackPathSegmentIndex','hasOwnProperty','captureSound','alpha','targetX','state','returning','capturedShipDimensions','width','Boss\x20','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20','capturePrepareTimeout','\x20after\x20invalid\x20path\x20index','following_entrance_path','20px\x20\x27Press\x20Start\x202P\x27','function','.\x20Switching\x20to\x20moving_to_grid.','velocityX','in_grid','green','fillStyle','csPerfectSound','random','\x20out\x20of\x20bounds\x20for\x20SHARED\x20path\x20','\x20not\x20found.\x20Enemy\x20will\x20follow\x20squadron\x20path\x20\x22','preparing_attack','isDamaged','dual','rapid','1\x20PLAYER','30px\x20Arial','LOGO','Entrance\x20Wave:\x20Path\x20','duration','justReturned','sort','6398166QVScTX','stringify',')!\x20Returning.','Error\x20calculating\x20final\x20bezier\x20point\x20for\x20','number','\x20at\x20[','!\x20Returning.','abs','\x20is\x20empty\x20or\x20invalid.','CS_LoopAttack_BL','explosionSound','A\x20critical\x20error\x20occurred\x20in\x20the\x20game\x20loop.\x20Please\x20refresh.','player1','shoot','\x22\x20for\x20enemy\x20in\x20squadron\x20','\x20off\x20screen:','[Capture\x20Message\x20End]\x20Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','generateWaveDefinition','buttons','isPreparingForImmediateCapture','Invalid\x20next\x20Normal\x20Bezier\x20segment\x20','7495592pMrWSL','Error\x20getting\x20grid\x20pos\x20for\x20','full_grid','\x20attacking,\x20index\x20','resetGame',',\x20Idx\x20','stopAllGameSounds','normal','Error\x20creating\x20player\x20bullet(s):','.\x20Enemy\x20','Entrance\x20Wave:\x20Error\x20processing\x20enemies\x20for\x20squadron\x20','2UP','[DEBUG]\x20Error\x20generating\x20attack\x20path\x20for\x20enemy\x20','Full\x20Grid:\x20Error\x20getting\x20target\x20grid\x20pos\x20for\x20enemy\x20','hasFiredPostLanding','forEach','velocityY','\x20after\x20missing\x20path','has','creationTime','playerNum','unknown','keys','tintProgress','currentLives','diving_to_capture_position','Error\x20in\x20renderGame:','getWaveType','some','1195479JspvqN','csClearSound','FATAL\x20Error\x20in\x20moveEntities:','newButtonStates','5wpzmVj','min','Error\x20getting\x20grid\x20pos\x20after\x20FINAL\x20bezier\x20error\x20for\x20','completed','particles','\x20after\x20attack:','EASY','hasCapturedShip','shipCapturedSound','CS:\x20No\x20squadrons\x20generated.\x20Skipping\x20CS\x20sequence.','attack-','\x20after\x20bad\x20segment','\x20attacking,\x20invalid\x20segment\x20','substring','Error\x20creating\x20CO-OP\x20AI\x20bullet\x20for\x20','sqrt','Entrance\x20Wave:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','Full\x20Grid:\x20Error\x20placing\x20enemy\x20(Sq\x20','resultsMusicSound','attackPathT','Full\x20Grid:\x20Squadron\x20','\x20in\x20moving_to_grid','pathSpeedMultiplier','squadronId','CS_LoopAttack_TR','\x20missing\x20SHARED\x20path\x20','preparing_capture','Error\x20getting\x20grid\x20pos\x20within\x20\x27in_grid\x27\x20for\x20','entranceSound','gridBackgroundSound','.\x20Removing.','\x20path\x20index\x20','[Destroyed\x20Boss\x20Score\x20-\x20Attack]\x20Boss\x20destroyed\x20on\x20first\x20hit?\x20Awarding\x20','CS:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','switch_player','stack','Invalid\x20CS\x20Bezier\x20segment\x20','bossGalagaDiveSound','string','dualShipSound','generateAttackPath','\x20(invalid\x20attack\x20index):','pathT','lastFiredTime','parse','\x20(no\x20attack\x20path):','resetAllMessages','includes','Error\x20calculating\x20bezier\x20point\x20during\x20attack\x20for\x20','Error\x20calculating\x20FINAL\x20bezier\x20point\x20for\x20attack\x20','\x20(Path\x20','single','naturalWidth','rotation','type','back','pause','ai_p2','capturedShipX','find','.\x20Skipping.','CRITICAL:\x20Failed\x20to\x20define\x20CS\x20paths!','main','following_bezier_path','shipObj','atan2','targetGridY','gridRow','\x20(invalid\x20attack\x20segment):','2\x20PLAYER','[scheduleEntranceFlightWave]\x20Called\x20inappropriately\x20or\x20with\x20no\x20definition.\x20Level\x20','CRITICAL:\x20Required\x20CS\x20path\x20\x22','108LYUBTx','Invalid\x20next\x20CS\x20Bezier\x20segment\x20','diveStartTime','center','object','left','squadronEnemyIndex','Error\x20calculating\x20CS\x20Bezier\x20point\x20for\x20enemy\x20','toString','Error\x20getting\x20target\x20grid\x20pos\x20for\x20new\x20enemy\x20','Error\x20in\x20triggerImmediateCaptureDive:','pressed','entrance_flight_1','challenging_stage','983280KxMggR','targetY',',\x20Path\x20','GAME\x20EXIT','attackGroupId','Entrance\x20Wave:\x20No\x20squadrons\x20or\x20enemies\x20scheduled\x20for\x20level\x20','\x20at\x20end\x20of\x20normal\x20path\x20',',\x20index\x20','clearRect','enemies'];_0x42e1=function(){return _0xecc86a;};return _0x42e1();}window[_0x20bf56(0x231)]=resetAllMessagesInternal;function stopAllGameSoundsInternal(){const _0x1b3ed8=_0x20bf56;if(typeof soundPaths==='object'&&soundPaths!==null&&typeof stopSound===_0x1b3ed8(0x1b8))for(const _0x527f31 in soundPaths){stopSound(_0x527f31);}isGridSoundPlaying=![];}window[_0x20bf56(0x1e8)]=stopAllGameSoundsInternal;function resetGameInternal(){const _0x2ca12c=_0x20bf56;score=0x0,level=0x1,playerLives=0x3;if(isTwoPlayerMode){player1Lives=0x3,player2Lives=0x3,player1Score=0x0,player2Score=0x0,currentPlayer=0x1,player1CompletedLevel=-0x1,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet[_0x2ca12c(0x295)]();else player1LifeThresholdsMet=new Set();if(player2LifeThresholdsMet instanceof Set)player2LifeThresholdsMet[_0x2ca12c(0x295)]();else player2LifeThresholdsMet=new Set();player1IsDualShipActive=![],player2IsDualShipActive=![],isPlayer1ShipCaptured=![],isPlayer2ShipCaptured=![],isPlayer1WaitingForRespawn=![],isPlayer2WaitingForRespawn=![],isPlayer1Invincible=![],isPlayer2Invincible=![],player1RespawnTime=0x0,player2RespawnTime=0x0,player1InvincibilityEndTime=0x0,player2InvincibilityEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![];if(selectedGameMode===_0x2ca12c(0x273)){playerLives=0x0;if(gameCanvas&&gameCanvas[_0x2ca12c(0x1b1)]>0x0&&gameCanvas[_0x2ca12c(0x276)]>0x0){const _0x320825=gameCanvas['width']/0x2-gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x5504a0=gameCanvas[_0x2ca12c(0x1b1)]/0x2+gameCanvas[_0x2ca12c(0x1b1)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0xd1b2=gameCanvas[_0x2ca12c(0x276)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;ship1={'x':_0x320825,'y':_0xd1b2,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x320825,'id':'p1'},ship2={'x':_0x5504a0,'y':_0xd1b2,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x5504a0,'id':'p2'},(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&(smoothedShip1X=_0x320825,smoothedShip2X=_0x5504a0,aiShip1TargetEnemy=null,aiShip2TargetEnemy=null,aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0,aiShip1LastShotTime=0x0,aiShip2LastShotTime=0x0,aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0);}ship=null;}else{if(!ship&&gameCanvas&&gameCanvas[_0x2ca12c(0x1b1)]>0x0&&gameCanvas[_0x2ca12c(0x276)]>0x0)ship={'x':Math[_0x2ca12c(0x29f)](gameCanvas[_0x2ca12c(0x1b1)]/0x2-SHIP_WIDTH/0x2),'y':gameCanvas[_0x2ca12c(0x276)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':_0x2ca12c(0x241)},ship['targetX']=ship['x'];else ship&&gameCanvas&&gameCanvas[_0x2ca12c(0x1b1)]>0x0&&gameCanvas[_0x2ca12c(0x276)]>0x0&&(ship['x']=Math['round'](gameCanvas['width']/0x2-SHIP_WIDTH/0x2),ship[_0x2ca12c(0x1ad)]=ship['x'],ship['y']=gameCanvas[_0x2ca12c(0x276)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}}else{player1Lives=0x3,player1Score=0x0,player1MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet[_0x2ca12c(0x295)]();else player1LifeThresholdsMet=new Set();if(!ship&&gameCanvas&&gameCanvas[_0x2ca12c(0x1b1)]>0x0&&gameCanvas[_0x2ca12c(0x276)]>0x0)ship={'x':Math[_0x2ca12c(0x29f)](gameCanvas['width']/0x2-SHIP_WIDTH/0x2),'y':gameCanvas[_0x2ca12c(0x276)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':'main'},ship[_0x2ca12c(0x1ad)]=ship['x'];else ship&&gameCanvas&&gameCanvas['width']>0x0&&gameCanvas[_0x2ca12c(0x276)]>0x0&&(ship['x']=Math[_0x2ca12c(0x29f)](gameCanvas[_0x2ca12c(0x1b1)]/0x2-SHIP_WIDTH/0x2),ship[_0x2ca12c(0x1ad)]=ship['x'],ship['y']=gameCanvas[_0x2ca12c(0x276)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,isDualShipActive=![];if(!isTwoPlayerMode)player1IsDualShipActive=![];fallingShips=[],visualOffsetX=-0x14,gameOverSequenceStartTime=0x0,isShowingResultsScreen=![],gameStartTime=Date[_0x2ca12c(0x2c7)](),gameJustStarted=!![],gameJustStartedAndWaveLaunched=![],currentGridOffsetX=0x0,gridMoveDirection=0x1,gridJustCompleted=![],isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,lastGridFireCheckTime=0x0,player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,scoreEarnedThisCS=0x0,challengingStageEnemiesHit=0x0,aiNeedsStabilization=!![],aiStabilizationEndTime=0x0,smoothedShipX=undefined,aiCanShootTime=0x0,aiLastShotTime=0x0,!(selectedGameMode===_0x2ca12c(0x273)&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2ca12c(0x28b)))&&(aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0),playerLastShotTime=0x0,player1LastShotTime=0x0,player2LastShotTime=0x0,p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],isShowingCoopPlayersReady=![],coopPlayersReadyStartTime=0x0,resetWaveInternal();}window[_0x20bf56(0x1e6)]=resetGameInternal;function resetWaveInternal(){const _0x4239b1=_0x20bf56;isWaveTransitioning=![],readyForNextWave=![],readyForNextWaveReset=![],isEntrancePhaseActive=!![],firstEnemyLanded=![],captureAttemptMadeThisLevel=![],gameJustStartedAndWaveLaunched=![],aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![],enemies=[],bullets=[],enemyBullets=[],explosions=[],floatingScores=[],hitSparks=[];Array[_0x4239b1(0x2b2)](enemySpawnTimeouts)&&enemySpawnTimeouts[_0x4239b1(0x1f1)](clearTimeout);enemySpawnTimeouts=[],squadronCompletionStatus={},squadronEntranceFiringStatus={},totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;const _0x3d7c58=getWaveTypeInternal(level);isChallengingStage=_0x3d7c58===_0x4239b1(0x258),isFullGridWave=_0x3d7c58==='full_grid',challengingStageEnemiesHit=0x0,scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null;(isFullGridWave||isChallengingStage)&&(isEntrancePhaseActive=![]);const _0x4a0124=isShowingDemoText;resetAllMessagesInternal();_0x4a0124&&(isShowingDemoText=!![]);if(selectedGameMode===_0x4239b1(0x273)&&level===0x1)isShowingIntro=![],introStep=0x2;else{if(isTwoPlayerMode&&selectedGameMode===_0x4239b1(0x1e9)||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4239b1(0x26f)){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(isChallengingStage){introStep=0x3,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(level===0x1&&!isTwoPlayerMode){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{introStep=0x2,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}}}}isShowingIntro&&!(selectedGameMode===_0x4239b1(0x273)&&level===0x1)&&(introDisplayStartTime=Date[_0x4239b1(0x2c7)]());playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],currentWaveDefinition=generateWaveDefinitionInternal(level);if(selectedGameMode===_0x4239b1(0x273)){if(gameCanvas&&gameCanvas['width']>0x0&&gameCanvas[_0x4239b1(0x276)]>0x0){const _0x557572=ship1&&player1Lives>0x0,_0xc9efe=ship2&&player2Lives>0x0,_0x200a21=gameCanvas[_0x4239b1(0x276)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(_0x557572&&_0xc9efe){const _0x168039=gameCanvas[_0x4239b1(0x1b1)]/0x2-gameCanvas[_0x4239b1(0x1b1)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1&&(ship1[_0x4239b1(0x1ad)]=_0x168039,ship1['x']=_0x168039,smoothedShip1X=_0x168039,ship1['y']=_0x200a21);const _0x4ef16a=gameCanvas['width']/0x2+gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2[_0x4239b1(0x1ad)]=_0x4ef16a,ship2['x']=_0x4ef16a,smoothedShip2X=_0x4ef16a,ship2['y']=_0x200a21);}else{if(_0x557572&&ship1){const _0x38bfbb=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x72a97f=Math['round'](gameCanvas['width']/0x2-_0x38bfbb/0x2);ship1[_0x4239b1(0x1ad)]=_0x72a97f,ship1['x']=_0x72a97f,smoothedShip1X=_0x72a97f,ship1['y']=_0x200a21;}else{if(_0xc9efe&&ship2){const _0x44ad37=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x470c0d=Math['round'](gameCanvas[_0x4239b1(0x1b1)]/0x2-_0x44ad37/0x2);ship2[_0x4239b1(0x1ad)]=_0x470c0d,ship2['x']=_0x470c0d,smoothedShip2X=_0x470c0d,ship2['y']=_0x200a21;}}}}else{if(_0x557572&&ship1)ship1['y']=_0x200a21;if(_0xc9efe&&ship2)ship2['y']=_0x200a21;}}}else{if(ship&&gameCanvas&&gameCanvas['width']>0x0&&gameCanvas[_0x4239b1(0x276)]>0x0&&(forceCenterShipNextReset||!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x4239b1(0x1e9)&&currentPlayer===0x2)){let _0x177aae=ship['width'];if(isDualShipActive)_0x177aae=DUAL_SHIP_OFFSET_X+SHIP_WIDTH;ship['x']=Math['round'](gameCanvas[_0x4239b1(0x1b1)]/0x2-_0x177aae/0x2),ship[_0x4239b1(0x1ad)]=ship['x'],ship['y']=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(isPlayerTwoAI&&selectedGameMode===_0x4239b1(0x1e9)&&currentPlayer===0x2)smoothedShipX=ship['x'];}else ship&&gameCanvas&&gameCanvas[_0x4239b1(0x1b1)]>0x0&&(ship['y']=gameCanvas[_0x4239b1(0x276)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);}forceCenterShipNextReset=![];if(!isManualControl&&aiNeedsStabilization&&selectedGameMode!=='coop'&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode===_0x4239b1(0x1e9)&&currentPlayer===0x2)){aiStabilizationEndTime=Date[_0x4239b1(0x2c7)]()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}else{if(isPlayerTwoAI&&selectedGameMode===_0x4239b1(0x1e9)&&currentPlayer===0x2&&aiNeedsStabilization){aiStabilizationEndTime=Date[_0x4239b1(0x2c7)]()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}}}window['resetWave']=resetWaveInternal;function getWaveTypeInternal(_0x468f53){const _0x163539=_0x20bf56,_0x2cd5c6=(_0x468f53-0x1)%0x4;switch(_0x2cd5c6){case 0x0:return'full_grid';case 0x1:return _0x163539(0x257);case 0x2:return _0x163539(0x258);case 0x3:return'entrance_flight_2';default:return _0x163539(0x1f7);}}window[_0x20bf56(0x1fd)]=getWaveTypeInternal;function generateWaveDefinitionInternal(_0x49c5a6){const _0x497ec2=_0x20bf56;let _0x45193b=[];currentWavePatternIndex=-0x1;const _0x42be98=getWaveTypeInternal(_0x49c5a6);if(typeof waveEntrancePatterns===_0x497ec2(0x278)||!Array['isArray'](waveEntrancePatterns)||waveEntrancePatterns[_0x497ec2(0x2c5)]<0x2)return[];if(_0x42be98===_0x497ec2(0x258))_0x45193b=[];else{if(_0x42be98===_0x497ec2(0x1e4)){currentWavePatternIndex=0x0;const _0x2d030a=waveEntrancePatterns[0x0];if(!_0x2d030a||_0x2d030a[_0x497ec2(0x2c5)]===0x0)_0x45193b=[];else try{_0x45193b=JSON[_0x497ec2(0x22f)](JSON[_0x497ec2(0x1ce)](_0x2d030a),(_0x7189a0,_0x588e66)=>{const _0x488f06=_0x497ec2;return _0x588e66&&typeof _0x588e66===_0x488f06(0x24f)&&_0x588e66[_0x488f06(0x239)]===ENEMY3_TYPE&&typeof _0x588e66['hasCapturedShip']===_0x488f06(0x278)&&(_0x588e66[_0x488f06(0x20a)]=![]),_0x588e66;});}catch(_0x523506){_0x45193b=[];}}else{if(_0x42be98==='entrance_flight_1'){currentWavePatternIndex=0x0;const _0x198c04=waveEntrancePatterns[0x0];if(!_0x198c04||_0x198c04['length']===0x0)_0x45193b=[];else try{_0x45193b=JSON['parse'](JSON[_0x497ec2(0x1ce)](_0x198c04),(_0x19357a,_0x55eff8)=>{const _0x3547f9=_0x497ec2;return _0x55eff8&&typeof _0x55eff8===_0x3547f9(0x24f)&&_0x55eff8[_0x3547f9(0x239)]===ENEMY3_TYPE&&typeof _0x55eff8[_0x3547f9(0x20a)]===_0x3547f9(0x278)&&(_0x55eff8[_0x3547f9(0x20a)]=![]),_0x55eff8;});}catch(_0x5a9e7d){_0x45193b=[];}}else{if(_0x42be98===_0x497ec2(0x29c)){currentWavePatternIndex=0x1;const _0x58caf8=waveEntrancePatterns[0x1];if(!_0x58caf8||_0x58caf8[_0x497ec2(0x2c5)]===0x0)_0x45193b=[];else try{_0x45193b=JSON[_0x497ec2(0x22f)](JSON[_0x497ec2(0x1ce)](_0x58caf8),(_0x16b551,_0x21ba09)=>{const _0x5a3384=_0x497ec2;return _0x21ba09&&typeof _0x21ba09===_0x5a3384(0x24f)&&_0x21ba09['type']===ENEMY3_TYPE&&typeof _0x21ba09[_0x5a3384(0x20a)]===_0x5a3384(0x278)&&(_0x21ba09[_0x5a3384(0x20a)]=![]),_0x21ba09;});}catch(_0x2515fa){_0x45193b=[];}}else _0x45193b=[];}}}if(_0x42be98!==_0x497ec2(0x258)){if(typeof normalWaveEntrancePaths===_0x497ec2(0x278)||Object['keys'](normalWaveEntrancePaths)[_0x497ec2(0x2c5)]===0x0)return _0x45193b;for(let _0x5340a3=_0x45193b['length']-0x1;_0x5340a3>=0x0;_0x5340a3--){const _0x3e4e0d=_0x45193b[_0x5340a3];if(!normalWaveEntrancePaths?.[_0x3e4e0d[_0x497ec2(0x29b)]]){_0x45193b[_0x497ec2(0x267)](_0x5340a3,0x1);continue;}if(_0x3e4e0d[_0x497ec2(0x262)]&&Array[_0x497ec2(0x2b2)](_0x3e4e0d['enemies'])){for(let _0x39477d=_0x3e4e0d[_0x497ec2(0x262)][_0x497ec2(0x2c5)]-0x1;_0x39477d>=0x0;_0x39477d--){const _0x44d263=_0x3e4e0d[_0x497ec2(0x262)][_0x39477d];(!_0x44d263||!normalWaveEntrancePaths?.[_0x44d263[_0x497ec2(0x2b6)]])&&_0x3e4e0d[_0x497ec2(0x262)][_0x497ec2(0x267)](_0x39477d,0x1),_0x44d263&&_0x44d263['type']===ENEMY3_TYPE&&typeof _0x44d263[_0x497ec2(0x20a)]===_0x497ec2(0x278)&&(_0x44d263[_0x497ec2(0x20a)]=![]);}_0x3e4e0d['enemies'][_0x497ec2(0x2c5)]===0x0&&_0x45193b['splice'](_0x5340a3,0x1);}else _0x45193b[_0x497ec2(0x267)](_0x5340a3,0x1);}}return _0x45193b;}window[_0x20bf56(0x1de)]=generateWaveDefinitionInternal;const createBulletSimple=(_0x1afed5,_0x372e14=null)=>{const _0x113e04=_0x20bf56;let _0x283cf9=null,_0x5a0ff0=![];if(isTwoPlayerMode&&selectedGameMode===_0x113e04(0x273)){const _0x4c8f6f=ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured,_0x4429ba=ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured;if(_0x4c8f6f&&_0x4429ba)_0x283cf9=Math[_0x113e04(0x1bf)]()<0.5?ship1:ship2,_0x5a0ff0=!![];else{if(_0x4c8f6f)_0x283cf9=ship1,_0x5a0ff0=!![];else _0x4429ba&&(_0x283cf9=ship2,_0x5a0ff0=!![]);}}else ship&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn&&(_0x283cf9=ship,_0x5a0ff0=!![]);if(!_0x1afed5||!isInGameState||!_0x5a0ff0||!_0x283cf9)return![];const _0x88b17f=scaleValue(level,BASE_ENEMY_BULLET_SPEED,MAX_ENEMY_BULLET_SPEED),_0x4eebd5=_0x372e14?_0x372e14['x']:_0x1afed5['x']+_0x1afed5[_0x113e04(0x1b1)]/0x2,_0x2153a3=_0x372e14?_0x372e14['y']:_0x1afed5['y']+_0x1afed5['height']/0x2;let _0x2d8a38=0x0,_0x36891b=_0x88b17f;const _0x1809e7=_0x283cf9['x']+_0x283cf9[_0x113e04(0x1b1)]/0x2-_0x4eebd5,_0x2e2c71=_0x283cf9['y']+_0x283cf9[_0x113e04(0x276)]/0x2-_0x2153a3,_0x1d5b63=Math['sqrt'](_0x1809e7*_0x1809e7+_0x2e2c71*_0x2e2c71);if(_0x1d5b63>0x0){let _0x39deb6=0x0;!isChallengingStage&&(_0x39deb6=scaleValue(level,BASE_ENEMY_AIM_FACTOR,MAX_ENEMY_AIM_FACTOR));let _0x31b682=Math[_0x113e04(0x244)](_0x2e2c71,_0x1809e7);_0x2d8a38=Math[_0x113e04(0x1a5)](_0x31b682)*_0x88b17f*_0x39deb6,_0x36891b=Math[_0x113e04(0x212)](_0x88b17f**0x2-_0x2d8a38**0x2),_0x36891b=Math[_0x113e04(0x27d)](_0x88b17f*(0x1-_0x39deb6)*0.5,_0x36891b);if(_0x2e2c71<0x0&&_0x36891b>0x0){}if(_0x2e2c71<0x0)_0x36891b=Math[_0x113e04(0x1d4)](_0x36891b);return enemyBullets[_0x113e04(0x2cf)]({'x':_0x4eebd5-ENEMY_BULLET_WIDTH/0x2,'y':_0x2153a3,'width':ENEMY_BULLET_WIDTH,'height':ENEMY_BULLET_HEIGHT,'vx':_0x2d8a38,'vy':_0x36891b,'type':_0x1afed5[_0x113e04(0x239)]}),!![];}return![];};function scheduleSingleEntranceSquadron(_0x3c4fa1,_0x2a2ae7,_0x58691f){const _0x2048b1=_0x20bf56;if(isFullGridWave||isChallengingStage)return console[_0x2048b1(0x298)]('[scheduleSingleEntranceSquadron]\x20Called\x20inappropriately\x20for\x20non-entrance\x20wave\x20type\x20(Level\x20'+level+_0x2048b1(0x2a4)+isFullGridWave+_0x2048b1(0x2ad)+isChallengingStage+').\x20Skipping.'),_0x3c4fa1?.[_0x2048b1(0x262)]?.[_0x2048b1(0x2c5)]>0x0&&(enemiesSpawnedThisWave+=_0x3c4fa1[_0x2048b1(0x262)][_0x2048b1(0x2c5)],squadronCompletionStatus[_0x2a2ae7]&&(squadronCompletionStatus[_0x2a2ae7][_0x2048b1(0x206)]=squadronCompletionStatus[_0x2a2ae7][_0x2048b1(0x2cd)])),![];const _0x57d9c9=normalWaveEntrancePaths,_0xb67be=_0x3c4fa1[_0x2048b1(0x29b)],_0x597088=_0x57d9c9[_0xb67be];if(!_0x597088||_0x597088['length']===0x0)return console[_0x2048b1(0x1a4)](_0x2048b1(0x1c9)+_0xb67be+_0x2048b1(0x2cc)+_0x2a2ae7+'\x20invalid!\x20Skipping\x20squadron.'),_0x3c4fa1?.[_0x2048b1(0x262)]?.['length']>0x0&&(enemiesSpawnedThisWave+=_0x3c4fa1[_0x2048b1(0x262)]['length'],squadronCompletionStatus[_0x2a2ae7]&&(squadronCompletionStatus[_0x2a2ae7][_0x2048b1(0x206)]=squadronCompletionStatus[_0x2a2ae7][_0x2048b1(0x2cd)])),![];const _0x114d8f=setTimeout(()=>{const _0x4d7b9b=_0x2048b1,_0x4539d8=enemySpawnTimeouts[_0x4d7b9b(0x2a5)](_0x114d8f);if(_0x4539d8>-0x1)enemySpawnTimeouts[_0x4d7b9b(0x267)](_0x4539d8,0x1);let _0xfd7647=![];isTwoPlayerMode&&selectedGameMode===_0x4d7b9b(0x273)?_0xfd7647=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0xfd7647=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0xfd7647||isFullGridWave){_0x3c4fa1?.[_0x4d7b9b(0x262)]?.[_0x4d7b9b(0x2c5)]>0x0&&(enemiesSpawnedThisWave+=_0x3c4fa1[_0x4d7b9b(0x262)][_0x4d7b9b(0x2c5)],squadronCompletionStatus[_0x2a2ae7]&&(squadronCompletionStatus[_0x2a2ae7][_0x4d7b9b(0x206)]=squadronCompletionStatus[_0x2a2ae7][_0x4d7b9b(0x2cd)]));return;}try{squadronEntranceFiringStatus[_0x2a2ae7]?(squadronEntranceFiringStatus[_0x2a2ae7]['scheduledStartTime']=Date[_0x4d7b9b(0x2c7)]()+_0x58691f,squadronEntranceFiringStatus[_0x2a2ae7]['hasFired']=![]):(console['warn']('[scheduleSingleEntranceSquadron]\x20Firing\x20status\x20for\x20squadron\x20'+_0x2a2ae7+'\x20not\x20found.'),squadronEntranceFiringStatus[_0x2a2ae7]={'hasFired':![],'scheduledStartTime':Date[_0x4d7b9b(0x2c7)]()+_0x58691f});const _0x196b99=ENEMY_SPAWN_DELAY_IN_SQUADRON,_0x4c6daa=_0x196b99*0x2,_0x316d8e=0x1;_0x3c4fa1[_0x4d7b9b(0x262)][_0x4d7b9b(0x1f1)]((_0x52b9bf,_0x1138b1)=>{const _0x3736c7=_0x4d7b9b;if(!_0x52b9bf||!_0x52b9bf[_0x3736c7(0x239)]||typeof _0x52b9bf[_0x3736c7(0x246)]===_0x3736c7(0x278)||typeof _0x52b9bf[_0x3736c7(0x26d)]==='undefined'||!_0x52b9bf['entrancePathId']){console[_0x3736c7(0x1a4)](_0x3736c7(0x213)+_0x2a2ae7+'\x20(Path\x20'+_0xb67be+'),\x20index\x20'+_0x1138b1+_0x3736c7(0x23f)),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x2a2ae7]&&squadronCompletionStatus[_0x2a2ae7][_0x3736c7(0x206)]++;return;}const _0x4a0c03=_0x57d9c9[_0x52b9bf[_0x3736c7(0x2b6)]];(!_0x4a0c03||_0x4a0c03[_0x3736c7(0x2c5)]===0x0)&&console['warn'](_0x3736c7(0x285)+_0x52b9bf[_0x3736c7(0x2b6)]+_0x3736c7(0x1db)+_0x2a2ae7+',\x20index\x20'+_0x1138b1+_0x3736c7(0x1c1)+_0xb67be+'\x22.');let _0x177e34=0x0;const _0xfef237=getWaveType(level),_0x6a780f=_0xfef237===_0x3736c7(0x29c)&&(_0x2a2ae7===0x2||_0x2a2ae7===0x3);if(_0x6a780f){const _0x59defd=Math[_0x3736c7(0x27a)](_0x1138b1/0x2);_0x1138b1%0x2===0x0?_0x177e34=_0x59defd*_0x4c6daa:_0x177e34=_0x59defd*_0x4c6daa+_0x316d8e;}else _0x177e34=_0x1138b1*ENEMY_SPAWN_DELAY_IN_SQUADRON;const _0x3aa138=setTimeout(()=>{const _0x471e07=_0x3736c7,_0x172da5=enemySpawnTimeouts[_0x471e07(0x2a5)](_0x3aa138);if(_0x172da5>-0x1)enemySpawnTimeouts['splice'](_0x172da5,0x1);let _0xa9f508=![];isTwoPlayerMode&&selectedGameMode===_0x471e07(0x273)?_0xa9f508=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0xa9f508=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0xa9f508||isFullGridWave){enemiesSpawnedThisWave++;squadronCompletionStatus[_0x2a2ae7]&&squadronCompletionStatus[_0x2a2ae7][_0x471e07(0x206)]++;return;}try{let _0x5523a3=_0x52b9bf[_0x471e07(0x239)],_0x18fb03=_0x5523a3===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x7e8f96,_0x179461;if(_0x5523a3===ENEMY1_TYPE)_0x7e8f96=ENEMY1_WIDTH,_0x179461=ENEMY1_HEIGHT;else _0x5523a3===ENEMY3_TYPE?(_0x7e8f96=BOSS_WIDTH,_0x179461=BOSS_HEIGHT):(_0x7e8f96=ENEMY_WIDTH,_0x179461=ENEMY_HEIGHT);let _0x511f41=0x0,_0x141012=0x0;if(_0x597088&&_0x597088[0x0]?.['p0'])_0x511f41=_0x597088[0x0]['p0']['x'],_0x141012=_0x597088[0x0]['p0']['y'];else throw new Error('Invalid\x20start\x20segment\x20for\x20squadron\x20path\x20'+_0xb67be);let _0x3e819b,_0x4ad2b6;try{const {x:_0x52f114,y:_0x4a8822}=getCurrentGridSlotPosition(_0x52b9bf[_0x471e07(0x246)],_0x52b9bf[_0x471e07(0x26d)],_0x7e8f96);_0x3e819b=_0x52f114,_0x4ad2b6=_0x4a8822;}catch(_0x354aef){console[_0x471e07(0x1a4)](_0x471e07(0x254)+_0x52b9bf[_0x471e07(0x239)]+_0x471e07(0x1d2)+_0x52b9bf[_0x471e07(0x246)]+','+_0x52b9bf[_0x471e07(0x26d)]+']',_0x354aef),_0x3e819b=gameCanvas?.[_0x471e07(0x1b1)]/0x2||0xc8,_0x4ad2b6=ENEMY_TOP_MARGIN+_0x52b9bf[_0x471e07(0x246)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}let _0x29874e=0x0;const _0x252af3=_0x6a780f,_0x5824ea=_0x252af3&&_0x1138b1%0x2!==0x0;_0x5824ea?_0x29874e=-ENTRANCE_PAIR_PATH_T_OFFSET:_0x29874e=-_0x1138b1*PATH_T_OFFSET_PER_ENEMY;const _0x449c19={'x':_0x511f41,'y':_0x141012,'width':_0x7e8f96,'height':_0x179461,'targetGridX':_0x3e819b,'targetGridY':_0x4ad2b6,'speed':0x0,'state':_0x471e07(0x1b6),'gridRow':_0x52b9bf[_0x471e07(0x246)],'gridCol':_0x52b9bf[_0x471e07(0x26d)],'type':_0x5523a3,'health':_0x18fb03,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0xb67be,'pathSegmentIndex':0x0,'pathT':_0x29874e,'squadronId':_0x2a2ae7,'squadronEnemyIndex':_0x1138b1,'id':_0x471e07(0x29d)+_0x2a2ae7+'-'+_0x1138b1+'-'+Date[_0x471e07(0x2c7)]()+'-'+Math[_0x471e07(0x1bf)]()[_0x471e07(0x253)](0x24)[_0x471e07(0x210)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x471e07(0x1e9),'hasCapturedShip':_0x5523a3===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x5523a3===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies[_0x471e07(0x2cf)](_0x449c19),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x2a2ae7]&&squadronCompletionStatus[_0x2a2ae7][_0x471e07(0x206)]++;if(_0x1138b1===0x0){let _0x3bcc95=0x5dc;(_0x2a2ae7===0x0||_0x2a2ae7===0x1)&&(_0x3bcc95=0xfa);const _0x113aa4=_0x449c19['id'],_0x292da5=setTimeout(()=>{const _0x4be0f1=_0x471e07,_0x27c74f=enemySpawnTimeouts[_0x4be0f1(0x2a5)](_0x292da5);if(_0x27c74f>-0x1)enemySpawnTimeouts[_0x4be0f1(0x267)](_0x27c74f,0x1);let _0x240a53=![];isTwoPlayerMode&&selectedGameMode===_0x4be0f1(0x273)?_0x240a53=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x240a53=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x240a53||isChallengingStage||isWaveTransitioning||isFullGridWave)return;fireFixedEnemyBurst(_0x113aa4,null,0x0,0x3);},_0x3bcc95);enemySpawnTimeouts[_0x471e07(0x2cf)](_0x292da5);}}catch(_0xa2983d){console[_0x471e07(0x1a4)](_0x471e07(0x2c8)+_0x2a2ae7+_0x471e07(0x1e7)+_0x1138b1+_0x471e07(0x25b)+_0xb67be+'):',_0xa2983d),enemiesSpawnedThisWave++,squadronCompletionStatus[_0x2a2ae7]&&squadronCompletionStatus[_0x2a2ae7]['completed']++;}},_0x177e34);enemySpawnTimeouts['push'](_0x3aa138);});}catch(_0x17d1ad){console['error'](_0x4d7b9b(0x1ec)+_0x2a2ae7+_0x4d7b9b(0x235)+_0xb67be+'):',_0x17d1ad),_0x3c4fa1?.[_0x4d7b9b(0x262)]?.['length']>0x0&&(enemiesSpawnedThisWave+=_0x3c4fa1[_0x4d7b9b(0x262)][_0x4d7b9b(0x2c5)],squadronCompletionStatus[_0x2a2ae7]&&(squadronCompletionStatus[_0x2a2ae7]['completed']=squadronCompletionStatus[_0x2a2ae7][_0x4d7b9b(0x2cd)]));}},_0x58691f);return enemySpawnTimeouts['push'](_0x114d8f),!![];};function scheduleEntranceFlightWave(){const _0x2278d6=_0x20bf56;if(isFullGridWave||isChallengingStage||!currentWaveDefinition||currentWaveDefinition[_0x2278d6(0x2c5)]===0x0){console[_0x2278d6(0x298)](_0x2278d6(0x249)+level+_0x2278d6(0x2a4)+isFullGridWave+_0x2278d6(0x2ad)+isChallengingStage+',\x20def\x20length:\x20'+currentWaveDefinition?.[_0x2278d6(0x2c5)]),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}enemySpawnTimeouts[_0x2278d6(0x1f1)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x38416e=0x0,_0x7a14f3=0x0;currentWaveDefinition[_0x2278d6(0x1f1)]((_0x54d804,_0xb06809)=>{const _0x177168=_0x2278d6;_0x54d804&&_0x54d804['enemies']&&Array[_0x177168(0x2b2)](_0x54d804[_0x177168(0x262)])&&_0x54d804[_0x177168(0x262)][_0x177168(0x2c5)]>0x0?(totalEnemiesScheduledForWave+=_0x54d804[_0x177168(0x262)][_0x177168(0x2c5)],squadronCompletionStatus[_0xb06809]={'completed':0x0,'total':_0x54d804[_0x177168(0x262)][_0x177168(0x2c5)],'hasFiredPostLanding':![]},squadronEntranceFiringStatus[_0xb06809]={'hasFired':![],'scheduledStartTime':0x0},scheduleSingleEntranceSquadron(_0x54d804,_0xb06809,_0x38416e)&&_0x7a14f3++,_0x38416e+=NORMAL_WAVE_SQUADRON_INTERVAL):console[_0x177168(0x298)](_0x177168(0x277)+_0xb06809+_0x177168(0x1d5));}),_0x7a14f3===0x0&&totalEnemiesScheduledForWave===0x0?(console['warn'](_0x2278d6(0x25e)+level+'.\x20Transitioning.'),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![]):isEntrancePhaseActive=!![];}function startChallengingStageSequence(){const _0x15dd61=_0x20bf56;currentWaveDefinition=[],isEntrancePhaseActive=![],enemySpawnTimeouts[_0x15dd61(0x1f1)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronEntranceFiringStatus={};Object[_0x15dd61(0x1f8)](challengingStagePaths)[_0x15dd61(0x2c5)]===0x0&&defineChallengingStagePaths();if(Object[_0x15dd61(0x1f8)](challengingStagePaths)[_0x15dd61(0x2c5)]===0x0){console[_0x15dd61(0x1a4)](_0x15dd61(0x240)),isWaveTransitioning=!![],setTimeout(()=>{const _0x3e656a=_0x15dd61;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode==='coop'&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x3e656a(0x1b8)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}const _0x30a855=[_0x15dd61(0x2af),'CS3_DiveLoopR_Sharp','CS_HorizontalFlyByL',_0x15dd61(0x2b5)],_0x3c885b=[_0x15dd61(0x28f),_0x15dd61(0x21b),_0x15dd61(0x1d6),'CS_LoopAttack_BR'],_0x184fc0=[..._0x30a855,..._0x3c885b];for(const _0x396396 of _0x184fc0){if(!challengingStagePaths['hasOwnProperty'](_0x396396)){console[_0x15dd61(0x1a4)](_0x15dd61(0x24a)+_0x396396+'\x22\x20not\x20found!\x20Aborting\x20CS.'),isWaveTransitioning=!![],setTimeout(()=>{const _0x5f3f92=_0x15dd61;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x5f3f92(0x273)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x5f3f92(0x1b8)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}}let _0x235f9a=[..._0x30a855],_0x5c0d11=[..._0x3c885b][_0x15dd61(0x1cc)](()=>Math[_0x15dd61(0x1bf)]()-0.5);_0x235f9a[_0x15dd61(0x2cf)](..._0x5c0d11),currentWaveDefinition=[];for(let _0x3f13c9=0x0;_0x3f13c9<CHALLENGING_STAGE_SQUADRON_COUNT;_0x3f13c9++){const _0x385b98=_0x235f9a[_0x3f13c9],_0x12b198={'pathId':_0x385b98,'enemies':[]};for(let _0x4853d4=0x0;_0x4853d4<CHALLENGING_STAGE_SQUADRON_SIZE;_0x4853d4++){let _0x51c7cd=_0x4853d4<Math[_0x15dd61(0x27a)](CHALLENGING_STAGE_SQUADRON_SIZE/0x2)?ENEMY1_TYPE:ENEMY2_TYPE;_0x12b198[_0x15dd61(0x262)][_0x15dd61(0x2cf)]({'type':_0x51c7cd,'entrancePathId':_0x385b98});}currentWaveDefinition['push'](_0x12b198);}challengingStageTotalEnemies=CHALLENGING_STAGE_ENEMY_COUNT,totalEnemiesScheduledForWave=challengingStageTotalEnemies,enemiesSpawnedThisWave=0x0;if(currentWaveDefinition[_0x15dd61(0x2c5)]>0x0){isEntrancePhaseActive=!![],enemySpawnTimeouts=[];let _0x59292d=0x0;const _0x4069ba=-0x1c,_0x53de21=Math[_0x15dd61(0x27a)](Math[_0x15dd61(0x27d)](0x0,level-0x3)/0x4)+0x1,_0x16a8de=scaleValue(_0x53de21,BASE_CS_SPEED_MULTIPLIER,MAX_CS_SPEED_MULTIPLIER);currentWaveDefinition[_0x15dd61(0x1f1)]((_0x231f04,_0x5ef0ef)=>{const _0x259fb6=_0x15dd61;let _0x3084f3=0x0;if(_0x5ef0ef<=0x1)_0x3084f3=0x0;else _0x5ef0ef<=0x3?_0x3084f3=CHALLENGING_STAGE_SQUADRON_INTERVAL:_0x3084f3=(_0x5ef0ef-0x2)*CHALLENGING_STAGE_SQUADRON_INTERVAL;let _0x56ff1a=_0x16a8de;(_0x5ef0ef===0x2||_0x5ef0ef===0x3)&&(_0x56ff1a*=CS_HORIZONTAL_FLYBY_SPEED_FACTOR);const _0x348f7b=setTimeout(()=>{const _0x587d6c=_0x2cf7,_0x19d576=enemySpawnTimeouts['indexOf'](_0x348f7b);if(_0x19d576>-0x1)enemySpawnTimeouts[_0x587d6c(0x267)](_0x19d576,0x1);let _0x2c5f51=![];isTwoPlayerMode&&selectedGameMode===_0x587d6c(0x273)?_0x2c5f51=player1Lives>0x0||player2Lives>0x0:_0x2c5f51=playerLives>0x0;if(!isPaused&&isInGameState&&isEntrancePhaseActive&&isChallengingStage&&!isWaveTransitioning&&_0x2c5f51)try{const _0x9cbdce=_0x231f04[_0x587d6c(0x29b)],_0x25ec3f=challengingStagePaths,_0x146157=_0x25ec3f[_0x9cbdce];if(!_0x146157||_0x146157['length']===0x0){console[_0x587d6c(0x1a4)](_0x587d6c(0x296)+_0x9cbdce+_0x587d6c(0x2cc)+_0x5ef0ef+'\x20invalid!\x20Skipping.'),enemiesSpawnedThisWave+=_0x231f04['enemies']['length'];return;}let _0x290e30=CS_ENEMY_SPAWN_DELAY_IN_SQUADRON;if(_0x5ef0ef>=0x2&&_0x5ef0ef<=0x3)_0x290e30=CS_HORIZONTAL_FLYBY_SPAWN_DELAY;else _0x5ef0ef>=0x4&&(_0x290e30=CS_LOOP_ATTACK_SPAWN_DELAY);_0x231f04[_0x587d6c(0x262)]['forEach']((_0x14599e,_0x5b2f09)=>{const _0x271b3b=_0x587d6c;if(!_0x14599e||!_0x14599e['type']){console[_0x271b3b(0x1a4)](_0x271b3b(0x224)+_0x5ef0ef+_0x271b3b(0x260)+_0x5b2f09+_0x271b3b(0x23f)),enemiesSpawnedThisWave++;return;}const _0xdbdde6=_0x5b2f09*_0x290e30,_0x1e92dd=setTimeout(()=>{const _0x12715f=_0x271b3b,_0x488da2=enemySpawnTimeouts[_0x12715f(0x2a5)](_0x1e92dd);if(_0x488da2>-0x1)enemySpawnTimeouts['splice'](_0x488da2,0x1);let _0x11edc9=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x11edc9=player1Lives>0x0||player2Lives>0x0:_0x11edc9=playerLives>0x0;if(isPaused||!isInGameState||!isEntrancePhaseActive||!isChallengingStage||isWaveTransitioning||!_0x11edc9){enemiesSpawnedThisWave++;return;}try{let _0x29a0b1=_0x14599e[_0x12715f(0x239)],_0x5df3c5=_0x29a0b1===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x1f3b96,_0x4ce436;if(_0x29a0b1===ENEMY1_TYPE)_0x1f3b96=ENEMY1_WIDTH,_0x4ce436=ENEMY1_HEIGHT;else _0x29a0b1===ENEMY3_TYPE?(_0x1f3b96=BOSS_WIDTH,_0x4ce436=BOSS_HEIGHT):(_0x1f3b96=ENEMY_WIDTH,_0x4ce436=ENEMY_HEIGHT);let _0x380ec2=0x0,_0x5c16b2=0x0;if(_0x146157[0x0]?.['p0'])_0x380ec2=_0x146157[0x0]['p0']['x'],_0x5c16b2=_0x146157[0x0]['p0']['y'];else throw new Error('Invalid\x20start\x20segment\x20for\x20path\x20'+_0x9cbdce);(_0x5ef0ef===0x0||_0x5ef0ef===0x1)&&(_0x380ec2+=_0x4069ba);const _0x3a0501=-_0x5b2f09*PATH_T_OFFSET_PER_ENEMY,_0x2c280e={'x':_0x380ec2,'y':_0x5c16b2,'width':_0x1f3b96,'height':_0x4ce436,'targetGridX':0x0,'targetGridY':0x0,'speed':0x0,'state':'following_bezier_path','gridRow':-0x1,'gridCol':-0x1,'type':_0x29a0b1,'health':_0x5df3c5,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x9cbdce,'pathSegmentIndex':0x0,'pathT':_0x3a0501,'squadronId':_0x5ef0ef,'id':'enemy-cs-'+_0x5ef0ef+'-'+_0x5b2f09+'-'+Date[_0x12715f(0x2c7)]()+'-'+Math[_0x12715f(0x1bf)]()['toString'](0x24)['substring'](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x12715f(0x1e9),'hasCapturedShip':_0x29a0b1===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x29a0b1===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':_0x56ff1a};enemies[_0x12715f(0x2cf)](_0x2c280e),enemiesSpawnedThisWave++;}catch(_0x5ee57b){console['error'](_0x12715f(0x292)+_0x5ef0ef+',\x20Idx\x20'+_0x5b2f09+_0x12715f(0x25b)+_0x9cbdce+'):',_0x5ee57b),enemiesSpawnedThisWave++;}},_0xdbdde6);enemySpawnTimeouts['push'](_0x1e92dd),_0x59292d++;});}catch(_0x1a4076){console[_0x587d6c(0x1a4)]('CS:\x20Error\x20setting\x20up\x20spawns\x20for\x20squadron\x20'+_0x5ef0ef+':',_0x1a4076),enemiesSpawnedThisWave+=_0x231f04['enemies'][_0x587d6c(0x2c5)];}else _0x231f04?.[_0x587d6c(0x262)]?.[_0x587d6c(0x2c5)]>0x0&&(enemiesSpawnedThisWave+=_0x231f04[_0x587d6c(0x262)]['length']);},_0x3084f3);enemySpawnTimeouts[_0x259fb6(0x2cf)](_0x348f7b);});}else console[_0x15dd61(0x298)](_0x15dd61(0x20c)),isWaveTransitioning=!![],setTimeout(()=>{const _0x320c1d=_0x15dd61;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode==='coop'&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x320c1d(0x1b8)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);}function fireEnemyBurst(_0x18de53,_0x16f338,_0x1f03cc){const _0x10f957=_0x20bf56;let _0x4970be=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x4970be=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x4970be=playerLives>0x0&&!isShipCaptured;if(!_0x18de53||isPaused||!isInGameState||!_0x4970be||isChallengingStage||isWaveTransitioning)return;const _0x2a70d4=Math[_0x10f957(0x29f)](scaleValue(level,BASE_ENEMY_BULLET_BURST_COUNT,MAX_ENEMY_BULLET_BURST_COUNT));for(let _0x32cbee=0x0;_0x32cbee<_0x2a70d4;_0x32cbee++){const _0x269336=_0x1f03cc+_0x32cbee*ENTRANCE_FIRE_BURST_DELAY_MS,_0x3dc84a=setTimeout(()=>{const _0x274f24=_0x10f957;try{const _0x500071=enemySpawnTimeouts[_0x274f24(0x2a5)](_0x3dc84a);_0x500071>-0x1&&enemySpawnTimeouts[_0x274f24(0x267)](_0x500071,0x1);let _0x5709fc=![];isTwoPlayerMode&&selectedGameMode===_0x274f24(0x273)?_0x5709fc=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x5709fc=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x5709fc||isChallengingStage||isWaveTransitioning)return;const _0x652451=enemies[_0x274f24(0x23e)](_0x1d6081=>_0x1d6081&&_0x1d6081['id']===_0x18de53);_0x652451&&_0x652451[_0x274f24(0x1ae)]===_0x16f338&&(createBulletSimple(_0x652451)&&(_0x32cbee===0x0&&playSound('enemyShootSound',![],0.4),_0x652451['lastFiredTime']=Date[_0x274f24(0x2c7)]()));}catch(_0xc82abe){console[_0x274f24(0x1a4)](_0x274f24(0x1a0)+(_0x32cbee+0x1)+'/'+_0x2a70d4+')\x20for\x20'+_0x18de53+':',_0xc82abe);}},_0x269336);enemySpawnTimeouts[_0x10f957(0x2cf)](_0x3dc84a);}}function fireFixedEnemyBurst(_0x2e945e,_0x3d81fa,_0xe6fd3f,_0x4d7478){const _0x347710=_0x20bf56;let _0x1105b4=![];isTwoPlayerMode&&selectedGameMode===_0x347710(0x273)?_0x1105b4=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x1105b4=playerLives>0x0&&!isShipCaptured;if(!_0x2e945e||isPaused||!isInGameState||!_0x1105b4||isChallengingStage||isWaveTransitioning||_0x4d7478<=0x0)return;for(let _0x5f2f39=0x0;_0x5f2f39<_0x4d7478;_0x5f2f39++){const _0x35d144=_0xe6fd3f+_0x5f2f39*ENTRANCE_FIRE_BURST_DELAY_MS,_0x3580ff=setTimeout(()=>{const _0x4f5db7=_0x347710;try{const _0x4b3c84=enemySpawnTimeouts[_0x4f5db7(0x2a5)](_0x3580ff);_0x4b3c84>-0x1&&enemySpawnTimeouts[_0x4f5db7(0x267)](_0x4b3c84,0x1);let _0x40877f=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x40877f=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x40877f=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x40877f||isChallengingStage||isWaveTransitioning)return;const _0x667683=enemies[_0x4f5db7(0x23e)](_0x58b7db=>_0x58b7db&&_0x58b7db['id']===_0x2e945e);if(_0x667683)createBulletSimple(_0x667683)&&(_0x5f2f39===0x0&&playSound('enemyShootSound',![],0.4),_0x667683[_0x4f5db7(0x22e)]=Date[_0x4f5db7(0x2c7)]());else{}}catch(_0x485a81){console[_0x4f5db7(0x1a4)]('Error\x20during\x20FIXED\x20enemy\x20burst\x20firing\x20(bullet\x20'+(_0x5f2f39+0x1)+'/'+_0x4d7478+')\x20for\x20'+_0x2e945e+':',_0x485a81);}},_0x35d144);enemySpawnTimeouts[_0x347710(0x2cf)](_0x3580ff);}}function startFullGridWave(){const _0x4dbd0d=_0x20bf56;if(!currentWaveDefinition||currentWaveDefinition[_0x4dbd0d(0x2c5)]===0x0||!isFullGridWave){console[_0x4dbd0d(0x1a4)]('Attempted\x20to\x20start\x20Full\x20Grid\x20wave\x20without\x20valid\x20definition\x20or\x20when\x20not\x20in\x20Full\x20Grid\x20mode.'),isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}playSound('entranceSound',![],0.4),enemySpawnTimeouts[_0x4dbd0d(0x1f1)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x3f14fe=0x0;currentWaveDefinition[_0x4dbd0d(0x1f1)]((_0x2d5d32,_0x31823e)=>{const _0x3587e8=_0x4dbd0d;let _0x4aa1e8=0x0;_0x2d5d32&&_0x2d5d32[_0x3587e8(0x262)]&&Array[_0x3587e8(0x2b2)](_0x2d5d32[_0x3587e8(0x262)])?(_0x4aa1e8=_0x2d5d32[_0x3587e8(0x262)][_0x3587e8(0x2c5)],_0x2d5d32[_0x3587e8(0x262)]['forEach']((_0x7cc8c5,_0x5f5c21)=>{const _0x18a0d1=_0x3587e8;try{if(!_0x7cc8c5||!_0x7cc8c5[_0x18a0d1(0x239)]||typeof _0x7cc8c5[_0x18a0d1(0x246)]==='undefined'||typeof _0x7cc8c5[_0x18a0d1(0x26d)]===_0x18a0d1(0x278)){console[_0x18a0d1(0x1a4)](_0x18a0d1(0x28a)+_0x31823e+',\x20index\x20'+_0x5f5c21+_0x18a0d1(0x23f));return;}let _0x17c24d=_0x7cc8c5['type'],_0xcc285f=_0x17c24d===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x39d49e,_0x1df861;if(_0x17c24d===ENEMY1_TYPE)_0x39d49e=ENEMY1_WIDTH,_0x1df861=ENEMY1_HEIGHT;else _0x17c24d===ENEMY3_TYPE?(_0x39d49e=BOSS_WIDTH,_0x1df861=BOSS_HEIGHT):(_0x39d49e=ENEMY_WIDTH,_0x1df861=ENEMY_HEIGHT);let _0x1851bf,_0x259ade;try{const {x:_0x1baeaf,y:_0x4d1c4a}=getCurrentGridSlotPosition(_0x7cc8c5['gridRow'],_0x7cc8c5[_0x18a0d1(0x26d)],_0x39d49e);_0x1851bf=_0x1baeaf,_0x259ade=_0x4d1c4a;}catch(_0x563afb){console[_0x18a0d1(0x1a4)](_0x18a0d1(0x1ef)+_0x7cc8c5[_0x18a0d1(0x239)]+_0x18a0d1(0x1d2)+_0x7cc8c5[_0x18a0d1(0x246)]+','+_0x7cc8c5['gridCol']+']',_0x563afb),_0x1851bf=gameCanvas?.[_0x18a0d1(0x1b1)]/0x2||0xc8,_0x259ade=ENEMY_TOP_MARGIN+_0x7cc8c5[_0x18a0d1(0x246)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x44040d={'x':_0x1851bf,'y':_0x259ade,'width':_0x39d49e,'height':_0x1df861,'targetGridX':_0x1851bf,'targetGridY':_0x259ade,'speed':0x0,'state':_0x18a0d1(0x1bb),'gridRow':_0x7cc8c5['gridRow'],'gridCol':_0x7cc8c5[_0x18a0d1(0x26d)],'type':_0x17c24d,'health':_0xcc285f,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':null,'pathSegmentIndex':0x0,'pathT':0x0,'squadronId':_0x31823e,'squadronEnemyIndex':_0x5f5c21,'id':_0x18a0d1(0x19e)+_0x31823e+'-'+_0x5f5c21+'-'+Date['now']()+'-'+Math[_0x18a0d1(0x1bf)]()[_0x18a0d1(0x253)](0x24)[_0x18a0d1(0x210)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x18a0d1(0x1e9),'hasCapturedShip':_0x17c24d===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x17c24d===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies[_0x18a0d1(0x2cf)](_0x44040d),_0x3f14fe++;}catch(_0x4a43c4){console[_0x18a0d1(0x1a4)](_0x18a0d1(0x214)+_0x31823e+_0x18a0d1(0x1e7)+_0x5f5c21+'):',_0x4a43c4);}})):console['warn'](_0x3587e8(0x217)+_0x31823e+_0x3587e8(0x2ac)),squadronCompletionStatus[_0x31823e]={'completed':_0x4aa1e8,'total':_0x4aa1e8};}),totalEnemiesScheduledForWave=_0x3f14fe,enemiesSpawnedThisWave=_0x3f14fe,isEntrancePhaseActive=![],gridJustCompleted=!![],!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound('gridBackgroundSound',!![],0.1)),GRID_BREATH_ENABLED&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=Date['now'](),currentGridBreathFactor=0x0),lastGridFireCheckTime=Date[_0x4dbd0d(0x2c7)](),firstEnemyLanded=!![];}function renderGame(){const _0x19fd2a=_0x20bf56;try{if(!gameCtx||!gameCanvas){if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null;return;}gameCtx[_0x19fd2a(0x261)](0x0,0x0,gameCanvas[_0x19fd2a(0x1b1)],gameCanvas[_0x19fd2a(0x276)]);const _0x53adfe=Date[_0x19fd2a(0x2c7)]();gameCtx['save']();const _0x2d2eea=_0x19fd2a(0x1b7),_0x332d96=_0x19fd2a(0x2c1),_0x3eb96e='white';let _0x530789,_0x187a2c,_0x3d1f6c,_0x2768b0,_0x57cb83=![],_0x5b78ef=![],_0x21ec2a=![];if(isShowingResultsScreen){}else{if(gameOverSequenceStartTime>0x0&&!isShowingPlayerGameOverMessage){}else{if(isShowingPlayerGameOverMessage){}else{if(!isInGameState){}else{_0x3d1f6c=highScore||0x0;if(!isManualControl){}else{if(isTwoPlayerMode&&selectedGameMode===_0x19fd2a(0x273)){_0x530789=player1Score,_0x187a2c=player2Score,_0x3d1f6c=Math['max'](highScore,player1Score,player2Score),_0x2768b0=_0x19fd2a(0x2c6),_0x57cb83=!isShowingIntro&&!isPaused&&player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn,_0x5b78ef=!isShowingIntro&&!isPaused&&player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn;if(player1Score>=_0x3d1f6c&&player1Score>0x0)_0x21ec2a=_0x57cb83;if(player2Score>=_0x3d1f6c&&player2Score>0x0&&player2Score>player1Score)_0x21ec2a=_0x5b78ef;}else isTwoPlayerMode&&selectedGameMode===_0x19fd2a(0x1e9)?(_0x530789=currentPlayer===0x1?score:player1Score,_0x187a2c=currentPlayer===0x2?score:player2Score,_0x3d1f6c=Math[_0x19fd2a(0x27d)](highScore,player1Score,player2Score,score),_0x2768b0=_0x19fd2a(0x2c6),_0x57cb83=!isShowingIntro&&!isPaused&&currentPlayer===0x1&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x5b78ef=!isShowingIntro&&!isPaused&&currentPlayer===0x2&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x21ec2a=!isPaused&&!isShowingIntro&&score>0x0&&_0x3d1f6c>0x0&&score>=_0x3d1f6c):(_0x530789=score,_0x187a2c=0x0,_0x2768b0='1UP');}}}}}let _0x1e5039=![];if(_0x21ec2a){}typeof MARGIN_SIDE!==_0x19fd2a(0x278)&&typeof MARGIN_TOP!=='undefined'&&typeof SCORE_OFFSET_Y!==_0x19fd2a(0x278)&&(drawTopUiElement(_0x2768b0,_0x530789,_0x19fd2a(0x250),MARGIN_SIDE,_0x57cb83),drawTopUiElement(_0x19fd2a(0x294),_0x3d1f6c,_0x19fd2a(0x24e),gameCanvas['width']/0x2,_0x1e5039),drawTopUiElement(_0x19fd2a(0x1ed),_0x187a2c,'right',gameCanvas[_0x19fd2a(0x1b1)]-MARGIN_SIDE,_0x5b78ef));if(typeof shipImage!==_0x19fd2a(0x278)&&typeof LIFE_ICON_MARGIN_BOTTOM!==_0x19fd2a(0x278)&&typeof LIFE_ICON_SIZE!=='undefined'&&typeof LIFE_ICON_MARGIN_LEFT!==_0x19fd2a(0x278)&&typeof LIFE_ICON_SPACING!==_0x19fd2a(0x278)){if(shipImage['complete']&&shipImage[_0x19fd2a(0x2c3)]!==0x0){const _0x2f997a=gameCanvas[_0x19fd2a(0x276)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE;let _0x5d340d=0x0,_0xeafb15=0x0;if(isTwoPlayerMode&&selectedGameMode==='coop'){if(player1Lives>0x0)_0x5d340d=Math[_0x19fd2a(0x27d)](0x0,player1Lives-0x1);if(player2Lives>0x0)_0xeafb15=Math[_0x19fd2a(0x27d)](0x0,player2Lives-0x1);}else{if(playerLives>0x0)_0x5d340d=Math[_0x19fd2a(0x27d)](0x0,playerLives-0x1);}const _0x476d0b=0x5;for(let _0x2bfa1e=0x0;_0x2bfa1e<Math[_0x19fd2a(0x204)](_0x5d340d,_0x476d0b);_0x2bfa1e++){const _0xf10a0=LIFE_ICON_MARGIN_LEFT+_0x2bfa1e*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx[_0x19fd2a(0x268)](shipImage,Math[_0x19fd2a(0x29f)](_0xf10a0),Math[_0x19fd2a(0x29f)](_0x2f997a),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}if(isTwoPlayerMode&&selectedGameMode===_0x19fd2a(0x273)){const _0x26c0d8=gameCanvas[_0x19fd2a(0x1b1)]-LIFE_ICON_MARGIN_RIGHT-Math[_0x19fd2a(0x204)](_0xeafb15,_0x476d0b)*(LIFE_ICON_SIZE+LIFE_ICON_SPACING)+LIFE_ICON_SPACING;for(let _0xbadb73=0x0;_0xbadb73<Math[_0x19fd2a(0x204)](_0xeafb15,_0x476d0b);_0xbadb73++){const _0x53b560=_0x26c0d8+_0xbadb73*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx['drawImage'](shipImage,Math[_0x19fd2a(0x29f)](_0x53b560),Math['round'](_0x2f997a),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}}}}gameCtx['restore'](),gameCtx['save']();if(isTwoPlayerMode&&selectedGameMode===_0x19fd2a(0x273)){if(ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured){let _0x29467f=!![];if(isPlayer1Invincible){const _0x49706d=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x53adfe%_0x49706d>=INVINCIBILITY_BLINK_ON_MS)_0x29467f=![];}if(_0x29467f){const _0x90f97d=ship1['x'],_0x36b2f6=ship1['y'];typeof shipImage!=='undefined'&&shipImage[_0x19fd2a(0x2cb)]?(gameCtx[_0x19fd2a(0x268)](shipImage,Math[_0x19fd2a(0x29f)](_0x90f97d),Math[_0x19fd2a(0x29f)](_0x36b2f6),ship1[_0x19fd2a(0x1b1)],ship1[_0x19fd2a(0x276)]),player1IsDualShipActive&&gameCtx['drawImage'](shipImage,Math[_0x19fd2a(0x29f)](_0x90f97d+DUAL_SHIP_OFFSET_X),Math['round'](_0x36b2f6),ship1[_0x19fd2a(0x1b1)],ship1[_0x19fd2a(0x276)])):(gameCtx[_0x19fd2a(0x1bd)]=_0x19fd2a(0x2b0),gameCtx[_0x19fd2a(0x2b7)](Math[_0x19fd2a(0x29f)](_0x90f97d),Math[_0x19fd2a(0x29f)](_0x36b2f6),ship1[_0x19fd2a(0x1b1)],ship1[_0x19fd2a(0x276)]));}}if(ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured){let _0x1a7287=!![];if(isPlayer2Invincible){const _0x129280=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x53adfe%_0x129280>=INVINCIBILITY_BLINK_ON_MS)_0x1a7287=![];}if(_0x1a7287){const _0x242109=ship2['x'],_0xe60b71=ship2['y'];typeof shipImage!==_0x19fd2a(0x278)&&shipImage[_0x19fd2a(0x2cb)]?(gameCtx[_0x19fd2a(0x268)](shipImage,Math[_0x19fd2a(0x29f)](_0x242109),Math[_0x19fd2a(0x29f)](_0xe60b71),ship2['width'],ship2['height']),player2IsDualShipActive&&gameCtx['drawImage'](shipImage,Math['round'](_0x242109+DUAL_SHIP_OFFSET_X),Math[_0x19fd2a(0x29f)](_0xe60b71),ship2['width'],ship2[_0x19fd2a(0x276)])):(gameCtx[_0x19fd2a(0x1bd)]=_0x19fd2a(0x1bc),gameCtx[_0x19fd2a(0x2b7)](Math[_0x19fd2a(0x29f)](_0x242109),Math['round'](_0xe60b71),ship2[_0x19fd2a(0x1b1)],ship2[_0x19fd2a(0x276)]));}}}else{if(ship&&!isShowingCaptureMessage){let _0x2c1bce=!![];if(isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isInvincible){const _0xe777fc=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x53adfe%_0xe777fc>=INVINCIBILITY_BLINK_ON_MS)_0x2c1bce=![];}if(_0x2c1bce){let _0x3a4484=ship['x'],_0x338e7a=(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0||!isInGameState||isShowingScoreScreen||isInGameState&&isShowingIntro&&!isManualControl&&(introStep===0x1||introStep===0x2||introStep===0x3))&&!isDualShipActive;_0x338e7a&&(_0x3a4484=Math[_0x19fd2a(0x29f)](gameCanvas['width']/0x2-ship[_0x19fd2a(0x1b1)]/0x2));const _0x27531f=ship['y'];typeof shipImage!==_0x19fd2a(0x278)&&shipImage['complete']?(gameCtx['drawImage'](shipImage,Math[_0x19fd2a(0x29f)](_0x3a4484),Math[_0x19fd2a(0x29f)](_0x27531f),ship[_0x19fd2a(0x1b1)],ship['height']),isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isDualShipActive&&!isShipCaptured&&gameCtx[_0x19fd2a(0x268)](shipImage,Math[_0x19fd2a(0x29f)](_0x3a4484+DUAL_SHIP_OFFSET_X),Math[_0x19fd2a(0x29f)](_0x27531f),ship[_0x19fd2a(0x1b1)],ship['height'])):(gameCtx['fillStyle']=_0x19fd2a(0x2b0),gameCtx[_0x19fd2a(0x2b7)](Math[_0x19fd2a(0x29f)](_0x3a4484),Math[_0x19fd2a(0x29f)](_0x27531f),ship['width'],ship['height']));}}}if(fallingShips[_0x19fd2a(0x2c5)]>0x0&&typeof shipImage!==_0x19fd2a(0x278)&&shipImage[_0x19fd2a(0x2cb)]){}gameCtx['restore']();if(!isInGameState){if(isShowingScoreScreen){}else{gameCtx['save']();const _0xae9ab0=gameCanvas[_0x19fd2a(0x1b1)],_0x313cc5=gameCanvas[_0x19fd2a(0x276)],_0x59591b=_0xae9ab0/0x2;selectedButtonIndex===-0x1&&(isPlayerSelectMode||isFiringModeSelectMode||isGameModeSelectMode||!isPlayerSelectMode&&!isFiringModeSelectMode&&!isGameModeSelectMode)&&(selectedButtonIndex=0x0);let _0x4f73bf=MENU_LOGO_APPROX_HEIGHT,_0x42a93f=_0x4f73bf*(logoImage[_0x19fd2a(0x237)]/logoImage['naturalHeight']||0x1);typeof logoImage!=='undefined'&&logoImage['complete']&&logoImage[_0x19fd2a(0x2c3)]!==0x0&&(_0x4f73bf=logoImage[_0x19fd2a(0x2c3)]*LOGO_SCALE_FACTOR,_0x42a93f=logoImage['naturalWidth']*LOGO_SCALE_FACTOR);const _0x45bfdd=getSubtitleApproxHeight(MENU_SUBTITLE_FONT),_0x366363=_0x4f73bf+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0x45bfdd;let _0x504fb1=(_0x313cc5-_0x366363)/0x2-0x46;_0x504fb1+=MENU_GENERAL_Y_OFFSET;const _0x5d0f57=_0x59591b-_0x42a93f/0x2,_0x25ec42=_0x504fb1+MENU_LOGO_EXTRA_Y_OFFSET;typeof logoImage!==_0x19fd2a(0x278)&&logoImage['complete']&&logoImage[_0x19fd2a(0x2c3)]!==0x0?gameCtx['drawImage'](logoImage,Math[_0x19fd2a(0x29f)](_0x5d0f57),Math[_0x19fd2a(0x29f)](_0x25ec42),_0x42a93f,_0x4f73bf):drawCanvasText(_0x19fd2a(0x1c8),_0x59591b,_0x25ec42+_0x4f73bf/0x2,_0x19fd2a(0x1c7),_0x19fd2a(0x2a0));if(isGameModeSelectMode)drawCanvasButton('NORMAL\x20GAME',0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x19fd2a(0x1a2),0x1,selectedButtonIndex===0x1);else{if(isFiringModeSelectMode)drawCanvasButton(_0x19fd2a(0x209),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x19fd2a(0x26c),0x1,selectedButtonIndex===0x1);else isPlayerSelectMode?(drawCanvasButton(_0x19fd2a(0x1c6),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x19fd2a(0x248),0x1,selectedButtonIndex===0x1)):(drawCanvasButton('START\x20GAME',0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x19fd2a(0x25c),0x1,selectedButtonIndex===0x1));}const _0x884ac6=getMenuButtonRect(0x1);let _0x118edf;_0x884ac6?_0x118edf=_0x884ac6['y']+_0x884ac6[_0x19fd2a(0x276)]+MENU_BUTTON_SUBTITLE_V_GAP+_0x45bfdd/0x2:_0x118edf=_0x504fb1+_0x4f73bf+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0x45bfdd/0x2,drawCanvasText(MENU_SUBTITLE_TEXT,_0x59591b-0x1,Math[_0x19fd2a(0x29f)](_0x118edf),MENU_SUBTITLE_FONT,MENU_SUBTITLE_COLOR,'center',_0x19fd2a(0x291),!![]),gameCtx[_0x19fd2a(0x2bb)]();}}else{if(gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){gameCtx[_0x19fd2a(0x288)]();let _0x37556e=!showReadyMessage&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!isCsCompletionDelayActive&&!isShowingIntro&&!isShowingCaptureMessage;_0x37556e&&(bullets['forEach'](_0x324ada=>{}),enemyBullets['forEach'](_0x5271d0=>{}));enemies[_0x19fd2a(0x1f1)](_0xcd39b2=>{});if(captureBeamActive&&capturingBossId&&captureBeamProgress>0x0){}renderExplosions(),renderFloatingScores(),renderHitSparks();let _0x44e2c5=![];const _0x5f144b=gameCanvas['height']/0x2;if(isPaused){}else{if(isShowingCaptureMessage){}}gameCtx[_0x19fd2a(0x2bb)]();}else{if(isShowingPlayerGameOverMessage){}else{if(gameOverSequenceStartTime>0x0){}}}}}catch(_0x52ec99){console[_0x19fd2a(0x1a4)](_0x19fd2a(0x1fc),_0x52ec99,_0x52ec99[_0x19fd2a(0x226)]);}}function handleEnemyHit(_0x1fcb61,_0x43041e=null){const _0x1fa10b=_0x20bf56;if(!_0x1fcb61)return{'destroyed':![],'pointsAwarded':0x0};const _0x31eb1e=Date[_0x1fa10b(0x2c7)]();let _0x299627=0x0,_0x510ef1=![],_0x2e6f68=_0x1fcb61['isDamaged'],_0x2aa576=null,_0x1fb4f9=0x1;const _0x278248=_0x1fcb61[_0x1fa10b(0x239)]===ENEMY3_TYPE?BOSS_WIDTH:_0x1fcb61[_0x1fa10b(0x239)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x2ac801=_0x1fcb61[_0x1fa10b(0x239)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x1fcb61[_0x1fa10b(0x239)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x4ddd0f=_0x1fcb61[_0x1fa10b(0x239)]===ENEMY3_TYPE&&_0x1fcb61[_0x1fa10b(0x20a)],_0x1fd2c4=_0x1fcb61[_0x1fa10b(0x239)]===ENEMY3_TYPE&&_0x1fcb61[_0x1fa10b(0x1b0)];let _0x480dae=![],_0x3b7720=null;if(_0x4ddd0f){if(isTwoPlayerMode&&selectedGameMode==='coop'){if(isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x1fcb61['id'])_0x480dae=!![],_0x3b7720=_0x1fa10b(0x1d9);else isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x1fcb61['id']&&(_0x480dae=!![],_0x3b7720=_0x1fa10b(0x2b1));}else!isTwoPlayerMode&&isShipCaptured&&capturedBossIdWithMessage===_0x1fcb61['id']&&(_0x480dae=!![]);}const _0x3896e7=_0x1fcb61['x']+_0x278248/0x2,_0x533131=_0x1fcb61['y']+_0x2ac801*0.2;createHitSparks(_0x3896e7,_0x533131),_0x1fcb61['health']--;_0x1fcb61['type']===ENEMY3_TYPE&&(_0x1fcb61[_0x1fa10b(0x1c3)]=_0x1fcb61[_0x1fa10b(0x279)]<ENEMY3_MAX_HITS);if(_0x1fcb61['health']<=0x0){_0x510ef1=!![];isChallengingStage&&challengingStageEnemiesHit++;if(_0x4ddd0f&&_0x1fd2c4){let _0x3d786b=null;if(_0x480dae&&_0x3b7720)_0x3d786b=_0x3b7720;else{let _0x3e64e5=![];if(isCoopAIDemoActive){if(_0x43041e===_0x1fa10b(0x1d9)&&player1IsDualShipActive)_0x3d786b=_0x1fa10b(0x2b1),_0x3e64e5=!![];else _0x43041e===_0x1fa10b(0x2b1)&&player2IsDualShipActive&&(_0x3d786b=_0x1fa10b(0x1d9),_0x3e64e5=!![]);}else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x1fa10b(0x28b)){if(_0x43041e===_0x1fa10b(0x23c)&&player2IsDualShipActive)_0x3d786b=_0x1fa10b(0x1d9),_0x3e64e5=!![];else _0x43041e===_0x1fa10b(0x1d9)&&player1IsDualShipActive&&(_0x3d786b=_0x1fa10b(0x23c),_0x3e64e5=!![]);}}!_0x3e64e5&&(_0x3d786b=_0x43041e);}_0x3d786b===null&&_0x43041e&&(_0x3d786b=_0x43041e);if(_0x1fcb61[_0x1fa10b(0x1b0)]){const _0x3d81ba=_0x1fcb61[_0x1fa10b(0x1b0)]['width'],_0x2a7632=_0x1fcb61[_0x1fa10b(0x1b0)][_0x1fa10b(0x276)],_0x1e24d9=_0x1fcb61['x']+(_0x278248-_0x3d81ba)/0x2+CAPTURED_SHIP_OFFSET_X,_0x8692f=_0x1fcb61['y']+CAPTURED_SHIP_OFFSET_Y,_0x592617=fallingShips[_0x1fa10b(0x1fe)](_0x378a21=>Math[_0x1fa10b(0x1d4)](_0x378a21['x']-_0x1e24d9)<0x1&&Math[_0x1fa10b(0x1d4)](_0x378a21['y']-_0x8692f)<0x1);!_0x592617&&fallingShips['push']({'x':_0x1e24d9,'y':_0x8692f,'width':_0x3d81ba,'height':_0x2a7632,'creationTime':_0x31eb1e,'tintProgress':0x1,'rotation':0x0,'rotationDirection':Math['random']()<0.5?-0x1:0x1,'totalRotation':0x0,'rotationCompleted':![],'targetPlayerId':_0x3d786b});}else console[_0x1fa10b(0x1a4)]('[handleEnemyHit]\x20CRITICAL:\x20Boss\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!');_0x1fcb61[_0x1fa10b(0x20a)]=![],_0x1fcb61[_0x1fa10b(0x1b0)]=null;}else _0x4ddd0f&&!_0x1fd2c4&&(console[_0x1fa10b(0x1a4)](_0x1fa10b(0x1b3)+_0x1fcb61['id']+'\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!\x20Resetting\x20state\x20anyway.'),_0x1fcb61[_0x1fa10b(0x20a)]=![],_0x1fcb61[_0x1fa10b(0x1b0)]=null);if(isChallengingStage){let _0x4eca8c=0x64;const _0x37bcf9=csLastHitTime;csLastHitTime=_0x31eb1e,csLastChainHitPosition={'x':_0x1fcb61['x'],'y':_0x1fcb61['y']},csCurrentChainHits>0x0&&_0x31eb1e-_0x37bcf9<CS_CHAIN_BREAK_TIME_MS?csCurrentChainHits++:(csCurrentChainHits=0x1,csCurrentChainScore=0x0),csCurrentChainHits>=CS_CHAIN_SCORE_THRESHOLD&&(_0x4eca8c*=0x2),_0x299627=_0x4eca8c,csCurrentChainScore+=_0x299627,scoreEarnedThisCS+=_0x299627,_0x2aa576='explosionSound',_0x1fb4f9=0.4;}else{if(_0x1fcb61['state']===_0x1fa10b(0x1bb))_0x299627=_0x1fcb61[_0x1fa10b(0x239)]===ENEMY1_TYPE?0x32:_0x1fcb61[_0x1fa10b(0x239)]===ENEMY2_TYPE?0x50:0x0,_0x1fcb61[_0x1fa10b(0x239)]===ENEMY3_TYPE&&(_0x299627=0x96),_0x2aa576=_0x1fa10b(0x1d7),_0x1fb4f9=0.4;else{_0x299627=_0x1fcb61[_0x1fa10b(0x239)]===ENEMY1_TYPE?0x64:_0x1fcb61[_0x1fa10b(0x239)]===ENEMY2_TYPE?0xa0:0x0;if(_0x1fcb61[_0x1fa10b(0x239)]===ENEMY3_TYPE){if(_0x4ddd0f){const _0x10be27=[0x3e8,0x5dc,0x7d0,0xbb8];_0x299627=_0x10be27[Math[_0x1fa10b(0x27a)](Math[_0x1fa10b(0x1bf)]()*_0x10be27[_0x1fa10b(0x2c5)])],_0x2aa576=_0x1fa10b(0x1a8),_0x1fb4f9=0.4;}else _0x2e6f68?(_0x299627=0x190,_0x2aa576=_0x1fa10b(0x1a8),_0x1fb4f9=0.4):(_0x299627=0x0,console[_0x1fa10b(0x298)](_0x1fa10b(0x223)+_0x299627+'\x20points.\x20Health\x20was:\x20'+(_0x1fcb61[_0x1fa10b(0x279)]+0x1)),_0x2aa576=_0x1fa10b(0x1d7),_0x1fb4f9=0.4);}else _0x2aa576=_0x1fa10b(0x1d7),_0x1fb4f9=0.4;if(_0x510ef1&&_0x299627>0x0){const _0x4dd617=normalWaveLastHitTime;normalWaveLastHitTime=_0x31eb1e,normalWaveLastChainHitPosition={'x':_0x1fcb61['x'],'y':_0x1fcb61['y']};normalWaveLastChainHitPosition&&_0x31eb1e-_0x4dd617<NORMAL_WAVE_CHAIN_BREAK_TIME_MS?normalWaveCurrentChainHits++:(normalWaveCurrentChainHits=0x1,normalWaveCurrentChainScore=0x0);if(NORMAL_WAVE_CHAIN_BONUS_ENABLED&&normalWaveCurrentChainHits>=NORMAL_WAVE_CHAIN_SCORE_THRESHOLD){const _0x3b5c9a=[0x12c,0x258,0x3e8,0x5dc,0x7d0,0xbb8],_0x532464=Math[_0x1fa10b(0x204)](_0x3b5c9a[_0x1fa10b(0x2c5)]-0x1,normalWaveCurrentChainHits-NORMAL_WAVE_CHAIN_SCORE_THRESHOLD),_0x13629a=_0x3b5c9a[_0x532464];_0x299627+=_0x13629a,normalWaveCurrentChainScore+=_0x13629a;}}}}if(_0x299627>0x0){let _0x4b1104=null;if(isCoopAIDemoActive){if(_0x43041e===_0x1fa10b(0x1d9))player1Score+=_0x299627,_0x4b1104=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(_0x1fa10b(0x29a),![],0.2))),checkAndAwardExtraLife(0x1);else{if(_0x43041e===_0x1fa10b(0x2b1))player2Score+=_0x299627,_0x4b1104=()=>player2EnemiesHit++,player2Score>highScore&&(highScore=player2Score,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound('hiScoreSound',![],0.2))),checkAndAwardExtraLife(0x2);else{player1Score+=_0x299627,_0x4b1104=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score;checkAndAwardExtraLife(0x1);}}}else{if(!isManualControl)score+=_0x299627,player1Score=score,_0x4b1104=()=>player1EnemiesHit++,score>highScore&&(highScore=score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(_0x1fa10b(0x29a),![],0.2))),checkAndAwardExtraLife(0x1);else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x1fa10b(0x28b)){if(_0x43041e===_0x1fa10b(0x1d9))player1Score+=_0x299627,_0x4b1104=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(_0x1fa10b(0x29a),![],0.2))),checkAndAwardExtraLife(0x1);else{if(_0x43041e===_0x1fa10b(0x23c))player2Score+=_0x299627,_0x4b1104=()=>player2EnemiesHit++,player2Score>highScore&&(highScore=player2Score,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound('hiScoreSound',![],0.2))),checkAndAwardExtraLife(0x2);else{player1Score+=_0x299627,_0x4b1104=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score;checkAndAwardExtraLife(0x1);}}}else{if(isTwoPlayerMode&&selectedGameMode===_0x1fa10b(0x273)){if(_0x43041e===_0x1fa10b(0x1d9))player1Score+=_0x299627,_0x4b1104=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound('hiScoreSound',![],0.2))),checkAndAwardExtraLife(0x1);else _0x43041e===_0x1fa10b(0x2b1)?(player2Score+=_0x299627,_0x4b1104=()=>player2EnemiesHit++,player2Score>highScore&&(highScore=player2Score,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound(_0x1fa10b(0x29a),![],0.2))),checkAndAwardExtraLife(0x2)):(player1Score+=_0x299627,_0x4b1104=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(_0x1fa10b(0x29a),![],0.2))),checkAndAwardExtraLife(0x1));}else{score+=_0x299627;let _0x24b19d=score,_0x377e38=null,_0x33787d=currentPlayer;currentPlayer===0x1||!isTwoPlayerMode?(player1Score=score,_0x4b1104=()=>player1EnemiesHit++,_0x377e38=()=>{player1TriggeredHighScoreSound=!![];}):(player2Score=score,_0x4b1104=()=>player2EnemiesHit++,_0x377e38=()=>{player2TriggeredHighScoreSound=!![];});if(_0x24b19d>highScore){highScore=_0x24b19d;const _0x328cec=currentPlayer===0x1||!isTwoPlayerMode?player1TriggeredHighScoreSound:player2TriggeredHighScoreSound;!_0x328cec&&_0x377e38&&(_0x377e38(),playSound(_0x1fa10b(0x29a),![],0.2));}checkAndAwardExtraLife(_0x33787d);}}}}_0x4b1104&&!isChallengingStage&&_0x4b1104();const _0x3c17ea=_0x1fcb61[_0x1fa10b(0x1ae)]===_0x1fa10b(0x1bb)||isChallengingStage?FLOATING_SCORE_COLOR_GRID:FLOATING_SCORE_COLOR_ACTIVE;floatingScores[_0x1fa10b(0x2cf)]({'text':_0x299627[_0x1fa10b(0x253)](),'x':_0x1fcb61['x']+_0x278248/0x2,'y':_0x1fcb61['y'],'color':_0x3c17ea,'creationTime':_0x31eb1e,'displayStartTime':_0x31eb1e+FLOATING_SCORE_APPEAR_DELAY});}createExplosion(_0x1fcb61['x']+_0x278248/0x2,_0x1fcb61['y']+_0x2ac801/0x2);_0x1fcb61['id']===capturingBossId&&stopSound(_0x1fa10b(0x1ab));if(_0x1fcb61[_0x1fa10b(0x1ae)]===_0x1fa10b(0x287)||_0x1fcb61[_0x1fa10b(0x1ae)]===_0x1fa10b(0x1b6)||_0x1fcb61[_0x1fa10b(0x1ae)]===_0x1fa10b(0x1fb)||_0x1fcb61[_0x1fa10b(0x1ae)]==='following_bezier_path'||_0x1fcb61[_0x1fa10b(0x1ae)]===_0x1fa10b(0x1af)||_0x1fcb61[_0x1fa10b(0x1ae)]===_0x1fa10b(0x2a7)){if(_0x1fcb61['type']===ENEMY3_TYPE)stopSound(_0x1fa10b(0x228));else stopSound(_0x1fa10b(0x19c));}}else{_0x510ef1=![];if(_0x1fcb61['type']===ENEMY3_TYPE)_0x2aa576=_0x1fa10b(0x266),_0x1fb4f9=0.6,_0x299627=0x0;else{_0x299627=0x0;if(_0x1fcb61[_0x1fa10b(0x239)]===ENEMY1_TYPE)_0x2aa576=_0x1fa10b(0x272),_0x1fb4f9=0.3;else _0x1fcb61[_0x1fa10b(0x239)]===ENEMY2_TYPE&&(_0x2aa576='butterflyHitSound',_0x1fb4f9=0.3);}}return _0x2aa576&&playSound(_0x2aa576,![],_0x1fb4f9),{'destroyed':_0x510ef1,'pointsAwarded':_0x299627};}function createHitSparks(_0x10570a,_0x551b74){const _0x3a3e44=_0x20bf56;if(!gameCtx)return;const _0x2c20b2=Date['now']();for(let _0x3328d8=0x0;_0x3328d8<HIT_SPARK_COUNT;_0x3328d8++){const _0x41f070=Math[_0x3a3e44(0x1bf)]()*Math['PI']*0x2,_0x1a6732=HIT_SPARK_SPEED*(0.7+Math[_0x3a3e44(0x1bf)]()*0.6),_0x2884dd=HIT_SPARK_LIFETIME*(0.8+Math[_0x3a3e44(0x1bf)]()*0.4);hitSparks[_0x3a3e44(0x2cf)]({'x':_0x10570a,'y':_0x551b74,'vx':Math['cos'](_0x41f070)*_0x1a6732,'vy':Math[_0x3a3e44(0x289)](_0x41f070)*_0x1a6732,'creationTime':_0x2c20b2,'lifetime':_0x2884dd,'size':HIT_SPARK_SIZE,'color':HIT_SPARK_COLOR});}}function updateHitSparks(){const _0x2d5c41=_0x20bf56,_0xbf33f5=Date['now']();for(let _0x1e1bb5=hitSparks['length']-0x1;_0x1e1bb5>=0x0;_0x1e1bb5--){const _0x16a11d=hitSparks[_0x1e1bb5],_0x3ae22b=_0xbf33f5-_0x16a11d['creationTime'];_0x3ae22b>=_0x16a11d[_0x2d5c41(0x26e)]?hitSparks[_0x2d5c41(0x267)](_0x1e1bb5,0x1):(_0x16a11d['vy']+=HIT_SPARK_GRAVITY,_0x16a11d['x']+=_0x16a11d['vx'],_0x16a11d['y']+=_0x16a11d['vy'],_0x16a11d[_0x2d5c41(0x1ac)]=Math['max'](0x0,0x1-_0x3ae22b*HIT_SPARK_FADE_SPEED));}}function moveEntities(){const _0x17290f=_0x20bf56;try{if(isPaused)return;const _0x3da6f6=Date['now']();}catch(_0x3b3dd2){console[_0x17290f(0x1a4)]('FATAL\x20Error\x20in\x20moveEntities\x20(Restored\x20Conditions):',_0x3b3dd2,_0x3b3dd2[_0x17290f(0x226)]),isGridSoundPlaying=![],stopSound(_0x17290f(0x220)),isEntrancePhaseActive=![],stopSound(_0x17290f(0x21f)),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(_0x17290f(0x1ab)),stopSound('shipCapturedSound'),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState==='function')showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x17290f(0x2be));}}function switchPlayerTurn(){const _0x3e5ab9=_0x20bf56;if(!isTwoPlayerMode||selectedGameMode===_0x3e5ab9(0x273))return![];stopSound('hiScoreSound');if(currentPlayer===0x1){player1Score=score,player1IsDualShipActive=isDualShipActive,player1MaxLevelReached=Math['max'](player1MaxLevelReached,level);if(player1Score>highScore)highScore=player1Score;}else{player2Score=score,player2IsDualShipActive=isDualShipActive,player2MaxLevelReached=Math['max'](player2MaxLevelReached,level);if(player2Score>highScore)highScore=player2Score;}const _0xb90038=currentPlayer===0x1?0x2:0x1,_0x199aef=_0xb90038===0x1?player1Lives:player2Lives;if(_0x199aef<=0x0){const _0x1f7184=currentPlayer===0x1?player1Lives:player2Lives;return _0x1f7184<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0xb90038,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function firePlayerBullet(_0xb5b70=null,_0x3b3ea1=![]){const _0xe1120f=_0x20bf56,_0x2f260c=Date[_0xe1120f(0x2c7)](),_0x13f109=isTwoPlayerMode&&selectedGameMode===_0xe1120f(0x273)&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x2f260c<coopPlayersReadyStartTime+0x1f40;if(_0x13f109)return![];let _0x25113c=![],_0x2a643f=null,_0x494875=![],_0x2d0aed=0x0,_0x543811=_0x57bd19=>{},_0x2f8b18=_0x4ef133=>{},_0x4d05d7=![],_0x20b265=()=>![],_0x4e5e9b=_0x200557=>{},_0x1f8ceb=_0xb5b70;const _0x2c91f1=!isPaused&&isInGameState&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!showReadyMessage&&!isCsCompletionDelayActive&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!(isTwoPlayerMode&&selectedGameMode==='coop'&&(_0xb5b70===_0xe1120f(0x1d9)&&isPlayer1ShowingGameOverMessage||_0xb5b70===_0xe1120f(0x2b1)&&isPlayer2ShowingGameOverMessage));if(!_0x2c91f1)return![];if(isTwoPlayerMode&&selectedGameMode==='coop'){if(_0xb5b70==='player1'&&ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!player1NeedsRespawnAfterCapture)(!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer1ShipCaptured)&&(_0x2a643f=ship1,_0x494875=player1IsDualShipActive,_0x2d0aed=player1LastShotTime,_0x543811=_0x544fba=>{player1LastShotTime=_0x544fba;},_0x2f8b18=_0x3b5846=>{player1ShotsFired+=_0x3b5846;},_0x4d05d7=selectedFiringMode==='single',_0x20b265=()=>p1JustFiredSingle,_0x4e5e9b=_0x5cead4=>{p1JustFiredSingle=_0x5cead4;},_0x25113c=!![]);else _0xb5b70===_0xe1120f(0x2b1)&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!player2NeedsRespawnAfterCapture&&((!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer2ShipCaptured)&&(_0x2a643f=ship2,_0x494875=player2IsDualShipActive,_0x2d0aed=player2LastShotTime,_0x543811=_0x35c210=>{player2LastShotTime=_0x35c210;},_0x2f8b18=_0x1bdc37=>{player2ShotsFired+=_0x1bdc37;},isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'?_0x4d05d7=![]:(_0x4d05d7=selectedFiringMode==='single',_0x20b265=()=>p2JustFiredSingle,_0x4e5e9b=_0xe75bcc=>{p2JustFiredSingle=_0xe75bcc;}),_0x25113c=!![]));}else{if(ship&&playerLives>0x0&&!isShipCaptured){_0x2a643f=ship,_0x494875=isDualShipActive;if(isTwoPlayerMode&&selectedGameMode===_0xe1120f(0x1e9)){if(currentPlayer===0x1){_0x2d0aed=player1LastShotTime,_0x543811=_0x3153f8=>{player1LastShotTime=_0x3153f8;},_0x2f8b18=_0x3fa3cb=>{player1ShotsFired+=_0x3fa3cb;},_0x4d05d7=selectedFiringMode==='single',_0x20b265=()=>p1JustFiredSingle,_0x4e5e9b=_0x4b29fb=>{p1JustFiredSingle=_0x4b29fb;};if(!_0x1f8ceb)_0x1f8ceb='player1';}else{_0x2d0aed=player2LastShotTime,_0x543811=_0xc31974=>{player2LastShotTime=_0xc31974;},_0x2f8b18=_0x175bf2=>{player2ShotsFired+=_0x175bf2;};if(isPlayerTwoAI){_0x4d05d7=![];if(!_0x1f8ceb)_0x1f8ceb='ai_p2';}else{_0x4d05d7=selectedFiringMode===_0xe1120f(0x236);connectedGamepadIndexP2===null&&connectedGamepadIndex!==null?(_0x20b265=()=>p1JustFiredSingle,_0x4e5e9b=_0x1012be=>{p1JustFiredSingle=_0x1012be;}):(_0x20b265=()=>p2JustFiredSingle,_0x4e5e9b=_0x674f0=>{p2JustFiredSingle=_0x674f0;});if(!_0x1f8ceb)_0x1f8ceb=_0xe1120f(0x2b1);}}}else{_0x2d0aed=player1LastShotTime,_0x543811=_0x2e0e00=>{player1LastShotTime=_0x2e0e00;},_0x2f8b18=_0x3fc987=>{player1ShotsFired+=_0x3fc987;},_0x4d05d7=selectedFiringMode===_0xe1120f(0x236),_0x20b265=()=>p1JustFiredSingle,_0x4e5e9b=_0x1fe212=>{p1JustFiredSingle=_0x1fe212;};if(!_0x1f8ceb)_0x1f8ceb=_0xe1120f(0x1d9);}_0x25113c=!![];}}_0xb5b70===null&&!isManualControl&&!isCoopAIDemoActive&&ship&&playerLives>0x0&&!isShipCaptured&&!isShowingCaptureMessage&&(_0x2a643f=ship,_0x494875=isDualShipActive,_0x2d0aed=aiLastShotTime,_0x543811=_0xcd21bf=>{aiLastShotTime=_0xcd21bf;},_0x2f8b18=_0x2c0495=>{player1ShotsFired+=_0x2c0495;},_0x4d05d7=![],_0x25113c=!![],_0x1f8ceb='ai');if(!_0x25113c||!_0x2a643f)return![];const _0x473593=isManualControl||isPlayerTwoAI&&selectedGameMode===_0xe1120f(0x1e9)&&currentPlayer===0x2||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xe1120f(0x28b)&&_0xb5b70===_0xe1120f(0x1d9);if(_0x4d05d7){if(_0x3b3ea1){if(_0x2f260c-_0x2d0aed<SHOOT_COOLDOWN)return![];}else{let _0x5a2924=![];if(_0x1f8ceb===_0xe1120f(0x1d9)||!isTwoPlayerMode&&_0x1f8ceb===_0xe1120f(0x1d9))_0x5a2924=keyboardP1ShootDown||connectedGamepadIndex!==null&&navigator[_0xe1120f(0x2d1)]()?.[connectedGamepadIndex]?.[_0xe1120f(0x1df)][PS5_BUTTON_CROSS]?.['pressed'];else{if(_0x1f8ceb==='player2'&&!isPlayerTwoAI){if(connectedGamepadIndexP2!==null)_0x5a2924=keyboardP2ShootDown||connectedGamepadIndexP2!==null&&navigator[_0xe1120f(0x2d1)]()?.[connectedGamepadIndexP2]?.[_0xe1120f(0x1df)][PS5_BUTTON_CROSS]?.['pressed'];else connectedGamepadIndex!==null?_0x5a2924=keyboardP2ShootDown||connectedGamepadIndex!==null&&navigator[_0xe1120f(0x2d1)]()?.[connectedGamepadIndex]?.[_0xe1120f(0x1df)][PS5_BUTTON_CROSS]?.[_0xe1120f(0x256)]:_0x5a2924=keyboardP2ShootDown;}}if(_0x20b265()){if(_0x5a2924)return![];else _0x4e5e9b(![]);}if(_0x2f260c-_0x2d0aed<SHOOT_COOLDOWN)return![];}}else{if(_0x2f260c-_0x2d0aed<SHOOT_COOLDOWN)return![];}try{const _0x59ec6a=_0x2a643f['y'];let _0xe2de37=0x0;if(_0x494875){const _0x683436=_0x2a643f['x']+_0x2a643f[_0xe1120f(0x1b1)]/0x2,_0x134f72=_0x2a643f['x']+DUAL_SHIP_OFFSET_X+_0x2a643f['width']/0x2,_0x24d24f=_0x683436-PLAYER_BULLET_WIDTH/0x2,_0x271d8e=_0x134f72-PLAYER_BULLET_WIDTH/0x2;bullets[_0xe1120f(0x2cf)]({'x':_0x24d24f,'y':_0x59ec6a,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x1f8ceb}),bullets[_0xe1120f(0x2cf)]({'x':_0x271d8e,'y':_0x59ec6a,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x1f8ceb}),_0xe2de37=0x2;}else{const _0x1cfe86=_0x2a643f['x']+_0x2a643f[_0xe1120f(0x1b1)]/0x2-PLAYER_BULLET_WIDTH/0x2;bullets[_0xe1120f(0x2cf)]({'x':_0x1cfe86,'y':_0x59ec6a,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x1f8ceb}),_0xe2de37=0x1;}if(_0x4d05d7&&!_0x3b3ea1)_0x4e5e9b(!![]);return playSound(_0xe1120f(0x2c0),![],0.4),_0x2f8b18(_0xe2de37),_0x543811(_0x2f260c),!![];}catch(_0x34e007){return console[_0xe1120f(0x1a4)](_0xe1120f(0x1ea),_0x34e007),![];}}function handlePlayerInput(){const _0x32f2e9=_0x20bf56;try{const _0x53b465=Date[_0x32f2e9(0x2c7)](),_0x391d7a=isTwoPlayerMode&&selectedGameMode===_0x32f2e9(0x273)&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x53b465<coopPlayersReadyStartTime+0x1f40;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedGameMode===_0x32f2e9(0x1e9)&&currentPlayer===0x2&&!isManualControl){isCoopAIDemoActive&&(leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![]);return;}let _0x5cd01e=isPaused||!isManualControl||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isTwoPlayerMode&&selectedGameMode==='coop'&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage);if(_0x5cd01e){keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![];return;}let _0x28ff18=0x0;if(isTouchActiveGame&&gameCanvas&&gameCanvas[_0x32f2e9(0x1b1)]>0x0){const _0x25f6a8=gameCanvas['getBoundingClientRect'](),_0x3b7a65=gameCanvas[_0x32f2e9(0x1b1)]/_0x25f6a8['width'];_0x28ff18=(touchCurrentX-_0x25f6a8[_0x32f2e9(0x250)])*_0x3b7a65;}let _0x37d387=![],_0x256f47=![],_0x56c97c=![],_0xc4d93a=![],_0x21b511=![],_0x246c44=![];if(connectedGamepadIndex!==null){const _0x3a58b1=navigator[_0x32f2e9(0x2d1)]();if(_0x3a58b1?.[connectedGamepadIndex]){const _0x5db8c6=_0x3a58b1[connectedGamepadIndex],_0x5eea91=processSingleController(_0x5db8c6,previousGameButtonStates);_0x37d387=_0x5eea91[_0x32f2e9(0x250)],_0x256f47=_0x5eea91['right'],_0x56c97c=_0x5eea91[_0x32f2e9(0x1da)],previousGameButtonStates=_0x5eea91[_0x32f2e9(0x202)][_0x32f2e9(0x19d)]();if(_0x5eea91[_0x32f2e9(0x23b)]&&!isShowingCaptureMessage){togglePause();return;}if(_0x5eea91[_0x32f2e9(0x23a)]&&!isShowingCaptureMessage){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates[_0x32f2e9(0x2c5)]>0x0)previousGameButtonStates=[];}}else{if(previousGameButtonStates[_0x32f2e9(0x2c5)]>0x0)previousGameButtonStates=[];}if(!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x32f2e9(0x28b))){if(isTwoPlayerMode&&connectedGamepadIndexP2!==null&&connectedGamepadIndexP2!==connectedGamepadIndex){const _0x41adcd=navigator[_0x32f2e9(0x2d1)]();if(_0x41adcd?.[connectedGamepadIndexP2]){const _0x599261=_0x41adcd[connectedGamepadIndexP2],_0x2f35f9=processSingleController(_0x599261,previousGameButtonStatesP2);_0xc4d93a=_0x2f35f9[_0x32f2e9(0x250)],_0x21b511=_0x2f35f9['right'],_0x246c44=_0x2f35f9[_0x32f2e9(0x1da)],previousGameButtonStatesP2=_0x2f35f9['newButtonStates'][_0x32f2e9(0x19d)]();}else{if(previousGameButtonStatesP2['length']>0x0)previousGameButtonStatesP2=[];}}else{if(previousGameButtonStatesP2['length']>0x0)previousGameButtonStatesP2=[];}}const _0x413b64=p1FireInputWasDown;p1FireInputWasDown=keyboardP1ShootDown||_0x56c97c;let _0x38b906=![];if(!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x32f2e9(0x28b))){_0x38b906=p2FireInputWasDown;if(isTwoPlayerMode&&selectedGameMode===_0x32f2e9(0x1e9)&&currentPlayer===0x2&&!isPlayerTwoAI){if(connectedGamepadIndexP2!==null)p2FireInputWasDown=keyboardP2ShootDown||_0x246c44;else connectedGamepadIndex!==null?p2FireInputWasDown=keyboardP2ShootDown||_0x56c97c:p2FireInputWasDown=keyboardP2ShootDown;}else p2FireInputWasDown=keyboardP2ShootDown||_0x246c44;}else p2FireInputWasDown=![];if(selectedFiringMode===_0x32f2e9(0x236)){if(isTwoPlayerMode&&selectedGameMode==='coop'){if(!isTouchActiveGame){if(_0x413b64&&!p1FireInputWasDown)p1JustFiredSingle=![];if(!isPlayerTwoAI&&_0x38b906&&!p2FireInputWasDown)p2JustFiredSingle=![];}}else{if(isTwoPlayerMode&&selectedGameMode==='normal'){if(!isTouchActiveGame){if(currentPlayer===0x1&&_0x413b64&&!p1FireInputWasDown)p1JustFiredSingle=![];else{if(currentPlayer===0x2&&!isPlayerTwoAI){let _0x1ebee7=connectedGamepadIndexP2===null&&connectedGamepadIndex!==null,_0x4954f5=connectedGamepadIndexP2===null&&connectedGamepadIndex!==null;_0x1ebee7&&_0x4954f5?_0x413b64&&!p1FireInputWasDown&&(p1JustFiredSingle=![]):_0x38b906&&!p2FireInputWasDown&&(p2JustFiredSingle=![]);}}}}else{if(!isTouchActiveGame){if(_0x413b64&&!p1FireInputWasDown)p1JustFiredSingle=![];}}}}leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![];let _0x344d37=![];if(isTouchActiveGame&&gameCanvas){if(isTwoPlayerMode&&selectedGameMode===_0x32f2e9(0x273)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x56da24=ship1[_0x32f2e9(0x1b1)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0xa8185f=_0x28ff18-_0x56da24/0x2;_0xa8185f=Math[_0x32f2e9(0x27d)](0x0,Math[_0x32f2e9(0x204)](gameCanvas[_0x32f2e9(0x1b1)]-_0x56da24,_0xa8185f)),ship1['x']=_0xa8185f,ship1[_0x32f2e9(0x1ad)]=_0xa8185f,_0x344d37=!![];}}else{if(ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1)){const _0x2ccd81=ship[_0x32f2e9(0x1b1)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x11e61b=_0x28ff18-_0x2ccd81/0x2;_0x11e61b=Math[_0x32f2e9(0x27d)](0x0,Math['min'](gameCanvas[_0x32f2e9(0x1b1)]-_0x2ccd81,_0x11e61b)),ship['x']=_0x11e61b,ship['targetX']=_0x11e61b,_0x344d37=!![];}}}if(isTwoPlayerMode&&selectedGameMode===_0x32f2e9(0x273)){if(!_0x344d37){const _0x29afa9=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture;_0x29afa9&&(leftPressed=keyboardP1LeftDown||_0x37d387,rightPressed=keyboardP1RightDown||_0x256f47);}if(!isPlayerTwoAI){const _0x190fd0=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture;_0x190fd0&&(p2LeftPressed=keyboardP2LeftDown||_0xc4d93a,p2RightPressed=keyboardP2RightDown||_0x21b511);}}else{if(!_0x344d37){const _0xbae391=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;if(_0xbae391){if(currentPlayer===0x1||!isTwoPlayerMode)leftPressed=keyboardP1LeftDown||_0x37d387,rightPressed=keyboardP1RightDown||_0x256f47;else{if(currentPlayer===0x2&&!isPlayerTwoAI&&selectedGameMode==='normal'){if(connectedGamepadIndexP2!==null)leftPressed=keyboardP2LeftDown||_0xc4d93a,rightPressed=keyboardP2RightDown||_0x21b511;else connectedGamepadIndex!==null?(leftPressed=keyboardP2LeftDown||_0x37d387,rightPressed=keyboardP2RightDown||_0x256f47):(leftPressed=keyboardP2LeftDown,rightPressed=keyboardP2RightDown);}}}}}if(isTwoPlayerMode&&selectedGameMode===_0x32f2e9(0x273)){const _0x5453a9=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture&&!_0x391d7a;if(_0x5453a9){shootPressed=isTouchActiveGame&&selectedFiringMode===_0x32f2e9(0x1c5)&&(!isPlayerTwoAI||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x32f2e9(0x28b)&&_0x28ff18<=gameCanvas[_0x32f2e9(0x1b1)]/0x2)||p1FireInputWasDown;if(isShowingCaptureMessage&&isPlayer1ShipCaptured)shootPressed=![];}if(!isPlayerTwoAI){const _0xb0180d=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture&&!_0x391d7a;if(_0xb0180d){p2ShootPressed=isTouchActiveGame&&selectedFiringMode===_0x32f2e9(0x1c5)&&_0x28ff18>gameCanvas[_0x32f2e9(0x1b1)]/0x2||p2FireInputWasDown;if(isShowingCaptureMessage&&isPlayer2ShipCaptured)p2ShootPressed=![];}}}else{const _0x18e8ab=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!_0x391d7a;if(_0x18e8ab){let _0x3538e2=![];if(currentPlayer===0x1||!isTwoPlayerMode)_0x3538e2=p1FireInputWasDown;else currentPlayer===0x2&&!isPlayerTwoAI&&selectedGameMode===_0x32f2e9(0x1e9)&&(_0x3538e2=p2FireInputWasDown);shootPressed=isTouchActiveGame&&selectedFiringMode==='rapid'||_0x3538e2;if(isShowingCaptureMessage&&isShipCaptured)shootPressed=![];}}if(isManualControl){if(isTwoPlayerMode&&selectedGameMode==='coop')shootPressed&&firePlayerBullet('player1',![]),!isPlayerTwoAI&&p2ShootPressed&&firePlayerBullet(_0x32f2e9(0x2b1),![]);else{if(shootPressed){if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2){}else firePlayerBullet(currentPlayer===0x1||!isTwoPlayerMode?'player1':_0x32f2e9(0x2b1),![]);}}}}catch(_0x236049){console['error'](_0x32f2e9(0x2a3),_0x236049),leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![];}}function aiControl(){const _0x2b90bd=_0x20bf56;try{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2b90bd(0x28b))return;let _0x4e976c=null,_0x214d53=null,_0x212973=![],_0x16b349=![],_0x2e510e=![],_0x14d3ae=0x0,_0x59f35a='ai',_0x33c559=![],_0x36978e=![];if(isPlayerTwoAI&&selectedGameMode===_0x2b90bd(0x1e9)&&currentPlayer===0x2){if(!ship||playerLives<=0x0||isShipCaptured||isShowingPlayerGameOverMessage){if(ship)ship[_0x2b90bd(0x1ad)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x2b90bd(0x1b1)]/0x2:0x0;return;}_0x4e976c=ship,_0x214d53=smoothedShipX,_0x212973=isDualShipActive,_0x16b349=isShipCaptured,_0x2e510e=isInvincible,_0x14d3ae=playerLives,_0x59f35a=_0x2b90bd(0x23c),_0x33c559=!![],_0x36978e=playerLives>0x1&&!isDualShipActive;}else{if(!isManualControl&&!isPlayerTwoAI){if(playerLives<=0x0||!ship||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isShipCaptured||isShowingCaptureMessage){if(ship)ship[_0x2b90bd(0x1ad)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x2b90bd(0x1b1)]/0x2:0x0;return;}_0x4e976c=ship,_0x214d53=smoothedShipX,_0x212973=isDualShipActive,_0x16b349=isShipCaptured,_0x2e510e=isInvincible,_0x14d3ae=playerLives,_0x36978e=playerLives>0x1&&!isDualShipActive;}else return;}if(_0x214d53===undefined&&_0x4e976c)_0x214d53=_0x4e976c['x'],(_0x33c559||!isManualControl&&!isPlayerTwoAI)&&(smoothedShipX=_0x214d53);else{if(_0x214d53===undefined&&!_0x4e976c){_0x214d53=gameCanvas?gameCanvas[_0x2b90bd(0x1b1)]/0x2:0x0;(_0x33c559||!isManualControl&&!isPlayerTwoAI)&&(smoothedShipX=_0x214d53);return;}}const _0x17f9a6=Date[_0x2b90bd(0x2c7)](),_0xe34948=gameCanvas[_0x2b90bd(0x1b1)],_0x262dcf=gameCanvas[_0x2b90bd(0x276)];let _0x224f5a=_0x4e976c['width'];_0x212973&&(_0x224f5a=DUAL_SHIP_OFFSET_X+_0x4e976c[_0x2b90bd(0x1b1)]);const _0x4d97e9=_0x4e976c['x']+_0x224f5a/0x2,_0x4a00a9=_0x4e976c['y'],_0x1750b2=_0xe34948/0x2,_0x3bc9db=_0x1750b2-_0x224f5a/0x2,_0x3d896c=showReadyMessage||showCSClearMessage||showCsHitsMessage||showPerfectMessage||showCsBonusScoreMessage||showExtraLifeMessage||isCsCompletionDelayActive||isShowingCaptureMessage||isShowingIntro;let _0x364ee8=_0x214d53,_0x49c803=![],_0x20abab=![],_0xa23bb6=_0x214d53,_0x38e745=null,_0x307c88=![];const _0x420043=_0x212973;aiNeedsStabilization&&!_0x3d896c&&(aiStabilizationEndTime=_0x17f9a6+AI_STABILIZATION_DURATION,aiNeedsStabilization=![],_0x214d53=_0x4e976c['x'],(_0x33c559||!isManualControl&&!isPlayerTwoAI)&&(smoothedShipX=_0x214d53));if(_0x17f9a6<aiStabilizationEndTime&&!_0x3d896c)_0x364ee8=_0x3bc9db;else{if(!_0x3d896c){_0x20abab=![],_0xa23bb6=_0x214d53;if(!_0x2e510e){let _0x588d84=[];const _0x59e70c=isChallengingStage?FINAL_DODGE_LOOKAHEAD*0.9:isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_LOOKAHEAD*1.1:FINAL_DODGE_LOOKAHEAD*1.2,_0x39366a=isChallengingStage?FINAL_DODGE_BUFFER_BASE*0.9:isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_BUFFER*1.1:FINAL_DODGE_BUFFER_BASE*1.2,_0x436bb3={'x':_0x4e976c['x']-_0x39366a,'y':_0x4e976c['y']-_0x59e70c,'width':_0x224f5a+_0x39366a*0x2,'height':_0x59e70c+_0x4e976c[_0x2b90bd(0x276)]};for(const _0x121cd9 of enemyBullets){if(_0x121cd9&&_0x121cd9['y']+_0x121cd9[_0x2b90bd(0x276)]>_0x4e976c['y']-_0x4e976c[_0x2b90bd(0x276)]*0x2&&_0x121cd9['y']<_0x262dcf){const _0x3e9f31={'x':_0x121cd9['x'],'y':_0x121cd9['y'],'width':_0x121cd9[_0x2b90bd(0x1b1)],'height':_0x121cd9[_0x2b90bd(0x276)]};checkCollision(_0x436bb3,_0x3e9f31)&&_0x588d84['push'](_0x121cd9);}}if(_0x588d84['length']>0x0){_0x20abab=!![];let _0x1c990b=_0x214d53,_0x498533=-Infinity;for(let _0x5b32d1=-0x1;_0x5b32d1<=0x1;_0x5b32d1+=0x2){const _0xb77e5=_0x224f5a*(0x2+Math['random']()*0.5)+(_0x588d84['length']>0x1?_0x224f5a*0.5:0x0);let _0x5ecdf1=_0x214d53+_0x5b32d1*_0xb77e5;_0x5ecdf1=Math[_0x2b90bd(0x27d)](AI_ANTI_CORNER_BUFFER,Math['min'](_0xe34948-_0x224f5a-AI_ANTI_CORNER_BUFFER,_0x5ecdf1));let _0x1b1aba=0x0;const _0x232a9b={'x':_0x5ecdf1-_0x39366a/0x2,'y':_0x4e976c['y']-_0x59e70c,'width':_0x224f5a+_0x39366a,'height':_0x59e70c+_0x4e976c['height']};for(const _0x408eeb of _0x588d84){checkCollision(_0x232a9b,{'x':_0x408eeb['x'],'y':_0x408eeb['y'],'width':_0x408eeb[_0x2b90bd(0x1b1)],'height':_0x408eeb[_0x2b90bd(0x276)]})&&_0x1b1aba++;}let _0x52cc79=-_0x1b1aba;if(Math[_0x2b90bd(0x1d4)](_0x5ecdf1-_0x214d53)<_0x224f5a*0.5)_0x52cc79-=0xa;_0x52cc79>_0x498533&&(_0x498533=_0x52cc79,_0x1c990b=_0x5ecdf1);}_0xa23bb6=_0x1c990b;}if(!_0x20abab){const _0x5af441=AI_COLLISION_LOOKAHEAD*1.5,_0x234cfa=FINAL_DODGE_BUFFER_BASE*1.5;for(const _0x32e2bf of enemies){if(_0x32e2bf&&(_0x32e2bf['state']===_0x2b90bd(0x287)||_0x32e2bf[_0x2b90bd(0x1ae)]===_0x2b90bd(0x1fb)||_0x32e2bf['state']==='following_entrance_path'||_0x32e2bf[_0x2b90bd(0x1ae)]==='following_bezier_path')&&_0x32e2bf['y']+_0x32e2bf['height']>_0x4e976c['y']-_0x5af441/0x2&&_0x32e2bf['y']<_0x4e976c['y']+_0x4e976c[_0x2b90bd(0x276)]){const _0x175429={'x':_0x4e976c['x']-_0x234cfa,'y':_0x4e976c['y']-_0x5af441,'width':_0x224f5a+_0x234cfa*0x2,'height':_0x5af441+_0x4e976c[_0x2b90bd(0x276)]},_0x575a3a={'x':_0x32e2bf['x'],'y':_0x32e2bf['y'],'width':_0x32e2bf[_0x2b90bd(0x1b1)],'height':_0x32e2bf[_0x2b90bd(0x276)]};if(checkCollision(_0x175429,_0x575a3a)){_0x20abab=!![];const _0x2afb2b=_0x32e2bf['x']+_0x32e2bf[_0x2b90bd(0x1b1)]/0x2,_0x525cc1=_0x4d97e9<_0x2afb2b?-0x1:0x1,_0xf6f659=_0x224f5a*(2.2+Math[_0x2b90bd(0x1bf)]()*0.6);_0xa23bb6=_0x214d53+_0x525cc1*_0xf6f659;break;}}}}}if(_0x20abab)_0x364ee8=Math[_0x2b90bd(0x27d)](AI_ANTI_CORNER_BUFFER,Math[_0x2b90bd(0x204)](_0xe34948-_0x224f5a-AI_ANTI_CORNER_BUFFER,_0xa23bb6)),_0x38e745=null,_0x49c803=![];else{if(fallingShips[_0x2b90bd(0x2c5)]>0x0&&!_0x16b349&&!isWaitingForRespawn&&!_0x212973){let _0x4293ae=null,_0x48ee32=Infinity;for(const _0x12ee2d of fallingShips){if(_0x12ee2d&&!_0x12ee2d['landed']){const _0xf4557b=Math[_0x2b90bd(0x1d4)](_0x12ee2d['x']+_0x12ee2d[_0x2b90bd(0x1b1)]/0x2-_0x4d97e9)+Math['abs'](_0x12ee2d['y']-_0x4e976c['y']);_0xf4557b<_0x48ee32&&(_0x48ee32=_0xf4557b,_0x4293ae=_0x12ee2d);}}_0x4293ae&&(_0x364ee8=_0x4293ae['x']+_0x4293ae[_0x2b90bd(0x1b1)]/0x2-_0x224f5a/0x2,_0x49c803=![],_0x38e745=null);}else{_0x307c88=![];if(_0x36978e&&captureBeamActive&&capturingBossId&&!_0x16b349&&!isWaitingForRespawn){const _0x2945c5=enemies[_0x2b90bd(0x23e)](_0x573ae0=>_0x573ae0['id']===capturingBossId&&_0x573ae0[_0x2b90bd(0x239)]===ENEMY3_TYPE&&_0x573ae0['state']===_0x2b90bd(0x290));if(_0x2945c5){const _0x32566d=_0x2945c5['x']+(_0x2945c5['type']===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH)/0x2,_0x5908a7=Math[_0x2b90bd(0x1d4)](_0x4d97e9-_0x32566d);_0x5908a7<_0x224f5a*0.8&&_0x17f9a6-(_0x2945c5[_0x2b90bd(0x1a7)]||0x0)>=AI_CAPTURE_BEAM_APPROACH_DELAY_MS&&(_0x364ee8=_0x32566d-_0x224f5a/0x2,_0x49c803=![],_0x38e745=null,_0x307c88=!![]);}}if(!_0x307c88){_0x38e745=null;let _0x239926=-Infinity;for(const _0x3f9f8f of enemies){if(!_0x3f9f8f)continue;let _0x2828b=0x0;const _0x372033=_0x3f9f8f['x']+_0x3f9f8f[_0x2b90bd(0x1b1)]/0x2,_0x56f910=_0x372033-_0x4d97e9,_0xfa339=_0x4a00a9-(_0x3f9f8f['y']+_0x3f9f8f[_0x2b90bd(0x276)]);if(_0xfa339<0x0&&_0x3f9f8f[_0x2b90bd(0x1ae)]!==_0x2b90bd(0x287)&&_0x3f9f8f[_0x2b90bd(0x1ae)]!==_0x2b90bd(0x1fb)&&_0x3f9f8f[_0x2b90bd(0x1ae)]!==_0x2b90bd(0x242))continue;_0x2828b=(_0x262dcf-_0x3f9f8f['y'])*0x2-Math[_0x2b90bd(0x1d4)](_0x56f910)*0x3-_0xfa339;if(_0x3f9f8f[_0x2b90bd(0x1ae)]===_0x2b90bd(0x287)||_0x3f9f8f['state']===_0x2b90bd(0x1fb))_0x2828b+=0xbb8;if(_0x3f9f8f[_0x2b90bd(0x239)]===ENEMY3_TYPE&&!_0x3f9f8f[_0x2b90bd(0x1c3)])_0x2828b+=0x7d0;if(_0x3f9f8f[_0x2b90bd(0x239)]===ENEMY3_TYPE&&_0x3f9f8f['isDamaged'])_0x2828b+=0xfa0;if(_0x3f9f8f[_0x2b90bd(0x239)]===ENEMY3_TYPE&&_0x3f9f8f[_0x2b90bd(0x20a)])_0x2828b+=0x1388;_0x2828b>_0x239926&&(_0x239926=_0x2828b,_0x38e745=_0x3f9f8f);}if(_0x38e745){const _0x21748d=_0x38e745['x']+_0x38e745['width']/0x2;_0x364ee8=_0x21748d-_0x224f5a/0x2;const _0x2fc188=1.8;let _0x1d1b1f;if(isChallengingStage)_0x1d1b1f=_0x224f5a*2.5;else _0x38e745[_0x2b90bd(0x1ae)]===_0x2b90bd(0x1bb)||_0x38e745[_0x2b90bd(0x1ae)]===_0x2b90bd(0x21d)?_0x1d1b1f=_0x224f5a*(GRID_SHOOT_ALIGNMENT_FACTOR*_0x2fc188):_0x1d1b1f=_0x224f5a*(FINAL_SHOOT_ALIGNMENT_THRESHOLD*_0x2fc188);const _0x40a84e=Math[_0x2b90bd(0x1d4)](_0x4d97e9-_0x21748d);if(_0x40a84e<_0x1d1b1f){let _0x19a293=![];_0x36978e&&_0x38e745[_0x2b90bd(0x239)]===ENEMY3_TYPE&&!_0x38e745[_0x2b90bd(0x20a)]&&!captureAttemptMadeThisLevel&&!isFullGridWave&&(_0x38e745[_0x2b90bd(0x1ae)]==='in_grid'||_0x38e745['state']===_0x2b90bd(0x21d)||_0x38e745[_0x2b90bd(0x1ae)]==='diving_to_capture_position')&&(_0x19a293=!![]),!_0x19a293&&(_0x49c803=!![]);}}else _0x364ee8=_0x3bc9db,_0x49c803=![];}}}}}if(_0x4e976c){_0x214d53+=(_0x364ee8-_0x214d53)*AI_SMOOTHING_FACTOR_MOVE,_0x4e976c['targetX']=_0x214d53;if(_0x33c559)smoothedShipX=_0x214d53;else!isManualControl&&!isPlayerTwoAI&&(smoothedShipX=_0x214d53);}if(_0x49c803&&!_0x20abab&&!_0x307c88&&!_0x3d896c){let _0x807378=![];_0x33c559?_0x807378=!![]:_0x17f9a6>=aiCanShootTime&&(_0x807378=!![]),_0x807378&&!isShowingIntro&&(firePlayerBullet(_0x59f35a,![])&&(!_0x33c559&&(aiCanShootTime=_0x17f9a6+SHOOT_COOLDOWN)));}}catch(_0x12c9e0){console[_0x2b90bd(0x1a4)]('Error\x20in\x20aiControl:',_0x12c9e0,_0x12c9e0[_0x2b90bd(0x226)]),ship&&(ship['targetX']=ship['x']),aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas['width']/0x2:0x0;}}function aiControlCoop(){const _0x169882=_0x20bf56;if(!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x169882(0x28b))||isPaused||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0){if(ship1)ship1['targetX']=ship1['x'];if(ship2)ship2[_0x169882(0x1ad)]=ship2['x'];return;}const _0x10c1f8=Date[_0x169882(0x2c7)](),_0x438e45=gameCanvas['width'],_0x573558=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x169882(0x28b),_0x30e26b=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture,_0x4fd6c5=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture,_0x573b18=_0x140d6a=>{const _0x5cc229=_0x169882,_0x2b06e9=_0x140d6a==='p1'&&isPlayer1ShowingGameOverMessage||_0x140d6a==='p2'&&isPlayer2ShowingGameOverMessage;return _0x2b06e9||showReadyMessage||isCsCompletionDelayActive||isShowingIntro&&!(level===0x1&&coopPlayersReadyStartTime>0x0&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5cc229(0x28b)));};let _0x465166=!![],_0x2d243a=!![];if(coopAICaptureDiveAnticipationActive&&_0x10c1f8<coopAICaptureDiveAnticipationEndTime){if(!_0x573558)_0x465166=![];_0x2d243a=![];}else coopAICaptureDiveAnticipationActive&&(coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0);if(_0x30e26b&&ship1&&!_0x573558){if(smoothedShip1X===undefined)smoothedShip1X=ship1['x'];const _0x3703c0=_0x573b18('p1');let {desiredTargetX:_0x5b8da2,shouldTryShoot:_0x3681e7,targetEnemyForAI:_0x4dcb83}=calculateAIDesiredState(ship1,smoothedShip1X,player1IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer1Invincible,isPlayer1ShipCaptured,isPlayer1WaitingForRespawn,_0x10c1f8,_0x438e45,_0x3703c0,'p1');aiShip1TargetEnemy=_0x4dcb83,smoothedShip1X+=(_0x5b8da2-smoothedShip1X)*AI_SMOOTHING_FACTOR_MOVE,ship1[_0x169882(0x1ad)]=smoothedShip1X;const _0x37241b=_0x4dcb83&&_0x4dcb83[_0x169882(0x239)]===ENEMY3_TYPE&&_0x4dcb83[_0x169882(0x20a)]&&_0x4dcb83['id']===capturedBossIdWithMessage&&isPlayer2ShipCaptured;if(_0x3681e7&&_0x465166&&!(isShowingCaptureMessage&&isPlayer1ShipCaptured)){if(_0x37241b||_0x10c1f8>=aiShip1CanShootTime){fireCoopAIBullet(ship1,player1IsDualShipActive,_0x169882(0x1d9));if(!_0x37241b)aiShip1CanShootTime=_0x10c1f8+SHOOT_COOLDOWN;else aiShip1CanShootTime=_0x10c1f8+SHOOT_COOLDOWN/0x2;}}}if(_0x4fd6c5&&ship2){if(smoothedShip2X===undefined)smoothedShip2X=ship2['x'];const _0x1c0430=_0x573b18('p2');let {desiredTargetX:_0x24b5e1,shouldTryShoot:_0x159fbb,targetEnemyForAI:_0x1e7620}=calculateAIDesiredState(ship2,smoothedShip2X,player2IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer2Invincible,isPlayer2ShipCaptured,isPlayer2WaitingForRespawn,_0x10c1f8,_0x438e45,_0x1c0430,'p2');aiShip2TargetEnemy=_0x1e7620,smoothedShip2X+=(_0x24b5e1-smoothedShip2X)*AI_SMOOTHING_FACTOR_MOVE,ship2['targetX']=smoothedShip2X;const _0x2f81a6=_0x1e7620&&_0x1e7620['type']===ENEMY3_TYPE&&_0x1e7620[_0x169882(0x20a)]&&_0x1e7620['id']===capturedBossIdWithMessage&&isPlayer1ShipCaptured;if(_0x159fbb&&_0x2d243a&&!(isShowingCaptureMessage&&isPlayer2ShipCaptured)){if(_0x2f81a6||_0x10c1f8>=aiShip2CanShootTime){fireCoopAIBullet(ship2,player2IsDualShipActive,isCoopAIDemoActive?_0x169882(0x2b1):_0x169882(0x23c));if(!_0x2f81a6)aiShip2CanShootTime=_0x10c1f8+SHOOT_COOLDOWN;else aiShip2CanShootTime=_0x10c1f8+SHOOT_COOLDOWN/0x2;}}}}function fireCoopAIBullet(_0x21c576,_0x473fd4,_0x54af2c){const _0x248de9=_0x20bf56;if(!_0x21c576)return![];const _0x51ead4=Date['now']();let _0x9c10e8=![];if(_0x54af2c===_0x248de9(0x1d9)&&isPlayer1ShowingGameOverMessage)_0x9c10e8=!![];if((_0x54af2c===_0x248de9(0x2b1)||_0x54af2c===_0x248de9(0x23c))&&isPlayer2ShowingGameOverMessage)_0x9c10e8=!![];let _0x4c302d=isPaused||!isInGameState||gameOverSequenceStartTime>0x0||_0x9c10e8;if(_0x4c302d)return![];if(_0x54af2c===_0x248de9(0x1d9)&&isPlayer1ShipCaptured)return![];if((_0x54af2c===_0x248de9(0x2b1)||_0x54af2c===_0x248de9(0x23c))&&isPlayer2ShipCaptured)return![];try{const _0x204a80=_0x21c576['y'];let _0xdd005a=0x0;const _0xadaa72=_0x54af2c;if(_0x473fd4){const _0x514e50=_0x21c576['x']+_0x21c576[_0x248de9(0x1b1)]/0x2,_0x3d3024=_0x21c576['x']+DUAL_SHIP_OFFSET_X+_0x21c576[_0x248de9(0x1b1)]/0x2,_0x37b069=_0x514e50-PLAYER_BULLET_WIDTH/0x2,_0x5d98e8=_0x3d3024-PLAYER_BULLET_WIDTH/0x2;bullets[_0x248de9(0x2cf)]({'x':_0x37b069,'y':_0x204a80,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0xadaa72}),bullets[_0x248de9(0x2cf)]({'x':_0x5d98e8,'y':_0x204a80,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0xadaa72}),_0xdd005a=0x2;}else{const _0x1dff08=_0x21c576['x']+_0x21c576['width']/0x2-PLAYER_BULLET_WIDTH/0x2;bullets[_0x248de9(0x2cf)]({'x':_0x1dff08,'y':_0x204a80,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0xadaa72}),_0xdd005a=0x1;}playSound('playerShootSound',![],0.4);if(_0x54af2c===_0x248de9(0x1d9))player1ShotsFired+=_0xdd005a,player1LastShotTime=_0x51ead4,aiShip1LastShotTime=_0x51ead4;else(_0x54af2c===_0x248de9(0x2b1)||_0x54af2c==='ai_p2')&&(player2ShotsFired+=_0xdd005a,player2LastShotTime=_0x51ead4,aiShip2LastShotTime=_0x51ead4);return!![];}catch(_0x74baa6){return console[_0x248de9(0x1a4)](_0x248de9(0x211)+_0x54af2c+':',_0x74baa6),![];}}function calculateAIDesiredState(_0x5d7113,_0x23a2b2,_0x10d404,_0x4f0baf,_0x3eb50c,_0x3af579,_0x879929,_0x591300,_0x333f9b,_0x2de421,_0x33c839,_0x56dd26,_0x3bb46f){const _0xf5d0d=_0x20bf56;let _0x2c09fd=_0x23a2b2,_0x337e09=![],_0x2dfec8=null,_0x134b5f=![],_0x9a1945=![],_0x202e18=![],_0x528346=![];const _0x79df4f=gameCanvas[_0xf5d0d(0x276)],_0x2c335e=_0x5d7113['width']+(_0x10d404?DUAL_SHIP_OFFSET_X:0x0),_0x54ff19=_0x5d7113['x']+_0x2c335e/0x2,_0x3b9d82=_0x5d7113['y'],_0x4e471e=_0x3bb46f==='p1'?player1Lives:_0x3bb46f===_0xf5d0d(0x23c)||_0x3bb46f==='p2'?player2Lives:0x0,_0x11aeeb=_0x4e471e>0x1&&!_0x10d404;let _0x46cb6c=_0x33c839/0x2;const _0x3528bb=isShowingIntro||isShowingCoopPlayersReady,_0x91ccb0=isCoopAIDemoActive&&_0x3528bb&&!(isChallengingStage&&isEntrancePhaseActive),_0x1839db=isCoopAIDemoActive&&(_0x3bb46f==='p1'&&player1Lives>0x0&&player2Lives<=0x0||(_0x3bb46f==='p2'||_0x3bb46f===_0xf5d0d(0x23c))&&player2Lives>0x0&&player1Lives<=0x0);if(_0x91ccb0&&_0x1839db)_0x46cb6c=_0x33c839/0x2;else{if(_0x3bb46f==='p1')_0x46cb6c=_0x33c839*0.25+Math[_0xf5d0d(0x289)](_0x2de421/(AI_WIGGLE_PERIOD*1.1))*(AI_WIGGLE_AMPLITUDE*0.8);else(_0x3bb46f==='p2'||_0x3bb46f===_0xf5d0d(0x23c))&&(_0x46cb6c=_0x33c839*0.75+Math[_0xf5d0d(0x1a5)](_0x2de421/(AI_WIGGLE_PERIOD*0.9))*(AI_WIGGLE_AMPLITUDE*0.8));}let _0x5a79c4=_0x46cb6c-_0x2c335e/0x2;if(_0x56dd26||_0x591300||_0x333f9b||_0x3bb46f==='p1'&&player1NeedsRespawnAfterCapture||(_0x3bb46f==='p2'||_0x3bb46f===_0xf5d0d(0x23c))&&player2NeedsRespawnAfterCapture)return _0x91ccb0&&_0x1839db?_0x2c09fd=_0x5a79c4:_0x2c09fd=_0x5a79c4,(_0x591300||_0x333f9b||_0x3bb46f==='p1'&&player1NeedsRespawnAfterCapture||(_0x3bb46f==='p2'||_0x3bb46f==='ai_p2')&&player2NeedsRespawnAfterCapture)&&(_0x2c09fd=_0x5d7113['x']),{'desiredTargetX':_0x2c09fd,'shouldTryShoot':![],'targetEnemyForAI':null};const _0x3089a2=_0x3bb46f==='p1'?'p2':'p1',_0x3ccb53=_0x3089a2==='p1'&&isPlayer1ShipCaptured||_0x3089a2==='p2'&&isPlayer2ShipCaptured,_0x5b948=_0x3089a2==='p1'&&isPlayer1ShowingGameOverMessage||_0x3089a2==='p2'&&isPlayer2ShowingGameOverMessage;let _0x57b8b1=null,_0x161454=!![];if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xf5d0d(0x28b)){if(_0x3ccb53&&!_0x5b948&&capturedBossIdWithMessage){const _0x13c5ff=_0x3089a2==='p1'?coopPartner1CapturedTime:coopPartner2CapturedTime;_0x13c5ff>0x0&&_0x2de421-_0x13c5ff<COOP_AI_SAVE_PARTNER_DELAY_MS&&(_0x161454=![]),_0x57b8b1=_0x4f0baf[_0xf5d0d(0x23e)](_0x4144a6=>_0x4144a6['id']===capturedBossIdWithMessage&&_0x4144a6['type']===ENEMY3_TYPE&&_0x4144a6[_0xf5d0d(0x20a)]);}}if(_0x57b8b1&&!_0x10d404&&_0x161454){_0x202e18=!![],_0x2dfec8=_0x57b8b1;const _0x37a768=_0x57b8b1['x']+_0x57b8b1['width']/0x2;_0x2c09fd=_0x37a768-_0x2c335e/0x2,_0x337e09=!![],_0x134b5f=![];if(!_0x879929){let _0x5b0a4e=[];const _0x2dff8b=FINAL_DODGE_LOOKAHEAD*0.4,_0x5dc328=FINAL_DODGE_BUFFER_BASE*0.3,_0x57f396={'x':Math[_0xf5d0d(0x204)](_0x54ff19,_0x37a768)-_0x5dc328,'y':_0x5d7113['y']-_0x2dff8b,'width':Math[_0xf5d0d(0x1d4)](_0x54ff19-_0x37a768)+_0x2c335e+_0x5dc328*0x2,'height':_0x2dff8b+_0x5d7113['height']};for(const _0x315e45 of _0x3eb50c){if(_0x315e45&&_0x315e45['y']+_0x315e45['height']>_0x5d7113['y']-_0x5d7113['height']&&_0x315e45['y']<_0x79df4f){const _0x53f4ca={'x':_0x315e45['x'],'y':_0x315e45['y'],'width':_0x315e45['width'],'height':_0x315e45[_0xf5d0d(0x276)]};checkCollision(_0x57f396,_0x53f4ca)&&_0x5b0a4e[_0xf5d0d(0x2cf)](_0x315e45);}}if(_0x5b0a4e[_0xf5d0d(0x2c5)]>0x0){_0x134b5f=!![];const _0x55e100=_0x23a2b2<_0x33c839/0x2?-0x1:0x1;_0x2c09fd=_0x23a2b2+_0x55e100*(_0x2c335e*0.6),_0x337e09=![];}}return _0x2c09fd=Math['max'](AI_EDGE_BUFFER,Math['min'](_0x33c839-_0x2c335e-AI_EDGE_BUFFER,_0x2c09fd)),{'desiredTargetX':_0x2c09fd,'shouldTryShoot':_0x337e09,'targetEnemyForAI':_0x2dfec8};}if(!_0x879929){let _0x24c4b8=[];const _0x47ac78=FINAL_DODGE_LOOKAHEAD*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xf5d0d(0x28b)?1.6:0.8),_0x1a6d49=FINAL_DODGE_BUFFER_BASE*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xf5d0d(0x28b)?1.7:0.8),_0x99ce5a={'x':_0x5d7113['x']-_0x1a6d49,'y':_0x5d7113['y']-_0x47ac78,'width':_0x2c335e+_0x1a6d49*0x2,'height':_0x47ac78+_0x5d7113[_0xf5d0d(0x276)]};for(const _0x32713f of _0x3eb50c){if(_0x32713f&&_0x32713f['y']+_0x32713f['height']>_0x5d7113['y']-_0x5d7113[_0xf5d0d(0x276)]*1.5&&_0x32713f['y']<_0x79df4f){const _0x350a6f={'x':_0x32713f['x'],'y':_0x32713f['y'],'width':_0x32713f[_0xf5d0d(0x1b1)],'height':_0x32713f['height']};checkCollision(_0x99ce5a,_0x350a6f)&&_0x24c4b8[_0xf5d0d(0x2cf)](_0x32713f);}}if(_0x24c4b8[_0xf5d0d(0x2c5)]>0x0){_0x134b5f=!![];let _0x20928a=_0x23a2b2;const _0x4144bb=_0x2c335e*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xf5d0d(0x28b)?0x3:0x2);let _0xe6c774=0x0,_0x4199a1=0x0,_0x77a144=0x0;const _0xd35923=_0x5d7113['x']+_0x2c335e/0x2;for(const _0x4bde0f of _0x24c4b8){if(_0x4bde0f['x']<_0xd35923-_0x2c335e*0.5)_0x4199a1++;else{if(_0x4bde0f['x']>_0xd35923+_0x2c335e*0.5)_0x77a144++;else _0xe6c774++;}}if(_0x4199a1<=_0x77a144&&_0x4199a1<=_0xe6c774)_0x20928a=_0x23a2b2-_0x4144bb-Math['random']()*_0x2c335e*0.4;else{if(_0x77a144<=_0x4199a1&&_0x77a144<=_0xe6c774)_0x20928a=_0x23a2b2+_0x4144bb+Math[_0xf5d0d(0x1bf)]()*_0x2c335e*0.4;else{if(_0x23a2b2<_0x46cb6c)_0x20928a=_0x46cb6c+_0x4144bb+Math[_0xf5d0d(0x1bf)]()*_0x2c335e*0.7;else _0x20928a=_0x46cb6c-_0x4144bb-Math[_0xf5d0d(0x1bf)]()*_0x2c335e*0.7;}}_0x2c09fd=_0x20928a;}if(!_0x134b5f){const _0x5f959c=AI_COLLISION_LOOKAHEAD*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xf5d0d(0x28b)?0x1:0.75),_0x2d122f=AI_COLLISION_BUFFER*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xf5d0d(0x28b)?0x1:0.8);for(const _0x1f8dee of _0x4f0baf){if(!_0x1f8dee)continue;if(!_0x161454&&_0x57b8b1&&_0x1f8dee['id']===_0x57b8b1['id'])continue;if((_0x1f8dee[_0xf5d0d(0x1ae)]==='attacking'||_0x1f8dee[_0xf5d0d(0x1ae)]===_0xf5d0d(0x1fb))&&_0x1f8dee['y']+_0x1f8dee[_0xf5d0d(0x276)]>_0x3b9d82-_0x5f959c&&_0x1f8dee['y']<_0x3b9d82+_0x5d7113['height']*1.5){const _0x54f741={'x':_0x5d7113['x']-_0x2d122f,'y':_0x5d7113['y']-_0x5f959c,'width':_0x2c335e+_0x2d122f*0x2,'height':_0x5f959c+_0x5d7113['height']},_0x579302={'x':_0x1f8dee['x'],'y':_0x1f8dee['y'],'width':_0x1f8dee[_0xf5d0d(0x1b1)],'height':_0x1f8dee[_0xf5d0d(0x276)]};if(checkCollision(_0x54f741,_0x579302)){_0x134b5f=!![],_0x2dfec8=null,_0x337e09=![];const _0x4183b4=_0x1f8dee['x']+_0x1f8dee[_0xf5d0d(0x1b1)]/0x2;_0x2c09fd=_0x23a2b2+(_0x54ff19<_0x4183b4?-0x1:0x1)*(_0x2c335e*(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xf5d0d(0x28b)?2.2:1.9));break;}}}}}if(!_0x134b5f&&_0x11aeeb&&captureBeamActive&&capturingBossId&&!_0x591300){if(aiPlayerActivelySeekingCaptureById===null||aiPlayerActivelySeekingCaptureById===_0x3bb46f){const _0x438294=_0x4f0baf[_0xf5d0d(0x23e)](_0x14c891=>_0x14c891['id']===capturingBossId);if(_0x438294&&_0x438294['state']===_0xf5d0d(0x290)){aiPlayerActivelySeekingCaptureById===null&&(aiPlayerActivelySeekingCaptureById=_0x3bb46f);if(aiPlayerActivelySeekingCaptureById===_0x3bb46f){if(_0x2de421-(_0x438294[_0xf5d0d(0x1a7)]||0x0)>=AI_CAPTURE_BEAM_APPROACH_DELAY_MS){_0x528346=!![];const _0x4e608e=_0x438294['x']+(_0x438294[_0xf5d0d(0x239)]===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH)/0x2;_0x2c09fd=_0x4e608e-_0x2c335e/0x2,_0x337e09=![],_0x2dfec8=null;}else _0x2c09fd=_0x5a79c4,_0x337e09=![],_0x2dfec8=null;}}else aiPlayerActivelySeekingCaptureById===_0x3bb46f&&(aiPlayerActivelySeekingCaptureById=null);}}else aiPlayerActivelySeekingCaptureById===_0x3bb46f&&!(_0x11aeeb&&captureBeamActive&&capturingBossId&&!_0x591300)&&(aiPlayerActivelySeekingCaptureById=null);if(!_0x134b5f&&!_0x528346&&!_0x10d404){const _0x29300f=_0x3af579[_0xf5d0d(0x23e)](_0x33949f=>_0x33949f['targetPlayerId']===_0x3bb46f&&!_0x33949f[_0xf5d0d(0x27b)]);_0x29300f&&(_0x9a1945=!![],_0x2c09fd=_0x29300f['x']+_0x29300f[_0xf5d0d(0x1b1)]/0x2-_0x2c335e/0x2,_0x337e09=![],_0x2dfec8=null);}if(!_0x134b5f&&!_0x528346&&!_0x9a1945&&!_0x202e18){let _0x331814=-Infinity,_0x18253b=![],_0x1c3d42=null;for(const _0x4de5f6 of _0x4f0baf){if(!_0x4de5f6)continue;if(!_0x161454&&_0x57b8b1&&_0x4de5f6['id']===_0x57b8b1['id'])continue;let _0x56b240=![];if(_0x4de5f6[_0xf5d0d(0x239)]===ENEMY3_TYPE&&_0x4de5f6[_0xf5d0d(0x20a)]&&_0x4e471e<=0x1){const _0x2f03c6=(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xf5d0d(0x28b))&&_0x4de5f6['id']===capturedBossIdWithMessage&&_0x3ccb53;!_0x2f03c6&&(_0x56b240=!![]);}let _0x5d1ff=0x0;const _0x1ddf28=_0x4de5f6['x']+_0x4de5f6[_0xf5d0d(0x1b1)]/0x2,_0x5f3d70=_0x1ddf28-_0x54ff19,_0x3061d0=_0x3b9d82-(_0x4de5f6['y']+_0x4de5f6[_0xf5d0d(0x276)]);if(_0x3061d0<0x0&&_0x4de5f6[_0xf5d0d(0x1ae)]!=='attacking'&&_0x4de5f6[_0xf5d0d(0x1ae)]!==_0xf5d0d(0x1fb)&&_0x4de5f6[_0xf5d0d(0x1ae)]!=='following_bezier_path')continue;let _0x55448e=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xf5d0d(0x28b)){if(_0x3bb46f==='p1'&&_0x1ddf28<_0x33c839/0x2)_0x55448e=0x1388;else{if((_0x3bb46f==='p2'||_0x3bb46f==='ai_p2')&&_0x1ddf28>=_0x33c839/0x2)_0x55448e=0x1388;}}_0x5d1ff=_0x55448e+(_0x79df4f-_0x4de5f6['y'])*0x2-Math['abs'](_0x5f3d70)*0x3-_0x3061d0;if(_0x4de5f6['state']===_0xf5d0d(0x287)||_0x4de5f6[_0xf5d0d(0x1ae)]==='diving_to_capture_position')_0x5d1ff+=0xbb8;if(_0x4de5f6[_0xf5d0d(0x239)]===ENEMY3_TYPE&&!_0x4de5f6[_0xf5d0d(0x1c3)])_0x5d1ff+=0x7d0;if(_0x4de5f6[_0xf5d0d(0x239)]===ENEMY3_TYPE&&_0x4de5f6[_0xf5d0d(0x1c3)])_0x5d1ff+=0xfa0;_0x4de5f6[_0xf5d0d(0x239)]===ENEMY3_TYPE&&_0x4de5f6[_0xf5d0d(0x20a)]&&(!_0x56b240?_0x5d1ff+=0x1388:_0x5d1ff-=0x2710);if(_0x5d1ff>_0x331814){_0x331814=_0x5d1ff,_0x1c3d42=_0x4de5f6;let _0x56d5d0=![];if(_0x1c3d42['type']===ENEMY3_TYPE&&!_0x1c3d42[_0xf5d0d(0x20a)]&&!isFullGridWave){_0x11aeeb&&!captureAttemptMadeThisLevel&&(_0x1c3d42[_0xf5d0d(0x1ae)]===_0xf5d0d(0x1bb)||_0x1c3d42[_0xf5d0d(0x1ae)]===_0xf5d0d(0x21d)||_0x1c3d42[_0xf5d0d(0x1ae)]===_0xf5d0d(0x1fb))&&(_0x56d5d0=!![]);if(_0x10d404){const _0x5ef1ac=_0x3bb46f==='p1'?'p2':'p1';let _0x172853=![];_0x5ef1ac==='p1'?ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture&&!player1IsDualShipActive&&(_0x172853=!![]):ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture&&!player2IsDualShipActive&&(_0x172853=!![]),_0x172853&&(_0x56d5d0=!![]);}}if(_0x56b240&&_0x1c3d42===_0x4de5f6)Math[_0xf5d0d(0x1d4)](_0x54ff19-(_0x1c3d42['x']+_0x1c3d42[_0xf5d0d(0x1b1)]/0x2))<_0x2c335e*1.1?_0x18253b=!![]:_0x18253b=![];else{if(_0x56d5d0)_0x18253b=![];else Math[_0xf5d0d(0x1d4)](_0x54ff19-(_0x1c3d42['x']+_0x1c3d42[_0xf5d0d(0x1b1)]/0x2))<_0x2c335e*0.9?_0x18253b=!![]:_0x18253b=![];}}}_0x2dfec8=_0x1c3d42,_0x337e09=_0x18253b;if(_0x2dfec8){let _0x209b1d=![];if(_0x2dfec8[_0xf5d0d(0x239)]===ENEMY3_TYPE&&_0x2dfec8['hasCapturedShip']&&_0x4e471e<=0x1){const _0x57e00a=(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xf5d0d(0x28b))&&_0x2dfec8['id']===capturedBossIdWithMessage&&_0x3ccb53;!_0x57e00a&&(_0x209b1d=!![]);}if(_0x209b1d)_0x2c09fd=_0x5a79c4;else{const _0x19c22a=_0x2dfec8['x']+_0x2dfec8[_0xf5d0d(0x1b1)]/0x2;_0x2c09fd=_0x19c22a-_0x2c335e/0x2;}}else _0x2c09fd=_0x5a79c4,_0x337e09=![];}return _0x2c09fd=Math[_0xf5d0d(0x27d)](AI_EDGE_BUFFER,Math[_0xf5d0d(0x204)](_0x33c839-_0x2c335e-AI_EDGE_BUFFER,_0x2c09fd)),{'desiredTargetX':_0x2c09fd,'shouldTryShoot':_0x337e09,'targetEnemyForAI':_0x2dfec8};}function findAndDetachEnemy(){const _0x1de219=_0x20bf56;try{let _0x232e7e=![];isTwoPlayerMode&&selectedGameMode===_0x1de219(0x273)?_0x232e7e=isPlayer1ShipCaptured||isPlayer2ShipCaptured:_0x232e7e=isShipCaptured;if(!isFullGridWave&&_0x232e7e){const _0x13e425=enemies['find'](_0x547b09=>_0x547b09&&_0x547b09[_0x1de219(0x239)]===ENEMY3_TYPE&&_0x547b09[_0x1de219(0x20a)]&&_0x547b09['state']===_0x1de219(0x1bb));if(_0x13e425){_0x13e425[_0x1de219(0x1cb)]=!![],_0x13e425[_0x1de219(0x1a3)]=_0x1de219(0x1e9);const _0x2bfb03=new Set([_0x13e425['id']]);return resetJustReturnedFlags(_0x2bfb03),[_0x13e425];}}if(isEntrancePhaseActive)return null;let _0x5517ad=enemies[_0x1de219(0x2a2)](_0x23d585=>_0x23d585&&_0x23d585[_0x1de219(0x1ae)]===_0x1de219(0x1bb)&&!_0x23d585[_0x1de219(0x1cb)]);if(_0x5517ad[_0x1de219(0x2c5)]===0x0){_0x5517ad=enemies[_0x1de219(0x2a2)](_0x3ae50f=>_0x3ae50f&&_0x3ae50f[_0x1de219(0x1ae)]==='in_grid');if(_0x5517ad[_0x1de219(0x2c5)]===0x0)return null;}if(_0x5517ad['length']===0x0)return null;_0x5517ad[_0x1de219(0x1cc)]((_0x28bed5,_0x4854f6)=>(_0x4854f6['gridRow']||0x0)-(_0x28bed5[_0x1de219(0x246)]||0x0));const _0x264d02=_0x5517ad[_0x1de219(0x2c5)]<=0x3;let _0x45ed6f=[];const _0x2823c7=_0x1de219(0x1e9);gridJustCompleted&&(gridJustCompleted=![]);let _0x341129=![];if(level>0x1&&!_0x264d02&&_0x5517ad[_0x1de219(0x2c5)]>=0x3){const _0x525e11=_0x5517ad[_0x1de219(0x2a2)](_0x37515f=>_0x37515f[_0x1de219(0x239)]===ENEMY3_TYPE&&!_0x37515f[_0x1de219(0x20a)]);for(const _0x238107 of _0x525e11){const _0x33f546=_0x5517ad[_0x1de219(0x23e)](_0x16bb71=>_0x16bb71[_0x1de219(0x239)]===ENEMY2_TYPE&&_0x16bb71[_0x1de219(0x246)]===_0x238107['gridRow']&&_0x16bb71['gridCol']===_0x238107[_0x1de219(0x26d)]-0x1),_0x218788=_0x5517ad[_0x1de219(0x23e)](_0x2fafe1=>_0x2fafe1[_0x1de219(0x239)]===ENEMY2_TYPE&&_0x2fafe1[_0x1de219(0x246)]===_0x238107['gridRow']&&_0x2fafe1['gridCol']===_0x238107[_0x1de219(0x26d)]+0x1);if(_0x33f546&&_0x218788){_0x45ed6f=[_0x238107,_0x33f546,_0x218788],_0x341129=!![];break;}}}if(!_0x341129&&!_0x264d02){const _0x1fb60e=_0x5517ad['filter'](_0x3b252b=>_0x3b252b[_0x1de219(0x239)]===ENEMY1_TYPE),_0x35e0b7=scaleValue(level,BASE_BEE_GROUP_ATTACK_PROBABILITY,MAX_BEE_GROUP_ATTACK_PROBABILITY)*1.2;if(_0x1fb60e[_0x1de219(0x2c5)]>=0x2&&Math[_0x1de219(0x1bf)]()<_0x35e0b7){const _0x1a0e8e=scaleValue(level,BASE_BEE_TRIPLE_ATTACK_PROBABILITY,MAX_BEE_TRIPLE_ATTACK_PROBABILITY)*1.1,_0xea5480=_0x1fb60e[_0x1de219(0x2c5)]>=0x3&&Math[_0x1de219(0x1bf)]()<_0x1a0e8e?0x3:0x2;let _0x3c398b=![];_0x1fb60e[_0x1de219(0x1cc)](()=>Math[_0x1de219(0x1bf)]()-0.5);for(let _0x27407e=0x0;_0x27407e<_0x1fb60e[_0x1de219(0x2c5)];_0x27407e++){const _0x374ac8=_0x1fb60e[_0x27407e];let _0x563972=[_0x374ac8];const _0x5a62ea=_0x1fb60e['filter'](_0x111387=>_0x111387['id']!==_0x374ac8['id']&&_0x111387['gridRow']===_0x374ac8['gridRow']);_0x5a62ea[_0x1de219(0x1cc)]((_0x24997f,_0x50da63)=>Math[_0x1de219(0x1d4)](_0x24997f[_0x1de219(0x26d)]-_0x374ac8['gridCol'])-Math['abs'](_0x50da63[_0x1de219(0x26d)]-_0x374ac8[_0x1de219(0x26d)]));for(let _0x2148a8=0x0;_0x2148a8<_0x5a62ea['length']&&_0x563972['length']<_0xea5480;_0x2148a8++){_0x563972[_0x1de219(0x2cf)](_0x5a62ea[_0x2148a8]);}if(_0x563972[_0x1de219(0x2c5)]===_0xea5480){_0x45ed6f=_0x563972,_0x341129=!![],_0x3c398b=!![];break;}}!_0x3c398b&&_0x1fb60e[_0x1de219(0x2c5)]>=_0xea5480&&(_0x45ed6f=_0x1fb60e[_0x1de219(0x19d)](0x0,_0xea5480),_0x341129=!![]);}}if(!_0x341129&&!_0x264d02){const _0x279181=_0x5517ad[_0x1de219(0x2a2)](_0x5f29cf=>_0x5f29cf['type']===ENEMY2_TYPE),_0x4b33c2=0.2;if(_0x279181[_0x1de219(0x2c5)]>=0x2&&Math['random']()<_0x4b33c2){const _0x57d143=0x2;let _0x2b9795=![];_0x279181[_0x1de219(0x1cc)](()=>Math[_0x1de219(0x1bf)]()-0.5);for(let _0x1d2d7c=0x0;_0x1d2d7c<_0x279181[_0x1de219(0x2c5)];_0x1d2d7c++){const _0x2fa166=_0x279181[_0x1d2d7c];let _0x2a80e8=[_0x2fa166];const _0x2f02ca=_0x279181[_0x1de219(0x2a2)](_0x557e2e=>_0x557e2e['id']!==_0x2fa166['id']&&_0x557e2e['gridRow']===_0x2fa166[_0x1de219(0x246)]);_0x2f02ca[_0x1de219(0x1cc)]((_0x310a19,_0x3bfecd)=>Math[_0x1de219(0x1d4)](_0x310a19[_0x1de219(0x26d)]-_0x2fa166[_0x1de219(0x26d)])-Math['abs'](_0x3bfecd['gridCol']-_0x2fa166[_0x1de219(0x26d)]));for(let _0x203af1=0x0;_0x203af1<_0x2f02ca[_0x1de219(0x2c5)]&&_0x2a80e8['length']<_0x57d143;_0x203af1++){_0x2a80e8[_0x1de219(0x2cf)](_0x2f02ca[_0x203af1]);}if(_0x2a80e8[_0x1de219(0x2c5)]===_0x57d143){_0x45ed6f=_0x2a80e8,_0x341129=!![],_0x2b9795=!![];break;}}!_0x2b9795&&_0x279181[_0x1de219(0x2c5)]>=_0x57d143&&(_0x45ed6f=_0x279181[_0x1de219(0x19d)](0x0,_0x57d143),_0x341129=!![]);}}if(!_0x341129&&_0x5517ad[_0x1de219(0x2c5)]>0x0){const _0x1bd4e5=_0x5517ad[0x0];_0x45ed6f['push'](_0x1bd4e5);if(_0x5517ad[_0x1de219(0x2c5)]>0x1&&!_0x264d02&&Math[_0x1de219(0x1bf)]()<0.2){const _0x35ee23=_0x5517ad[_0x1de219(0x23e)](_0x23d9c1=>_0x23d9c1['id']!==_0x1bd4e5['id']&&_0x23d9c1[_0x1de219(0x246)]===_0x1bd4e5['gridRow']&&_0x23d9c1[_0x1de219(0x26d)]===_0x1bd4e5[_0x1de219(0x26d)]-0x1),_0x2b353a=_0x5517ad['find'](_0x44a197=>_0x44a197['id']!==_0x1bd4e5['id']&&_0x44a197['gridRow']===_0x1bd4e5[_0x1de219(0x246)]&&_0x44a197[_0x1de219(0x26d)]===_0x1bd4e5['gridCol']+0x1),_0x5a189b=_0x35ee23||_0x2b353a;if(_0x5a189b){const _0x7c268f=_0x1bd4e5[_0x1de219(0x239)]===ENEMY3_TYPE&&_0x5a189b[_0x1de219(0x239)]===ENEMY3_TYPE;!_0x7c268f&&_0x45ed6f[_0x1de219(0x2cf)](_0x5a189b);}}_0x341129=!![];}if(_0x45ed6f[_0x1de219(0x2c5)]>0x0){_0x45ed6f=_0x45ed6f['filter'](_0x3d830c=>_0x3d830c);if(_0x45ed6f[_0x1de219(0x2c5)]===0x0)return null;_0x45ed6f['forEach'](_0x21ccd2=>{_0x21ccd2&&(_0x21ccd2['justReturned']=!![],_0x21ccd2['attackType']=_0x2823c7);});const _0x4421e7=new Set(_0x45ed6f[_0x1de219(0x2ae)](_0x3193d1=>_0x3193d1['id']));return resetJustReturnedFlags(_0x4421e7),_0x45ed6f;}return null;}catch(_0x31fa37){return console['error'](_0x1de219(0x1a1),_0x31fa37),null;}}function triggerImmediateCaptureDive(){const _0x29ecf3=_0x20bf56;try{let _0x189d0c=![],_0xe875e4=null;if(isTwoPlayerMode&&selectedGameMode===_0x29ecf3(0x273)){const _0x1f04a0=ship1&&player1Lives>0x1&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn,_0x35640d=ship2&&player2Lives>0x1&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn;if((_0x1f04a0||_0x35640d)&&!captureAttemptMadeThisLevel){_0x189d0c=!![];if(_0x1f04a0&&_0x35640d)_0xe875e4=Math['random']()<0.5?ship1:ship2;else{if(_0x1f04a0)_0xe875e4=ship1;else _0x35640d&&(_0xe875e4=ship2);}}}else playerLives>0x1&&ship&&!isShipCaptured&&!isWaitingForRespawn&&!captureAttemptMadeThisLevel&&(_0x189d0c=!![],_0xe875e4=ship);if(isChallengingStage||!_0x189d0c||!_0xe875e4)return;const _0x52d146=enemies[_0x29ecf3(0x2a2)](_0x4359ab=>_0x4359ab&&_0x4359ab['state']==='in_grid'&&_0x4359ab[_0x29ecf3(0x239)]===ENEMY3_TYPE&&!_0x4359ab[_0x29ecf3(0x20a)]&&!_0x4359ab[_0x29ecf3(0x1e0)]);if(_0x52d146[_0x29ecf3(0x2c5)]>0x0){const _0xbcbe2c=_0x52d146[Math['floor'](Math[_0x29ecf3(0x1bf)]()*_0x52d146['length'])],_0x169235=Date[_0x29ecf3(0x2c7)]();_0xbcbe2c[_0x29ecf3(0x1e0)]=!![],_0xbcbe2c[_0x29ecf3(0x1cb)]=!![];const _0x65f753=new Set([_0xbcbe2c['id']]);resetJustReturnedFlags(_0x65f753);const _0x41b560=_0xe875e4['x']+_0xe875e4[_0x29ecf3(0x1b1)]/0x2,_0x47b601=_0x41b560<gameCanvas[_0x29ecf3(0x1b1)]/0x2?_0x29ecf3(0x282):_0x29ecf3(0x250),_0x2b3dfb=_0x47b601===_0x29ecf3(0x250)?gameCanvas[_0x29ecf3(0x1b1)]*CAPTURE_DIVE_SIDE_MARGIN_FACTOR:gameCanvas['width']*(0x1-CAPTURE_DIVE_SIDE_MARGIN_FACTOR)-BOSS_WIDTH,_0x1281d7=gameCanvas[_0x29ecf3(0x276)]*CAPTURE_DIVE_BOTTOM_HOVER_Y_FACTOR;_0xbcbe2c[_0x29ecf3(0x1ae)]='preparing_capture',_0xbcbe2c['targetX']=_0x2b3dfb,_0xbcbe2c['targetY']=_0x1281d7,_0xbcbe2c[_0x29ecf3(0x24d)]=_0x169235,playSound(_0x29ecf3(0x228),![],0.2);const _0x5e2c3f=_0xbcbe2c['id'];_0xbcbe2c[_0x29ecf3(0x1b4)]=setTimeout(()=>{const _0x1c94d4=_0x29ecf3,_0x2ba732=enemies[_0x1c94d4(0x23e)](_0x2dbc08=>_0x2dbc08?.['id']===_0x5e2c3f);_0x2ba732&&_0x2ba732['state']===_0x1c94d4(0x21d)&&(_0x2ba732[_0x1c94d4(0x1ae)]=_0x1c94d4(0x1fb));if(_0x2ba732)_0x2ba732[_0x1c94d4(0x1b4)]=null;const _0x2e9aaa=enemySpawnTimeouts[_0x1c94d4(0x2b8)](_0x11c86c=>_0x11c86c===_0xbcbe2c[_0x1c94d4(0x1b4)]);if(_0x2e9aaa>-0x1)enemySpawnTimeouts[_0x1c94d4(0x267)](_0x2e9aaa,0x1);},0x12c),enemySpawnTimeouts[_0x29ecf3(0x2cf)](_0xbcbe2c[_0x29ecf3(0x1b4)]);}}catch(_0x462ce6){console[_0x29ecf3(0x1a4)](_0x29ecf3(0x255),_0x462ce6);}}function resetJustReturnedFlags(_0x1cdb54){enemies['forEach'](_0x4f7af8=>{const _0x324c4a=_0x2cf7;let _0x213219=![];if(_0x1cdb54 instanceof Set)_0x213219=_0x1cdb54[_0x324c4a(0x1f4)](_0x4f7af8['id']);else typeof _0x1cdb54===_0x324c4a(0x229)&&(_0x213219=_0x4f7af8['id']===_0x1cdb54);_0x4f7af8&&_0x4f7af8[_0x324c4a(0x1ae)]==='in_grid'&&_0x4f7af8['justReturned']&&!_0x213219&&(_0x4f7af8['justReturned']=![]);});}function updateFloatingScores(){const _0x2bd285=_0x20bf56;if(isPaused)return;try{const _0x43da85=Date['now']();floatingScores=floatingScores[_0x2bd285(0x2a2)](_0x4aec45=>_0x43da85-_0x4aec45[_0x2bd285(0x1f5)]<FLOATING_SCORE_DURATION+FLOATING_SCORE_APPEAR_DELAY);}catch(_0x5013d7){console[_0x2bd285(0x1a4)]('Error\x20updating\x20floating\x20scores:',_0x5013d7),floatingScores=[];}}function updateExplosions(){const _0x4cee82=_0x20bf56;if(isPaused)return;try{const _0x2f7e1e=Date['now']();for(let _0x39a81a=explosions[_0x4cee82(0x2c5)]-0x1;_0x39a81a>=0x0;_0x39a81a--){const _0x361f00=explosions[_0x39a81a],_0x5d059b=_0x2f7e1e-_0x361f00[_0x4cee82(0x1f5)];if(_0x5d059b>_0x361f00['duration']){explosions[_0x4cee82(0x267)](_0x39a81a,0x1);continue;}_0x361f00[_0x4cee82(0x207)]['forEach'](_0xcb985a=>{const _0x108613=_0x4cee82;_0xcb985a['x']+=_0xcb985a['vx'],_0xcb985a['y']+=_0xcb985a['vy'],_0xcb985a[_0x108613(0x1ac)]=Math[_0x108613(0x27d)](0x0,0x1-_0x5d059b/_0x361f00[_0x108613(0x1ca)]*EXPLOSION_FADE_SPEED);});}}catch(_0x2b897c){console[_0x4cee82(0x1a4)](_0x4cee82(0x28d),_0x2b897c),explosions=[];}}function moveEntities(_0x2f72bb=null,_0x277f18=null){const _0x3a7ff6=_0x20bf56;if(isPaused)return;try{const _0x19a6b3=Date[_0x3a7ff6(0x2c7)](),_0x90a527=gameCanvas?gameCanvas[_0x3a7ff6(0x276)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;if(gameCanvas&&!isTouchActiveGame){if(isManualControl){if(isTwoPlayerMode&&selectedGameMode==='coop'){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x593f36=ship1[_0x3a7ff6(0x1b1)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(leftPressed)ship1['x']-=ship1['speed'];if(rightPressed)ship1['x']+=ship1[_0x3a7ff6(0x274)];ship1['x']=Math['max'](0x0,Math[_0x3a7ff6(0x204)](gameCanvas[_0x3a7ff6(0x1b1)]-_0x593f36,ship1['x'])),ship1[_0x3a7ff6(0x1ad)]=ship1['x'];}if(!isPlayerTwoAI&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x2f81d2=ship2[_0x3a7ff6(0x1b1)]+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(p2LeftPressed)ship2['x']-=ship2['speed'];if(p2RightPressed)ship2['x']+=ship2[_0x3a7ff6(0x274)];ship2['x']=Math['max'](0x0,Math[_0x3a7ff6(0x204)](gameCanvas[_0x3a7ff6(0x1b1)]-_0x2f81d2,ship2['x'])),ship2['targetX']=ship2['x'];}}else{if(ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1){const _0x265ad7=ship[_0x3a7ff6(0x1b1)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x54f76c=![],_0x488156=![];if(isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3a7ff6(0x26f)&&currentPlayer===0x1&&isShowingIntro){if(_0x2f72bb!==null)_0x54f76c=_0x2f72bb;if(_0x277f18!==null)_0x488156=_0x277f18;}if(_0x54f76c||leftPressed)ship['x']-=ship[_0x3a7ff6(0x274)];if(_0x488156||rightPressed)ship['x']+=ship[_0x3a7ff6(0x274)];ship['x']=Math[_0x3a7ff6(0x27d)](0x0,Math[_0x3a7ff6(0x204)](gameCanvas[_0x3a7ff6(0x1b1)]-_0x265ad7,ship['x'])),ship[_0x3a7ff6(0x1ad)]=ship['x'];}}}}}if(!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x3a7ff6(0x1e9)&&currentPlayer===0x2||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3a7ff6(0x28b)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x2de671=ship1['targetX']-ship1['x'];let _0x2b0f2c=ship1[_0x3a7ff6(0x274)]*AI_POSITION_MOVE_SPEED_FACTOR;if(Math[_0x3a7ff6(0x1d4)](_0x2de671)>AI_MOVEMENT_DEADZONE)ship1['x']+=Math[_0x3a7ff6(0x2bc)](_0x2de671)*Math[_0x3a7ff6(0x204)](Math['abs'](_0x2de671),_0x2b0f2c);const _0x3de1a0=ship1[_0x3a7ff6(0x1b1)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship1['x']=Math['max'](0x0,Math[_0x3a7ff6(0x204)](gameCanvas[_0x3a7ff6(0x1b1)]-_0x3de1a0,ship1['x']));}if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x275d2=ship2[_0x3a7ff6(0x1ad)]-ship2['x'];let _0x4e6bcc=ship2[_0x3a7ff6(0x274)]*AI_POSITION_MOVE_SPEED_FACTOR;if(Math[_0x3a7ff6(0x1d4)](_0x275d2)>AI_MOVEMENT_DEADZONE)ship2['x']+=Math[_0x3a7ff6(0x2bc)](_0x275d2)*Math[_0x3a7ff6(0x204)](Math[_0x3a7ff6(0x1d4)](_0x275d2),_0x4e6bcc);const _0x27d594=ship2[_0x3a7ff6(0x1b1)]+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship2['x']=Math[_0x3a7ff6(0x27d)](0x0,Math[_0x3a7ff6(0x204)](gameCanvas[_0x3a7ff6(0x1b1)]-_0x27d594,ship2['x']));}}else{if(ship){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){const _0x33b980=ship['targetX']-ship['x'];let _0x33b9cc=ship['speed']*AI_POSITION_MOVE_SPEED_FACTOR;isPlayerTwoAI&&selectedGameMode===_0x3a7ff6(0x1e9)&&currentPlayer===0x2&&(_0x33b9cc=ship['speed']*(AI_POSITION_MOVE_SPEED_FACTOR*1.15));Math[_0x3a7ff6(0x1d4)](_0x33b980)>AI_MOVEMENT_DEADZONE&&(ship['x']+=Math[_0x3a7ff6(0x2bc)](_0x33b980)*Math[_0x3a7ff6(0x204)](Math[_0x3a7ff6(0x1d4)](_0x33b980),_0x33b9cc));const _0x23a3ee=ship[_0x3a7ff6(0x1b1)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship['x']=Math[_0x3a7ff6(0x27d)](0x0,Math[_0x3a7ff6(0x204)](gameCanvas[_0x3a7ff6(0x1b1)]-_0x23a3ee,ship['x']));}}}}if(isTwoPlayerMode&&selectedGameMode==='coop'){if(isPlayer1WaitingForRespawn&&_0x19a6b3>=player1RespawnTime)isPlayer1WaitingForRespawn=![];if(isPlayer1Invincible&&_0x19a6b3>=player1InvincibilityEndTime)isPlayer1Invincible=![];if(isPlayer2WaitingForRespawn&&_0x19a6b3>=player2RespawnTime)isPlayer2WaitingForRespawn=![];if(isPlayer2Invincible&&_0x19a6b3>=player2InvincibilityEndTime)isPlayer2Invincible=![];}else{if(isWaitingForRespawn&&_0x19a6b3>=respawnTime)isWaitingForRespawn=![];if(isInvincible&&_0x19a6b3>=invincibilityEndTime)isInvincible=![];}for(let _0x3ae34b=bullets[_0x3a7ff6(0x2c5)]-0x1;_0x3ae34b>=0x0;_0x3ae34b--){const _0x224562=bullets[_0x3ae34b];if(!_0x224562){bullets[_0x3a7ff6(0x267)](_0x3ae34b,0x1);continue;}_0x224562['y']-=_0x224562[_0x3a7ff6(0x274)];if(_0x224562['y']+PLAYER_BULLET_HEIGHT<0x0){bullets[_0x3a7ff6(0x267)](_0x3ae34b,0x1);continue;}for(let _0x4b4021=enemies['length']-0x1;_0x4b4021>=0x0;_0x4b4021--){const _0x77b80b=enemies[_0x4b4021];if(!_0x77b80b){enemies[_0x3a7ff6(0x267)](_0x4b4021,0x1);continue;}const _0x109e37={'x':_0x77b80b['x'],'y':_0x77b80b['y'],'width':_0x77b80b[_0x3a7ff6(0x239)]===ENEMY3_TYPE?BOSS_WIDTH:_0x77b80b[_0x3a7ff6(0x239)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,'height':_0x77b80b[_0x3a7ff6(0x239)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x77b80b[_0x3a7ff6(0x239)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT},_0x41e6bf={'x':_0x224562['x'],'y':_0x224562['y'],'width':_0x224562[_0x3a7ff6(0x1b1)],'height':_0x224562['height']};if(checkCollision(_0x41e6bf,_0x109e37)){bullets[_0x3a7ff6(0x267)](_0x3ae34b,0x1);const _0x40f7f4=handleEnemyHit(_0x77b80b,_0x224562[_0x3a7ff6(0x2ce)]);if(_0x40f7f4['destroyed'])enemies[_0x3a7ff6(0x267)](_0x4b4021,0x1);break;}}}for(let _0x11abd0=enemyBullets[_0x3a7ff6(0x2c5)]-0x1;_0x11abd0>=0x0;_0x11abd0--){const _0x179514=enemyBullets[_0x11abd0];if(!_0x179514){enemyBullets[_0x3a7ff6(0x267)](_0x11abd0,0x1);continue;}_0x179514['x']+=_0x179514['vx'],_0x179514['y']+=_0x179514['vy'],(_0x179514['y']>gameCanvas[_0x3a7ff6(0x276)]||_0x179514['y']<-ENEMY_BULLET_HEIGHT||_0x179514['x']<-ENEMY_BULLET_WIDTH||_0x179514['x']>gameCanvas[_0x3a7ff6(0x1b1)])&&enemyBullets[_0x3a7ff6(0x267)](_0x11abd0,0x1);}const _0x3cb0eb=gameCanvas?gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4,_0x33a76e=0x2;for(let _0x47e572=fallingShips[_0x3a7ff6(0x2c5)]-0x1;_0x47e572>=0x0;_0x47e572--){const _0x110725=fallingShips[_0x47e572];if(!_0x110725){fallingShips['splice'](_0x47e572,0x1);continue;}let _0x3e2f62=![];if(!_0x110725[_0x3a7ff6(0x27b)]){_0x110725['y']+=FALLING_SHIP_SPEED;if(_0x110725['y']>=_0x3cb0eb){_0x110725['y']=_0x3cb0eb,_0x110725['landed']=!![],_0x110725['landedTime']=_0x19a6b3;!_0x110725['rotationCompleted']&&(_0x110725[_0x3a7ff6(0x238)]=0x0,_0x110725['rotationCompleted']=!![]);let _0x598019=null,_0x37c9a5=()=>{},_0x14629d=![],_0x5cc154=![],_0x580676=![],_0x17ee55=null;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3a7ff6(0x28b)){if(_0x110725[_0x3a7ff6(0x2a9)]===_0x3a7ff6(0x1d9)&&ship1&&player1Lives>0x0)_0x598019=ship1,_0x14629d=player1IsDualShipActive,_0x37c9a5=()=>{player1IsDualShipActive=!![];},_0x580676=!![],_0x17ee55=_0x3a7ff6(0x1d9);else(_0x110725[_0x3a7ff6(0x2a9)]==='player2'||_0x110725[_0x3a7ff6(0x2a9)]===_0x3a7ff6(0x23c))&&ship2&&player2Lives>0x0&&(_0x598019=ship2,_0x14629d=player2IsDualShipActive,_0x37c9a5=()=>{player2IsDualShipActive=!![];},_0x580676=!![],_0x17ee55=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3a7ff6(0x28b)?_0x3a7ff6(0x23c):_0x3a7ff6(0x2b1));}else{if(isTwoPlayerMode&&selectedGameMode===_0x3a7ff6(0x273)){if(_0x110725['targetPlayerId']===_0x3a7ff6(0x1d9)&&ship1&&player1Lives>0x0)_0x598019=ship1,_0x14629d=player1IsDualShipActive,_0x5cc154=isPlayer1ShipCaptured,_0x37c9a5=()=>{player1IsDualShipActive=!![],isPlayer1ShipCaptured=![];},_0x580676=!![],_0x17ee55='player1';else _0x110725[_0x3a7ff6(0x2a9)]==='player2'&&ship2&&player2Lives>0x0&&(_0x598019=ship2,_0x14629d=player2IsDualShipActive,_0x5cc154=isPlayer2ShipCaptured,_0x37c9a5=()=>{player2IsDualShipActive=!![],isPlayer2ShipCaptured=![];},_0x580676=!![],_0x17ee55=_0x3a7ff6(0x2b1));}else ship&&playerLives>0x0&&(_0x598019=ship,_0x14629d=isDualShipActive,_0x5cc154=isShipCaptured,_0x37c9a5=()=>{const _0x4798d7=_0x3a7ff6;isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode===_0x4798d7(0x1e9)){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}isShipCaptured=![];},_0x580676=!![],_0x17ee55=isTwoPlayerMode&&selectedGameMode===_0x3a7ff6(0x1e9)?String(currentPlayer):_0x3a7ff6(0x1d9));}if(_0x580676&&!_0x14629d){_0x37c9a5(),playSound('dualShipSound',![],0.4);if(_0x5cc154&&!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3a7ff6(0x28b))){if(_0x17ee55===_0x3a7ff6(0x1d9)&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x19a6b3+INVINCIBILITY_DURATION_MS;else{if(_0x17ee55===_0x3a7ff6(0x2b1)&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x19a6b3+INVINCIBILITY_DURATION_MS;else ship&&(isInvincible=!![],invincibilityEndTime=_0x19a6b3+INVINCIBILITY_DURATION_MS);}}fallingShips[_0x3a7ff6(0x267)](_0x47e572,0x1),_0x3e2f62=!![];continue;}else{if(_0x580676&&_0x14629d){fallingShips['splice'](_0x47e572,0x1),_0x3e2f62=!![];continue;}else{fallingShips[_0x3a7ff6(0x267)](_0x47e572,0x1),_0x3e2f62=!![];continue;}}}}if(_0x3e2f62)continue;const _0xbc658f=_0x19a6b3-_0x110725[_0x3a7ff6(0x1f5)];if(_0xbc658f<FALLING_SHIP_FADE_DURATION_MS)_0x110725[_0x3a7ff6(0x1f9)]=Math[_0x3a7ff6(0x27d)](0x0,0x1-_0xbc658f/FALLING_SHIP_FADE_DURATION_MS);else _0x110725[_0x3a7ff6(0x1f9)]=0x0;if(_0x110725[_0x3a7ff6(0x2bd)])_0x110725[_0x3a7ff6(0x238)]=0x0;else{if(!_0x110725['landed']&&typeof _0x110725[_0x3a7ff6(0x281)]==='number'&&typeof FALLING_SHIP_ROTATION_SPEED==='number'&&FALLING_SHIP_ROTATION_SPEED>0x0){const _0x170b4d=FALLING_SHIP_ROTATION_SPEED*_0x110725[_0x3a7ff6(0x281)];_0x110725[_0x3a7ff6(0x238)]+=_0x170b4d,_0x110725['totalRotation']+=Math[_0x3a7ff6(0x1d4)](_0x170b4d);if(_0x110725[_0x3a7ff6(0x2c2)]>=_0x33a76e*0x2*Math['PI'])_0x110725[_0x3a7ff6(0x238)]=0x0,_0x110725[_0x3a7ff6(0x2bd)]=!![];else{if(_0x110725['rotation']>Math['PI']*0x2)_0x110725[_0x3a7ff6(0x238)]-=Math['PI']*0x2;if(_0x110725[_0x3a7ff6(0x238)]<0x0)_0x110725[_0x3a7ff6(0x238)]+=Math['PI']*0x2;}}else _0x110725[_0x3a7ff6(0x238)]=_0x110725[_0x3a7ff6(0x238)]||0x0;}if(!_0x110725[_0x3a7ff6(0x27b)]){let _0x18eb96=null,_0x266820=()=>{},_0x2516c1=0x0,_0xcb7afd=![],_0x46c847=![];if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3a7ff6(0x28b)){if(_0x110725['targetPlayerId']===_0x3a7ff6(0x1d9)&&ship1&&player1Lives>0x0)_0x18eb96=ship1,_0x46c847=player1IsDualShipActive,_0x266820=()=>{if(!_0x46c847)player1IsDualShipActive=!![];},_0x2516c1=0x1;else(_0x110725[_0x3a7ff6(0x2a9)]===_0x3a7ff6(0x2b1)||_0x110725[_0x3a7ff6(0x2a9)]===_0x3a7ff6(0x23c))&&ship2&&player2Lives>0x0&&(_0x18eb96=ship2,_0x46c847=player2IsDualShipActive,_0x266820=()=>{if(!_0x46c847)player2IsDualShipActive=!![];},_0x2516c1=0x2);}else{if(isTwoPlayerMode&&selectedGameMode===_0x3a7ff6(0x273)){if(_0x110725[_0x3a7ff6(0x2a9)]===_0x3a7ff6(0x1d9)&&ship1&&player1Lives>0x0)_0x18eb96=ship1,_0xcb7afd=isPlayer1ShipCaptured,_0x46c847=player1IsDualShipActive,_0x266820=()=>{if(!_0x46c847)player1IsDualShipActive=!![];isPlayer1ShipCaptured=![];},_0x2516c1=0x1;else _0x110725[_0x3a7ff6(0x2a9)]===_0x3a7ff6(0x2b1)&&ship2&&player2Lives>0x0&&(_0x18eb96=ship2,_0xcb7afd=isPlayer2ShipCaptured,_0x46c847=player2IsDualShipActive,_0x266820=()=>{if(!_0x46c847)player2IsDualShipActive=!![];isPlayer2ShipCaptured=![];},_0x2516c1=0x2);}else ship&&playerLives>0x0&&(_0x18eb96=ship,_0xcb7afd=isShipCaptured,_0x46c847=isDualShipActive,_0x266820=()=>{const _0x780fba=_0x3a7ff6;if(!_0x46c847){isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode===_0x780fba(0x1e9)){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}}isShipCaptured=![];},_0x2516c1=isTwoPlayerMode&&selectedGameMode===_0x3a7ff6(0x1e9)?currentPlayer:0x1);}if(_0x18eb96&&!_0x46c847){const _0x211cee={'x':_0x110725['x'],'y':_0x110725['y'],'width':_0x110725[_0x3a7ff6(0x1b1)],'height':_0x110725[_0x3a7ff6(0x276)]},_0x297965={'x':_0x18eb96['x'],'y':_0x18eb96['y'],'width':_0x18eb96[_0x3a7ff6(0x1b1)],'height':_0x18eb96[_0x3a7ff6(0x276)]};if(checkCollision(_0x211cee,_0x297965)){_0x266820();if(_0xcb7afd&&!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3a7ff6(0x28b))){playSound('dualShipSound',![],0.4);if(_0x2516c1===0x1&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x19a6b3+INVINCIBILITY_DURATION_MS;else{if(_0x2516c1===0x2&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x19a6b3+INVINCIBILITY_DURATION_MS;else _0x2516c1!==0x0&&ship&&(isInvincible=!![],invincibilityEndTime=_0x19a6b3+INVINCIBILITY_DURATION_MS);}}else playSound(_0x3a7ff6(0x22a),![],0.4);fallingShips[_0x3a7ff6(0x267)](_0x47e572,0x1);continue;}}}if(!_0x110725[_0x3a7ff6(0x27b)]&&_0x110725['y']>=gameCanvas[_0x3a7ff6(0x276)])fallingShips[_0x3a7ff6(0x267)](_0x47e572,0x1);}let _0xab6bb6=0x0;const _0x4d8606=enemies[_0x3a7ff6(0x1fe)](_0x5a14f8=>_0x5a14f8?.[_0x3a7ff6(0x1ae)]===_0x3a7ff6(0x1bb)),_0x332382=!isChallengingStage&&!isWaveTransitioning&&_0x4d8606&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x3a7ff6(0x273)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage));if(_0x332382){!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(_0x3a7ff6(0x220),!![],0.1));const _0xea9b67=enemies[_0x3a7ff6(0x2a2)](_0x256da6=>_0x256da6?.[_0x3a7ff6(0x1ae)]===_0x3a7ff6(0x1bb));if(_0xea9b67[_0x3a7ff6(0x2c5)]>0x0){let _0xa2e697=gameCanvas[_0x3a7ff6(0x1b1)],_0x19e2b0=0x0;_0xea9b67[_0x3a7ff6(0x1f1)](_0x3c4f55=>{const _0x5e62ae=_0x3a7ff6;_0x3c4f55&&(_0xa2e697=Math[_0x5e62ae(0x204)](_0xa2e697,_0x3c4f55['x']),_0x19e2b0=Math['max'](_0x19e2b0,_0x3c4f55['x']+_0x3c4f55['width']));});const _0x3c522d=gameCanvas[_0x3a7ff6(0x1b1)]*GRID_HORIZONTAL_MARGIN_PERCENT,_0x4033c5=gameCanvas[_0x3a7ff6(0x1b1)]*(0x1-GRID_HORIZONTAL_MARGIN_PERCENT);if(gridMoveDirection===0x1&&_0x19e2b0>=_0x4033c5)gridMoveDirection=-0x1;else{if(gridMoveDirection===-0x1&&_0xa2e697<=_0x3c522d)gridMoveDirection=0x1;}const _0x2e8d62=scaleValue(level,BASE_GRID_MOVE_SPEED,MAX_GRID_MOVE_SPEED);_0xab6bb6=_0x2e8d62*gridMoveDirection,currentGridOffsetX+=_0xab6bb6,enemies[_0x3a7ff6(0x1f1)](_0x14ee54=>{const _0x4371ff=_0x3a7ff6;if(_0x14ee54&&(_0x14ee54[_0x4371ff(0x1ae)]===_0x4371ff(0x1af)||_0x14ee54['state']===_0x4371ff(0x1bb)||_0x14ee54[_0x4371ff(0x1ae)]==='moving_to_grid'))try{const _0x323fd3=_0x14ee54[_0x4371ff(0x239)]===ENEMY3_TYPE?BOSS_WIDTH:_0x14ee54[_0x4371ff(0x239)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x5b31bc,y:_0x7a7b49}=getCurrentGridSlotPosition(_0x14ee54[_0x4371ff(0x246)],_0x14ee54[_0x4371ff(0x26d)],_0x323fd3);_0x14ee54['targetGridX']=_0x5b31bc,_0x14ee54[_0x4371ff(0x245)]=_0x7a7b49;}catch(_0xb8bd21){console[_0x4371ff(0x1a4)]('Error\x20updating\x20target\x20grid\x20pos\x20for\x20enemy\x20'+_0x14ee54?.['id']+_0x4371ff(0x280)+_0x14ee54?.[_0x4371ff(0x1ae)]+_0x4371ff(0x299),_0xb8bd21);}});}}else isGridSoundPlaying&&(stopSound(_0x3a7ff6(0x220)),isGridSoundPlaying=![]),_0xab6bb6=0x0;for(let _0x4629c7=enemies[_0x3a7ff6(0x2c5)]-0x1;_0x4629c7>=0x0;_0x4629c7--){let _0x3265bc=enemies[_0x4629c7];if(!_0x3265bc){enemies[_0x3a7ff6(0x267)](_0x4629c7,0x1);continue;}const _0x4142d6=_0x3265bc['id'];if(_0x3265bc[_0x3a7ff6(0x1b4)]&&_0x3265bc[_0x3a7ff6(0x1ae)]!==_0x3a7ff6(0x21d)){clearTimeout(_0x3265bc[_0x3a7ff6(0x1b4)]);const _0x12b68e=enemySpawnTimeouts['indexOf'](_0x3265bc['capturePrepareTimeout']);if(_0x12b68e>-0x1)enemySpawnTimeouts['splice'](_0x12b68e,0x1);_0x3265bc[_0x3a7ff6(0x1b4)]=null;}const _0x2534c0=_0x3265bc[_0x3a7ff6(0x239)]===ENEMY3_TYPE?BOSS_WIDTH:_0x3265bc['type']===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x59899c=_0x3265bc[_0x3a7ff6(0x239)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x3265bc['type']===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT;switch(_0x3265bc[_0x3a7ff6(0x1ae)]){case _0x3a7ff6(0x242):{let _0x36e833=CS_ENTRANCE_PATH_SPEED;const _0x544955=_0x3265bc[_0x3a7ff6(0x219)]||0x1;_0x36e833*=_0x544955;if(!isChallengingStage){enemies[_0x3a7ff6(0x267)](_0x4629c7,0x1),_0x3265bc=null;break;}let _0x144405=challengingStagePaths,_0x265230=_0x144405[_0x3265bc[_0x3a7ff6(0x2b6)]];if(!_0x265230||_0x3265bc[_0x3a7ff6(0x2ca)]>=_0x265230[_0x3a7ff6(0x2c5)]){enemies[_0x3a7ff6(0x267)](_0x4629c7,0x1),_0x3265bc=null;break;}const _0x3bfa2f=_0x265230[_0x3265bc[_0x3a7ff6(0x2ca)]];if(!_0x3bfa2f||!_0x3bfa2f['p0']||!_0x3bfa2f['p1']||!_0x3bfa2f['p2']||!_0x3bfa2f['p3']){console['error'](_0x3a7ff6(0x227)+_0x3265bc[_0x3a7ff6(0x2ca)]+_0x3a7ff6(0x2aa)+_0x3265bc['entrancePathId']+_0x3a7ff6(0x1eb)+_0x3265bc['id']),enemies['splice'](_0x4629c7,0x1),_0x3265bc=null;break;}_0x3265bc[_0x3a7ff6(0x22d)]+=_0x36e833;let _0x400dfd,_0x250f72,_0x24fc3c=_0x3265bc['x'],_0x47289c=_0x3265bc['y'];if(_0x3265bc[_0x3a7ff6(0x22d)]>=0x1){_0x3265bc['pathT']=0x0,_0x3265bc['pathSegmentIndex']++;if(_0x3265bc['pathSegmentIndex']>=_0x265230['length'])enemies[_0x3a7ff6(0x267)](_0x4629c7,0x1),_0x3265bc=null;else{const _0x52b8a8=_0x265230[_0x3265bc[_0x3a7ff6(0x2ca)]];_0x52b8a8?.['p0']?(_0x400dfd=_0x52b8a8['p0']['x'],_0x250f72=_0x52b8a8['p0']['y']):(console[_0x3a7ff6(0x1a4)](_0x3a7ff6(0x24c)+_0x3265bc[_0x3a7ff6(0x2ca)]+_0x3a7ff6(0x2aa)+_0x3265bc[_0x3a7ff6(0x2b6)]+_0x3a7ff6(0x1eb)+_0x4142d6),enemies['splice'](_0x4629c7,0x1),_0x3265bc=null);}}else try{_0x400dfd=calculateBezierPoint(_0x3265bc['pathT'],_0x3bfa2f['p0']['x'],_0x3bfa2f['p1']['x'],_0x3bfa2f['p2']['x'],_0x3bfa2f['p3']['x']),_0x250f72=calculateBezierPoint(_0x3265bc[_0x3a7ff6(0x22d)],_0x3bfa2f['p0']['y'],_0x3bfa2f['p1']['y'],_0x3bfa2f['p2']['y'],_0x3bfa2f['p3']['y']);}catch(_0x541059){console[_0x3a7ff6(0x1a4)](_0x3a7ff6(0x252)+_0x4142d6+':',_0x541059),enemies['splice'](_0x4629c7,0x1),_0x3265bc=null;}_0x3265bc&&(isNaN(_0x400dfd)||isNaN(_0x250f72)?(console[_0x3a7ff6(0x1a4)]('NaN\x20detected\x20in\x20CS\x20path\x20calculation\x20for\x20enemy\x20'+_0x4142d6+_0x3a7ff6(0x221)),enemies['splice'](_0x4629c7,0x1),_0x3265bc=null):(_0x3265bc[_0x3a7ff6(0x1ba)]=_0x400dfd-_0x24fc3c,_0x3265bc[_0x3a7ff6(0x1f2)]=_0x250f72-_0x47289c,_0x3265bc['x']=_0x400dfd,_0x3265bc['y']=_0x250f72));break;}case _0x3a7ff6(0x1b6):{if(isChallengingStage){enemies['splice'](_0x4629c7,0x1),_0x3265bc=null;break;}let _0x16341c=normalWaveEntrancePaths,_0x5c21e3=_0x16341c[_0x3265bc[_0x3a7ff6(0x2b6)]],_0x8d4c6a;_0x3265bc[_0x3a7ff6(0x2b6)]==='boss_loop_left'||_0x3265bc[_0x3a7ff6(0x2b6)]===_0x3a7ff6(0x26a)?_0x8d4c6a=BOSS_LOOP_ENTRANCE_PATH_SPEED:_0x8d4c6a=NORMAL_ENTRANCE_PATH_SPEED;if(!_0x5c21e3){console['warn'](_0x3a7ff6(0x286)+_0x4142d6+_0x3a7ff6(0x21c)+_0x3265bc[_0x3a7ff6(0x2b6)]+_0x3a7ff6(0x1b9));try{_0x3265bc[_0x3a7ff6(0x19b)]=_0x3265bc[_0x3a7ff6(0x19b)]??gameCanvas[_0x3a7ff6(0x1b1)]/0x2,_0x3265bc['targetGridY']=_0x3265bc[_0x3a7ff6(0x245)]??ENEMY_TOP_MARGIN;}catch(_0x361a1d){console[_0x3a7ff6(0x1a4)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x4142d6+_0x3a7ff6(0x1f3),_0x361a1d),_0x3265bc[_0x3a7ff6(0x19b)]=gameCanvas[_0x3a7ff6(0x1b1)]/0x2,_0x3265bc[_0x3a7ff6(0x245)]=ENEMY_TOP_MARGIN;}_0x3265bc['state']=_0x3a7ff6(0x29e),_0x3265bc[_0x3a7ff6(0x22d)]=0x0,_0x3265bc[_0x3a7ff6(0x2ca)]=0x0,_0x3265bc['velocityX']=0x0,_0x3265bc[_0x3a7ff6(0x1f2)]=0x0;_0x3265bc[_0x3a7ff6(0x21a)]!==undefined&&squadronCompletionStatus[_0x3265bc[_0x3a7ff6(0x21a)]]&&squadronCompletionStatus[_0x3265bc[_0x3a7ff6(0x21a)]][_0x3a7ff6(0x206)]++;break;}if(_0x3265bc[_0x3a7ff6(0x2ca)]>=_0x5c21e3[_0x3a7ff6(0x2c5)]){console[_0x3a7ff6(0x298)](_0x3a7ff6(0x286)+_0x4142d6+_0x3a7ff6(0x222)+_0x3265bc[_0x3a7ff6(0x2ca)]+_0x3a7ff6(0x1c0)+_0x3265bc[_0x3a7ff6(0x2b6)]+_0x3a7ff6(0x1b9));try{_0x3265bc[_0x3a7ff6(0x19b)]=_0x3265bc['targetGridX']??gameCanvas[_0x3a7ff6(0x1b1)]/0x2,_0x3265bc[_0x3a7ff6(0x245)]=_0x3265bc['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0xc1adbe){console['error'](_0x3a7ff6(0x1e3)+_0x4142d6+_0x3a7ff6(0x1b5),_0xc1adbe),_0x3265bc[_0x3a7ff6(0x19b)]=gameCanvas['width']/0x2,_0x3265bc[_0x3a7ff6(0x245)]=ENEMY_TOP_MARGIN;}_0x3265bc['state']='moving_to_grid',_0x3265bc['pathT']=0x0,_0x3265bc[_0x3a7ff6(0x2ca)]=0x0,_0x3265bc[_0x3a7ff6(0x1ba)]=0x0,_0x3265bc[_0x3a7ff6(0x1f2)]=0x0;_0x3265bc[_0x3a7ff6(0x21a)]!==undefined&&squadronCompletionStatus[_0x3265bc[_0x3a7ff6(0x21a)]]&&squadronCompletionStatus[_0x3265bc[_0x3a7ff6(0x21a)]][_0x3a7ff6(0x206)]++;break;}const _0x13faa0=_0x5c21e3[_0x3265bc[_0x3a7ff6(0x2ca)]];if(!_0x13faa0||!_0x13faa0['p0']||!_0x13faa0['p1']||!_0x13faa0['p2']||!_0x13faa0['p3']){console[_0x3a7ff6(0x1a4)]('Invalid\x20Normal\x20Bezier\x20segment\x20'+_0x3265bc[_0x3a7ff6(0x2ca)]+'\x20for\x20SHARED\x20path\x20'+_0x3265bc[_0x3a7ff6(0x2b6)]+_0x3a7ff6(0x1eb)+_0x4142d6+_0x3a7ff6(0x1b9));try{_0x3265bc[_0x3a7ff6(0x19b)]=_0x3265bc['targetGridX']??gameCanvas['width']/0x2,_0x3265bc[_0x3a7ff6(0x245)]=_0x3265bc[_0x3a7ff6(0x245)]??ENEMY_TOP_MARGIN+_0x3265bc['gridRow']*(ENEMY_HEIGHT+ENEMY_V_SPACING);}catch(_0xb2e1e4){console[_0x3a7ff6(0x1a4)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x4142d6+_0x3a7ff6(0x20e),_0xb2e1e4),_0x3265bc[_0x3a7ff6(0x19b)]=gameCanvas[_0x3a7ff6(0x1b1)]/0x2,_0x3265bc[_0x3a7ff6(0x245)]=ENEMY_TOP_MARGIN;}_0x3265bc['state']=_0x3a7ff6(0x29e),_0x3265bc['pathT']=0x0,_0x3265bc[_0x3a7ff6(0x2ca)]=0x0,_0x3265bc[_0x3a7ff6(0x1ba)]=0x0,_0x3265bc['velocityY']=0x0;_0x3265bc[_0x3a7ff6(0x21a)]!==undefined&&squadronCompletionStatus[_0x3265bc['squadronId']]&&squadronCompletionStatus[_0x3265bc['squadronId']][_0x3a7ff6(0x206)]++;break;}_0x3265bc[_0x3a7ff6(0x22d)]+=_0x8d4c6a;let _0x15bffe,_0x390857,_0x55f14=_0x3265bc['x'],_0x3146ff=_0x3265bc['y'];if(_0x3265bc[_0x3a7ff6(0x22d)]>=0x1){_0x3265bc[_0x3a7ff6(0x22d)]=0x0,_0x3265bc[_0x3a7ff6(0x2ca)]++;if(_0x3265bc[_0x3a7ff6(0x2ca)]>=_0x5c21e3[_0x3a7ff6(0x2c5)]){let _0x1d8525,_0xd0fd4b;try{_0x1d8525=calculateBezierPoint(0x1,_0x13faa0['p0']['x'],_0x13faa0['p1']['x'],_0x13faa0['p2']['x'],_0x13faa0['p3']['x']),_0xd0fd4b=calculateBezierPoint(0x1,_0x13faa0['p0']['y'],_0x13faa0['p1']['y'],_0x13faa0['p2']['y'],_0x13faa0['p3']['y']);}catch(_0x1ce8a3){console[_0x3a7ff6(0x1a4)](_0x3a7ff6(0x1d0)+_0x4142d6+_0x3a7ff6(0x25f)+_0x3265bc['entrancePathId'],_0x1ce8a3),_0x1d8525=_0x13faa0['p3']['x'],_0xd0fd4b=_0x13faa0['p3']['y'];}_0x3265bc['x']=_0x1d8525,_0x3265bc['y']=_0xd0fd4b;try{_0x3265bc[_0x3a7ff6(0x19b)]=_0x3265bc[_0x3a7ff6(0x19b)]??gameCanvas[_0x3a7ff6(0x1b1)]/0x2,_0x3265bc[_0x3a7ff6(0x245)]=_0x3265bc[_0x3a7ff6(0x245)]??ENEMY_TOP_MARGIN;}catch(_0x3cb99d){console['error']('Error\x20getting\x20target\x20grid\x20pos\x20for\x20'+_0x4142d6+_0x3a7ff6(0x25f)+_0x3265bc[_0x3a7ff6(0x2b6)],_0x3cb99d),_0x3265bc['targetGridX']=_0x3265bc['x'],_0x3265bc[_0x3a7ff6(0x245)]=ENEMY_TOP_MARGIN+_0x3265bc[_0x3a7ff6(0x246)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x39a0ee=_0x3265bc['state'];_0x3265bc['state']=_0x3a7ff6(0x29e),_0x3265bc[_0x3a7ff6(0x1ba)]=0x0,_0x3265bc['velocityY']=0x0,_0x3265bc[_0x3a7ff6(0x2ca)]=0x0;_0x39a0ee===_0x3a7ff6(0x1b6)&&_0x3265bc[_0x3a7ff6(0x21a)]!==undefined&&squadronCompletionStatus[_0x3265bc['squadronId']]&&squadronCompletionStatus[_0x3265bc[_0x3a7ff6(0x21a)]][_0x3a7ff6(0x206)]++;break;}else{const _0x264b6e=_0x5c21e3[_0x3265bc[_0x3a7ff6(0x2ca)]];if(_0x264b6e?.['p0'])_0x15bffe=_0x264b6e['p0']['x'],_0x390857=_0x264b6e['p0']['y'];else{console[_0x3a7ff6(0x1a4)](_0x3a7ff6(0x1e1)+_0x3265bc[_0x3a7ff6(0x2ca)]+'\x20for\x20SHARED\x20path\x20'+_0x3265bc[_0x3a7ff6(0x2b6)]+'.\x20Enemy\x20'+_0x4142d6+'.\x20Switching\x20to\x20moving_to_grid.');try{_0x3265bc[_0x3a7ff6(0x19b)]=_0x3265bc[_0x3a7ff6(0x19b)]??gameCanvas[_0x3a7ff6(0x1b1)]/0x2,_0x3265bc[_0x3a7ff6(0x245)]=_0x3265bc[_0x3a7ff6(0x245)]??ENEMY_TOP_MARGIN;}catch(_0x2ee186){console['error']('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x4142d6+_0x3a7ff6(0x2ba),_0x2ee186),_0x3265bc[_0x3a7ff6(0x19b)]=gameCanvas[_0x3a7ff6(0x1b1)]/0x2,_0x3265bc[_0x3a7ff6(0x245)]=ENEMY_TOP_MARGIN;}_0x3265bc[_0x3a7ff6(0x1ae)]=_0x3a7ff6(0x29e),_0x3265bc['pathT']=0x0,_0x3265bc['pathSegmentIndex']=0x0,_0x3265bc['velocityX']=0x0,_0x3265bc[_0x3a7ff6(0x1f2)]=0x0;_0x3265bc[_0x3a7ff6(0x21a)]!==undefined&&squadronCompletionStatus[_0x3265bc['squadronId']]&&squadronCompletionStatus[_0x3265bc[_0x3a7ff6(0x21a)]][_0x3a7ff6(0x206)]++;break;}}}else try{_0x15bffe=calculateBezierPoint(_0x3265bc[_0x3a7ff6(0x22d)],_0x13faa0['p0']['x'],_0x13faa0['p1']['x'],_0x13faa0['p2']['x'],_0x13faa0['p3']['x']),_0x390857=calculateBezierPoint(_0x3265bc[_0x3a7ff6(0x22d)],_0x13faa0['p0']['y'],_0x13faa0['p1']['y'],_0x13faa0['p2']['y'],_0x13faa0['p3']['y']);}catch(_0x24cb6d){console[_0x3a7ff6(0x1a4)]('Error\x20calculating\x20Normal\x20Bezier\x20point\x20for\x20enemy\x20'+_0x4142d6+':',_0x24cb6d);try{_0x3265bc[_0x3a7ff6(0x19b)]=_0x3265bc['targetGridX']??gameCanvas[_0x3a7ff6(0x1b1)]/0x2,_0x3265bc[_0x3a7ff6(0x245)]=_0x3265bc[_0x3a7ff6(0x245)]??ENEMY_TOP_MARGIN;}catch(_0x5c9cb9){console[_0x3a7ff6(0x1a4)](_0x3a7ff6(0x1e3)+_0x4142d6+_0x3a7ff6(0x275),_0x5c9cb9),_0x3265bc[_0x3a7ff6(0x19b)]=gameCanvas[_0x3a7ff6(0x1b1)]/0x2,_0x3265bc[_0x3a7ff6(0x245)]=ENEMY_TOP_MARGIN;}_0x3265bc[_0x3a7ff6(0x1ae)]=_0x3a7ff6(0x29e),_0x3265bc[_0x3a7ff6(0x22d)]=0x0,_0x3265bc['pathSegmentIndex']=0x0,_0x3265bc[_0x3a7ff6(0x1ba)]=0x0,_0x3265bc[_0x3a7ff6(0x1f2)]=0x0;_0x3265bc['squadronId']!==undefined&&squadronCompletionStatus[_0x3265bc[_0x3a7ff6(0x21a)]]&&squadronCompletionStatus[_0x3265bc[_0x3a7ff6(0x21a)]][_0x3a7ff6(0x206)]++;break;}if(_0x3265bc&&_0x3265bc[_0x3a7ff6(0x1ae)]==='following_entrance_path'){if(isNaN(_0x15bffe)||isNaN(_0x390857)){console[_0x3a7ff6(0x1a4)]('NaN\x20detected\x20in\x20Normal\x20path\x20calculation\x20for\x20enemy\x20'+_0x4142d6+_0x3a7ff6(0x1b9));try{_0x3265bc[_0x3a7ff6(0x19b)]=_0x3265bc[_0x3a7ff6(0x19b)]??gameCanvas[_0x3a7ff6(0x1b1)]/0x2,_0x3265bc[_0x3a7ff6(0x245)]=_0x3265bc['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x1801b1){console['error'](_0x3a7ff6(0x1e3)+_0x4142d6+_0x3a7ff6(0x284),_0x1801b1),_0x3265bc[_0x3a7ff6(0x19b)]=gameCanvas[_0x3a7ff6(0x1b1)]/0x2,_0x3265bc[_0x3a7ff6(0x245)]=ENEMY_TOP_MARGIN;}_0x3265bc[_0x3a7ff6(0x1ae)]=_0x3a7ff6(0x29e),_0x3265bc['pathT']=0x0,_0x3265bc[_0x3a7ff6(0x2ca)]=0x0,_0x3265bc[_0x3a7ff6(0x1ba)]=0x0,_0x3265bc[_0x3a7ff6(0x1f2)]=0x0,_0x3265bc[_0x3a7ff6(0x21a)]!==undefined&&squadronCompletionStatus[_0x3265bc[_0x3a7ff6(0x21a)]]&&squadronCompletionStatus[_0x3265bc[_0x3a7ff6(0x21a)]][_0x3a7ff6(0x206)]++;}else{let _0x1b828d=_0x15bffe;const _0x203b24=currentWavePatternIndex===0x1&&(_0x3265bc[_0x3a7ff6(0x21a)]===0x2||_0x3265bc[_0x3a7ff6(0x21a)]===0x3),_0xd92bbd=typeof _0x3265bc[_0x3a7ff6(0x251)]===_0x3a7ff6(0x1d1)&&_0x3265bc[_0x3a7ff6(0x251)]%0x2!==0x0;if(_0x203b24&&_0xd92bbd){const _0x193a83=_0x2534c0+ENTRANCE_PAIR_HORIZONTAL_GAP;_0x1b828d=_0x15bffe+_0x193a83;}_0x3265bc[_0x3a7ff6(0x1ba)]=_0x1b828d-_0x55f14,_0x3265bc[_0x3a7ff6(0x1f2)]=_0x390857-_0x3146ff,_0x3265bc['x']=_0x1b828d,_0x3265bc['y']=_0x390857;}}break;}case _0x3a7ff6(0x29e):{if(_0x3265bc[_0x3a7ff6(0x19b)]==null||_0x3265bc[_0x3a7ff6(0x245)]==null){console[_0x3a7ff6(0x298)](_0x3a7ff6(0x286)+_0x4142d6+'\x20in\x20moving_to_grid\x20state\x20without\x20target.\x20Recalculating.');try{const {x:_0x3de5b6,y:_0x6482cd}=getCurrentGridSlotPosition(_0x3265bc[_0x3a7ff6(0x246)],_0x3265bc[_0x3a7ff6(0x26d)],_0x2534c0);_0x3265bc['targetGridX']=_0x3de5b6,_0x3265bc[_0x3a7ff6(0x245)]=_0x6482cd;}catch(_0x2149bb){console[_0x3a7ff6(0x1a4)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x4142d6+_0x3a7ff6(0x218),_0x2149bb),_0x3265bc[_0x3a7ff6(0x1ae)]=_0x3a7ff6(0x1bb),_0x3265bc['x']=gameCanvas[_0x3a7ff6(0x1b1)]/0x2,_0x3265bc['y']=ENEMY_TOP_MARGIN;break;}}const _0x1d2e57=_0x3265bc[_0x3a7ff6(0x19b)],_0x4dafb1=_0x3265bc[_0x3a7ff6(0x245)],_0x1ba191=_0x1d2e57-_0x3265bc['x'],_0x44e65b=_0x4dafb1-_0x3265bc['y'],_0x3b8329=Math[_0x3a7ff6(0x212)](_0x1ba191*_0x1ba191+_0x44e65b*_0x44e65b),_0x521209=ENTRANCE_SPEED*1.2,_0x1faf4b=_0x521209*0.5;if(_0x3b8329>_0x1faf4b)_0x3265bc[_0x3a7ff6(0x1ba)]=_0x1ba191/_0x3b8329*_0x521209,_0x3265bc['velocityY']=_0x44e65b/_0x3b8329*_0x521209,_0x3265bc['x']+=_0x3265bc[_0x3a7ff6(0x1ba)],_0x3265bc['y']+=_0x3265bc[_0x3a7ff6(0x1f2)];else{_0x3265bc['x']=_0x1d2e57,_0x3265bc['y']=_0x4dafb1,_0x3265bc[_0x3a7ff6(0x1ba)]=0x0,_0x3265bc['velocityY']=0x0;const _0x3fcba8=_0x3265bc[_0x3a7ff6(0x1ae)];_0x3265bc[_0x3a7ff6(0x1ae)]=_0x3a7ff6(0x1bb),_0x3265bc['justReturned']=![];!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(_0x3a7ff6(0x220),!![],0.1));GRID_BREATH_ENABLED&&!isGridBreathingActive&&!isChallengingStage&&(isGridBreathingActive=!![],gridBreathStartTime=_0x19a6b3,currentGridBreathFactor=0x0);!firstEnemyLanded&&!isFullGridWave&&!isChallengingStage&&(lastGridFireCheckTime=Date[_0x3a7ff6(0x2c7)](),firstEnemyLanded=!![]);if(_0x3fcba8===_0x3a7ff6(0x29e)&&!isChallengingStage&&!isFullGridWave&&_0x3265bc['squadronId']!==undefined){const _0x1505b8=_0x3265bc[_0x3a7ff6(0x21a)],_0x2f8681=squadronCompletionStatus[_0x1505b8];if(_0x2f8681&&!_0x2f8681[_0x3a7ff6(0x1f0)]){const _0x17437a=enemies['every'](_0x136a48=>{const _0x440fac=_0x3a7ff6;if(_0x136a48&&_0x136a48[_0x440fac(0x21a)]===_0x1505b8)return _0x136a48[_0x440fac(0x1ae)]===_0x440fac(0x1bb)||!enemies['some'](_0x249a21=>_0x249a21['id']===_0x136a48['id']);return!![];});if(_0x17437a){_0x2f8681[_0x3a7ff6(0x1f0)]=!![];const _0x2fb34d=enemies[_0x3a7ff6(0x2a2)](_0x467fe1=>_0x467fe1&&_0x467fe1[_0x3a7ff6(0x21a)]===_0x1505b8&&_0x467fe1[_0x3a7ff6(0x1ae)]===_0x3a7ff6(0x1bb)&&(_0x467fe1[_0x3a7ff6(0x239)]===ENEMY2_TYPE||_0x467fe1['type']===ENEMY3_TYPE)&&!(_0x467fe1[_0x3a7ff6(0x239)]===ENEMY3_TYPE&&_0x467fe1[_0x3a7ff6(0x20a)]));if(_0x2fb34d[_0x3a7ff6(0x2c5)]>0x0){const _0xda3c91=_0x2fb34d[Math['floor'](Math['random']()*_0x2fb34d[_0x3a7ff6(0x2c5)])],_0x317439=_0xda3c91['id'],_0x58d02c=0xc8+Math['random']()*0x190,_0x15f7c7=setTimeout(()=>{const _0x26f0aa=_0x3a7ff6;try{const _0x2fdcae=enemySpawnTimeouts[_0x26f0aa(0x2a5)](_0x15f7c7);if(_0x2fdcae>-0x1)enemySpawnTimeouts['splice'](_0x2fdcae,0x1);if(isPaused||!isInGameState||playerLives<=0x0&&(!isTwoPlayerMode||player1Lives<=0x0&&player2Lives<=0x0)||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x139917=enemies['find'](_0xe905b8=>_0xe905b8&&_0xe905b8['id']===_0x317439);_0x139917&&_0x139917[_0x26f0aa(0x1ae)]==='in_grid'&&(createBulletSimple(_0x139917)&&(playSound('enemyShootSound',![],0.4),_0x139917[_0x26f0aa(0x22e)]=Date[_0x26f0aa(0x2c7)]()));}catch(_0x213f5e){console[_0x26f0aa(0x1a4)](_0x26f0aa(0x2d0)+_0x317439+':',_0x213f5e);}},_0x58d02c);enemySpawnTimeouts[_0x3a7ff6(0x2cf)](_0x15f7c7);}}}}}break;}case'in_grid':{try{const _0x89ffb3=_0x3265bc[_0x3a7ff6(0x239)]===ENEMY3_TYPE?BOSS_WIDTH:_0x3265bc['type']===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x59baa2,y:_0x4b0a54}=getCurrentGridSlotPosition(_0x3265bc[_0x3a7ff6(0x246)],_0x3265bc[_0x3a7ff6(0x26d)],_0x89ffb3);typeof _0x59baa2===_0x3a7ff6(0x1d1)&&!isNaN(_0x59baa2)&&(_0x3265bc['x']=_0x59baa2),typeof _0x4b0a54==='number'&&!isNaN(_0x4b0a54)&&(_0x3265bc['y']=_0x4b0a54),_0x3265bc[_0x3a7ff6(0x19b)]=_0x59baa2,_0x3265bc['targetGridY']=_0x4b0a54;}catch(_0x5ac4e3){console[_0x3a7ff6(0x1a4)](_0x3a7ff6(0x21e)+_0x3265bc['id']+':',_0x5ac4e3);}_0x3265bc[_0x3a7ff6(0x1ba)]=_0x332382?_0xab6bb6:0x0,_0x3265bc[_0x3a7ff6(0x1f2)]=0x0;_0x3265bc['type']===ENEMY3_TYPE&&_0x3265bc[_0x3a7ff6(0x20a)]&&_0x3265bc[_0x3a7ff6(0x1b0)]&&(_0x3265bc[_0x3a7ff6(0x23d)]=_0x3265bc['x']+CAPTURED_SHIP_OFFSET_X,_0x3265bc[_0x3a7ff6(0x27c)]=_0x3265bc['y']+CAPTURED_SHIP_OFFSET_Y);break;}case _0x3a7ff6(0x1c2):{_0x3265bc[_0x3a7ff6(0x1ba)]=0x0,_0x3265bc[_0x3a7ff6(0x1f2)]=0x0;break;}case _0x3a7ff6(0x21d):{_0x3265bc['velocityX']=0x0,_0x3265bc[_0x3a7ff6(0x1f2)]=0x0;break;}case _0x3a7ff6(0x1fb):{let _0x519d7a=isTwoPlayerMode&&selectedGameMode===_0x3a7ff6(0x273)?isPlayer1ShipCaptured||isPlayer2ShipCaptured:isShipCaptured;if(_0x519d7a){_0x3265bc[_0x3a7ff6(0x1ae)]='returning';try{const {x:_0x5ee9d1,y:_0x1e3584}=getCurrentGridSlotPosition(_0x3265bc[_0x3a7ff6(0x246)],_0x3265bc[_0x3a7ff6(0x26d)],_0x2534c0);_0x3265bc[_0x3a7ff6(0x19b)]=_0x5ee9d1,_0x3265bc[_0x3a7ff6(0x245)]=_0x1e3584;}catch(_0x2581cf){console[_0x3a7ff6(0x1a4)](_0x3a7ff6(0x2c4)+_0x3265bc['id']+':',_0x2581cf),_0x3265bc[_0x3a7ff6(0x19b)]=gameCanvas[_0x3a7ff6(0x1b1)]/0x2,_0x3265bc[_0x3a7ff6(0x245)]=ENEMY_TOP_MARGIN;}break;}const _0x33ce0b=_0x3265bc[_0x3a7ff6(0x1ad)],_0x562a28=_0x3265bc[_0x3a7ff6(0x25a)];if(_0x33ce0b==null||_0x562a28==null){console[_0x3a7ff6(0x1a4)](_0x3a7ff6(0x1b2)+_0x3265bc['id']+_0x3a7ff6(0x2a1)),_0x3265bc[_0x3a7ff6(0x1ae)]='returning';try{const {x:_0x54aa81,y:_0x29e533}=getCurrentGridSlotPosition(_0x3265bc[_0x3a7ff6(0x246)],_0x3265bc[_0x3a7ff6(0x26d)],_0x2534c0);_0x3265bc['targetGridX']=_0x54aa81,_0x3265bc['targetGridY']=_0x29e533;}catch(_0x3b274e){console[_0x3a7ff6(0x1a4)](_0x3a7ff6(0x2c4)+_0x3265bc['id']+':',_0x3b274e),_0x3265bc[_0x3a7ff6(0x19b)]=gameCanvas[_0x3a7ff6(0x1b1)]/0x2,_0x3265bc[_0x3a7ff6(0x245)]=ENEMY_TOP_MARGIN;}break;}const _0x33daf3=_0x33ce0b-_0x3265bc['x'],_0x32ce15=_0x562a28-_0x3265bc['y'],_0x140259=Math[_0x3a7ff6(0x212)](_0x33daf3*_0x33daf3+_0x32ce15*_0x32ce15),_0x598d51=BOSS_CAPTURE_DIVE_SPEED_FACTOR*BASE_ENEMY_ATTACK_SPEED,_0x4c7972=_0x598d51*0.6;_0x140259>_0x4c7972?(_0x3265bc[_0x3a7ff6(0x1ba)]=_0x33daf3/_0x140259*_0x598d51,_0x3265bc['velocityY']=_0x32ce15/_0x140259*_0x598d51,_0x3265bc['x']+=_0x3265bc[_0x3a7ff6(0x1ba)],_0x3265bc['y']+=_0x3265bc['velocityY']):(_0x3265bc['x']=_0x33ce0b,_0x3265bc['y']=_0x562a28,_0x3265bc[_0x3a7ff6(0x1ba)]=0x0,_0x3265bc[_0x3a7ff6(0x1f2)]=0x0,_0x3265bc['state']=_0x3a7ff6(0x290),_0x3265bc[_0x3a7ff6(0x1a7)]=_0x19a6b3,capturingBossId=_0x3265bc['id'],captureBeamActive=!![],captureBeamSource={'x':_0x3265bc['x']+_0x2534c0/0x2,'y':_0x3265bc['y']+_0x59899c},captureBeamTargetY=_0x3265bc['y'],captureBeamProgress=0x0,playSound(_0x3a7ff6(0x1ab),![],0.6),_0x3265bc[_0x3a7ff6(0x1e0)]&&(captureAttemptMadeThisLevel=!![],delete _0x3265bc[_0x3a7ff6(0x1e0)]));break;}case _0x3a7ff6(0x290):{_0x3265bc['velocityX']=0x0,_0x3265bc['velocityY']=0x0;_0x3265bc[_0x3a7ff6(0x1e0)]&&!captureAttemptMadeThisLevel&&(captureAttemptMadeThisLevel=!![],delete _0x3265bc['isPreparingForImmediateCapture']);let _0x58187e=![];isTwoPlayerMode&&selectedGameMode===_0x3a7ff6(0x273)?_0x58187e=isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x3265bc['id']||isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x3265bc['id']:_0x58187e=isShipCaptured&&capturedBossIdWithMessage===_0x3265bc['id'];if(_0x58187e){captureBeamActive=![];if(capturingBossId===_0x3265bc['id'])capturingBossId=null;_0x3265bc['state']=_0x3a7ff6(0x1af),stopSound(_0x3a7ff6(0x1ab));break;}const _0x28fd7f=_0x19a6b3-_0x3265bc[_0x3a7ff6(0x1a7)],_0x11f7dc=CAPTURE_BEAM_ANIMATION_DURATION_MS/0x2,_0x4d17a1=CAPTURE_BEAM_DURATION_MS;if(_0x28fd7f<_0x11f7dc)captureBeamProgress=_0x28fd7f/_0x11f7dc;else{if(_0x28fd7f<_0x4d17a1-_0x11f7dc)captureBeamProgress=0x1;else{if(_0x28fd7f<_0x4d17a1)captureBeamProgress=0x1-(_0x28fd7f-(_0x4d17a1-_0x11f7dc))/_0x11f7dc;else{captureBeamProgress=0x0,captureBeamActive=![],capturingBossId=null,stopSound(_0x3a7ff6(0x1ab)),_0x3265bc[_0x3a7ff6(0x1ae)]=_0x3a7ff6(0x287),_0x3265bc['attackPathSegments']=generateAttackPathInternal(_0x3265bc),_0x3265bc[_0x3a7ff6(0x1a9)]=0x0,_0x3265bc[_0x3a7ff6(0x216)]=0x0,_0x3265bc[_0x3a7ff6(0x274)]=BASE_ENEMY_ATTACK_SPEED*ENEMY3_ATTACK_SPEED_FACTOR,_0x3265bc['lastFiredTime']=0x0,_0x3265bc[_0x3a7ff6(0x271)]=!![],_0x3265bc['attackFormationOffsetX']=0x0,_0x3265bc[_0x3a7ff6(0x25d)]=null;break;}}}captureBeamProgress=Math[_0x3a7ff6(0x27d)](0x0,Math[_0x3a7ff6(0x204)](0x1,captureBeamProgress));if(captureBeamActive&&captureBeamProgress>=0.95){const _0x19c145=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x2a8d0e=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR,_0x2514ed=_0x3265bc['x']+_0x2534c0/0x2,_0x595050=_0x3265bc['y']+_0x59899c,_0x41bfaa=gameCanvas[_0x3a7ff6(0x276)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x5ea85a=Math[_0x3a7ff6(0x27d)](_0x19c145,_0x2a8d0e),_0x2e9e8c=_0x2514ed-_0x5ea85a/0x2,_0x248fa1=_0x595050,_0x47e0e7=_0x41bfaa-_0x595050;if(_0x47e0e7>0x0){const _0x5bb0ec={'x':_0x2e9e8c,'y':_0x248fa1,'width':_0x5ea85a,'height':_0x47e0e7};let _0x4424f1=null,_0x261313=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x3a7ff6(0x273)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&checkCollision(ship1,_0x5bb0ec))_0x4424f1=ship1,_0x261313=0x1;else ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&checkCollision(ship2,_0x5bb0ec)&&(_0x4424f1=ship2,_0x261313=0x2);}else ship&&playerLives>0x0&&!isShipCaptured&&checkCollision(ship,_0x5bb0ec)&&(_0x4424f1=ship,_0x261313=currentPlayer);if(_0x4424f1){_0x3265bc[_0x3a7ff6(0x1b0)]={'width':_0x4424f1[_0x3a7ff6(0x1b1)],'height':_0x4424f1[_0x3a7ff6(0x276)]},_0x3265bc[_0x3a7ff6(0x20a)]=!![],stopSound(_0x3a7ff6(0x1ab)),_0x3265bc[_0x3a7ff6(0x1ae)]=_0x3a7ff6(0x2a7),_0x3265bc[_0x3a7ff6(0x19b)]=null,_0x3265bc['targetGridY']=null,_0x3265bc[_0x3a7ff6(0x28c)]=_0x4424f1['y'],_0x3265bc[_0x3a7ff6(0x2ab)]=0x0,isShowingCaptureMessage=!![],captureMessageStartTime=_0x19a6b3,capturedBossIdWithMessage=_0x3265bc['id'],playSound(_0x3a7ff6(0x20b),![],0.3),csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,handlePlayerShipCollision(_0x261313,![],_0x19a6b3,!![]);if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3a7ff6(0x28b))&&aiPlayerActivelySeekingCaptureById)aiPlayerActivelySeekingCaptureById=null;break;}}}break;}case _0x3a7ff6(0x2a7):{_0x3265bc[_0x3a7ff6(0x1ba)]=0x0,_0x3265bc[_0x3a7ff6(0x1f2)]=0x0;if(_0x3265bc[_0x3a7ff6(0x20a)]&&_0x3265bc[_0x3a7ff6(0x1b0)]&&typeof _0x3265bc[_0x3a7ff6(0x28c)]===_0x3a7ff6(0x1d1)){const _0x23b101=_0x19a6b3-captureMessageStartTime,_0x205a93=Math['min'](0x1,_0x23b101/CAPTURE_MESSAGE_DURATION),_0x1d60ba=_0x3265bc['y']+CAPTURED_SHIP_OFFSET_Y,_0x6926a=_0x3265bc['initialCaptureAnimationY'];_0x3265bc['capturedShipY']=_0x6926a+(_0x1d60ba-_0x6926a)*_0x205a93,_0x3265bc[_0x3a7ff6(0x23d)]=_0x3265bc['x']+CAPTURED_SHIP_OFFSET_X;}else _0x3265bc[_0x3a7ff6(0x23d)]=_0x3265bc['x']+CAPTURED_SHIP_OFFSET_X,_0x3265bc[_0x3a7ff6(0x27c)]=_0x3265bc['y']+CAPTURED_SHIP_OFFSET_Y;break;}case _0x3a7ff6(0x287):{if(isEntrancePhaseActive)break;const _0x145cb8=_0x3265bc['attackPathSegments'],_0x47c6b8=3.8;if(!_0x145cb8||_0x145cb8[_0x3a7ff6(0x2c5)]===0x0){console[_0x3a7ff6(0x1a4)](_0x3a7ff6(0x286)+_0x4142d6+'\x20attacking\x20without\x20path!\x20Returning.'),_0x3265bc[_0x3a7ff6(0x1ae)]='returning';try{const {x:_0xd6ac0c,y:_0x2a90b8}=getCurrentGridSlotPosition(_0x3265bc[_0x3a7ff6(0x246)],_0x3265bc['gridCol'],_0x2534c0);_0x3265bc['targetGridX']=_0xd6ac0c,_0x3265bc[_0x3a7ff6(0x245)]=_0x2a90b8;}catch(_0x1bba31){console[_0x3a7ff6(0x1a4)](_0x3a7ff6(0x2c9)+_0x4142d6+_0x3a7ff6(0x230),_0x1bba31),_0x3265bc['targetGridX']=gameCanvas[_0x3a7ff6(0x1b1)]/0x2,_0x3265bc[_0x3a7ff6(0x245)]=ENEMY_TOP_MARGIN;}break;}if(_0x3265bc[_0x3a7ff6(0x1a9)]>=_0x145cb8[_0x3a7ff6(0x2c5)]){console[_0x3a7ff6(0x298)](_0x3a7ff6(0x286)+_0x4142d6+_0x3a7ff6(0x1e5)+_0x3265bc[_0x3a7ff6(0x1a9)]+'\x20out\x20of\x20bounds\x20('+_0x145cb8[_0x3a7ff6(0x2c5)]+_0x3a7ff6(0x1cf)),_0x3265bc[_0x3a7ff6(0x1ae)]='returning';try{const {x:_0x2cfa24,y:_0x481d35}=getCurrentGridSlotPosition(_0x3265bc['gridRow'],_0x3265bc['gridCol'],_0x2534c0);_0x3265bc[_0x3a7ff6(0x19b)]=_0x2cfa24,_0x3265bc[_0x3a7ff6(0x245)]=_0x481d35;}catch(_0x2a4b53){console[_0x3a7ff6(0x1a4)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x4142d6+_0x3a7ff6(0x22c),_0x2a4b53),_0x3265bc['targetGridX']=gameCanvas[_0x3a7ff6(0x1b1)]/0x2,_0x3265bc[_0x3a7ff6(0x245)]=ENEMY_TOP_MARGIN;}break;}const _0x2833d8=_0x145cb8[_0x3265bc[_0x3a7ff6(0x1a9)]];if(!_0x2833d8||!_0x2833d8['p0']||!_0x2833d8['p1']||!_0x2833d8['p2']||!_0x2833d8['p3']){console[_0x3a7ff6(0x1a4)](_0x3a7ff6(0x286)+_0x4142d6+_0x3a7ff6(0x20f)+_0x3265bc[_0x3a7ff6(0x1a9)]+'!\x20Returning.'),_0x3265bc[_0x3a7ff6(0x1ae)]=_0x3a7ff6(0x1af);try{const {x:_0xce52b6,y:_0x48afc1}=getCurrentGridSlotPosition(_0x3265bc['gridRow'],_0x3265bc[_0x3a7ff6(0x26d)],_0x2534c0);_0x3265bc['targetGridX']=_0xce52b6,_0x3265bc['targetGridY']=_0x48afc1;}catch(_0x278dfb){console[_0x3a7ff6(0x1a4)](_0x3a7ff6(0x2c9)+_0x4142d6+_0x3a7ff6(0x247),_0x278dfb),_0x3265bc[_0x3a7ff6(0x19b)]=gameCanvas['width']/0x2,_0x3265bc['targetGridY']=ENEMY_TOP_MARGIN;}break;}const _0x45d5dc=_0x3265bc[_0x3a7ff6(0x274)]/0x3e8*_0x47c6b8;_0x3265bc[_0x3a7ff6(0x216)]+=_0x45d5dc;let _0x581052,_0x54e144;const _0xcc5011=_0x3265bc['x'],_0x2939a5=_0x3265bc['y'];if(_0x3265bc[_0x3a7ff6(0x216)]>=0x1){try{_0x581052=calculateBezierPoint(0x1,_0x2833d8['p0']['x'],_0x2833d8['p1']['x'],_0x2833d8['p2']['x'],_0x2833d8['p3']['x']),_0x54e144=calculateBezierPoint(0x1,_0x2833d8['p0']['y'],_0x2833d8['p1']['y'],_0x2833d8['p2']['y'],_0x2833d8['p3']['y']);}catch(_0x36ad3f){console[_0x3a7ff6(0x1a4)](_0x3a7ff6(0x234)+_0x3265bc['id']+':',_0x36ad3f),_0x581052=_0x3265bc['x'],_0x54e144=_0x3265bc['y'],_0x3265bc[_0x3a7ff6(0x1ae)]=_0x3a7ff6(0x1af);try{const {x:_0x5a4c96,y:_0x1e1d9e}=getCurrentGridSlotPosition(_0x3265bc[_0x3a7ff6(0x246)],_0x3265bc['gridCol'],_0x2534c0);_0x3265bc[_0x3a7ff6(0x19b)]=_0x5a4c96,_0x3265bc['targetGridY']=_0x1e1d9e;}catch(_0x196a72){console[_0x3a7ff6(0x1a4)](_0x3a7ff6(0x205)+_0x3265bc['id']+':',_0x196a72),_0x3265bc[_0x3a7ff6(0x19b)]=gameCanvas['width']/0x2,_0x3265bc[_0x3a7ff6(0x245)]=ENEMY_TOP_MARGIN;}break;}_0x3265bc['attackPathT']=0x0,_0x3265bc[_0x3a7ff6(0x1a9)]++;if(_0x3265bc[_0x3a7ff6(0x1a9)]>=_0x145cb8['length']){_0x3265bc[_0x3a7ff6(0x1ae)]='returning',_0x3265bc[_0x3a7ff6(0x22e)]=0x0,_0x3265bc[_0x3a7ff6(0x264)]=0x0,_0x3265bc[_0x3a7ff6(0x25d)]=null;try{const {x:_0x54300f,y:_0x983e88}=getCurrentGridSlotPosition(_0x3265bc[_0x3a7ff6(0x246)],_0x3265bc[_0x3a7ff6(0x26d)],_0x2534c0);_0x3265bc[_0x3a7ff6(0x19b)]=_0x54300f,_0x3265bc[_0x3a7ff6(0x245)]=_0x983e88;}catch(_0x1223da){console[_0x3a7ff6(0x1a4)](_0x3a7ff6(0x2c9)+_0x4142d6+_0x3a7ff6(0x208),_0x1223da),_0x3265bc[_0x3a7ff6(0x19b)]=gameCanvas[_0x3a7ff6(0x1b1)]/0x2,_0x3265bc['targetGridY']=ENEMY_TOP_MARGIN;}}else{const _0xcdb911=_0x145cb8[_0x3265bc[_0x3a7ff6(0x1a9)]];if(!_0xcdb911?.['p0']){console['error'](_0x3a7ff6(0x286)+_0x4142d6+_0x3a7ff6(0x2a6)+_0x3265bc['attackPathSegmentIndex']+_0x3a7ff6(0x1d3)),_0x581052=_0x3265bc['x'],_0x54e144=_0x3265bc['y'],_0x3265bc['state']=_0x3a7ff6(0x1af);try{const {x:_0x1157ae,y:_0x3e5022}=getCurrentGridSlotPosition(_0x3265bc[_0x3a7ff6(0x246)],_0x3265bc[_0x3a7ff6(0x26d)],_0x2534c0);_0x3265bc[_0x3a7ff6(0x19b)]=_0x1157ae,_0x3265bc[_0x3a7ff6(0x245)]=_0x3e5022;}catch(_0x26ee07){console[_0x3a7ff6(0x1a4)](_0x3a7ff6(0x2a8)+_0x3265bc['id']+':',_0x26ee07),_0x3265bc[_0x3a7ff6(0x19b)]=gameCanvas[_0x3a7ff6(0x1b1)]/0x2,_0x3265bc[_0x3a7ff6(0x245)]=ENEMY_TOP_MARGIN;}break;}}}else try{_0x581052=calculateBezierPoint(_0x3265bc[_0x3a7ff6(0x216)],_0x2833d8['p0']['x'],_0x2833d8['p1']['x'],_0x2833d8['p2']['x'],_0x2833d8['p3']['x']),_0x54e144=calculateBezierPoint(_0x3265bc['attackPathT'],_0x2833d8['p0']['y'],_0x2833d8['p1']['y'],_0x2833d8['p2']['y'],_0x2833d8['p3']['y']);}catch(_0x1bee11){console['error'](_0x3a7ff6(0x233)+_0x3265bc['id']+':',_0x1bee11),_0x581052=_0x3265bc['x'],_0x54e144=_0x3265bc['y'],_0x3265bc['state']=_0x3a7ff6(0x1af);try{const {x:_0x2666b7,y:_0x21e6ee}=getCurrentGridSlotPosition(_0x3265bc[_0x3a7ff6(0x246)],_0x3265bc['gridCol'],_0x2534c0);_0x3265bc[_0x3a7ff6(0x19b)]=_0x2666b7,_0x3265bc[_0x3a7ff6(0x245)]=_0x21e6ee;}catch(_0x26014e){console['error'](_0x3a7ff6(0x1a6)+_0x3265bc['id']+':',_0x26014e),_0x3265bc['targetGridX']=gameCanvas['width']/0x2,_0x3265bc[_0x3a7ff6(0x245)]=ENEMY_TOP_MARGIN;}break;}if(_0x3265bc&&_0x3265bc['state']==='attacking'){const _0x1a0ba3=_0x3265bc[_0x3a7ff6(0x264)]||0x0,_0x2ede7f=_0x581052+_0x1a0ba3,_0x5b7ccf=_0x54e144;_0x3265bc[_0x3a7ff6(0x1ba)]=_0x2ede7f-_0xcc5011,_0x3265bc[_0x3a7ff6(0x1f2)]=_0x5b7ccf-_0x2939a5,_0x3265bc['x']=_0x2ede7f,_0x3265bc['y']=_0x5b7ccf;if(_0x3265bc['y']>gameCanvas[_0x3a7ff6(0x276)]+_0x59899c*1.5){_0x3265bc[_0x3a7ff6(0x1ae)]=_0x3a7ff6(0x1af),_0x3265bc[_0x3a7ff6(0x1a9)]=0x0,_0x3265bc[_0x3a7ff6(0x216)]=0x0,_0x3265bc['lastFiredTime']=0x0,_0x3265bc[_0x3a7ff6(0x264)]=0x0,_0x3265bc[_0x3a7ff6(0x25d)]=null,_0x3265bc['y']=-_0x59899c*(1.1+Math[_0x3a7ff6(0x1bf)]()*0.4),_0x3265bc['x']=Math[_0x3a7ff6(0x1bf)]()*(gameCanvas[_0x3a7ff6(0x1b1)]-_0x2534c0),_0x3265bc[_0x3a7ff6(0x1ba)]=0x0,_0x3265bc['velocityY']=0x0;try{const {x:_0xf330f,y:_0x4bc7ca}=getCurrentGridSlotPosition(_0x3265bc[_0x3a7ff6(0x246)],_0x3265bc[_0x3a7ff6(0x26d)],_0x2534c0);_0x3265bc['targetGridX']=_0xf330f,_0x3265bc[_0x3a7ff6(0x245)]=_0x4bc7ca;}catch(_0x4209e3){console[_0x3a7ff6(0x1a4)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x4142d6+_0x3a7ff6(0x1dc),_0x4209e3),_0x3265bc['targetGridX']=gameCanvas['width']/0x2,_0x3265bc[_0x3a7ff6(0x245)]=ENEMY_TOP_MARGIN;}}}break;}case'returning':{if(isEntrancePhaseActive)break;if(_0x3265bc[_0x3a7ff6(0x19b)]==null||_0x3265bc[_0x3a7ff6(0x245)]==null){console[_0x3a7ff6(0x298)](_0x3a7ff6(0x286)+_0x4142d6+'\x20returning\x20without\x20target\x20coords.\x20Recalculating.');try{const {x:_0x289de5,y:_0x286578}=getCurrentGridSlotPosition(_0x3265bc[_0x3a7ff6(0x246)],_0x3265bc[_0x3a7ff6(0x26d)],_0x2534c0);_0x3265bc[_0x3a7ff6(0x19b)]=_0x289de5,_0x3265bc[_0x3a7ff6(0x245)]=_0x286578;}catch(_0x85e048){console[_0x3a7ff6(0x1a4)](_0x3a7ff6(0x1e3)+_0x4142d6+_0x3a7ff6(0x19a),_0x85e048),_0x3265bc[_0x3a7ff6(0x1ae)]=_0x3a7ff6(0x1bb),_0x3265bc['x']=gameCanvas[_0x3a7ff6(0x1b1)]/0x2,_0x3265bc['y']=ENEMY_TOP_MARGIN;break;}}const _0x5e2076=_0x3265bc[_0x3a7ff6(0x19b)],_0x5b3d89=_0x3265bc['targetGridY'],_0x3b8dc0=_0x5e2076-_0x3265bc['x'],_0x3c2261=_0x5b3d89-_0x3265bc['y'],_0x45183a=Math[_0x3a7ff6(0x212)](_0x3b8dc0*_0x3b8dc0+_0x3c2261*_0x3c2261),_0x38a8e7=scaleValue(level,BASE_RETURN_SPEED_FACTOR,MAX_RETURN_SPEED_FACTOR),_0x461fae=BASE_RETURN_SPEED*_0x38a8e7,_0xc1e288=_0x461fae*0.5;_0x45183a>_0xc1e288?(_0x3265bc[_0x3a7ff6(0x1ba)]=_0x3b8dc0/_0x45183a*_0x461fae,_0x3265bc[_0x3a7ff6(0x1f2)]=_0x3c2261/_0x45183a*_0x461fae,_0x3265bc['x']+=_0x3265bc[_0x3a7ff6(0x1ba)],_0x3265bc['y']+=_0x3265bc[_0x3a7ff6(0x1f2)]):(_0x3265bc['x']=_0x5e2076,_0x3265bc['y']=_0x5b3d89,_0x3265bc[_0x3a7ff6(0x1ba)]=0x0,_0x3265bc['velocityY']=0x0,_0x3265bc[_0x3a7ff6(0x1ae)]='in_grid',_0x3265bc[_0x3a7ff6(0x1cb)]=!![],_0x3265bc[_0x3a7ff6(0x264)]=0x0,_0x3265bc['attackGroupId']=null,_0x3265bc[_0x3a7ff6(0x1aa)](_0x3a7ff6(0x2b9))&&delete _0x3265bc[_0x3a7ff6(0x2b9)],!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(_0x3a7ff6(0x220),!![],0.1)));break;}}if(_0x3265bc&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x3a7ff6(0x273)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){const _0xb19532=[_0x3a7ff6(0x287),_0x3a7ff6(0x1b6),_0x3a7ff6(0x242),'diving_to_capture_position'];if(_0xb19532[_0x3a7ff6(0x232)](_0x3265bc[_0x3a7ff6(0x1ae)])){let _0x11cca2=[];if(isTwoPlayerMode&&selectedGameMode==='coop'){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x11cca2[_0x3a7ff6(0x2cf)]({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x11cca2['push']({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isInvincible&&_0x11cca2[_0x3a7ff6(0x2cf)]({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(const _0x502095 of _0x11cca2){const _0x1f606d=_0x502095[_0x3a7ff6(0x243)],_0x48fce4={'x':_0x3265bc['x'],'y':_0x3265bc['y'],'width':_0x2534c0,'height':_0x59899c},_0x3c24b4={'x':_0x1f606d['x'],'y':_0x1f606d['y'],'width':_0x1f606d['width'],'height':_0x1f606d['height']},_0x33e6b4=_0x502095[_0x3a7ff6(0x1c4)]?{'x':_0x1f606d['x']+DUAL_SHIP_OFFSET_X,'y':_0x1f606d['y'],'width':_0x1f606d[_0x3a7ff6(0x1b1)],'height':_0x1f606d['height']}:null;let _0x28d99f=![],_0x58a401=![];if(checkCollision(_0x48fce4,_0x3c24b4))_0x28d99f=!![];else _0x502095[_0x3a7ff6(0x1c4)]&&_0x33e6b4&&checkCollision(_0x48fce4,_0x33e6b4)&&(_0x28d99f=!![],_0x58a401=!![]);if(_0x28d99f){createExplosion(_0x3265bc['x']+_0x2534c0/0x2,_0x3265bc['y']+_0x59899c/0x2),playSound(_0x3a7ff6(0x199),![],0.6),enemies[_0x3a7ff6(0x267)](_0x4629c7,0x1),_0x3265bc=null,handlePlayerShipCollision(_0x502095[_0x3a7ff6(0x1f6)],_0x58a401,_0x19a6b3,![]);if(_0x3265bc===null)break;}}}}if(!_0x3265bc)continue;}if(!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x3a7ff6(0x273)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){let _0x126e9a=[];if(isTwoPlayerMode&&selectedGameMode==='coop'){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x126e9a['push']({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x126e9a[_0x3a7ff6(0x2cf)]({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isInvincible&&_0x126e9a[_0x3a7ff6(0x2cf)]({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(let _0x119e65=enemyBullets['length']-0x1;_0x119e65>=0x0;_0x119e65--){const _0x56ed28=enemyBullets[_0x119e65];if(!_0x56ed28){enemyBullets[_0x3a7ff6(0x267)](_0x119e65,0x1);continue;}const _0x3307b5={'x':_0x56ed28['x'],'y':_0x56ed28['y'],'width':_0x56ed28[_0x3a7ff6(0x1b1)],'height':_0x56ed28['height']};let _0x2021bb=![];for(const _0xd931b0 of _0x126e9a){const _0x7ce6b1=_0xd931b0[_0x3a7ff6(0x243)],_0xf892e3={'x':_0x7ce6b1['x'],'y':_0x7ce6b1['y'],'width':_0x7ce6b1[_0x3a7ff6(0x1b1)],'height':_0x7ce6b1['height']},_0x467dbd=_0xd931b0[_0x3a7ff6(0x1c4)]?{'x':_0x7ce6b1['x']+DUAL_SHIP_OFFSET_X,'y':_0x7ce6b1['y'],'width':_0x7ce6b1[_0x3a7ff6(0x1b1)],'height':_0x7ce6b1[_0x3a7ff6(0x276)]}:null;let _0x23a004=![],_0x431f90=![];if(checkCollision(_0x3307b5,_0xf892e3))_0x23a004=!![];else _0xd931b0[_0x3a7ff6(0x1c4)]&&_0x467dbd&&checkCollision(_0x3307b5,_0x467dbd)&&(_0x23a004=!![],_0x431f90=!![]);if(_0x23a004){playSound(_0x3a7ff6(0x199),![],0.6),handlePlayerShipCollision(_0xd931b0[_0x3a7ff6(0x1f6)],_0x431f90,_0x19a6b3,![]),enemyBullets[_0x3a7ff6(0x267)](_0x119e65,0x1),_0x2021bb=!![];break;}}if(_0x2021bb)continue;}}updateHitSparks();}catch(_0x183847){console[_0x3a7ff6(0x1a4)](_0x3a7ff6(0x201),_0x183847,_0x183847[_0x3a7ff6(0x226)]),isGridSoundPlaying=![],stopSound(_0x3a7ff6(0x220)),isEntrancePhaseActive=![],stopSound(_0x3a7ff6(0x21f)),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(_0x3a7ff6(0x1ab)),stopSound(_0x3a7ff6(0x20b)),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0x3a7ff6(0x1b8))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x3a7ff6(0x2be));}}function handlePlayerShipCollision(_0x233957,_0x23908d,_0x2d665b,_0x5e50c9=![]){const _0x717bf9=_0x20bf56,_0x3f1e89=_0x2d665b,_0x559481=gameCanvas?gameCanvas[_0x717bf9(0x276)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;let _0x44199b=0x0,_0x311471=null;if(isTwoPlayerMode&&selectedGameMode===_0x717bf9(0x273)){_0x311471=_0x233957===0x1?ship1:ship2;if(_0x311471){_0x44199b=_0x311471['x'];if(_0x5e50c9){if(_0x233957===0x1)player1CaptureRespawnX=_0x311471['x'];else{if(_0x233957===0x2)player2CaptureRespawnX=_0x311471['x'];}}}else{if(_0x233957===0x1&&typeof player1CaptureRespawnX==='number'&&player1CaptureRespawnX!==0x0)_0x44199b=player1CaptureRespawnX;else{if(_0x233957===0x2&&typeof player2CaptureRespawnX==='number'&&player2CaptureRespawnX!==0x0)_0x44199b=player2CaptureRespawnX;else{if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x717bf9(0x28b))&&gameCanvas)_0x44199b=_0x233957===0x1?gameCanvas[_0x717bf9(0x1b1)]/0x2-gameCanvas[_0x717bf9(0x1b1)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2:gameCanvas[_0x717bf9(0x1b1)]/0x2+gameCanvas[_0x717bf9(0x1b1)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;else gameCanvas?_0x44199b=gameCanvas[_0x717bf9(0x1b1)]/0x2-SHIP_WIDTH/0x2:_0x44199b=0xc8;}}}}else{_0x311471=ship;if(_0x311471)_0x44199b=_0x311471['x'],_0x5e50c9&&(capturedShipRespawnX_NormalMode=ship['x']);else _0x5e50c9&&capturedShipRespawnX_NormalMode!==0x0?_0x44199b=capturedShipRespawnX_NormalMode:_0x44199b=gameCanvas?gameCanvas[_0x717bf9(0x1b1)]/0x2-SHIP_WIDTH/0x2:0xc8;}if(isTwoPlayerMode&&selectedGameMode==='coop'){if(_0x233957===0x1){if(_0x5e50c9){isPlayer1ShipCaptured=!![],player1IsDualShipActive=![],player1Lives--;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x717bf9(0x28b))coopPartner1CapturedTime=_0x3f1e89;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0x3f1e89,playSound(_0x717bf9(0x2b3),![],0.4),ship1=null,player1NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;if(capturedBossIdWithMessage&&enemies[_0x717bf9(0x23e)](_0x543187=>_0x543187['id']===capturedBossIdWithMessage)){const _0xd1cd05=enemies[_0x717bf9(0x23e)](_0x3b95cb=>_0x3b95cb['id']===capturedBossIdWithMessage);_0xd1cd05&&(_0xd1cd05[_0x717bf9(0x20a)]=![],_0xd1cd05[_0x717bf9(0x1b0)]=null);}}else player1NeedsRespawnAfterCapture=!![],ship1=null;}else{if(player1IsDualShipActive&&ship1){player1IsDualShipActive=![];const _0x732fde=_0x23908d?ship1['x']+DUAL_SHIP_OFFSET_X+ship1[_0x717bf9(0x1b1)]/0x2:ship1['x']+ship1[_0x717bf9(0x1b1)]/0x2;createExplosion(_0x732fde,ship1['y']+ship1[_0x717bf9(0x276)]/0x2),ship1['x']=_0x44199b,ship1['y']=_0x559481,ship1[_0x717bf9(0x1ad)]=ship1['x'],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x3f1e89+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0x3f1e89+RESPAWN_DELAY_MS;}else{if(ship1)createExplosion(ship1['x']+ship1[_0x717bf9(0x1b1)]/0x2,ship1['y']+ship1[_0x717bf9(0x276)]/0x2);player1Lives--;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0x3f1e89,playSound(_0x717bf9(0x2b3),![],0.4),ship1=null;if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;}else isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x3f1e89+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0x3f1e89+RESPAWN_DELAY_MS,ship1?(ship1['x']=_0x44199b,ship1['y']=_0x559481,ship1[_0x717bf9(0x1ad)]=ship1['x']):ship1={'x':_0x44199b,'y':_0x559481,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x44199b,'id':'p1'};}}}else{if(_0x233957===0x2){if(_0x5e50c9){isPlayer2ShipCaptured=!![],player2IsDualShipActive=![],player2Lives--;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x717bf9(0x28b))coopPartner2CapturedTime=_0x3f1e89;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0x3f1e89,playSound(_0x717bf9(0x2b3),![],0.4),ship2=null,player2NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p2'||aiPlayerActivelySeekingCaptureById===_0x717bf9(0x23c))aiPlayerActivelySeekingCaptureById=null;if(capturedBossIdWithMessage&&enemies[_0x717bf9(0x23e)](_0x11ab16=>_0x11ab16['id']===capturedBossIdWithMessage)){const _0x2b253a=enemies[_0x717bf9(0x23e)](_0x58a2bb=>_0x58a2bb['id']===capturedBossIdWithMessage);_0x2b253a&&(_0x2b253a[_0x717bf9(0x20a)]=![],_0x2b253a[_0x717bf9(0x1b0)]=null);}}else player2NeedsRespawnAfterCapture=!![],ship2=null;}else{if(player2IsDualShipActive&&ship2){player2IsDualShipActive=![];const _0x3de98a=_0x23908d?ship2['x']+DUAL_SHIP_OFFSET_X+ship2[_0x717bf9(0x1b1)]/0x2:ship2['x']+ship2[_0x717bf9(0x1b1)]/0x2;createExplosion(_0x3de98a,ship2['y']+ship2[_0x717bf9(0x276)]/0x2),ship2['x']=_0x44199b,ship2['y']=_0x559481,ship2['targetX']=ship2['x'],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x3f1e89+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0x3f1e89+RESPAWN_DELAY_MS;}else{if(ship2)createExplosion(ship2['x']+ship2[_0x717bf9(0x1b1)]/0x2,ship2['y']+ship2[_0x717bf9(0x276)]/0x2);player2Lives--;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0x3f1e89,playSound(_0x717bf9(0x2b3),![],0.4),ship2=null;if(aiPlayerActivelySeekingCaptureById==='p2'||aiPlayerActivelySeekingCaptureById===_0x717bf9(0x23c))aiPlayerActivelySeekingCaptureById=null;}else isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x3f1e89+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0x3f1e89+RESPAWN_DELAY_MS,ship2?(ship2['x']=_0x44199b,ship2['y']=_0x559481,ship2[_0x717bf9(0x1ad)]=_0x44199b):ship2={'x':_0x44199b,'y':_0x559481,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x44199b,'id':'p2'};}}}}player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isDualShipActive&&!_0x5e50c9&&_0x311471){isDualShipActive=![];if(isTwoPlayerMode&&selectedGameMode===_0x717bf9(0x1e9)){if(_0x233957===0x1)player1IsDualShipActive=![];else{if(_0x233957===0x2)player2IsDualShipActive=![];}}else{if(!isTwoPlayerMode)player1IsDualShipActive=![];}const _0x332ec4=_0x23908d?_0x44199b+DUAL_SHIP_OFFSET_X+SHIP_WIDTH/0x2:_0x44199b+SHIP_WIDTH/0x2;createExplosion(_0x332ec4,_0x559481+SHIP_HEIGHT/0x2);ship&&(ship['x']=_0x44199b,ship['y']=_0x559481,ship[_0x717bf9(0x1ad)]=ship['x']);isInvincible=!![],invincibilityEndTime=_0x3f1e89+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x3f1e89+RESPAWN_DELAY_MS;if(!isManualControl&&!isPlayerTwoAI)aiNeedsStabilization=!![];else{if(isPlayerTwoAI&&selectedGameMode===_0x717bf9(0x1e9)&&currentPlayer===0x2)aiNeedsStabilization=!![];}}else{if(!_0x5e50c9&&_0x311471)createExplosion(_0x44199b+SHIP_WIDTH/0x2,_0x559481+SHIP_HEIGHT/0x2);if(_0x5e50c9){isShipCaptured=!![];if(ship)ship=null;}playerLives--;if(playerLives<=0x0){playerLives=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x717bf9(0x1e9)){if(_0x233957===0x1)player1Lives=0x0;else{if(_0x233957===0x2)player2Lives=0x0;}isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x3f1e89,playerWhoIsGameOver=_0x233957,playSound(_0x717bf9(0x2b3),![],0.4);const _0x50734e=_0x233957===0x1?0x2:0x1,_0x21dbf0=_0x50734e===0x1?player1Lives:player2Lives;_0x21dbf0>0x0?nextActionAfterPlayerGameOver=_0x717bf9(0x225):nextActionAfterPlayerGameOver='show_results';bullets=[],enemyBullets=[],explosions=[];if(!(_0x21dbf0>0x0))ship=null;}else player1Lives=0x0,ship=null,playSound(_0x717bf9(0x2b3),![],0.4),triggerFinalGameOverSequence();}else{if(isTwoPlayerMode&&selectedGameMode===_0x717bf9(0x1e9)){if(_0x233957===0x1)player1Lives=playerLives;else player2Lives=playerLives;}if(!_0x5e50c9){isInvincible=!![],invincibilityEndTime=_0x3f1e89+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x3f1e89+RESPAWN_DELAY_MS;if(ship&&gameCanvas){ship['x']=_0x44199b,ship['y']=_0x559481,ship['targetX']=ship['x'];if(!isManualControl&&!isPlayerTwoAI)aiNeedsStabilization=!![];else{if(isPlayerTwoAI&&selectedGameMode===_0x717bf9(0x1e9)&&currentPlayer===0x2)aiNeedsStabilization=!![];}}}if(_0x5e50c9)isDualShipActive=![];}}}if(!_0x5e50c9)fallingShips=[];}function switchPlayerTurn(){const _0x1697db=_0x20bf56;if(!isTwoPlayerMode||selectedGameMode==='coop')return![];stopSound(_0x1697db(0x29a));if(currentPlayer===0x1){player1Score=score,player1IsDualShipActive=isDualShipActive;if(player1Score>highScore)highScore=player1Score;}else{player2Score=score,player2IsDualShipActive=isDualShipActive;if(player2Score>highScore)highScore=player2Score;}const _0x42c7e4=currentPlayer===0x1?0x2:0x1,_0x34f52c=_0x42c7e4===0x1?player1Lives:player2Lives;if(_0x34f52c<=0x0){const _0x5923ed=currentPlayer===0x1?player1Lives:player2Lives;return _0x5923ed<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x42c7e4,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function triggerGridFiring(){const _0x214674=_0x20bf56;if(isPaused||!isInGameState||isChallengingStage||isWaveTransitioning)return;let _0xdae37b=![];isTwoPlayerMode&&selectedGameMode===_0x214674(0x273)?(player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)&&(_0xdae37b=!![]):playerLives>0x0&&ship&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(_0xdae37b=!![]);if(!_0xdae37b)return;const _0x17fed3=enemies['filter'](_0x594d87=>_0x594d87&&_0x594d87[_0x214674(0x1ae)]===_0x214674(0x1bb));if(_0x17fed3[_0x214674(0x2c5)]===0x0)return;const _0x5b5042=Date[_0x214674(0x2c7)](),_0x246950=scaleValue(level,BASE_GRID_FIRE_INTERVAL,MIN_GRID_FIRE_INTERVAL);if(_0x5b5042-lastGridFireCheckTime<_0x246950)return;lastGridFireCheckTime=_0x5b5042;const _0x15482c=scaleValue(level,BASE_GRID_FIRE_PROBABILITY,MAX_GRID_FIRE_PROBABILITY),_0xa7fc15=Math[_0x214674(0x29f)](scaleValue(level,BASE_GRID_MAX_FIRING_ENEMIES,MAX_GRID_MAX_FIRING_ENEMIES));let _0x3ad6c2=0x0;_0x17fed3[_0x214674(0x1cc)](()=>Math[_0x214674(0x1bf)]()-0.5);for(const _0x217223 of _0x17fed3){if(_0x3ad6c2>=_0xa7fc15)break;if(_0x217223[_0x214674(0x239)]===ENEMY2_TYPE||_0x217223[_0x214674(0x239)]===ENEMY3_TYPE){if(_0x217223[_0x214674(0x239)]===ENEMY3_TYPE&&_0x217223['hasCapturedShip'])continue;Math[_0x214674(0x1bf)]()<_0x15482c&&(createBulletSimple(_0x217223)&&(playSound('enemyShootSound',![],0.4),_0x217223['lastFiredTime']=_0x5b5042,_0x3ad6c2++));}}}function runSingleGameUpdate(_0x116fdc){const _0x5e22c3=_0x20bf56;try{const _0x4d5956=Date[_0x5e22c3(0x2c7)]();let _0x36c71b=![];isTwoPlayerMode&&selectedGameMode===_0x5e22c3(0x273)?_0x36c71b=player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture:_0x36c71b=playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;let _0x2e7268=![];if(isManualControl&&connectedGamepadIndex!==null){if(isTwoPlayerMode&&selectedGameMode==='coop'){if(player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage)_0x2e7268=!![];}else{if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1))_0x2e7268=!![];}}if(_0x2e7268&&gameOverSequenceStartTime===0x0&&!isPaused){const _0x3f8fc9=navigator[_0x5e22c3(0x2d1)]();if(_0x3f8fc9?.[connectedGamepadIndex]){const _0x5ec65b=_0x3f8fc9[connectedGamepadIndex],_0x4164a6=processSingleController(_0x5ec65b,previousGameButtonStates);previousGameButtonStates=_0x4164a6[_0x5e22c3(0x202)]['slice']();if(_0x4164a6[_0x5e22c3(0x23a)]){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates[_0x5e22c3(0x2c5)]>0x0)previousGameButtonStates=[];}}else connectedGamepadIndex===null&&previousGameButtonStates[_0x5e22c3(0x2c5)]>0x0&&(previousGameButtonStates=[]);let _0x17cbf1=![];if(isManualControl&&isTwoPlayerMode&&selectedGameMode==='coop'&&!isPlayerTwoAI&&connectedGamepadIndexP2!==null){if(player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage)_0x17cbf1=!![];}else{if(isManualControl&&isTwoPlayerMode&&selectedGameMode===_0x5e22c3(0x1e9)&&!isPlayerTwoAI&&connectedGamepadIndexP2!==null){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&currentPlayer===0x2)_0x17cbf1=!![];}}if(_0x17cbf1&&gameOverSequenceStartTime===0x0&&!isPaused){const _0x3b563e=navigator[_0x5e22c3(0x2d1)]();if(_0x3b563e?.[connectedGamepadIndexP2]){const _0x14720b=_0x3b563e[connectedGamepadIndexP2],_0x453ab5=processSingleController(_0x14720b,previousGameButtonStatesP2);previousGameButtonStatesP2=_0x453ab5[_0x5e22c3(0x202)][_0x5e22c3(0x19d)]();if(_0x453ab5['back']){stopGameAndShowMenu();return;}}else{if(previousGameButtonStatesP2['length']>0x0)previousGameButtonStatesP2=[];}}else connectedGamepadIndexP2===null&&previousGameButtonStatesP2['length']>0x0&&(previousGameButtonStatesP2=[]);if(isPaused){renderGame();return;}const _0x2651d0=showCsBonusScoreMessage||showPerfectMessage;if(isCoopAIDemoActive&&_0x2651d0&&gameCanvas?.[_0x5e22c3(0x1b1)]>0x0){const _0x20a1f2=ship1&&player1Lives>0x0&&player2Lives<=0x0,_0x2efe27=ship2&&player2Lives>0x0&&player1Lives<=0x0;if(_0x20a1f2){const _0x29383d=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x2db94f=Math['round'](gameCanvas[_0x5e22c3(0x1b1)]/0x2-_0x29383d/0x2);ship1['x']=_0x2db94f,ship1[_0x5e22c3(0x1ad)]=_0x2db94f,smoothedShip1X=_0x2db94f,ship2&&(ship2[_0x5e22c3(0x1ad)]=ship2['x'],smoothedShip2X=ship2['x']);}else{if(_0x2efe27){const _0x5c6e8e=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x2ed232=Math[_0x5e22c3(0x29f)](gameCanvas[_0x5e22c3(0x1b1)]/0x2-_0x5c6e8e/0x2);ship2['x']=_0x2ed232,ship2['targetX']=_0x2ed232,smoothedShip2X=_0x2ed232,ship1&&(ship1[_0x5e22c3(0x1ad)]=ship1['x'],smoothedShip1X=ship1['x']);}else{if(ship1&&player1Lives>0x0&&ship2&&player2Lives>0x0){const _0x401a5d=gameCanvas[_0x5e22c3(0x1b1)]/0x2-gameCanvas[_0x5e22c3(0x1b1)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1['x']=_0x401a5d,ship1[_0x5e22c3(0x1ad)]=_0x401a5d,smoothedShip1X=_0x401a5d;const _0x35bf5d=gameCanvas[_0x5e22c3(0x1b1)]/0x2+gameCanvas[_0x5e22c3(0x1b1)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2['x']=_0x35bf5d,ship2['targetX']=_0x35bf5d,smoothedShip2X=_0x35bf5d;}}}}else{if(_0x2651d0&&gameCanvas?.[_0x5e22c3(0x1b1)]>0x0){if(isTwoPlayerMode&&selectedGameMode===_0x5e22c3(0x273)){const _0x126c43=ship1&&player1Lives>0x0,_0x2d2e0f=ship2&&player2Lives>0x0;if(_0x126c43&&_0x2d2e0f){if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e22c3(0x28b)){const _0x6237ba=gameCanvas[_0x5e22c3(0x1b1)]/0x2-gameCanvas[_0x5e22c3(0x1b1)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x1bb2c1=gameCanvas[_0x5e22c3(0x1b1)]/0x2+gameCanvas[_0x5e22c3(0x1b1)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2['x']=_0x1bb2c1,ship2[_0x5e22c3(0x1ad)]=_0x1bb2c1,smoothedShip2X=_0x1bb2c1);}}else{if(_0x126c43&&ship1){const _0x2a4cc5=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x4f4613=Math[_0x5e22c3(0x29f)](gameCanvas[_0x5e22c3(0x1b1)]/0x2-_0x2a4cc5/0x2);ship1['x']=_0x4f4613,ship1[_0x5e22c3(0x1ad)]=_0x4f4613,ship2&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e22c3(0x28b)&&(ship2[_0x5e22c3(0x1ad)]=ship2['x'],smoothedShip2X=ship2['x']);}else{if(_0x2d2e0f&&ship2){const _0x77d0d8=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x5794d6=Math[_0x5e22c3(0x29f)](gameCanvas[_0x5e22c3(0x1b1)]/0x2-_0x77d0d8/0x2);ship2['x']=_0x5794d6,ship2[_0x5e22c3(0x1ad)]=_0x5794d6;if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e22c3(0x28b))smoothedShip2X=_0x5794d6;ship1&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e22c3(0x28b)&&(ship1[_0x5e22c3(0x1ad)]=ship1['x']);}}}}else{if((!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x5e22c3(0x1e9)&&currentPlayer===0x2)&&ship){const _0x157a81=isDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH;ship['x']=Math['round'](gameCanvas[_0x5e22c3(0x1b1)]/0x2-_0x157a81/0x2),ship[_0x5e22c3(0x1ad)]=ship['x'];if(isPlayerTwoAI&&selectedGameMode===_0x5e22c3(0x1e9)&&currentPlayer===0x2)smoothedShipX=ship['x'];else{if(!isManualControl)smoothedShipX=ship['x'];}}}}}let _0x2aa213=![];if(selectedGameMode===_0x5e22c3(0x273)&&level===0x1&&coopPlayersReadyStartTime>0x0){_0x2aa213=!![];if(isShowingCoopPlayersReady){if(_0x4d5956-coopPlayersReadyStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x5e22c3(0x1b8))updateExplosions();}if(_0x4d5956>=coopPlayersReadyStartTime+0xbb8){isShowingCoopPlayersReady=![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e22c3(0x28b)?(isShowingIntro=!![],introStep=0x2,introDisplayStartTime=_0x4d5956):(isShowingIntro=!![],introStep=0x1,introDisplayStartTime=_0x4d5956);}}else{if(isShowingIntro){if(_0x4d5956-introDisplayStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x5e22c3(0x1b8))updateExplosions();}let _0xee5843=INTRO_DURATION_PER_STEP;introStep===0x1&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&(_0xee5843=TWO_PLAYER_STAGE_INTRO_DURATION);if(_0x4d5956>=introDisplayStartTime+_0xee5843){if(introStep===0x1&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e22c3(0x28b))){introStep=0x2,introDisplayStartTime=_0x4d5956,explosions=[];if(typeof updateExplosions===_0x5e22c3(0x1b8))updateExplosions();}else{isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();_0x2aa213=![],coopPlayersReadyStartTime=0x0;}}}else _0x2aa213=![],coopPlayersReadyStartTime=0x0;}if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e22c3(0x28b))handlePlayerInput();if(typeof moveEntities==='function')moveEntities();renderGame();if(_0x2aa213)return;}if(selectedGameMode===_0x5e22c3(0x273)&&level===0x1&&!gameJustStartedAndWaveLaunched&&coopPlayersReadyStartTime===0x0&&gameJustStarted){if(isFullGridWave)startFullGridWave();else{if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x5e22c3(0x2c5)]>0x0)scheduleEntranceFlightWave();else isWaveTransitioning=!![],readyForNextWaveReset=!![];}}gameJustStartedAndWaveLaunched=!![],gameJustStarted=![];}if(isShowingPlayerGameOverMessage&&isTwoPlayerMode&&selectedGameMode==='normal'){if(_0x4d5956-playerGameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(_0x4d5956-playerGameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION){isShowingPlayerGameOverMessage=![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();const _0x53e2d1=playerWhoIsGameOver;playerWhoIsGameOver=0x0;if(nextActionAfterPlayerGameOver===_0x5e22c3(0x225))switchPlayerTurn()?(_0x53e2d1===0x2&&currentPlayer===0x1&&player1CompletedLevel===level&&(level++,player1CompletedLevel=-0x1,player1MaxLevelReached=Math[_0x5e22c3(0x27d)](player1MaxLevelReached,level)),resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![]):triggerFinalGameOverSequence();else nextActionAfterPlayerGameOver===_0x5e22c3(0x283)?triggerFinalGameOverSequence():triggerFinalGameOverSequence();renderGame();return;}else{renderGame();return;}}if(isTwoPlayerMode&&selectedGameMode==='coop'){let _0x506732=![],_0x305002=![];if(isPlayer1ShowingGameOverMessage){if(_0x4d5956-player1GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x5e22c3(0x1b8))updateExplosions();}if(_0x4d5956-player1GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer1ShowingGameOverMessage=![],_0x506732=!![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();}}if(isPlayer2ShowingGameOverMessage){if(_0x4d5956-player2GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x5e22c3(0x1b8))updateExplosions();}if(_0x4d5956-player2GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer2ShowingGameOverMessage=![],_0x305002=!![],explosions=[];if(typeof updateExplosions===_0x5e22c3(0x1b8))updateExplosions();}}if(_0x506732||_0x305002){player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')handlePlayerInput();if(typeof moveEntities===_0x5e22c3(0x1b8))moveEntities();renderGame();if(gameOverSequenceStartTime>0x0||player1Lives>0x0||player2Lives>0x0)return;}else{if(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage){if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e22c3(0x28b))handlePlayerInput();if(typeof moveEntities===_0x5e22c3(0x1b8))moveEntities();renderGame();return;}}}if(isShowingCaptureMessage){if(_0x4d5956-captureMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x5e22c3(0x1b8))updateExplosions();}const _0x5822fd=enemies['find'](_0x2e9e43=>_0x2e9e43['id']===capturedBossIdWithMessage);if(_0x5822fd&&_0x5822fd['state']===_0x5e22c3(0x2a7)){const _0x16d607=_0x4d5956-captureMessageStartTime,_0x40da3e=Math['min'](0x1,_0x16d607/CAPTURE_MESSAGE_DURATION);_0x5822fd[_0x5e22c3(0x2ab)]=_0x40da3e*0x2*(0x2*Math['PI']);}else _0x5822fd&&(_0x5822fd[_0x5e22c3(0x2ab)]=0x0);if(isInGameState&&!isShowingPlayerGameOverMessage&&!isPlayer1ShowingGameOverMessage&&!isPlayer2ShowingGameOverMessage&&gameOverSequenceStartTime===0x0){if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e22c3(0x28b))handlePlayerInput();if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')aiControlCoop();else isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2&&aiControl();if(typeof moveEntities===_0x5e22c3(0x1b8))moveEntities();updateExplosions(),updateFloatingScores();}if(_0x4d5956-captureMessageStartTime>=CAPTURE_MESSAGE_DURATION){isShowingCaptureMessage=![],explosions=[];if(typeof updateExplosions===_0x5e22c3(0x1b8))updateExplosions();stopSound('shipCapturedSound'),captureBeamActive=![];if(_0x5822fd&&_0x5822fd[_0x5e22c3(0x1ae)]===_0x5e22c3(0x2a7)){_0x5822fd[_0x5e22c3(0x1ae)]='returning',_0x5822fd[_0x5e22c3(0x2ab)]=0x0;try{const _0x3944e0=_0x5822fd['type']===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH,{x:_0x1f2e0f,y:_0x7cbbd9}=getCurrentGridSlotPosition(_0x5822fd[_0x5e22c3(0x246)],_0x5822fd['gridCol'],_0x3944e0);_0x5822fd[_0x5e22c3(0x19b)]=_0x1f2e0f,_0x5822fd['targetGridY']=_0x7cbbd9;}catch(_0x1a3bf4){console[_0x5e22c3(0x1a4)](_0x5e22c3(0x1dd)+_0x5822fd['id']+':',_0x1a3bf4),_0x5822fd[_0x5e22c3(0x19b)]=gameCanvas[_0x5e22c3(0x1b1)]/0x2,_0x5822fd['targetGridY']=ENEMY_TOP_MARGIN;}}else _0x5822fd&&(_0x5822fd[_0x5e22c3(0x2ab)]=0x0);capturedBossIdWithMessage=null;const _0x49fe3c=gameCanvas?gameCanvas[_0x5e22c3(0x276)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;if(isTwoPlayerMode&&selectedGameMode===_0x5e22c3(0x273)){if(player1NeedsRespawnAfterCapture&&player1Lives>0x0){ship1={'x':player1CaptureRespawnX,'y':_0x49fe3c,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player1CaptureRespawnX,'id':'p1'},isPlayer1ShipCaptured=![],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x4d5956+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=![],player1NeedsRespawnAfterCapture=![],player1CaptureRespawnX=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e22c3(0x28b))smoothedShip1X=ship1['x'];}if(player2NeedsRespawnAfterCapture&&player2Lives>0x0){ship2={'x':player2CaptureRespawnX,'y':_0x49fe3c,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player2CaptureRespawnX,'id':'p2'},isPlayer2ShipCaptured=![],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x4d5956+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=![],player2NeedsRespawnAfterCapture=![],player2CaptureRespawnX=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e22c3(0x28b))smoothedShip2X=ship2['x'];}if(player1Lives<=0x0&&player2Lives<=0x0){if(gameOverSequenceStartTime===0x0)triggerFinalGameOverSequence();}}else{if(!isManualControl&&!isPlayerTwoAI){if(isShipCaptured&&playerLives>0x0){let _0x4de16c=gameCanvas?gameCanvas[_0x5e22c3(0x1b1)]/0x2-SHIP_WIDTH/0x2:0xc8;if(typeof smoothedShipX===_0x5e22c3(0x1d1))_0x4de16c=smoothedShipX;ship={'x':_0x4de16c,'y':_0x49fe3c,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x4de16c,'id':'main'},isShipCaptured=![],isInvincible=!![],invincibilityEndTime=_0x4d5956+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=![],aiNeedsStabilization=!![];if(smoothedShipX===undefined&&ship)smoothedShipX=ship['x'];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isManualControl){if(isShipCaptured&&playerLives>0x0){let _0x451631=capturedShipRespawnX_NormalMode!==0x0?capturedShipRespawnX_NormalMode:gameCanvas?gameCanvas['width']/0x2-SHIP_WIDTH/0x2:0xc8;ship={'x':_0x451631,'y':_0x49fe3c,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x451631,'id':_0x5e22c3(0x241)},isShipCaptured=![],capturedShipRespawnX_NormalMode=0x0,isInvincible=!![],invincibilityEndTime=_0x4d5956+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x4d5956+RESPAWN_DELAY_MS;if(isPlayerTwoAI&&selectedGameMode===_0x5e22c3(0x1e9)&&currentPlayer===0x2)aiNeedsStabilization=!![];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&((!isTwoPlayerMode||isTwoPlayerMode&&selectedGameMode===_0x5e22c3(0x1e9)&&(currentPlayer===0x1&&player2Lives<=0x0||currentPlayer===0x2&&player1Lives<=0x0))&&triggerFinalGameOverSequence());}}}}renderGame();return;}const _0x23204e=!(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage||isShowingPlayerGameOverMessage),_0x51bc96=isShowingIntro&&!_0x2aa213&&!(selectedGameMode===_0x5e22c3(0x273)&&level===0x1);if(!_0x2aa213&&gameOverSequenceStartTime===0x0&&_0x36c71b&&!isShowingCaptureMessage&&_0x23204e){if(isInGameState&&!_0x51bc96){if(!(_0x2651d0&&!isManualControl)){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e22c3(0x28b))aiControlCoop();else{if(isPlayerTwoAI&&selectedGameMode===_0x5e22c3(0x1e9)&&currentPlayer===0x2)aiControl();else!isManualControl&&!isPlayerTwoAI&&aiControl();}}isManualControl&&handlePlayerInput();}}isTwoPlayerMode&&selectedGameMode===_0x5e22c3(0x273)?(isPlayer1Invincible&&_0x4d5956>=player1InvincibilityEndTime&&(isPlayer1Invincible=![],player1InvincibilityEndTime=0x0),isPlayer2Invincible&&_0x4d5956>=player2InvincibilityEndTime&&(isPlayer2Invincible=![],player2InvincibilityEndTime=0x0)):(isInvincible&&_0x4d5956>=invincibilityEndTime&&(isInvincible=![],invincibilityEndTime=0x0),isWaitingForRespawn&&_0x4d5956>=respawnTime&&(isWaitingForRespawn=![]));const _0x394255=showExtraLifeMessage&&_0x4d5956-extraLifeMessageStartTime<0x64;if(_0x394255&&(isWaveTransitioning||isChallengingStage&&enemies[_0x5e22c3(0x2c5)]===0x0)){}if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&isChallengingStage&&enemies['length']===0x0&&!isCsCompletionDelayActive&&!showCsBonusScoreMessage&&!showPerfectMessage&&gameCanvas&&gameCanvas[_0x5e22c3(0x1b1)]>0x0){const _0x6f3a57=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage,_0x4e3b82=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage;if(_0x6f3a57&&!_0x4e3b82){const _0x2503a0=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x5a040f=Math[_0x5e22c3(0x29f)](gameCanvas[_0x5e22c3(0x1b1)]/0x2-_0x2503a0/0x2);ship1['x']=_0x5a040f,ship1[_0x5e22c3(0x1ad)]=_0x5a040f,smoothedShip1X=_0x5a040f;}else{if(_0x4e3b82&&!_0x6f3a57){const _0x168163=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x30b923=Math[_0x5e22c3(0x29f)](gameCanvas[_0x5e22c3(0x1b1)]/0x2-_0x168163/0x2);ship2['x']=_0x30b923,ship2[_0x5e22c3(0x1ad)]=_0x30b923,smoothedShip2X=_0x30b923;}}}if(isCsCompletionDelayActive&&_0x23204e&&gameOverSequenceStartTime===0x0){if(_0x4d5956-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY+EXPLOSION_DURATION){isCsCompletionDelayActive=![],csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies;csCompletionResultIsPerfect?(playSound(_0x5e22c3(0x1be),![],0.6),showCsHitsMessage=!![],csHitsMessageStartTime=_0x4d5956):(playSound(_0x5e22c3(0x200),![],0.6),showCSClearMessage=!![],csClearMessageStartTime=_0x4d5956);bullets=[],enemyBullets=[],renderGame();return;}else{if(_0x4d5956-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY&&explosions[_0x5e22c3(0x2c5)]>0x0){updateExplosions(),renderGame();return;}else{if(_0x4d5956-csCompletionDelayStartTime<CS_COMPLETION_MESSAGE_DELAY){renderGame();return;}}}}let _0x954942=![],_0x28ffb8=![];if(_0x23204e&&gameOverSequenceStartTime===0x0&&!isShowingCoopPlayersReady&&!_0x2aa213){if(showCsHitsMessage){if(_0x4d5956-csHitsMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x5e22c3(0x1b8))updateExplosions();}if(Date['now']()-csHitsMessageStartTime>CS_HITS_MESSAGE_DURATION){showCsHitsMessage=![],showPerfectMessage=!![],perfectMessageStartTime=_0x4d5956,explosions=[];if(typeof updateExplosions===_0x5e22c3(0x1b8))updateExplosions();}_0x28ffb8=!![];}else{if(showPerfectMessage){if(_0x4d5956-perfectMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x5e22c3(0x1b8))updateExplosions();}if(Date[_0x5e22c3(0x2c7)]()-perfectMessageStartTime>CS_PERFECT_MESSAGE_DURATION){showPerfectMessage=![],showCsBonusScoreMessage=!![],csBonusScoreMessageStartTime=_0x4d5956,explosions=[];if(typeof updateExplosions===_0x5e22c3(0x1b8))updateExplosions();}_0x28ffb8=!![];}else{if(showCsBonusScoreMessage){if(_0x4d5956-csBonusScoreMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x5e22c3(0x1b8))updateExplosions();}if(Date[_0x5e22c3(0x2c7)]()-csBonusScoreMessageStartTime>CS_BONUS_MESSAGE_DURATION){showCsBonusScoreMessage=![],_0x954942=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions===_0x5e22c3(0x1b8))updateExplosions();}_0x28ffb8=!![];}else{if(showCSClearMessage){if(_0x4d5956-csClearMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x5e22c3(0x1b8))updateExplosions();}Date[_0x5e22c3(0x2c7)]()-csClearMessageStartTime>=CS_CLEAR_HITS_DELAY&&!showCsHitsForClearMessage&&(showCsHitsForClearMessage=!![]);Date[_0x5e22c3(0x2c7)]()-csClearMessageStartTime>=CS_CLEAR_SCORE_DELAY&&!showCsScoreForClearMessage&&(showCsScoreForClearMessage=!![]);if(Date[_0x5e22c3(0x2c7)]()-csClearMessageStartTime>=CS_CLEAR_DELAY){showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],_0x954942=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions===_0x5e22c3(0x1b8))updateExplosions();}_0x28ffb8=!![];}else{if(showExtraLifeMessage)Date[_0x5e22c3(0x2c7)]()-extraLifeMessageStartTime>EXTRA_LIFE_MESSAGE_DURATION&&(showExtraLifeMessage=![]),_0x28ffb8=!![];else{if(showReadyMessage){if(_0x4d5956-readyMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(Date[_0x5e22c3(0x2c7)]()-readyMessageStartTime>READY_MESSAGE_DURATION){showReadyMessage=![],_0x954942=!![],explosions=[];if(typeof updateExplosions===_0x5e22c3(0x1b8))updateExplosions();}_0x28ffb8=!![];}}}}}}}if(_0x28ffb8&&!_0x954942&&!isShowingCoopPlayersReady&&!_0x2aa213&&!isShowingCaptureMessage&&_0x23204e){if(!((_0x2651d0||showCsHitsMessage||showCSClearMessage)&&isManualControl)&&!showExtraLifeMessage){renderGame();return;}}if(_0x51bc96&&_0x23204e&&gameOverSequenceStartTime===0x0){let _0x4f22a3=![];const _0x43efd0=_0x4d5956-introDisplayStartTime;let _0x1a1fdb=INTRO_DURATION_PER_STEP;const _0x334420=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e22c3(0x26f),_0x240507=isTwoPlayerMode&&selectedGameMode==='normal'&&!isPlayerTwoAI;(_0x240507||_0x334420)&&(_0x1a1fdb=TWO_PLAYER_STAGE_INTRO_DURATION);if(introStep===0x1){if(_0x43efd0<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}let _0x2a5f57=null,_0x2692a3=0x1;if(!playerIntroSoundPlayed){const _0x5f420a=_0x334420||_0x240507,_0x2d3dd4=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e22c3(0x28b)&&level>0x1;if(_0x5f420a){if(currentPlayer===0x1&&level===0x1&&!initialGameStartSoundPlayedThisSession)_0x2a5f57='startSound',_0x2692a3=0.4;else(currentPlayer===0x2||level>0x1)&&(_0x2a5f57='levelUpSound',_0x2692a3=0.2);}else{if(_0x2d3dd4)_0x2a5f57=_0x5e22c3(0x269),_0x2692a3=0.2;else{if(!isTwoPlayerMode){if(level===0x1&&!initialGameStartSoundPlayedThisSession)_0x2a5f57=_0x5e22c3(0x19f),_0x2692a3=0.4;else level>0x1&&(_0x2a5f57='levelUpSound',_0x2692a3=0.2);}}}}_0x2a5f57&&(playSound(_0x2a5f57,![],_0x2692a3),playerIntroSoundPlayed=!![],_0x2a5f57===_0x5e22c3(0x19f)&&(initialGameStartSoundPlayedThisSession=!![]));if(_0x43efd0>=_0x1a1fdb){if(isChallengingStage)introStep=0x3;else introStep=0x2;introDisplayStartTime=_0x4d5956,explosions=[];if(typeof updateExplosions===_0x5e22c3(0x1b8))updateExplosions();}}else{if(introStep===0x2){if(_0x43efd0<0x64){explosions=[];if(typeof updateExplosions===_0x5e22c3(0x1b8))updateExplosions();}if(!stageIntroSoundPlayed){if(playLevelUpAfterCSBonus&&(isTwoPlayerMode&&selectedGameMode===_0x5e22c3(0x273)))playSound(_0x5e22c3(0x269),![],0.2),playLevelUpAfterCSBonus=![],stageIntroSoundPlayed=!![];else{if(isTwoPlayerMode&&selectedGameMode===_0x5e22c3(0x273)&&!isPlayerTwoAI&&!isCoopAIDemoActive)playSound(_0x5e22c3(0x269),![],0.2),stageIntroSoundPlayed=!![];else{if(selectedGameMode===_0x5e22c3(0x273)){if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e22c3(0x28b))&&level>0x1)playSound(_0x5e22c3(0x269),![],0.2),stageIntroSoundPlayed=!![];else(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&level===0x1&&(stageIntroSoundPlayed=!![]);}else{if(!isTwoPlayerMode&&level>0x1)playSound(_0x5e22c3(0x269),![],0.2),stageIntroSoundPlayed=!![];else{if(level>0x1&&!playerIntroSoundPlayed&&!(isPlayerTwoAI&&selectedGameMode==='normal')&&!initialGameStartSoundPlayedThisSession)playSound('levelUpSound',![],0.2),stageIntroSoundPlayed=!![];else level===0x1&&!isManualControl&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode===_0x5e22c3(0x273))&&!initialGameStartSoundPlayedThisSession&&(playSound('startSound',![],0.4),initialGameStartSoundPlayedThisSession=!![],stageIntroSoundPlayed=!![]);}}}}}if(_0x43efd0>=_0x1a1fdb){_0x4f22a3=!![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();}}else{if(introStep===0x3){if(_0x43efd0<0x64){explosions=[];if(typeof updateExplosions===_0x5e22c3(0x1b8))updateExplosions();}!csIntroSoundPlayed&&(playSound(_0x5e22c3(0x21f),![],0.4),csIntroSoundPlayed=!![],stageIntroSoundPlayed=!![]);if(_0x43efd0>=_0x1a1fdb){_0x4f22a3=!![],explosions=[];if(typeof updateExplosions===_0x5e22c3(0x1b8))updateExplosions();}}}}if(isInGameState&&_0x23204e&&gameOverSequenceStartTime===0x0&&gameCanvas){let _0x28a24b=null,_0x1c8a38=null;const _0x19ad23=isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e22c3(0x26f)&&currentPlayer===0x1&&isShowingIntro;if(_0x19ad23){let _0x1553d5=![],_0x559822=![];const _0xb50e9c=navigator[_0x5e22c3(0x2d1)]();if(connectedGamepadIndex!==null&&_0xb50e9c?.[connectedGamepadIndex]){const _0x4c4c64=_0xb50e9c[connectedGamepadIndex],_0x2315b5=processSingleController(_0x4c4c64,previousGameButtonStates);_0x1553d5=_0x2315b5['left'],_0x559822=_0x2315b5[_0x5e22c3(0x282)];}_0x28a24b=keyboardP1LeftDown||_0x1553d5,_0x1c8a38=keyboardP1RightDown||_0x559822;}if(_0x334420&&currentPlayer===0x2)aiControl();else{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e22c3(0x28b))aiControlCoop();else!isManualControl&&!isPlayerTwoAI&&aiControl();}typeof moveEntities==='function'&&moveEntities(_0x28a24b,_0x1c8a38),updateExplosions(),updateFloatingScores();}if(_0x4f22a3){isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![];isManualControl&&(isShowingDemoText=![]);if(!isChallengingStage)isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e22c3(0x28b)?(aiShip1CanShootTime=Date[_0x5e22c3(0x2c7)]()+0x3e8,aiShip2CanShootTime=Date[_0x5e22c3(0x2c7)]()+0x4b0):aiCanShootTime=Date['now']()+(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e22c3(0x26f)?0x3e8:0xbb8);else{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0;else aiCanShootTime=0x0;}const _0x29f988=level===0x1&&selectedGameMode!==_0x5e22c3(0x273),_0x4211b8=level===0x1&&selectedGameMode==='coop',_0x473106=_0x29f988&&!gameJustStartedAndWaveLaunched||level>0x1||isChallengingStage||_0x4211b8&&!gameJustStartedAndWaveLaunched;if(_0x473106){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x5e22c3(0x2c5)]>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound(_0x5e22c3(0x21f),![],0.4);}else isEntrancePhaseActive=![],stopSound('entranceSound'),isWaveTransitioning=!![],readyForNextWaveReset=!![],bullets=[],enemyBullets=[],explosions=[],setTimeout(()=>{const _0x3ac5ca=_0x5e22c3,_0x2d79a1=isTwoPlayerMode&&selectedGameMode===_0x3ac5ca(0x273)?player1Lives>0x0||player2Lives>0x0:playerLives>0x0;if((isInGameState||!isInGameState&&_0x2d79a1)&&typeof resetWaveInternal==='function'){if(_0x2d79a1)resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![];else triggerFinalGameOverSequence();}},0x64);}if(_0x29f988||level>0x1||isChallengingStage||_0x4211b8)gameJustStartedAndWaveLaunched=!![];}}isManualControl&&_0x51bc96&&_0x23204e&&gameOverSequenceStartTime===0x0&&handlePlayerInput();renderGame();return;}const _0x37d18a=!_0x2aa213&&!_0x51bc96&&!_0x954942&&!isShowingCaptureMessage;if(gameJustStarted&&_0x37d18a){if(!gameJustStartedAndWaveLaunched){const _0x42b3d1=selectedGameMode===_0x5e22c3(0x273)&&level===0x1&&coopPlayersReadyStartTime!==0x0;if(!_0x42b3d1){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x5e22c3(0x2c5)]>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound(_0x5e22c3(0x21f),![],0.4);}else isWaveTransitioning=!![],readyForNextWaveReset=!![];}gameJustStartedAndWaveLaunched=!![];}}gameJustStarted=![];}if(_0x37d18a&&isInGameState&&_0x23204e&&gameOverSequenceStartTime===0x0){if(!_0x2651d0||_0x2651d0&&isManualControl){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e22c3(0x28b))aiControlCoop();else{if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)aiControl();else!isManualControl&&!isPlayerTwoAI&&aiControl();}isManualControl&&handlePlayerInput();if(typeof moveEntities===_0x5e22c3(0x1b8))moveEntities();updateExplosions(),updateFloatingScores();}else _0x2651d0&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&(updateExplosions(),updateFloatingScores());}if(_0x37d18a&&_0x23204e&&gameOverSequenceStartTime===0x0){if(GRID_BREATH_ENABLED&&isInGameState&&!isChallengingStage&&!isWaveTransitioning&&_0x36c71b){const _0x49f695=enemies[_0x5e22c3(0x1fe)](_0x3e6fda=>_0x3e6fda?.[_0x5e22c3(0x1ae)]==='in_grid');if(_0x49f695&&isGridBreathingActive){const _0x4187ca=_0x4d5956-gridBreathStartTime,_0x237dd3=scaleValue(level,BASE_GRID_BREATH_CYCLE_MS,MIN_GRID_BREATH_CYCLE_MS),_0x4d5b3a=_0x4187ca%_0x237dd3;currentGridBreathFactor=(Math[_0x5e22c3(0x289)](_0x4d5b3a/_0x237dd3*Math['PI']*0x2-Math['PI']/0x2)+0x1)/0x2;}else{if(!_0x49f695&&isGridBreathingActive)isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0;else _0x49f695&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=_0x4d5956,currentGridBreathFactor=0x0);}}else isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if(isEntrancePhaseActive){const _0x19978c=enemiesSpawnedThisWave>=totalEnemiesScheduledForWave,_0x280b2d=enemies[_0x5e22c3(0x1fe)](_0x438922=>_0x438922?.[_0x5e22c3(0x1ae)]===_0x5e22c3(0x1b6)||_0x438922?.['state']===_0x5e22c3(0x29e)||_0x438922?.[_0x5e22c3(0x1ae)]===_0x5e22c3(0x242));if(totalEnemiesScheduledForWave>0x0&&_0x19978c&&!_0x280b2d){const _0x4ce021=isEntrancePhaseActive;isEntrancePhaseActive=![];if(_0x4ce021){stopSound(_0x5e22c3(0x21f)),enemiesSpawnedThisWave=0x0,totalEnemiesScheduledForWave=0x0,enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],gridJustCompleted=!![];if(!isChallengingStage&&!isFullGridWave){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e22c3(0x28b))coopAICaptureDiveAnticipationActive=!![],coopAICaptureDiveAnticipationEndTime=Date[_0x5e22c3(0x2c7)]()+COOP_AI_CAPTURE_DIVE_ANTICIPATION_DURATION_MS,typeof triggerImmediateCaptureDive===_0x5e22c3(0x1b8)&&triggerImmediateCaptureDive();else typeof triggerImmediateCaptureDive===_0x5e22c3(0x1b8)&&triggerImmediateCaptureDive();}}}}if(!isChallengingStage&&!_0x51bc96&&!isPaused&&!isWaveTransitioning)triggerGridFiring();if(!isWaveTransitioning&&_0x36c71b&&!_0x51bc96&&!isShowingCaptureMessage&&!isEntrancePhaseActive){let _0xfe0c95=enemies[_0x5e22c3(0x2c5)]===0x0,_0x30ebdb=fallingShips[_0x5e22c3(0x2c5)]===0x0,_0x46f209=![];if(isChallengingStage){if(_0xfe0c95&&!isEntrancePhaseActive)_0x46f209=!![];}else{if(_0xfe0c95&&!isEntrancePhaseActive&&_0x30ebdb)_0x46f209=!![];}if(_0x46f209){isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e22c3(0x28b))&&gameCanvas&&gameCanvas['width']>0x0){const _0x4c4c41=player1Lives,_0x5db8eb=player2Lives,_0x2ae44b=gameCanvas[_0x5e22c3(0x276)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(_0x4c4c41>0x0&&_0x5db8eb<=0x0&&ship1){const _0x2bf6f8=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x2b380=Math[_0x5e22c3(0x29f)](gameCanvas[_0x5e22c3(0x1b1)]/0x2-_0x2bf6f8/0x2);ship1['x']=_0x2b380,ship1['targetX']=_0x2b380,smoothedShip1X=_0x2b380,ship1['y']=_0x2ae44b;}else{if(_0x5db8eb>0x0&&_0x4c4c41<=0x0&&ship2){const _0x43c383=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x1254e0=Math[_0x5e22c3(0x29f)](gameCanvas[_0x5e22c3(0x1b1)]/0x2-_0x43c383/0x2);ship2['x']=_0x1254e0,ship2['targetX']=_0x1254e0,smoothedShip2X=_0x1254e0,ship2['y']=_0x2ae44b;}}}isWaveTransitioning=!![];isGridSoundPlaying&&(stopSound(_0x5e22c3(0x220)),isGridSoundPlaying=![]);!isChallengingStage&&(bullets=[],enemyBullets=[]);floatingScores=[],enemySpawnTimeouts[_0x5e22c3(0x1f1)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;let _0x5929cc;if(isChallengingStage){csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,setTimeout(()=>{const _0x2ec462=_0x5e22c3;if(isWaveTransitioning){explosions=[];if(typeof updateExplosions===_0x2ec462(0x1b8))updateExplosions();isCsCompletionDelayActive=!![],csCompletionDelayStartTime=Date[_0x2ec462(0x2c7)]();}},EXPLOSION_DURATION);if(csCompletionResultIsPerfect){let _0x21c782=0x2710;if(isTwoPlayerMode&&selectedGameMode===_0x5e22c3(0x273))(player1Lives>0x0||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e22c3(0x28b))&&ship1)&&(player1Score+=_0x21c782),(player2Lives>0x0||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e22c3(0x28b))&&ship2)&&(player2Score+=_0x21c782),highScore=Math[_0x5e22c3(0x27d)](highScore,player1Score,player2Score),checkAndAwardExtraLife(null);else{score+=_0x21c782;if(!isTwoPlayerMode)player1Score=score;else{if(isTwoPlayerMode&&selectedGameMode==='normal'){if(currentPlayer===0x1)player1Score=score;else player2Score=score;}}highScore=Math[_0x5e22c3(0x27d)](highScore,score,player1Score,player2Score),checkAndAwardExtraLife(currentPlayer);}_0x5929cc=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_HITS_MESSAGE_DURATION+CS_PERFECT_MESSAGE_DURATION+CS_BONUS_MESSAGE_DURATION;}else isTwoPlayerMode&&selectedGameMode===_0x5e22c3(0x273)?checkAndAwardExtraLife(null):checkAndAwardExtraLife(currentPlayer),_0x5929cc=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_CLEAR_DELAY;_0x5929cc+=0x64;}else playSound('waveUpSound',![],0.8),normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,_0x5929cc=POST_MESSAGE_RESET_DELAY;setTimeout(()=>{const _0x128cdb=_0x5e22c3;let _0x498451=![],_0x2f139b=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x128cdb(0x1e9)){_0x2f139b=currentPlayer;_0x2f139b===0x1?player1MaxLevelReached=Math[_0x128cdb(0x27d)](player1MaxLevelReached,level):player2MaxLevelReached=Math[_0x128cdb(0x27d)](player2MaxLevelReached,level);const _0x4cc08c=switchPlayerTurn();if(_0x4cc08c){if(_0x2f139b===0x2&&currentPlayer===0x1&&player1CompletedLevel===level)_0x498451=!![],player1CompletedLevel=-0x1;else _0x2f139b===0x1?(player1CompletedLevel=level,_0x498451=![]):_0x498451=![];}else _0x498451=!![],player1CompletedLevel=-0x1;}else{_0x498451=!![];if(!isTwoPlayerMode)player1MaxLevelReached=Math[_0x128cdb(0x27d)](player1MaxLevelReached,level);else{if(isTwoPlayerMode&&selectedGameMode===_0x128cdb(0x273)){if(player1Lives>0x0)player1MaxLevelReached=Math['max'](player1MaxLevelReached,level);if(player2Lives>0x0)player2MaxLevelReached=Math['max'](player2MaxLevelReached,level);}}}if(_0x498451){level++;if(isTwoPlayerMode&&selectedGameMode===_0x128cdb(0x273)){if(player1Lives>0x0)player1MaxLevelReached=Math[_0x128cdb(0x27d)](player1MaxLevelReached,level);if(player2Lives>0x0)player2MaxLevelReached=Math[_0x128cdb(0x27d)](player2MaxLevelReached,level);}else{if(isTwoPlayerMode&&selectedGameMode===_0x128cdb(0x1e9)){if(currentPlayer===0x1&&player1Lives>0x0)player1MaxLevelReached=Math['max'](player1MaxLevelReached,level);else{if(currentPlayer===0x2&&player2Lives>0x0)player2MaxLevelReached=Math[_0x128cdb(0x27d)](player2MaxLevelReached,level);}}else{if(playerLives>0x0)player1MaxLevelReached=Math[_0x128cdb(0x27d)](player1MaxLevelReached,level);}}}let _0x217904=![];if(isTwoPlayerMode&&selectedGameMode===_0x128cdb(0x273))_0x217904=player1Lives>0x0||player2Lives>0x0;else{if(isTwoPlayerMode&&selectedGameMode===_0x128cdb(0x1e9))_0x217904=(currentPlayer===0x1?player1Lives:player2Lives)>0x0;else _0x217904=playerLives>0x0;}_0x217904?(resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![]):triggerFinalGameOverSequence();},_0x5929cc),renderGame();return;}if(!isChallengingStage){if(enemies[_0x5e22c3(0x2c5)]>0x0){let _0x5a19e0=null;const _0x37bdda=enemies[_0x5e22c3(0x2a2)](_0x33a538=>_0x33a538?.['state']===_0x5e22c3(0x1bb)),_0x43b627=_0x37bdda[_0x5e22c3(0x2c5)]<=0x3,_0xa7148e=Math[_0x5e22c3(0x27d)](0x1,Math[_0x5e22c3(0x204)](level,LEVEL_CAP_FOR_SCALING)),_0xad5c29=0x1068,_0x3ed392=0x320,_0x3772cb=(_0xa7148e-0x1)*((_0xad5c29-_0x3ed392)/(LEVEL_CAP_FOR_SCALING-0x1)),_0x4f7e81=Math[_0x5e22c3(0x27d)](_0x3ed392,_0xad5c29-_0x3772cb),_0x3c0a65=Math[_0x5e22c3(0x29f)](scaleValue(level,BASE_MAX_ATTACKING_ENEMIES,MAX_MAX_ATTACKING_ENEMIES)),_0x41f8db=enemies[_0x5e22c3(0x2a2)](_0x209824=>_0x209824?.[_0x5e22c3(0x1ae)]===_0x5e22c3(0x287)||_0x209824?.[_0x5e22c3(0x1ae)]===_0x5e22c3(0x1c2))[_0x5e22c3(0x2c5)];if(_0x43b627||_0x4d5956-lastEnemyDetachTime>_0x4f7e81&&_0x37bdda[_0x5e22c3(0x2c5)]>0x0&&_0x41f8db<_0x3c0a65){_0x5a19e0=findAndDetachEnemy();if(_0x5a19e0&&_0x5a19e0[_0x5e22c3(0x2c5)]>0x0){const _0x9171ba=_0x5a19e0['map'](_0x251494=>enemies[_0x5e22c3(0x23e)](_0x1c2165=>_0x1c2165?.['id']===_0x251494['id']))[_0x5e22c3(0x2a2)](_0x1ccbb2=>_0x1ccbb2&&_0x1ccbb2['state']===_0x5e22c3(0x1bb));if(_0x9171ba[_0x5e22c3(0x2c5)]>0x0){const _0x54fc99=_0x9171ba[0x0],_0x3e8e28=_0x54fc99[_0x5e22c3(0x1a3)];if(!_0x43b627)lastEnemyDetachTime=_0x4d5956;if(_0x3e8e28==='normal'){const _0x359dfe=generateAttackPathInternal(_0x54fc99);if(_0x359dfe&&_0x359dfe[_0x5e22c3(0x2c5)]>0x0){if(_0x9171ba[_0x5e22c3(0x2c5)]===0x3&&_0x54fc99[_0x5e22c3(0x239)]===ENEMY3_TYPE&&level!==0x1)playSound('tripleAttackSound',![],0.3);let _0x5e3e21=[..._0x9171ba];const _0x1a36ba=_0x5e3e21['length'];if(_0x1a36ba>0x1){let _0x1b1e6a=null,_0x325874=[];_0x5e3e21[_0x5e22c3(0x1f1)](_0x30e7c7=>{if(_0x30e7c7['type']===ENEMY3_TYPE)_0x1b1e6a=_0x30e7c7;else _0x325874['push'](_0x30e7c7);});if(_0x1b1e6a&&level!==0x1&&_0x1a36ba===0x3&&_0x325874[_0x5e22c3(0x2c5)]===0x2)_0x5e3e21=[_0x325874[0x0],_0x1b1e6a,_0x325874[0x1]];else _0x5e3e21[_0x5e22c3(0x1cc)]((_0x11081b,_0x291066)=>(_0x11081b?.[_0x5e22c3(0x26d)]??0x0)-(_0x291066?.['gridCol']??0x0));const _0xa6084c=0x5;let _0x287510=0x0;_0x5e3e21=_0x5e3e21[_0x5e22c3(0x2a2)](_0x40c5c3=>_0x40c5c3&&typeof _0x40c5c3[_0x5e22c3(0x1b1)]===_0x5e22c3(0x1d1));const _0x278393=_0x5e3e21[_0x5e22c3(0x2c5)];for(let _0x52e327=0x0;_0x52e327<_0x278393;_0x52e327++){_0x287510+=_0x5e3e21[_0x52e327][_0x5e22c3(0x1b1)];if(_0x52e327<_0x278393-0x1)_0x287510+=_0xa6084c;}const _0x2de258=-_0x287510/0x2;let _0x49ccac=_0x2de258;for(let _0x11f69b=0x0;_0x11f69b<_0x278393;_0x11f69b++){const _0x55d7cd=_0x5e3e21[_0x11f69b];_0x55d7cd[_0x5e22c3(0x264)]=_0x49ccac+_0x55d7cd[_0x5e22c3(0x1b1)]/0x2,_0x49ccac+=_0x55d7cd[_0x5e22c3(0x1b1)]+_0xa6084c;}}else _0x5e3e21[_0x5e22c3(0x1f1)](_0x497b4f=>_0x497b4f[_0x5e22c3(0x264)]=0x0);const _0x4c6a2a=_0x5e22c3(0x20d)+_0x54fc99['id']+'-'+_0x4d5956;_0x5e3e21['forEach'](_0x1c9def=>{const _0x493c6f=_0x5e22c3;if(_0x1c9def)_0x1c9def[_0x493c6f(0x25d)]=_0x4c6a2a;});let _0x539d92=![],_0x1a407a=GROUP_FIRE_BURST_DELAY;if(_0x54fc99[_0x5e22c3(0x239)]===ENEMY2_TYPE||_0x54fc99[_0x5e22c3(0x239)]===ENEMY3_TYPE){_0x539d92=!![];if(_0x54fc99[_0x5e22c3(0x239)]===ENEMY2_TYPE&&_0x1a36ba===0x1)_0x1a407a=SOLO_BUTTERFLY_FIRE_DELAY;}else{if(_0x54fc99[_0x5e22c3(0x239)]===ENEMY1_TYPE)_0x539d92=!![];}if(_0x43b627&&level>0x1)_0x539d92=![];_0x539d92&&_0x5e3e21[_0x5e22c3(0x1f1)](_0x2948b4=>{const _0x5e718a=_0x5e22c3,_0x22d548=_0x2948b4&&!(_0x2948b4[_0x5e718a(0x239)]===ENEMY3_TYPE&&_0x2948b4[_0x5e718a(0x20a)]);if(_0x22d548)fireEnemyBurst(_0x2948b4['id'],_0x5e718a(0x287),_0x1a407a);}),_0x5e3e21[_0x5e22c3(0x1f1)]((_0x57b87d,_0x43c725)=>{const _0x385c3c=_0x5e22c3;_0x57b87d&&_0x57b87d[_0x385c3c(0x1ae)]===_0x385c3c(0x1bb)&&(_0x57b87d[_0x385c3c(0x1ae)]='preparing_attack',_0x57b87d[_0x385c3c(0x1cb)]=![],_0x57b87d[_0x385c3c(0x1ba)]=0x0,_0x57b87d['velocityY']=0x0,_0x57b87d[_0x385c3c(0x271)]=![],setTimeout(()=>{const _0x19e399=_0x385c3c;if(isPaused)return;const _0x40ec97=enemies[_0x19e399(0x23e)](_0x7f9304=>_0x7f9304?.['id']===_0x57b87d['id']);if(_0x40ec97&&_0x40ec97['state']===_0x19e399(0x1c2))try{const _0x411c1d=scaleValue(level,BASE_ENEMY_ATTACK_SPEED,MAX_ENEMY_ATTACK_SPEED);let _0x2d7e7c=0x1;if(_0x40ec97['type']===ENEMY1_TYPE)_0x2d7e7c=ENEMY1_DIVE_SPEED_FACTOR;else{if(_0x40ec97['type']===ENEMY2_TYPE)_0x2d7e7c=ENEMY2_DIVE_SPEED_FACTOR;else{if(_0x40ec97[_0x19e399(0x239)]===ENEMY3_TYPE)_0x2d7e7c=ENEMY3_ATTACK_SPEED_FACTOR;}}if(_0x57b87d['type']===ENEMY3_TYPE)playSound(_0x19e399(0x228),![],0.2);else playSound(_0x19e399(0x19c),![],0.2);_0x40ec97[_0x19e399(0x1ae)]=_0x19e399(0x287),_0x40ec97['attackPathSegments']=_0x359dfe,_0x40ec97[_0x19e399(0x1a9)]=0x0,_0x40ec97[_0x19e399(0x216)]=0x0,_0x40ec97[_0x19e399(0x274)]=_0x411c1d*_0x2d7e7c,_0x40ec97[_0x19e399(0x22e)]=0x0,_0x40ec97[_0x19e399(0x271)]=!![];}catch(_0x4c6951){console[_0x19e399(0x1a4)]('Error\x20starting\x20attack\x20for\x20'+_0x57b87d['id']+':',_0x4c6951);}},_0x43c725*GROUP_DETACH_DELAY_MS));});}else _0x5a19e0[_0x5e22c3(0x1f1)](_0x150a1a=>{const _0x5551fc=_0x5e22c3;if(_0x150a1a)_0x150a1a[_0x5551fc(0x1cb)]=![];});}}}}}}enemies['forEach'](_0x1bfb8b=>{const _0x380e18=_0x5e22c3;if(_0x1bfb8b&&_0x1bfb8b[_0x380e18(0x239)]===ENEMY3_TYPE&&_0x1bfb8b['hasCapturedShip']&&_0x1bfb8b[_0x380e18(0x1ae)]==='attacking'&&_0x1bfb8b['capturedShipDimensions']&&typeof _0x1bfb8b[_0x380e18(0x270)]===_0x380e18(0x1d1)){if(_0x4d5956-_0x1bfb8b['capturedShipLastFiredTime']>CAPTURED_SHIP_FIRE_COOLDOWN_MS){const _0x2b8d0e=_0x1bfb8b['x']+_0x1bfb8b[_0x380e18(0x1b1)]/0x2,_0x1cbf22=_0x1bfb8b['y']+_0x1bfb8b['height']+_0x1bfb8b[_0x380e18(0x1b0)][_0x380e18(0x276)]*0.5,_0x41e169={'x':_0x2b8d0e,'y':_0x1cbf22};createBulletSimple(_0x1bfb8b,_0x41e169)&&(_0x1bfb8b['capturedShipLastFiredTime']=_0x4d5956,playSound(_0x380e18(0x2c0),![],0.4));}}});}}else{if(gameOverSequenceStartTime>0x0){const _0x407aa8=_0x4d5956-gameOverSequenceStartTime,_0x54042e=_0x407aa8>=GAME_OVER_DURATION;if(_0x54042e&&!isShowingResultsScreen){isShowingResultsScreen=!![],stopSound(_0x5e22c3(0x2b3)),playSound(_0x5e22c3(0x215),!![],0.2),explosions=[];if(typeof updateExplosions==='function')updateExplosions();}}}!_0x2aa213&&renderGame();}catch(_0x594d38){console[_0x5e22c3(0x1a4)](_0x5e22c3(0x2b4),_0x594d38,_0x594d38[_0x5e22c3(0x226)]),isPaused=![];mainLoopId&&(cancelAnimationFrame(mainLoopId),mainLoopId=null);isInGameState=![],isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',alert(_0x5e22c3(0x1d8)),stopAllGameSoundsInternal(),isGridSoundPlaying=![],isInvincible=![],invincibilityEndTime=0x0;try{typeof showMenuState===_0x5e22c3(0x1b8)&&showMenuState();}catch(_0x2dbe2f){console[_0x5e22c3(0x1a4)]('Failed\x20to\x20return\x20to\x20menu\x20after\x20critical\x20error:',_0x2dbe2f);}}}function checkAndAwardExtraLife(_0x32d0fa=null){const _0x2cf040=_0x20bf56;try{const _0xc2b708=[];if(_0x32d0fa===0x1){const _0x55d542=isTwoPlayerMode&&selectedGameMode===_0x2cf040(0x273)?player1Lives:isTwoPlayerMode&&selectedGameMode===_0x2cf040(0x1e9)&&currentPlayer===0x1?playerLives:player1Lives,_0x1a0f53=isTwoPlayerMode&&selectedGameMode==='coop'?player1Score:isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x1?score:player1Score;_0xc2b708[_0x2cf040(0x2cf)]({'num':0x1,'currentLives':_0x55d542,'currentScore':_0x1a0f53,'thresholdsMet':player1LifeThresholdsMet});}else{if(_0x32d0fa===0x2&&isTwoPlayerMode){const _0xc556c0=selectedGameMode==='coop'?player2Lives:selectedGameMode===_0x2cf040(0x1e9)&&currentPlayer===0x2?playerLives:player2Lives,_0x716f15=selectedGameMode===_0x2cf040(0x273)?player2Score:selectedGameMode===_0x2cf040(0x1e9)&&currentPlayer===0x2?score:player2Score;_0xc2b708[_0x2cf040(0x2cf)]({'num':0x2,'currentLives':_0xc556c0,'currentScore':_0x716f15,'thresholdsMet':player2LifeThresholdsMet});}else{if(isTwoPlayerMode&&selectedGameMode===_0x2cf040(0x273)&&_0x32d0fa===null)_0xc2b708[_0x2cf040(0x2cf)]({'num':0x1,'currentLives':player1Lives,'currentScore':player1Score,'thresholdsMet':player1LifeThresholdsMet}),_0xc2b708[_0x2cf040(0x2cf)]({'num':0x2,'currentLives':player2Lives,'currentScore':player2Score,'thresholdsMet':player2LifeThresholdsMet});else{if(!isTwoPlayerMode&&(_0x32d0fa===null||_0x32d0fa===0x1))_0xc2b708[_0x2cf040(0x2cf)]({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet});else isTwoPlayerMode&&selectedGameMode==='normal'&&_0x32d0fa===currentPlayer&&(currentPlayer===0x1?_0xc2b708[_0x2cf040(0x2cf)]({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet}):_0xc2b708[_0x2cf040(0x2cf)]({'num':0x2,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player2LifeThresholdsMet}));}}}_0xc2b708['forEach'](_0x4ae006=>{const _0xba80ad=_0x2cf040;let _0x1cd874=![];while(!![]){let _0x10b37=![],_0x5d4f17=-0x1;const _0x163455=_0x4ae006['thresholdsMet'][_0xba80ad(0x27f)];if(_0x163455===0x0)_0x5d4f17=EXTRA_LIFE_THRESHOLD_1;else{if(_0x163455===0x1&&!_0x4ae006[_0xba80ad(0x265)][_0xba80ad(0x1f4)](EXTRA_LIFE_THRESHOLD_2))_0x5d4f17=EXTRA_LIFE_THRESHOLD_2;else{if(_0x163455>=0x1&&_0x4ae006['thresholdsMet'][_0xba80ad(0x1f4)](EXTRA_LIFE_THRESHOLD_1)&&_0x4ae006[_0xba80ad(0x265)][_0xba80ad(0x1f4)](EXTRA_LIFE_THRESHOLD_2)){let _0x56e359=0x0;_0x4ae006[_0xba80ad(0x265)]['forEach'](_0x4bad3e=>{_0x4bad3e>=EXTRA_LIFE_THRESHOLD_2&&(_0x4bad3e-EXTRA_LIFE_THRESHOLD_2)%RECURRING_EXTRA_LIFE_INTERVAL===0x0&&_0x56e359++;}),_0x5d4f17=EXTRA_LIFE_THRESHOLD_2+_0x56e359*RECURRING_EXTRA_LIFE_INTERVAL;}else{if(_0x163455===0x1&&_0x4ae006[_0xba80ad(0x265)][_0xba80ad(0x1f4)](EXTRA_LIFE_THRESHOLD_1)&&!_0x4ae006[_0xba80ad(0x265)][_0xba80ad(0x1f4)](EXTRA_LIFE_THRESHOLD_2))_0x5d4f17=EXTRA_LIFE_THRESHOLD_2;else _0x163455===0x1&&_0x4ae006[_0xba80ad(0x265)]['has'](EXTRA_LIFE_THRESHOLD_2)&&!_0x4ae006[_0xba80ad(0x265)][_0xba80ad(0x1f4)](EXTRA_LIFE_THRESHOLD_1)&&(_0x5d4f17=EXTRA_LIFE_THRESHOLD_1);}}}if(_0x5d4f17!==-0x1&&_0x4ae006['currentScore']>=_0x5d4f17&&!_0x4ae006[_0xba80ad(0x265)][_0xba80ad(0x1f4)](_0x5d4f17)){if(_0x4ae006[_0xba80ad(0x2bf)]===0x1){if(isTwoPlayerMode&&selectedGameMode===_0xba80ad(0x273))player1Lives++;else{if(isTwoPlayerMode&&selectedGameMode===_0xba80ad(0x1e9)&&currentPlayer===0x1)playerLives++;else{if(!isTwoPlayerMode)playerLives++;}}player1Lives=isTwoPlayerMode&&selectedGameMode===_0xba80ad(0x273)?player1Lives:isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x1?playerLives:player1Lives,_0x4ae006[_0xba80ad(0x1fa)]=player1Lives;}else{if(_0x4ae006[_0xba80ad(0x2bf)]===0x2){if(isTwoPlayerMode&&selectedGameMode===_0xba80ad(0x273))player2Lives++;else{if(isTwoPlayerMode&&selectedGameMode===_0xba80ad(0x1e9)&&currentPlayer===0x2)playerLives++;}player2Lives=isTwoPlayerMode&&selectedGameMode===_0xba80ad(0x273)?player2Lives:isTwoPlayerMode&&selectedGameMode===_0xba80ad(0x1e9)&&currentPlayer===0x2?playerLives:player2Lives,_0x4ae006[_0xba80ad(0x1fa)]=player2Lives;}}_0x4ae006[_0xba80ad(0x265)][_0xba80ad(0x27e)](_0x5d4f17),_0x1cd874=!![],_0x10b37=!![];}if(!_0x10b37)break;}_0x1cd874&&!showExtraLifeMessage&&!showCsBonusScoreMessage&&!showPerfectMessage&&!showCsHitsMessage&&!showCSClearMessage&&!showReadyMessage&&setTimeout(()=>{const _0x18788c=_0xba80ad;if(isInGameState){explosions=[];if(typeof updateExplosions===_0x18788c(0x1b8))updateExplosions();showExtraLifeMessage=!![],extraLifeMessageStartTime=Date['now'](),playSound(_0x18788c(0x26b),![],0.5);}},EXPLOSION_DURATION);});}catch(_0x4f0c1b){console['error']('Error\x20checking/awarding\x20extra\x20life:',_0x4f0c1b);}}